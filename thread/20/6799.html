<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Keyboard Examples (NDSLib/LibNDS) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Misc > Keyboard Examples (NDSLib/LibNDS)</h2>
<div id="posts">
<div class="post">
    <h4>#53483 - headspin - Thu Sep 08, 2005 6:24 pm</h4>
    <div class="postbody"><span class="postbody">Most DS coders eventually have to write a touchscreen keyboard. So here are my versions of it. It's not rocket science, but it can save you messing around writing one when you want basic text input in your own app.
<br/>
<br/>
I have two demo's, one that shows a very basic keyboard based on Pictochat, and another which has an extended keyboard based on a design by Dejital of DSLinux.
<br/>
<br/>
Feel free to add them to your own apps, or if any of the library developers or tutorial writers want to add a keyboard example, feel free to use code and/or graphics.
<br/>
<br/>
<a href="http://headkaze.webpal.info/" target="_blank">http://headkaze.webpal.info/</a><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"><br/><br/>Last edited by headspin on Sun Sep 11, 2005 9:28 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#53508 - Chetic - Thu Sep 08, 2005 10:04 pm</h4>
    <div class="postbody"><span class="postbody">[EDITED]
<br/>
You added a keyboard!
<br/>
I want to have your babies!<br/>_________________<br/>Packin':
<br/>
Grey DS with FlashMe v7
<br/>
1Gbit XG2T 2005 (Neoflash compatible)
<br/>
GBAMP, Supercard CF, 512Mb Magic Key 3 and EZFA 256Mbit</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53780 - headspin - Sun Sep 11, 2005 9:27 pm</h4>
    <div class="postbody"><span class="postbody">- Added LibNDS examples<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53868 - juhees - Mon Sep 12, 2005 8:58 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
looks good on screenshots, but it dosn't run in dsemu. Could there be a problem with the jpeg routines and emus? Becouse i couldn't get the jpeg example run in any emu too. (I can't run homebrew on hardware yet to test that).
<br/>
<br/>
If it should run in emus, what could the problem be?
<br/>
<br/>
greetings
<br/>
juhees</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53871 - headspin - Mon Sep 12, 2005 9:28 pm</h4>
    <div class="postbody"><span class="postbody">I've noticed the new libnds versions of the examples don't work on DSEmu whereas the older ndslib versions do. They all work fine on hardware though.
<br/>
<br/>
The libnds examples use the sourceforge tarball versions (20050804), not the latest CVS builds.
<br/>
<br/>
I may modify them again using the very latest CVS build of libnds and see if DSEmu works with that. I doubt it, since the updates of libnds are occuring much more frequently than DSEmu.
<br/>
<br/>
BTW I tried removing the jpeg display code from the keyboard example and they still don't work. So it's something else causing the problem. We need doublec to do an update to DSEmu.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54565 - headspin - Tue Sep 20, 2005 1:34 pm</h4>
    <div class="postbody"><span class="postbody">Extended Keyboard Example 3
<br/>
<br/>
This is an extended key implementation with a beveled keyboard skin using tiles and touchscreen processing.
<br/>
<br/>
This adds some extra keys to the previous example.
<br/>
<br/>
- Better touch-screen processing.
<br/>
- Changed jump detection from a "distance check" to a "Z register is not zero" check.
<br/>
- Added key highlight to make it easer to identify typing mistakes.
<br/>
- Added keyboard "click" audio feedback.
<br/>
- Shift key now works like in Pictochat (activates shift for next keypress only).<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54567 - El Hobito - Tue Sep 20, 2005 2:01 pm</h4>
    <div class="postbody"><span class="postbody">your link is broken i cant download it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54568 - headspin - Tue Sep 20, 2005 2:16 pm</h4>
    <div class="postbody"><span class="postbody">Stupid free hosts; must have gone over the size limit. Ok, I've removed the audio conversion directory from the archive. Should be ok now.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54569 - El Hobito - Tue Sep 20, 2005 2:30 pm</h4>
    <div class="postbody"><span class="postbody">thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57651 - El Hobito - Mon Oct 17, 2005 4:35 pm</h4>
    <div class="postbody"><span class="postbody">Hey head spin i've noticed that the newer libnds breaks compatability due to effectively removing the console.h functionality any chance of a fix?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57735 - headspin - Tue Oct 18, 2005 1:29 am</h4>
    <div class="postbody"><span class="postbody">Extended Keyboard Example 4
<br/>
<br/>
Changed keyboard to have indented keys.
<br/>
<br/>
* Fixed hi-light bug
<br/>
* Moved keyboard source into separate file
<br/>
* Updated for new libnds
<br/>
<br/>
<a href="http://headkaze.webpal.info/" target="_blank">http://headkaze.webpal.info/</a><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57745 - headspin - Tue Oct 18, 2005 4:45 am</h4>
    <div class="postbody"><span class="postbody">Sorry, update again...
<br/>
<br/>
- fixed some more bugs
<br/>
- nicer keyboard function (uses your own string at a length you specify)
<br/>
- backspace now works over multiple lines (bloody escape sequences!)
<br/>
- added echo on/off to console<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57755 - cory1492 - Tue Oct 18, 2005 7:29 am</h4>
    <div class="postbody"><span class="postbody">Using simple keyboard, trying to integrate it into EToolSMS but I ran into a hitch - I figured I could get by on my own with it but after more than a couple weeks working on it here and there I am now asking: any chance you feel like adding something to the simple keyboard demo so I can see where my guess at how things are working is slightly off? 
<br/>
<br/>
My goal:
<br/>
To retain the jpeg headspin guy while putting the keyboard ontop, and using one of the not used keys to hide/show ... of course, I may be 'barking up the wrong tree' if you dont know how or really dont have the time either, and in that case, thanks for the awesome keyboards and I will continue hacking at it till I figure something out (or simply not bother with a background at all).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57763 - headspin - Tue Oct 18, 2005 8:28 am</h4>
    <div class="postbody"><span class="postbody">The jpeg image cant display while the keyboard is displaying cos they are different video modes. The only way would be to reduce it to 16 colors and it would look horrid.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57783 - El Hobito - Tue Oct 18, 2005 3:36 pm</h4>
    <div class="postbody"><span class="postbody">wow that was quick! thanks headspin
<br/>
<br/>
edit: headspin your missing the power on function which is required for m3 and g6 compatability</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57814 - josath - Tue Oct 18, 2005 6:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>El Hobito wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
edit: headspin your missing the power on function which is required for m3 and g6 compatability</td> </tr></table><span class="postbody">
<br/>
<br/>
this seems like a problem with their firmware, not the homebrew. If it works on all standard flashcarts, but not a g6, then i would think the g6 is at fault. Someone should tell them, so they can update their firmware</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57822 - El Hobito - Tue Oct 18, 2005 7:22 pm</h4>
    <div class="postbody"><span class="postbody">its pretty standard to do and should be in all homebrew for power efficiency if nothing else. 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">POWER_CR=POWER_ALL_2D;</td> </tr></table><span class="postbody">
<br/>
should be sufficient
<br/>
<br/>
now the fact that lcd_swap() causes it to be on the wrong screens is a firmware bug.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57823 - cory1492 - Tue Oct 18, 2005 7:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>headspin wrote:</b></span></td> </tr> <tr> <td class="quote">The jpeg image cant display while the keyboard is displaying cos they are different video modes. The only way would be to reduce it to 16 colors and it would look horrid.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks HeadSpin, I thought of that as well, but I see:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">BG3_CR = BG_BMP16_256x256;</td> </tr></table><span class="postbody"> for the background bitmap and </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">BG0_CR = BG_COLOR_16</td> </tr></table><span class="postbody"> for the tiles, and assumed they were both BG's in 16 bit and could work with eachother... obviously I needed to clear up this misconception before I continue learning anything about graphics, kinda essential - thanks for pointing out my oversight.
<br/>
<br/>
Could they keyboard not be rendered as 2 bitmaps (caps and nocaps, copied in only under those conditions) and still retain the keyboard map and touchscreen functionality? It would lose any ability to simply have button presses on-screen, but... I guess I could also use a 16 color background wrather than a 16 bit bitmap, would be a heck of alot simpler too.
<br/>
<br/>
<span style="font-weight: bold">El Hobito</span>: which firmware? G6/M3 or the DS's?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57840 - El Hobito - Tue Oct 18, 2005 9:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">El Hobito: which firmware? G6/M3 or the DS's?</td> </tr></table><span class="postbody">
<br/>
<br/>
m3/g6</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
