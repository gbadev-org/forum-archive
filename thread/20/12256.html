<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>MP3 playback in Moonshell v1.6 in an M3 Simply. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > MP3 playback in Moonshell v1.6 in an M3 Simply.</h2>
<div id="posts">
<div class="post">
    <h4>#116496 - alexandertyler - Fri Jan 26, 2007 10:58 am</h4>
    <div class="postbody"><span class="postbody">I have recently purchased an M3 Simply with a 1 GB pqi TF card from Taiwan. I have the newest version of the M3 Simply software, 1.02 beta, as well as the appropriate Moonshell 1.6 version.
<br/>
<br/>
Everything works very well EXCEPT mp3 playback. *.dpg files run fine as do *.nds. The *.dpg files sound and look great (I use BatchDPG). *.nds run perfectly as well. The TF card is formatted with Fat16/32K clusters.
<br/>
<br/>
These are some of the errors I can see when I hold the start button on my DS Lite:
<br/>
<br/>
I found that every time Moonshell skips a beat, if I press start, the screen that pops up shows a CPU overflow in the following format:
<br/>
<br/>
strpcm:CPU overflow.
<br/>
<br/>
Does anybody know what that is? Also, if you hold select, it fast forwards the song and helps a bit. Maybe a buffer issue due to read speeds?
<br/>
<br/>
I also found:
<br/>
<br/>
decoding error 0x0101 (lost synchronization) at byte offset 8192
<br/>
<br/>
decoding error 0x0101 (lost synchronization) at byte offset 121948
<br/>
<br/>
decoding error 0x0235 (bad_main_data_begin_pointer) at byte offset 121948
<br/>
<br/>
I think it has something to do with the buffer but need your expert opinions to figure out exactly what is going on. I find it odd that the *.dpg files run without a hitch but simple mp3s get butchered. These are 128k variable and non-variable bitrate mp3s. Any help will be appreciated, maybe Moonlight/Infantile Paralyser will read this and implement a fix in the next Moonshell update?
<br/>
<br/>
I tried looking for something to change in the various *.ini files but found no way to increase the buffer size.
<br/>
<br/>
In case you were wondering, I just put the micro SD card into the adapter for my SD card reader -- makes it like a standard SD card -- and audio playback is flawless. Also I tried the micro SD card in the reader provided by M3 and, again, music playback is flawless.
<br/>
<br/>
Later,
<br/>
<br/>
Alex</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116503 - HyperHacker - Fri Jan 26, 2007 12:22 pm</h4>
    <div class="postbody"><span class="postbody">I get that CPU overflow every time I press Start while playing music, I don't think it's anything to worry about.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116541 - Dan2552 - Fri Jan 26, 2007 5:19 pm</h4>
    <div class="postbody"><span class="postbody">not the best of solutions, but you could always put your music into a video (with a black image or something) and convert it to DPG</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116551 - Firon - Fri Jan 26, 2007 8:03 pm</h4>
    <div class="postbody"><span class="postbody">I've played VBR files just fine. Only 320kbps files seem to skip.
<br/>
<br/>
Also, strpcm:CPU overflow. shows up whenever you pause, it's normal. Now, if you see a lot of that and you only paused once, then it just means that it can't decode fast enough (and again, only 320kbps files should do this).
<br/>
<br/>
decoding error 0x0235 (bad_main_data_begin_pointer) at byte offset 121948  probably means that the MP3 is corrupted.
<br/>
<br/>
It's also possible your SD card is slow, or has bad sectors, though not too likely since you have no problems with DPGs.
<br/>
<br/>
Make sure you turn off the "save resume every 5 seconds" option.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116556 - alexandertyler - Fri Jan 26, 2007 8:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Firon wrote:</b></span></td> </tr> <tr> <td class="quote">I've played VBR files just fine. Only 320kbps files seem to skip.
<br/>
<br/>
Also, strpcm:CPU overflow. shows up whenever you pause, it's normal. Now, if you see a lot of that and you only paused once, then it just means that it can't decode fast enough (and again, only 320kbps files should do this).
<br/>
<br/>
decoding error 0x0235 (bad_main_data_begin_pointer) at byte offset 121948  probably means that the MP3 is corrupted.
<br/>
<br/>
It's also possible your SD card is slow, or has bad sectors, though not too likely since you have no problems with DPGs.
<br/>
<br/>
Make sure you turn off the "save resume every 5 seconds" option.</td> </tr></table><span class="postbody">
<br/>
<br/>
I changed it in the moonshell config file and now my mp3s work 100% -- THANK YOU SOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO MUCH!!!
<br/>
<br/>
Later,
<br/>
<br/>
Alex</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116600 - tepples - Sat Jan 27, 2007 6:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>alexandertyler wrote:</b></span></td> </tr> <tr> <td class="quote">decoding error 0x0101 (lost synchronization) at byte offset 8192
<br/>
<br/>
decoding error 0x0101 (lost synchronization) at byte offset 121948
<br/>
<br/>
decoding error 0x0235 (bad_main_data_begin_pointer) at byte offset 121948
<br/>
<br/>
I think it has something to do with the buffer but need your expert opinions to figure out exactly what is going on. I find it odd that the *.dpg files run without a hitch but simple mp3s get butchered. These are 128k variable and non-variable bitrate mp3s.</td> </tr></table><span class="postbody">
<br/>
For the record, did you encode these MP3s from your own CDs? Or did you get these MP3s from a <a class="postlink" href="http://p2p.ytmnd.com/" target="_blank">PP2P2P2PP2P</a> network? If the latter, they may have corrupt frames in them. Are they also butchered in PC based players?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116603 - alexandertyler - Sat Jan 27, 2007 6:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>alexandertyler wrote:</b></span></td> </tr> <tr> <td class="quote">decoding error 0x0101 (lost synchronization) at byte offset 8192
<br/>
<br/>
decoding error 0x0101 (lost synchronization) at byte offset 121948
<br/>
<br/>
decoding error 0x0235 (bad_main_data_begin_pointer) at byte offset 121948
<br/>
<br/>
I think it has something to do with the buffer but need your expert opinions to figure out exactly what is going on. I find it odd that the *.dpg files run without a hitch but simple mp3s get butchered. These are 128k variable and non-variable bitrate mp3s.</td> </tr></table><span class="postbody">
<br/>
For the record, did you encode these MP3s from your own CDs? Or did you get these MP3s from a <a class="postlink" href="http://p2p.ytmnd.com/" target="_blank">PP2P2P2PP2P</a> network? If the latter, they may have corrupt frames in them. Are they also butchered in PC based players?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
No, they are my own files, no P2P stuff. But the problem was fixed by changing the moonshl.ini as mentioned above.
<br/>
<br/>
Thanks,
<br/>
<br/>
Alex</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
