<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Nin Wifi short range & Open/Shared Mode - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Misc > Nin Wifi short range & Open/Shared Mode</h2>
<div id="posts">
<div class="post">
    <h4>#94776 - Snowy? - Wed Jul 26, 2006 2:42 am</h4>
    <div class="postbody"><span class="postbody">Hi there as you may have been reading I've started my fun path to learning about wifi.
<br/>
Anyway while trying to consolidate the latest drivers Ralink + MSI drivers (for the Gateway function) I was going through adding the Nintendo Wifi Device Id's etc to the USB drivers when I came across a possiable reason for Nintendo's own drivers having crap range....
<br/>
<br/>
Nintendo's 1.04 rt2500usb.inf
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">;
<br/>
; Use Tx power
<br/>
;
<br/>
HKR, ,                            TxPower,       3, "3"
<br/>
HKR, Default,                     RTSThresh,       0, "3"
<br/>
HKR, NDI\params\Txpower,        ParamDesc,       0, "Tx power"
<br/>
HKR, NDI\params\Txpower,        type,            0, "int"
<br/>
HKR, Ndi\params\Txpower,        default,         0, "3"
<br/>
HKR, NDI\params\Txpower,        min,             0, "1"
<br/>
HKR, NDI\params\Txpower,        max,             0, "4"
<br/>
HKR, NDI\params\Txpower,        step,            0, "1"
<br/>
HKR, NDI\params\Txpower,        optional,        0, "0"</td> </tr></table><span class="postbody">
<br/>
Latest Ralink 3.02.0.0 rt2500usb.inf
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">;
<br/>
; TX Power
<br/>
;
<br/>
HKR, ,                            TXPower,         0, "0"
<br/>
HKR, Default,                     TXPower,         0, "0"</td> </tr></table><span class="postbody">
<br/>
So I thought that's funny...further inversigation lead me to believe the Ralink drivers set their own TXPower level on connection this usually being around 27!!! More investigation and I <a class="postlink" href="http://rt2x00.serialmonkey.com/phpBB2/viewtopic.php?t=1225&amp;postdays=0&amp;postorder=asc&amp;start=0&amp;sid=7948389f889a377485e7b0bbc444f8c5" target="_blank">found this</a> which says the rt2500 has 32 levels for the TXPower value and as you can see Nintendo set it to a default of 3 with a max value of 4!?!
<br/>
<br/>
The last question I have in my mind though is are the TXPower levels somehow valued differently in Nintendo's drivers???
<br/>
<br/>
Plus what is with that line shown above in the Nintendo drivers....
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">HKR, Default,                     RTSThresh,       0, "3"</td> </tr></table><span class="postbody">
<br/>
Surely it should be...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">HKR, Default,                     TxPower,       0, "3"</td> </tr></table><span class="postbody">
<br/>
<br/>
Edit see below <a class="postlink" href="http://rapidshare.de/files/27204241/NWiFi_Test_2.zip.html" target="_blank">new test</a>
<br/>
<br/>
PS I tested adding the menu to my own PCi drivers and got about 10% more signal (according to Wifi_lib_test 0.3) and seemed to get a nice full signal further away - I reset it to zero again though as I think I need to find out what will happen to my card if I permanently leave it on max power.
<br/>
<br/>
PPS almost finished the MSI + Ralink updated drivers will need PCI and USB testers - though I'm pritty sure the PCI one is fine... hmmm I'll have to make some setup instructions for the Gateway too
<br/>
<br/>
Edit sorry about the wait there just added a quick TXT of how-to to it :)[/url]</span><span class="gensmall"><br/><br/>Last edited by Snowy? on Thu Jul 27, 2006 2:08 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#94781 - Snowy? - Wed Jul 26, 2006 3:01 am</h4>
    <div class="postbody"><span class="postbody">Post a message on here if you get batter range from the test :) Thanks
<br/>
<br/>
(Goes off to see what other setting you can add to the Ralink drivers)
<br/>
<br/>
Edit Last thought I could be wrong about getting extra out of mine at 31 I may hve gotted more signal becuase it's night time here but ..... I just tested a few values in the newer Ralink drivers the settings value doe not seem to make a difference</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94792 - tepples - Wed Jul 26, 2006 3:54 am</h4>
    <div class="postbody"><span class="postbody">It might be on purpose, to make sure that strangers don't use your Internet connection. It might also be not to <a class="postlink" href="http://en.wikipedia.org/wiki/Blanketing" target="_blank">blanket</a> other people's Wi-Fi networks.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94858 - Snowy? - Wed Jul 26, 2006 2:10 pm</h4>
    <div class="postbody"><span class="postbody">Further enquiry (I've checked through atleast 6 different manufactures drivers now) led me to the Linksys driver....
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">HKR, NDI\params\Txpower,          ParamDesc,          0, "Tx power"
<br/>
HKR, NDI\params\TxPower,          type,               0, "enum"
<br/>
HKR, NDI\params\TxPower,          default,            0, "0"
<br/>
HKR, NDI\params\TxPower\enum,     0,                  0, "Auto"
<br/>
HKR, NDI\params\TxPower\enum,     1,                  0, "100%"
<br/>
HKR, NDI\params\TxPower\enum,     2,                  0, "75%"
<br/>
HKR, NDI\params\TxPower\enum,     3,                  0, "50%"
<br/>
HKR, NDI\params\TxPower\enum,     4,                  0, "25%"
<br/>
HKR, NDI\params\TxPower\enum,     5,                  0, "10%"
<br/>
HKR, NDI\params\TxPower\enum,     6,                  0, "6%"</td> </tr></table><span class="postbody">
<br/>
Now it would make sence that Nintendo would just limit it to modes 1 through 4 (since Auto my of caused their old driver problems &amp; all you need is 100% max eh)
<br/>
<br/>
So this should probably get you more range (without changing any drivers)...
<br/>
Click 'Start'
<br/>
Click 'Run'
<br/>
Type in devmgmt.msc hit Enter (this opens the 'Device Manager')
<br/>
<br/>
Make sure your Nintendo Wi-Fi USB Connector is plugged in
<br/>
<br/>
Find your "Nintendo Wi-Fi USB Connector" in the device list
<br/>
Right-click on it and click on 'Properties'
<br/>
Click on 'Advanced'
<br/>
Click on 'Tx Power'
<br/>
Change the value in the right hand box to '1' for 100%
<br/>
Click on 'Ok'
<br/>
You will probably need to
<br/>
Restart the Nintendo Ap service or your PC since any changes to the Advance tab seem to mean you have to reboot the AP/Gateway software (That seems to be common to all the Ralink based software)
<br/>
<br/>
Tepples I hear ya and I'm investigating MIMO (when I get the time - it's just more than one Antenna to remove noise right??) but if there on differnet channels and considering the signal profile of most of these devices aerials I'm not sure where the problem would be...
<br/>
<br/>
Oh and these are cool...
<br/>
<a class="postlink" href="http://ronobvious.livejournal.com/296.html" target="_blank">Ralink USB wifi adapter external antenna modification</a>
<br/>
<a class="postlink" href="http://www.usbwifi.orcon.net.nz/" target="_blank">Poor Man's WiFi - DIY antenna's</a>
<br/>
I think I need to make a dish change my profile... I wonder if anyone has made a combo antenna with an omni tracker (an array of them to triangulate?) and a single directional dish to lock on motorised of course lol but then MIMO makes it pointless but then there would be a little more security and more distance no? - just a thought :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94860 - daninski - Wed Jul 26, 2006 2:36 pm</h4>
    <div class="postbody"><span class="postbody">when i was messing around behind the top screen of my dslite i noticed that they've put a massive coil antenna in the top screen now. what'd happen if i extended that? are there any power issues and stuff?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94871 - Mighty Max - Wed Jul 26, 2006 3:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>daninski wrote:</b></span></td> </tr> <tr> <td class="quote">when i was messing around behind the top screen of my dslite i noticed that they've put a massive coil antenna in the top screen now. what'd happen if i extended that? are there any power issues and stuff?</td> </tr></table><span class="postbody">
<br/>
<br/>
The range will reduce if you don't know what you do.
<br/>
<br/>
WiFi sends at ~2.4GHz. Which is a lambda of ~12.5cm. To have an effective antenna, you should allways use an antenna of a length that is a multiple of lambda/4. As the Lite is 14.9cm width, its likely that the antenna size ios allready optimal.
<br/>
<br/>
Interesting would by an Yagi-Antenna for directional focusing. ... Interesting at least how i'd look like *g*<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94873 - Snowy? - Wed Jul 26, 2006 3:39 pm</h4>
    <div class="postbody"><span class="postbody">As far as I can see/know I would think that if you used a better antenna or a mroe directional one you should be able to pick up a signal from a further distance.
<br/>
<br/>
I'm just a novice at this stuff though so Tepples or someone else might have a better idea</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95039 - Snowy? - Thu Jul 27, 2006 2:06 pm</h4>
    <div class="postbody"><span class="postbody">Well I hear'd back from <a class="postlink" href="http://www.m3-forum.com/" target="_blank">DevilHawk</a> who said changing the value to 1 gave him an extra 3 feet (not much but every little helps) anyway he mentioned not being able to run Homebrew...
<br/>
<br/>
The current Nin DS wifi libs seem to only like it when you run your AP in Open mode and the DS games only let you use WEP in Shared mode.
<br/>
Well this is down to just one value in the registry (lol I've seen it because I'm trying to fix MSI's buggy drivers to save settings lol - I think there missing some DLL's lol - fun stuff for later today) anyway so I made a test 2 driver which should add in the option of switching from Shared to Open, however once again I cannot test it so if someone wants to... <a class="postlink" href="http://rapidshare.de/files/27204241/NWiFi_Test_2.zip.html" target="_blank">test2</a>
<br/>
<br/>
It may be flawed though as What I think happens is Nintendow EXE sets the value for Shared and Ralink software in XP seems to need a reload when you play with the settings of the device in device manager.
<br/>
Worth a sho for those who don't want to switch from the Nintendo Software.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95141 - ssj4android - Fri Jul 28, 2006 12:25 am</h4>
    <div class="postbody"><span class="postbody">Nintendo games won't work with SoftAP in open mode. However, they will work with my router in open mode. SoftAP is obviously doing something differently.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95170 - Snowy? - Fri Jul 28, 2006 3:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ssj4android wrote:</b></span></td> </tr> <tr> <td class="quote">Nintendo games won't work with SoftAP in open mode. However, they will work with my router in open mode. SoftAP is obviously doing something differently.</td> </tr></table><span class="postbody">
<br/>
And homebrew will only work through the Software AP in open mode so I adjusted the driver so you should be able to switch the mode over :)
<br/>
<br/>
And yeah they do things differently... very shittily differently (Ralink) lol so many different exe's lol and even if they have the same version number they can be different!
<br/>
<br/>
Anyway a little more to be added now to my MSI/Ralink modded uber driver (I want to cover all the RT2500 devices with it) hopefully tomorrow I'll be done :) PS most of these dam exe's/drivers for RT2500 devices are subsys specific (device specific) and loose functionality if you use a different manufactures driver for your 'same chipset' card! 0_0
<br/>
<br/>
EDIT to clarify...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Nintendo games won't work with SoftAP in open mode with WEP on.</td> </tr></table><span class="postbody"> They will work in Open mode but not with WEP on (Although I haven't yet read anything on why if WEP is off does the mode (Open/Shared) effect the connection)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
