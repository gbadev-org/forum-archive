<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>LoveLite (with source) - adjust your brightness! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > LoveLite (with source) - adjust your brightness!</h2>
<div id="posts">
<div class="post">
    <h4>#106718 - Lick - Sun Oct 22, 2006 11:13 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-style: italic">Update</span>: LoveLite-1.1 is released. It's better for your hardware.
<br/>
<br/>
<span style="font-weight: bold">Detailed post</span>
<br/>
<a class="postlink" href="http://licklick.wordpress.com/2006/10/22/lovelite/" target="_blank">http://licklick.wordpress.com/2006/10/22/lovelite/</a>
<br/>
<br/>
<span style="font-weight: bold">Project name:</span>
<br/>
LoveLite - actually (Love)Lite. But it?s easier without the paranthesis. No I'm not a hippy, I'm in love. =D
<br/>
<br/>
<span style="font-weight: bold">Screenshot:</span>
<br/>
<a class="postlink" href="http://licklick.wordpress.com/files/2006/10/lovelitescreenshot.png" target="_blank">http://licklick.wordpress.com/files/2006/10/lovelitescreenshot.png</a>
<br/>
<br/>
<span style="font-weight: bold">Description:</span>
<br/>
LoveLite allows you to permanently (that is: power-off-proof) adjust your Lite brightness setting. It?s a project that came out of an earlier experiment (see below). There?s also a very sensitive Power Off button so you don?t have to push the powerbutton (the real one) twice.
<br/>
I never ran ALite, but I heard that ALite doesn?t permanently save the brightness. So I made LoveLite.
<br/>
<br/>
<span style="font-weight: bold">Download</span>
<br/>
<a class="postlink" href="http://lick.huuf.net/LoveLite-1.1.zip" target="_blank">http://lick.huuf.net/LoveLite-1.1.zip</a> (Updated)
<br/>
<br/>
<br/>
Enjoy!
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"><br/><br/>Last edited by Lick on Mon Oct 23, 2006 12:05 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#106721 - heyyouguys - Sun Oct 22, 2006 11:51 pm</h4>
    <div class="postbody"><span class="postbody">Nice work! Will you incorporate this into dsliveweather as well?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106723 - Lick - Mon Oct 23, 2006 12:07 am</h4>
    <div class="postbody"><span class="postbody">heyyouguys: it's already implemented, but I'm actually considering removing it as it might be bad for your hardware when the value is written each and everytime you press the sun-icon. That's the reason why I released LoveLite-1.1, so people can play with the brightness, but save to hardware only ONCE!
<br/>
<br/>
Thanks for the feedback,
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106726 - heyyouguys - Mon Oct 23, 2006 12:17 am</h4>
    <div class="postbody"><span class="postbody">Sounds like your hesitation is a good hesitation and having a seperate write once after you have chosen what you want is a good idea. I guess you could do some sort of pull down or submenu for dslw then have a final save. Though not worth the trouble.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106728 - dLHa - Mon Oct 23, 2006 12:53 am</h4>
    <div class="postbody"><span class="postbody">Thank you.
<br/>
<br/>
Now I don't have to remove my passcard to change my brightness settings. :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106762 - heyyouguys - Mon Oct 23, 2006 6:31 am</h4>
    <div class="postbody"><span class="postbody">Lick, when I go to touch the different settings, it is spiratic (sp?) if it takes the change in brightness. I tap and nothing happens part of the time, soft or hard taps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106776 - Lick - Mon Oct 23, 2006 9:53 am</h4>
    <div class="postbody"><span class="postbody">Yeah I noticed. The best way to do this is to hold the stylus down till you see something happening. Thanks for reporting it! I'll see what I can do.
<br/>
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106782 - TheYak - Mon Oct 23, 2006 10:27 am</h4>
    <div class="postbody"><span class="postbody">Is the target the full size of the square or just a corner?  It seems I've got to hit the severe right of it for it to have any effect.  Calibration seems fine for everything else (like DSLW, DSO, etc.)  
<br/>
<br/>
Once I found where to tap, works like a charm.  Thank you!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106784 - Lick - Mon Oct 23, 2006 10:54 am</h4>
    <div class="postbody"><span class="postbody">It should be the whole square. I'm working on 1.2 to improve the input as well as adding ReturnToSupercard.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107133 - felix123 - Fri Oct 27, 2006 12:17 am</h4>
    <div class="postbody"><span class="postbody">yyjoy (a China forum) users are reporting that using it on a iQue DSL bricks the machine. It will only show 2 white screens at power on afterwards. It happened to at least 3 people. They believe it is related to this line: </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Write_Flash(0x3FE00, usersettings, 0x100);</td> </tr></table><span class="postbody">
<br/>
They also report there are graphics glitches on EZ4.
<br/>
<a class="postlink" href="http://bbs.yyjoy.com/thread-6213-1-1.html" target="_blank">original post</a>
<br/>
<br/>
HKCC (a Hong Kong forum) users are reporting that there are bugs on DSL with M3L.
<br/>
*Graphics glitches on top screen
<br/>
*Power off on touchscreen doesn't work
<br/>
*Other firmware settings (like name) lost when you power back on
<br/>
<a class="postlink" href="http://www.hacken.cc/bbs/thread-59622-1-1.html" target="_blank">original post</a>
<br/>
<br/>
And there's a belief that this software is for SuperCard only due to your "(Maybe) ?Return to Supercard? button" comment.
<br/>
<br/>
If you need help communicating with them please tell me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107153 - josath - Fri Oct 27, 2006 7:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>felix123 wrote:</b></span></td> </tr> <tr> <td class="quote">yyjoy (a China forum) users are reporting that using it on a iQue DSL bricks the machine. It will only show 2 white screens at power on afterwards. It happened to at least 3 people. They believe it is related to this line: <table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Write_Flash(0x3FE00, usersettings, 0x100);</td> </tr></table><span class="postbody">
<br/>
They also report there are graphics glitches on EZ4.
<br/>
<a class="postlink" href="http://bbs.yyjoy.com/thread-6213-1-1.html" target="_blank">original post</a>
<br/>
<br/>
HKCC (a Hong Kong forum) users are reporting that there are bugs on DSL with M3L.
<br/>
*Graphics glitches on top screen
<br/>
*Power off on touchscreen doesn't work
<br/>
*Other firmware settings (like name) lost when you power back on
<br/>
<a class="postlink" href="http://www.hacken.cc/bbs/thread-59622-1-1.html" target="_blank">original post</a>
<br/>
<br/>
And there's a belief that this software is for SuperCard only due to your "(Maybe) ?Return to Supercard? button" comment.
<br/>
<br/>
If you need help communicating with them please tell me.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Maybe IQU DS holds the user settings in a different location? Hopefully they had flashme installed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107181 - Lick - Fri Oct 27, 2006 1:07 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">Bricked iQue DSL</span>
<br/>
Well, this sucks. I'm gonna check for iQue before writing to the firmware in the next version. I think it uses a different SPI procedure to write to flash, or the user settings are indeed located at another position.
<br/>
So sorry for not knowing about this. So sorry. =(
<br/>
<br/>
<span style="font-weight: bold">Graphics glitches on EZ4</span>
<br/>
Yes, I fixed those already. And I added Return To OS for "some" EZ cards. When the next release is out, I will put together a table that tells which cards are supported.
<br/>
<br/>
<span style="font-weight: bold">Problems on the M3L</span>
<br/>
Graphics glitches: perhaps the same as the ones on EZ4. Hope they're fixed.
<br/>
Power Off doesn't work: no idea. 
<br/>
Other firmware settings lost: that's crap. I'll see what I can do. <span style="font-weight: bold">Is this bug perhaps found on iQue, not normal DS?</span>
<br/>
<br/>
<span style="font-weight: bold">Supercard only? No!</span>
<br/>
Nope, it's already supporting Supercard miniSD and EZFlash IV Lite!! I'm planning to have a broader device support.
<br/>
<br/>
Thanks for reporting all these bugs and fatal disasters. I will my best to fix them. Would you please tell those guys "Deu Bu Chi" or "Deu Mm Chuu". I know how it feels when your dear DS is broken. SORRY!
<br/>
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107292 - ahtin - Sat Oct 28, 2006 8:29 am</h4>
    <div class="postbody"><span class="postbody">I am ahtin from HKCC, I found the problem of M3l with DSL
<br/>
<br/>
this bug found from my JP NDSL with flashmeV7, Username and Birth-day have been reset but Date and Time doesnt change, I have to fill in the user setting again when I getting in NDS mode.<br/>_________________<br/><a href="http://www.hacken.cc" target="_blank">http://www.hacken.cc</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107299 - Lick - Sat Oct 28, 2006 9:56 am</h4>
    <div class="postbody"><span class="postbody">Thanks ahtin! I will look at it.
<br/>
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132505 - spinal_cord - Wed Jun 27, 2007 10:23 am</h4>
    <div class="postbody"><span class="postbody">Is there an earlyer version of this, with only the light changing code? I'm not so good ant reading code, and finding the bits I need.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132532 - olimar - Wed Jun 27, 2007 3:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by olimar on Wed Aug 20, 2008 10:41 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#132538 - Lick - Wed Jun 27, 2007 5:20 pm</h4>
    <div class="postbody"><span class="postbody">The iQue firmware is already supported. The saving code now validates the firmware location by checking the fw-version and something else (don't remember). If those values aren't like expected, the save code will terminate to avoid bricking.
<br/>
<br/>
<a class="postlink" href="http://licklick.wordpress.com/tag/lovelite/" target="_blank">Latest version is 1.4</a>. 
<br/>
<br/>
The brightness code: basically you tell the ARM7 to do this:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">REG_IME = 0;
<br/>
int r = readPowerManagement(4);
<br/>
<br/>
if (r &amp; 64) {              // hw = lite?
<br/>
<br/>
    r &amp;= ~3;
<br/>
    writePowerManagement(4, r | level);        // level = 0,1,2,3
<br/>
<br/>
}
<br/>
REG_IME = 1;</td> </tr></table><span class="postbody">
<br/>
<br/>
You have to make sure these calls aren't interrupted, so you have to disable interrupts before this and enable interrupts after this. Storing the brightness is a more advanced as it involves writing to the Flash memory where the firmware (!) is stored. 
<br/>
If you really have to, then check out the "NDSX_ARM7_StoreBrightness" function in "ndsx_brightness.h" in the 1.4 package. The file is located in "source.zip/common". Make sure you run your tests on a FlashMe'd DS.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132594 - spinal_cord - Thu Jun 28, 2007 12:47 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the info, I don't think I'll try to save the setting, I don't like the idea of writing to the firmware, not till I know what I'm doing.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
