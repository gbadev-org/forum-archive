<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>dsType - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > dsType</h2>
<div id="posts">
<div class="post">
    <h4>#71640 - kevinc - Mon Feb 13, 2006 9:03 pm</h4>
    <div class="postbody"><span class="postbody">Probably topping the list of the least needed projects for the DS, I wrote during the weekend a quick hack of a Truetype font reader/renderer:
<br/>
<br/>
<a href="http://www.thedarkfantasy.com/dstype/dstype-pic.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
<a class="postlink" href="http://www.thedarkfantasy.com/dstype/dstype.zip" target="_blank">Source</a>
<br/>
<br/>
<br/>
Curve straightening is not implemented yet, so if you scale it too much up you'll notice the jagged edges. It worked with all the fonts I threw it, but it's far from perfect, so if you have one that doesn't work please give me a link ^_^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71719 - Darkflame - Tue Feb 14, 2006 2:40 am</h4>
    <div class="postbody"><span class="postbody">Least needed in terms of funcationality maybe, but its still very good work :)
<br/>
<br/>
Especialy as some of us our hopeing to make our DS's as compatible with standard pc formats as possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71753 - Snuk the Great - Tue Feb 14, 2006 7:01 am</h4>
    <div class="postbody"><span class="postbody">Hmm, i didn't get it to work, but you probably got to recompile the nds with the fonts, or did it just not work for me :P. The idea is pretty great though!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71754 - Dudu.exe - Tue Feb 14, 2006 7:14 am</h4>
    <div class="postbody"><span class="postbody">its a good step to make a browser!<br/>_________________<br/><a class="postlink" href="http://flickr.com/photos/stuffbox" target="_blank">http://flickr.com/photos/stuffbox</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71789 - kevinc - Tue Feb 14, 2006 3:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Snuk the Great wrote:</b></span></td> </tr> <tr> <td class="quote">Hmm, i didn't get it to work, but you probably got to recompile the nds with the fonts, or did it just not work for me :P. The idea is pretty great though!</td> </tr></table><span class="postbody">
<br/>
<br/>
You need to put the fonts somewhere and then tell InitFont a pointer to where to read it. It only needs InitFont(), setForegroundColor() and drawText() with someplace to draw, the rest is optional.
<br/>
<br/>
Did it get past the loading or does it get stuck on the drawing?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71973 - radical_ratzor - Wed Feb 15, 2006 7:32 pm</h4>
    <div class="postbody"><span class="postbody">Brilliant. I can't compile the code myself though so i'll be waiting for a .ds.gba file or something of that ilk.
<br/>
<br/>
Great work though kevinc, can't wait to try it out. I design fonts now and again as a graphic designer, and this program would be a great way to have them handy on the move.
<br/>
<br/>
I've got an interview in a few weeks so I can pimp it then ^_^
<br/>
<br/>
Well done mate,
<br/>
<br/>
Rat<br/>_________________<br/>Roll on over, to  <a class="postlink" href="http://www.drunkencoders.com/" target="_blank">DrunkenCoders!</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71988 - tepples - Wed Feb 15, 2006 9:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>radical_ratzor wrote:</b></span></td> </tr> <tr> <td class="quote">I design fonts now and again as a graphic designer</td> </tr></table><span class="postbody">
<br/>
What is the affordable program to enter font outlines into a Windows PC?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71999 - kevinc - Wed Feb 15, 2006 10:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>radical_ratzor wrote:</b></span></td> </tr> <tr> <td class="quote">Brilliant. I can't compile the code myself though so i'll be waiting for a .ds.gba file or something of that ilk.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
There is a ds.gba file in the zip (with the extension .nds.nds, so it doesn't give trouble with my SCSD) if you want to try it on the hardware :) ; it just draws what's in the screenshot and then stops.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72583 - TheChuckster - Mon Feb 20, 2006 3:10 am</h4>
    <div class="postbody"><span class="postbody">If there was a way to have it NOT do antialiasing, it would be perfect. At the small font sizes I'm working with for my program, antialiasing just makes it blurry and unreadable. Also, my background isn't a solid color, so there are visible artifacts surrounding the text.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72640 - Sylfurd - Mon Feb 20, 2006 6:46 pm</h4>
    <div class="postbody"><span class="postbody">It looks really cool ! 
<br/>
<br/>
But it doesn't work on my GBAMP :/
<br/>
<br/>
I had the same idea but I haven't found documentation on the ttf file format ...
<br/>
Great you realized it with subpixels fonts :)
<br/>
<br/>
It's a step to a web browser and to a great text editor !
<br/>
<br/>
Edit: Ok you use GBFS, it's not currently compatible with GBAMP :/</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74313 - StoneCypher - Sat Mar 04, 2006 7:42 am</h4>
    <div class="postbody"><span class="postbody">Neat.  I mean, I use freetype, but that's neat.
<br/>
<br/>
To fix your subpixel antialiaser, do a two-stage low pass filter at 1/3 downward each.  that way the energy distribution is theoretically perfectly even across the color subchannels no matter which actual column is used, and as a result you don't get those color fringes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
               1
<br/>
<br/>
       /       |       \
<br/>
<br/>
      1/3     1/3     1/3
<br/>
<br/>
     / | \   / | \   / | \
<br/>
<br/>
  1/9   2/9   3/9   2/9   1/9
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
If that doesn't make sense, find me on #dsdev on efnet and i'll explain.<br/>_________________<br/>Quidquid Latine dictum sit, altum Sonatur
<br/>
<a href="http://feeds.feedburner.com/StoneHome.gif">[Images not permitted - Click here to view it]</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74321 - M3d10n - Sat Mar 04, 2006 11:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>radical_ratzor wrote:</b></span></td> </tr> <tr> <td class="quote">I design fonts now and again as a graphic designer</td> </tr></table><span class="postbody">
<br/>
What is the affordable program to enter font outlines into a Windows PC?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Well, Corel Draw can export TTF files. Not quite an specialized tool, but it did the job when I had to create a font for a college project.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74326 - kevinc - Sat Mar 04, 2006 2:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>StoneCypher wrote:</b></span></td> </tr> <tr> <td class="quote">Neat.  I mean, I use freetype, but that's neat.
<br/>
<br/>
To fix your subpixel antialiaser, do a two-stage low pass filter at 1/3 downward each.  that way the energy distribution is theoretically perfectly even across the color subchannels no matter which actual column is used, and as a result you don't get those color fringes.
<br/>
<br/>
If that doesn't make sense, find me on #dsdev on efnet and i'll explain.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks! I was really getting tired at what a friend baptized the "semaphore artifacts" (red, green and yellow pixels).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74339 - tepples - Sat Mar 04, 2006 4:43 pm</h4>
    <div class="postbody"><span class="postbody">Any FIR filter with a zero at f/3 (even [1 1 1]/3) should work. I've been told [1 2 2 1]/6 and [1 3 4 3 1]/12 are good candidates that kill color fringing without introducing too much extra blurring. But make sure to <a class="postlink" href="http://en.wikipedia.org/wiki/Gamma_correction" target="_blank">gamma correct</a> your palettes, as these filters work in linear intensity space, while the DS display (like the PC display) has a gamma close to 2.2.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Tue Mar 07, 2006 2:30 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#74627 - thoduv - Mon Mar 06, 2006 4:09 pm</h4>
    <div class="postbody"><span class="postbody">Hi !
<br/>
<br/>
I want to use your program in my Ds App, but it appears that your program has some memory problems, for example in function copyBuffer.
<br/>
It will be great if you fix these bugs and update your lib !
<br/>
<br/>
Thanks !
<br/>
<br/>
-Thoduv;
<br/>
<br/>
(I've forgotten: I change all the "new" to malloc() and delete to free() : here is the C-compatible version : <a href="http://thoduv.free.fr/p/nds/dstype.c" target="_blank">http://thoduv.free.fr/p/nds/dstype.c</a>
<br/>
<br/>
EDIT: After a few test, it work with the C++ version ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110470 - Lick - Tue Nov 28, 2006 8:35 pm</h4>
    <div class="postbody"><span class="postbody">Topic! Live again!
<br/>
<br/>
Hey kevinc, or anyone.. I'm currently trying to use dsType, but nothing is showing up. I've tried MODE_FB0 and MODE_FB1, no luck though.
<br/>
The font is renamed to .bin and put in the data folder.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int main(void) 
<br/>
{
<br/>
    powerON(POWER_ALL);
<br/>
    lcdMainOnTop();
<br/>
<br/>
    irqInit();
<br/>
   irqSet(IRQ_VBLANK, 0);
<br/>
    irqEnable(IRQ_VBLANK);
<br/>
    
<br/>
    videoSetMode(MODE_FB1);
<br/>
    vramSetBankA(VRAM_A_LCD);
<br/>
    vramSetBankB(VRAM_B_LCD);
<br/>
    
<br/>
    dsType_SetBackgroundColor(0xfD44);
<br/>
    dsType_SetForegroundColor(0xfDff);
<br/>
    dsType_SetHeight(12);
<br/>
<br/>
    dsType_InitFont((char*)myriadc_bin);
<br/>
    dsType_SetAAMode(DSTYPE_AANORMAL);
<br/>
    dsType_DrawText("Thaomoa no12392108 asdasd ", (u16*)VRAM_A, 256);
<br/>
    dsType_Finish();
<br/>
    
<br/>
    swiWaitForVBlank();
<br/>
    while(1);
<br/>
}
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
