<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Operation Nutcracker 2006 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Misc > Operation Nutcracker 2006</h2>
<div id="posts">
<div class="post">
    <h4>#66019 - Phantomus - Sat Jan 07, 2006 5:19 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I am working on a game for PocketPC (Operation Nutcracker 2006) and I am considering to port it to the DS to get a broader audience. If you have some spare minutes, check out the demo, available from <a href="http://www.bik5.com/nc2" target="_blank">http://www.bik5.com/nc2</a> . A PC-based demo is also available, as most of you probably don't have a PocketPC. :)
<br/>
<br/>
PocketPC's typically have 200Mhz StrongARM processors, the game is 2D, so performance-wise there should be little problems.
<br/>
<br/>
Does anyone know how hard it is for a total newbie to port a game to the DS? Is anyone interested in lending a hand with this? Or perhaps the game is so boring that it isn't worth the trouble? :)
<br/>
<br/>
Nutcracker 2006 is a stealth action adventure, loosely based on the 8-bit 2D metal gear games (I played them on the MSX once).
<br/>
<br/>
- Jacco.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66021 - MaHe - Sat Jan 07, 2006 5:34 pm</h4>
    <div class="postbody"><span class="postbody">I must admit it - it's a fairly neat game. Kinda addicting.
<br/>
Keep it up.
<br/>
<br/>
However, porting it would be a hard <span style="font-style: italic">nut to crack</span> ;), since it demands twice the CPU power DS has.
<br/>
<br/>
You can recode it in pa_lib ( <a href="http://www.palib.com" target="_blank">www.palib.com</a> ) or libNDS ( <a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a> ). I hope you suceed!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66030 - tepples - Sat Jan 07, 2006 6:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MaHe wrote:</b></span></td> </tr> <tr> <td class="quote">However, porting it would be a hard <span style="font-style: italic">nut to crack</span> ;), since it demands twice the CPU power DS has.</td> </tr></table><span class="postbody">
<br/>
Unless the graphics are rewritten for the DS's 2D and 3D acceleration.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66031 - Phantomus - Sat Jan 07, 2006 7:30 pm</h4>
    <div class="postbody"><span class="postbody">Well it's not really a graphics-intensive game (it's content-intensive though). Let me summarize what the graphics engine does:
<br/>
<br/>
First of all, the levels are divided in areas of 18x16 tiles. Each tile is 32x32 pixels (16bit, could get away with palettized). An area is prerendered to a large bitmap when you enter an area (is this a problem on the DS?). Next, the game precalculates shadows using 'height tiles' and prerenders static sprites that will always be below the player.
<br/>
<br/>
In the main game loop, the game copies a part of this bitmap to the screen, renders the player, and the dynamic sprites. All sprites use an alpha channel for smooth edges, but this is not really neccessary (just pretty).
<br/>
<br/>
Water is rendered by reflecting a scrolling 256x256 sky texture, displaced per-pixel using a sine lookup.
<br/>
<br/>
In the background, a mod file is playing (is there a modplayer available for the DS?).
<br/>
<br/>
SO all in all I don't think this is extremely heavy, especially considering that the PocketPC has a 320x240 screen res, while the DS is a bit smaller.
<br/>
<br/>
My main concern is memory usage (I probably need to swap out unused sprites, as I use several MB's of image data right now) and the mod file player. I believe there is already direct screen access on the DS?
<br/>
<br/>
- Jacco.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66035 - tepples - Sat Jan 07, 2006 7:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Phantomus wrote:</b></span></td> </tr> <tr> <td class="quote">First of all, the levels are divided in areas of 18x16 tiles. Each tile is 32x32 pixels (16bit, could get away with palettized). An area is prerendered to a large bitmap when you enter an area (is this a problem on the DS?).</td> </tr></table><span class="postbody">
<br/>
It's best to leave your tile maps as tile maps.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Next, the game precalculates shadows using 'height tiles' and prerenders static sprites that will always be below the player.</td> </tr></table><span class="postbody">
<br/>
That could possibly be a problem.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">In the main game loop, the game copies a part of this bitmap to the screen, renders the player, and the dynamic sprites. All sprites use an alpha channel for smooth edges, but this is not really neccessary (just pretty).</td> </tr></table><span class="postbody">
<br/>
GBA and Nintendo DS games get away without using alpha edges, but if you aren't sharing a palette between two sprites, I know how to fake alpha edges.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Water is rendered by reflecting a scrolling 256x256 sky texture, displaced per-pixel using a sine lookup.</td> </tr></table><span class="postbody">
<br/>
On the GBA and DS you can easily displace each scanline.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">In the background, a mod file is playing (is there a modplayer available for the DS?).</td> </tr></table><span class="postbody">
<br/>
There are a few such as Krawall and AAS.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">My main concern is memory usage (I probably need to swap out unused sprites, as I use several MB's of image data right now)</td> </tr></table><span class="postbody">
<br/>
If you redraw your sprites in 16 colors, you'll be able to reduce your image data requirement by a factor of four. You have 16 different 15-color palettes available for sprites.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I believe there is already direct screen access on the DS?</td> </tr></table><span class="postbody">
<br/>
There's frame buffer access, but everything will work better if you structure things in terms of tile maps and sprites.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66045 - MaHe - Sat Jan 07, 2006 9:39 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, I think PA_lib would do the job (it even has a MOD player), although shadow rendering could be a problem. Check out the Wiki, it's fairly simple to use.
<br/>
<br/>
<a href="http://www.palib.com" target="_blank">www.palib.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66067 - Xtreme - Sun Jan 08, 2006 12:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Phantomus wrote:</b></span></td> </tr> <tr> <td class="quote">Or perhaps the game is so boring that it isn't worth the trouble? :)
<br/>
<br/>
Nutcracker 2006 is a stealth action adventure, loosely based on the 8-bit 2D metal gear games</td> </tr></table><span class="postbody">
<br/>
<br/>
I will wait and hope that you make the DS port of that game. Those screen shots looked nice indeed.<br/>_________________<br/>My <a class="postlink" href="http://www.samipupu.com/upload/Guest/xtreme_theme.mp3" target="_blank">Theme</a><span style="font-size: 9px; line-height: normal">
<br/>
DS Lite (FM_V8a) ** R4 Revolution (2GB Transcend) ** SuperCard Lite (2x 2GB Transcend)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66082 - agentq - Sun Jan 08, 2006 3:08 am</h4>
    <div class="postbody"><span class="postbody">It's a nice game, and would be a perfect fit for the DS.
<br/>
<br/>
The DS can support huge tilemaps and you don't need to build the bitmap each frame, as the hardware does it for you for no CPU cost.
<br/>
<br/>
The tiles are 8x8, but you can easily stick four of them together to make your 32x32 tiles.
<br/>
<br/>
I don't see you having problem with RAM either, as your tiles look like they would work easily at 256 colours.  You might even be able to fit them all in VRAM at once.
<br/>
<br/>
You could even use the second screen for your map and pop up boxes.
<br/>
<br/>
You have about 4Mb of RAM to play with and about 700Kb of VRAM, which should be plenty since you won't ever have to build a framebuffer.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
