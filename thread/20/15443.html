<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>.nds banner, icon and description viewer - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > .nds banner, icon and description viewer</h2>
<div id="posts">
<div class="post">
    <h4>#155104 - yellowstar - Fri Apr 25, 2008 1:16 am</h4>
    <div class="postbody"><span class="postbody">Does anybody know of a PC program that can view an .nds banner, icon, and description?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155219 - Filb - Sat Apr 26, 2008 7:29 pm</h4>
    <div class="postbody"><span class="postbody">Yes. "NDS Header Tool" can do that.
<br/>
But it's only for reading them, not writing.
<br/>
<br/>
Screenshot: <a href="http://a.imagehost.org/0198/sample.png" target="_blank">http://a.imagehost.org/0198/sample.png</a>
<br/>
Download: <a href="http://uploaded.to/?id=yknfb6" target="_blank">http://uploaded.to/?id=yknfb6</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155233 - yellowstar - Sat Apr 26, 2008 11:56 pm</h4>
    <div class="postbody"><span class="postbody">It doesn't work. It won't work with the nds assembled by my wmb assembler. It works with homebrew .nds that don't even have a icon however. Suggested apps need to work with those .nds, as that's why I'm asking for such an app.
<br/>
<br/>
All I want is a program that can view the banner, with as a bare minim, the icon and description. A long time ago, I remember downloading a bunch of apps like this long ago. Unfortunately, I don't have them anymore. )-:</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155236 - Filb - Sun Apr 27, 2008 12:30 am</h4>
    <div class="postbody"><span class="postbody">That sample screenshot *is* a captured DS Download Play nds file. Maybe your files aren't correctly assembled?
<br/>
I don't know any other programs, sorry.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157215 - Filb - Tue May 20, 2008 3:53 pm</h4>
    <div class="postbody"><span class="postbody">Does anyone know how to read this data (icon, title, description) from a .nds/.srl file in PHP (or another langauge)?
<br/>
<br/>
I'm still a beginner at programming binary stuff. I looked at the raw data but don't know where to start.
<br/>
How do I convert a 512 byte raw icon (and its palette) into... for example a BMP?
<br/>
(How do I read the bytes and merge them with the 32 byte palette?)
<br/>
<br/>
Example icon and palette: <a href="http://uploaded.to/?id=tkmgcb" target="_blank">http://uploaded.to/?id=tkmgcb</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157242 - yellowstar - Wed May 21, 2008 12:32 am</h4>
    <div class="postbody"><span class="postbody">davr, the author of this <a class="postlink" href="http://davr.org/ds2/demos" target="_blank">web site,</a> knows how to do that.(Displaying .nds banners in php)
<br/>
<br/>
I don't know php, but the general idea would be to first grab the banner data. Read the 4-byte integer at pos 0x68 in the header, then read the 1328-byte banner, by using the value you read. Next, you mainly need to convert the 16-bit NDS palette, to 32-bit. And once that's done, you need to convert the image from tiled, to linear. After that, you just need to convert to bmp.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157255 - Filb - Wed May 21, 2008 6:21 am</h4>
    <div class="postbody"><span class="postbody">I understood how to find the offset, but I wonder how to convert palettes from 16- to 32-bit and how to convert a tiled image to a linear one, etc.
<br/>
Is there any good document or tutorial?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157263 - tepples - Wed May 21, 2008 1:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Filb wrote:</b></span></td> </tr> <tr> <td class="quote">I understood how to find the offset, but I wonder how to convert palettes from 16- to 32-bit and how to convert a tiled image to a linear one, etc.
<br/>
Is there any good document or tutorial?</td> </tr></table><span class="postbody">
<br/>
GBATEK should explain how all the image and color formats on the GBA and DS work.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157290 - yellowstar - Wed May 21, 2008 8:26 pm</h4>
    <div class="postbody"><span class="postbody">There's code in this <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=14419" target="_blank">topic</a> for 16-bit to 32/24-bit conversions.(TGA can have alpha, BMP can't, but there's reserved field in BMP colors which makes the size 32-bit. So it's really 24-bit.)
<br/>
<br/>
For tiled-to-linear:
<br/>
Well, I wrote code to draw to tiled backgrounds, as if they were linear extended rotation bgs. But, the images were distorted, so I'm not going to post my code. But, I'll share the general idea:
<br/>
The first 8 bytes/pixels on the icon is the first 8 pixels in the image. However, the next 8 are the pixels directly below them. And the next ones are below the previous ones, and so on. However, once we hit 8x8 pixels, the next 8 are next to the top of the first tile, to the right, with the same deal as before. And this pattern keeps on repeating.
<br/>
While linear, every pixel is to the right of the previous one. But, when we go off of the screen, and are out of bg width bounds, the pixels are rendered one scanline below. And that keeps repeating.
<br/>
<br/>
What to do?
<br/>
Well, the athrogram goes something like this:
<br/>
<br/>
Go through every tile (1024 8x8 tiles in a 32x32 icon I think)
<br/>
{
<br/>
   Keep track of positions. Calculate the x pos. I do this by setting x to zero before this code, and by incrementing it by 8 after the line code. I then increment the y variable if the x exceeds 32, and setting x to zero when that happens.
<br/>
   Go through every line in the tile
<br/>
   {
<br/>
   copy the data based on x, and y + line
<br/>
   } 
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157459 - Filb - Sun May 25, 2008 12:31 am</h4>
    <div class="postbody"><span class="postbody">I'm still working on the palette etc.
<br/>
<br/>
How do I find out if an icon has a transparent color?
<br/>
And if so, how do I find out which one it is?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157471 - strager - Sun May 25, 2008 4:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Filb wrote:</b></span></td> </tr> <tr> <td class="quote">I'm still working on the palette etc.
<br/>
<br/>
How do I find out if an icon has a transparent color?
<br/>
And if so, how do I find out which one it is?</td> </tr></table><span class="postbody">
<br/>
<br/>
According to <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dscartridgeicontitle" target="_blank">GBATek</a>:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>GBATek wrote:</b></span></td> </tr> <tr> <td class="quote">Color 0 is transparent, so the 1st palette entry is ignored</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157487 - Filb - Sun May 25, 2008 5:01 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your help.
<br/>
It works now.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
