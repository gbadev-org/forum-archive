<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problems with OpenGL - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > Problems with OpenGL</h2>
<div id="posts">
<div class="post">
    <h4>#160135 - BenRK - Thu Jul 10, 2008 8:07 pm</h4>
    <div class="postbody"><span class="postbody">I'm having problems using OpenGL in a project of mine. I want to move stuff around on the screen by pixels (not by the leaps and bounds that floats do), but I haven't found any apparent standard in the OpenGL functions to get the translation to not use floats. So, I tried applying the changes in the y value to the quad it self, but nothing on the screen moved at all. So, either changing vertex coordinates in real time is not possible with out a translation, or my screen isn't refreshing for one reason or another. So, I've come here for help.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while (1) 
<br/>
{
<br/>
   if (keysHeld() &amp; KEY_UP)
<br/>
      {
<br/>
      camy--;
<br/>
      }
<br/>
                 
<br/>
      //ds specific, several attributes can be set here   
<br/>
      glPolyFmt(POLY_ALPHA(31) | POLY_CULL_NONE);
<br/>
      
<br/>
      // Set the current matrix to be the model matrix
<br/>
      glMatrixMode(GL_MODELVIEW);
<br/>
      
<br/>
      //Push our original Matrix onto the stack (save state)
<br/>
      glPushMatrix();
<br/>
 
<br/>
glBegin(GL_QUADS);
<br/>
   glColor3b(37,69,150);
<br/>
   glVertex3v16(0,camy,0);
<br/>
   
<br/>
   glColor3b(36,68,149);
<br/>
   glVertex3v16(256,camy,0);
<br/>
   
<br/>
   glColor3b(11,118,193);
<br/>
   glVertex3v16(256,600+camy,0);
<br/>
   
<br/>
   glColor3b(12,119,194);
<br/>
   glVertex3v16(0,600+camy,0);
<br/>
glEnd();
<br/>
      
<br/>
      // Pop our Matrix from the stack (restore state)
<br/>
      glPopMatrix(1);
<br/>
<br/>
      //a handy little built in function to wait for a screen refresh
<br/>
      swiWaitForVBlank();
<br/>
      
<br/>
      // flush to screen   
<br/>
      glFlush(0);
<br/>
   
<br/>
   }</td> </tr></table><span class="postbody"><br/>_________________<br/>EvolitesDS - Possibly coming out some day... maybe...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160139 - silent_code - Thu Jul 10, 2008 9:07 pm</h4>
    <div class="postbody"><span class="postbody">The problem is, that there is no OpenGL. ;^)
<br/>
<br/>
What you mean is libnds' videoGL. Don't confuse the two APIs. ;^)
<br/>
<br/>
You can achieve what you want (this is just one possible solution) with a glTranslatef32() in fixed point after pushing the matrix and before sending geometry commands. That way you can have more or less fixed geometry.
<br/>
<br/>
Another thing: Call swiWaitForVBlank() after flushing! It should be pretty much the last thing you call in a frame, because it means "Oh, we have nothing more to do this frame, so, just sit there idling until the next frame starts." (Feel free to correct me on this.) ;^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160150 - BenRK - Thu Jul 10, 2008 10:32 pm</h4>
    <div class="postbody"><span class="postbody">Well, now I'm just getting an error, saying there's an undefined reference to glTranslatef32. Heh, I know I'm doing something wrong, as I'm rather new at OpenGL, er, videoGL. I'm not trying to create complicated geometry, just a quad, various 12-gons, a wireframe of said 12-gons, and various 3D sprites, all on a 2D plane (just so you know).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glLoadIdentity();
<br/>
glTranslatef32(0,camy,0);
<br/>
glBegin(GL_QUADS);
<br/>
   glColor3b(37,69,150);
<br/>
   glVertex3v16(0,0,0);
<br/>
   
<br/>
   glColor3b(36,68,149);
<br/>
   glVertex3v16(256,0,0);
<br/>
   
<br/>
   glColor3b(11,118,193);
<br/>
   glVertex3v16(256,600,0);
<br/>
   
<br/>
   glColor3b(12,119,194);
<br/>
   glVertex3v16(0,600,0);
<br/>
glEnd();</td> </tr></table><span class="postbody">
<br/>
<br/>
And I switched around glFlush() and sqiWaitForVBlank().
<br/>
<br/>
Edit, well, I believe the game isn't refreshing for some reason, and I really don't know why.<br/>_________________<br/>EvolitesDS - Possibly coming out some day... maybe...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160221 - zeruda - Sat Jul 12, 2008 5:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>BenRK wrote:</b></span></td> </tr> <tr> <td class="quote">Well, now I'm just getting an error, saying there's an undefined reference to glTranslatef32.</td> </tr></table><span class="postbody">
<br/>
<br/>
In VideoGL the command is glTranslate3f32.
<br/>
<br/>
What I suggest is you go to the devkitpro/libnds/include folder. All the header files are there. In particular look at devkitpro/libnds/include/nds/arm9/videoGL.h. Apart from that I suggest you go through the examples located in the devkitpro/examples folder.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160256 - BenRK - Sat Jul 12, 2008 11:07 pm</h4>
    <div class="postbody"><span class="postbody">Well, it's also not showing any input. I have a value that is supposed to be subtracted when I press up. Should be simple, but nothing happens when I press up, both on hardware and an emulator.<br/>_________________<br/>EvolitesDS - Possibly coming out some day... maybe...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160268 - zeruda - Sun Jul 13, 2008 2:53 am</h4>
    <div class="postbody"><span class="postbody">Like I said, go and look at the examples that come with devkitpro. Theres working examples covering input, sound, 2d and 3d graphics amongst other things. Compile and run those, and then you can go from there.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160274 - BenRK - Sun Jul 13, 2008 8:06 am</h4>
    <div class="postbody"><span class="postbody">Seriously, why don't people do that? Just looking at the input examples fixed my last problem (for now). I wasn't reading the button states. Now it's working how I wanted it to! Thank-you!<br/>_________________<br/>EvolitesDS - Possibly coming out some day... maybe...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
