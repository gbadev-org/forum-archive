<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DSFTP 1.8 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > DSFTP 1.8</h2>
<div id="posts">
<div class="post">
    <h4>#98669 - bjoerngiesler - Wed Aug 16, 2006 10:03 pm</h4>
    <div class="postbody"><span class="postbody">I'm announcing DSFTP 1.8. It's getting its own thread because from now on, DSFTP is two things: A stand-alone server (as before), and a software component you can link to your code to run an FTP server from your own program. This component is called libDSFTP.
<br/>
<br/>
This means that during development, you can run and test your program, then build a new version of it and upload it to the DS and run it without touching another button, and most important of all, without removing the flash card.
<br/>
<br/>
I'm including the source code of the stand-alone server as an example. Also, the documentation contains instructions on how to use libDSFTP. The simple gist is (wrapped into a mainloop() function for simplicity):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   void mainloop(void)
<br/>
   {
<br/>
      BFTPServer server;
<br/>
<br/>
      // if you want to use a config file...
<br/>
      BFTPConfigurator configurator(&amp;server);
<br/>
      configurator.configureFromFile("/data/settings/ftp.conf");
<br/>
<br/>
      // or if you want to add users by hand...
<br/>
      server.addUser("myusername", "mypassword");
<br/>
      while(true)
<br/>
      {
<br/>
         // your own mainloop stuff
<br/>
         // ...
<br/>
         server.handle();
<br/>
         swiWaitForVBlank();
<br/>
      }
<br/>
   }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Get the ZIP at <a class="postlink" href="http://giesler.biz/~bjoern/downloads/DSFTP-1.8.zip" target="_blank">http://giesler.biz/~bjoern/downloads/DSFTP-1.8.zip</a> and tell me what you think and if you find any bugs.
<br/>
<br/>
EDIT: If you find any bugs, please send me your <a href="http://ftp.conf" target="_blank">ftp.conf</a> file and log file (recorded at loglevel 5) via e-mail, together with a description of what version of DSFTP and what hardware you're using.
<br/>
<br/>
Have fun!</span><span class="gensmall"><br/><br/>Last edited by bjoerngiesler on Thu Aug 17, 2006 6:34 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#98670 - vb_master - Wed Aug 16, 2006 10:07 pm</h4>
    <div class="postbody"><span class="postbody">Nice, but I am getting like 7-10KB/s as opposed to my usual 500-700KB/s.<br/>_________________<br/>Back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98672 - bjoerngiesler - Wed Aug 16, 2006 10:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>vb_master wrote:</b></span></td> </tr> <tr> <td class="quote">Nice, but I am getting like 7-10KB/s as opposed to my usual 500-700KB/s.</td> </tr></table><span class="postbody">
<br/>
You ain't never gonna get 500-700KB/s from my server, as it's behind a private DSL line with a 256kbit/s uplink.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98674 - kevinc - Wed Aug 16, 2006 10:18 pm</h4>
    <div class="postbody"><span class="postbody">After a quick reading of BController.cpp, you seem to stop wifiConnect() after getting ASSOCSTATUS_CANNOTCONNECT. That may cause trouble with DHCP, considering the wifi lib often reaches that state spontaneously in the middle of association.
<br/>
<br/>
Given that in the case of connection failure you block in a while(1), you lose nothing if instead you keep querying the lib to see if the state has changed.<br/>_________________<br/><a class="postlink" href="http://akzeac.blogspot.com" target="_blank">http://akzeac.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98677 - bjoerngiesler - Wed Aug 16, 2006 10:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kevinc wrote:</b></span></td> </tr> <tr> <td class="quote">Given that in the case of connection failure you block in a while(1), you lose nothing if instead you keep querying the lib to see if the state has changed.</td> </tr></table><span class="postbody">
<br/>
<br/>
Good advice. Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98682 - TheRain - Wed Aug 16, 2006 11:09 pm</h4>
    <div class="postbody"><span class="postbody">My FTP client gets no response from a list command and it keeps timing out.   I'm using FileZilla, and my flash device is an M3 SD version.<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98692 - doedill - Thu Aug 17, 2006 12:07 am</h4>
    <div class="postbody"><span class="postbody">is it possible to rename the DATA folder to something else?
<br/>
<br/>
There's a huge conflict with DSOrganize, where DSOrganize thinks that the DATA file is it's own and assumes that other folders/files are missing.  There by creating all the required folders/files into the Root directory as well as the DATA folder.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98744 - bjoerngiesler - Thu Aug 17, 2006 6:33 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheRain wrote:</b></span></td> </tr> <tr> <td class="quote">My FTP client gets no response from a list command and it keeps timing out.   I'm using FileZilla, and my flash device is an M3 SD version.</td> </tr></table><span class="postbody">
<br/>
<br/>
Please mail me your log and <a href="http://ftp.conf" target="_blank">ftp.conf</a> files. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98746 - bjoerngiesler - Thu Aug 17, 2006 6:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">There's a huge conflict with DSOrganize, where DSOrganize thinks that the DATA file is it's own and assumes that other folders/files are missing.  There by creating all the required folders/files into the Root directory as well as the DATA folder.</td> </tr></table><span class="postbody">
<br/>
<br/>
First, what version of DSOrganize are you using? I have 2.2p1, and it found the /data and created its own DSOrganize tree underneath it. So now I have a /data/DSOrganize, which is the way it should be.
<br/>
<br/>
Second, if DSOrganize thinks a "/data" is its own, that seems like a DSOrganize bug to me.. which is fixed by now, as it seems.
<br/>
<br/>
Third, you have the source code. Having the config file somewhere else is one edit (BController.cpp) and one make away.
<br/>
<br/>
The "/data" thing stems from this discussion: <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=10648&amp;highlight=" target="_blank">http://forum.gbadev.org/viewtopic.php?t=10648&amp;highlight=</a>.
<br/>
<br/>
EDIT: Please see this post by DragonMinded: <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=98760#98760" target="_blank">http://forum.gbadev.org/viewtopic.php?p=98760#98760</a> In there, he states that DSOrganize handles the "/data" directory correctly, which fits with my experience.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98892 - toa - Fri Aug 18, 2006 9:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
This means that during development, you can run and test your program, then build a new version of it and upload it to the DS and run it without touching another button, and most important of all, without removing the flash card.
<br/>
Have fun!</td> </tr></table><span class="postbody">
<br/>
<br/>
That is SO F#?%?NG cool, best developer tool I've come across on this little maschine yet! Now all we need is a wifi-based debugger and Nitendo can throw their dev-kits in the dumpster faster than you can say "it's meeee Marrioooo" :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98911 - Durandle - Fri Aug 18, 2006 1:59 pm</h4>
    <div class="postbody"><span class="postbody">Doesn't this also open up sending a file from one DS to another - given we have a FTP client on one DS and ther server on the other?
<br/>
<br/>
Cos that'd be rather cool. Say for example, DSOrganiser could have the server and client. You play music on your DS, but can also share the music with other people  :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98918 - JaJa - Fri Aug 18, 2006 2:30 pm</h4>
    <div class="postbody"><span class="postbody">Yes, but not directly.
<br/>
DSs still can't do ad-hoc.
<br/>
One DS would have to become an AP for thos to happen, or have to go through a regular AP, much like now.<br/>_________________<br/>LAWL HOOGE
<br/>
<a class="postlink" href="http://www.pageofrandom.wordpress.com/" target="_blank">My Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98919 - bjoerngiesler - Fri Aug 18, 2006 2:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Durandle wrote:</b></span></td> </tr> <tr> <td class="quote">Doesn't this also open up sending a file from one DS to another - given we have a FTP client on one DS and ther server on the other?</td> </tr></table><span class="postbody">
<br/>
<br/>
A FTP client software component is in the works :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98921 - MechaBouncer - Fri Aug 18, 2006 3:11 pm</h4>
    <div class="postbody"><span class="postbody">So, in theory, we could have one in server mode, then one in client mode to transfer data between them? But would they have to switch modes to send data the other way? Or could an application just be written to continuously upload the necessary info from the client DS to the server DS, and then the client would also download the specific information it needs? And can this access memory, or just flashcarts/flash memory adapters? This would be an awesome workaround for ad-hoc if it could! Plus, could it be possible to use this same method for net connections or would things like NAT get in the way? I'm guessing it would probably just be easier to use the current method for net play, wouldn't it?<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98929 - kevinc - Fri Aug 18, 2006 3:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Durandle wrote:</b></span></td> </tr> <tr> <td class="quote">Doesn't this also open up sending a file from one DS to another - given we have a FTP client on one DS and ther server on the other?</td> </tr></table><span class="postbody">
<br/>
<br/>
You don't need a DS FTP client for that, just 2 FTP servers that can do passive and active mode.
<br/>
<br/>
You put one into passive, and store the IP and port that it gives you. Then you set the other to active, setting the PORT parameters to the IP and port of the first server. Then just do RETR to the first, and STOR to the second from the computer client.<br/>_________________<br/><a class="postlink" href="http://akzeac.blogspot.com" target="_blank">http://akzeac.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98933 - tekknosk8er - Fri Aug 18, 2006 4:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Durandle wrote:</b></span></td> </tr> <tr> <td class="quote">Doesn't this also open up sending a file from one DS to another - given we have a FTP client on one DS and ther server on the other?</td> </tr></table><span class="postbody">
<br/>
<br/>
A FTP client software component is in the works :-)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Correct me if I am wrong, but if you are running a FTP client on one DS and FTP server on the other DS, you still have to use a normal WIFI connection to a WIFI router to communicate. right? Or can you directly FTP between 2 DSs independently?
<br/>
<br/>
Is it possible to use the WFC to FTP across? Also enabling communication across the internet. 
<br/>
<br/>
My thoughts are if you are still having to use a router to connect the two DSs together, you can use an FTP program like Ip switch WS_FTP professional 7 to transfer files between 2 clients now, using the PC as a bridge.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98973 - bjoerngiesler - Fri Aug 18, 2006 9:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tekknosk8er wrote:</b></span></td> </tr> <tr> <td class="quote">Correct me if I am wrong, but if you are running a FTP client on one DS and FTP server on the other DS, you still have to use a normal WIFI connection to a WIFI router to communicate. right?</td> </tr></table><span class="postbody">
<br/>
<br/>
Right. As has been said earlier in this thread, DSWifi doesn't do ad-hoc mode yet. So theoretically, in all cases in which you can use DSWifi, you could also use a PC to route between two DSs. I'd find it much nicer to be able to let them communicate directly, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99531 - mattt - Tue Aug 22, 2006 9:14 am</h4>
    <div class="postbody"><span class="postbody">hello
<br/>
i've sent you a PM regarding port assignation problem
<br/>
is it possible to define a specific port to use in the <a href="http://ftp.conf" target="_blank">ftp.conf</a> file ? i'm sure yes
<br/>
woops sorry forget to specify my hardware
<br/>
i'm using a DS(fat) SE mariokart wityh flashme7 FW
<br/>
and SC CF 1.63b firwmare</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99548 - bjoerngiesler - Tue Aug 22, 2006 10:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mattt wrote:</b></span></td> </tr> <tr> <td class="quote">hello
<br/>
i've sent you a PM regarding port assignation problem
<br/>
is it possible to define a specific port to use in the <a href="http://ftp.conf" target="_blank">ftp.conf</a> file ? i'm sure yes
<br/>
woops sorry forget to specify my hardware
<br/>
i'm using a DS(fat) SE mariokart wityh flashme7 FW
<br/>
and SC CF 1.63b firwmare</td> </tr></table><span class="postbody">
<br/>
<br/>
No, up to 1.9 it's not possible to change the port the FTP server listens on. Please wait for the next version (hopefully tonight).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99550 - mattt - Tue Aug 22, 2006 11:24 am</h4>
    <div class="postbody"><span class="postbody">well, i'll try with ver 1.8 then
<br/>
what could be the commandeline ? "listen 3000" ??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99553 - bjoerngiesler - Tue Aug 22, 2006 11:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mattt wrote:</b></span></td> </tr> <tr> <td class="quote">well, i'll try with ver 1.8 then
<br/>
what could be the commandeline ? "listen 3000" ??</td> </tr></table><span class="postbody">
<br/>
<br/>
Version 2.0, rather :-) The command will be something of that kind, but I'm not quite sure yet.<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99560 - mattt - Tue Aug 22, 2006 12:31 pm</h4>
    <div class="postbody"><span class="postbody">that's nice, you are awesome
<br/>
i hope having guyz like you in my job, when request a change for bug or other, took 6 mounths to change a command line -_-</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99623 - bjoerngiesler - Tue Aug 22, 2006 7:06 pm</h4>
    <div class="postbody"><span class="postbody">Please try <a class="postlink" href="http://giesler.biz/~bjoern/downloads/dsftp/DSFTP-2.0pre.zip" target="_blank">http://giesler.biz/~bjoern/downloads/dsftp/DSFTP-2.0pre.zip</a>. Changes are:
<br/>
<br/>
o Server port configurable with "listen PORTNUM"
<br/>
o Passive mode supported (PORT and EPRT commands)
<br/>
<br/>
...and let me know if that works for you.<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99728 - mattt - Wed Aug 23, 2006 4:35 pm</h4>
    <div class="postbody"><span class="postbody">unfortunately blocked on "ititialyse"
<br/>
evenif i've added line "listen PORTNUMBER" or not
<br/>
that's pretty strange
<br/>
 also because do not initialyse, have nothing in the log file :-/</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99730 - bjoerngiesler - Wed Aug 23, 2006 4:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mattt wrote:</b></span></td> </tr> <tr> <td class="quote">unfortunately blocked on "ititialyse"
<br/>
evenif i've added line "listen PORTNUMBER" or not
<br/>
that's pretty strange
<br/>
 also because do not initialyse, have nothing in the log file :-/</td> </tr></table><span class="postbody">
<br/>
<br/>
If it blocks on Initialize, that means it can't connect to your Wifi... :-/
<br/>
<br/>
EDIT: No, sorry, that's wrong; it either means you're on SuperCard Lite and haven't run the thing through the homebrew patcher, or I made some stupid mistake...<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99736 - mattt - Wed Aug 23, 2006 5:44 pm</h4>
    <div class="postbody"><span class="postbody">well, i have a DS fat and DSlite both running flashme V7 and Supercard CF with update 1.63b
<br/>
the same that runs correctly dsftp 1.9 ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99954 - mattt - Thu Aug 24, 2006 10:31 pm</h4>
    <div class="postbody"><span class="postbody">ok well, i've installed on another CF card because i've checked other homebrew weren't working ...
<br/>
it's up and running, on screen see "listen port xxx"
<br/>
but still cannot connect
<br/>
for sure it's a internal routing problem
<br/>
<br/>
i'll check my side, anyway thank you for the additionnal feat. of port listen ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
