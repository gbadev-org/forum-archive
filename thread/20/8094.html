<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Things that every GBAmp/SC/M3 homebrew app/game should have - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > Things that every GBAmp/SC/M3 homebrew app/game should have</h2>
<div id="posts">
<div class="post">
    <h4>#66679 - MaHe - Thu Jan 12, 2006 9:11 pm</h4>
    <div class="postbody"><span class="postbody">I'll maintain a list:
<br/>
<br/>
- a data folder for essential files (game &amp; app data, like savegames, skins, plug-ins...)
<br/>
- a unified cfg file (I hate the fact about having a separate file for ScummVM, WiFi Transfer, BreakOut Mania, LumiDS and so on...), or they should atleast be INSIDE the data folder
<br/>
- optional: an exit button is always nice to see (if app would detect GBAmp, it should run _BOOT_MP.nds, if it'd detect SC, it'd return to it's menu, in case of MultiNDS loader it'd go back to loader...)
<br/>
<br/>
I hope it's understandable &amp; clear.
<br/>
Add your own ideas (I will use these 'rules' in my own games).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66688 - m2pt5 - Thu Jan 12, 2006 11:31 pm</h4>
    <div class="postbody"><span class="postbody">The ability to run on both CF and SD based devices, not just one or the other.<br/>_________________<br/>Don't sign your posts, it's dumb.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66692 - Sebbo - Thu Jan 12, 2006 11:41 pm</h4>
    <div class="postbody"><span class="postbody">an exit button to go back to the loader would be a great idea, perhaps someone could write a function that does this so that ppl can just copy and paste it into their code<br/>_________________<br/>Here's some ideas I have for when I know enough to act on them, or for others to have a look at when they're bored: <a class="postlink" href="http://www.wayne.sebbens.com/ds_ideas.htm" target="_blank">www.wayne.sebbens.com/ds_ideas.htm</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66714 - tuLL - Fri Jan 13, 2006 3:40 am</h4>
    <div class="postbody"><span class="postbody">The ability to return to the loader was suggested by me here, and not widely accepted:D
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=7414" target="_blank">http://forum.gbadev.org/viewtopic.php?t=7414</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66722 - Lynx - Fri Jan 13, 2006 5:34 am</h4>
    <div class="postbody"><span class="postbody">First, CF vs SD isn't part of the developers deal, it's just because Chishm released a CF library..  So, untill someone creates an SD library, I don't think you will see SD specific support any time soon.
<br/>
<br/>
Exit code is already available.  Someone should "lobby" for it to be added to libnds.  Then it might be "accepted".
<br/>
<br/>
I agree that a /data/ type standard should be created, but I think people that have already released /data type games/apps should make this decision, as they have the experiance to know what would work best for them.  Problem is, it's also a personal choice..  so may never happen.  But, if people "see" it enough, they may follow along when deving their own /data type project.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66740 - tepples - Fri Jan 13, 2006 6:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>m2pt5 wrote:</b></span></td> </tr> <tr> <td class="quote">The ability to run on both CF and SD based devices, not just one or the other.</td> </tr></table><span class="postbody">
<br/>
If you're willing to buy each developer the other devices...<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66756 - tssf - Fri Jan 13, 2006 8:44 am</h4>
    <div class="postbody"><span class="postbody">I like games having their own data folders, not just one central one. Wouldn't you have to "install" it if they all use one central directory? I think that's kinda dumb, personally.
<br/>
<br/>
I pretty much run my programs like this:
<br/>
<br/>
ROOT\Programs\&lt;program name&gt;
<br/>
<br/>
Should the game/app use a data directory, I see no reason why it can't just look for its data files in its own data sub-dir.
<br/>
<br/>
I can see the problem if people run the NDS file in their root folder...there's a simple solution for that: Don't.<br/>_________________<br/>Mathew Valente [TSSF]
<br/>
------
<br/>
<a class="postlink" href="http://www.opcoder.com/projects/chrono" target="_blank">Chrono Resurrection Musician</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66760 - chishm - Fri Jan 13, 2006 9:55 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>m2pt5 wrote:</b></span></td> </tr> <tr> <td class="quote">The ability to run on both CF and SD based devices, not just one or the other.</td> </tr></table><span class="postbody">
<br/>
If you're willing to buy each developer the other devices...</span></td> </tr></table><span class="postbody">
<br/>
Or just get me a SuperCard SD... :P<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66766 - Sebbo - Fri Jan 13, 2006 12:12 pm</h4>
    <div class="postbody"><span class="postbody">well, i think i'll start lobbying for the "back to loader" code to become standard in libnds and all homebrew games then...reckon a poll is the best way, see how much of the community is behind the idea?<br/>_________________<br/>Here's some ideas I have for when I know enough to act on them, or for others to have a look at when they're bored: <a class="postlink" href="http://www.wayne.sebbens.com/ds_ideas.htm" target="_blank">www.wayne.sebbens.com/ds_ideas.htm</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66773 - pepsiman - Fri Jan 13, 2006 1:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote">Exit code is already available.  Someone should "lobby" for it to be added to libnds.  Then it might be "accepted".
<br/>
</td> </tr></table><span class="postbody">
<br/>
libnds/include/nds/reload.h:
<br/>
<br/>
// reload.h -- Provides an ability to return to the main menu when used
<br/>
//              with darkains loader or compatible system.
<br/>
<br/>
There's already one return to menu system in libnds, don't know if it works with chishm's stuff.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66774 - m2pt5 - Fri Jan 13, 2006 1:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">Or just get me a SuperCard SD... :P</td> </tr></table><span class="postbody">
<br/>
If I could spare the money, I totally would, for the good of homebrew. Mostly because I'm hearing everyone talking about "chishm's FAT drivers".
<br/>
<br/>
Or you could talk to cory1492. He's come up with a good set of, well, <span style="font-style: italic">something</span> for the SCSD, and he's hacked it into the last several versions of Moonshell. (I'm not a developer. I don't know how any of this actually works, just how to make already-written and compiled code work on my DS. :D )<br/>_________________<br/>Don't sign your posts, it's dumb.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66792 - bafio - Fri Jan 13, 2006 4:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>pepsiman wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote">Exit code is already available.  Someone should "lobby" for it to be added to libnds.  Then it might be "accepted".
<br/>
</td> </tr></table><span class="postbody">
<br/>
libnds/include/nds/reload.h:
<br/>
<br/>
// reload.h -- Provides an ability to return to the main menu when used
<br/>
//              with darkains loader or compatible system.
<br/>
<br/>
There's already one return to menu system in libnds, don't know if it works with chishm's stuff.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I have tried it, it doesn't work to me on GBAMP. You can reload "boot_mp.nds" on gbamp, the lib method is for other loades I guess... (It's method "b" on the wifi transfer when you load a file)
<br/>
<br/>
Bafio</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66796 - Dudu.exe - Fri Jan 13, 2006 4:32 pm</h4>
    <div class="postbody"><span class="postbody">Supercard SD code is out why not include it wright now?? are you waiting fos m3 SD code?<br/>_________________<br/><a class="postlink" href="http://flickr.com/photos/stuffbox" target="_blank">http://flickr.com/photos/stuffbox</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66800 - pepsiman - Fri Jan 13, 2006 5:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dudu.exe wrote:</b></span></td> </tr> <tr> <td class="quote">Supercard SD code is out why not include it right now?? are you waiting fos m3 SD code?</td> </tr></table><span class="postbody">
<br/>
1) The Supercard SD "code" is asm, not C, so it's not as portable.
<br/>
2) After rewriting in C it will need testing before release.
<br/>
3) Hardware is needed to do testing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66816 - FireSlash - Fri Jan 13, 2006 6:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tssf wrote:</b></span></td> </tr> <tr> <td class="quote">I like games having their own data folders, not just one central one. Wouldn't you have to "install" it if they all use one central directory? I think that's kinda dumb, personally.
<br/>
<br/>
I pretty much run my programs like this:
<br/>
<br/>
ROOT\Programs\&lt;program name&gt;
<br/>
<br/>
Should the game/app use a data directory, I see no reason why it can't just look for its data files in its own data sub-dir.
<br/>
<br/>
I can see the problem if people run the NDS file in their root folder...there's a simple solution for that: Don't.</td> </tr></table><span class="postbody">
<br/>
<br/>
I think you misunderstand.
<br/>
<br/>
The idea here is to centralize all the data from different programs into one folder.
<br/>
<br/>
For instance, LumiDS uses
<br/>
(root)/data/LumiDS/....
<br/>
The idea is for other programs to follow this pattern, so, say, ScummVM's config file would be stored in...
<br/>
(root)/data/ScummVM/...
<br/>
etc.
<br/>
This reduces the "mess" on the CF root of having tons of program data folders and config files. 
<br/>
<br/>
The reason we need to look at a standardization like this is because unlike PC systems, the current directory is reset to '/' when a homebrew app loads. The data can be located anywhere, its just a matter of not knowing where './' is. It could be manually searched, but depending on the CF card size, that may not always be a good idea. Imagine iterating through a 1gb flash card full of source files and small documents. Yikes.<br/>_________________<br/><a class="postlink" href="http://www.fireslash.net" target="_blank">FireSlash.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66833 - brian33x51 - Fri Jan 13, 2006 7:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FireSlash wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tssf wrote:</b></span></td> </tr> <tr> <td class="quote">I like games having their own data folders, not just one central one. Wouldn't you have to "install" it if they all use one central directory? I think that's kinda dumb, personally.
<br/>
<br/>
I pretty much run my programs like this:
<br/>
<br/>
ROOT\Programs\&lt;program name&gt;
<br/>
<br/>
Should the game/app use a data directory, I see no reason why it can't just look for its data files in its own data sub-dir.
<br/>
<br/>
I can see the problem if people run the NDS file in their root folder...there's a simple solution for that: Don't.</td> </tr></table><span class="postbody">
<br/>
<br/>
I think you misunderstand.
<br/>
<br/>
The idea here is to centralize all the data from different programs into one folder.
<br/>
<br/>
For instance, LumiDS uses
<br/>
(root)/data/LumiDS/....
<br/>
The idea is for other programs to follow this pattern, so, say, ScummVM's config file would be stored in...
<br/>
(root)/data/ScummVM/...
<br/>
etc.
<br/>
This reduces the "mess" on the CF root of having tons of program data folders and config files. 
<br/>
<br/>
The reason we need to look at a standardization like this is because unlike PC systems, the current directory is reset to '/' when a homebrew app loads. The data can be located anywhere, its just a matter of not knowing where './' is. It could be manually searched, but depending on the CF card size, that may not always be a good idea. Imagine iterating through a 1gb flash card full of source files and small documents. Yikes.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I think some effort should be made to fix this problem of the directory context being reset.  Locality of data storage is good for sanity and won't result in someone accidentally blowing out their data folders for all the applications they have.
<br/>
<br/>
I guess it's probably most important to at least agree to a standard.  I tend to value my sanity when it comes to coding.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66839 - FireSlash - Fri Jan 13, 2006 8:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>brian33x51 wrote:</b></span></td> </tr> <tr> <td class="quote">I think some effort should be made to fix this problem of the directory context being reset.</td> </tr></table><span class="postbody">
<br/>
<br/>
It <span style="font-style: italic">may</span> be possible for a loader to pass the directory on to the .nds file.
<br/>
<br/>
However.
<br/>
<ul>
<br/>
<li><span style="font-weight: bold">Every</span> .nds loader is going to have to support this. If only a few do, its a waste of time.
<br/>
</li><li>You can't force homebrew devs to use it.
<br/>
</li><li>It opens up a new area of things tha can go wrong.
<br/>
</li><li>If someone launches the file <span style="font-weight: bold">without</span> a loader, it won't work. Even worse, there most likely won't be a good way to determine if the data is there or not, as the ds's firmware might have had data in that memory address.
<br/>
</li><li>Would break compatability with WMB
<br/>
</li><li>While you could fix the WMB/noloader issues by specifying a "default" directory, this would be confusing, and in the end wouldn't solve the problem</li></ul><br/>_________________<br/><a class="postlink" href="http://www.fireslash.net" target="_blank">FireSlash.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66850 - octopusfluff - Fri Jan 13, 2006 9:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>brian33x51 wrote:</b></span></td> </tr> <tr> <td class="quote">I think some effort should be made to fix this problem of the directory context being reset.  Locality of data storage is good for sanity and won't result in someone accidentally blowing out their data folders for all the applications they have.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't think that's the best way to look at it. It's not so much that the directory context is being 'reset'.. It's that there is no shared context at all. We aren't dealing with applications running on an operating system, like with Windows, Linux, PalmOS, or whatever.
<br/>
<br/>
We're dealing with executables with complete and total control over the device, who have no luxury to assume any state of the machine prior to their taking control. On this platform, for sanity purposes it's necessary to assume nothing is how you want it, and put it that way.
<br/>
<br/>
What you want is only reasonable in an operating system / application context, such as the DS Linux port.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66904 - tepples - Sat Jan 14, 2006 6:59 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FireSlash wrote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-weight: bold">Every</span> .nds loader is going to have to support this. If only a few do, its a waste of time.</td> </tr></table><span class="postbody">
<br/>
If the .nds loader backend is moved into libnds's implementation of exec() then all the .nds loaders have to do is call exec().
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">You can't force homebrew devs to use it.</td> </tr></table><span class="postbody">
<br/>
If it's part of exec() then it should be really easy to get homebrew developers to use it, if only to minimize the amount of tech-support that the developer has to do.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If someone launches the file <span style="font-weight: bold">without</span> a loader, it won't work. Even worse, there most likely won't be a good way to determine if the data is there or not, as the ds's firmware might have had data in that memory address.</td> </tr></table><span class="postbody">
<br/>
PogoShell for GBA solves this by putting relevant data in the last kilobyte of EWRAM and then putting a 4-byte signature immediately before this (that is, at 0x0203FBFC).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Would break compatability with WMB</td> </tr></table><span class="postbody">
<br/>
Programs that use assets are already incompatible with FlashMe+WMB until TCP is fixed, as only then will it become possible to fopen("http://192.168.0.1/data/titlescreen.gbfs", "r") in order to load the assets from the computer that sent the program. Programs that don't use a loader will just have to run in /, as they're likely to be the only program on the card (as in the case of _boot_mp.nds).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>octopusfluff wrote:</b></span></td> </tr> <tr> <td class="quote">It's that there is no shared context at all. We aren't dealing with applications running on an operating system, like with Windows, Linux, PalmOS, or whatever [...] What you want is only reasonable in an operating system / application context, such as the DS Linux port.</td> </tr></table><span class="postbody">
<br/>
Well, there are operating systems, and then there are operating systems. Some of us just want an operating system kernel that does as much as MS-DOS, which pretty much includes running programs and accessing a file system.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67108 - SeanMon - Sun Jan 15, 2006 4:09 pm</h4>
    <div class="postbody"><span class="postbody">Support for both SRAM saving and CF card saving. *cough*HereticDS*cough*<br/>_________________<br/>null</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
