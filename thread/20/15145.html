<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>WMB packet capture on Windows - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Misc > WMB packet capture on Windows</h2>
<div id="posts">
<div class="post">
    <h4>#152044 - yellowstar - Sat Mar 08, 2008 10:38 pm</h4>
    <div class="postbody"><span class="postbody">Does anybody know of any programs that can both capture and save WiFi packets to your card?(WiFi refers to anything visible on the WiFi channels, mainly local wireless packets)</span><span class="gensmall"><br/><br/>Last edited by yellowstar on Thu Aug 14, 2008 7:34 pm; edited 8 times in total</span></div>    
</div>
<div class="post">
    <h4>#152059 - tepples - Sun Mar 09, 2008 4:45 am</h4>
    <div class="postbody"><span class="postbody">Even if such an app did exist, you probably wouldn't be able to use it for everything you were thinking of. Here's why: Most PCs are set up to transmit and receive 802.11b frames at 11 Mbps. But the DS wireless chip won't receive any frames transmitted faster than 2 Mbps. So you'll miss most of the data.
<br/>
<br/>
What were you planning to capture?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152072 - dantheman - Sun Mar 09, 2008 7:15 am</h4>
    <div class="postbody"><span class="postbody">You could try using tcpdump from within DSLinux.  I don't think it comes as a standard app, but you can find it at <a href="http://dslinux.org/f0rums/viewtopic.php?t=423" target="_blank">http://dslinux.org/f0rums/viewtopic.php?t=423</a> and read the discussion in that thread concerning how to save the output to a file.
<br/>
<br/>
You'll still have the speed limitations set by the DS wifi of course.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152087 - yellowstar - Sun Mar 09, 2008 7:35 pm</h4>
    <div class="postbody"><span class="postbody">I want to capture DS Download Play packets, and packets sent after DP.
<br/>
<br/>
DSLinux isn't a option since I use DS-X.(Which broke recently...)
<br/>
<br/>
Another Question:
<br/>
Is it possible to capture packets, with the Nintendo WiFi connector?(With the included drivers)(No homebrew drivers...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152255 - yellowstar - Wed Mar 12, 2008 9:24 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to capture WMB packets, with my Nintendo USB WiFi connector, using the official drivers. And the software I'm trying to use is Wireshark. But, it's not working. It captures packets to and from the dongle fine, but Download Play packets, no.
<br/>
<br/>
I tried destroying everything in the Capture and Display Filters, but that didn't work. I tried setting the channel to 1, 7, 11/13, the channels that the official games use, but still nothing. And I tried activating promiscuous mode, but still nothing.(But the comms from the dongle concerning WiFi disappear)
<br/>
And I have the interface set to Ralink, the N dongle.
<br/>
<br/>
When I try checking the status of the dongle in Network Connections, it says it's not detecting any WMB packets...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152270 - yellowstar - Thu Mar 13, 2008 2:33 am</h4>
    <div class="postbody"><span class="postbody">I tried putting the Driver Network Type var into Ad Hoc mode, but still nothing.
<br/>
<br/>
I'm thinking the official driver has something to do with it. I'm thinking the official driver ignores packets not addressed to it on purpose.
<br/>
<br/>
I guess I have to wait on that WiFi dongle I'm going to get...(This dongle caused major trouble with the homebrew drivers...)
<br/>
<br/>
Summary:
<br/>
You can capture packets from the Nintendo dongle about WiFi. But, it seems you can't capture packets from from Download Play/WMB. The only way you could do that is with the homebrew drivers, and that's not an option for me.(If you would have a DS capture packets and route them to the dongle, it should work. But that's pointless since you could just save those captured packets.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152394 - masscat - Fri Mar 14, 2008 10:34 pm</h4>
    <div class="postbody"><span class="postbody">If you are trying to capture wireless packet under Windows then you are probably not going to get much success (see the <a class="postlink" href="http://wiki.wireshark.org/CaptureSetup/WLAN" target="_blank">Wireshark wiki</a>).
<br/>
<br/>
Under Linux you can use the Nintendo Wifi adapter for packet capture. It is what I used to look at packets when developing my Linux wmbhost software.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152422 - yellowstar - Sat Mar 15, 2008 6:20 pm</h4>
    <div class="postbody"><span class="postbody">So even if I'd have a wireless card in my desktop computers with Windows, I couldn't use it for packet captures?! Arrgghh...(I know about that AirPCap adapter)
<br/>
<br/>
Another reason to  switch to Linux...
<br/>
<br/>
EDIT:
<br/>
Is it possible, still with the official drivers, to make the Nintendo dongle be assigned/joined to the SSID of a Download Play ad, so in theory it would capture packets from it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152533 - masscat - Mon Mar 17, 2008 11:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yellowstar wrote:</b></span></td> </tr> <tr> <td class="quote">Is it possible, still with the official drivers, to make the Nintendo dongle be assigned/joined to the SSID of a Download Play ad, so in theory it would capture packets from it?</td> </tr></table><span class="postbody">
<br/>
No it is not. Download Play is similar to standard 802.11 networking but different enough for it to be ignored by a PC's normal wireless system.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158514 - yellowstar - Thu Jun 12, 2008 6:06 pm</h4>
    <div class="postbody"><span class="postbody">I might be getting a new Wifi dongle soon.(<a class="postlink" href="http://us.zyxel.com/web/product_family_detail.php?PC1indexflag=20040520161256&amp;CategoryGroupNo=PDCA2007070" target="_blank">Zyxel G-220v2</a> dongle)
<br/>
<br/>
I guess like everything else, packet capture wouldn't work on Windows. I guess it would work on Linux?(There's Linux drivers for it)
<br/>
<br/>
Does anybody have any experience with this dongle, with it being connected on a desktop XP and Vista, and DSes and a Vista laptop being connected to it?(Or any experience at all with it?)(Just normal Wifi)
<br/>
I was going to order Zyxel G-220 today, but then I found that there's problems with Vista compatibility. This model has Vista compatibility.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158516 - yellowstar - Thu Jun 12, 2008 6:58 pm</h4>
    <div class="postbody"><span class="postbody">Well, googled and went through 8 pages, and didn't find hardly anybody with problems.(Unsolved ones anyway)
<br/>
The software and driver need to finish downloading.(Driver is small, software is ~7 MB)
<br/>
I'm going to wait a couple days before ordering.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158538 - yellowstar - Fri Jun 13, 2008 1:41 am</h4>
    <div class="postbody"><span class="postbody">Packet capture of WMB with USB Wifi adapters on Windows is possible, but... 
<br/>
<br/>
It's done by capturing raw packets over <a class="postlink" href="http://wiki.wireshark.org/CaptureSetup/USB" target="_blank">USB.</a> That page links to the Tools page, which at the bottom has the Windows USBSnoop <a class="postlink" href="http://sourceforge.net/projects/usbsnoop/" target="_blank">tool.</a>
<br/>
<br/>
Here's the bad part: When I tested it, when I was digging though the usblog file with a hex editor and it's search feature, all I could find was beacons, nothing else... And masscat said the dongle works on Linux, so USB capture should work... Why wouldn't it work?
<br/>
<br/>
Another thing:
<br/>
The captured packets are not saved in libpcap format.(usblog format)
<br/>
I need to either write my own software to convert the files to .cap files, and then extract the actual Nifi packets out of the raw USB packets, or find software on internet to do likewise.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159065 - yellowstar - Wed Jun 25, 2008 2:22 am</h4>
    <div class="postbody"><span class="postbody">Is it possible to do WMB packet capture using a router?(So you'd be using a router for capture, instead of like say an internal wireless card)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159066 - Sektor - Wed Jun 25, 2008 2:36 am</h4>
    <div class="postbody"><span class="postbody">The router would need an ralink chipset and a custom firmware (you'd have to code your own).  Best to use a wifi card.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"><br/><br/>Last edited by Sektor on Wed Jun 25, 2008 3:00 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#159067 - yellowstar - Wed Jun 25, 2008 2:51 am</h4>
    <div class="postbody"><span class="postbody">Guess I'm back to where I was again... This router, it's a Linksys, so I guess that's out. I didn't want to mess with custom firmware either, due to the warranty-voiding.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159241 - yellowstar - Fri Jun 27, 2008 11:30 pm</h4>
    <div class="postbody"><span class="postbody">How do I capture packets from a Wii, (or anything other than the computer really)
<br/>
connected to a Linksys WRT52G2 router, when it is doing WiFi? This is for mainly capturing packets from the DS Demo transfers when the Wii downloads the demo off of Nintendo's servers. The computer is connected to the router via Ethernet. The router uses an external modem for Internet. I tried capturing packets off of the Ethernet NIC, but all I got was traffic between the computer and router, no Wii, or even DS, at all. I tried connecting the computer to the modem directly, but I didn't get anything from DS/Wii. The router has the latest firmware. I checked the web site, and the version is the same as the one I have. There's this "Port Range Forward" feature, but I tried it, with no success. I read the description, and it seems it's made for something else... I can't try this for a long while, but would capturing Wii WiFi packets with a laptop /w WiFi work?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161805 - yellowstar - Thu Aug 14, 2008 7:30 pm</h4>
    <div class="postbody"><span class="postbody">I tried capturing USB packets via SnoopyPro, /w a Zyxel G-220 in both AP/Station mode, while attempting to capture WMB packets. Beacon capture seems to have worked. But there's only beacons in the capture - no WMB data packets or anything, except for beacons.  In station mode I can't clamp the transfer rate down far enough, and in station mode, I can't set the rate manually. However, the rate is set to 2.0 mbps when a DS is doing Wifi, so perhaps it could be done that way. But even at a higher transfer rate, wouldn't non-beacon packets be captured?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164679 - cboomf_ - Thu Nov 13, 2008 2:33 pm</h4>
    <div class="postbody"><span class="postbody">its a bit hacerish but i use airodump-ng 0.9.4 which uses peek drivers ...
<br/>
<br/>
It works on my atheros chipset and some others ...<br/>_________________<br/>M3 Simply - 1GB SanDisk 
<br/>
Flashme'd DS</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
