<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NDS Loading: Full application path? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > NDS Loading: Full application path?</h2>
<div id="posts">
<div class="post">
    <h4>#77732 - Lazy1 - Sun Apr 02, 2006 7:29 pm</h4>
    <div class="postbody"><span class="postbody">I've been thinking, we really need a standardized way to get the full path where the .nds file was launched from.
<br/>
<br/>
For example, if I wanted to have multiple mods of wolf3d on my compactflash card I would need to know where the nds was started from.
<br/>
Since there is currently no way ( atleast that I know of ) to get the application path that means 1 mod per cf card.
<br/>
( Current method is to have game files in /wolf3d )
<br/>
<br/>
If the path was stored by the nds loader in an area of memory and kept safe just long enough, the current directory could be switched to where the .nds file is kept and allow multiple mods on the same card.
<br/>
<br/>
This would also allow other apps to keep their specific files in the same dir as the app rather than dumping everything either in a pre-determined folder or the card's root directory.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77733 - Mighty Max - Sun Apr 02, 2006 7:39 pm</h4>
    <div class="postbody"><span class="postbody">GBAMP Multiboot stores this at (char *)0x27FF810. This area is not wiped on a reboot and is used to stores the last browsed folder.
<br/>
<br/>
When another .nds reboots and this area is not 0, this is taken as the path to continue browsing.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77735 - Lazy1 - Sun Apr 02, 2006 7:47 pm</h4>
    <div class="postbody"><span class="postbody">Excellent, now all we need is for every other nds loader to implement the same thing at the same address.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77742 - Darkflame - Sun Apr 02, 2006 8:46 pm</h4>
    <div class="postbody"><span class="postbody">Very much agreed.
<br/>
<br/>
Multiboot has lead the way....now to get Moonshell onboard and we will have a powerfull standard ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77744 - Lazy1 - Sun Apr 02, 2006 9:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mighty Max wrote:</b></span></td> </tr> <tr> <td class="quote">GBAMP Multiboot stores this at (char *)0x27FF810. This area is not wiped on a reboot and is used to stores the last browsed folder.
<br/>
<br/>
When another .nds reboots and this area is not 0, this is taken as the path to continue browsing.</td> </tr></table><span class="postbody">
<br/>
<br/>
I just did a test and that location always seems to be zero.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   if ( *( ( char* ) 0x27FF810 ) == 0 )
<br/>
      iprintf( "Path not available\n" );
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77751 - Mighty Max - Sun Apr 02, 2006 9:54 pm</h4>
    <div class="postbody"><span class="postbody">Whoops indeed, 
<br/>
<br/>
The path/filename is only set when the .nds is started via an data file. I.e. each *.txt opens dstxt.nds with the path to that file. 
<br/>
<br/>
Just checked it, forgot this bahaviour. Maybe i should update the sources for the current devkit and put them open/fix that.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77781 - tepples - Mon Apr 03, 2006 12:00 am</h4>
    <div class="postbody"><span class="postbody">We definitely need a standard for passing argc and argv to plug-ins. Passing the program's full path as argv[0] would be compatible with C on more familiar platforms.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77820 - chishm - Mon Apr 03, 2006 8:57 am</h4>
    <div class="postbody"><span class="postbody">If someone comes up with a standard, I'm more than willing to implement it into NDSMP. However, there's still the problem of all the supercard, m3 and flashcart user.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77825 - Lazy1 - Mon Apr 03, 2006 10:05 am</h4>
    <div class="postbody"><span class="postbody">We could just break backwards compatibility and only let stuff run on loaders that implement this feature, that way users can pressure the loader devs into conforming to the standard.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
