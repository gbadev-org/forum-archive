<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Another breakthrough in the HB scene! RAM expansion! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS Misc > Another breakthrough in the HB scene! RAM expansion!</h2>
<div id="posts">
<div class="post">
    <h4>#99443 - MaHe - Mon Aug 21, 2006 6:51 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://www.dslinux.org/index.php?showtopic=1748&amp;st=20#" target="_blank">http://www.dslinux.org/index.php?showtopic=1748&amp;st=20#</a>
<br/>
<br/>
Now, it was tough to implement it for amadeus, but he deserves a pat on the back (at least). Now, who's gonna implement it in libnds? :P
<br/>
<br/>
For all you SCLite users out there: Support for this device is also implemented :)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99449 - evil-doer - Mon Aug 21, 2006 8:28 pm</h4>
    <div class="postbody"><span class="postbody">sounds great. im not a programmer or know whats going on here but as i understand it, the supercard has 32 megabytes of ram. why was only 16 implemented?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99450 - Mr. Picklesworth - Mon Aug 21, 2006 8:35 pm</h4>
    <div class="postbody"><span class="postbody">Well, the actual NDS files for the SC builds are 14 MB for some reason, so that undoubtedly loses a bunch of RAM.
<br/>
<br/>
Of course, I don't own a Supercard (and I'm still trying to figure out if the SC CF build has complete filesystem access like the GBAMP build), so don't take my word for it.<br/>_________________<br/>Thanks!
<br/>
<span style="font-size: 9px; line-height: normal">MKDS Friend Code: 511165-679586
<br/>
MP:H Friend Code: 2105 2377 6896</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99455 - JaJa - Mon Aug 21, 2006 9:19 pm</h4>
    <div class="postbody"><span class="postbody">Only 16 is implemented, because you still want to be able to access your CF card don't you?
<br/>
The lower 16Mbyte is used for RAM, the upper is for I/O to card.
<br/>
<br/>
And yes, the SuperCard build has full read/write access to the CF card.
<br/>
<br/>
The builds are 14Mbyte, but some of that was loaded into the SuperCard RAM, when it was emulating GBA Flash. IIRC 11.5Mbyte was put into the SuperCard RAM, but only read only.
<br/>
The remaining 1.5mbyte couldn't be located in the SuperCard space as it needed writing to.
<br/>
Leaving about 2.5Mbyte RAM free.<br/>_________________<br/>LAWL HOOGE
<br/>
<a class="postlink" href="http://www.pageofrandom.wordpress.com/" target="_blank">My Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99458 - dualscreenman - Mon Aug 21, 2006 9:35 pm</h4>
    <div class="postbody"><span class="postbody">16 MB of this RAM is not usable since it is used for GBA I/O<br/>_________________<br/></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dualscreenman wrote:</b></span></td> </tr> <tr> <td class="quote">What about Gaim DS? Gaim pretty much has support for all IM programs.</td> </tr></table><span class="postbody"> </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">"Goshdammit, the DS is not a Gaim-boy! It's a third pillar!"</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99461 - Mr. Picklesworth - Mon Aug 21, 2006 10:26 pm</h4>
    <div class="postbody"><span class="postbody">Excellent explanation.
<br/>
Thanks!<br/>_________________<br/>Thanks!
<br/>
<span style="font-size: 9px; line-height: normal">MKDS Friend Code: 511165-679586
<br/>
MP:H Friend Code: 2105 2377 6896</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99468 - evil-doer - Mon Aug 21, 2006 11:26 pm</h4>
    <div class="postbody"><span class="postbody">yep, thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99472 - Lick - Tue Aug 22, 2006 12:01 am</h4>
    <div class="postbody"><span class="postbody">Thanks for passing along the news. This will be THE reason to jump over to DS programming (yeah jump back Liran!) for many people. The limited RAM was always a problem but I am sure many manufacturers will get even more space available in their cards (even if it's hard). Great!<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99497 - TJ - Tue Aug 22, 2006 2:00 am</h4>
    <div class="postbody"><span class="postbody">So is XIP still going to be used on the SuperCard builds?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99504 - josath - Tue Aug 22, 2006 2:22 am</h4>
    <div class="postbody"><span class="postbody">The extra RAM has been usable by homebrewers for quite some time now, ever since the unlock codes were discovered. This development, while very neat, isn't really useful for non-dslinux apps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99518 - Ryan FB - Tue Aug 22, 2006 4:15 am</h4>
    <div class="postbody"><span class="postbody">So, how exactly do you get SCSD RAM working? I've been at it for a while with no luck. Here's the unlock code DSLinux uses:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">    ldr r0, =0x09FFFFFE
<br/>
    ldr r1, =0xa55a
<br/>
    ldr r2, =0x0007
<br/>
    strh    r1, [r0]
<br/>
    strh    r1, [r0]
<br/>
    strh    r2, [r0]
<br/>
    strh    r2, [r0]</td> </tr></table><span class="postbody">
<br/>
Here's where it marks the start of GBA ROM as a usable 16M memory page:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ldr r0,=( PAGE_16M | 0x08000000 | 1)</td> </tr></table><span class="postbody">Here's a small C testcase of what I'm trying:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "nds.h"
<br/>
#include &lt;nds/arm9/console.h&gt; //basic print funcionality
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
#define SC_UNLOCK ((uint16*)0x09FFFFFE)
<br/>
#define SC_INIT 0xa55a
<br/>
#define SC_ENABLE_SDRAM 0x0007
<br/>
int main(void) {
<br/>
    sysSetBusOwners(BUS_OWNER_ARM9,BUS_OWNER_ARM9); //sets up WAIT_CR and gives ARM9 access to GBA ROM
<br/>
    videoSetMode(0);    //not using the main screen
<br/>
    videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);    //sub bg 0 will be used to print text
<br/>
    vramSetBankC(VRAM_C_SUB_BG);
<br/>
<br/>
    SUB_BG0_CR = BG_MAP_BASE(31);
<br/>
<br/>
    BG_PALETTE_SUB[255] = RGB15(31,31,31);  //by default font will be rendered with color 255
<br/>
<br/>
    consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
<br/>
    *SC_UNLOCK = SC_INIT;
<br/>
    *SC_UNLOCK = SC_INIT;
<br/>
    *SC_UNLOCK = SC_ENABLE_SDRAM;
<br/>
    *SC_UNLOCK = SC_ENABLE_SDRAM;
<br/>
<br/>
    int i;
<br/>
    for(i = 0; i &lt; 0x300; i++) {
<br/>
        GBA_BUS[i] = 0x0001;
<br/>
        iprintf("%u",GBA_BUS[i]);
<br/>
    }
<br/>
    while(1) {
<br/>
    }
<br/>
    return 0;
<br/>
}</td> </tr></table><span class="postbody">The loop should be setting the first 0x300 of GBA ROM to 0x0001, with the printf just showing a whole bunch of 1's, but instead you get whatever data was already in RAM, meaning the writes aren't working. GBA_BUS is set up by libnds to be ((vuint16 *)(0x08000000)).
<br/>
<br/>
Edit: Go figure, right after I post the question I realize what's going wrong. SC_UNLOCK must be defined as a vuint16* (volatile):</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define SC_UNLOCK ((vuint16*)0x09FFFFFE)</td> </tr></table><span class="postbody">otherwise GCC optimizes out the duplicate writes. After that it works!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99521 - ssj4android - Tue Aug 22, 2006 5:16 am</h4>
    <div class="postbody"><span class="postbody">Wait, is the 16 MB not usable at all, or just because linux.nds is occupying it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99529 - MaHe - Tue Aug 22, 2006 8:59 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ssj4android wrote:</b></span></td> </tr> <tr> <td class="quote">Wait, is the 16 MB not usable at all, or just because linux.nds is occupying it?</td> </tr></table><span class="postbody">All of the input/output to the GBA slot must go through a part of RAM, therefore it's not usable. On the other hand, M3 users are in trouble; M3 must use most of the RAM for I/O, making it just as bad as GBAmp.<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99533 - JaJa - Tue Aug 22, 2006 9:28 am</h4>
    <div class="postbody"><span class="postbody">Yes, this work only really affects DSLinux, as it's been possible to use the RAM for some time now, as long as the programmer avoids 8bit writes.<br/>_________________<br/>LAWL HOOGE
<br/>
<a class="postlink" href="http://www.pageofrandom.wordpress.com/" target="_blank">My Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99546 - daninski - Tue Aug 22, 2006 10:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>JaJa wrote:</b></span></td> </tr> <tr> <td class="quote">Yes, this work only really affects DSLinux, as it's been possible to use the RAM for some time now, as long as the programmer avoids 8bit writes.</td> </tr></table><span class="postbody"> and possibly miniVmac, lazy1 is in that thread soaking up info from amedeus :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99591 - jbullfrog - Tue Aug 22, 2006 4:15 pm</h4>
    <div class="postbody"><span class="postbody">can opera browser now be used?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99593 - Lick - Tue Aug 22, 2006 4:17 pm</h4>
    <div class="postbody"><span class="postbody">Opera Browser can be used!! :D 
<br/>
.. when you buy it from your local store (or import it). No warez please. ;)<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99621 - tepples - Tue Aug 22, 2006 6:53 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://en.wikipedia.org/wiki/Nintendo_DS_Browser" target="_blank">The browser's Wikipedia article</a> still lists no North American release date. At this rate, it'll probably end up just like <span style="font-style: italic">Kuru Kuru Kururin</span> and <span style="font-style: italic">Payback</span>: released everywhere but North America.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99624 - Lazy1 - Tue Aug 22, 2006 7:07 pm</h4>
    <div class="postbody"><span class="postbody">From what I was told, the 8bit write patch won't be included with devkitARM.
<br/>
So, inorder for me to use the external ram for mini vmac I have to track down every place where an 8bit write is done to gba rom space.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99626 - MrD - Tue Aug 22, 2006 7:09 pm</h4>
    <div class="postbody"><span class="postbody">Gosh, that's strange... A european release date, but no american one.<br/>_________________<br/>Not active on this forum. For Lemmings DS help see its website.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99717 - MechaBouncer - Wed Aug 23, 2006 3:52 pm</h4>
    <div class="postbody"><span class="postbody">Maybe because it's Opera and instead of AOL/IE. -_-<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99720 - Xtreme - Wed Aug 23, 2006 4:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MechaBouncer wrote:</b></span></td> </tr> <tr> <td class="quote">Maybe because it's Opera and instead of AOL/IE. -_-</td> </tr></table><span class="postbody">
<br/>
No, that's not the reason. There is something else going on. European release might be easier to make than american. I think it will be released later there too. 
<br/>
Opera is from Norway, but Nintendo ordered the DS Browser from them. Opera wouldn't made it without that order from Nintendo.
<br/>
<a class="postlink" href="http://news.zdnet.co.uk/software/developer/0,39020387,39281495,00.htm" target="_blank">Something about Microsoft... and Firefox</a> - Firefox is their enemy for IE, like Opera and AOL. <span style="font-style: italic">"The head of Microsoft's open source business has offered help to get Firefox to work with the upcoming Vista operating system..."</span> -No, this had nothing to do with the quote, just mentioned it as it sounds weird.
<br/>
Sorry about my wooden english if it had sticks. ;)<br/>_________________<br/>My <a class="postlink" href="http://www.samipupu.com/upload/Guest/xtreme_theme.mp3" target="_blank">Theme</a><span style="font-size: 9px; line-height: normal">
<br/>
DS Lite (FM_V8a) ** R4 Revolution (2GB Transcend) ** SuperCard Lite (2x 2GB Transcend)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99726 - MechaBouncer - Wed Aug 23, 2006 4:33 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, didn't add and &lt;sarcasm&gt; tags to my comment. It was a bad joke implying how many people here in the US are idiots when it comes to computers and won't use anything besides AOL or the included IE that comes with Windows.<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99744 - Sodeju - Wed Aug 23, 2006 6:41 pm</h4>
    <div class="postbody"><span class="postbody">What does this mean for emulators like Snezzi DS and Picodrive?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99792 - Darkflame - Thu Aug 24, 2006 12:58 am</h4>
    <div class="postbody"><span class="postbody">Nothing I think.
<br/>
<br/>
Im skeptical the ram should/will be used for a few reasons.
<br/>
<br/>
Especialy if the browser proves to be routeing everything ver nintendos severs, thus makeing it painfully slow.<br/>_________________<br/><a class="postlink" href="http://www.rateoholic.co.uk/RateoholicResults.php#SEARCHFOR=&amp;TYPE=VideoGame%25&amp;BY=darkflame&amp;ORDER=hyb_down&amp;ST=0" target="_blank">Darkflames Reviews</a>    --   
<br/>
Make your own at;
<br/>
<a class="postlink" href="http://www.rateoholic.co.uk" target="_blank"> Rateoholic:Reviews for anything, by anyone.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100545 - MechaBouncer - Mon Aug 28, 2006 4:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sodeju wrote:</b></span></td> </tr> <tr> <td class="quote">What does this mean for emulators like Snezzi DS and Picodrive?</td> </tr></table><span class="postbody">
<br/>
<br/>
In the case of SnezziDS, because it's written for flashcarts, the games get loaded into and run from Supercard/M3 SRAM anyway. The emulator then runs out of the DS's memory. It would probably be unnecessary for SnezziDS.<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100646 - HtheB - Tue Aug 29, 2006 6:48 am</h4>
    <div class="postbody"><span class="postbody">But ScummVM can play Full Throttle then?
<br/>
<br/>
This has to be the solution! :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100654 - Mrshlee - Tue Aug 29, 2006 9:49 am</h4>
    <div class="postbody"><span class="postbody">This would require a fork of devkitPro because im under the grand impression that Wintermute isn't planning to do allow 8bit write in the current editions.<br/>_________________<br/><a class="postlink" href="http://MrShlee.com/" target="_blank">MrShlee.com</a>
<br/>
Projects
<br/>
<a class="postlink" href="http://dev-scene.com/" target="_blank">Dev-Scene</a>
<br/>
<a class="postlink" href="http://MyTechpedia.com/" target="_blank">MyTechpedia</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
