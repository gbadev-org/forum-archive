<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>PocketSPC v0.7 released - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > PocketSPC v0.7 released</h2>
<div id="posts">
<div class="post">
    <h4>#46607 - gladius - Tue Jun 28, 2005 12:43 am</h4>
    <div class="postbody"><span class="postbody">The sequel to my GBA SPC player is here :).  PocketSPC plays back SNES music files, also known as SPC's.
<br/>
<br/>
Visit the webpage for the download: <a class="postlink" href="http://pocketspc.pocketheaven.com/" target="_blank">http://pocketspc.pocketheaven.com/</a>.
<br/>
<br/>
Changes in the 0.7 release:
<br/>
- Added Gaussian interpolation - samples sound much nicer
<br/>
- Increased accuracy of DSP/APU integration
<br/>
- Better emulation of key-on and key-off registers
<br/>
- Changed around dsp register writes, should be more accurate
<br/>
- Envx and Outx are cleared on key-on now
<br/>
- Changed DSP ram to have 256 bytes, so reads are no longer mirrored
<br/>
- Fixed stupid bug with DSP register reads - any songs that read from envx were broken
<br/>
  (fixes dq1, doom, rnh, bt&amp;dd, a lot more)
<br/>
- Fixed bugs and added echo emulation to SnesDS version</span><span class="gensmall"><br/><br/>Last edited by gladius on Wed Aug 17, 2005 4:45 am; edited 5 times in total</span></div>    
</div>
<div class="post">
    <h4>#46610 - Filb - Tue Jun 28, 2005 1:03 am</h4>
    <div class="postbody"><span class="postbody">I'm testing it right now.
<br/>
Wow, it's awesome, man! Keep up the good work.
<br/>
<br/>
Can't wait for future versions.
<br/>
<br/>
Edit: There are still bugs in it, right? A lot of SPCs I've been trying still sound a bit weird or seem to crash it. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46611 - gladius - Tue Jun 28, 2005 1:46 am</h4>
    <div class="postbody"><span class="postbody">Yes, there are still quite a few cpu bugs that cause SPC's to play back incorrectly.  Hence the v0.1 :).  I have a few bugs I'm tracking down right now that cause problems in mariokart and star ocean that should fix quite a few others.  If you tell me what games are not working correctly I'll take a look at them and hopefully be able to fix them up.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46612 - Filb - Tue Jun 28, 2005 1:49 am</h4>
    <div class="postbody"><span class="postbody">Try F-Zero. I tried a few songs from that game but it just hung up.
<br/>
On the screen it showed a "NOP" after the file name, too.
<br/>
<br/>
<a class="postlink" href="http://greenchu.de/temp/fz-01.spc" target="_blank">Here</a>'s one of the F-Zero files.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46621 - DekuTree64 - Tue Jun 28, 2005 7:01 am</h4>
    <div class="postbody"><span class="postbody">Nice work! Cool as it was attempting such an emulator on the GBA, the DS's sound HW does sound much nicer :)
<br/>
<br/>
That, and the fact that there will hopefully be enough CPU power left to run a SNES emulator with it. Have you thought about running it entirely on the ARM7? Combined with a port of PocketSNES, it might not be far from done<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46654 - gladius - Tue Jun 28, 2005 5:47 pm</h4>
    <div class="postbody"><span class="postbody">Fixed the problem with Fzero, not sure how many others were fixed by it.  But mariokart and star ocean are still messing up, so I'm going to wait a bit too see if I can't fix that before another release.
<br/>
<br/>
DekuTree64: Yes, I have a version running entirely on the arm7 and it works fine.  There is some slowdown when all channels are playing, but this is somewhat rare, and the mixer routine is still in c++, so there is much room for improvement there.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47250 - gladius - Wed Jul 06, 2005 7:43 pm</h4>
    <div class="postbody"><span class="postbody">Version 0.2 is now out. There have been a ton of bugfixes, all the SPC's I've tested at least play back, but there are still some errant samples. It's now running fully on the arm7 with no main ram access, so it could be plugged into a game pretty easily, or a snes emulator ;). 
<br/>
<br/>
New homepage as well: <a class="postlink" href="http://pocketspc.pocketheaven.com/" target="_blank">http://pocketspc.pocketheaven.com/</a>, thanks to the pocketheaven crew for the space!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47253 - Sappharad - Wed Jul 06, 2005 8:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">There have been a ton of bugfixes, all the SPC's I've tested at least play back, but there are still some errant samples. It's now running fully on the arm7 with no main ram access, so it could be plugged into a game pretty easily, or a snes emulator ;). </td> </tr></table><span class="postbody">
<br/>
Try DungeonMan from Earthbound. (Actually, both songs from Earthbound I put on here choke it, but DungeonMan even sounds complicated, so it's a good one to test out) It plays one drum beat, then there's silence for the rest of the song. I'm guessing you wont need any help finding this song. :-)
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">Since you've got it running on ARM7, is there any chance it would still run full speed if you were to make it into a Pogoshell plugin?</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47259 - gladius - Wed Jul 06, 2005 9:42 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the tip.  Looks like there are still cpu fixes to be done :).
<br/>
<br/>
As for backporting to the GBA, I've thought about it, it should be possible with mono/8-bit mixing, which is fine as stereo on the GBA sucks anyhow.  I'm working on getting the core working correctly before I start thinking about that though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47260 - dXtr - Wed Jul 06, 2005 9:46 pm</h4>
    <div class="postbody"><span class="postbody">I tried the Soul Blazer soundtrack and none of the songs worked..
<br/>
so you maybe should try those to :)
<br/>
<br/>
edit: oh, and also: GREAT WORK! :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47281 - tepples - Thu Jul 07, 2005 12:56 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sappharad wrote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-size: 9px; line-height: normal">Since you've got it running on ARM7, is there any chance it would still run full speed if you were to make it into a Pogoshell plugin?</span></td> </tr></table><span class="postbody">
<br/>
Currently PogoShell runs only in GBA mode, and in GBA mode, the ARM7 is clocked at half speed (16.7 MHz).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47295 - The 9th Sage - Thu Jul 07, 2005 3:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">Version 0.2 is now out. There have been a ton of bugfixes, all the SPC's I've tested at least play back, but there are still some errant samples. It's now running fully on the arm7 with no main ram access, so it could be plugged into a game pretty easily, or a snes emulator ;). 
<br/>
<br/>
New homepage as well: <a class="postlink" href="http://pocketspc.pocketheaven.com/" target="_blank">http://pocketspc.pocketheaven.com/</a>, thanks to the PIRACY-DOT-COM crew for the space!</td> </tr></table><span class="postbody">
<br/>
<br/>
Oh man, you added support for ID666 tags.  This program just gets better and better.  :D<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47299 - Dwedit - Thu Jul 07, 2005 3:52 am</h4>
    <div class="postbody"><span class="postbody">I'd love to see compatiblity with Darkain's loader.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#48019 - gladius - Sat Jul 16, 2005 6:50 am</h4>
    <div class="postbody"><span class="postbody">Version 0.3 has been released, quite a few fixes (sorry, no soul blazer yet, that one is turning out to be a tough one to fix!).  Check the main post for more information.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#48023 - Sappharad - Sat Jul 16, 2005 7:35 am</h4>
    <div class="postbody"><span class="postbody">Nice. Lots of stuff sounds wonderful now.
<br/>
<br/>
If you're still looking for songs that cause problems:
<br/>
Chrono Trigger 1-03 Morning Sunlight - The instrument that starts 7 seconds into the song is played incorrectly. I'm assuming this is related to that echo hack you mention, because it sounds like something scraping along a fan blade. (Actually, several songs in Chrono Trigger suffer from this, but this is the first one in the playlist I found)
<br/>
Chrono Trigger 1-10 Goodnight - This one should be fairly obvious... Sounds like one of the instruments is physically broken. :-)
<br/>
Chrono Trigger 3-01 Singing Mountian - This whole song is filled with tuning problems.
<br/>
(I could list a whole bunch more from this one game, but I'm going to assume many of these minor issues are related to the same thing, and go on to another game)
<br/>
<br/>
None of the music in Kirby's Dream course plays, and nor does Earthbound still. Is your echo hack mentioned in the notes enabled in this release? (Both of these games have sound that works fine in SNESDS)
<br/>
<br/>
Once again, nice job.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#48065 - Cleon I - Sat Jul 16, 2005 10:17 pm</h4>
    <div class="postbody"><span class="postbody">Very nice work. :)  I tried it with some StarFox tracks and most of them work perfectly, although some have tracks that are far louder than they should be, or have annoyingly loud beeps.  An example of the former is Fortuna, which has a ringing-type effect that keeps playing too loud, and an example for the latter is Title Screen which rapes your ears for the first couple seconds.  I'm not providing links since it should be easy enough to find them on your own.
<br/>
<br/>
Also, any chance someone can start up a compatibility list like for snesDS?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#48070 - gladius - Sat Jul 16, 2005 11:00 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the feedback, it's helpful to track down bugs in the songs.  Those messed up sounds are supposed to be run through a filter, but unfortunately the arm7 doesn't have the horsepower to do that.  The next version should have that problem mostly fixed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#48982 - gladius - Mon Jul 25, 2005 1:21 am</h4>
    <div class="postbody"><span class="postbody">New version out.  It has echo/filter support so most songs sound better.  Check the first post for details.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#48988 - The 9th Sage - Mon Jul 25, 2005 3:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">New version out.  It has echo/filter support so most songs sound better.  Check the first post for details.</td> </tr></table><span class="postbody">
<br/>
<br/>
Excellent work. :)  This version sounds great on most of the songs I've tried from Chrono Trigger...a few sound off, but man, great work.
<br/>
<br/>
*edit*
<br/>
Decisive in Tales of Phantasia sounds like it has heavy metal guitars in it. O_o lol  Oh, and thank you for the random function, I love that.<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49279 - gladius - Thu Jul 28, 2005 3:33 am</h4>
    <div class="postbody"><span class="postbody">Couldn't resist releasing this new version after I fixed a massive sample decoding bug :).  Quite a few other bug fixes, but a few more games work properly now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49313 - Isle - Thu Jul 28, 2005 2:41 pm</h4>
    <div class="postbody"><span class="postbody">weeee, fzero plays now!
<br/>
could you make an option to ignore the timer and have it play forever?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49364 - The 9th Sage - Fri Jul 29, 2005 4:36 am</h4>
    <div class="postbody"><span class="postbody">Oh wow, this does sound a lot better.  I tried it with all songs that gave me problems in testing the last release, and all of them are sounding fantastic.   No more random distorted guitar solo. :D  (other very noticeably better songs besides ToP songs are for example Records 1, 2, and 3 in StarFox 2) Only bug I can find is that songs from Super Turrican don't seem to be playing right.
<br/>
<br/>
I have a small request though...is there any way you could add a way to lock the L and R buttons?  I like that you can change tracks with them, but when I shove the NDS in my pocket the song has a tendency to get changed on me, heh.
<br/>
<br/>
*edit*
<br/>
Ooh, and the wind on Singing Mountain (Chrono Trigger) sounds like it should now, and Lavos' scream sounds better in that one song.
<br/>
<br/>
*edit 2*
<br/>
And I'm curious...what do the Channel States on the bottom mean?  Some of them I've guessed, like level of echo, wether channel is in use, and I *think* one is the instrument used, I think one is the loudness of that channel...not sure about most of them.<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49643 - gladius - Mon Aug 01, 2005 4:28 am</h4>
    <div class="postbody"><span class="postbody">Great, glad to hear things are sounding better.
<br/>
<br/>
As for the channel states, here is a list from left to right: channel active, envelope state, echo enabled, envelope volume, pitch, sample, echo co-efficients.
<br/>
<br/>
Sorry, I didn't have time to do the L&amp;R locking or play song forever, but they will be in the next version.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49669 - Chetic - Mon Aug 01, 2005 2:29 pm</h4>
    <div class="postbody"><span class="postbody">Yes! Super Bomberman 2 songs works now, thank you ^_^
<br/>
Actually everything sounds alot more like real SNES now, if not exactly like it ;)<br/>_________________<br/>Packin':
<br/>
Grey DS with FlashMe v7
<br/>
1Gbit XG2T 2005 (Neoflash compatible)
<br/>
GBAMP, Supercard CF, 512Mb Magic Key 3 and EZFA 256Mbit</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49724 - The 9th Sage - Tue Aug 02, 2005 1:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">Great, glad to hear things are sounding better.
<br/>
<br/>
As for the channel states, here is a list from left to right: channel active, envelope state, echo enabled, envelope volume, pitch, sample, echo co-efficients.
<br/>
<br/>
Sorry, I didn't have time to do the L&amp;R locking or play song forever, but they will be in the next version.</td> </tr></table><span class="postbody">
<br/>
<br/>
Take as much time as you need, I'm estatic about this project no matter wether I can lock the L and R buttons or not. :D<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49783 - dXtr - Tue Aug 02, 2005 1:47 pm</h4>
    <div class="postbody"><span class="postbody">hey, it sounds like you've fixed th problem with the soul blazer songs :D
<br/>
now I can't wait for the next snesDS version ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50031 - Elrinth - Thu Aug 04, 2005 6:32 pm</h4>
    <div class="postbody"><span class="postbody">Me 2.. I really like this pocketSPC.
<br/>
<br/>
What will happen when u move this to snesDS and to arm 7? Cause currently pocketSPC is done in ARM 9 right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50046 - BLKGHOST - Thu Aug 04, 2005 8:01 pm</h4>
    <div class="postbody"><span class="postbody">According to his page, he keeps updating the arm7 code for snesds</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51205 - gladius - Wed Aug 17, 2005 4:50 am</h4>
    <div class="postbody"><span class="postbody">The SnesDs and PocketSpc versions are pretty similar, so when I fix a bug in one, I can generally fix it at the same time in the other.
<br/>
<br/>
Check out the new version, it has a pretty big sound quality increase (guassian interpolation for samples).  Unfortunately, gaussian interpolation probably won't make it into the snesds version, but who knows.  I didn't think echo emulation would be possible either, but the arm7 can do a cut down version so it'll be in the next snesds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51208 - The 9th Sage - Wed Aug 17, 2005 5:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">The SnesDs and PocketSpc versions are pretty similar, so when I fix a bug in one, I can generally fix it at the same time in the other.
<br/>
<br/>
Check out the new version, it has a pretty big sound quality increase (guassian interpolation for samples).  Unfortunately, gaussian interpolation probably won't make it into the snesds version, but who knows.  I didn't think echo emulation would be possible either, but the arm7 can do a cut down version so it'll be in the next snesds.</td> </tr></table><span class="postbody">
<br/>
<br/>
It sounds great!  I've noticed increased accuracy too, not just because of the interpolation...but stuff like some notes that didn't sound like they were going for as long as they should have are now sounding proper...like "The Final Battle" in FF IV off of the top of my head.  Turrican still doesn't work though. lol  Does this game do something really odd with the sound?
<br/>
<br/>
Anyway, I've loving this so far. :)<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51270 - gladius - Wed Aug 17, 2005 8:55 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, Turrican was a bit strange, but it was a stupid bug on my part.  I've fixed it for the next version.  Shadowrun on the other hand, does some really funky stuff which is taking a while to track down.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51289 - The 9th Sage - Thu Aug 18, 2005 12:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">Yeah, Turrican was a bit strange, but it was a stupid bug on my part.  I've fixed it for the next version.  Shadowrun on the other hand, does some really funky stuff which is taking a while to track down.</td> </tr></table><span class="postbody">
<br/>
<br/>
Cool.  I always loved the songs in Turrican.<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
