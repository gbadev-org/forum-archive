<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Heretic and Hexen in the same Cart - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > Heretic and Hexen in the same Cart</h2>
<div id="posts">
<div class="post">
    <h4>#53444 - SolidSnake - Thu Sep 08, 2005 2:10 pm</h4>
    <div class="postbody"><span class="postbody">Is this possible??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53472 - MrAdults - Thu Sep 08, 2005 5:07 pm</h4>
    <div class="postbody"><span class="postbody">Maybe. Hexen's source has been out there for a while. Since the core of the Doom engine is mostly unchanged between the two, it would just be mainly a matter of fitting assets for both Hexen and Heretic in under 32mbits (aside from globals needed by game code), which would work if you can also fit your binary in under a couple megs (which should also be reasonable). In short, not at all worth the effort it would require, and especially not worth the waste of ram from extra globals lying around.
<br/>
<br/>
I'd rather see someone make it work with GBAMP or something else that would make saving/loading and persistant level data storage a reasonable thing. This has acted as a deterrent for me, since Hexen isn't a lot of fun without proper back-and-forth level transitions (after you cheat and warp through all the levels). That, and me not actually having a GBAMP to do it myself.
<br/>
<br/>
-Rich</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53527 - SolidSnake - Fri Sep 09, 2005 12:07 am</h4>
    <div class="postbody"><span class="postbody">but there is a hexen / heretic port already made for DS o.0
<br/>
i just would like to know if i could use both with some kind of loader</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53531 - MrAdults - Fri Sep 09, 2005 12:55 am</h4>
    <div class="postbody"><span class="postbody">I'm aware there are ports, I did the Hexen one. I assumed you meant having them in one running binary, akin to the more popular Doom engine Windows source ports (more specifically Doomsday).
<br/>
<br/>
The first issue you'd run into using a loader for both would be the fact that they both (or at least Hexen) expect their asset files to be stored at the beginning of cart rom. I'm sure you'd run into other issues that don't immediately come to mind.
<br/>
<br/>
-Rich</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53601 - tepples - Fri Sep 09, 2005 5:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MrAdults wrote:</b></span></td> </tr> <tr> <td class="quote">The first issue you'd run into using a loader for both would be the fact that they both (or at least Hexen) expect their asset files to be stored at the beginning of cart rom.</td> </tr></table><span class="postbody">
<br/>
That's sort of what I made skip_gbfs_file() for. If two programs are looking for files of different names, try something like the following (untested) code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/* is_gbfs_file() **************
<br/>
   Returns FALSE if data is a null pointer.
<br/>
   Returns TRUE if data appears to point at a GBFS file.
<br/>
   Returns FALSE otherwise.
<br/>
*/
<br/>
void is_gbfs_file(const GBFS_FILE *data)
<br/>
{
<br/>
  const u32 *d = (const u32 *)data;
<br/>
<br/>
  return d &amp;&amp; (*d == 0x456e6950);
<br/>
}
<br/>
<br/>
/* find_first_gbfs_file_containing() **********
<br/>
   Finds the first GBFS file in GBA ROM space that contains
<br/>
   an object of the given name.
<br/>
*/
<br/>
const GBFS_FILE *find_first_gbfs_file_containing(const char *name)
<br/>
{
<br/>
  const GBFS_FILE *data;
<br/>
<br/>
  for(data = find_first_gbfs_file(find_first_gbfs_file);
<br/>
      is_gbfs_file(data) &amp;&amp; !gbfs_get_obj(data, name, NULL);
<br/>
      data = skip_gbfs_file(data))
<br/>
    { ; }
<br/>
<br/>
  if(!is_gbfs_file(data))
<br/>
    return NULL;
<br/>
  else
<br/>
    return data;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
Then you'd find_first_gbfs_file_containing("hexen.wad") or something like that.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
