<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DLDI not working with Supercard SD - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > DLDI not working with Supercard SD</h2>
<div id="posts">
<div class="post">
    <h4>#118021 - ssj4android - Fri Feb 09, 2007 3:46 am</h4>
    <div class="postbody"><span class="postbody">I've tried the latest versions of picodrive, dsftp, and ds live weather, none of them work. And yes, I've patched them with the Supercard SD DLDI patch. Non-DLDI stuff such as Moonshell, nesDS (the latest official version), and DSOrganize work fine. I'm using a PNY 2GB SD card. I guess I'll try reformatting to see if that helps at all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118023 - Firon - Fri Feb 09, 2007 4:17 am</h4>
    <div class="postbody"><span class="postbody">Moonshell and DSOrganize are DLDI-based.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118025 - ssj4android - Fri Feb 09, 2007 4:45 am</h4>
    <div class="postbody"><span class="postbody">Not the older versions.
<br/>
And after a reboot, it still doesn't work. Looks like DLDI killed homebrew for me. :(
<br/>
BTW, the test program says failed right away when patched with the SCCF and SCSD, but just hangs when patched with SCLite</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118028 - felix123 - Fri Feb 09, 2007 5:08 am</h4>
    <div class="postbody"><span class="postbody">Weird. What version is your SCSD?<br/>_________________<br/><a class="postlink" href="http://en.wikipedia.org/wiki/NDSh" target="_blank">Nintendo DS homebrew on Wikipedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118029 - ssj4android - Fri Feb 09, 2007 5:27 am</h4>
    <div class="postbody"><span class="postbody">Which version? I had the latest firmware, just downgraded to 1.63 and it still doesn't work. The Supercard itself is pretty old, and worked fine with pre-DLDI fatlib. Can someone post a version of the DLDI test program they know for sure works with their Supercard SD?
<br/>
EDIT: If anyone can help, here's the first 1,000 KB of the card:
<br/>
<a href="http://ssj4android.googlepages.com/sdcard.zip" target="_blank">http://ssj4android.googlepages.com/sdcard.zip</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118078 - thebawp - Fri Feb 09, 2007 10:10 pm</h4>
    <div class="postbody"><span class="postbody">I ran across this problem with Picodrive and DSorganize - with the DLDI versions Picodrive reports a FAT init failure and DSorganize seems to just forever search for the Supercard SD.  Earlier versions of both apps work perfectly.  I figured I was patching the programs incorrectly with the DLDI tool, although both programs I patched reported that they had been patched successfully.  I think I'm using 1.63 of the Supercard and bought it last year around April time direct from a supplier.
<br/>
<br/>
Edit: Downloaded ScummVM DLDI and am testing it now.  I don't think I was patching stuff wrong, if AgentQ's instructions for ScummVM DLDI patching are anything to go by.  
<br/>
<br/>
Okay, the message I get with ScummVM is 'DLDI Device: 'Supercard (SD Card)' DLDI Initialise failed.'  This despite a successful patching process with the DLDI tool.    
<br/>
<br/>
I reformatted my SD card, which is a 1gb Viking Unterworks when I was trying to get Picodrive to work, so I don't think the card is the problem.  Something is clearly very wrong somewhere though, which is a shame as it looks like a lot of homebrew is switching to DLDI.  X(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118148 - chishm - Sat Feb 10, 2007 2:03 pm</h4>
    <div class="postbody"><span class="postbody">Which version of dlditool are you using? If you post the full command and results of trying to patch one of these broken homebrew, it'll help diagnose the problem.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118187 - thebawp - Sat Feb 10, 2007 10:42 pm</h4>
    <div class="postbody"><span class="postbody">I downloaded the Windows GUI version of DLDI tool from here: <a href="http://chishm.drunkencoders.com/DLDI/downloads/dlditool-win32-gui.zip," target="_blank">http://chishm.drunkencoders.com/DLDI/downloads/dlditool-win32-gui.zip,</a> reported to be using version 1.23 of DLDI.  
<br/>
<br/>
Results when patching with SCSD drivers taken from here:http://chishm.drunkencoders.com/DLDI/downloads/scsd.dldi
<br/>
<br/>
Old driver:          SuperCard Lite(TransFlash MicroSD)
<br/>
New driver:          SuperCard (SD Card)
<br/>
<br/>
Position in file:    0x00086500
<br/>
Position in memory:  0x02086100
<br/>
Patch base address:  0xBF800000
<br/>
Relocation offset:   0x42886100
<br/>
<br/>
Patched successfully
<br/>
<br/>
When running on the Supercard, this is the message:
<br/>
<br/>
Trying to init FAT?
<br/>
FAT init failed.
<br/>
Appended ROM check?ROM NOT FOUND!
<br/>
<br/>
Results when patching with SCSD Lite drivers taken from here: <a href="http://chishm.drunkencoders.com/DLDI/downloads/sclt.dldi" target="_blank">http://chishm.drunkencoders.com/DLDI/downloads/sclt.dldi</a>
<br/>
<br/>
Old driver:          SuperCard (SD Card)
<br/>
New driver:          SuperCard Lite(TransFlash MicroSD)
<br/>
<br/>
Position in file:    0x00086500
<br/>
Position in memory:  0x02086100
<br/>
Patch base address:  0xBF800000
<br/>
Relocation offset:   0x42886100
<br/>
<br/>
Patched successfully
<br/>
<br/>
When running on the Supercard, the message I get is:
<br/>
<br/>
Trying to init FAT? then it seems to make no further progress.  
<br/>
<br/>
Used the DLDI tester and got similar results.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118199 - Doom5 - Sun Feb 11, 2007 12:44 am</h4>
    <div class="postbody"><span class="postbody">It might be your Microsd card. Two of my Kingston Microsd cards corrupt when written to, certain other cards just won't work at all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118214 - Kudaku - Sun Feb 11, 2007 2:15 am</h4>
    <div class="postbody"><span class="postbody">correct me if im wrong but isn't DLDI for slot 1 users only
<br/>
and Supercard SD is Slot 2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118216 - Firon - Sun Feb 11, 2007 2:20 am</h4>
    <div class="postbody"><span class="postbody">Have you even looked at the DLDI page?
<br/>
<a href="http://chishm.drunkencoders.com/DLDI/" target="_blank">http://chishm.drunkencoders.com/DLDI/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118228 - chishm - Sun Feb 11, 2007 7:19 am</h4>
    <div class="postbody"><span class="postbody">This is hard to explain, as the SCSD DLDI is the exact same code as in libfat. Try patching the *.nds file then run dsbuild on it to make a *.sc.nds file.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118235 - thebawp - Sun Feb 11, 2007 10:21 am</h4>
    <div class="postbody"><span class="postbody">Okay, patched Picodrive:
<br/>
<br/>
C:\&gt;dlditool scsd picodriveds.nds
<br/>
Dynamically Linked Disk Interface patch tool v1.23 by Michael Chisholm (Chishm)
<br/>
<br/>
Trying "scsd.dldi"
<br/>
Old driver:          Default (No interface)
<br/>
New driver:          SuperCard (SD Card)
<br/>
<br/>
Position in file:    0x00086300
<br/>
Position in memory:  0x02086100
<br/>
Patch base address:  0xBF800000
<br/>
Relocation offset:   0x42886100
<br/>
<br/>
Patched successfully
<br/>
<br/>
Dragged and dropped the patched file onto DSbuild to get a .nds.gba file.  Renamed it to .sc.nds.  
<br/>
<br/>
Message when run on Supercard is still the same - 
<br/>
<br/>
Fat init failed.  
<br/>
<br/>
Chishm, you also been helping me via e-mail - I tried using the SC Lite drivers as you suggested, but I'm getting no joy there either.  Isn't there anyone using a Supercard SD that's had some success with this?
<br/>
<br/>
I suppose it could be my SD card, but it's working fine with any hombrew that isn't DLDI - I also tried a different card (same brand though) and got the same results.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118242 - chishm - Sun Feb 11, 2007 1:58 pm</h4>
    <div class="postbody"><span class="postbody">I'll try it out on my SCSD tomorrow, but I could've sworn it works for me. Just hope I can find my SCSD.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118252 - Diddl - Sun Feb 11, 2007 3:25 pm</h4>
    <div class="postbody"><span class="postbody">Supercard lite with Sandisk micros SD 2GB works fine with DLDI (dldi_tester.nds).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118327 - ssj4android - Mon Feb 12, 2007 5:43 am</h4>
    <div class="postbody"><span class="postbody">Is there a tester for libfat before DLDI was implemented? I thought I used something with that, but I guess it could've been the Moonshell version. Also, is there anything that describes the error a bit more than "init failed"?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118331 - Jabba - Mon Feb 12, 2007 7:30 am</h4>
    <div class="postbody"><span class="postbody">Im having the same problems aswell using a supercard SD,  tried both on Mac OS X and Windows XP. Im gonna try on my Mini SD when i get it back. This sucks :( lol</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118335 - chishm - Mon Feb 12, 2007 8:24 am</h4>
    <div class="postbody"><span class="postbody">I just tried it on my SCSD, and it works fine for me. So maybe it's the media, or it could be the SC. I'm using the side-loading SCSD with a SanDisk 256MiB TF card (through an adapter).<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118359 - thebawp - Mon Feb 12, 2007 4:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">I'm using the side-loading SCSD with a SanDisk 256MiB TF card (through an adapter).</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm using the same SCSD you describe, so I guess it must be the media.  I do have a TF card (currently used in my phone), so I'll give it a try on that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118373 - Sweater Fish Deluxe - Mon Feb 12, 2007 9:39 pm</h4>
    <div class="postbody"><span class="postbody">I have three SD cards.  One of them (Kodak 1GB) never worked with libfat stuff in my Supercard SD.  Now with DLDI, one of the other cards (PNY 1GB) no longer works.  The third card (SanDisk 512MB) is still fine.
<br/>
<br/>
<br/>
...word is bondage...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118381 - Arialia - Mon Feb 12, 2007 11:46 pm</h4>
    <div class="postbody"><span class="postbody">some strange things ...
<br/>
I have a SCSD and a SCminiSD
<br/>
when i wrote my little program dirent i first make a version for gba with libfat of 13082006 it works fine on all my SDs and on my SC.
<br/>
So i begin to developp my homebrew DSphoto ... and then the libfat failed on my SCSD with all my cards SD and works fine on my SCminiSD.
<br/>
<br/>
To work on my SCSD i must use the scsd_moon.dldi and it works fine on both my SCSD .... i don't understand ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118382 - ndsdev - Mon Feb 12, 2007 11:49 pm</h4>
    <div class="postbody"><span class="postbody">What is, and where is scsd_moon.dldi?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118389 - Sweater Fish Deluxe - Tue Feb 13, 2007 12:28 am</h4>
    <div class="postbody"><span class="postbody">I'd never heard of it before either, but apparently it's a Supercard SD DLDI driver written by Moonlight and included in the Moonshell download.  I downloaded it and tried it and it does indeed work with both of the cards that weren't working with the original scsd.dldi.
<br/>
<br/>
scsd_moon.dldi works with all three of my SD cards, scsd.dldi only works with one of them (and as I said even the old libfat only worked with two).  Tested with Picodrive 0.1.7 and DSOrganize 2.45.
<br/>
<br/>
It seems that scsd_moon.dldi is the Supercard SD fat code taken from older versions of Moonshell, which apparently differed from that in libfat.  Source code should be available, though I didn't download the source package.  There's a bunch of other xxxx_moon.dldi drivers included with Moonshell, too, by the way, though I don't know if there's any DLDI compatibility issues with other cards that might be solved by Moonlight's drivers.
<br/>
<br/>
<br/>
...word is bondage...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118407 - Ryan FB - Tue Feb 13, 2007 2:38 am</h4>
    <div class="postbody"><span class="postbody">It does seem to be related to the SD card, as I found a 2GB Kingston card of mine that I can reproduce the problem on. Using scsd_moon.dldi, FAT is able to init with it though. I've mirrored SaTa's scsd_moon.dldi by itself here: <a href="http://www.cryptosystem.org/projects/nds/scsd_moon.dldi" target="_blank">http://www.cryptosystem.org/projects/nds/scsd_moon.dldi</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118499 - thebawp - Tue Feb 13, 2007 11:51 pm</h4>
    <div class="postbody"><span class="postbody">I just used scsd_moon.dldi on the DLDI_tester and it ran as it should.  I've yet to try it on other apps, but this is looking better.
<br/>
<br/>
Thanks Ryan FB for posting the file and Arialia for pointing it out.
<br/>
<br/>
Edit:  Tested with ScummVM, DSOrganize and Picodrive - all work though I've yet to test them properly.  Still, looks good.  Thanks so much!  =D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118509 - ssj4android - Wed Feb 14, 2007 12:40 am</h4>
    <div class="postbody"><span class="postbody">Yep, the moonshell patch is working for me as well. Chism, you should probably at least list it on your site, if not replace the other one.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
