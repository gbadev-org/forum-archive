<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DSFTP 1.9 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > DSFTP 1.9</h2>
<div id="posts">
<div class="post">
    <h4>#98982 - bjoerngiesler - Fri Aug 18, 2006 10:05 pm</h4>
    <div class="postbody"><span class="postbody">Hooray! DSFTP 1.9 is out. Main changes:
<br/>
<br/>
o Start of a GUI!
<br/>
o NeoFlash competition entry
<br/>
o More bugfixes (boot works again)
<br/>
<br/>
Get the zip file at <a class="postlink" href="http://giesler.biz/~bjoern/downloads/DSFTP-1.9.zip" target="_blank">http://giesler.biz/~bjoern/downloads/DSFTP-1.9.zip</a>.
<br/>
<br/>
Screenshot: <a href="http://giesler.biz/~bjoern/downloads/dsftp_sshot_neoflash.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
As usual, please report any bugs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98983 - HtheB - Fri Aug 18, 2006 10:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">Hooray! DSFTP 1.9 is out. Main changes:
<br/>
<br/>
o Start of a GUI!
<br/>
o NeoFlash competition entry
<br/>
o More bugfixes (boot works again)
<br/>
<br/>
Get the zip file at <a class="postlink" href="http://giesler.biz/~bjoern/downloads/DSFTP-1.9.zip" target="_blank">http://giesler.biz/~bjoern/downloads/DSFTP-1.9.zip</a>.
<br/>
<br/>
Screenshot: <a href="http://giesler.biz/~bjoern/downloads/dsftp_sshot_neoflash.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
As usual, please report any bugs.</td> </tr></table><span class="postbody">why not edit the old topic? (your first post)
<br/>
<br/>
<br/>
well.. didnt tried yet.. so no comments :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98986 - tepples - Fri Aug 18, 2006 10:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HtheB wrote:</b></span></td> </tr> <tr> <td class="quote">why not edit the old topic? (your first post)</td> </tr></table><span class="postbody">
<br/>
A topic per significant version helps to keep topics from becoming <a class="postlink" href="http://www.encyclopediadramatica.com/index.php/TL;DR" target="_blank">too long; didn't read</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98987 - bjoerngiesler - Fri Aug 18, 2006 10:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HtheB wrote:</b></span></td> </tr> <tr> <td class="quote">why not edit the old topic? (your first post)</td> </tr></table><span class="postbody">
<br/>
<br/>
That was my intention... hit the wrong button. Sorry. Mods, can you re-route this thread under the DSFTP 1.8 one?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98989 - TheRain - Fri Aug 18, 2006 10:43 pm</h4>
    <div class="postbody"><span class="postbody">I like the GUI :)   good stuff man.  :) :)<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98990 - tekknosk8er - Fri Aug 18, 2006 10:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">Hooray! DSFTP 1.9 is out. Main changes:
<br/>
<br/>
o Start of a GUI!
<br/>
o NeoFlash competition entry
<br/>
o More bugfixes (boot works again)
<br/>
<br/>
Get the zip file at <a class="postlink" href="http://giesler.biz/~bjoern/downloads/DSFTP-1.9.zip" target="_blank">http://giesler.biz/~bjoern/downloads/DSFTP-1.9.zip</a>.
<br/>
<br/>
Screenshot: <a href="http://giesler.biz/~bjoern/downloads/dsftp_sshot_neoflash.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
As usual, please report any bugs.</td> </tr></table><span class="postbody">
<br/>
YAY Love seeing new releases of DSFTP, I love that your adding a GUI nice touch. I think your going to win the NEOflash contest, most useful app ever!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99000 - kevinc - Sat Aug 19, 2006 12:03 am</h4>
    <div class="postbody"><span class="postbody">Can the server do multiple connections now? 
<br/>
*points to the "1 connection<span style="font-weight: bold">s</span>"*<br/>_________________<br/><a class="postlink" href="http://akzeac.blogspot.com" target="_blank">http://akzeac.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99046 - bjoerngiesler - Sat Aug 19, 2006 6:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kevinc wrote:</b></span></td> </tr> <tr> <td class="quote">Can the server do multiple connections now? 
<br/>
*points to the "1 connection<span style="font-weight: bold">s</span>"*</td> </tr></table><span class="postbody">
<br/>
<br/>
Yup.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99103 - ArjanDotOrg - Sat Aug 19, 2006 3:44 pm</h4>
    <div class="postbody"><span class="postbody">Does it support long filenames now?
<br/>
And how about double extensions (for example: .nds.dsq/.nds.sav)?
<br/>
<br/>
Great work Bjoern!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99122 - MaHe - Sat Aug 19, 2006 5:10 pm</h4>
    <div class="postbody"><span class="postbody">Now the only thing left to do is moving to libFATDragon (since it natively supports lots of devices and also supports 'Rename' and 'Move') and add a configuration screen :P
<br/>
<br/>
This application is already great, this would only be the last finishing touch. ;)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99132 - pkwong - Sat Aug 19, 2006 6:34 pm</h4>
    <div class="postbody"><span class="postbody">sorry if this is a stupid question, but i get tons of error while linking
<br/>
e.g.
<br/>
BFTPConfigurator.cpp:(.text+0x378): undefined reference to `__gxx_personality_sj0'
<br/>
BFTPConfigurator.cpp:(.text+0x454): undefined reference to `_Unwind_SjLj_Unregister'
<br/>
BFTPConfigurator.cpp:(.text+0x5a2): undefined reference to `_Unwind_SjLj_Resume'
<br/>
<br/>
do u know what caused this problem and ,if possible, how to fix it?
<br/>
many thanks for the great app!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99134 - tepples - Sat Aug 19, 2006 7:02 pm</h4>
    <div class="postbody"><span class="postbody">Are you making sure to compile and link .cpp files with g++ instead of gcc?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99147 - ArjanDotOrg - Sat Aug 19, 2006 8:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ArjanDotOrg wrote:</b></span></td> </tr> <tr> <td class="quote">Does it support long filenames now?
<br/>
And how about double extensions (for example: .nds.dsq/.nds.sav)?
<br/>
<br/>
Great work Bjoern!</td> </tr></table><span class="postbody">
<br/>
<br/>
Can anyone answer this question, please? Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99160 - bjoerngiesler - Sat Aug 19, 2006 9:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ArjanDotOrg wrote:</b></span></td> </tr> <tr> <td class="quote">Does it support long filenames now?
<br/>
And how about double extensions (for example: .nds.dsq/.nds.sav)?</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
ftp&gt; ls
<br/>
229 Entering Extended Passive Mode (|||9000|)
<br/>
150 Here comes the directory listing
<br/>
drwxrwxrwx    1 ftp      ftp            0 Aug 13 2006 DATA
<br/>
drwxrwxrwx    1 ftp      ftp            0 Aug 13 2006 APPS
<br/>
226 Data sent OK.
<br/>
ftp&gt; put File\ with\ long\ name.suffix.txt 
<br/>
local: File with long name.suffix.txt remote: File with long name.suffix.txt
<br/>
229 Entering Extended Passive Mode (|||9000|)
<br/>
150 File opened. Gimme!
<br/>
100% |*************************************|     6       0.09 KB/s    --:-- ETA
<br/>
226 File stored.
<br/>
6 bytes sent in 00:00 (0.00 KB/s)
<br/>
ftp&gt; ls
<br/>
229 Entering Extended Passive Mode (|||9000|)
<br/>
150 Here comes the directory listing
<br/>
drwxrwxrwx    1 ftp      ftp            0 Aug 13 2006 DATA
<br/>
drwxrwxrwx    1 ftp      ftp            0 Aug 13 2006 APPS
<br/>
-rwxrwxrwx    1 ftp      ftp            6 Aug 19 2006 File with long name.suffix.txt
<br/>
226 Data sent OK.
<br/>
ftp&gt; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Looks like it does :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99164 - bjoerngiesler - Sat Aug 19, 2006 10:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MaHe wrote:</b></span></td> </tr> <tr> <td class="quote">Now the only thing left to do is moving to libFATDragon (since it natively supports lots of devices and also supports 'Rename' and 'Move') and add a configuration screen :P</td> </tr></table><span class="postbody">
<br/>
<br/>
Just tried libFATDragon. It's just a compile away, but for my SuperCard CF, it hangs in the FAT_InitFiles() routine.
<br/>
<br/>
As for the config screen: Apart from not being that important (IMHO), that requires a widget library. Which is what I'm currently working on. So you'll maybe see a config screen soon.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99165 - doedill - Sat Aug 19, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">can someone help out with this error.
<br/>
<br/>
501 Unhandled command 
<br/>
Port failed 501 Unhandled command</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99171 - bjoerngiesler - Sat Aug 19, 2006 10:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">501 Unhandled command 
<br/>
Port failed 501 Unhandled command</td> </tr></table><span class="postbody">
<br/>
<br/>
DSFTP is passive-mode only. Look here: <a class="postlink" href="http://slacksite.com/other/ftp.html" target="_blank">http://slacksite.com/other/ftp.html</a> for an explanation what active / passive mode is and why active mode is bad.
<br/>
<br/>
The PORT command is a part of the active-mode FTP protocol and therefore not supported.
<br/>
<br/>
What client are you using that sends this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99177 - LS5 - Sat Aug 19, 2006 11:08 pm</h4>
    <div class="postbody"><span class="postbody">I'm having some problems with DSFTP 1.9, patched with the moomshell patch to get it to work on my Supercard Lite.
<br/>
<br/>
This is my <a href="http://ftp.conf" target="_blank">ftp.conf</a> file:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">logfile /data/settings/ftplog.txt 
<br/>
loglevel 5
<br/>
hostname localhost
<br/>
<br/>
screensaver 60
<br/>
<br/>
user DSFTP
<br/>
   pass *******
<br/>
   root /
<br/>
   home /
<br/>
   write true
<br/>
   boot true
<br/>
end user
<br/>
<br/>
user anonymous
<br/>
   root /
<br/>
end user</td> </tr></table><span class="postbody">
<br/>
<br/>
Only the password is edited out. Connecting with FileZilla results in the following DSFTP log file:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Server running.
<br/>
Screensaver: 60 seconds
<br/>
Wake on Log: ON
<br/>
accept() returned 2
<br/>
** New FTP control connection 2
<br/>
<br/>
** FTP conn 2 from 192.168.2.1.
<br/>
&lt;- 220-Nintendo DS FTP server module V1.9
<br/>
&lt;- 220-(c)2006 Bjoern Giesler &lt;bjoern@giesler.de&gt;
<br/>
&lt;- 220-Have fun!
<br/>
&lt;- 220
<br/>
-&gt; USER DSFTP
<br/>
&lt;- 331 Password required for DSFTP.
<br/>
-&gt; PASS *******
<br/>
&lt;- 230 User DSFTP logged in.
<br/>
User DSFTP logged in (root=/, home=/, write=yes)
<br/>
-&gt; SYST
<br/>
&lt;- 215 UNIX (actually NintendoDS)
<br/>
-&gt; FEAT
<br/>
&lt;- 501 Unhandled command 'FEAT'
<br/>
-&gt; PWD
<br/>
&lt;- 257 "/"
<br/>
-&gt; TYPE A
<br/>
&lt;- 200 Type set to A.
<br/>
-&gt; PASV
<br/>
&lt;- 227 Entering Passive Mode (127,0,0,1,4,0).
<br/>
-&gt; LIST</td> </tr></table><span class="postbody">
<br/>
<br/>
Again, only the password edited out. My problem is that directory listing isn't working at all. FileZilla tells me the following, after the LIST command:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Error:   Transfer channel can't be opened. Reason: No connection could be made because the target machine actively refused it.
<br/>
Error:   Could not retrieve directory listing</td> </tr></table><span class="postbody">
<br/>
<br/>
Do you have any idea what the problem might be? I did have DSFTP working a few versions ago (I believe it was 1.5), but I don't have the <a href="http://ftp.conf" target="_blank">ftp.conf</a> file I used then anymore.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99186 - FireflyII - Sat Aug 19, 2006 11:43 pm</h4>
    <div class="postbody"><span class="postbody">I've got the exact same problem as LS5...it connects just fine, logs in, and then hangs up on the LIST command, and tells me that host actively refused the connection. What are we doing wrong? (I've tried FileZilla, SmartFTP, and command line by the way)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99190 - vb_master - Sun Aug 20, 2006 12:21 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FireflyII wrote:</b></span></td> </tr> <tr> <td class="quote">I've got the exact same problem as LS5...it connects just fine, logs in, and then hangs up on the LIST command, and tells me that host actively refused the connection. What are we doing wrong? (I've tried FileZilla, SmartFTP, and command line by the way)</td> </tr></table><span class="postbody">Same thing for me, I've tried just using FireFox anonymously, FireFTP, and  FileZilla. Whats wrong with it?<br/>_________________<br/>Back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99193 - Waffle - Sun Aug 20, 2006 12:36 am</h4>
    <div class="postbody"><span class="postbody">Your problem is with:
<br/>
hostname localhost
<br/>
<br/>
Remove that line or replace localhost with the IP address of your DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99194 - vb_master - Sun Aug 20, 2006 12:42 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Waffle wrote:</b></span></td> </tr> <tr> <td class="quote">Your problem is with:
<br/>
hostname localhost
<br/>
<br/>
Remove that line or replace localhost with the IP address of your DS.</td> </tr></table><span class="postbody">Works now!<br/>_________________<br/>Back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99201 - LS5 - Sun Aug 20, 2006 12:59 am</h4>
    <div class="postbody"><span class="postbody">You were right, replacing localhost fixed it indeed. Makes a lot of sense, but the strange thing is I could've sworn it worked with localhost a few versions ago. Oh well, I'm probably just remembering it wrongly. Thank you for the help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99221 - kevinc - Sun Aug 20, 2006 3:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">501 Unhandled command 
<br/>
Port failed 501 Unhandled command</td> </tr></table><span class="postbody">
<br/>
<br/>
DSFTP is passive-mode only. Look here: <a class="postlink" href="http://slacksite.com/other/ftp.html" target="_blank">http://slacksite.com/other/ftp.html</a> for an explanation what active / passive mode is and why active mode is bad.
<br/>
<br/>
The PORT command is a part of the active-mode FTP protocol and therefore not supported.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
However, according to <a class="postlink" href="http://www.w3.org/Protocols/rfc959/5_Declarative.html" target="_blank">RFC 959 part 5.1</a>, the PORT command is part of the <span style="font-style: italic">"minimum implementation [that] is required for all servers"</span>. In fact, it's the passive mode that is the optional one.<br/>_________________<br/><a class="postlink" href="http://akzeac.blogspot.com" target="_blank">http://akzeac.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99222 - sinistergfx - Sun Aug 20, 2006 3:56 am</h4>
    <div class="postbody"><span class="postbody">Could we get an option for DSFtp to set the hostname automatically to the ip it is assigned?
<br/>
<br/>
With the USB 802.11 adaptor I'm using for the DS, I have no way to control what IP the DS is assigned.<br/>_________________<br/><a class="postlink" href="http://sinistergfx.com" target="_blank">sinistergfx.com</a>
<br/>
<a class="postlink" href="http://robotdawn.com" target="_blank">robotdawn.com</a></span><span class="gensmall"><br/><br/>Last edited by sinistergfx on Sun Aug 20, 2006 3:59 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#99223 - decrypt - Sun Aug 20, 2006 3:58 am</h4>
    <div class="postbody"><span class="postbody">Anyone got dsftp working with m3 minisd v2?
<br/>
<br/>
I have a flashed ds.
<br/>
My rounter is di-624+.
<br/>
<br/>
The ftp server start normally. But i cant seem to connect in.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99228 - tekknosk8er - Sun Aug 20, 2006 4:28 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">Anyone got dsftp working with m3 minisd v2?
<br/>
<br/>
I have a flashed ds.
<br/>
My rounter is di-624+.
<br/>
<br/>
The ftp server start normally. But i cant seem to connect in.</td> </tr></table><span class="postbody">
<br/>
<br/>
Version 2?  is there such a thing?  I just got mine a couple of months ago so maybe I am using a M3 mini-SD v2... all I can tell you is i have a M3 mini-SD and it works perfectly!  Just waiting on the guys in the DSdoom dev to make it compatiable with this card.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99229 - pkwong - Sun Aug 20, 2006 4:33 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Are you making sure to compile and link .cpp files with g++ instead of gcc?</td> </tr></table><span class="postbody">
<br/>
<br/>
yeah, i was using arm-eabi-g++ to compile my project.
<br/>
was it about the way i include the lib files in the Makefile?
<br/>
<br/>
i need to add the path of the lib to let it link
<br/>
LIBS := -lnds9 $(DEVKITPRO)/libnds/lib/libDSFTP.a ..............
<br/>
<br/>
actually, is it the right thing to do? i never tried to use Makefile before.
<br/>
thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99235 - chishm - Sun Aug 20, 2006 5:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MaHe wrote:</b></span></td> </tr> <tr> <td class="quote">Now the only thing left to do is moving to libFATDragon (since it natively supports lots of devices and also supports 'Rename' and 'Move') and add a configuration screen :P
<br/>
<br/>
This application is already great, this would only be the last finishing touch. ;)</td> </tr></table><span class="postbody">
<br/>
Actually, I'd recommend libfat, when DKP r20 comes out. libFATDragon is like gba_nds_fat with some of the device drivers from libfat added, which means it comes with all the downfalls of gba_nds_fat.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99236 - bjoerngiesler - Sun Aug 20, 2006 5:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kevinc wrote:</b></span></td> </tr> <tr> <td class="quote">However, according to <a class="postlink" href="http://www.w3.org/Protocols/rfc959/5_Declarative.html" target="_blank">RFC 959 part 5.1</a>, the PORT command is part of the <span style="font-style: italic">"minimum implementation [that] is required for all servers"</span>. In fact, it's the passive mode that is the optional one.</td> </tr></table><span class="postbody">
<br/>
<br/>
Completely correct. But John Postel wrote RFC959 in 1985, when nobody knew what a firewall was, let alone NAT. 
<br/>
<br/>
To support active mode is a lot of work, since it requires a very different server behavior. Plus, I haven't seen a single client in years that uses it by default, plus, it doesn't work behind firewalls. Therefore, it's not in DSFTP, and I'd like to know what client doedill is using. If someone really requires it, it may come in the future.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99238 - bjoerngiesler - Sun Aug 20, 2006 5:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">Anyone got dsftp working with m3 minisd v2?
<br/>
<br/>
I have a flashed ds.
<br/>
My rounter is di-624+.
<br/>
<br/>
The ftp server start normally. But i cant seem to connect in.</td> </tr></table><span class="postbody">
<br/>
<br/>
Sigh. Logfiles? Client version? Where exactly does it hang?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99243 - FireflyII - Sun Aug 20, 2006 7:37 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>vb_master wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Waffle wrote:</b></span></td> </tr> <tr> <td class="quote">Your problem is with:
<br/>
hostname localhost
<br/>
<br/>
Remove that line or replace localhost with the IP address of your DS.</td> </tr></table><span class="postbody">Works now!</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, removing the line did it, thank you!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99244 - decrypt - Sun Aug 20, 2006 7:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">Anyone got dsftp working with m3 minisd v2?
<br/>
<br/>
I have a flashed ds.
<br/>
My rounter is di-624+.
<br/>
<br/>
The ftp server start normally. But i cant seem to connect in.</td> </tr></table><span class="postbody">
<br/>
<br/>
Sigh. Logfiles? Client version? Where exactly does it hang?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
In my log, using dsftp 1.9, Client using fireftp.
<br/>
<br/>
Server running.
<br/>
Screensaver: 30 seconds
<br/>
Wake on Log: OFF
<br/>
<br/>
Can i check which port am i supposed to use?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99245 - bjoerngiesler - Sun Aug 20, 2006 7:55 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">Server running.
<br/>
Screensaver: 30 seconds
<br/>
Wake on Log: OFF
<br/>
<br/>
Can i check which port am i supposed to use?</td> </tr></table><span class="postbody">
<br/>
<br/>
You should use port 21, the FTP port. What loglevel do you use? If it's 5, the client is not even connecting. If it's not 5, please set it to 5 and post again :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99248 - decrypt - Sun Aug 20, 2006 8:37 am</h4>
    <div class="postbody"><span class="postbody">the log is level 5.
<br/>
It appears that I cannot make a connection to my ds even the server is running</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99252 - bjoerngiesler - Sun Aug 20, 2006 9:42 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">the log is level 5.
<br/>
It appears that I cannot make a connection to my ds even the server is running</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, strange. Haven't seen that one before. Could you try command-line ftp, or even telnetting to the DS, and see if you can get a connection? ("telnet MY.DS.IP.NO 21")</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99256 - decrypt - Sun Aug 20, 2006 9:53 am</h4>
    <div class="postbody"><span class="postbody">could not open connection to host.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99260 - doedill - Sun Aug 20, 2006 10:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">501 Unhandled command 
<br/>
Port failed 501 Unhandled command</td> </tr></table><span class="postbody">
<br/>
<br/>
DSFTP is passive-mode only. Look here: <a class="postlink" href="http://slacksite.com/other/ftp.html" target="_blank">http://slacksite.com/other/ftp.html</a> for an explanation what active / passive mode is and why active mode is bad.
<br/>
<br/>
The PORT command is a part of the active-mode FTP protocol and therefore not supported.
<br/>
<br/>
What client are you using that sends this?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Using WS_FTP.  This problem just popped when I was using version 1.8 as well.
<br/>
no problems using WS_FTP when connecting to 1.7-1.8. Didn't change any settings at all.
<br/>
I've tried it with FTP from a dos prompt and still get that error.
<br/>
<br/>
It connects fine, only when it tries to list the directory does it give that error.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99263 - bjoerngiesler - Sun Aug 20, 2006 10:42 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">could not open connection to host.</td> </tr></table><span class="postbody">
<br/>
<br/>
Can you ping it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99265 - bjoerngiesler - Sun Aug 20, 2006 10:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">Using WS_FTP. ... It connects fine, only when it tries to list the directory does it give that error.</td> </tr></table><span class="postbody">
<br/>
<br/>
Right, because that's the first time it opens a data connection. Is there anywhere in WS_FTP you can enable FTP passive mode? I don't have Windows, so I can't check myself...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99272 - decrypt - Sun Aug 20, 2006 11:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">could not open connection to host.</td> </tr></table><span class="postbody">
<br/>
<br/>
Can you ping it?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Ok i have no idea why.
<br/>
Suddenly everything work.
<br/>
Thanks for all the help</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99273 - decrypt - Sun Aug 20, 2006 11:54 am</h4>
    <div class="postbody"><span class="postbody">The ftp does not list all the files on the sd card?
<br/>
Because i got some mp3s on the disk, but they are not shown</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99274 - bjoerngiesler - Sun Aug 20, 2006 12:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>decrypt wrote:</b></span></td> </tr> <tr> <td class="quote">The ftp does not list all the files on the sd card?
<br/>
Because i got some mp3s on the disk, but they are not shown</td> </tr></table><span class="postbody">
<br/>
<br/>
It should. FAT behavior is sometimes a bit erratic, though - have you tried chkdsk'ing the card?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99312 - Thomas - Sun Aug 20, 2006 5:50 pm</h4>
    <div class="postbody"><span class="postbody">Works great with both CuteFTP and FlashFXP, but I noticed something weird. Uploading a file to the DS (PC =&gt; DS) is quite fast, about 50 kB/s, but downloading a file (DS =&gt; PC) is a lot slower, somewhere around 6 kB/s. Is this normal?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99314 - bjoerngiesler - Sun Aug 20, 2006 5:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Thomas wrote:</b></span></td> </tr> <tr> <td class="quote">Works great with both CuteFTP and FlashFXP, but I noticed something weird. Uploading a file to the DS (PC =&gt; DS) is quite fast, about 50 kB/s, but downloading a file (DS =&gt; PC) is a lot slower, somewhere around 6 kB/s. Is this normal?</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, no, it's not normal, but it's what the thing does :-)
<br/>
<br/>
I'm still trying to sort out what makes the download slow; the code looks the same for both up- and download. Since the main purpose of the thing is pushing homebrew code to the DS and booting it, that examination is low-priority though. I'm hoping the next DSWifi upgrade will make it a lot better without further work by me ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99319 - kevinc - Sun Aug 20, 2006 6:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
I'm still trying to sort out what makes the download slow; the code looks the same for both up- and download. Since the main purpose of the thing is pushing homebrew code to the DS and booting it, that examination is low-priority though. I'm hoping the next DSWifi upgrade will make it a lot better without further work by me ;-)</td> </tr></table><span class="postbody">
<br/>
<br/>
In my experiments with the lib I noticed the transmission buffer emptied itself far slower than the reception buffer. Probably the DS's transmission power is a bit weak compared to the reception capabilities.<br/>_________________<br/><a class="postlink" href="http://akzeac.blogspot.com" target="_blank">http://akzeac.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99340 - doedill - Sun Aug 20, 2006 9:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">Using WS_FTP. ... It connects fine, only when it tries to list the directory does it give that error.</td> </tr></table><span class="postbody">
<br/>
<br/>
Right, because that's the first time it opens a data connection. Is there anywhere in WS_FTP you can enable FTP passive mode? I don't have Windows, so I can't check myself...</span></td> </tr></table><span class="postbody">
<br/>
<br/>
well it is set to passive mode.  here's the output of WS_FTP
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Connecting to 192.xxx.xxx.xxx:21
<br/>
Connected to 192.xxx.xxx.xxx:21 in 0.160230 seconds, Waiting for Server Response
<br/>
220-Nintendo DS FTP server module V1.9
<br/>
220-(c)2006 Bjoern Giesler &lt;bjoern@giesler.de&gt;
<br/>
220 
<br/>
Host type (1): Automatic Detect
<br/>
USER USERNAME
<br/>
331 Password required for appleboy.
<br/>
PASS (hidden)
<br/>
230 User USERNAME logged in.
<br/>
SYST
<br/>
215 UNIX (actually NintendoDS)
<br/>
Host type (2): Unix (Standard)
<br/>
PWD
<br/>
257 "/"
<br/>
TYPE A
<br/>
200 Type set to A.
<br/>
PASV
<br/>
227 Entering Passive Mode (192,zzz,zzz,zzz,0,1).
<br/>
connecting data channel to 192.zzz.zzz.zzz:0,1(1)
<br/>
PORT 192,yyy,yyy,yyy,18,174
<br/>
501 Unhandled command 'PORT 192,yyy,yyy,yyy,18,174'
<br/>
Port failed 501 Unhandled command 'PORT 192,yyy,yyy,yyy,18,174'</td> </tr></table><span class="postbody">
<br/>
<br/>
xxx.xxx - NDS ip addy
<br/>
zzz.zzz - router
<br/>
yyy.yyy - PC addy[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99350 - bjoerngiesler - Sun Aug 20, 2006 10:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">well it is set to passive mode.  here's the output of WS_FTP
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Connecting to 192.xxx.xxx.xxx:21
<br/>
Connected to 192.xxx.xxx.xxx:21 in 0.160230 seconds, Waiting for Server Response
<br/>
220-Nintendo DS FTP server module V1.9
<br/>
220-(c)2006 Bjoern Giesler &lt;bjoern@giesler.de&gt;
<br/>
220 
<br/>
Host type (1): Automatic Detect
<br/>
USER USERNAME
<br/>
331 Password required for appleboy.
<br/>
PASS (hidden)
<br/>
230 User USERNAME logged in.
<br/>
SYST
<br/>
215 UNIX (actually NintendoDS)
<br/>
Host type (2): Unix (Standard)
<br/>
PWD
<br/>
257 "/"
<br/>
TYPE A
<br/>
200 Type set to A.
<br/>
PASV
<br/>
227 Entering Passive Mode (192,zzz,zzz,zzz,0,1).
<br/>
connecting data channel to 192.zzz.zzz.zzz:0,1(1)
<br/>
PORT 192,yyy,yyy,yyy,18,174
<br/>
501 Unhandled command 'PORT 192,yyy,yyy,yyy,18,174'
<br/>
Port failed 501 Unhandled command 'PORT 192,yyy,yyy,yyy,18,174'</td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
OK. It's still sending a PORT command, so it's trying active mode. My guess is that it's doing that because the reply to PASV ("227 Entering...") gives back a port number of 1, which is bullshit.
<br/>
<br/>
What are your settings for portrange? Could you post your <a href="http://ftp.conf?" target="_blank">ftp.conf?</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99364 - decrypt - Mon Aug 21, 2006 2:47 am</h4>
    <div class="postbody"><span class="postbody">I just realised that i have to do a few things in order for the dsftp to work.
<br/>
I am not sure whether it is because of my router.
<br/>
<br/>
I need to go into metriod prime hunters Wifi Settings and test connection a few time. Each time i need to make sure the ds can be pinged. Then only when i restart and start dsftp will work. Does anyone face this problem? Is it because of my DI-624+?
<br/>
<br/>
Btw my sd card is FAT32, is it better to use FAT?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99380 - doedill - Mon Aug 21, 2006 5:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
OK. It's still sending a PORT command, so it's trying active mode. My guess is that it's doing that because the reply to PASV ("227 Entering...") gives back a port number of 1, which is bullshit.
<br/>
<br/>
What are your settings for portrange? Could you post your <a href="http://ftp.conf?" target="_blank">ftp.conf?</a></td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
motd /ftp/motd.txt
<br/>
logfile /data/logs/ftp.log
<br/>
loglevel 4
<br/>
hostname xxx.xxx.xxx.xxx
<br/>
timeout 60
<br/>
<br/>
portrangestart 1
<br/>
portrangeend 9999
<br/>
screensaver 30
<br/>
wakeonlog false
<br/>
user *****
<br/>
pass *****
<br/>
root /
<br/>
home /
<br/>
write true
<br/>
boot true
<br/>
end user
<br/>
user anonymous
<br/>
root /ftp/anonymous
<br/>
write false
<br/>
end user</td> </tr></table><span class="postbody">
<br/>
<br/>
I've set it portrangestart to 9000 and gives the same error.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
257 "/"
<br/>
TYPE A
<br/>
200 Type set to A.
<br/>
PASV
<br/>
227 Entering Passive Mode (192,xxx,xxx,xxx,35,40).
<br/>
connecting data channel to 192.yyy.yyy.yyy:35,40(9000)
<br/>
PORT 192,zzz,zzz,zzz,16,186
<br/>
501 Unhandled command 'PORT 192,zzz,zzz,zzz,16,186'
<br/>
Port failed 501 Unhandled command 'PORT 192,zzz,zzz,zzz,16,186'NOOP
<br/>
200 OK
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99383 - bjoerngiesler - Mon Aug 21, 2006 5:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
257 "/"
<br/>
TYPE A
<br/>
200 Type set to A.
<br/>
PASV
<br/>
227 Entering Passive Mode (192,xxx,xxx,xxx,35,40).
<br/>
connecting data channel to 192.yyy.yyy.yyy:35,40(9000)
<br/>
PORT 192,zzz,zzz,zzz,16,186
<br/>
501 Unhandled command 'PORT 192,zzz,zzz,zzz,16,186'
<br/>
Port failed 501 Unhandled command 'PORT 192,zzz,zzz,zzz,16,186'NOOP
<br/>
200 OK
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
I don't get it. Looks like it can't connect to port 9000... what does the DSFTP log (@loglevel 5) say to that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99400 - doedill - Mon Aug 21, 2006 10:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
257 "/"
<br/>
TYPE A
<br/>
200 Type set to A.
<br/>
PASV
<br/>
227 Entering Passive Mode (192,xxx,xxx,xxx,35,40).
<br/>
connecting data channel to 192.yyy.yyy.yyy:35,40(9000)
<br/>
PORT 192,zzz,zzz,zzz,16,186
<br/>
501 Unhandled command 'PORT 192,zzz,zzz,zzz,16,186'
<br/>
Port failed 501 Unhandled command 'PORT 192,zzz,zzz,zzz,16,186'NOOP
<br/>
200 OK
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
I don't get it. Looks like it can't connect to port 9000... what does the DSFTP log (@loglevel 5) say to that?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&lt;- 257 "/"
<br/>
-&gt; TYPE A
<br/>
&lt;- 200 Type set to A.
<br/>
-&gt; PASV
<br/>
&lt;- 227 Entering Passive Mode (192,yyy,yyy,yyy,35,40).
<br/>
-&gt; PORT 192,zzz,zzz,zzz,13,191
<br/>
&lt;- 501 Unhandled command 'PORT 192,zzz,zzz,zzz,13,191'
<br/>
-&gt; QUIT
<br/>
&lt;- 221 Goodbye.
<br/>
** Closing control connection 2.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
this is the log (@loglevel 5) from the DS
<br/>
Basically mirrors what WS_FTP outputs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99402 - bjoerngiesler - Mon Aug 21, 2006 11:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">this is the log (@loglevel 5) from the DS
<br/>
Basically mirrors what WS_FTP outputs.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK. So it tells the DS to do passive mode, but then starts doing active mode itself. That is strange behaviour indeed. I'll see what I can do; didn't actually want to implement active FTP, but if some clients just won't do passive... 
<br/>
<br/>
I'll test with WS_FTP myself and see if I can fix that in the client. In the meantime, I suggest you download FireFTP or FileZilla, which are confirmed to work.
<br/>
<br/>
EDIT: You don't have a personal firewall running that might block port 9000 access to the DS, do you? If you don't: Is there a significant delay between the DS' response to the PASV command and the PORT command?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99410 - tepples - Mon Aug 21, 2006 1:27 pm</h4>
    <div class="postbody"><span class="postbody">Some firewalls that see an FTP transaction containing a PORT command will automatically open the relevant port.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99413 - bjoerngiesler - Mon Aug 21, 2006 1:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Some firewalls that see an FTP transaction containing a PORT command will automatically open the relevant port.</td> </tr></table><span class="postbody">
<br/>
<br/>
I know. Just checking if WS_FTP is braindead or if it's trying to automatically fix something it sees as an error (namely, the PASV port not being reachable).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99447 - doedill - Mon Aug 21, 2006 7:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">this is the log (@loglevel 5) from the DS
<br/>
Basically mirrors what WS_FTP outputs.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK. So it tells the DS to do passive mode, but then starts doing active mode itself. That is strange behaviour indeed. I'll see what I can do; didn't actually want to implement active FTP, but if some clients just won't do passive... 
<br/>
<br/>
I'll test with WS_FTP myself and see if I can fix that in the client. In the meantime, I suggest you download FireFTP or FileZilla, which are confirmed to work.
<br/>
<br/>
EDIT: You don't have a personal firewall running that might block port 9000 access to the DS, do you? If you don't: Is there a significant delay between the DS' response to the PASV command and the PORT command?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
tried FireFTP and it hangs when trying the LIST command.
<br/>
Don't have a firewall up.  I've even open ports 9000-9999 to test if the router was the cause and it's not.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99555 - bjoerngiesler - Tue Aug 22, 2006 11:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">tried FireFTP and it hangs when trying the LIST command.
<br/>
Don't have a firewall up.  I've even open ports 9000-9999 to test if the router was the cause and it's not.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, I'm at the end of my wits. No idea what's blocking for you. I'm working on active FTP support for V2.0, hopefully that will fix your problems.<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99625 - bjoerngiesler - Tue Aug 22, 2006 7:08 pm</h4>
    <div class="postbody"><span class="postbody">Please try <a class="postlink" href="http://giesler.biz/~bjoern/downloads/dsftp/DSFTP-2.0pre.zip" target="_blank">http://giesler.biz/~bjoern/downloads/dsftp/DSFTP-2.0pre.zip</a>. Changes are:
<br/>
<br/>
o Server port configurable with "listen PORTNUM"
<br/>
o Passive mode supported (PORT and EPRT commands)
<br/>
<br/>
...and let me know if that works for you.<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99642 - doedill - Tue Aug 22, 2006 9:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">Please try <a class="postlink" href="http://giesler.biz/~bjoern/downloads/dsftp/DSFTP-2.0pre.zip" target="_blank">http://giesler.biz/~bjoern/downloads/dsftp/DSFTP-2.0pre.zip</a>. Changes are:
<br/>
<br/>
o Server port configurable with "listen PORTNUM"
<br/>
o Passive mode supported (PORT and EPRT commands)
<br/>
<br/>
...and let me know if that works for you.</td> </tr></table><span class="postbody">
<br/>
<br/>
ok, now that works.  able to connect and list directories.
<br/>
<br/>
output from WS_FTP
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
TYPE A
<br/>
200 Type set to A.
<br/>
PASV
<br/>
227 Entering Passive Mode (192,zzz,zzz,4,35,40).
<br/>
connecting data channel to 192.zzz.zzz.4:35,40(9000)
<br/>
PORT 192,yyy,yyy,yyy,19,86
<br/>
200 Port opened.
<br/>
LIST
<br/>
150 Here comes the directory listing
<br/>
# transferred 2367 bytes in &lt; 0.001 seconds, 18492.188 Kbps ( 2311.523 Kbps), transfer succeeded.
<br/>
226 Data sent OK.</td> </tr></table><span class="postbody">
<br/>
<br/>
The thing I find weird (or not) is that when it enter passive mode the ip address isn't that of my router (zzz) instead of 192.zzz.zzz.1 it's a 4.
<br/>
<br/>
also this is what's on the DS when I disconnect
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
accept() failed. Sockets exhausted?
<br/>
Message was: accept(-1) failed with 0 (errno 22)
<br/>
</td> </tr></table><span class="postbody">
<br/>
@log 4</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99685 - bjoerngiesler - Wed Aug 23, 2006 8:41 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">ok, now that works.  able to connect and list directories.</td> </tr></table><span class="postbody">
<br/>
<br/>
Great. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
227 Entering Passive Mode (192,zzz,zzz,4,35,40).
<br/>
connecting data channel to 192.zzz.zzz.4:35,40(9000)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The thing I find weird (or not) is that when it enter passive mode the ip address isn't that of my router (zzz) instead of 192.zzz.zzz.1 it's a 4.
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Why would it be the address of your router? The PASV command instructs the FTP server to open a socket at a random port number and report the IP address and port number back. Therefore, the reply contains the IP of your Nintendo DS.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
also this is what's on the DS when I disconnect
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
accept() failed. Sockets exhausted?
<br/>
Message was: accept(-1) failed with 0 (errno 22)
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Will be fixed in 2.0.
<br/>
<br/>
Oh, BTW, there's no need to xxx and zzz out your IP addresses -- IPs in the 192.168/16 range are not routed anyway, so nobody can do anything with the information you're hiding. (It makes your reports a lot harder to read, though. :-))<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99709 - doedill - Wed Aug 23, 2006 2:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
227 Entering Passive Mode (192,zzz,zzz,4,35,40).
<br/>
connecting data channel to 192.zzz.zzz.4:35,40(9000)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The thing I find weird (or not) is that when it enter passive mode the ip address isn't that of my router (zzz) instead of 192.zzz.zzz.1 it's a 4.
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Why would it be the address of your router? The PASV command instructs the FTP server to open a socket at a random port number and report the IP address and port number back. Therefore, the reply contains the IP of your Nintendo DS.
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
ok, I thought it was my router cause it's the closest match.
<br/>
That's not the ip of my NDS either.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99713 - bjoerngiesler - Wed Aug 23, 2006 2:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">ok, I thought it was my router cause it's the closest match.
<br/>
That's not the ip of my NDS either.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, it's either the IP of your NDS, or it's whatever your "hostname" entry in the <a href="http://ftp.conf" target="_blank">ftp.conf</a> file resolves to (if that entry exists and can be resolved). If it isn't either, we have a problem; but it would explain why passive mode doesn't work.<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99836 - doedill - Thu Aug 24, 2006 5:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doedill wrote:</b></span></td> </tr> <tr> <td class="quote">ok, I thought it was my router cause it's the closest match.
<br/>
That's not the ip of my NDS either.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, it's either the IP of your NDS, or it's whatever your "hostname" entry in the <a href="http://ftp.conf" target="_blank">ftp.conf</a> file resolves to (if that entry exists and can be resolved). If it isn't either, we have a problem; but it would explain why passive mode doesn't work.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
omg.  ok that was the problem all along.  I have no idea how the hostname got changed in <a href="http://ftp.conf" target="_blank">ftp.conf</a>
<br/>
<br/>
that's why it's wasn't working with the earlier version too.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
