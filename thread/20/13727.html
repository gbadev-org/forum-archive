<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Temperature Calculation? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS Misc > Temperature Calculation?</h2>
<div id="posts">
<div class="post">
    <h4>#135138 - spinal_cord - Fri Jul 20, 2007 10:50 am</h4>
    <div class="postbody"><span class="postbody">Can anyone tell me the correct way to calculate the temperature using the two diods in the DS. I have tried DegC=8490 * (V_I91 - V_I1) - 273*4096; but I get some quite huge numbers that don't look much like temperatures at all.
<br/>
<br/>
Can someone correct this calculation for me?
<br/>
<br/>
Thankyou.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135154 - Cearn - Fri Jul 20, 2007 1:37 pm</h4>
    <div class="postbody"><span class="postbody">The output of formula are .12 fixed-point numbers, not simple integers. Are you correcting for that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135193 - spinal_cord - Fri Jul 20, 2007 8:57 pm</h4>
    <div class="postbody"><span class="postbody">you've lost me already :(<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135195 - Lick - Fri Jul 20, 2007 9:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-weight: bold">Temperature Calculation</span>
<br/>
TP0 decreases by circa 2.1mV per degree Kelvin. The voltage difference between TP1 minus TP0 increases by circa 0.39mV (1/2573 V) per degree Kelvin. At VREF=3.33V, one 12bit ADC step equals to circa 0.8mV (VREF/4096).
<br/>
Temperature can be calculated at best resolution when using the current TP0 value, and two calibration values (an ADC value, and the corresponding temperature in degrees kelvin):
<br/>
  K = (CAL.TP0-ADC.TP0) * 0.4 + CAL.KELVIN
<br/>
<br/>
Alternately, temperature can be calculated at rather bad resolution, but without calibration, by using the difference between TP1 and TP0:
<br/>
  K = (ADC.TP1-ADC.TP0) * 8568 / 4096
<br/>
<br/>
To convert Kelvin to other formats,
<br/>
  Celsius:     C = (K-273.15)
<br/>
  Fahrenheit:  F = (K-273.15)*9/5+32
<br/>
  Reaumur:     R = (K-273.15)*4/5
<br/>
  Rankine:     X = (K)*9/5
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Try this?<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135197 - spinal_cord - Fri Jul 20, 2007 9:21 pm</h4>
    <div class="postbody"><span class="postbody">Just googled fixed point math, turns out I know what it is, just not whats its called. I &gt;&gt;12 to the original calculation and I get 27. Does 27?C sound right for a room temperature DS? (19 after a couple of minutes in the freezer, probably a bad idea I know).<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135205 - calcprogrammer1 - Fri Jul 20, 2007 10:37 pm</h4>
    <div class="postbody"><span class="postbody">The DS has temperature hardware?  Weird!  Why would Nintendo put a thermometer in the DS anyways?  Or is it just a side effect of some component in the DS that is affected by temperature?
<br/>
<br/>
Sounds like something to put in DSOrganize or DSLiveWeather...
<br/>
<br/>
As for temperature, 25 degrees Celsius sounds about room temperature (if I'm not mistaken, only used Celsius in Chemistry class), cause here in the USA we use Fahrenheit (idk why, the US is just weird or something, they hate standards, almost like Microsoft) and 65 to maybe 75 degrees F is about room temperature-ish.<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135209 - dantheman - Fri Jul 20, 2007 10:47 pm</h4>
    <div class="postbody"><span class="postbody">Moonshell has a temperature gauge you can look at if you want.  I believe it's not a temperature reading of the outside temperature but rather that of some internal components, though I'm not certain about this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135212 - calcprogrammer1 - Fri Jul 20, 2007 11:01 pm</h4>
    <div class="postbody"><span class="postbody">It says 23.5...is there a way to set it to Fahrenheit?  Celsius isn't very useful if you don't know the scale that well...<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135213 - Dood77 - Fri Jul 20, 2007 11:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">Does 27?C sound right for a room temperature DS? (19 after a couple of minutes in the freezer, probably a bad idea I know).</td> </tr></table><span class="postbody">
<br/>
Lol! Looking for an excuse to exercise your warranty for a new DS?
<br/>
Yeah 27 degrees Celsius is usually around what moonshell tells me.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135214 - spinal_cord - Fri Jul 20, 2007 11:04 pm</h4>
    <div class="postbody"><span class="postbody">I get the same result as monshell. I think the temperature has something to do with the LCD, I'm not 100% sure though.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135230 - sonny_jim - Sat Jul 21, 2007 2:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>calcprogrammer1 wrote:</b></span></td> </tr> <tr> <td class="quote">The DS has temperature hardware?  Weird!  Why would Nintendo put a thermometer in the DS anyways? </td> </tr></table><span class="postbody">
<br/>
It's for monitoring the battery I believe, to make sure it doesn't explode and can charge optimally.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135308 - Dood77 - Sun Jul 22, 2007 3:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>calcprogrammer1 wrote:</b></span></td> </tr> <tr> <td class="quote">The DS has temperature hardware?  Weird!  Why would Nintendo put a thermometer in the DS anyways? </td> </tr></table><span class="postbody">
<br/>
You know, your PC's motherboard most likely has a few thermometers. And maybe even your iPod/Cell Phone. (Or iPhone...?)<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
