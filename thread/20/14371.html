<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ARM7 MP3 Playback test - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Misc > ARM7 MP3 Playback test</h2>
<div id="posts">
<div class="post">
    <h4>#143450 - Lazy1 - Sun Oct 21, 2007 9:48 pm</h4>
    <div class="postbody"><span class="postbody">I have it somewhat working though it's a bit hacky in a few places and only works with mono MP3s.
<br/>
<br/>
<a href="http://rapidshare.com/files/64213556/mp3stream-test.zip.html" target="_blank">http://rapidshare.com/files/64213556/mp3stream-test.zip.html</a>
<br/>
<br/>
Extract d_e1m1.mp3 to the root of your card, run mp3stream.nds
<br/>
<br/>
Limitations/info:
<br/>
<br/>
1) Mono only
<br/>
2) As far as I know 128kbps is the limit on bitrate
<br/>
3) Thrown together, there may be some bugs
<br/>
<br/>
Any tips/suggestions would be helpful, let me know if it plays properly too.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143454 - DragonMinded - Sun Oct 21, 2007 10:26 pm</h4>
    <div class="postbody"><span class="postbody">Why mono only?  Is this due to processing speed or setup limitations?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143471 - Lazy1 - Mon Oct 22, 2007 2:48 am</h4>
    <div class="postbody"><span class="postbody">If I remember correctly the decoder outputs the samples for left and right in the same buffer.
<br/>
While it's possible to separate it into two different buffers and play each back on their own speaker I chose not to for the sake of simplicity.
<br/>
<br/>
That and stereo sound may require more data to be read from the arm9 and there are already certain situations where it doesn't get done fast enough. (swiWaitForVBlank)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143473 - tepples - Mon Oct 22, 2007 3:20 am</h4>
    <div class="postbody"><span class="postbody">MoonShell and DSOrganize manage to fill the ring buffer fast enough to keep up with playback. If you make the two ring buffers big enough so that you can decode several frames ahead, it becomes more difficult for a single vblank to throw things off. You could try 4608 samples each, which is four <a class="postlink" href="http://www.mp3-converter.com/mp3codec/frames.htm" target="_blank">MP3 frames</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143474 - Lazy1 - Mon Oct 22, 2007 3:36 am</h4>
    <div class="postbody"><span class="postbody">I guess it would be possible to make the buffer 2 times larger and see how that goes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143484 - username - Mon Oct 22, 2007 8:40 am</h4>
    <div class="postbody"><span class="postbody">e1m1? If this is being developed in order to provide music for a Doom port, you could always use XM files instead...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143485 - Lazy1 - Mon Oct 22, 2007 8:53 am</h4>
    <div class="postbody"><span class="postbody">I just picked an mp3 from Doom to test the decoder, if someone wants to throw the decoder into the doom sources they are more than welcome to.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143515 - dantheman - Tue Oct 23, 2007 2:34 am</h4>
    <div class="postbody"><span class="postbody">Just for the sake of having some place slightly more permanent than Rapidshare to host it, <a class="postlink" href="http://dannysied.googlepages.com/mp3stream-test.zip" target="_blank">here's a mirror</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#146081 - FireSlash - Wed Nov 28, 2007 6:26 pm</h4>
    <div class="postbody"><span class="postbody">Does not compile. Seems to be missing a file or two, others are improperly placed.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:/work/Pi_MP3/arm7/source/mp37.c:28:23: warning: ipcshared.h: No such file or directory
<br/>
c:/work/Pi_MP3/arm7/source/mp37.c:30:20: warning: mp3dec.h: No such file or directory</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.fireslash.net" target="_blank">FireSlash.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#146083 - Lazy1 - Wed Nov 28, 2007 6:42 pm</h4>
    <div class="postbody"><span class="postbody">Compiles fine here, make sure your makefile has all of the paths set up.
<br/>
Check the arm7 makefile that the example came with.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
