<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Apex Audio System - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > Apex Audio System</h2>
<div id="posts">
<div class="post">
    <h4>#9781 - jd - Mon Aug 18, 2003 1:15 am</h4>
    <div class="postbody"><span class="postbody">I finally finished putting together the first version of the Apex Audio System (AAS) which is based on the routines that were developed for Payback.
<br/>
<br/>
It supports up to 8 channels and takes an average of just 2.8% CPU to play a 4 channel MOD at 16 KHz. It's free for non-commercial use and can be downloaded from the link below:
<br/>
<br/>
<a class="postlink" href="http://www.apex-designs.net/tools_aas.html" target="_blank">http://www.apex-designs.net/tools_aas.html</a>
<br/>
<br/>
Feedback welcome!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9792 - Sweex - Mon Aug 18, 2003 9:21 am</h4>
    <div class="postbody"><span class="postbody">It does not support playback of sound effects, does it? Because that's what all module players (except krawall) miss imho!:-(
<br/>
<br/>
Module players are fine for any demo, but when you do a game you need to have some way of playing sound effects. 
<br/>
<br/>
Any chance that there will be support for playing sound effects in the near future?<br/>_________________<br/>If everything fails, read the manual: If even that fails, post on forum!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9799 - col - Mon Aug 18, 2003 1:11 pm</h4>
    <div class="postbody"><span class="postbody">Hi James,
<br/>
<br/>
Have you implemented stereo (panned mono) channels yet?
<br/>
We thinking about licencing a sound engine on our project, but stereo is a must, as is sound effect playback.
<br/>
<br/>
cheers
<br/>
<br/>
Col</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9801 - jd - Mon Aug 18, 2003 2:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sweex wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Any chance that there will be support for playing sound effects in the near future?</td> </tr></table><span class="postbody">
<br/>
<br/>
It already supports sound effects.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9802 - FluBBa - Mon Aug 18, 2003 2:24 pm</h4>
    <div class="postbody"><span class="postbody">Maybe people should start by reading the docs?
<br/>
Just a thought.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9803 - jd - Mon Aug 18, 2003 2:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>col wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Have you implemented stereo (panned mono) channels yet?
<br/>
We thinking about licencing a sound engine on our project, but stereo is a must, as is sound effect playback.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
At the moment it only supports "hard" stereo (sounds come out of left or right speakers, so you need to use two channels if you want them to come out both) or mono. It does support sound effect playback at the same time as MOD playback. (Perhaps I need to amend the docs to make this clearer?)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9864 - jd - Wed Aug 20, 2003 2:42 pm</h4>
    <div class="postbody"><span class="postbody">Just a quick note to let you guys know that I've released a minor update to AAS. The header files have been improved to make them easier to use from C++ and the docs have been amended to include a more complete list of the resources used by AAS in the "Getting Started" section. The updated version can be downloaded here:
<br/>
<br/>
<a class="postlink" href="http://www.apex-designs.net/tools_aas.html" target="_blank">http://www.apex-designs.net/tools_aas.html</a>
<br/>
<br/>
As always, feel free to email me at <a href="mailto:james.daniels@apex-designs.net">james.daniels@apex-designs.net</a> with any comments/problems/ideas etc.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9887 - NEiM0D - Thu Aug 21, 2003 6:51 am</h4>
    <div class="postbody"><span class="postbody">Hi James,
<br/>
I've been doing some disassembling, and I noticed you used the stack register in the mixing process;
<br/>
<br/>
r4 = byte from sample;
<br/>
r5 = byte from sample;
<br/>
lr = byte from sample;
<br/>
<br/>
r6 = r4 + lr &lt;&lt;16;
<br/>
lr = byte from sample;
<br/>
r7 = r5 + lr &lt;&lt;16;
<br/>
<br/>
etc, and one time: sp = r4 + lr &lt;&lt;16;
<br/>
<br/>
This might cause problems when an interrupt occurs and the mixing process currently crushed the sp.
<br/>
<br/>
When an interrupt occurs, BIOS automaticly pops {r0-r3,r12,lr} to the stack (but the stack pointer is currently crushed by the mixing routine).
<br/>
Ofcourse, you can disable multiple interrupts when your mixing process is busy, but is that really safe?
<br/>
<br/>
Also, I see you bragging alot about how fast your mixer is, but to tell you the truth, you can't compare this to other mixers.
<br/>
Simply because yours doesn't use a temporary buffer which decreases the speed alot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9888 - Dev - Thu Aug 21, 2003 7:55 am</h4>
    <div class="postbody"><span class="postbody">Provided that:
<br/>
<br/>
1.  Timings are done on actual hardware and not an emulator
<br/>
2.  Only the sound code is changed in the test program
<br/>
3.  The same playback rate is used
<br/>
4.  The same .MOD is used for testing (duh)
<br/>
5.  The same effects used by the .MOD are supported/unsupported by both mixers.
<br/>
<br/>
Then, and only then, will the relative comparisons be valid.
<br/>
<br/>
Timings done on an emulator (at least those publicly available) are completely bogus and not to be trusted.
<br/>
<br/>
Dev.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9891 - FluBBa - Thu Aug 21, 2003 8:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NEiM0D wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Also, I see you bragging alot about how fast your mixer is, but to tell you the truth, you can't compare this to other mixers.
<br/>
Simply because yours doesn't use a temporary buffer which decreases the speed alot.</td> </tr></table><span class="postbody">
<br/>
Why is it necessary to use a temporary buffer to compare mod players/sound mixers? just so you can display some flashy osciloscopes?
<br/>
Oooor I might just have missed some very important thing about it alltogether.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9896 - jd - Thu Aug 21, 2003 12:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NEiM0D wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
When an interrupt occurs, BIOS automaticly pops {r0-r3,r12,lr} to the stack (but the stack pointer is currently crushed by the mixing routine).
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
There's a different sp that's used when an interrupt ocurs so corrupting sp in the mixer is safe with Fast and Single Interrupts, but you're right that there may be a problem with Multiple Interrupts. I'll get it fixed ASAP.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NEiM0D wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Also, I see you bragging alot about how fast your mixer is, but to tell you the truth, you can't compare this to other mixers.
<br/>
Simply because yours doesn't use a temporary buffer which decreases the speed alot.</td> </tr></table><span class="postbody">
<br/>
<br/>
So it's not valid to compare because it works in a much more efficient way? That seems like a rather arbitary restriction.</span><span class="gensmall"><br/><br/>Last edited by jd on Fri Aug 22, 2003 1:32 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#9910 - jd - Thu Aug 21, 2003 5:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jd wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
There's a different sp that's used when an interrupt ocurs so corrupting sp in the mixer is safe with Fast and Single Interrupts, but you're right that there may be a problem with Multiple Interrupts. I'll get it fixed ASAP.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This issue has now been resolved - thanks NEiM0D! The updated code can be downloaded here:
<br/>
<br/>
<a class="postlink" href="http://www.apex-designs.net/tools_aas.html" target="_blank">http://www.apex-designs.net/tools_aas.html</a>
<br/>
<br/>
I've also created an AAS discussion list.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9947 - NEiM0D - Fri Aug 22, 2003 7:01 pm</h4>
    <div class="postbody"><span class="postbody">Hi James,
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jd wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
This issue has now been resolved - thanks NEiM0D! 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
np.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jd wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
So it's not valid to compare because it works in a much more efficient way? That seems like a rather arbitary restriction.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Mostly because if other mixers had no temporary buffer, they might even be faster than your mixer =)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9951 - tepples - Fri Aug 22, 2003 7:46 pm</h4>
    <div class="postbody"><span class="postbody">Mixers with no temporary buffer have a hard time reproducing rich orchestration. They tend to need chord samples rather than placing the notes of a chord in separate channels, which eats more ROM space.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9953 - jd - Fri Aug 22, 2003 8:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NEiM0D wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Mostly because if other mixers had no temporary buffer, they might even be faster than your mixer =)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, but they might not. :)
<br/>
<br/>
My understanding is that other mixers use a temporary buffer because conventional wisdom says that's the fastest way to get more than 4 channels. With AAS, we've found a way to get 8 channels without needing a temporary buffer. Surely, that means AAS is the fastest mixer up to 8 channels. Beyond that I'll admit that other mixers are better because AAS simply doesn't support that number of channels (yet :).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9954 - jd - Fri Aug 22, 2003 8:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Mixers with no temporary buffer have a hard time reproducing rich orchestration. They tend to need chord samples rather than placing the notes of a chord in separate channels, which eats more ROM space.</td> </tr></table><span class="postbody">
<br/>
<br/>
This has nothing to do with whether they use a temporary buffer or not. Instead, it is the number of channels that causes these problems, and AAS proves this is not a fundamental limitation of mixers without temporary buffers. (In fact, I believe that Engine's mixer is also one-pass (i.e. does not use temporary buffers).)
<br/>
<br/>
Having said that, AAS currently only supports 4 channel Protracker MODs so your observation is still valid for the time being - although I'd disagree that tunes with a small number of channels are usually bigger than those with a large number. Also, having more channels uses more CPU power, so it's really a question of what a specific project needs.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
