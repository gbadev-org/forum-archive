<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Setting Interrupt Handler With Standart GCC crt0.s - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > Setting Interrupt Handler With Standart GCC crt0.s</h2>
<div id="posts">
<div class="post">
    <h4>#4587 - rome - Thu Apr 03, 2003 9:32 pm</h4>
    <div class="postbody"><span class="postbody">?m using startfiles (crt0.s lnkscript, etc...) from GCC compiler. And i wanna setup my interrupt handler correctly. i do something like that:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
void InterruptProcess()
<br/>
{
<br/>
   if (REG_IF &amp;  INT_TIMER1)
<br/>
   {
<br/>
      //Handling Timer 1
<br/>
   }
<br/>
   else
<br/>
   if(REG_IF &amp; INT_TIMER0)
<br/>
   {
<br/>
      // Handling Timer 0
<br/>
   }
<br/>
<br/>
   REG_IF |=REG_IF;
<br/>
}
<br/>
<br/>
<br/>
void main()
<br/>
{
<br/>
REG_INTERUPT = (u32)&amp;InterruptProcess;
<br/>
REG_IE = 0x18;
<br/>
REG_IME = 1;
<br/>
...
<br/>
...
<br/>
// bla bla bla....
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
that?s correct? There is any Register unsaved? Processor State changed, context error on return etc...
<br/>
Thanks a lot!!!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4598 - DekuTree64 - Fri Apr 04, 2003 4:22 am</h4>
    <div class="postbody"><span class="postbody">Hmm, well for one thing, take the &amp; out of (u32)&amp;InterruptProcess. Just the function name is its address. And of course you'll have to set the IRQ bits ni the timer control regs, but you probably already did that. Other than that I don't see any reason it wouldn't work. Have you tried just testing it yet?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
