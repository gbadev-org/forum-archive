<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>spectrum analysis - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Audio > spectrum analysis</h2>
<div id="posts">
<div class="post">
    <h4>#16606 - johnny_north - Fri Feb 20, 2004 7:47 pm</h4>
    <div class="postbody"><span class="postbody">What approach (if any) is feasable for doing real-time audio spectral analysis on the GBA. I was wondering if visual output of the results is feasable on the platorm.
<br/>
<br/>
My guess if that the analysis would need to be performed on the mixed sound buffer. My research turns up some info on the FFT, but several of the code examples I've found use at least one common log operation. 
<br/>
<br/>
Any input is appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16611 - tepples - Fri Feb 20, 2004 10:50 pm</h4>
    <div class="postbody"><span class="postbody">The common logs in FFT examples are used mainly to convert spectral values to decibel values. You can approximate those with a lookup table. If you just want to make a set of pretty analyzer bars for your game's "Sound Test" screen, you can do those more efficiently with a wavelet transform (I'd suggest Daubechies 4-tap as a good compromise between speed and accuracy) than with a Fourier transform.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16619 - johnny_north - Sat Feb 21, 2004 7:00 am</h4>
    <div class="postbody"><span class="postbody">That's exactly what I want to accomplish. Do you know of any C sources for the Daubechies 4-tap? I'm unable to translate the matematical formulas that google returns - also the code refs I've found are not in C and contain inexplicable method calls.
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16633 - tepples - Sat Feb 21, 2004 6:02 pm</h4>
    <div class="postbody"><span class="postbody">Do you know what a "convolution" is in digital signal processing? If not, please read everything up through "filters" in <a class="postlink" href="http://www.bores.com/courses/intro/" target="_blank">this introduction to DSP</a>.
<br/>
<br/>
Approximation of the Daubechies wavelet, expressed as FIR filters:
<br/>
Low pass: {11, 19, 5, -3}/32
<br/>
High pass: {-3, -5, 19, -11}/32
<br/>
(In orthogonal wavelets, the high-pass filter is the low-pass filter, turned end to end, with odd-numbered samples negated.)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">To do wavelet analysis:
<br/>
  Let signal High be the convolution of the signal with the chosen high pass filter, keeping only even numbered samples.
<br/>
  Take the energy of High (sum of the squares of the samples).
<br/>
  Take an approximate logarithm of the energy.
<br/>
  Draw an analyzer band whose height is linearly related to this logarithm.
<br/>
  Let signal Low be the convolution of the signal with the chosen low pass filter, keeping only even numbered samples.
<br/>
  If you have not drawn the desired number of bands, do wavelet analysis on Low.</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
