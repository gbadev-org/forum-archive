<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Image flickering when using sound interrupts (Apex) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > Image flickering when using sound interrupts (Apex)</h2>
<div id="posts">
<div class="post">
    <h4>#12547 - oliheb - Mon Nov 17, 2003 4:20 pm</h4>
    <div class="postbody"><span class="postbody">I am currently using Apex along with a standard interruptProcess() function, but the image flickers when integrating sounds and music.
<br/>
<br/>
Now, when I play my rom file, the sound comes out perfectly but the image is flashing on and off. I am strongly suspecting interrupts to be the cause of this (maybe conflicting with Vblank). I have tried going into AAS_MultiInterrupts mode using the AAS_FastTimer1InterruptHandler, but it does not do it. 
<br/>
<br/>
Can somebody please help me?  I just do not know where to start looking at... and it is getting critical (time-wise)!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12556 - oliheb - Mon Nov 17, 2003 9:00 pm</h4>
    <div class="postbody"><span class="postbody">Actually, it might be less of an arsehole for everyone if I could just get a glimpse onto some source code which uses APEX, with a combination of both image and sound (most examples are strictly sound).
<br/>
<br/>
Please reach me via e-mail at: <a href="mailto:oheber1@cs.mcgill.ca">oheber1@cs.mcgill.ca</a>
<br/>
<br/>
Much appreciated...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12572 - jd - Tue Nov 18, 2003 5:40 am</h4>
    <div class="postbody"><span class="postbody">If you're using other CPU-intensive interrupts then you'll need to use "AAS_MultipleInterrupts" as you mentioned. "AASExample2" (which is included with the SDK) demonstrates how to do this and, whilst it doesn't do any graphics handling, it should be fairly straightforward to integrate it with any interrupt routines, including graphics ones. If you aren't using any other interrupts then there shouldn't be a problem. Would it be possible for you to email me your code - or at least a relevant snippet?
<br/>
<br/>
My address: <a href="mailto:james.daniels@apex-designs.net">james.daniels@apex-designs.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12585 - NEiM0D - Tue Nov 18, 2003 6:51 pm</h4>
    <div class="postbody"><span class="postbody">Hi James, would it be possible to create a ARM SDT version of AAS ?
<br/>
The current linklibrary only works for GCC.
<br/>
<br/>
It should work if you can convert it to asm (gcc -S) and with the trusty Wordpad search&amp;replace it should be an easy job :).
<br/>
<br/>
Anyway, let us know!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12592 - jd - Tue Nov 18, 2003 11:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NEiM0D wrote:</b></span></td> </tr> <tr> <td class="quote">Hi James, would it be possible to create a ARM SDT version of AAS ?
<br/>
The current linklibrary only works for GCC.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It's a possibility, but it's not very likely because I don't own a copy of the SDT and unfortunately it isn't cheap.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NEiM0D wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
It should work if you can convert it to asm (gcc -S) and with the trusty Wordpad search&amp;replace it should be an easy job :).
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Whilst I could send the asm code someone else to make a library for SDT with, I'm somewhat reluctant to since that would involve giving away the inner workings of the mixer. Or is there a tool that I could use to convert the asm into a SDT library, or to convert a GCC library into an SDT one?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12598 - tepples - Wed Nov 19, 2003 12:35 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.gnu.org/manual/binutils-2.12/html_chapter/binutils_4.html" target="_blank">man objdump</a>
<br/>
<br/>
True, disassembling the GCC version of the library would "giv[e] away the inner workings of the mixer," but disassembling a publicly distributed game linked to the library would "giv[e] away the inner workings of the mixer" as well.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12599 - jd - Wed Nov 19, 2003 1:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><a class="postlink" href="http://www.gnu.org/manual/binutils-2.12/html_chapter/binutils_4.html" target="_blank">man objdump</a>
<br/>
<br/>
True, disassembling the GCC version of the library would "giv[e] away the inner workings of the mixer," but disassembling a publicly distributed game linked to the library would "giv[e] away the inner workings of the mixer" as well.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, and distributing the library on my site for free (as I am doing) would make it even easier. However, what we're talking about here (unless I've misunderstood) is the original asm code which is a lot easier to interpret than disassembled code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12600 - tepples - Wed Nov 19, 2003 2:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jd wrote:</b></span></td> </tr> <tr> <td class="quote">However, what we're talking about here (unless I've misunderstood) is the original asm code which is a lot easier to interpret than disassembled code.</td> </tr></table><span class="postbody">
<br/>
Wouldn't the disassembled code suffice to translate the proprietary binary for use with GCC into a proprietary binary for use with expensive ARM tools?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12601 - jd - Wed Nov 19, 2003 5:15 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Wouldn't the disassembled code suffice to translate the proprietary binary for use with GCC into a proprietary binary for use with expensive ARM tools?</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know, although I guess it probably would. Unfortunately, I don't have the ARM tools but if someone else wants to make an SDT version that that's ok with me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12639 - jd - Thu Nov 20, 2003 1:49 am</h4>
    <div class="postbody"><span class="postbody">By the way, for those who might be interested, I've spoken to oliheb and the problem turned out to be with the graphics double buffering routines rather than with AAS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12648 - harlekijn - Thu Nov 20, 2003 7:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jd wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Wouldn't the disassembled code suffice to translate the proprietary binary for use with GCC into a proprietary binary for use with expensive ARM tools?</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know, although I guess it probably would. Unfortunately, I don't have the ARM tools but if someone else wants to make an SDT version that that's ok with me.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I would like to create a SDT version if that's possible.. you can send the dissassembled code to <a href="mailto:harlekijn02@hotmail.com">harlekijn02@hotmail.com</a> .</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12654 - jd - Fri Nov 21, 2003 12:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>harlekijn wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
I would like to create a SDT version if that's possible.. you can send the dissassembled code to <a href="mailto:harlekijn02@hotmail.com">harlekijn02@hotmail.com</a>.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The library is on my website here:
<br/>
<br/>
<a class="postlink" href="http://www.apex-designs.net/tools_aas.html" target="_blank">http://www.apex-designs.net/tools_aas.html</a>
<br/>
<br/>
You can disassemble and recompile it for SDT yourself.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
