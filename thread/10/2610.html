<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Impulse Tracker playback - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > Impulse Tracker playback</h2>
<div id="posts">
<div class="post">
    <h4>#14421 - animension - Tue Jan 06, 2004 9:39 am</h4>
    <div class="postbody"><span class="postbody">Hi all.
<br/>
<br/>
I know I posted a question regarding impulse tracker playback about 9 months ago. DekuTree64, I know you mentioned then that you were looking into IT playback but that it might not be practical for the GBA.
<br/>
<br/>
Well, I've been messing with various module formats such as S3M and XM, and to my dismay I have not been able to come up with any practical way to provide the quality of audio that IT allows with its New Note Action (NNA) feature to allow consecutive notes on the same channel to fade out even if a new note occurs on the same channel before the note completely makes its way through the envelope. It's just not the same without that precision control over the decay of each note.
<br/>
<br/>
Has anyone found / made a suitable IT player that is or could be implemented for the GBA?<br/>_________________<br/>"Beer is proof that God loves us and wants us to be happy."
<br/>
-- Benjamin Franklin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14432 - tepples - Tue Jan 06, 2004 4:57 pm</h4>
    <div class="postbody"><span class="postbody">If you really love your NNAs, then allocate a pair of XM/S3M channels where you would use one IT channel with NNA.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14444 - animension - Tue Jan 06, 2004 7:42 pm</h4>
    <div class="postbody"><span class="postbody">That's still not a *practical* solution -- it's a hack, and I'd like to avoid something like that at all costs. Here's why: the composer is composing in MIDI and importing into IT. He's a composer, not a tracker. Which means *I* have to retrack into XM using 2 channels to simulate NNA's that are native to one channel in IT == hours of work. If the composer decides to change anything later down the road == hours of *wasted* work.<br/>_________________<br/>"Beer is proof that God loves us and wants us to be happy."
<br/>
-- Benjamin Franklin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14445 - tepples - Tue Jan 06, 2004 8:03 pm</h4>
    <div class="postbody"><span class="postbody">What good reason has the composer given to refuse to learn to use Modplug Tracker?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14447 - poslundc - Tue Jan 06, 2004 8:26 pm</h4>
    <div class="postbody"><span class="postbody">My composer is using MIDI as well... he's just more comfortable/productive using it, and when you're paying him in future royalties it's hard to make an argument against that. :)
<br/>
<br/>
I've just made it clear to him what the limitations of the MOD format are, and that there may be some quality issues in converting from one format to another. He's going to try to obey those limits as best he can (eg. not using Note-OFFs but just replacing the sound in the current channel with a new one).
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14448 - animension - Tue Jan 06, 2004 8:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
What good reason has the composer given to refuse to learn to use Modplug Tracker?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Mainly for the same reason poslundc metioned. He's much more comforatable with MIDI since he's worked with it for years. ModPlug is a tracker, not a sequencer, and since he's a musician who prefers musical notation ala half-notes, whole-notes, quarter-notes, etc, on treble and bass clef staves, he is using a sequencer that gives him the ability to see his music in the way he is most creative.
<br/>
<br/>
And as I mentioned already, if we intend to simulate NNA in XM using 2 (or more depending on the frequency which notes are played and the decay time of the instrument) channels for each IT channel that incorporates NNA, an enormous amount of time will have to be spent by either myself or the composer, should he choose to learn XM tracking, retracking the music -- not to mention the fact that changes cannot be made to the music without said retracking being done *again* for every change made in their respective patterns.
<br/>
<br/>
As a die-hard RPGer, I know that music has a very important role in conveying the mood of a particular scene or activity, and to have quality music rendered without doing it justice seems a crying shame, seeing it *should* be possible given the fact that the GBA is capable of rendering PCM audio. The limitation isn't the hardware, but rather that no software has been written to play IT format on the hardware -- yet.
<br/>
<br/>
If there are others interested in working on a project that will allow IT format playback, do let me know, as I am now considering porting a C library that samples IT files into PCM audio which can then be DMA'd to the DirectSound FIFO using interrupts.<br/>_________________<br/>"Beer is proof that God loves us and wants us to be happy."
<br/>
-- Benjamin Franklin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14458 - DekuTree64 - Wed Jan 07, 2004 12:44 am</h4>
    <div class="postbody"><span class="postbody">Actually I did decide to write an IT player after all, and just strip it down some so it doesn't waste the whole ROM on its silly 500-something byte instrument headers. It sort of works now, though I haven't done many effects, or envelopes (one of the main reasons I wanted IT in the first place, so I will add them once it plays reliably), and it seems to skip playing notes here and there. The mixer supports full panning, and doesn't have any channel limits aside from having to cut down the max volume so it doesn't overflow 16 bits during the mixing process. It takes about 25% CPU for 16 channels, so it's not too fast, but it takes less than 1K of IWRAM. 
<br/>
I wouldn't count on it working properly anytime soon though, nomatter how much I work at it I never have gotten a good mixer/music player going, but hopefully I'll get it at least usable next time I do some work on it<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14472 - tepples - Wed Jan 07, 2004 5:37 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>animension wrote:</b></span></td> </tr> <tr> <td class="quote">He's much more comforatable with MIDI since he's worked with it for years.</td> </tr></table><span class="postbody">
<br/>
Have you considered implementing a .mid parser to run on the GBA?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">ModPlug is a tracker, not a sequencer, and since he's a musician who prefers musical notation ala half-notes, whole-notes, quarter-notes, etc, on treble and bass clef staves, he is using a sequencer that gives him the ability to see his music in the way he is most creative.</td> </tr></table><span class="postbody">
<br/>
I guess that when I switched from .mid to .s3m for my own projects, I had a hump to go over as well, but I made it, and now I tend to think about music in tracker notation.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">if we intend to simulate NNA in XM using 2 (or more [...]) channels for each IT channel that incorporates NNA, an enormous amount of time will have to be spent by either myself or the composer, should he choose to learn XM tracking, retracking the music</td> </tr></table><span class="postbody">
<br/>
Can't this re-tracking be done mechanically, by implementing an IT parser and half of a playback engine, dynamically allocating XM voices as needed, and writing the XM file?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">As a die-hard RPGer, I know that music has a very important role in conveying the mood of a particular scene or activity, and to have quality music rendered without doing it justice seems a crying shame, seeing it *should* be possible given the fact that the GBA is capable of rendering PCM audio. The limitation isn't the hardware, but rather that no software has been written to play IT format on the hardware -- yet.</td> </tr></table><span class="postbody">
<br/>
Yes, I know that music is important enough in an RPG to justify spending half the CPU cycles thereon, but I'm wondering whether an 8.4 MHz ARM7TDMI processor (that is, half the GBA's CPU) can mix a dozen active channels plus another dozen released notes at a decent sample rate.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I am now considering porting a C library that samples IT files into PCM audio which can then be DMA'd to the DirectSound FIFO using interrupts.</td> </tr></table><span class="postbody">
<br/>
That's actually what you want to do on the GBA, but you'll definitely want to optimize the mixer and probably rewrite it in ARM assembly language. What sample rate are you targeting?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14482 - animension - Wed Jan 07, 2004 7:27 am</h4>
    <div class="postbody"><span class="postbody">As far as the audio sample rate goes, I'm gonna try to see how well the library performs with a small module using 8bit 11KHz output, and if it does well, keep pushing it to see how far it can go.,<br/>_________________<br/>"Beer is proof that God loves us and wants us to be happy."
<br/>
-- Benjamin Franklin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14655 - LOst? - Sat Jan 10, 2004 7:03 am</h4>
    <div class="postbody"><span class="postbody">At this time I want FMOD for GBA with Impule Tracker playback</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15425 - yannis - Thu Jan 22, 2004 2:14 pm</h4>
    <div class="postbody"><span class="postbody">Why would you need NNA's for GBA? It's a huge waste of CPU? Unless of course you just want to play music and do nothing else :)
<br/>
<br/>
Any in-game music you need to write should be able to be done in 6-8 channels.
<br/>
<br/>
An IT replayer should be simple to code as a XM player, just don't include CPU wasting functions like NNA, Filtering. 
<br/>
<br/>
Something like Krawall that can play XM should be easily adaptable to play IT's with the same restrictions as the XM replayer. I mean it's only the format interperetation which is different, the core engine should be able to process the music the same way.<br/>_________________<br/>DS &amp; GBA Audio Professional
<br/>
<a href="http://www.GroovyAudio.com" target="_blank">www.GroovyAudio.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
