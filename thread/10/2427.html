<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Extending the MOD period table - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > Extending the MOD period table</h2>
<div id="posts">
<div class="post">
    <h4>#13013 - poslundc - Wed Dec 03, 2003 6:14 pm</h4>
    <div class="postbody"><span class="postbody">I've run into a problem tracking MODs... all of the MOD documents I've found have a period table for only three octaves, but some of the MODs I am working with deal with periods for octaves above or below the standard Amiga period table range.
<br/>
<br/>
Is there an extended version of the period table out there for dealing with octaves outside of the default three used in MOD?
<br/>
<br/>
Thanks,
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13015 - Burton Radons - Wed Dec 03, 2003 6:37 pm</h4>
    <div class="postbody"><span class="postbody">The MOD file format description at Wotsit's Format (<a class="postlink" href="http://www.wotsit.org/download.asp?f=modfil11" target="_blank">here</a>, which might not like the referral link) has a full set of octaves.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13016 - DekuTree64 - Wed Dec 03, 2003 6:53 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, you can do pretty much anything you want in your own music player, it doesn't have to be exact standard MOD. Besides, the period values just tell how long to wait between each sample (in related to the Amiga, you have to do calculate it around some to convert to Hz), and the notes in the patterns are just stored as period values, so all you have to do is deal with larger/smaller periods than the main 3 octaves, and to do that you just extend the tables. Since the period values just divide by 2 each octave up, and multiply by 2 each down, it's dead easy to do. 
<br/>
Then just compare the period with all your octave values until you find the closest one, and that's your note. What I did when I was writing a MOD player a while back was just take a table of the middle C octave and just shift the periods left/right to get the other octaves. Then you store the notes as byte values instead of periods to save space. You can just look up the frequency for that note in a table instead of having to convert the period value first, but you kind of have to use periods for portamento/vibrato effects anyway, and with a little algebra on paper you can work things down to where you just do a few multiplications and one divide to convert the note period to your increment value to feed to the mixer. 
<br/>
For the note values, you could do like Impulse Tracker and use 10 octaves, so notes are 0-120 (12 notes/octave), or use 4 bits for the note value and the other 4 for the octave, or say middle C is 0, and use signed values so the notes go up/down from there, however you want to do it, as long as it works, it works (personally I'd go with the first one, since it's simple and leaves one free bit, which packs nicely with the rest of the row data (you can use the free bit with the 4 free bits from the effect column to make a 5 bit value for the sample))<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13021 - poslundc - Wed Dec 03, 2003 8:00 pm</h4>
    <div class="postbody"><span class="postbody">Sweet, that file is even better than the one I've been using.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
