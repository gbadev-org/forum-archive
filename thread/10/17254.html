<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>MOD PLAY - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Audio > MOD PLAY</h2>
<div id="posts">
<div class="post">
    <h4>#174015 - gelinlonlin - Wed May 12, 2010 8:30 pm</h4>
    <div class="postbody"><span class="postbody">HI,I have looked at this,http://deku.rydia.net/program/sound2.html
<br/>
Part2. Resampling
<br/>
     soundVars.curMixBuffer[i] = channel.data[ channel.pos&gt;&gt;12 ] * channel.vol &gt;&gt; 6;
<br/>
First,why it need resampling?
<br/>
and another is
<br/>
I can not understand why it need &gt;&gt;12.
<br/>
thanks for explaining.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174016 - elhobbs - Thu May 13, 2010 12:14 am</h4>
    <div class="postbody"><span class="postbody">Resampling would allow a sample recorded at one rate - say 44 kHz to playback at a different rate - say 22 kHz. The position may be stored in a fixed point format to allow increment the position by fractional amounts.  The shift would convert the fixed point value to a whole number.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174030 - Ruben - Thu May 13, 2010 10:51 pm</h4>
    <div class="postbody"><span class="postbody">Well, what elhobbs said: channel.pos is in 12Q format (that is, a decimal number multiplied by 2^12 (1000h = 1.0, 800h = 0.5, 400h = 0.25, etc)).
<br/>
This allows you to keep an accuracy of up to 4096 different values, with 0 being a whole number, or 4095 being something like 0.9999999...
<br/>
<br/>
The &gt;&gt;6 afterwards is merely done to divide by 64, as channel.vol's maximum value IS 64.
<br/>
<br/>
Resampling is required to allow one to play a sample with a different sampling rate than that of the mixer [for example, Deku's examples use a mixing rate of 18157Hz and 31536Hz, if I remember right. Most MOD samples use a rate of 8363Hz which is then modified to different frequencies to create an illusion of 'notes' in 1/12 intervals].</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
