<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Want module to sound good. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Audio > Want module to sound good.</h2>
<div id="posts">
<div class="post">
    <h4>#27361 - ProblemBaby - Mon Oct 11, 2004 3:30 pm</h4>
    <div class="postbody"><span class="postbody">Hi again.
<br/>
<br/>
Now my Mixer works fine in just C code.
<br/>
When I try to play my XM file it doesnt sound like it does in ModPlugTracker at all. The most noticeable thing is the volumes.
<br/>
All the instruments have same volume and I can hear everything when I play it in Modplug tracker but in my mixer some instruments are very quite. I also want to know how they mix the sound in trackers.
<br/>
Is it like I do Add all channels and then divide my that number of channels??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27366 - SmileyDude - Mon Oct 11, 2004 5:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">Is it like I do Add all channels and then divide my that number of channels??</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, there are a couple of ways you can do the mixing -- you can do what you are doing, but the more channels you have, the quieter the overall mix is going to be.  On the GBA, there is only 256 possible volume levels.  If you have 8 channels, you've just reduced that to 32.  And the only way you'll get 100% volume is if all 8 channels happen to be at full volume at the moment.  But, that rarely happens.
<br/>
<br/>
Which leads to the other way of doing it.  Since all of your channels are rarely at 100%, you could simply add all of the channels together, and clip the sample back down to 255 if necessary.  As you can imagine, if you have a particularly loud piece of music and/or a lot of channels, the clipping would quickly become noticeable.
<br/>
<br/>
You could also use audio compression (not MP3 style compression, more like the analog compression used in music production) to reduce the volume when needed, but I find the effect to be annoying.
<br/>
<br/>
Personally, I'm using the clipping method -- but, then again, I'm only mixing 2 channels per GBA channel, so the clipping doesn't cause much of a problem.<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27370 - ProblemBaby - Mon Oct 11, 2004 7:05 pm</h4>
    <div class="postbody"><span class="postbody">Yeah it sounds better but some channels is still really quite.
<br/>
Is it possible to make it sound on the GBA as it do in the tracker?
<br/>
<br/>
Ive also some problems with finetunes:
<br/>
I found a nice formula in the XM-doc:
<br/>
<br/>
Period = 10*12*16*4 - Note*16*4 - FineTune/2;
<br/>
Frequency = 8363*2^((6*12*16*4 - Period) / (12*16*4));
<br/>
Speed = (Frequency &lt;&lt; 12) / 18157 // Added by me.
<br/>
<br/>
Well it is good to make a table of this if I only have the notes but it is if add all finetunes it will result in a table of size: 96*64 * sizeof(u16) and that feels like a bit of waste!
<br/>
But my feeling says that it would be slow in realtime too.
<br/>
Do someone have an idea of how to do this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27387 - SmileyDude - Tue Oct 12, 2004 2:01 am</h4>
    <div class="postbody"><span class="postbody">you could boost the volume artifically, if you still think it's too quiet.  But, it increases your chances of clipping, and your dynamic range goes down as well.
<br/>
<br/>
If you are writing your own music, then you can simply make sure that your samples are loud enough to begin with.  If you're making a generic MOD/IT/S3M/whatever player, you have to live with what you are given.<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
