<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>wav to s3m conversion for krawall use - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > wav to s3m conversion for krawall use</h2>
<div id="posts">
<div class="post">
    <h4>#110032 - katapulp - Fri Nov 24, 2006 2:43 pm</h4>
    <div class="postbody"><span class="postbody">Hi there,
<br/>
<br/>
I keep trying to play s3m sample using krawall library on Visual Ham with no success (or strange one).... I had a look at most of the posts here related to sound conversion, but I really can't figure out what's the problem with my project.
<br/>
<br/>
I used Audition to convert my wav to a PCM 8bits mono, 8363hz sound file. Then I used Modplug Tracker to import the wav as a sample, and exported it as a s3m file. 
<br/>
<br/>
Everytime I modify the makefile and compile the project, and I got this error message:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:/gbadev/tools/win32/krawall/converter tones.s3m
<br/>
========================================================
<br/>
KRAWALL Soundsystem
<br/>
Copyright (c) 2001, 2002 Sebastian Kienzl &lt;seb@riot.org&gt;
<br/>
========================================================
<br/>
s3m-converter v1.0b for NON-COMMERCIAL USE
<br/>
<br/>
converting tones.s3m...
<br/>
name: "untitled"
<br/>
checking channels: !!!!!!!!!!!!!!!!................
<br/>
while doing stuff: empty file!!! (sfx?)
<br/>
<br/>
checking samples:
<br/>
removing 0-samples: ..............................
<br/>
cutting beyond loop-point: 
<br/>
extending loops: 
<br/>
removing duplicate samples: 
<br/>
saving samples: .
<br/>
c:/gbadev/gcc-arm/bin/arm-thumb-elf-as.exe -mthumb-interwork  tones.s -o tones.o
<br/>
Assembler messages:
<br/>
Error: can't open tones.s for reading
<br/>
tones.s: No error
<br/>
make: *** [tones.o] Error 1</td> </tr></table><span class="postbody">
<br/>
<br/>
I also tried to convert the s3m as a mod file, then closed it, opened it, changed to s3m again... and it didn't work. I, of course, tried with other files, with no success. 
<br/>
<br/>
It seems to be a frequency problem, but I really don't know what's wrong with this test file. I think I've followed all the good steps to convert to s3m...
<br/>
<br/>
I would really appreciate can give me a hand on this! I might have miss something. If someone can send me a s3m sample file, I'll try with it. 
<br/>
<br/>
Here are my source files.
<br/>
<br/>
<span style="font-weight: bold">sound files</span>
<br/>
<a href="http://www.regarde.org/temp/tones.wav" target="_blank">http://www.regarde.org/temp/tones.wav</a>
<br/>
<a href="http://www.regarde.org/temp/tones.s3m" target="_blank">http://www.regarde.org/temp/tones.s3m</a>
<br/>
<br/>
<br/>
<span style="font-weight: bold">main.h</span>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "mygba.h"
<br/>
#include "samples.h"
<br/>
<br/>
<br/>
u32 g_Frames=0;
<br/>
u32 g_NewFrame=0;
<br/>
<br/>
<br/>
void vblFunc(void);
<br/>
<br/>
int main(void)
<br/>
{
<br/>
       ham_Init();
<br/>
kragInit(KRAG_INIT_STEREO);
<br/>
   ham_StartIntHandler(INT_TYPE_TIM1,&amp;kradInterrupt);
<br/>
   ham_StartIntHandler(INT_TYPE_VBL,&amp;vblFunc);
<br/>
<br/>
while(1)
<br/>
  {
<br/>
      
<br/>
  if(g_NewFrame) {
<br/>
   kramPlay(samples[ 0 ], TRUE, 0);
<br/>
   g_NewFrame=0;
<br/>
  }
<br/>
  
<br/>
}
<br/>
<br/>
}
<br/>
<br/>
void vblFunc(void)
<br/>
{
<br/>
    kramWorker();
<br/>
<br/>
   g_NewFrame=1;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
<span style="font-weight: bold">makefile</span>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">#################################
<br/>
# HAM Makefile
<br/>
#################################
<br/>
<br/>
<br/>
include $(HAMDIR)/system/master.mak
<br/>
<br/>
#
<br/>
# Set the name of your desired GBA image name here
<br/>
#
<br/>
<br/>
PROGNAME=demo
<br/>
OFILES += main.o 
<br/>
<br/>
#
<br/>
# Compile using Krawall software (set to yes or no) ?
<br/>
# Also specify if Krawall is registered (yes or no)
<br/>
#
<br/>
<br/>
USE_KRAWALL=yes
<br/>
KRAWALL_IS_REGISTERED=no
<br/>
KRAWALL_FILES= tones.s3m
<br/>
<br/>
<br/>
 ######################################
<br/>
# Standard Makefile targets start here
<br/>
######################################
<br/>
<br/>
all : $(PROGNAME).$(EXT) clean
<br/>
<br/>
#
<br/>
# Most Makefile targets are predefined for you, suchas
<br/>
# vba, clean ... in the following file
<br/>
#
<br/>
include $(HAMDIR)/system/standard-targets.mak
<br/>
<br/>
######################################
<br/>
# custom  Makefile targets start here
<br/>
######################################
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110036 - tepples - Fri Nov 24, 2006 3:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>katapulp wrote:</b></span></td> </tr> <tr> <td class="quote">I keep trying to play s3m sample using krawall library on Visual Ham with no success (or strange one).... I had a look at most of the posts here related to sound conversion, but I really can't figure out what's the problem with my project.
<br/>
<br/>
I used Audition to convert my wav to a PCM 8bits mono, 8363hz sound file.</td> </tr></table><span class="postbody">
<br/>
How big is the wav file?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110037 - katapulp - Fri Nov 24, 2006 3:30 pm</h4>
    <div class="postbody"><span class="postbody">hmm you're right, that was a size problem.
<br/>
It works with a smaller file...
<br/>
<br/>
<br/>
Is it normal to have a very metallic sound wich echo (very different from the modplug sound preview) ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110047 - tepples - Fri Nov 24, 2006 8:14 pm</h4>
    <div class="postbody"><span class="postbody">If you're making a music track, you should use one .wav per instrument and sequence it in Modplug Tracker, not just record the whole thing to a .wav and try to import it.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
