<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Saturation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Audio > Saturation</h2>
<div id="posts">
<div class="post">
    <h4>#25545 - tepples - Tue Aug 24, 2004 8:26 pm</h4>
    <div class="postbody"><span class="postbody">The GBA has two PCM channels, each of which can be set to 50% volume or 100% volume. Some claim that the GBA's PCM sound volume is weak, and they design their sound engines to play the same thing through both PCM channels in order to get it to sound louder. <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3852&amp;highlight=mono+louder+stereo" target="_blank">Yes, jd, you do get a louder sound out of this</a>, but you also get heavy clipping. I've done testing on real hardware (flash card + GBA; flash card + GameCube), and it turns out that if you play a full-scale sine wave at 100% volume (0 dBFS), it'll sound OK, but if you play it on two PCM channels at once, it'll introduce harmonic distortion unless the sine wave is below 50% (-6 dBFS). This seems to indicate that 100% of one channel is full scale for the DAC, unlike VisualBoyAdvance which seems to think 150% is the DAC's full scale.
<br/>
<br/>
Conclusion: Don't use two channels just to get louder sound from your mixer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25561 - jd - Wed Aug 25, 2004 4:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Conclusion: Don't use two channels just to get louder sound from your mixer.</td> </tr></table><span class="postbody">
<br/>
<br/>
Ok, but what method would you suggest to get louder sound? If you boost+clip the volume inside the mixer instead, you're still going to get distortion and it's going to take more CPU power to do it. There is always a trade-off between volume and distortion - although the problem is especially acute on the GBA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25568 - tepples - Wed Aug 25, 2004 4:55 am</h4>
    <div class="postbody"><span class="postbody">If you have to clip audio, and you're not running a 3D engine or anything else with a similar CPU load, it may be worth the extra CPU time to clip using a soft-clip lookup table such as what you get from a plot of sin() or arctan(). You'll get soft saturation reminiscent of tube audio rather than horrible digital clipping. I believe the added subjective quality is worth it, so the loudness boost option of the next version of GSM Player will use a softer saturation curve.
<br/>
<br/>
Don't let your music's transients be a casualty of <a class="postlink" href="http://www.loudnessrace.net/" target="_blank">the loudness arms race</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25569 - jd - Wed Aug 25, 2004 5:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Don't let your music's transients be a casualty of <a class="postlink" href="http://www.loudnessrace.net/" target="_blank">the loudness arms race</a>.</td> </tr></table><span class="postbody">
<br/>
<br/>
That's true for CDs as you can just turn up your hi-fi to get volume and accuracy - but with the GBA's 8-bit output and puny speaker the developer is always going to have to compromise between the two.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25580 - FluBBa - Wed Aug 25, 2004 10:52 am</h4>
    <div class="postbody"><span class="postbody">Why don't you let the user make the compromise instead of the developer by including a sound volume setting?<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25581 - gb_feedback - Wed Aug 25, 2004 12:41 pm</h4>
    <div class="postbody"><span class="postbody">There is a world of difference perceptually between playing a single sine wave at over full amplitude so that it clips, and playing actual music which clips on occasional peaks, when the individual samples happen to reinforce each other.
<br/>
<br/>
I did once wonder myself about soft limiting but it seems computationally expensive for a mixer, so I doubt if it's justifiable. But I'd be interested to hear otherwise...<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25591 - tepples - Wed Aug 25, 2004 5:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FluBBa wrote:</b></span></td> </tr> <tr> <td class="quote">Why don't you let the user make the compromise instead of the developer by including a sound volume setting?</td> </tr></table><span class="postbody">
<br/>
Done. I've added a 3.5 dB boost curve to the next version of GSM Player.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gb_feedback wrote:</b></span></td> </tr> <tr> <td class="quote">playing actual music which clips on occasional peaks, when the individual samples happen to reinforce each other. </td> </tr></table><span class="postbody">
<br/>
In some songs, I get clipping on every kick drum hit.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I did once wonder myself about soft limiting but it seems computationally expensive for a mixer</td> </tr></table><span class="postbody">
<br/>
When downconverting from the 16-bit mix bus to 8-bit samples, do a table lookup. It won't take more than a couple scanlines.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
