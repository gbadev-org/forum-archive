<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Resampling - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Audio > Resampling</h2>
<div id="posts">
<div class="post">
    <h4>#39102 - ProblemBaby - Mon Apr 04, 2005 4:04 pm</h4>
    <div class="postbody"><span class="postbody">If I have a WAV-file at 31536hz.
<br/>
would it be possible to just save each fourth point and then somehow recreate the Wave so it sounds like 32khz and not 8khz
<br/>
Ive tried to do a linear interpolation but it doesnt sound that good, does it exist more accurate methods cause this case isnt fun to hear :D
<br/>
     _
<br/>
   /   \
<br/>
 /       \
<br/>
*p1     *p2
<br/>
<br/>
Result:
<br/>
<br/>
*p1-----*p2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39109 - ampz - Mon Apr 04, 2005 5:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">If I have a WAV-file at 31536hz.
<br/>
would it be possible to just save each fourth point and then somehow recreate the Wave so it sounds like 32khz and not 8khz
<br/>
Ive tried to do a linear interpolation but it doesnt sound that good, does it exist more accurate methods cause this case isnt fun to hear :D</td> </tr></table><span class="postbody">
<br/>
What is the frequency content of the wav file?
<br/>
If there are frequencies in the wav file above 3-4kHz then what you are asking is obviously impossible.
<br/>
However, if the frequency content of the wav file is all below 3kHz (or even better: below 2kHz), then it can be done.
<br/>
<br/>
Frequency content below 2kHz should sound decent with just linear interpolation.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39112 - serf - Mon Apr 04, 2005 5:42 pm</h4>
    <div class="postbody"><span class="postbody">Don't downsample and then upsample:  not only will you lose all of your high frequencies, but you'll introduce more noise than necessary.
<br/>
<br/>
Are you trying to resample in real time?  Or can it all happen offline?  If you're trying to do this in real time, or for multiple samples at once, some kind of low-order polynomial or spline interpolation might be best (Hermite interpolation seems to be a popular one).  If you have more time and resources, windowed sinc interpolation will give you better sounding results.
<br/>
<br/>
<a class="postlink" href="http://ccrma.stanford.edu/~jos/resample/" target="_blank">info on windowed sinc resampling</a>
<br/>
<br/>
<a class="postlink" href="http://www.musicdsp.org/archive.php" target="_blank">music-dsp source code archive</a> (plenty of interpolation examples in the "other" category)
<br/>
<br/>
<span style="font-weight: bold">edit:</span>  By "multiple samples" above, I mean samples as in "short audio files," not as in "instantaneous values of a signal"....</span><span class="gensmall"><br/><br/>Last edited by serf on Mon Apr 04, 2005 5:49 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#39113 - ProblemBaby - Mon Apr 04, 2005 5:43 pm</h4>
    <div class="postbody"><span class="postbody">I dont understand your question exactly but the reason to why it is 31536 is that my mixer runs at that speed and the Sounds use the whole frequency spectrum or what it is called.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39114 - ampz - Mon Apr 04, 2005 6:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">I dont understand your question exactly but the reason to why it is 31536 is that my mixer runs at that speed and the Sounds use the whole frequency spectrum or what it is called.</td> </tr></table><span class="postbody">
<br/>
<br/>
The sounds use the whole spectrum from 0-15kHz? Then no, it cannot be downsampled without huge losses.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39146 - tepples - Tue Apr 05, 2005 4:23 am</h4>
    <div class="postbody"><span class="postbody">Are you trying to use downsampling as a crude form of lossy audio compression? If so, there exist other lossy audio codecs that sound better at a given bitrate. Investigate <a class="postlink" href="http://www.pineight.com/gba/#8ad" target="_blank">some form of ADPCM</a>, <a class="postlink" href="http://www.pineight.com/gba/gsm/" target="_blank">GSM 06.10</a>, or something custom.
<br/>
<br/>
That said, someone seems to think nearest-neighbor resampling sounds better than linear interpolation in some cases. There's a thread in Pocket Heaven about this issue; start <a class="postlink" href="http://boards.pocketheaven.com/viewtopic.php?p=15765#15765" target="_blank">here</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39159 - ProblemBaby - Tue Apr 05, 2005 7:47 am</h4>
    <div class="postbody"><span class="postbody">My dream for the future was to implement it in my Mixer.
<br/>
<br/>
serf: Thanks for the info, It was very interesting but I couldn't make it sound a lot better=/
<br/>
<br/>
tepples: Thanks, I'll check it out
<br/>
One question though: Nearest Neighbor, how does that work with audio? I cant find any good info.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39167 - yannis - Tue Apr 05, 2005 2:40 pm</h4>
    <div class="postbody"><span class="postbody">You are assuming the difference between your first point and next point is  exactly linear. 
<br/>
<br/>
What you are trying to do is interpolate data between two points which is a form of error correction. Doing this will create quantization distortion. 
<br/>
<br/>
It will sound MUCH worse for 8bit than 16bit too as you are interpolating between extreme values 0-255 rather than 0-65535.<br/>_________________<br/>DS &amp; GBA Audio Professional
<br/>
<a href="http://www.GroovyAudio.com" target="_blank">www.GroovyAudio.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39172 - tepples - Tue Apr 05, 2005 3:07 pm</h4>
    <div class="postbody"><span class="postbody">Nearest neighbor is just sample and hold. Just keep outputting one sample until it's time for the next sample. It makes sense for some waves but less sense for other waves; if you make a mixer with both linear and nearest neighbor resampling, that will give your mixer much more flexibility.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39174 - ProblemBaby - Tue Apr 05, 2005 3:44 pm</h4>
    <div class="postbody"><span class="postbody">I listened to the sound example in the other post and heard the differnece.
<br/>
But I cant understand how thats possible cause it should be exactly the same if I just hold the sample, right?
<br/>
<br/>
<br/>
at 2 hz
<br/>
12
<br/>
<br/>
at 4hz
<br/>
1122
<br/>
<br/>
wouldnt that sound exactly the same??
<br/>
thanks in advance</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39186 - ampz - Tue Apr 05, 2005 7:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">wouldnt that sound exactly the same??</td> </tr></table><span class="postbody">
<br/>
Depends on the hardware.
<br/>
If the DAC output has adjustable low pass filters (where the filter frequency is automatically adjusted to half the sample frequency), then it would NOT sound the same. But if the output has fixed low pass filters then it would indeed sound the same.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39193 - tepples - Tue Apr 05, 2005 8:49 pm</h4>
    <div class="postbody"><span class="postbody">The GBA DAC output has what appears to be a fixed band-pass filter.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39200 - ampz - Tue Apr 05, 2005 10:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The GBA DAC output has what appears to be a fixed band-pass filter.</td> </tr></table><span class="postbody">
<br/>
Why band pass?
<br/>
EDIT
<br/>
Sorry, stupid question.
<br/>
There is probably a series capacitor on the output to eliminate any DC offset. That capacitor works like a high-pass filter.
<br/>
low-pass + high-pass == band-pass</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
