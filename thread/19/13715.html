<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>EZ2 + multi-nds loader + DLDI - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Flash Equipment > EZ2 + multi-nds loader + DLDI</h2>
<div id="posts">
<div class="post">
    <h4>#134972 - ethoscapade - Wed Jul 18, 2007 10:51 pm</h4>
    <div class="postbody"><span class="postbody">aka a merging of old and new DS homebrew solutions that should never be.
<br/>
<br/>
i'm trying to rig up a friend's EZ2 with a few current emulators and such. the EZ2, for those in the know, was notoriously bad for DS homebrew - putting a single file on there worked fine, but any more than one and it'd try to append its own loader software, which had the catch of only working on commercial software. i found darkain's old multi-nds loader and, lo and behold, it works fine, but only with .nds binaries.
<br/>
<br/>
nesDS always had an option to compile itself as a .nds, and to my amazement, it works fine through all of this.
<br/>
<br/>
snemul, lameboy, lemmings, jenesis, and crawl, not so much.
<br/>
<br/>
what i've been doing is fcsr-compiling any given one of those (using lameboy as an example, i'd make an fcsr image of just the dragon warrior 1&amp;2 rom, then append it onto the dldi-patched lameboy.nds), then pack all of those into a multi-nds binary.
<br/>
<br/>
everything boots, remarkably, but nothing can see any of the appeneded files. i'm thinking that the multi-nds loader breaks some part of the dldi filesystem, but i really don't have any better ideas.
<br/>
<br/>
any takers?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134974 - dantheman - Wed Jul 18, 2007 10:57 pm</h4>
    <div class="postbody"><span class="postbody">I'm not entirely sure if appended filesystems like FCSR work when in plain *.nds format, but I can offer one bit of advice:  padbin the file before appending the FCSR image.  You can get padbin from the GBFS distribution from Tepples's site.  Use "padbin 512 lameboy.nds" for instance.  I don't know if this will work or not, but it's worth a shot.
<br/>
<br/>
EDIT:  You can also try placing the final binary on the card by itself and booting it to see if it can see the appended filesystem then.  If it can see it when single-booting but not when using the multiloader, then perhaps the multiloader just can't be used with appended filesystems or something.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134982 - josath - Thu Jul 19, 2007 12:18 am</h4>
    <div class="postbody"><span class="postbody">appended filesystems wont work with darkain's multi nds loader. Just have him spend the $40 or whatever to get a real flashcart like R4 or something.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135024 - ethoscapade - Thu Jul 19, 2007 1:37 pm</h4>
    <div class="postbody"><span class="postbody">yeah, i'm pretty sure it's the loader that's breaking this.. they do work fine individually, so.
<br/>
<br/>
damn, i really wanted to get it to work.
<br/>
<br/>
in retrospect, i decided that it was a much better idea to compile the multinds.ds.gba from just the .nds binaries, and append one big fcsr image to the end of that (after using padbin).. but then the ez2 client refuses to see that half of the rom.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135056 - josath - Thu Jul 19, 2007 8:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ethoscapade wrote:</b></span></td> </tr> <tr> <td class="quote">yeah, i'm pretty sure it's the loader that's breaking this.. they do work fine individually, so.
<br/>
<br/>
damn, i really wanted to get it to work.
<br/>
<br/>
in retrospect, i decided that it was a much better idea to compile the multinds.ds.gba from just the .nds binaries, and append one big fcsr image to the end of that (after using padbin)..</td> </tr></table><span class="postbody">
<br/>
That sounds like it would work, actually
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"> but then the ez2 client refuses to see that half of the rom.</td> </tr></table><span class="postbody">
<br/>
You should be able to solve this by 'fixing' the GBA header in the .ds.gba. There are tons of gba header fixers out there, probably half a dozen on gbadev.org even. I don't have any specific recommendations (haven't done gba stuff in a while)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135104 - ethoscapade - Fri Jul 20, 2007 6:01 am</h4>
    <div class="postbody"><span class="postbody">i didn't even think of fixing the header! i will try that!
<br/>
<br/>
in the meantime, i've made working .nds (working in darkain's horribly outdated loader, at that) out of both snesds and crawl, both of which took quite a bit of legwork.
<br/>
<br/>
(the former involved combining batchfile logic from an old build of nesDS with individual binaries from a couple different builds of snesDS; the latter involved taking note of exactly what that "FAT unable to initialize, using GBFS" output meant whenever playing dscrawl without filesystem support)
<br/>
<br/>
so this fcsr business would now primarily be for lemmings and for lameboy - and since there is absolutely no way to partition any of the sram on this cart given how i'm doing this, lameboy will be of limited usefulness as is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135168 - ethoscapade - Fri Jul 20, 2007 3:44 pm</h4>
    <div class="postbody"><span class="postbody">i can't seem to get anywhere with the header... GBATA confirms it's good to begin with, and i even tried using an sram patcher that's known to break it, then fixing it afterwards, and the ez client still refuses to write anything copied onto the end of the original multinds.ds.gba binary.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135181 - dantheman - Fri Jul 20, 2007 5:49 pm</h4>
    <div class="postbody"><span class="postbody">I could have helped you with SNES DS, as I have a copy of the builder app that is needed to create SNES DS binaries that are usable from a slot-1 device.  As Loopy removed the builder app from his site upon releasing the DLDI build, I uploaded the necessary tools myself <a class="postlink" href="http://danthemanms.googlepages.com/nesDS_snesDS_slot1_usage.zip" target="_blank">here</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
