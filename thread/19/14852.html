<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DevkitPro shell subdirectories help (super basic noob help) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Flash Equipment > DevkitPro shell subdirectories help (super basic noob help)</h2>
<div id="posts">
<div class="post">
    <h4>#149082 - Cave Johnson - Tue Jan 15, 2008 12:28 am</h4>
    <div class="postbody"><span class="postbody">Ive decided to try and create homebrew, and im running into roadblocks from the get go. Im using devkitPro, and following a tutorial at <a href="http://www.double.co.nz/nintendo_ds/nds_develop1.html." target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop1.html.</a>  In the Msys shell, it says "From within this shell change to the 'demo1' subdirectory that unzipping the file creates and run the command 'make'." How on earth do i change to a subdirectory in the shell? Thanks for your help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149087 - Lick - Tue Jan 15, 2008 2:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cd demo1
<br/>
make</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149144 - Cave Johnson - Wed Jan 16, 2008 12:14 am</h4>
    <div class="postbody"><span class="postbody">It says "sh: cd: demo1: No such file or directory" I know the file exists because i can open it, but why won't it register it?  I've tried creating pathways, but nothing seems to help (im probably not doing it right, though). Any other ideas? Thanks. (also i assume u meant type cd demo1, hit enter, type in make, hit enter)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149167 - knight0fdragon - Wed Jan 16, 2008 6:37 am</h4>
    <div class="postbody"><span class="postbody">I would start all over if I were you, and not look at that website, the information is too old to be of any use really, and it will just hurt you in the long run<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149177 - Cave Johnson - Wed Jan 16, 2008 12:23 pm</h4>
    <div class="postbody"><span class="postbody">Ok, the website wasnt  being that helpful to begin with, but my problem still stands. I have no idea how to switch to a makefile so that i can begin programming on it, when i try to find it(which i have no idea how to, from licks post i assume you type "cd makefile") i still get the same response from my first post.  I think this may have something to do with pathways, but once again i dont think i did them correctly either (how far do i take its value? just to the main folder (ds), or all the way to the file so that it reads C:\Taylor\ds\demo1\demo1\makefile?) Thanks for your help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149191 - gmiller - Wed Jan 16, 2008 3:17 pm</h4>
    <div class="postbody"><span class="postbody">the "cd demo" causes you to change to the demo "folder" or "directory" the the next line "make" invokes the make utility.  This utility looks for a file called "Makefile" to describe the dependencies of your project.
<br/>
<br/>
A makefile is a text file that contains lines that describe files that are dependent on others and how to regenerate the files.  I use a standard makefile for my GBA projects that uses files from the devKitPro install and some of my own work.  
<br/>
<br/>
You can build simple makefiles like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#
<br/>
# "$Id: makefile,v 1.4 2005/08/10 14:09:19 gmiller Exp gmiller $"
<br/>
#
<br/>
#
<br/>
<br/>
exercise : array
<br/>
<br/>
array:   array.o
<br/>
   $(CC)  -o $@ array.o $(LLFLAGS)
<br/>
<br/>
<br/>
.c.o :
<br/>
    $(CC) -c  -g $(CCFLAGS) $*.c
<br/>
<br/>
array.o:   array.c
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This makefile defines a label "exercise" which is dependent on "array".  "array" is dependent on "array.o" (object file, output of compiler) and defines rules to convert the object file to the executable with the linker "$(CC)  -o $@ array.o $(LLFLAGS)"  the next rule shows how to convert the .c files to .o (C source files to object files) using the compiler.  The last rule shows that the array.o file is dependent on the array.c file.  The defined rule for .c to .o will be used for this.  BEWARE:  The lines in a rule have format rules defined for them.  The label must start in column 1 and and lines that that follow that label that are associated with the label (usually commands to do what you want for that label) must start with a TAB not a space.
<br/>
<br/>
The commands to be used depend on the tools you are using so this would not be very helpful for a GBA or NDS code project.  My makefile for GBA projects looks like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
# Clear the implicit built in rules
<br/>
#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM)
<br/>
endif
<br/>
<br/>
-include $(DEVKITARM)/gba_rules
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output, if this ends with _mb a multiboot image is generated
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# DATA is a list of directories containing data files
<br/>
# INCLUDES is a list of directories containing header files
<br/>
#---------------------------------------------------------------------------------
<br/>
# HAM Stuff no longer used ....
<br/>
#
<br/>
#PROGNAME =unused
<br/>
#OFILES+= unused
<br/>
#ADD_LIBS+= unused   
<br/>
<br/>
# .................
<br/>
#
<br/>
<br/>
TARGET      :=   $(shell basename $(CURDIR))
<br/>
BUILD      :=   build
<br/>
SOURCES      :=   source
<br/>
DATA      :=   
<br/>
INCLUDES   :=   $(DEVKITARM)
<br/>
GDB_DIRS   =    $cdir:$cwd:$(ADD_GDB_SOURCE_DIRS)
<br/>
<br/>
ifeq ($(MAKECMDGOALS),gdb)
<br/>
DEBUG_SET   :=   gdb
<br/>
endif
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# options for code generation
<br/>
#---------------------------------------------------------------------------------
<br/>
#ARCH   :=   -mthumb -mthumb-interwork
<br/>
ARCH   :=
<br/>
<br/>
ifneq ($(DEBUG_SET),gdb)
<br/>
THIS_BUILD   :=   "Release Build"
<br/>
CFLAGS   :=   -Wall -O3 -save-temps \
<br/>
         -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
          -fomit-frame-pointer\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
else
<br/>
THIS_BUILD   :=   "Debug Build"
<br/>
CFLAGS   :=   -g -Wall -O0 -save-temps \
<br/>
         -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
endif
<br/>
CFLAGS   +=   $(INCLUDE)
<br/>
<br/>
ASFLAGS   :=   $(ARCH)
<br/>
<br/>
ifneq ($(DEBUG_SET),gdb)
<br/>
LDFLAGS   =   $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
else
<br/>
LDFLAGS   =   -g $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
endif
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# path to tools - this can be deleted if you set the path to the toolchain in windows
<br/>
#---------------------------------------------------------------------------------
<br/>
export PATH      :=   $(DEVKITARM)/bin:$(DEVKITPRO)/msys/bin:$(PATH)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBS   :=
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBGBA)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# no real need to edit anything past this point unless you need to add additional
<br/>
# rules for different file extensions
<br/>
#---------------------------------------------------------------------------------
<br/>
ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OUTPUT   :=   $(CURDIR)/$(TARGET)
<br/>
export VPATH   :=   $(foreach dir,$(SOURCES),$(CURDIR)/$(dir)) \
<br/>
               $(foreach dir,$(DATA),$(CURDIR)/$(dir))
<br/>
<br/>
export DEPSDIR   :=   $(CURDIR)/$(BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# automatically build a list of object files for our project
<br/>
#---------------------------------------------------------------------------------
<br/>
CFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.c)))
<br/>
CPPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
SFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.s)))
<br/>
BINFILES   :=   $(foreach dir,$(DATA),$(notdir $(wildcard $(dir)/*.*)))
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# use CXX for linking C++ projects, CC for standard C
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(CPPFILES)),)
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CC)
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CXX)
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OFILES   := $(addsuffix .o,$(BINFILES)) $(CPPFILES:.cpp=.o) $(CFILES:.c=.o) $(SFILES:.s=.o)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of include paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export INCLUDE   :=   $(foreach dir,$(INCLUDES),-I$(dir)/include) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
               $(foreach dir,$(CURDIR), -I$(dir)/include) \
<br/>
               -I$(CURDIR)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of library paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
<br/>
.PHONY: $(BUILD) clean
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
   @[ -d $@ ] || mkdir -p $@
<br/>
   make "DEBUG_SET=$(DEBUG_SET)" --no-print-directory -C $(BUILD) -f $(CURDIR)/Makefile
<br/>
<br/>
all   : buildtype $(BUILD)
<br/>
<br/>
buildtype:
<br/>
   @echo "Build type: " $(THIS_BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...
<br/>
   rm -fr $(BUILD) $(TARGET).elf $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
vbawin:   clean all
<br/>
   $(DEVKITPRO)/tools/win32/vbawin.exe $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
runvbawin:
<br/>
   $(DEVKITPRO)/tools/win32/vbawin.exe $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
vba:   clean all
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
runvba:
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
startsdl:
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/VisualBoyAdvance-SDL.exe -D1024 -v-1 -3 -Gtcp:44444 2&gt;err.log &amp;
<br/>
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
makeini:
<br/>
   echo "File $(TARGET).elf" &gt; insight.ini
<br/>
   echo "target remote 127.0.0.1:44444" &gt;&gt;insight.ini
<br/>
   echo "load $(TARGET).elf" &gt;&gt;insight.ini
<br/>
   echo "b main" &gt;&gt;insight.ini
<br/>
   echo "directory $(GDB_DIRS)"&gt;&gt;insight.ini
<br/>
   echo "c" &gt;&gt;insight.ini
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
startinsightnew:
<br/>
   $(DEVKITPRO)/insight/bin/arm-eabi-insight.exe --command=insight.ini $(TARGET).elf
<br/>
<br/>
startinsight:
<br/>
   $(DEVKITPRO)/insight-6.4.50/bin/arm-elf-insight.exe --command=insight.ini $(TARGET).elf
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
gdb:   clean
<br/>
   @make "DEBUG_SET=$(DEBUG_SET)" all 
<br/>
   make startsdl makeini startinsight
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
rungdb: startsdl makeini startinsight
<br/>
<br/>
testinsight: makeini startinsight
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
<br/>
DEPENDS   :=   $(OFILES:.o=.d)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# main targets
<br/>
#---------------------------------------------------------------------------------
<br/>
$(OUTPUT).gba   :   $(OUTPUT).elf
<br/>
<br/>
$(OUTPUT).elf   :   $(OFILES)
<br/>
<br/>
%.o   :   %.pcx
<br/>
   echo $(notdir $&lt;)
<br/>
   $(bin2o)
<br/>
<br/>
-include $(DEPENDS)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#--------------------------------------------------------------------------------
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Of course this is a more complex makefile and will only work for GBA project in my development environment.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149211 - Cave Johnson - Wed Jan 16, 2008 8:40 pm</h4>
    <div class="postbody"><span class="postbody">Wow, first of all, thank you for the indepth reply. It seems all of this is starting to make sense, but i still have 2 main problems:
<br/>
<br/>
1. How do i create and work on a project directory in a shell. Im guessing that it would work similar to trying to pull up demo1 (from the origional post) but as i said, i was getting the error message "sh: cd: demo1: No such file or directory." I have a feeling that this has something to do with me assigning the pathway variable name or variable value wrong. If so, how do you properly assign them?
<br/>
<br/>
2. The mumbo jumbo language that you use to code, but this is something that i will just have to learn over time.
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
