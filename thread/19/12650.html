<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>R4DS Incompatible With DevkitARM r20? [Clear IPC!] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS Flash Equipment > R4DS Incompatible With DevkitARM r20? [Clear IPC!]</h2>
<div id="posts">
<div class="post">
    <h4>#121008 - Undefined Error - Thu Mar 08, 2007 3:37 am</h4>
    <div class="postbody"><span class="postbody">I'm in the market for a FAT-based, DLDI-supporting, Slot-1 solution, since I already own an EFA256 for any GBA homebrew I might want to run.  What I've read on this and other sites seems to suggest the R4DS is the current cream of that crop.
<br/>
<br/>
However, I remember reading a post around the time DevkitARM r20 came out that indicated programs compiled under DevkitARM r20 would not work on the R4DS (and its twin, the M3 Perfect Simply) because of a change in the address of the ARM7 code.  I cannot now find this thread, but I wanted to check whether anyone knows if this is still an issue, since I wouldn't want to invest in a product that I can't immediately use. (And won't be able to until/unless the requisite changes are made to its firmware, presumably.)<br/>_________________<br/>This post was spawned from an Undefined Error.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121031 - simonjhall - Thu Mar 08, 2007 8:43 am</h4>
    <div class="postbody"><span class="postbody">I use r20 with my M3 Simply and it works just fine! FAT DLDI-age works ok too. I do read corrupt data sometimes though...
<br/>
<br/>
I did have IPC problems with it *in my code* though where the IPC struct wouldn't be set up properly and touchreadXY would hang until I touch the screen for the first time... (easy to fix though)
<br/>
Was kinda weird though as the same code ran fine on my other cards!
<br/>
<br/>
So to summarise, it's fine :-)<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121035 - Diddl - Thu Mar 08, 2007 8:59 am</h4>
    <div class="postbody"><span class="postbody">I have a M3 simply (R4 clone) and DLDI for it works fine for this card. 
<br/>
<br/>
But in my opinion this is not the best card. 
<br/>
<ul>
<br/>
<li>My special needs are simple testing of Homebrew. With all TF card based slot 1 solutions you have to play the load/unload game on every test. (unload R4, unload TF, load TF into cardreader, write from PC to TF, unload TF, load into R4, load R4 into NDS, TEST).
<br/>
</li><li>some .nds don't work with R4 (don't know why)
<br/>
</li><li>every TF based slot 1 solution has slow downs (also R4 and M3 simply)
<br/>
</li></ul>
<br/>
<br/>
I prefer Slot 1 sokution with internal memory like the DS-Linker
<br/>
<ul>
<br/>
<li>Upload of Homebrew (or other tests) take place with a special Slot 2 card with USB connector. For testing Homebrew only a reboot is nessecary.
<br/>
</li><li>There are 8 clones of DS - Linker, all 100% compatible. You can order 16G cards (=2 GigaByte) for about USD$ 41.99. This includes the USB connector and you don't need a additional TF card.
<br/>
</li></ul></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121043 - Undefined Error - Thu Mar 08, 2007 12:05 pm</h4>
    <div class="postbody"><span class="postbody">Why on Earth would the choice of card affect the IPC?  That is a most peculiar error you have there, Simonjhall.  Sounds like the R4DS still has a few bugs to iron out. (What doesn't in this world?)  But I'm glad to hear that the R4DS isn't completely anti-DevkitARM-r20 after all.  Maybe I misread or imagined that post, since I can't find it now and no one seems to remember it.
<br/>
<br/>
However, what Diddl says about the DS-Linker intrigues me.  Up until now, I dismissed it out of hand due to a lack of information and a misunderstanding that it was a Slot-2 solution.  But I admit, the prospect of having to remove and insert cards into devices and even other cards constantly has always been my least favorite aspect of TF-based solutions, but I had presumed it to be an unavoidable evil since that seems to be the favored technology these days.  Really, this is even one of my least-favorite aspects of my faithful old EFA, (it doesn't use TF, but it refuses to be connected to the GBA and USB simultaneously even though nothing physically prevents this) but at least with the GBA there were mature emulators for me to use for most minor change testing.  With the DS, working on the hardware seems to be necessary more often than with its predecessor.  I don't have a bunch of SD cards lying around already, so I'd be buying a dedicated card for any TF-based solution anyway.  And anything that keeps me from having to do the "Adapter Dance" is a plus in my book.
<br/>
<br/>
Not to hijack my own thread, but since you seem to know a lot about the DS-Linker, Diddl, would you care to make a recommendation about which clone to be on the lookout for? (Or to be sure to avoid?)<br/>_________________<br/>This post was spawned from an Undefined Error.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121044 - Diddl - Thu Mar 08, 2007 12:29 pm</h4>
    <div class="postbody"><span class="postbody">since you can very simply change the card OS it is of no interest which card to buy. more interesting is where to buy, cause the diffrences of price are big. 
<br/>
<br/>
I don't know if it is allowed to recommend a shop, please delete it if not. I bought my MK5 16G at [SOMEWHERE] and I also have a UFPEX from ebay. Both cards work without any problems and I have tried most available OS for this cards.
<br/>
<br/>
## 
<br/>
<br/>
the USB port of this fireline can be programmed since there is released source code for it (NDS Gamepad and NDS Mouse).
<br/>
<br/>
<span style="text-decoration: underline">Caution: </span>I'm sure you know, but slot 1 cards cannot execute GBA code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121047 - Oliv5400 - Thu Mar 08, 2007 1:05 pm</h4>
    <div class="postbody"><span class="postbody">M3S/R4DS have bugs with Palib toolkit only.. look at their forum for more information.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121055 - tepples - Thu Mar 08, 2007 2:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Diddl wrote:</b></span></td> </tr> <tr> <td class="quote"><ul><li>My special needs are simple testing of Homebrew. With all TF card based slot 1 solutions you have to play the load/unload game on every test. (unload R4, unload TF, load TF into cardreader, write from PC to TF, unload TF, load into R4, load R4 into NDS, TEST). </li><li>some .nds don't work with R4 (don't know why)</li></ul></td> </tr></table><span class="postbody">
<br/>
Is <a class="postlink" href="http://giesler.biz/bjoern/en/sw_dsftp.html" target="_blank">DSFTP</a> one of the "some .nds [that] don't work with R4" even after DLDI?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">every TF based slot 1 solution has slow downs (also R4 and M3 simply)</td> </tr></table><span class="postbody">
<br/>
Do these slowdowns happen even when the card isn't being accessed?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121059 - Diddl - Thu Mar 08, 2007 4:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Is <a class="postlink" href="http://giesler.biz/bjoern/en/sw_dsftp.html" target="_blank">DSFTP</a> one of the "some .nds [that] don't work with R4" even after DLDI?</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm sure DSFTP will run with R4. But it is very slow and normally my access point doesn't run always for security reasons.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Do these slowdowns happen even when the card isn't being accessed?</td> </tr></table><span class="postbody">
<br/>
<br/>
I spoke about backup games for testing purposes ...
<br/>
<br/>
Homebrew with FAT access runs very fast on R4!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121096 - Sweater Fish Deluxe - Thu Mar 08, 2007 9:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>simonjhall wrote:</b></span></td> </tr> <tr> <td class="quote">I did have IPC problems with it *in my code* though where the IPC struct wouldn't be set up properly and touchreadXY would hang until I touch the screen for the first time... (easy to fix though)
<br/>
Was kinda weird though as the same code ran fine on my other cards!</td> </tr></table><span class="postbody">
<br/>
How about the G6?
<br/>
<br/>
I've experienced what could be an IPC bug when using my G6.  Not in any games of my own, but in some other games (specifically Duck Hunt, Musk, Follarium and about 20 others that I've tried).  On other flash carts I've used, these games run fine, but on the G6 they simply have no touchscreen support, which can obviously make a certain games unplayable.  I don't have an R4 or M3 Simply myself, but on one R4 homebrew compatibility list I was looking at, I noticed that some of these same games were listed as not working, so the R4 may share some of its loading code with the G6 or something (aren't the R4, M3 and G6 all actually from the same company?) and that code may be the source of this problem as well as the one you were having maybe.
<br/>
<br/>
<br/>
...word is bondage...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121104 - Oliv5400 - Thu Mar 08, 2007 11:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">(specifically Duck Hunt, Musk, Follarium and about 20 others that I've tried)</td> </tr></table><span class="postbody">
<br/>
<br/>
They are made with Palib build.. and they share the same bug : no touchscreen, no sound, etc..
<br/>
I think there's a bad init from the nds launcher both on M3S and G6.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121112 - simonjhall - Fri Mar 09, 2007 1:39 am</h4>
    <div class="postbody"><span class="postbody">I have no idea about the palib support for the m3 simply/r4.
<br/>
From what I can guess from the weird results I get with my card is that if I don't manually clear the ipc struct the arm9 will block on the first call to touchreadXY (and maybe other functions). If you then touch the screen the program will run fine.
<br/>
<br/>
If I memset the IPC struct in the arm7 program everything's cool. This memset isn't necessary on any other card I've tried.
<br/>
<br/>
It's probably dldi related but I get corrupt reads from certain files on my microSD card in my M3. Dunno if it's a problem with my SD card, but it's pretty repeatable and this causes many sound files not to load successfully.
<br/>
<br/>
That said, I'd recommend the card. It's kinda annoying for programming though as you've got to go through the (albeit simple) menu every time you turn the machine on... If in doubt, get a gbamp!<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121144 - Tantrum - Fri Mar 09, 2007 2:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>simonjhall wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
From what I can guess from the weird results I get with my card is that if I don't manually clear the ipc struct the arm9 will block on the first call to touchreadXY (and maybe other functions). If you then touch the screen the program will run fine.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you!  This bug in my own homebrew has been, err, bugging me for a while now.  I also have a M3 DS Simply.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
