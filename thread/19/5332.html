<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Newb Question About PassMe - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS Flash Equipment > Newb Question About PassMe</h2>
<div id="posts">
<div class="post">
    <h4>#38810 - linus - Fri Apr 01, 2005 12:05 am</h4>
    <div class="postbody"><span class="postbody">*If this has already been covered and ive missed it im sorry plz redirect me*
<br/>
<br/>
Ok as I understand it the DS wont execute any instructions that arent encrypted, and the PassMe lets the real game to the encryption then executes its own command which tells the processor to execute the code in the GBA slot. If so is it possible to put more than just a jump instuction in there?
<br/>
<br/>
I guess its my understanding of encryption that is foggy. Is all the code (or executed commands sent to the processor) encrypted? Or is it more of a validation process when it starts up to see whether the game is a licensed one. If its the former how does the PassMe execute the jump command.
<br/>
<br/>
Thanks for any replies,
<br/>
<br/>
Linus</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38917 - linus - Sat Apr 02, 2005 12:22 am</h4>
    <div class="postbody"><span class="postbody">are people not answer because they cant be arsed or because its a stupid question?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38919 - outRider - Sat Apr 02, 2005 1:03 am</h4>
    <div class="postbody"><span class="postbody">When the DS starts a DS game it first reads the header from the card, which is unencrypted. After that, all further reads from the card are encrypted. The header contains, amongst other things, 2 addresses to entrypoints, one for the ARM9 and one for the ARM7. Normally both addresses are in the DS cart's address space. The passthroughs change the ARM7 address to somewhere in the GBA cart's address space. As far as the DS knows, it's executing the game that belongs to the header it read previously. Your code then interrupts the ARM9 (which started executing from the DS slot by now) so you can redirect it to the GBA cart as well.<br/>_________________<br/>outRider</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38920 - outRider - Sat Apr 02, 2005 1:07 am</h4>
    <div class="postbody"><span class="postbody">When the DS starts a DS game it first reads the header from the card, which is unencrypted. After that, all further reads from the card are encrypted. The header contains, amongst other things, 2 addresses to entrypoints, one for the ARM9 and one for the ARM7. Normally both addresses are in the DS cart's address space. The passthroughs change the ARM7 address to somewhere in the GBA cart's address space. Your code then interrupts the ARM9 (which started executing from the DS slot by now) so you can redirect it to the GBA cart as well.<br/>_________________<br/>outRider</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38925 - linus - Sat Apr 02, 2005 2:05 am</h4>
    <div class="postbody"><span class="postbody">cheers!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38947 - Steve++ - Sat Apr 02, 2005 8:39 am</h4>
    <div class="postbody"><span class="postbody">We'd all better start buying DSs before they block that in the BIOS (or by some other means).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38948 - darkfader - Sat Apr 02, 2005 9:21 am</h4>
    <div class="postbody"><span class="postbody">I think the startup screen is in firmware, so I bet it's possible for Nintendo to add a check for it. That will all be fixed once multiboot has been found out I hope.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38950 - linus - Sat Apr 02, 2005 10:48 am</h4>
    <div class="postbody"><span class="postbody">(this is a bit off topic but i dont think it merits a new thread)
<br/>
<br/>
I heard that the bios is writable but encrypted and that people have actually dumped it. What are the chances of actually being able to work out how it works and mod it or create replacement? 
<br/>
<br/>
From an architectual point of view how is encryption implemented on the DS, is it something the hardware does, or something the bios does, or something that i dont know about?
<br/>
<br/>
Cheers again,
<br/>
<br/>
Linus
<br/>
<br/>
ps anyone got a link to a forum or something that tells me more about multiboots (i dont like to have numerous newb question at the same time :) )</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38994 - assassda - Sun Apr 03, 2005 12:17 am</h4>
    <div class="postbody"><span class="postbody">@darkfader since you can now read write ds bios why not creat a custom bios that instead of checking header at all goes directly to gba flash card?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38995 - darkfader - Sun Apr 03, 2005 12:25 am</h4>
    <div class="postbody"><span class="postbody">You mean firmware :)
<br/>
We don't know how the encryption of firmware works... so it will probably take a while until we have a firmware replacement. Another thought is to erase the firmware and see what happens. Perhaps it skips the startup screen and runs PassMe programs immediately. There should be some way how Nintendo fills the firmware for the first time on a DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38998 - octopusfluff - Sun Apr 03, 2005 12:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darkfader wrote:</b></span></td> </tr> <tr> <td class="quote">We don't know how the encryption of firmware works... so it will probably take a while until we have a firmware replacement. Another thought is to erase the firmware and see what happens. Perhaps it skips the startup screen and runs PassMe programs immediately. There should be some way how Nintendo fills the firmware for the first time on a DS.</td> </tr></table><span class="postbody">
<br/>
<br/>
Adventures in brick-making! =&gt;
<br/>
<br/>
Actually, I'd expect they'd flash the chip prior to it being installed in the DS. That'd be the easiest way to do it.
<br/>
<br/>
My experience with similar devices indicates if you erase the firmware, you stand a good chance of never getting the device to do anything productive ever again (without pulling the chip and re-flashing it with the proper equipment). This might not be like the GBA; the firmware in the DS does an awful lot, and may well be necessary for normal operation.
<br/>
<br/>
There -are- some similar devices that have two seperate firmwares, one which is only used for loading the primary firmware.. But these generally are only present in devices where the end-user is expected to perform firmware updates such as the BIOS in a PC, or development-capable devices such as the Zaurus by Sharp.
<br/>
<br/>
I seriously doubt Nintendo had any plans of letting users do anything like this. I don't think they even intended for the firmware to get updated.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
