<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Using file on a flash cart.. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Flash Equipment > Using file on a flash cart..</h2>
<div id="posts">
<div class="post">
    <h4>#125411 - DS_LitE - Fri Apr 13, 2007 3:43 am</h4>
    <div class="postbody"><span class="postbody">Some of the homebrew that is avalible(DSFTP,LMP-ng ,some others)
<br/>
use other files, how do i include these files on my gba f2a 64mb flash
<br/>
cartrige?(e.g DSFTP uses a config file)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#125419 - dantheman - Fri Apr 13, 2007 4:31 am</h4>
    <div class="postbody"><span class="postbody">You'll want to build an FCSR image and append it to the original file to create a file that has its own built-in filesystem that homebrew can access through DLDI.
<br/>
<br/>
For the sake of not retyping long instructions again, I'll quote a post I made over at another site I cannot link to, with certain parts edited to reflect your situation (original post was for SNEmulDS):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">There's a method you can use for storing it on GBA flash carts using  something called FCSR (FlashCart SRAM) for it.  Basically, you create your own filesystem and add it to the DS binary.  It's a complicated affair, but it works.
<br/>
<br/>
Go to <a href="http://gpf.dcemu.co.uk/" target="_blank">http://gpf.dcemu.co.uk/</a> and look on the left hand side for fcsrimage.zip and fcsrDLDI.zip.  Extract both of those, then copy the dldi file over from the fcsfDLDI folder to the fcsrimage folder.  Move this working folder to a location that has no spaces in the filename, something like C:\fcsrimage
<br/>
<br/>
Now it gets tricky.  Get the DSFTP.nds file and prepend a loader to it to make it a .ds.gba one.  Use the following command in the command shell:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">copy /b ndsmall.bin + DSFTP.nds DSFTP.ds.gba</td> </tr></table><span class="postbody">
<br/>
<span style="font-weight: bold">NOTE TO DS_LitE:  you can just use the DSFTP.ds.gba file from the beginning and skip this step</span>
<br/>
<br/>
Then you need to padbin it.  Go to tepples's GBA page and download the GBFS distribution, copying the padbin.exe file from there into the working folder.  Type the following command:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">padbin.exe 512 DSFTP.ds.gba</td> </tr></table><span class="postbody">
<br/>
<br/>
Go to the "fcsr" subfolder, add a couple of random files (it won't work otherwise for some reason), then add a DATA directory and add your CONFIG folder and config files to it.  Go back to the main folder and type this command:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">build.bat image.img fcsr</td> </tr></table><span class="postbody">
<br/>
<br/>
Then combine the padbin'd .ds.gba file with the image you just created with
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">copy /b DSFTP.ds.gba + image.img final.ds.gba</td> </tr></table><span class="postbody">
<br/>
<br/>
All you need to do now is DLDI patch the final.ds.gba file.  Go to <a href="http://chishm.drunkencoders.com/DLDI" target="_blank">http://chishm.drunkencoders.com/DLDI</a> and download dlditool.exe and put it in your working folder.  Type:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">dlditool.exe fcsr.dldi final.ds.gba</td> </tr></table><span class="postbody">
<br/>
<br/>
Test the resulting file in No$GBA to ensure that it worked.  I haven't tested it on an actual GBA flash cart, but I would imagine that it would work.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I have personally used this method to get LMP-ng working in No$GBA.  It was slow and choppy due to my slow computer, but it recognized the songs and was able to play them back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#125474 - DS_LitE - Fri Apr 13, 2007 6:55 pm</h4>
    <div class="postbody"><span class="postbody">thnx worked great! but know im working on my own DSFTP like application.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
