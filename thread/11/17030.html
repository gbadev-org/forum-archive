<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Help needed documenting incremental GC routines + article - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Help Wanted > Help needed documenting incremental GC routines + article</h2>
<div id="posts">
<div class="post">
    <h4>#171887 - keldon - Thu Dec 31, 2009 2:52 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.mediafire.com/?1bqywzkzoyx" target="_blank">Download source code</a>
<br/>
<br/>
<span style="color: #cc0000"><span style="font-weight: bold">Edit</span>: I somehow uploaded the wrong demo file (a fix has been submitted)</span>
<br/>
<br/>
Hi, I wrote an incremental GC routine 18 months ago; I lost the documentation somehow and would like some help writing new documentation as well as creating an article on how to code garbage collection algorithms.
<br/>
<br/>
<span style="font-weight: bold">Code purpose</span>
<br/>
This can be used to add incremental garbage collection to your own scripting languages, or integrated into code for any structures that would be better handled by such a system.
<br/>
<br/>
<span style="font-weight: bold">Demo code</span>
<br/>
<br/>
I had some really nice demonstration code that used the GC system to build a number of structures and delete them in incremental steps, but that is unfortunately lost too. I will code them back in at some point, but for now the code is there. <span style="font-weight: bold">Edit</span>: I've uploaded one of the tests <a class="postlink" href="http://www.mediafire.com/?jdjom5zzzji" target="_blank">here</a>, but this was written before the update so may not be compatible with the more recent code. I'll check this all tomorrow.
<br/>
<br/>
<a class="postlink" href="http://www.mediafire.com/?1bqywzkzoyx" target="_blank">Download source code</a>
<br/>
 - <a class="postlink" href="http://www.mediafire.com/?jdjom5zzzji" target="_blank">Demo code</a> (needs integration)
<br/>
<br/>
In short it allows incremental garbage collection by using set partitions and locking mechanisms. The state of a reference is frozen at certain states in the GC in such a way that the GC can be stopped at any time without any complex traversing of the structures.
<br/>
<br/>
I haven't looked into it much, but I suspect a generational GC can be created from most of it's logic (or at least structural concept).
<br/>
<br/>
I've also included a few <span style="font-style: italic">basic</span> structures:
<br/>
 - list.cpp - list of objects
<br/>
 - integer.cpp - stores an integer
<br/>
 - fixed_map.cpp - maps 'x' keys
<br/>
 - map.cpp - maps keys to 
<br/>
 - var.cpp - flexible variable object
<br/>
 - object.cpp - base class
<br/>
<br/>
Unfinished structures:
<br/>
 - fixed_list.cpp
<br/>
<br/>
---
<br/>
I have uploaded it in this unfinished state for the following reasons:
<br/>
 - to make me accountable to following it up; making things public is good, it's far too easy to stop work on something nobody knows about
<br/>
 - get the ball rolling
<br/>
 - even without the documentation, I haven't seen any code on the net like this so it should be helpful
<br/>
---
<br/>
<br/>
<span style="font-weight: bold">Other notes</span>
<br/>
Root handles aren't deleted by the garbage collector, neither are any objects that are owned by the root. These are the important handles!
<br/>
<br/>
<span style="font-weight: bold">Edit</span>: Oh dear, I nearly deleted this post with Ctrl+W ... saved by Chrome ... phew =)</span><span class="gensmall"><br/><br/>Last edited by keldon on Fri Jan 01, 2010 8:48 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#171905 - keldon - Fri Jan 01, 2010 1:32 pm</h4>
    <div class="postbody"><span class="postbody">p.s. I don't mean "writing the <span style="font-style: italic">source code</span> documentation for me" but rather with me in the sense that my aim is to show people how it works and how to write their own. My "documentation" is outside of the source files on paper. I'll be updating the source code documentation myself, but I want to explain it well.
<br/>
<br/>
This is open to anyone who is interested; I could do it but I'd like another head on this for the sake of better communication. <span style="font-weight: bold">Mostly I'd like to know what someone else thinks</span> when looking at the documentation and if they can understand how to write their own.
<br/>
<br/>
Oh, and as far as I tested it; it works pretty well. Do your "stuff" and just tell it how many GC steps you want it to process. I'll be adding a demo today =)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171914 - keldon - Fri Jan 01, 2010 8:50 pm</h4>
    <div class="postbody"><span class="postbody">I've uploaded the updated code with a <span style="font-weight: bold">demo</span>, compile <span style="font-weight: bold">error fixes</span> and <span style="font-weight: bold">filename</span> changes from .h to .hpp.
<br/>
<br/>
<a class="postlink" href="http://www.mediafire.com/?b4mvjgjtrmu" target="_blank">Download v0002 source code</a>
<br/>
<br/>
The file is a VS2008 Express project with an executable inside.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172015 - vuurrobin - Fri Jan 08, 2010 11:11 pm</h4>
    <div class="postbody"><span class="postbody">so if I understand correctly, you want help with documenting the GC algorithm so people can implement it themself?
<br/>
<br/>
<br/>
I'm not great at documenting algorithms, but if you need help with proofreading or something (and I have time), then I would be willing to help.
<br/>
<br/>
I'll also try out the source and demo you posted when I have time.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172032 - keldon - Sun Jan 10, 2010 5:56 pm</h4>
    <div class="postbody"><span class="postbody">Yes, I want some help in explaining how the GC system operates (on a whole) so that people will know how to design their own GC - in the form article (so less need for help documenting, more help on the article). Any help will be appreciated, even if it is a list of questions - then I will have a starting point.
<br/>
<br/>
Anyone who is curious about GC and developing scripting languages or virtual machines can benefit from an explanation.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
