<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Wrapping functions and performance - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Wrapping functions and performance</h2>
<div id="posts">
<div class="post">
    <h4>#170494 - Rajveer - Tue Sep 29, 2009 5:21 pm</h4>
    <div class="postbody"><span class="postbody">Does wrapping an existing function and declaring it as inline have any performance hit? E.g. In the following example, would w_actualFunction be any slower than calling actualFunction itself? I'm assuming not as the compiler would replace any call to w_actualFunction with actualFunction as the first is inlined, but is that it or is there anything behind the scenes that may hinder performance?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">inline int w_actualFunction(int variable)
<br/>
{
<br/>
actualFunction(variable);
<br/>
}
<br/>
<br/>
int actualFunction(int variable)
<br/>
{
<br/>
...
<br/>
..
<br/>
...
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I want to wrap all libnds GL functions so I can compile my code for Windows or the DS, with the DS wrappers simply calling the actual libnds function and the PC wrappers using "proper" OpenGL or doing nothing at all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170496 - Miked0801 - Tue Sep 29, 2009 6:22 pm</h4>
    <div class="postbody"><span class="postbody">I see no classes and as long as the wrapper does nothing and the compiler decides to listen to your inline directive, then it should be fine.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170513 - Rajveer - Wed Sep 30, 2009 12:06 am</h4>
    <div class="postbody"><span class="postbody">Thanks, yeah that's pretty much all the wrapper on the DS side will be. I've read on a forum post that using -finline-functions will force inline-functions to be inlined?
<br/>
<br/>
On another note I've been reading up on inline functions, particularly in C99, and read that by using static inline you don't need to provide an extern definition of the inlined function in a separate source file (which you don't need to do in C++ anyways). Is this why all inlined functions in libnds are static inlined?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170533 - sajiimori - Thu Oct 01, 2009 2:32 am</h4>
    <div class="postbody"><span class="postbody">As far as I know, the only difference between "inline" and "static inline" is that for non-static inlines, the compiler will additionally generate a non-inlined version of the function, which will be used anytime the inline version can't be used for any reason.
<br/>
<br/>
At link time, if it turns out that the non-inlined version is never used, then it would normally be dead stripped... but dead stripping is not GCC's strong suit, so it's worth checking the memory map to see if it contains redundant functions.
<br/>
<br/>
Anyway, a lot of the specifics are implementation dependent.  I always declare my inline non-member functions as static, but maybe on some implementations that'll result in multiple copies of the non-inlined function -- one copy for each module where it fails to inline for whatever reason.
<br/>
<br/>
My only other tip would be to never assume that inlining will work 100% of the time.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170698 - Rajveer - Tue Oct 13, 2009 12:40 am</h4>
    <div class="postbody"><span class="postbody">Bit late, but thanks for that informative explanation :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178300 - sajjad123 - Sun Dec 14, 2014 4:49 am</h4>
    <div class="postbody"><span class="postbody">As far as I know, the only difference between "inline" and "static inline" is that for non-static inlines, the compiler will additionally generate a non-inlined version of the function, which will be used anytime the inline version can't be used for any reason.
<br/>
<br/>
___________________________
<br/>
Are you interested in <a class="postlink" href="http://www.braindumps.com/350-029.htm" target="_blank">350-029  - testking</a> Get our self paced testking <a class="postlink" href="http://www.braindumps.com/642-437.htm" target="_blank">642-437  - braindumps - questions</a> and <a class="postlink" href="http://en.wikipedia.org/wiki/Florida_Memorial_University" target="_blank">Florida Memorial University</a> study packages to pass your <a class="postlink" href="https://www.facebook.com/keiseruniv" target="_blank">Keiser University</a> without any difficulty in <a class="postlink" href="http://www.youtube.com/user/northwooduniversity" target="_blank">Northwood University</a>.</span><span class="gensmall"><br/><br/>Last edited by sajjad123 on Tue Dec 23, 2014 8:45 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#178301 - Dwedit - Sun Dec 14, 2014 5:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajjad123 wrote:</b></span></td> </tr> <tr> <td class="quote">As far as I know, the only difference between "inline" and "static inline" is that for non-static inlines, the compiler will additionally generate a non-inlined version of the function, which will be used anytime the inline version can't be used for any reason.</td> </tr></table><span class="postbody">
<br/>
Necrobump spam repeating a previous post<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178302 - Rajveer - Mon Dec 15, 2014 10:59 am</h4>
    <div class="postbody"><span class="postbody">Oh man these bots are just getting lazy now XD</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
