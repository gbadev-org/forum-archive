<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>iprintf and reference issue - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > iprintf and reference issue</h2>
<div id="posts">
<div class="post">
    <h4>#144937 - Shay - Fri Nov 09, 2007 3:42 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I have a very weird problem.
<br/>
<br/>
I have a method that get a value in an XML file : 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">sscanf(xEffect.getChildNode("mpmodif").getAttribute("value"), "%d", &amp;mpModif);</td> </tr></table><span class="postbody">
<br/>
<br/>
With the values I have get, I instanciate a new Effect :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Effect *test = new Effect(durationTime, probabilities, delay, target0, hpModif, mpModif, intModif, agiModif, strModif, defModif, mdefModif, aspdModif, msModif, msModifPer, atkModif, status);</td> </tr></table><span class="postbody">
<br/>
<br/>
But this instanciation seems not to be effective.
<br/>
Indeed, I print values :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">iprintf("\x1b[2;0H test : %d, %d\n", test-&gt;GetMpModif(), mpModif);</td> </tr></table><span class="postbody">
<br/>
The, the result is 0,-50.
<br/>
<br/>
Here is the Effect constructor :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Effect::Effect(u16 durationTime, u8 probabilities, u8 delay, u8 target, int hpModif, int mpModif, int intModif, int agiModif, int strModif, int defModif, int mdefModif, int aspdModif, int msModif, int msModifPer, int atkModif, Status status) :
<br/>
  Start_(0), Stop_(0), Run_(0),   durationTime_(durationTime), probabilities_(probabilities), delay_(delay), target_(target),   hpModif_(hpModif), mpModif_(mpModif), intModif_(intModif), agiModif_(agiModif), strModif_(strModif), defModif_(defModif), mdefModif_(mdefModif), aspdModif_(aspdModif), msModif_(msModif), msModifPer_(msModifPer), atkModif_(atkModif), status_(status), lastTick_(0), started_(false)
<br/>
{
<br/>
  [...] // No relationship with the subject
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
With this, no way it works.
<br/>
<br/>
I tried to initialize fields in the ctor body and to iprintf the mpModif_ value. When I do that BETWEEN the "//**********" (see below), it works fine, and I got the good values (-50, -50). Otherwise, it doesnt work. I show you :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Effect::Effect(u16 durationTime, u8 probabilities, u8 delay, u8 target, int hpModif, int mpModif, int intModif, int agiModif, int strModif, int defModif, int mdefModif, int aspdModif, int msModif, int msModifPer, int atkModif, Status status)
<br/>
{
<br/>
        //****************
<br/>
   Start_ = 0;
<br/>
   Stop_ = 0;
<br/>
   Run_ = 0;
<br/>
   durationTime_ = durationTime;
<br/>
   probabilities_ = probabilities;
<br/>
   delay_ = delay;
<br/>
   target_ = target;
<br/>
   hpModif_ = hpModif;
<br/>
   mpModif_ = mpModif;
<br/>
   intModif_ = intModif;
<br/>
   agiModif_ = agiModif;
<br/>
   strModif_ = strModif;
<br/>
   defModif_ = defModif;
<br/>
   mdefModif_ = mdefModif;
<br/>
   aspdModif_ = aspdModif;
<br/>
   msModif_ = msModif;
<br/>
   msModifPer_ = msModifPer;
<br/>
   atkModif_ = atkModif;
<br/>
   //****************
<br/>
   status_ = status;
<br/>
   lastTick_ = 0;
<br/>
   started_ = false;
<br/>
<br/>
        [...] // No relationship with the subject
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you very much for your help I have to finish this game very soon !
<br/>
I will keep looking here for the next days, please ask me details if you have any idea.
<br/>
<br/>
++</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
