<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Scope variables - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Scope variables</h2>
<div id="posts">
<div class="post">
    <h4>#140730 - keldon - Wed Sep 19, 2007 4:19 pm</h4>
    <div class="postbody"><span class="postbody">If your compiler supports it, what are your thoughts on scope variables (as shown below). And if you had to choose one approach to use for the rest of your life (if the compiler supports it) then which one and why?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   for (...)
<br/>
   {
<br/>
      int scope_var;
<br/>
      ...
<br/>
   }
<br/>
</td> </tr></table><span class="postbody">
<br/>
vs
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   int scope_var;
<br/>
   for (...)
<br/>
   {
<br/>
      ...
<br/>
   }
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140731 - gauauu - Wed Sep 19, 2007 4:43 pm</h4>
    <div class="postbody"><span class="postbody">I would always put variables in the most limiting scope possible.   The more limited the scope, the less likely you are to make a scope-related mistake.  Is there some advantage to putting it in the larger scope if you don't intend to use it in that larger scope?
<br/>
<br/>
There's probably some exception to my "always" but I can't think of one now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140732 - kusma - Wed Sep 19, 2007 4:45 pm</h4>
    <div class="postbody"><span class="postbody">The first one (this is guaranteed to be supported by the C standard AFAIK), since it limits the availability of the symbol, so you only get it where you actually plan to use it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140733 - keldon - Wed Sep 19, 2007 4:46 pm</h4>
    <div class="postbody"><span class="postbody">Well I generally do the same, but there's an exception to every rule - unless this is the exception to there being an exception &gt;_&gt;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140737 - sajiimori - Wed Sep 19, 2007 5:24 pm</h4>
    <div class="postbody"><span class="postbody">I'm not aware of any exceptions to this rule.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140798 - gmiller - Wed Sep 19, 2007 10:20 pm</h4>
    <div class="postbody"><span class="postbody">The first one must create the variable for the loop to execute and remove it when the loop exits, where as the 2nd one the variable is already in existence when the loop starts.  Depending on the compiler optimization the cration could be as simple as allocating a register to the variable or as complex as moving the stack pointer to hold the data.  The creation of the variable on the stack requires processing that might be more than you want if the loop is in code that gets called many times.  Optimization prior to testing in this case could be a waste of time.  It is easy to make assumptions about what is slow or fast in a vacuum but where and how the code is used usually has more influence.  
<br/>
<br/>
One of my co-workers who now teaches optimization wrote an article on this:
<br/>
<br/>
<a href="http://www.gamasutra.com/view/feature/1879/the_top_10_myths_of_video_game_.php" target="_blank">http://www.gamasutra.com/view/feature/1879/the_top_10_myths_of_video_game_.php</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
