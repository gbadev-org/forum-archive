<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Will this test if my number is an odd number? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Will this test if my number is an odd number?</h2>
<div id="posts">
<div class="post">
    <h4>#14561 - Geoff - Thu Jan 08, 2004 6:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>source wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
#define BIT0          1
<br/>
<br/>
if(counter &amp; BIT0) {	    //tests if the counter is an odd number
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
'counter' is an unsigned integer that increments once every frame.  Is this doing what I think it's doing (simply testing if counter is odd) or is it doing something else too?  Like changing counter?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14563 - Lord Graga - Thu Jan 08, 2004 7:50 pm</h4>
    <div class="postbody"><span class="postbody">yes, it checks if it's odd.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14564 - LOst? - Thu Jan 08, 2004 8:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Geoff wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>source wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
#define BIT0          1
<br/>
<br/>
if(counter &amp; BIT0) {	    //tests if the counter is an odd number
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
'counter' is an unsigned integer that increments once every frame.  Is this doing what I think it's doing (simply testing if counter is odd) or is it doing something else too?  Like changing counter?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
You forget to increament it each time:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">	int counter;
<br/>
	if (++counter &amp; 1);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14570 - sajiimori - Thu Jan 08, 2004 8:24 pm</h4>
    <div class="postbody"><span class="postbody">lol, he didn't post his entire source you know!  You may as well tell him that he forgot to write a main().</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14595 - Geoff - Fri Jan 09, 2004 2:21 am</h4>
    <div class="postbody"><span class="postbody">Awesome.  I used to be very sloppy and test if(counter%2==1) but I've since learned that that's slowwwww.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14596 - poslundc - Fri Jan 09, 2004 2:40 am</h4>
    <div class="postbody"><span class="postbody">You can replace "% n" with "&amp; (n-1)" whenever n is an even power of two.
<br/>
<br/>
This is extremely important in GBA programming, since as you observed there is no hardware divide, which means the modulus operator (%) is emulated in software and is slow as heck. But the bitwise-and operator (&amp;) requires only one ALU instruction.
<br/>
<br/>
It also makes it extremely convenient that so many aspects of the GBA (sprite/tile widths, background sizes, palette sizes, etc.) are even powers of two.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14599 - LOst? - Fri Jan 09, 2004 3:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Geoff wrote:</b></span></td> </tr> <tr> <td class="quote">Awesome.  I used to be very sloppy and test if(counter%2==1) but I've since learned that that's slowwwww.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yea, one thing for sure. Don't use modulo with the GBA :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14608 - tom - Fri Jan 09, 2004 10:19 am</h4>
    <div class="postbody"><span class="postbody">btw, gcc is smart enough to implement "% n" by "&amp; (n-1)" if n is a power of two.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
