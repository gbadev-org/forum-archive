<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>static member array - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > static member array</h2>
<div id="posts">
<div class="post">
    <h4>#9011 - hnager - Sat Jul 26, 2003 3:20 pm</h4>
    <div class="postbody"><span class="postbody">Hey all - I'm having trouble declaring/defining a static member array. Instead oif having every instance of the class have it's own copy of the array I wanted to have it static in the class - I don't have any problems declaring/defining a single static variable:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class Ant : public Sprite{
<br/>
<br/>
public:
<br/>
   Ant(){};
<br/>
   ~Ant(){}
<br/>
<br/>
...
<br/>
<br/>
private:
<br/>
   static int ant_variable;
<br/>
<br/>
<br/>
};
<br/>
<br/>
int Ant::ant_variable = 0;</td> </tr></table><span class="postbody">
<br/>
That should work, right? Now how about an array?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">static int ant_personality[10];</td> </tr></table><span class="postbody">
<br/>
<br/>
If I take a similar approach to a single variable I get the following error when I compile:
<br/>
<br/>
ant.h:153: redeclaration of `int Ant::ant_personality[10]'
<br/>
ant.h:39: `int Ant::ant_personality[10]' previously declared here
<br/>
<br/>
As far as I know, I can't define the array int he class declaration, how else would it be done? THanks again, Howard</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9015 - Touchstone - Sat Jul 26, 2003 4:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If I take a similar approach</td> </tr></table><span class="postbody">
<br/>
<br/>
You know, it would be easier if you sent the erroneous code. :)
<br/>
<br/>
Anyhow, this is how to do it:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class CMyClass
<br/>
{
<br/>
static int m_Array[];
<br/>
};
<br/>
<br/>
int CMyClass::m_Array[10];</td> </tr></table><span class="postbody"><br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9016 - hnager - Sat Jul 26, 2003 4:36 pm</h4>
    <div class="postbody"><span class="postbody">I didn't want to look bad - sending broken code and all ;) Anyhow - thanks for the response, how would I then go about adding the values to that array only once? (BTW - this isn't a singleton). Do I need to actually have to add each element by hand:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ant_personality[0] = ANT_MARCH;
<br/>
ant_personality[1] = ANT_MARCH;
<br/>
<br/>
...</td> </tr></table><span class="postbody">
<br/>
<br/>
Or can I use the method that I would have used had this not been a memebr array:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int Ant::ant_personality[10] = { ANT_MARCH, ANT_MARCH, ...};</td> </tr></table><span class="postbody">
<br/>
<br/>
That didn't seem to work...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9019 - Sweex - Sat Jul 26, 2003 4:53 pm</h4>
    <div class="postbody"><span class="postbody">Try leaving the 10 out... so just like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int Ant::ant_personality[] = { ANT_MARCH, ANT_MARCH, ...};
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Just might work...<br/>_________________<br/>If everything fails, read the manual: If even that fails, post on forum!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9027 - hnager - Sat Jul 26, 2003 6:59 pm</h4>
    <div class="postbody"><span class="postbody">Tried that actually - I get:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ant.h:153: redeclaration of `int Ant::ant_personality[]'
<br/>
ant.h:39: `int Ant::ant_personality[10]' previously declared here</td> </tr></table><span class="postbody">
<br/>
<br/>
I thought that would have worked aswell...a workaround I can think of would be to use a static flag and have the first instance of the class initiate the array - but that seems like aa hack.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9036 - hnager - Sat Jul 26, 2003 10:06 pm</h4>
    <div class="postbody"><span class="postbody">Amazing what a errors a missing '}' will produce - oops/
<br/>
<br/>
Anyhow, this works well:  
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int Ant::ant_personality[10] = { ANT_MARCH, ANT_MARCH, ...};</td> </tr></table><span class="postbody">
<br/>
thanks.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
