<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>include if exists? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > include if exists?</h2>
<div id="posts">
<div class="post">
    <h4>#78868 - gauauu - Mon Apr 10, 2006 8:47 am</h4>
    <div class="postbody"><span class="postbody">Is there any sort of extension or trick you can do with gcc's preprocessor to have some sort of #include that includes the file if it exists, and just ignores the line if the file doesn't exist?
<br/>
<br/>
If not, I guess I can write my own custom pre-preprocessor to do it.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78880 - gauauu - Mon Apr 10, 2006 10:47 am</h4>
    <div class="postbody"><span class="postbody">I guess one way to do it would be to go ahead and unconditionally include the file, but have a makefile dependancy and target that will create an empty text file if none exists....
<br/>
<br/>
(so it ends up using more than just the C preprocessor, but is faster and cleaner than trying to make a script to pre-preprocess my files)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78884 - sgeos - Mon Apr 10, 2006 11:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define INCLUDE 1
<br/>
<br/>
#if INCLUDE
<br/>
        #include &lt;stdio.h&gt;
<br/>
#endif
<br/>
<br/>
int main(void)
<br/>
{
<br/>
        #if INCLUDE
<br/>
                printf("Hello World!\n");
<br/>
        #endif
<br/>
        return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
You probably want to use #if instead of #ifdef.
<br/>
<br/>
Preprocessor constants can be supplied from the command line.  You might want to have a DEBUG constant that changes program behavior.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78908 - gauauu - Mon Apr 10, 2006 3:24 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, although actually, doing the makefile trick of creating the file blank if it doesn't exist is closer to what I need.
<br/>
<br/>
In case anyone is curious, basically, I have a config file that has all sorts of basic stuff, including which room is the start room for my game.  Although for testing, I need to change the start room a lot.  Which gets annoying, because CVS keeps seeing that the config file is modified, but I NEVER want to check these temporary config changes in.  So I thought it'd be a lot easier if I could have an extra file that I could put temporary config changes in that wouldn't be in CVS.  
<br/>
<br/>
Only problem with that is that I want my project to be able to build with just a single cvs checkout.  So this works perfectly....if I check out and build, the dummy temp config file is created.  I can change that to my heart's content, and never have to mess with rolling it back or checking it in.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78919 - waruwaru - Mon Apr 10, 2006 4:35 pm</h4>
    <div class="postbody"><span class="postbody">How about just #define the room number, and pass the #define in in your makefile/build-script?  Then when you need to start in a different room just change your script or compile with a different parameter?  Maybe even pass in the name of your config file, so you can just invoke the build with different config files?<br/>_________________<br/><a class="postlink" href="http://www.DSLua.com" target="_blank">DSLua - a scripting language for your DS!</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78921 - KayH - Mon Apr 10, 2006 4:35 pm</h4>
    <div class="postbody"><span class="postbody">You can use an ".cvsignore" file (setting) in your folder that do the trick ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79004 - gauauu - Tue Apr 11, 2006 2:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>waruwaru wrote:</b></span></td> </tr> <tr> <td class="quote">How about just #define the room number, and pass the #define in in your makefile/build-script?  Then when you need to start in a different room just change your script or compile with a different parameter?  Maybe even pass in the name of your config file, so you can just invoke the build with different config files?</td> </tr></table><span class="postbody">
<br/>
<br/>
The makefile and build scripts are also stored in cvs.  I don't my frequently changed configuration stuff to be in a file controlled by cvs.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">You can use an ".cvsignore" file (setting) in your folder that do the trick ;-)</td> </tr></table><span class="postbody">
<br/>
Now that I have a separate configuration file, that's what I'm doing.  The original problem was figuring out a way to include that ignored file, but not having things break if I did a fresh checkout and it didn't exist.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
