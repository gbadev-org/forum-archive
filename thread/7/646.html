<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Particles question... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Particles question...</h2>
<div id="posts">
<div class="post">
    <h4>#3314 - Jer1400 - Sat Feb 22, 2003 6:06 pm</h4>
    <div class="postbody"><span class="postbody">Does anyone know how to sort of "shatter" the screen into particles? Also, does anyone have a random number program? One more thing...a simple function that can just put plain white text on the screen. Okay, that's all from me. These would all be in C++.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3316 - darkcloud - Sat Feb 22, 2003 6:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jer1400 wrote:</b></span></td> </tr> <tr> <td class="quote">does anyone have a random number program?</td> </tr></table><span class="postbody">
<br/>
The Mersenne Twister generator seems to work pretty well and fast.
<br/>
You can download a .C file from this site: <a class="postlink" href="http://www.math.keio.ac.jp/~matumoto/emt.html" target="_blank">http://www.math.keio.ac.jp/~matumoto/emt.html</a>
<br/>
<br/>
It's near the bottom.  Just include it in your project and you have a nice little genrand() function.<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3344 - tepples - Sun Feb 23, 2003 4:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darkcloud wrote:</b></span></td> </tr> <tr> <td class="quote">The Mersenne Twister generator seems to work pretty well and fast.</td> </tr></table><span class="postbody">
<br/>
Yeah, until you generate the 623rd number.  The main loop of a real-time application such as a GBA game has to fit within a certain amount of time (in the GBA's case, 280896 cycles) during the <span style="font-style: italic">worst case</span> path.  The MT implementation has to generate a block of 623 random numbers all at the same time, which could cause your program to overflow frame time irregularly.  I'd suggest using the good old linear congruential generator, which runs in constant time, and discarding the low-order bits that aren't very random:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">unsigned int seed;
<br/>
<br/>
unsigned int ayn()
<br/>
{
<br/>
  seed = 69069 * seed + 1;
<br/>
  return seed &gt;&gt; 16;
<br/>
}</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3347 - Jer1400 - Sun Feb 23, 2003 6:27 am</h4>
    <div class="postbody"><span class="postbody">nm about the random function and the fading. I found out earlier about hardware fading and the rand()% command in C++. That shatter effect still puzzles me, though. So if anyone could figure that out it would be very much appriciated.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3349 - Daikath - Sun Feb 23, 2003 7:00 am</h4>
    <div class="postbody"><span class="postbody">Any hints on how to do a particle effect on one sprite? A effect wich makes the sprite look like he is turned to dust or something (with then the dust bits flying accros the screen).<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3373 - CoolMan - Sun Feb 23, 2003 7:00 pm</h4>
    <div class="postbody"><span class="postbody">Off of the top of my head...
<br/>
<br/>
What about dividing the screen (or sprite) into multiple sprites that have transparent, jagged edges. Then shooting them scross the screen in a random manner? Would take some thought to actually implement it though...<br/>_________________<br/>Moron! You don't herd chickens with a shotgun!
<br/>
<br/>
--CoolMan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3399 - Jer1400 - Mon Feb 24, 2003 1:30 am</h4>
    <div class="postbody"><span class="postbody">Hmm...you know, I just though of a way to do it using cosh(), rand()%, and the video buffer. I hope it works....<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3430 - Daikath - Mon Feb 24, 2003 5:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>CoolMan wrote:</b></span></td> </tr> <tr> <td class="quote">Off of the top of my head...
<br/>
<br/>
What about dividing the screen (or sprite) into multiple sprites that have transparent, jagged edges. Then shooting them scross the screen in a random manner? Would take some thought to actually implement it though...</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks though :) Gonna try that later.<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3442 - mantrid - Tue Feb 25, 2003 1:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
unsigned int seed; 
<br/>
<br/>
unsigned int ayn() 
<br/>
{ 
<br/>
  seed = 69069 * seed + 1; 
<br/>
  return seed &gt;&gt; 16; 
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Hey tepples, 
<br/>
<br/>
Where did you learn all those big words? :-) I know random number generation can be tricky if you want statistically flat numbers. 
<br/>
<br/>
What initial seed might we use to get good results - brearing in mind I want to reproduce the same results later.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3449 - tepples - Tue Feb 25, 2003 4:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mantrid wrote:</b></span></td> </tr> <tr> <td class="quote">Where did you learn all those big words?</td> </tr></table><span class="postbody">
<br/>
From reading web pages about real-time apps and PRNGs and from a <a class="postlink" href="http://www.cs.rose-hulman.edu/" target="_blank">college education in computer science</a>, which I'll complete in two days.  The "ayn()" was a dig at Ayn Rand.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I know random number generation can be tricky if you want statistically flat numbers.</td> </tr></table><span class="postbody">
<br/>
Which is why I suggested dropping the most predictable (i.e. lowest order) bits.  The LCG won't generate random numbers that are secure enough for crypto, but on the GBA, you're probably not doing crypto; you're doing an interactive simulation, and most players won't be able to distinguish tiny flaws in your PRNG's statistical flatness.  In fact, the MT implementation uses exactly the LCG I quoted (called the <a class="postlink" href="http://random.mat.sbg.ac.at/~charly/server/node3.html" target="_blank">modified Super-Duper LCG</a>) to expand the initial seed.
<br/>
<br/>
However, that page seems to claim that the BCPL library's LCG(2^32, 2147001325, 715136305, 0) gives a flatter sequence.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">What initial seed might we use to get good results</td> </tr></table><span class="postbody">
<br/>
Try 0xC90FDAA2, which is 2^30*Pi, or good old 0xDEADBEEF.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
