<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>int64 with devkitARM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > int64 with devkitARM</h2>
<div id="posts">
<div class="post">
    <h4>#121606 - KayH - Tue Mar 13, 2007 1:18 pm</h4>
    <div class="postbody"><span class="postbody">I tried to use "unsigned long long" (u64). The definition of the variable was accepted, but the compilers error message tells me that the value is to big for a "long" integer (note: not "long long"). That means there is no u64 implemented, right? This is clear because the GBA is a 32bit sytem, but maybe the 64bit are emulated somehow.
<br/>
I use instead a struct with two u32 (a high and a low part) and handle it myself.
<br/>
<br/>
How do you handle u64?
<br/>
<br/>
Thanks for your comments!
<br/>
KaY</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121623 - tepples - Tue Mar 13, 2007 4:04 pm</h4>
    <div class="postbody"><span class="postbody">When initializing a variable from a literal number, try putting "LL" (signed) or "ULL" (unsigned) after the number. For instance:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">unsigned long long theNum = 123456789123456789ULL;
<br/>
long long otherNum = -543215432154321LL;</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121654 - poslundc - Tue Mar 13, 2007 8:07 pm</h4>
    <div class="postbody"><span class="postbody">Long longs have kind of a counter-intuitive behaviour in most compilers, it seems, where the binding to the type is very weak and the compiler will do everything it can to promote values <span style="font-style: italic">away</span> from it and back down to a regular int. As a result, you need to keep typecasting back to long long with 64-bit arithmetic far more frequently in order to maintain the precision.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121658 - Ant6n - Tue Mar 13, 2007 8:30 pm</h4>
    <div class="postbody"><span class="postbody">troublemaker .. gets demoted</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121920 - KayH - Thu Mar 15, 2007 6:39 pm</h4>
    <div class="postbody"><span class="postbody">Thank you for the input! Indeed it works with the "ULL", "LL" extension of the value. I was aware about "UL" and "L" extension, but this was outside my mind. ;-)
<br/>
<br/>
I hoped to simplify (and maybe to speed up) my code with the exchange from two u32 to one u64 variable. But now it seems to make more trouble on the long term. Although it work as expected, I decided to stay on my current solution.
<br/>
<br/>
Again thank you for your comments!
<br/>
KaY</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121973 - Ant6n - Fri Mar 16, 2007 1:54 am</h4>
    <div class="postbody"><span class="postbody">it makes most sense to store data in chunks that are considered to be a 'word' on the machine you are using. since gba/ds are 32 bit, they will operate on 32bit. so if you give it a 64 bit value, the compiler will internally expand it to be 32bit operations (only exception - multiplication, but apparently only in arm).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122018 - KayH - Fri Mar 16, 2007 1:16 pm</h4>
    <div class="postbody"><span class="postbody">You are right! I know this too.
<br/>
But there were two ideas behind to try it out:
<br/>
1) the compiler/lib would probably do the job like me or even better, then the game would not suffer but hopefully have a little benefit in speed
<br/>
2) this was the most important thing here: the sourcecode would be a bit better two read.
<br/>
Of course the result would be nearly identical. I haven't assumed to gain big benefit.
<br/>
<br/>
As already said: it was only a try and it failed. Thanks to the helpful comments given above.
<br/>
(That's why I love this forum: one is able to learn alot and discuss with friendly and valuable people mostly without attitudes!)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
