<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Need help with custom arm7 linker script - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Need help with custom arm7 linker script</h2>
<div id="posts">
<div class="post">
    <h4>#162363 - jimis - Mon Sep 01, 2008 9:13 am</h4>
    <div class="postbody"><span class="postbody">How can I set my project to use a custom linker script?
<br/>
From what I have learned so far I need to change the linker parameters. I created a file named customds_arm7.specs
<br/>
<br/>
----Original   "ds_arm7.specs"
<br/>
---------------------------------------------------------------
<br/>
%rename link                old_link
<br/>
<br/>
*link:
<br/>
%(old_link) -T ds_arm7.ld%s
<br/>
<br/>
*startfile:
<br/>
ds_arm7_crt0%O%s crti%O%s crtbegin%O%s
<br/>
----------------------------------------------------------------
<br/>
<br/>
----Custom file "customds_arm7.specs"
<br/>
--------------------------------------------------------------------
<br/>
%rename link                old_link
<br/>
<br/>
*link:
<br/>
%(old_link) -T custom_arm7.ld%s
<br/>
<br/>
*startfile:
<br/>
ds_arm7_crt0%O%s crti%O%s crtbegin%O%s
<br/>
---------------------------------------------------------------------
<br/>
<br/>
All i did was to replace -T ds_arm7.ld%s with -T custom_arm7.ld%s
<br/>
(the custom_arm7.ld is a copy of the original ds_arm7.ld)
<br/>
In the makefile in the linker parameters i wrote -specs=customds_arm7.specs and i don't get any errors.
<br/>
Is this method correct?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162384 - jimis - Mon Sep 01, 2008 6:05 pm</h4>
    <div class="postbody"><span class="postbody">No need to answer. I solved my problem.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162387 - gauauu - Mon Sep 01, 2008 7:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jimis wrote:</b></span></td> </tr> <tr> <td class="quote">No need to answer. I solved my problem.</td> </tr></table><span class="postbody">
<br/>
<br/>
Care to share your solution?  It's always nice when people share the solution, so future people with the same problem can learn....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162404 - jimis - Tue Sep 02, 2008 8:29 am</h4>
    <div class="postbody"><span class="postbody">Of cource. What i did above was correct.
<br/>
I made a custom arm7 linker script to copy arm7 binary at 0x03800000 in order to use shared wram for communication between the two processors.
<br/>
My game crushed constantly until I added to ndstool line "-r7 0x3800000 -e7 0x3800000". I would have never realised that error but fortunatelly for me I got an answer in another  <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=15989" target="_blank">post</a>.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
