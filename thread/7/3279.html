<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Need info on C optimizing - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Need info on C optimizing</h2>
<div id="posts">
<div class="post">
    <h4>#19613 - DiscoStew - Thu Apr 22, 2004 9:47 pm</h4>
    <div class="postbody"><span class="postbody">Does anyone know of a website that deals with getting C code optimized for speed, or perhaps can tell me some efficient ways of optimizing C code?
<br/>
I plan on releasing a demo sometime in the future of my sprite handler, of which I will not devulge any details yet.
<br/>
I've optimized the code with what I knew, and I even placed it into IWRAM, but it is still not as fast as I would like it to be (31 to 41 scanlines for executing code in 3 different, but required, loops 28 times each, ugh!). I'm not quite ready to deal with Assembly yet since I don't know it, though I would guess that that would make a big difference.
<br/>
<br/>
If it would help, the following is what is being used a lot...
<br/>
---Pointers to structs in both EWRAM and ROM
<br/>
---Fixed Point Multiplying between 2 variables (no constants)
<br/>
---Trigonometry, and angles outside of 360 degrees (0-359)
<br/>
---Sqrt (for trig hypotenuse)
<br/>
---Continual scanning by index in arrays
<br/>
---for loops in the 3 main loops
<br/>
<br/>
Anything that would help would be greatly appreciated, even specific compiler options to make code faster, since all I use is the GBA Project AppWizard. Optimized Arctan2, Sqrt, and fixed-point Division functions would help. My ArcTan2 function uses the BIOS (for the moment), but my Sqrt and fixed-point Division functions are hand-coded. I'll show them if someone wants me to, and maybe someone could help me make them faster. thx<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"><br/><br/>Last edited by DiscoStew on Thu Apr 22, 2004 9:54 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#19615 - alek - Thu Apr 22, 2004 9:53 pm</h4>
    <div class="postbody"><span class="postbody">you could use KevinW's sqrt routine. It's posted somewhere on the main site... It's supposed to be very fast. 
<br/>
From the readme
<br/>
<br/>
"It's a 3 cycles per bit method.  The routine takes 51 cycles total to execute from IWRAM."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19617 - poslundc - Thu Apr 22, 2004 10:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">---Trigonometry, and angles outside of 360 degrees (0-359)</td> </tr></table><span class="postbody">
<br/>
<br/>
Use look-up tables in EWRAM, and make them range from 0 to 256 instead of 360 (or 512 if you want more precision). Then you can just bitwise-AND your angle with 255 (or 511 for the more-precise version) to get the correct index in the range of your table (in case the angle is outside of your range).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">---Sqrt (for trig hypotenuse)</td> </tr></table><span class="postbody">
<br/>
<br/>
There are a couple of really fast distance approximation functions out there. They don't replace square-root for general purpose stuff, but if you're just trying to get the distance between two cartesian points then they can't be beat. Search the forum for these.
<br/>
<br/>
You need to profile your code. The easiest way to do this is to turn off the various display elements and change the colour of the backdrop (zeroth BG palette index, ie. 0x05000000) at the beginning and end of whatever parts of the code you want to profile. Don't worry about optimizing the 90% of your code that the CPU spends only 10% of its time in; instead fine-tune the 10% of your code that the CPU is spending 90% of its time in.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19621 - DiscoStew - Thu Apr 22, 2004 10:33 pm</h4>
    <div class="postbody"><span class="postbody">About KevinW sqrt function, like I said before, I'm not ready for Assembly yet, but would I be able to incorporate his function the same way as calling BIOS functions from C? Like asm volatile {"..."} with "..." being the assembly code? this brings me to another thing. I can't remember the author, but this person made an assembly division function by the names of DIV and DIVS. I've trying incorporating those function much like the BIOS functions, but it doesn't work. Has anyone else got these to work in Devkitadv GCC?<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19622 - poslundc - Thu Apr 22, 2004 10:51 pm</h4>
    <div class="postbody"><span class="postbody">It is much, <span style="font-style: italic">much</span> easier to compile assembly code in separate files than by using inline assembly. If you feel you must use inline assembly, start with the <a class="postlink" href="http://www.devrs.com/gba/files/asmrules.html" target="_blank">rules of engagement</a>.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19653 - Miked0801 - Fri Apr 23, 2004 4:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If it would help, the following is what is being used a lot... 
<br/>
---Pointers to structs in both EWRAM and ROM 
<br/>
---Fixed Point Multiplying between 2 variables (no constants) 
<br/>
---Trigonometry, and angles outside of 360 degrees (0-359) 
<br/>
---Sqrt (for trig hypotenuse) 
<br/>
---Continual scanning by index in arrays 
<br/>
---for loops in the 3 main loops 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Pointers to structs by themselves isn't bad per se.  It's when you have pointers to pointers to pointers to structs in an inner loop.  That'll cost you.  Create a local var for those to save the cycles.  Also, of course compile your code as ARM and in IWRAM.
<br/>
<br/>
For fixed point muls, it's not really that slow in ARM.  Depending on Optimization levels (you are using either -O2 or -O3 right?) these will be fairly speedy.
<br/>
<br/>
Trig is a 256 entry LUT as per previous posts.
<br/>
<br/>
Sqrt - I rarely see anything in an inner loop that needs a sqrt.  Either use Larger term plus 3/8 smaller term or use the squares of the terms for your answer (or better yet, do vector math instead to eliminate the need for them and lots of trig to boot)
<br/>
<br/>
Continual scan of arrays is going to be slow.  Make sure that what you are scanning is in IWRAM (ideal) or ROM (next choice if scans are sequential.)  Again - this makes think there are algorithm level optimizations to be had if you asking about this as continual monitoring of memory is gonna be pretty slow.  Also, if your data is 4-byte aligned, read many entries at a time if possible to minimize memory load times.
<br/>
<br/>
For loops are pretty efficient - though if you are worried, unroll the loops a bit to get some performance back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19667 - DiscoStew - Fri Apr 23, 2004 7:59 am</h4>
    <div class="postbody"><span class="postbody">To Miked0801:
<br/>
<br/>
- The pointers I have point directly to the structs needed, so I guess no problems there then.
<br/>
- I've got my function in IWRAM, but that doesn't mean it is compiled as ARM? How would I go about doing that?
<br/>
- Using -O3 instead of -O2 doesn't seem to help.
<br/>
- The reason for asking about continual scanning of arrays is because I'm doing sprite priority. I'm using a sorting method, but I'm not swapping anything. I'm setting a priority value to each sprite which decides which place in OAM the sprite data will go. All sprites start at placement value 0. When comparing 2 sprites priority values, the sprite with the bigger value gets a +1 added to its placement value. After going through 2 for loops, each sprite will have a unique placement value, which sets where in OAM the data should go. For doing 28 sprites, this takes up a good 5-8 scanlines per frame to do. Not only that, but if a sprite is offscreen, I have to go through the entire lineup and do a -1 to all that have a placement value greater than that off-screen sprite, which is a problem considering that more off-screen sprite cause a slow-down. It's bad because this off-screen looping stuff has to be separate from the priority loops because of all the code in-between.
<br/>
<br/>
To poslundc:
<br/>
<br/>
- Is the distance formula you are talking about this...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
(x &lt; y) ? (x + (((y &lt;&lt; 2) + y) &gt;&gt; 4)) : (y + (((x &lt;&lt; 2) + x) &gt;&gt; 4))
<br/>
</td> </tr></table><span class="postbody">
<br/>
I tried it, but now everything is off. I guess that 7% error really got me.
<br/>
<br/>
- I don't think I can convert to using a 256 or 512 LUT array at the moment because I am currently using the BIOS Arctan2, or perhaps I'm not quite understanding your method.
<br/>
<br/>
<br/>
<br/>
Here are my versions of Sqrt and Division, in case someone would have asked.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
IN_IWRAM s32 Fast_Sqrt(s32 value)
<br/>
{
<br/>
  s32 result = 0;
<br/>
  u32 SqrtInc = 1;
<br/>
  if(value &lt; 1024)
<br/>
  {
<br/>
    if(value &lt; 0) return (0);
<br/>
    while (value &gt; 0)
<br/>
    {
<br/>
      value -= SqrtInc;
<br/>
      SqrtInc += 2;
<br/>
      result++;
<br/>
    }
<br/>
    if(value &lt; 0)
<br/>
      result--;
<br/>
  }
<br/>
  else
<br/>
  {
<br/>
    asm volatile ("mov r0, %1\nswi 0x080000\nmov %0, r0": "=r" (result): "r" (value): "r0");
<br/>
  }
<br/>
  return (result);
<br/>
}
<br/>
<br/>
IN_IWRAM s32 Fast_Div(s32 numerator, s32 divisor, u32 firstbitcheck)
<br/>
{
<br/>
  s32 result = 0;
<br/>
  u32 holdnumerator = numerator &amp; 0x7FFFFFFF, holddivisor = divisor &amp; 0x7FFFFFFF, divinc;
<br/>
  if(!numerator || !divisor) return (0);
<br/>
  holddivisor &lt;&lt;= firstbitcheck;
<br/>
  divinc = 1 &lt;&lt; firstbitcheck;
<br/>
  while (divinc &gt; 0)
<br/>
  {
<br/>
    while (holdnumerator &gt; holddivisor)
<br/>
    {
<br/>
      holdnumerator -= holddivisor;
<br/>
      result += divinc;
<br/>
    }
<br/>
    holddivisor &gt;&gt;= 1;
<br/>
    divinc &gt;&gt;= 1;
<br/>
  }
<br/>
  if((numerator &gt; 0) &amp;&amp; (divisor &gt; 0))
<br/>
    return (result);
<br/>
  if((numerator &lt; 0) &amp;&amp; (divisor &lt; 0))
<br/>
    return (result);
<br/>
  return (-result);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I was up late on the night I did the division function, so the names may not be proper.
<br/>
For the Sqrt function, I chose the decision value at 1024 because that is where my code becomes slower that the BIOS Sqrt. I guess I'd better try KevinW's sqrt method.
<br/>
<br/>
Another question, is there a faster way of getting the square of a variable without multiplying itself? -- var * var = var ^ 2<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19670 - alek - Fri Apr 23, 2004 8:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">I can't remember the author, but this person made an assembly division function by the names of DIV and DIVS. </td> </tr></table><span class="postbody">
<br/>
<br/>
Do you mean <a href="http://www.peter-teichmann.de/ahinte.html" target="_blank">http://www.peter-teichmann.de/ahinte.html</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19691 - DiscoStew - Fri Apr 23, 2004 4:25 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, thats him. I tried using his code through inline assembly, but it didn't work. Suggestions about separate files were made, so I'll have to try that, but should there be any modifications mae to work as a separate file when combining with C files? If I find out about that, then I could get KevinW's sqrt function added also. Like I said, I practically have no ASM knowledge.
<br/>
<br/>
About the whole compile to ARM stuff, I found this,
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=2842" target="_blank">http://forum.gbadev.org/viewtopic.php?t=2842</a>
<br/>
<br/>
and what I understood from torne (and you poslundc) was that by default the code is compiled to ARM. To compile to THUMB, use -mthumb. To allow ARM and THUMB code to work together, use -mthumb-interwork. Now the question is this, how can I compile code for both ARM and THUMB at the same time? Obviously all code in IWRAM should be in ARM, but all code in ROM should be THUMB. Does the compiler choose which code should be ARM or THUMB, or do I have to specify? If so, how do I specify, since I'm compiling both types under the compiler at the same time?<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19693 - poslundc - Fri Apr 23, 2004 4:43 pm</h4>
    <div class="postbody"><span class="postbody">The simplest solution is don't compile both at the same time. Call gcc with the switch -c to generate intermediate output files, once for ARM/IWRAM and once again for Thumb/ROM, then call the linker ld (or just gcc again) on the output files to link them into your final file.
<br/>
<br/>
This is where makefiles become extremely useful.
<br/>
<br/>
On the other hand, if you write all of your ARM/IWRAM code in ASM and put them in their own separate files with the extension .s (or .S to run the C preprocessor on them), and all of your remaining C files are for Thumb/ROM, you can pass all of your files right into gcc with -mthumb -mthumb-interwork. The two gcc switches will apply to the C files only, since the assembly files state in them what type of code they generate and for where.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19697 - Miked0801 - Fri Apr 23, 2004 5:04 pm</h4>
    <div class="postbody"><span class="postbody">Hmmm.  I 'm pretty sure the BIOS divide is going to be faster than that C divide.  I'll process the other comments a bit later after I feed my daughter :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19725 - DiscoStew - Fri Apr 23, 2004 9:44 pm</h4>
    <div class="postbody"><span class="postbody">Well, I got that Distance formula working. The x and y values needed to be switched in the actual formula. But after using it, everything was about 1-2 pixels off from where they should have been, so unless there is a faster and more accurate method, I guess I'll stick with my Sqrt function, or use KevinW's sqrt when I add assembly to the project.
<br/>
<br/>
Miked0801, I just checked my Div function compared to the BIOS Div again, and it shows that mine is actually quicker. However, mine only does int divides, no remainder or other special stuff. I'm contempt with mine until I get Peter's Div working.
<br/>
<br/>
Thanks for the info poslundc, I'll have to try stuff that way.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19727 - alek - Fri Apr 23, 2004 10:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">, or use KevinW's sqrt when I add assembly to the project.</td> </tr></table><span class="postbody">
<br/>
<br/>
if you want one that works with the GAS assembler I could e-mail it to you... Just let me know.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19731 - Miked0801 - Fri Apr 23, 2004 11:34 pm</h4>
    <div class="postbody"><span class="postbody">Lol.  OK, more proof that Nintendo coded for space and not speed.  I'd be curious to see the disassembly of your divide. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19743 - DiscoStew - Sat Apr 24, 2004 7:15 am</h4>
    <div class="postbody"><span class="postbody">Well, I was able to add both Peter's Div function and KevinW's Sqrt function through (gasp! dare I say) inline assembly. Rail me all you want, I'm glad to even have ASM in my project. They seem to work in my main() function. However, I am having problems when actually trying to call them from my function which requires the speed. When compiling with the inline assembly code called from my function, it brings up errors, as many as there are labels, saying "Symbol *somelabel* already defined. To keep it short, I'll show the beginning and ending of each function...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
IN_IWRAM u32 AsmDiv(u32 dividend, u32 divisor)
<br/>
{
<br/>
    u32 result;
<br/>
    {asm ("
<br/>
      .ALIGN
<br/>
      .ARM
<br/>
      mov r0, %1
<br/>
      mov r1, %2
<br/>
      cmp r1,#1
<br/>
      beq uo
<br/>
      mov r2,#0
<br/>
      cmp r1,r0,lsr#15
<br/>
      ......
<br/>
  u0:
<br/>
      mov r1,r0
<br/>
      mov r0,r2
<br/>
      @movs pc,r14
<br/>
      b ending
<br/>
  uo:
<br/>
      mov r1,#0
<br/>
      @movs pc,r14
<br/>
  ending:
<br/>
      mov %0, r0
<br/>
  ": "=r" (result): "r" (dividend), "r" (divisor): "r0", "r1", "r2"
<br/>
  );}
<br/>
return (result);
<br/>
} 
<br/>
<br/>
IN_IWRAM u32 AsmSqrt(u32 value)
<br/>
{
<br/>
    u32 result;
<br/>
    {asm ("
<br/>
      .ALIGN
<br/>
      .ARM
<br/>
      MOV r0, %1
<br/>
      MOV r1,#(3 &lt;&lt; 30)
<br/>
      MOV r2,#(1 &lt;&lt; 30)
<br/>
      CMP r0,r2
<br/>
      SUBHS r0,r0,r2
<br/>
      ADC r2,r1,r2,LSL #1
<br/>
      ......
<br/>
      CMP r0,r2,ROR #(2 * 15)
<br/>
      SUBHS r0,r0,r2,ROR #(2 * 15)
<br/>
      ADC r2,r1,r2,LSL #1
<br/>
      @ Rounding
<br/>
      @IF :DEF:USE_ROUNDING
<br/>
      @CMP r0,r2
<br/>
      @ADC r2,r2,#1
<br/>
      @ENDIF
<br/>
      BIC r0,r2,#(3 &lt;&lt; 30)
<br/>
      MOV %0, r0
<br/>
  ": "=r" (result): "r" (value): "r0", "r1", "r2"
<br/>
  );}
<br/>
return (result);
<br/>
} 
<br/>
</td> </tr></table><span class="postbody">
<br/>
Note: Comments were placed because of compile problems and/or inaccuracy with what I wanted.
<br/>
<br/>
When I run code outside of IWRAM, I do a FarCall to the functions, but when I am calling IWRAM function from IWRAM, they're just normal calls. JFYI, my function is set into IWRAM, and I was just thinking that maybe calling the inline assembly code set in IWRAM from a function in IWRAM is probably the problem, though I don't know what that could be.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19747 - poslundc - Sat Apr 24, 2004 1:35 pm</h4>
    <div class="postbody"><span class="postbody">Post the code where you call the functions.
<br/>
<br/>
I just got an uneasy feeling... you aren't linking it to the module by #including the C code, are you?
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19754 - DiscoStew - Sat Apr 24, 2004 8:49 pm</h4>
    <div class="postbody"><span class="postbody">I admit it, I've been linking everything (even code) by #include, so I spent this morning getting rid of all unecessary #includes, and editing the MAK file made by the GBA AppWizard. Now it's working again, and the ASM code working in my function. The ASM divide saved only about &lt;1 scanlines, though now I don't have to worry about my own divide function with the extra variable. The ASM sqrt, however, saved me about 3-4 scanlines, which really helped.
<br/>
<br/>
Now before I do any more optimizations, I'm going to try get the MAK file to separate my files for compiling to ARM and THUMB. Does THUMB code require that I add -mthumb -mthumb-interwork to work with ARM code?<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19755 - poslundc - Sat Apr 24, 2004 11:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">I admit it, I've been linking everything (even code) by #include, so I spent this morning getting rid of all unecessary #includes, and editing the MAK file made by the GBA AppWizard. Now it's working again, and the ASM code working in my function. The ASM divide saved only about &lt;1 scanlines, though now I don't have to worry about my own divide function with the extra variable. The ASM sqrt, however, saved me about 3-4 scanlines, which really helped.</td> </tr></table><span class="postbody">
<br/>
<br/>
The only thing you should ever #include is header files (.h), and they should only ever contain structure definitions, macro definitions, function prototypes, and declarations of extern variables. They should never contain any actual, non-extern variable declarations, or any executable code (ie. functions). (Exception: static inline functions.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Now before I do any more optimizations, I'm going to try get the MAK file to separate my files for compiling to ARM and THUMB. Does THUMB code require that I add -mthumb -mthumb-interwork to work with ARM code?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19888 - DiscoStew - Tue Apr 27, 2004 5:10 pm</h4>
    <div class="postbody"><span class="postbody">Well, it's been a few days since I was programming, but now the files are separated so that they are split into ARM and THUMB code. However, I can't really check to see how much of an improvement this would get me, considering that I have very little code in THUMB (just the main(), sprite loading, and a few other functions). The only thing I'm currently profiling is that one function that does all the sprite updating.
<br/>
<br/>
While I continue to optimize my code, I would still like any other general suggestions that could help. thank you all<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19995 - poslundc - Thu Apr 29, 2004 3:23 pm</h4>
    <div class="postbody"><span class="postbody">Unless you're writing an interrupt service routine or something very low-level like an audio mixer or mathematical function (such as the div function), there is probably little reason for you to compile to anything other than Thumb/ROM at this stage. Premature optimization is the root of all things evil.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
