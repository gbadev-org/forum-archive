<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Setting up devkitARM for Visual C++ 6.0 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Setting up devkitARM for Visual C++ 6.0</h2>
<div id="posts">
<div class="post">
    <h4>#69436 - Kaiser - Mon Jan 30, 2006 7:44 pm</h4>
    <div class="postbody"><span class="postbody">I've been experimenting with GBA development for a while, and I was wondering how I can setup Visual C++ 6.0 to use devkitARM to compile my gba roms? I've been using a .bat file to compile but its getting really tedious.
<br/>
<br/>
I appriciate any feedback.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69458 - Cearn - Mon Jan 30, 2006 9:29 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/setup.htm#sec-msvc" target="_blank">Tonc: setup: MS Visual C++ makefile projects</a>. There are easier ways with later devkitARMs (the page was written when r6 was still current), but the information is still valid.
<br/>
<br/>
There's one at the <a class="postlink" href="http://www.devkitpro.org/devstudio.shtml" target="_blank">devkitpro</a> site too.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69478 - Kaiser - Tue Jan 31, 2006 12:43 am</h4>
    <div class="postbody"><span class="postbody">Thanks.
<br/>
I configured my devKitPro settings in my enironment variables and configured Visual C. After I finished, I copied and pasted the makefile that came with DevKitPro into my project folder.
<br/>
When I try to compile my rom, I get this error:
<br/>
<br/>
--------------------Configuration: GBAPROJECT - Win32 Release--------------------
<br/>
linking cartridge
<br/>
e:/devkitpro/devkitarm/bin/../lib/gcc/arm-elf/4.0.2/../../../../arm-elf/lib/thumb/interwork/gba_crt0.o: In function `start_vector':
<br/>
gba_crt0.s:(.init+0x220): undefined reference to `main'
<br/>
make[1]: *** [/e/devkitPro/GBAPROJECT/GBAPROJECT.elf] Error 1
<br/>
make: *** [build] Error 2
<br/>
<br/>
GBAPROJECT.gba - 2 error(s), 0 warning(s)
<br/>
<br/>
<br/>
I can't seem to find where this issue is comming from.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69605 - tepples - Tue Jan 31, 2006 7:42 pm</h4>
    <div class="postbody"><span class="postbody">"undefined reference to main" means that none of your source code files contains a publicly visible main() function. Which file contains main(), and are you sure it's getting linked into your project?
<br/>
<br/>
(RANT: That's another reason why I don't like wintermute's makefile: it hides the command line, making it harder to debug invocation issues.)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69668 - Kaiser - Wed Feb 01, 2006 1:37 am</h4>
    <div class="postbody"><span class="postbody">I've checked everything in the makefile and made sure that my main c file is included. I changed a few paths (mainly the source path and the include path) and I got past the error.. but now got another one.
<br/>
<br/>
Here is a link to my test project if interested in checking out
<br/>
<br/>
<a href="http://vault.d3files.com/temp/GBAPROJECT.zip" target="_blank">http://vault.d3files.com/temp/GBAPROJECT.zip</a>
<br/>
<br/>
The error message is in the file error.txt
<br/>
Again I appricate your help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69706 - Cearn - Wed Feb 01, 2006 12:40 pm</h4>
    <div class="postbody"><span class="postbody">Well, I got a partial solution to your problem.
<br/>
<br/>
First of all, SOURCES should contain the source directories, not the names of the source files themselves. Also, don't specify paths the Windows way, do it like this: "/e/devkitpro/GBAPROJECT". Forward slashes, no trailing slash (I think), and case-sensitive. Actually, it's better to use relative paths instead of absolute ones. Look to the example makefiles to see how that's done.
<br/>
<br/>
However, once I did that I may have gotten rid of the make errors, but I got stuck in an endless loop of makes. Thing is, these makes run recursively and I've been unable to make them stop. I know the stopping condition concerns this line 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
</td> </tr></table><span class="postbody">But for some reason I just can't get it to work correctly at this time. Sorry.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#70697 - wintermute - Wed Feb 08, 2006 7:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
# Clear the implicit built in rules
<br/>
#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM)
<br/>
endif
<br/>
<br/>
include E:\devkitPro\devkitARM\gba_rules
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output, if this ends with _mb a multiboot image is generated
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# DATA is a list of directories containing data files
<br/>
# INCLUDES is a list of directories containing header files
<br/>
#---------------------------------------------------------------------------------
<br/>
TARGET      :=   $(shell basename $(CURDIR))
<br/>
BUILD      :=   E:\devkitPro\GBAPROJECT\
<br/>
SOURCES      :=   pixelTest.c
<br/>
DATA      :=   
<br/>
INCLUDES   :=   E:\devkitPro\GBAPROJECT\include
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
1. You shouldn't have changed "include $(DEVKITARM)/gba_rules" to "include E:\devkitPro\devkitARM\gba_rules". If this didn't work as written then you probably set DEVKITARM wrong, it should be "/e/devkitPro/devkitARM" - this is documented at <a href="http://www.devkitpro.org/setup.shtml" target="_blank">http://www.devkitpro.org/setup.shtml</a>
<br/>
<br/>
2. The other variables are all specified relative to the Makefile, you should *not* place full paths there. The variables should have been set as follows, note the use of "." ( a single period) to specify the directory in SOURCES - this tells the Makefile that the sources are in the same directory.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
TARGET      :=   $(shell basename $(CURDIR))
<br/>
BUILD      :=   build
<br/>
SOURCES      :=   .
<br/>
DATA      :=   
<br/>
INCLUDES   :=   include
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75392 - gmiller - Sun Mar 12, 2006 5:50 pm</h4>
    <div class="postbody"><span class="postbody">The makefile commands that you want to be visable to see how the files are compiled are in the base_rules file in the devkitARM folder.  Just remove the '@' that begins the commands to make them visable when they execute.  Make sure you just remove the @ at the begining of the command:
<br/>
<br/>
   For example:
<br/>
<br/>
        @$(CC) -MMD -MF $(DEPSDIR)/$*.d $(CFLAGS) -c $&lt; -o $@
<br/>
<br/>
needs to become:
<br/>
<br/>
       $(CC) -MMD -MF $(DEPSDIR)/$*.d $(CFLAGS) -c $&lt; -o $@
<br/>
<br/>
Be sure that the line begins with a tab character (not spaces) or the make utility will process the line.  As I was debugging changes to the files to fit how my class would use these files I needed to see what it was doing.  I now use my version of the make files to compile from visual ham and to debug from the msys command prompt.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76279 - gmiller - Mon Mar 20, 2006 3:28 am</h4>
    <div class="postbody"><span class="postbody">I have been doing experiments settin up VS 2003 .NET to work with the devkitPro devkitARM setup and have found that I can not get it to work but the same setup with VS 2005 works perfectly.  The other issue I have foun is that if you want to do source code debugging with either gdb/DDD/insight etc ... then do not use any version of vba SDL newer than 1.7.1.  The issues with souce level debuggin were introduced some time after that release.  I have tried multiple combinationn from many environments and the answer is that only for 1.7.1 and back does the interface that these debuggers talk to work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76557 - wintermute - Wed Mar 22, 2006 6:40 pm</h4>
    <div class="postbody"><span class="postbody">How did you set up .net 2003? I don't have this particular version unfortunately but VS6 and 2k5 work perfectly here. I'm also told that .net 2003 works fine for others after converting a VS6 project - there are a couple in the gba examples.
<br/>
<br/>
As for Insight and VBA I've been using 1.8.0 with Insight 6.4.5 for a while with few problems - on windows, I haven't yet looked at using them in linux. What issues are you getting?
<br/>
<br/>
Quite a few people have been asking about how to show the actual command lines being used for compiling. I've updated the base_rules file so all these will be shown for release 18 - due any day now, still a bit of testing to do atm.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
