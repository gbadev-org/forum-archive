<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Need help debugging code. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Need help debugging code.</h2>
<div id="posts">
<div class="post">
    <h4>#7054 - MumblyJoe - Sat Jun 07, 2003 6:26 am</h4>
    <div class="postbody"><span class="postbody">Hey, I have written a std::vector style class for arrays in my gba projects and it seems to work ok, but I would like it tested for robustness in some real world applications. If anyone has any projects that use arrays and add and remove items from them, could you give this a shot and tell me how it goes.
<br/>
<br/>
Basically it works just like an array, even uses operator[] and dynamically grows by 10 items when it gets full, but does not shrink as items are removed (I thought it would fragment memory too much on the GBA, would rather just be using it all up).
<br/>
<br/>
Any help would be great, and if you find it usefull feel free to steal it or modify it for your needs. It has really only been written because std::vector is to big to think about using and also it uses pure virtual functions, which of course break DKA under most circumstances.
<br/>
<br/>
PS: I know a linked list would be more dynamic but I feel the pointers involved outweigh the benifits on the GBA.
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">template&lt;class T&gt;
<br/>
class Array
<br/>
{
<br/>
   public:
<br/>
   Array(){array = new T[10]; size=10; top=0;}
<br/>
   Array(const Array&amp; rhs)
<br/>
   {
<br/>
      array = new T[10]; size=10; top=0;
<br/>
      for(int i=0;i&lt;rhs.top;i++)
<br/>
         Add(rhs.array[i]);
<br/>
   }
<br/>
   ~Array(){delete [] array;}
<br/>
   T&amp; operator[](const int i){return array[i];}
<br/>
   const Array&amp; operator=(const Array&amp; rhs)
<br/>
   {
<br/>
      delete [] array; array = new T[10]; size=10; top=0;
<br/>
      for(int i=0;i&lt;rhs.top;i++)
<br/>
         Add(rhs.array[i]);
<br/>
      return *this;
<br/>
   }
<br/>
   void Add(T wanted)
<br/>
   {
<br/>
      if(top==size)
<br/>
         {
<br/>
            T* temp = new T[size+10];
<br/>
            for(int i=0;i&lt;size;i++)
<br/>
               temp[i] = array[i];
<br/>
            delete [] array;
<br/>
            array = temp;
<br/>
            size+=10;
<br/>
         }
<br/>
      array[top++]=wanted;
<br/>
   }
<br/>
   void Remove(int i)
<br/>
   {
<br/>
      for(int j=i;j&lt;(top-1);j++)
<br/>
         array[j] = array[j+1];
<br/>
      top--;
<br/>
   }
<br/>
   const int Size(){return top;}
<br/>
<br/>
   private:
<br/>
   T* array;
<br/>
   int size;
<br/>
   int top;
<br/>
};</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7056 - Sweex - Sat Jun 07, 2003 10:58 am</h4>
    <div class="postbody"><span class="postbody">I've been working on a string and vector class too lately, and what I did for testing is use visual C++. This way you can more easily write a test program that does some (or a lot) of random Add and Remove operations, and it is a lot easier to debug it when it goes wrong.
<br/>
<br/>
There shouldn't be any reason why it would go wrong on GBA if it's fine in visual c++ (or in fact, any c++ compiler will do)
<br/>
<br/>
(I've coded my container classes cross platform, and I can set the allocation/deallocation mode with some #defines, depending on the platform)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
