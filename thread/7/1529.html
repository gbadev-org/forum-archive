<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Shifting and FIXED question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Shifting and FIXED question</h2>
<div id="posts">
<div class="post">
    <h4>#7762 - aran - Tue Jun 24, 2003 9:32 am</h4>
    <div class="postbody"><span class="postbody">In a function that implements rotation/zoom arithmethics I have seen
<br/>
the following snippets:
<br/>
<br/>
FIXED zoom = 1&lt;&lt;8;
<br/>
y = (y * zoom)&gt;&gt;8;
<br/>
bg-&gt;DX = ((bg-&gt;x_scroll&lt;&lt;8) - y*SIN[angle] - x*COS[angle]);
<br/>
bg-&gt;PA = (COS[angle]*zoom)&gt;&gt;8; 
<br/>
<br/>
What exactly is a FIXED and why does it have to be a FIXED in the above function? Does it mean zoom is unmodifyable? However I would want to zoom faster and slower, is that possible, if yes how would I change my zoom variable?
<br/>
<br/>
Also, am I correct that 1&lt;&lt;8 means as 1 as dual shifted eight bits to the left? Why did the author then shift after each operation, either 8 bits left or right?
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7801 - Cyberman - Wed Jun 25, 2003 1:08 am</h4>
    <div class="postbody"><span class="postbody">A good guess might be that FIXED is a tyoedef.
<br/>
<br/>
&lt;&lt; is a single operator.. it is the LEFT SHIFT operator.
<br/>
&gt;&gt; is the RIGHT SHIFT operator.
<br/>
<br/>
The shift operator moves bits in the direction left or right within the size of the variable or constant.
<br/>
<br/>
So 
<br/>
u16 D = 1 &lt;&lt; 8;
<br/>
would be 0x100 in value. 
<br/>
<br/>
each position shifted left is the same as multiplying by 2
<br/>
and each position shifted right is the same as dividing by 2.
<br/>
<br/>
Notice y = (y * zoom) &gt;&gt; 8;
<br/>
<br/>
The variables have to have a large enough size so as not to loose precision. However this is the same as
<br/>
<br/>
y = (y*zoom)/256;
<br/>
<br/>
Remember it's NOT shifting it each operatoring.. it's taking a value and shifting it each operation.
<br/>
<br/>
The only variable that it could be considered that way is y.. though if it's in a function y is a new variable each time that's multiplied by the zoom factor.
<br/>
<br/>
Cyb</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9879 - aeberbach - Thu Aug 21, 2003 12:22 am</h4>
    <div class="postbody"><span class="postbody">FIXED is a typedef of a standard type used for fixed point arithmetic - floating point is really slow on systems that don't have the hardware to handle it (which is why you would use a lookup table for sin values, for instance), and fixed point is a way to use integers to do floating point without the slowdown but with some loss of precision. The left and right shifts manipulate the values around the imaginary fixed decimal point. There's a good explanation of how it is used for rotation on thepernproject.com, go to the GBA tutorials.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
