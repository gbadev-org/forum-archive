<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>undefined reference to 'xxxxxxxx' - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > undefined reference to 'xxxxxxxx'</h2>
<div id="posts">
<div class="post">
    <h4>#3777 - I.C.E - Sat Mar 08, 2003 7:14 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I encounter the following error messages if i use floating points: 
<br/>
<br/>
undefined reference to `__floatsisf'
<br/>
undefined reference to `__divsf3'
<br/>
undefined reference to `__addsf3'
<br/>
undefined reference to `__fixsfsi'
<br/>
<br/>
If i use a optimizing switch like -O3 i get a message that memcpy is undefined. I guess it has something to do with copying a structure to the called function.
<br/>
<br/>
I have tried linking with libgcc.a, libc.a, libm.a, libg.a but nothing helped to get it working. Any ideas? Are the undefined references not in the above mention libraries?<br/>_________________<br/>To this day, many C programmers believe that "strong typing" just means pounding extra hard on the keyboard.
<br/>
 -  Peter van der Linden</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3790 - tepples - Sun Mar 09, 2003 1:01 am</h4>
    <div class="postbody"><span class="postbody">First of all: Don't use floating-point math in production GBA code because the ARM7TDMI lacks a floating-point unit.  In fact, I usually integerize my algorithms while they're still in PC-based unit testing.
<br/>
<br/>
Second, if you're linking two or more of libm, libc, or libgcc, you have to specify them in just that order.  Functions in libraries can call functions in other libraries only if the caller precedes the callee in link order.  Libm calls functions in libc, which in turn calls functions in libgcc.  Thus, you should -lm -lc -lgcc in that order.
<br/>
<br/>
If you're linking with 'gcc' rather than 'ld', gcc will handle insert -lc -lgcc for you.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3808 - I.C.E - Sun Mar 09, 2003 4:35 pm</h4>
    <div class="postbody"><span class="postbody">Thanks,
<br/>
<br/>
but I am linking already in that way.
<br/>
<br/>
Here the command i use through Makefile:
<br/>
arm-agb-elf-ld -lm -lc -lgcc -T lnkscript crt0.o -o outfile &lt;objectfiles&gt;
<br/>
<br/>
My object files are compiled with
<br/>
arm-agb-elf-gcc -Wall -g -mthumb-interwork   -c -o
<br/>
<br/>
Is it possible that my supplied libgcc.a are not correct? How can I check if __floatsisf are supplied by this libraries and if not how to create a correct one? By the way, I am using Linux Devkitadvance: <a href="http://www.doc.ic.ac.uk/~tb100/?devkit=1" target="_blank">http://www.doc.ic.ac.uk/~tb100/?devkit=1</a><br/>_________________<br/>To this day, many C programmers believe that "strong typing" just means pounding extra hard on the keyboard.
<br/>
 -  Peter van der Linden</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3811 - Paul Shirley - Sun Mar 09, 2003 5:28 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:50 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3814 - I.C.E - Sun Mar 09, 2003 5:57 pm</h4>
    <div class="postbody"><span class="postbody">I finaly found the problem. You have to add the c library after your own object files.
<br/>
<br/>
arm-agb-elf-ld -T lnkscript crt0.o -o outfile &lt;objectfiles&gt; -lm -lc -lgcc
<br/>
<br/>
works.
<br/>
<br/>
The only problem I have now is that It seems that my program crashes. I guess it has something to do with the  message:
<br/>
<br/>
arm-agb-elf-ld: Warning: /opt/devkitadv/arm-agb-elf/lib/libc.a(memcpy.o) does not support interworking, whereas file.out does.
<br/>
<br/>
Any ideas how to solve it?<br/>_________________<br/>To this day, many C programmers believe that "strong typing" just means pounding extra hard on the keyboard.
<br/>
 -  Peter van der Linden</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3816 - I.C.E - Sun Mar 09, 2003 6:19 pm</h4>
    <div class="postbody"><span class="postbody">Forget about my interwork question. I have found the thumb-interwork version of the libraries. By the way it is interesting to see that my game runs now signifcant slower and does not work as expected anymore. I guess I really should omit the libraries.<br/>_________________<br/>To this day, many C programmers believe that "strong typing" just means pounding extra hard on the keyboard.
<br/>
 -  Peter van der Linden</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3822 - Paul Shirley - Mon Mar 10, 2003 12:27 am</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:51 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3853 - I.C.E - Mon Mar 10, 2003 9:26 pm</h4>
    <div class="postbody"><span class="postbody">I have many .c files to compile for my project and it took quite a long time to compile them. Often I don't need to compile every file, just one. If gcc setups the linker I have to compile the whole project if I make a small change, or am i wrong?<br/>_________________<br/>To this day, many C programmers believe that "strong typing" just means pounding extra hard on the keyboard.
<br/>
 -  Peter van der Linden</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3859 - Paul Shirley - Mon Mar 10, 2003 10:40 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:52 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3863 - pelrun - Tue Mar 11, 2003 3:04 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Paul Shirley wrote:</b></span></td> </tr> <tr> <td class="quote">From my Spindizzy makefile</td> </tr></table><span class="postbody">
<br/>
<br/>
Augh! You mean I've been busily reverse engineering the original CPC Spindizzy these past three months for nothing? Noooo! :)
<br/>
<br/>
Actually, it's been a *lot* of fun figuring it out (at least it's easier for me than completing the game!) - I'll keep going if only because I've got nothing better to do at work during downtime.
<br/>
<br/>
And whenever the new Spindizzy is coming out, you know I'll be first in line to get it...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3864 - Paul Shirley - Tue Mar 11, 2003 3:28 am</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:52 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3869 - Quirky - Tue Mar 11, 2003 8:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Paul Shirley wrote:</b></span></td> </tr> <tr> <td class="quote">FYI its <span style="font-weight: bold">Spindizzy Worlds</span>, the bigger, faster, prettier Amiga version that Activision buried from sight. </td> </tr></table><span class="postbody">
<br/>
<br/>
So it isn't a port of the SNES version then? ;-)))
<br/>
<br/>
*runs off and hides*</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3873 - pelrun - Tue Mar 11, 2003 12:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Paul Shirley wrote:</b></span></td> </tr> <tr> <td class="quote">Unless publishers stop ignoring their phones you could be waiting a while ;(</td> </tr></table><span class="postbody">
<br/>
<br/>
Oh well. Hey, I'm patient. Shame on you, publishers!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Paul Shirley wrote:</b></span></td> </tr> <tr> <td class="quote">FYI its <span style="font-weight: bold">Spindizzy Worlds</span>, the bigger, faster, prettier Amiga version that Activision buried from sight. I have no intention of reviving the 8 bit game so you might as well continue cloning!</td> </tr></table><span class="postbody">
<br/>
<br/>
I figured that was the case - like you said, SW is bigger, faster *and* prettier :) Though there is something to be said for the nice clean angular look of the original Hangworld...
<br/>
<br/>
Woo! Official blessing! Then again, now I'm honour bound to actually produce something... damn. ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
