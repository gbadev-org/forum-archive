<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>class function library include? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > class function library include?</h2>
<div id="posts">
<div class="post">
    <h4>#155353 - nsm333 - Mon Apr 28, 2008 7:10 pm</h4>
    <div class="postbody"><span class="postbody">I can't seem to compile anything with the class function. any one know what the header file for class is?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155354 - kusma - Mon Apr 28, 2008 7:12 pm</h4>
    <div class="postbody"><span class="postbody">Class function? "class" is a reserved keyword in c++, not a function. Care to share the code that causes trouble?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155360 - silent_code - Mon Apr 28, 2008 8:20 pm</h4>
    <div class="postbody"><span class="postbody">please post some short example, as there are numerous possibilities where the "error" could come from.
<br/>
<br/>
do you use the ".cpp" (as well as the optional ".hpp" for headers) file suffix?
<br/>
<br/>
how do you compile your code? via libnds example makefile, via a batch file/script or even by hand (g++)?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155362 - nsm333 - Mon Apr 28, 2008 8:52 pm</h4>
    <div class="postbody"><span class="postbody">class robot {
<br/>
public:
<br/>
	int health;
<br/>
	int speed;
<br/>
	int tool1; 
<br/>
	int tool2;
<br/>
	int tool3;
<br/>
	int x;
<br/>
	int y;
<br/>
	void moveup();
<br/>
	void movedown();
<br/>
	void moveleft();
<br/>
	void moveright();
<br/>
	robot::moveup() {
<br/>
		x+=2;
<br/>
	}
<br/>
	robot::movedown() {
<br/>
		x-=2;
<br/>
	}
<br/>
	robot::moveleft() {
<br/>
		y-=2;
<br/>
	}
<br/>
	robot::moveright() {
<br/>
		y+=2;
<br/>
	}
<br/>
<br/>
}
<br/>
<br/>
i might be doing it wrong, but i don't think so.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155363 - kusma - Mon Apr 28, 2008 8:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nsm333 wrote:</b></span></td> </tr> <tr> <td class="quote">i might be doing it wrong, but i don't think so.</td> </tr></table><span class="postbody">
<br/>
<br/>
You are. Try this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
class robot {
<br/>
public:
<br/>
   int health;
<br/>
   int speed;
<br/>
   int tool1; 
<br/>
   int tool2;
<br/>
   int tool3;
<br/>
   int x;
<br/>
   int y;
<br/>
   void moveup();
<br/>
   void movedown();
<br/>
   void moveleft();
<br/>
   void moveright();
<br/>
};
<br/>
<br/>
void robot::moveup() {
<br/>
   x+=2;
<br/>
}
<br/>
void robot::movedown() {
<br/>
   x-=2;
<br/>
}
<br/>
void robot::moveleft() {
<br/>
   y-=2;
<br/>
}
<br/>
void robot::moveright() {
<br/>
   y+=2;
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155364 - nsm333 - Mon Apr 28, 2008 8:58 pm</h4>
    <div class="postbody"><span class="postbody">what'd you change? but, it didn't work. and, here's the whole code
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include &lt;nds.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include &lt;string.h&gt;
<br/>
<br/>
int main(void) {
<br/>
class robot { 
<br/>
public: 
<br/>
   int health; 
<br/>
   int speed; 
<br/>
   int tool1; 
<br/>
   int tool2; 
<br/>
   int tool3; 
<br/>
   int x; 
<br/>
   int y; 
<br/>
   void moveup(); 
<br/>
   void movedown(); 
<br/>
   void moveleft(); 
<br/>
   void moveright(); 
<br/>
}; 
<br/>
<br/>
void robot::moveup() { 
<br/>
   x+=2; 
<br/>
} 
<br/>
void robot::movedown() { 
<br/>
   x-=2; 
<br/>
} 
<br/>
void robot::moveleft() { 
<br/>
   y-=2; 
<br/>
} 
<br/>
void robot::moveright() { 
<br/>
   y+=2; 
<br/>
} 
<br/>
<br/>
}
<br/>
<br/>
<br/>
<br/>
robot player1;
<br/>
<br/>
   while(1) {
<br/>
<br/>
      uint16 keysPressed = ~(REG_KEYINPUT);
<br/>
<br/>
    if(keysPressed &amp; KEY_UP)
<br/>
      player1.moveup();
<br/>
    if(keysPressed &amp; KEY_DOWN)
<br/>
      player1.movedown();
<br/>
    if(keysPressed &amp; KEY_LEFT)
<br/>
      player1.moveleft();
<br/>
    if(keysPressed &amp; KEY_RIGHT)
<br/>
      player1.moveright();
<br/>
<br/>
      
<br/>
      iprintf("Robot x = %d/nRobot y = %d", player1.x, player1.y);
<br/>
<br/>
      swiWaitForVBlank();
<br/>
   }
<br/>
<br/>
<br/>
   return 0;
<br/>
</td> </tr></table><span class="postbody">
<br/>
and the errors:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
main.c
<br/>
arm-eabi-gcc -MMD -MP -MF /c/ndsdev/arm9/build/main.d -g -Wall -O2 -march=armv5te -mtune=arm946e-s -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/c/ndsdev/arm9/include -I/c/devkitPro/libnds/include -I/c/devkitPro/libnds/include -I/c/ndsdev/arm9/build -DARM9 -c /c/ndsdev/arm9/source/main.c -o main.o
<br/>
c:/ndsdev/arm9/source/main.c: In function 'main':
<br/>
c:/ndsdev/arm9/source/main.c:8: error: 'class' undeclared (first use in this function)
<br/>
c:/ndsdev/arm9/source/main.c:8: error: (Each undeclared identifier is reported only once
<br/>
c:/ndsdev/arm9/source/main.c:8: error: for each function it appears in.)
<br/>
c:/ndsdev/arm9/source/main.c:8: error: expected ';' before 'robot'
<br/>
c:/ndsdev/arm9/source/main.c:23: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/ndsdev/arm9/source/main.c:23: error: expected expression before ':' token
<br/>
make[1]: *** [main.o] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155365 - Dwedit - Mon Apr 28, 2008 9:04 pm</h4>
    <div class="postbody"><span class="postbody">you can't define a class inside a function<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155366 - nsm333 - Mon Apr 28, 2008 9:05 pm</h4>
    <div class="postbody"><span class="postbody">dur de dur. thanks, guys.
<br/>
<br/>
ok, outside of the function now, but same thing. i'll try to fix this myself, though.
<br/>
<br/>
ok, just some semi-colons out of place. all fixed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155367 - PeterM - Mon Apr 28, 2008 9:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nsm333 wrote:</b></span></td> </tr> <tr> <td class="quote">and the errors:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
main.c
<br/>
...
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
I'm pretty sure you can declare a class inside a function if you like. The real problem is that you're compiling C++ code as C.
<br/>
<br/>
Try renaming your file to main.cpp and editing your Makefile accordingly, then see if that helps!
<br/>
<br/>
Pete<br/>_________________<br/><a href="http://aaiiee.wordpress.com/" target="_blank">http://aaiiee.wordpress.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155368 - nsm333 - Mon Apr 28, 2008 9:19 pm</h4>
    <div class="postbody"><span class="postbody">ok, i'll try that. just useing the example file with devkit arm.
<br/>
<br/>
edit: it worked! thanks.</span><span class="gensmall"><br/><br/>Last edited by nsm333 on Mon Apr 28, 2008 9:22 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#155369 - kusma - Mon Apr 28, 2008 9:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nsm333 wrote:</b></span></td> </tr> <tr> <td class="quote">what'd you change?</td> </tr></table><span class="postbody">
<br/>
I moved the implementations of the class-methods out of the class-definition, and added the return-type. And then I added a semicolon after the class-definition.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155370 - nsm333 - Mon Apr 28, 2008 9:23 pm</h4>
    <div class="postbody"><span class="postbody">oh, but as peterm said, it probaly can be inside. well, thanks guys. it compiled fine, and now i need to set up the screen....
<br/>
<br/>
edit: </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
do you use the ".cpp" (as well as the optional ".hpp" for headers) file suffix?
<br/>
</td> </tr></table><span class="postbody"> sorry, silent_code, you were right.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155373 - kusma - Mon Apr 28, 2008 9:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nsm333 wrote:</b></span></td> </tr> <tr> <td class="quote">oh, but as peterm said, it probaly can be inside.</td> </tr></table><span class="postbody">
<br/>
No, he said the class definition could be inside a function, which is correct. The method-implementations can also be inside the class-definition, but not with the syntax you used.
<br/>
<br/>
This works:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class SomeClass
<br/>
{
<br/>
void someFunc() { printf("hello"); }
<br/>
};
<br/>
</td> </tr></table><span class="postbody">
<br/>
This works:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class SomeClass
<br/>
{
<br/>
void someFunc();
<br/>
};
<br/>
void SomeClass::someFunc() { printf("hello"); }
<br/>
</td> </tr></table><span class="postbody">
<br/>
This was pretty much what you did, and it does not work:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class SomeClass
<br/>
{
<br/>
void someFunc();
<br/>
SomeClass::someFunc() { printf("hello"); }
<br/>
};
<br/>
</td> </tr></table><span class="postbody">
<br/>
The key point is that "SomeClass::" is used to specify namespace outside of the class definition. You also lacked the return-type (in this case, "void").</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155374 - silent_code - Mon Apr 28, 2008 10:01 pm</h4>
    <div class="postbody"><span class="postbody">no problem! :^)
<br/>
<br/>
happy coding! :^D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155449 - nsm333 - Tue Apr 29, 2008 6:27 pm</h4>
    <div class="postbody"><span class="postbody">ok, kusuma. i get it now. thanks.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
