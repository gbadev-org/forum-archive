<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Commenting density... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Commenting density...</h2>
<div id="posts">
<div class="post">
    <h4>#134498 - keldon - Fri Jul 13, 2007 1:02 pm</h4>
    <div class="postbody"><span class="postbody">Reason I ask: Coding style test for a development team
<br/>
<br/>
So what are your thoughts on commenting? My view is that your project has a general outline of where to find things and where to start looking for particular areas.
<br/>
<br/>
Then each class details its general purpose and gives enough information to be able to use it (I like the JavaDoc style) plus the key methods. Each method (obviously) is well documented with more than enough details to know its limitations, use, blah blah and so on.
<br/>
<br/>
Now when it gets to the methods some people comment every line or logical stage. Their task was to correct errors and write the code as you would, so maybe I'm over thinking this and should just write it in my style.
<br/>
<br/>
They originally had everything in a single main method, 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// ---------------------- //
<br/>
// Standard Include Files //
<br/>
// ---------------------- //
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
// --------------------- //
<br/>
// Structure Definitions //
<br/>
// --------------------- //
<br/>
<br/>
// Definition of a player
<br/>
typedef struct PLAYER
<br/>
{
<br/>
   int id;
<br/>
   char player_name[ 50 ];
<br/>
   double ability;
<br/>
   double potential;
<br/>
};
<br/>
<br/>
// Function:   main()
<br/>
// Purpose:    Main function for the program
<br/>
void main( void )
<br/>
{
<br/>
   FILE *p_file;      // File being read in from
<br/>
   PLAYER *player;      // Player stored in file
<br/>
<br/>
   // Open the file to read from
<br/>
   p_file = fopen( "file.txt", "r" );
<br/>
<br/>
   // Read out the player information
<br/>
   fread( &amp;player, sizeof( PLAYER ), 1, p_file );
<br/>
<br/>
   // Print the players name to the screen
<br/>
   printf( "%s\n", player-&gt;player_name );
<br/>
<br/>
} // main()
<br/>
</td> </tr></table><span class="postbody">
<br/>
Which I have changed it to something more on the lines of...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/** Will create an example file (file.txt) with a single PLAYER entry */
<br/>
void createExampleFile (){
<br/>
   PLAYER myPlayer;
<br/>
   FILE *p_file;
<br/>
<br/>
   // initialize player with basic information
<br/>
   myPlayer.id = 1;
<br/>
   myPlayer.ability = 1.0;
<br/>
   myPlayer.potential = 1.0;
<br/>
   strcpy ( (char *)&amp;myPlayer.player_name, "Alan Smith");
<br/>
<br/>
   // open and write to file
<br/>
   p_file = fopen ( "file.txt", "w");
<br/>
   fwrite ( &amp;myPlayer, sizeof(PLAYER),1,p_file);
<br/>
<br/>
   fclose(p_file);
<br/>
} // createExampleFile ()</td> </tr></table><span class="postbody">
<br/>
<br/>
And also added:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/**
<br/>
   id: Each player has a unique id number
<br/>
<br/>
   player_name: Can contain all names (first, middle names, surname) or any
<br/>
   one of the three. If more than one is given the first is expected
<br/>
   to be the first name and the last to the the surname. If one is given it
<br/>
   is expected to be the surname. Players are referred to by the surname during
<br/>
   play, and the first name is used to distinguish between players with the
<br/>
   same name
<br/>
<br/>
   ability: in the range of 0-1, with 0 being poor and 1 being excellent
<br/>
<br/>
   potential: in the range of 0-1, with 0 being poor and 1 being excelelnt
<br/>
*/
<br/>
typedef struct
<br/>
{
<br/>
   int id;
<br/>
   char player_name[ 50 ];
<br/>
   double ability;
<br/>
   double potential;
<br/>
} PLAYER;</td> </tr></table><span class="postbody">
<br/>
<br/>
Maybe I'm over thinking this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134513 - simonjhall - Fri Jul 13, 2007 2:51 pm</h4>
    <div class="postbody"><span class="postbody">The density of comments is often driven by the complexity of the piece of code being explained. For instance a class which outputs simple things (for instance multiplication tables) will need few comments as your 'average' programmer will be able to figure out what's going on.
<br/>
However if you're commenting something which is complicated (eg stuff has to be done in a very specific order) you're gonna need more comments as the order may not be obvious to your 'average' programmer.
<br/>
<br/>
So really, you need to consider four things when writing documentation/commenting:
<br/>
1) figure what out the level of your reader will be. eg if you're teaching programming then you should comment the most mundane things
<br/>
2) decide how complicated the piece of code will look to your reader
<br/>
3) if you were to pick this piece of code up in six months time, how many comments would you need to understand its function, and how many comments would it take to annoy you?
<br/>
4) how much time do you have to spend on commenting?
<br/>
<br/>
One thing I've come across first-hand is commenting vectorised/unrolled code. As long as you comment one iteration - and make it obvious that the other iterations are running on different, but similar data - it should be ok :-)
<br/>
<br/>
PS: I don't comment my code.<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134520 - PeterM - Fri Jul 13, 2007 3:42 pm</h4>
    <div class="postbody"><span class="postbody">I think comments are usually necessary when the purpose of the code isn't immediately obvious (due to task complexity or programming language deficiencies).
<br/>
<br/>
Commenting logical steps to allow readers to skim through code is good form.
<br/>
<br/>
Sensible identifiers also go a long way to make comments redundant. For example, "player.move(elapsed_time)" doesn't need a comment, whereas "p-&gt;do_it(t)" would warrant a comment (or some renaming).<br/>_________________<br/><a href="http://aaiiee.wordpress.com/" target="_blank">http://aaiiee.wordpress.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134535 - sajiimori - Fri Jul 13, 2007 6:54 pm</h4>
    <div class="postbody"><span class="postbody">Good responses so far.
<br/>
<br/>
One thing I'd add:  Try to reduce the <span style="font-style: italic">need</span> for comments.  As you're writing a comment, ask yourself: "Why is this comment necessary, and is there a way to alter the code so the comment would become redundant and could therefore be deleted?"</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
