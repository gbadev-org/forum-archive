<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Data corrupts - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Data corrupts</h2>
<div id="posts">
<div class="post">
    <h4>#7764 - shoaib - Tue Jun 24, 2003 9:55 am</h4>
    <div class="postbody"><span class="postbody">I have written a custom library for Background management and sprite management. I have used OOP , basically just classes no polymorphism or inheritence. 
<br/>
Somehow whenever the image data for the sprite exceeds a certain limit 12Kbytes to be exact (this data is loaded in the ROM area, only one frame of the sprite lies in VRAM), this corrupts the tile data or sometimes the other sprite data, reducing the data seems to correct the problem and the library works perfectly for smaller amounts of data
<br/>
If someone has encountered similar problems and solved them please let me know[/list]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7771 - Sweex - Tue Jun 24, 2003 1:15 pm</h4>
    <div class="postbody"><span class="postbody">Since recuding the amount of data fixes the problem, I would say that it takes too much time to load all data into VRAM before the drawing starts. Therefore, you will get some sprites drawn with the old data, and some with the new (or maybe even combined). You should make sure all the copying is after the scanline is at 160 and before it retraces to 0 again (So basically during retrace)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7782 - johnny_north - Tue Jun 24, 2003 4:42 pm</h4>
    <div class="postbody"><span class="postbody">12kb for a single sprite cell? The largest sprite is 64x64 pixels. At 256 colors, this is only 4096 bytes. Half that if you're using 4bit color.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7802 - Cyberman - Wed Jun 25, 2003 1:44 am</h4>
    <div class="postbody"><span class="postbody">Sounds as though you have 3 frames for a 64x64 pixel sprite.  You should use DMA to load the sprite data into the tile memory. If your sprite data is compressed then you should unpack it into WRAM and then DMA it to sprite memory.
<br/>
<br/>
I think on many games that use lots of large sprites they use this strategy as well as swap sprite information about a lot.  This increases the affective bandwidth as well as   You might consider not updating the sprite information every vertical synce for animation. That's a considerable bandwidth payload. Perhaps every other sync would be better.
<br/>
<br/>
These are just a few ideas.
<br/>
<br/>
Cyb</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
