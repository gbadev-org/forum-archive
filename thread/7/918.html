<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How smart is the compiler? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > How smart is the compiler?</h2>
<div id="posts">
<div class="post">
    <h4>#4579 - Indecisive - Thu Apr 03, 2003 8:03 pm</h4>
    <div class="postbody"><span class="postbody">Okay, everything I know about C programming (not much) has come from GBA developing. So I have a question about how compilers work.
<br/>
<br/>
If I include a header with a lot of definitions in it, but then only use some of those definitions, do all those definitions still end up in the final code after I compile it?
<br/>
<br/>
I'm trying to keep my program size down, so would it be better if I made a custom header for each program which only defines those things I actually use?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4582 - siaspete - Thu Apr 03, 2003 8:51 pm</h4>
    <div class="postbody"><span class="postbody">Types generally don't take any space. They're not code as such, just information about how memory is laid out.
<br/>
<br/>
Functions and global (or static) variables can take up space.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4584 - Indecisive - Thu Apr 03, 2003 9:17 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the explanation. About static variables though...
<br/>
<br/>
If static variables take up space, then instead of defining values that I refer to often, eg. maximum ammo capacity, it's better (memorywise) to just type the number each time? For values that don't change at all?
<br/>
<br/>
Or are static variables something else entirely?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4591 - tepples - Fri Apr 04, 2003 12:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Indecisive wrote:</b></span></td> </tr> <tr> <td class="quote">If static variables take up space, then instead of defining values that I refer to often, eg. maximum ammo capacity, it's better (memorywise) to just type the number each time? For values that don't change at all?</td> </tr></table><span class="postbody">
<br/>
These aren't static variables; they're constants.  Depending on how they're defined, what language (C or C++) you're using, and even (on ARM or Thumb) how large they are, constants may or may not take up extra space.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Or are static variables something else entirely?</td> </tr></table><span class="postbody">
<br/>
"Static" variables and functions in file scope are visible only within the file.
<br/>
"Static" variables in function scope are local to the function and preserve their value from call to call.
<br/>
"Static" fields in a class are singletons: the field belongs to the class and not to each object.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4615 - Indecisive - Fri Apr 04, 2003 9:49 pm</h4>
    <div class="postbody"><span class="postbody">Okay. Thanks for the help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4621 - Sweex - Sat Apr 05, 2003 2:45 am</h4>
    <div class="postbody"><span class="postbody">I wouldn't worry about the size of the executable (elf) too much if I were you. Although the GBA has limited resources, a few bytes more or less isn't gonna be a big difference.
<br/>
<br/>
#defines are replaced with their actual value before the file is actually compiled.
<br/>
<br/>
As for variables. Make them constant, so they'll be put into ROM instead of RAM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4699 - Quirky - Mon Apr 07, 2003 7:37 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sweex wrote:</b></span></td> </tr> <tr> <td class="quote">As for variables. Make them constant, so they'll be put into ROM instead of RAM.</td> </tr></table><span class="postbody">
<br/>
<br/>
A variable in <span style="font-weight: bold">R</span>ead <span style="font-weight: bold">O</span>nly Memory?! Not a very good idea, I would have though.
<br/>
<br/>
Variables, which vary, should be stored in RAM - IWRAM (default) if you are going to make the binary multiboot, or EWRAM if it is a large chunk of memory and will change - other parameters that can be considered data and are <span style="font-style: italic">not going to be changed at run time</span> are OK to go in ROM.
<br/>
<br/>
Apologies if you knew that already, but better to make it clear than chase silly bugs later. With the visoly flash card you can actually write to ROM, but it is not a safe tactic and may not work on other cartridges.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
