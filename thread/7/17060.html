<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Function mis-match - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Function mis-match</h2>
<div id="posts">
<div class="post">
    <h4>#172121 - zelbo - Sat Jan 16, 2010 8:08 pm</h4>
    <div class="postbody"><span class="postbody">i'm getting the following error when i try to compile my latest monstrosity:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:/devkitPro/projects/Quest_yarlds0.0.0f/source/gameMain.cpp: In function 'int m
<br/>
ain()':
<br/>
c:/devkitPro/projects/Quest_yarlds0.0.0f/source/gameMain.cpp:799: error: no matc
<br/>
hing function for call to 'Monster::checkSpace(int&amp;, int (*)[23][32], int (*)[23
<br/>
][32])'
<br/>
c:/devkitPro/projects/Quest_yarlds0.0.0f/include/monster.h:113: note: candidates
<br/>
 are: int Monster::checkSpace(int, int*, int*)
<br/>
make[1]: *** [gameMain.o] Error 1
<br/>
rm txtSprites.s avatar.s bgEGA8x8.s
<br/>
make: *** [build] Error 2</td> </tr></table><span class="postbody">
<br/>
listCreatures and listTerrain are where i keep track of what is where for exactly this kind of check.
<br/>
How do i make this work? Can you recommend a better way to do this?
<br/>
I'm thinking i can just check the actual map, but i don't really have my actual map in place yet.
<br/>
currently working on switching from iprintf-ing the game screen to sprites on a background.
<br/>
hit this bump while pulling the monster class into it's own files, using the patater orange spaceship code as a framework.
<br/>
<br/>
Call in gameMain.cpp (yeah, i know. switch statements. i have some re-factoring to do.):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">switch (player-&gt;checkSpace(direction, &amp;listCreatures, &amp;listTerrain))
<br/>
</td> </tr></table><span class="postbody">
<br/>
Function in monster.cpp:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   int Monster::checkSpace(int direction, int * plistCreatures, int * plistTerrain)
<br/>
   {
<br/>
   // potentials
<br/>
   int potX;
<br/>
   int potY;
<br/>
   
<br/>
   // 0=none 1=Creature 2=Wall 3=Water 4=Door
<br/>
   int obstacle;
<br/>
   /*
<br/>
      1) check creature array for monsters
<br/>
         fight?
<br/>
      2) check terrain array for walls/water/door
<br/>
         bump head/ swim? / open?
<br/>
   */
<br/>
      switch (direction)
<br/>
      { // first figure out what square we're looking at
<br/>
         case (D_UP):
<br/>
            potX = this-&gt;x;
<br/>
            potY = this-&gt;y - 1;
<br/>
            break;
<br/>
         case (D_RIGHT):
<br/>
            //this-&gt;x++;
<br/>
            potX = this-&gt;x + 1;
<br/>
            potY = this-&gt;y;
<br/>
            break;
<br/>
         case (D_DOWN):
<br/>
            //this-&gt;y++;
<br/>
            potX = this-&gt;x;
<br/>
            potY = this-&gt;y + 1;
<br/>
            break;
<br/>
         case (D_LEFT):
<br/>
            //this-&gt;x--;
<br/>
            potX = this-&gt;x - 1;
<br/>
            potY = this-&gt;y;
<br/>
            break;
<br/>
         default:
<br/>
            ; // idle/rest?
<br/>
            break;
<br/>
      }
<br/>
      
<br/>
      if (plistCreatures[potY][potX] &gt; 0)
<br/>
      {
<br/>
         obstacle = 1;
<br/>
      }
<br/>
      else if (plistTerrain[potY][potX] == 35)
<br/>
      {
<br/>
         obstacle = 2;
<br/>
      }
<br/>
      else if (plistTerrain[potY][potX] == 126)
<br/>
      {
<br/>
         obstacle = 3;
<br/>
      }
<br/>
      else if (plistTerrain[potY][potX] == 43)
<br/>
      {
<br/>
         obstacle = 4;
<br/>
      }
<br/>
      else
<br/>
      {
<br/>
         obstacle = 0;
<br/>
      }
<br/>
      return obstacle;
<br/>
   }
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172124 - zelbo - Sun Jan 17, 2010 1:08 am</h4>
    <div class="postbody"><span class="postbody">At least i've stopped getting the error now, but i still don't think this is how i should be doing it.
<br/>
<br/>
Call:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">switch (player-&gt;checkSpace(direction, listCreatures, listTerrain)) </td> </tr></table><span class="postbody">
<br/>
Function prototype:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int Monster::checkSpace(int direction, int plistCreatures[23][32], int plistTerrain[23][32]);</td> </tr></table><span class="postbody">
<br/>
<br/>
Now i'm having all sorts of fun trying to get my sprites to show up. Don't know if it's a priority issue or something else i'm screwing up. I'll keep working on it, but i'll probably be coming back here for help before too long.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172125 - gauauu - Sun Jan 17, 2010 2:59 am</h4>
    <div class="postbody"><span class="postbody">Edit:  Kusma's right, I'm a moron.  Teaches me not to post when my brain isn't working fully.
<br/>
<br/>
Your second post also correctly solves the problem a different way...you indicate that you are expecting a 2d array of ints in the function signature, and that's what you pass in.</span><span class="gensmall"><br/><br/>Last edited by gauauu on Sun Jan 17, 2010 4:23 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#172126 - kusma - Sun Jan 17, 2010 3:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gauauu wrote:</b></span></td> </tr> <tr> <td class="quote">Ok, my brain is working a bit slow right now, so take this with a grain of salt:
<br/>
<br/>
If listCreatures is a 2-dimensional int array, then you can also think of it as a pointer to a pointer to an int (since an array can be thought of as a pointer to an int, and this is an array of arrays).  
<br/>
</td> </tr></table><span class="postbody">
<br/>
This is completely wrong. A pointer to a pointer is two levels of indirections, but a two-dimensional array is contiguous in memory and thus only one.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172127 - zelbo - Sun Jan 17, 2010 5:20 am</h4>
    <div class="postbody"><span class="postbody">so would i be better off with something like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int Monster::checkSpace(int direction, int * plistCreatures, int * plistTerrain) </td> </tr></table><span class="postbody">
<br/>
and
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">switch (player-&gt;checkSpace(direction, listCreatures, listTerrain)) </td> </tr></table><span class="postbody">
<br/>
so i'm only passing pointers instead of the entire array?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
