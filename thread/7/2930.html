<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Virtual functions. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Virtual functions.</h2>
<div id="posts">
<div class="post">
    <h4>#16882 - Krakken - Thu Feb 26, 2004 9:05 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
Can anyone please give me a quick example on how to store a pointer to a function in a variable and then call that function from that variable - I seem to have forgotten.
<br/>
<br/>
This is what I mean:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void function_to_call (bool x) { // BODY // }
<br/>
<br/>
??? call_by_this = function_to_call;
<br/>
call_by_this(true);
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16884 - tepples - Thu Feb 26, 2004 9:20 am</h4>
    <div class="postbody"><span class="postbody"><a href="http://www.function-pointer.org/" target="_blank">http://www.function-pointer.org/</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16890 - poslundc - Thu Feb 26, 2004 2:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">http://www.function-pointer.org/</td> </tr></table><span class="postbody">
<br/>
<br/>
Man, the Internet is a strange place...
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16918 - sajiimori - Fri Feb 27, 2004 12:23 am</h4>
    <div class="postbody"><span class="postbody">Quoth C-IAQ:
<br/>
<br/>
<span style="font-weight: bold">1.11: How do I declare an array of N pointers to functions returning pointers to functions returning pointers to characters?</span>
<br/>
<br/>
Well, first you need to know how to declare an array of N items of type T - that's 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
T foo[N];
<br/>
</td> </tr></table><span class="postbody">
<br/>
Now you need to look at how to declare a pointer to function returning something, say, an object of type S. That's like this: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
S (*bar)();
<br/>
</td> </tr></table><span class="postbody">
<br/>
Now assume that S is ``pointer to function returning pointer to char''. We get 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
(char *) (*)() (*bar)();
<br/>
</td> </tr></table><span class="postbody">
<br/>
So, the whole thing turns out to be (with appropriate parentheses) 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
(((char)(*))((*)())(((*)((foo)))())([(N)]));
<br/>
</td> </tr></table><span class="postbody">
<br/>
If your compiler complains, break this down into subexpressions. 
<br/>
<br/>
To call it, just use 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
foo[i]();
<br/>
</td> </tr></table><span class="postbody">
<br/>
This works because, in C, declaration reflects use, but it's one of those weird distorted mirrors.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17028 - Miked0801 - Sun Feb 29, 2004 7:28 am</h4>
    <div class="postbody"><span class="postbody">Argh, my brain!  
<br/>
<br/>
Seriously, I got the syntax of a funcion once and made a typecast of it and forgot about it :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17096 - Krakken - Mon Mar 01, 2004 1:00 am</h4>
    <div class="postbody"><span class="postbody">I know what you mean. Thanks all!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17366 - LOst? - Sat Mar 06, 2004 11:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">http://www.function-pointer.org/</td> </tr></table><span class="postbody">
<br/>
<br/>
Man, the Internet is a strange place...
<br/>
<br/>
Dan.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Wow, cool place! Finally I cqan learn about using pointers to C++ members</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
