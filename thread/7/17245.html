<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>object containing a pointer to another object? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > object containing a pointer to another object?</h2>
<div id="posts">
<div class="post">
    <h4>#173913 - zelbo - Sat May 08, 2010 12:32 am</h4>
    <div class="postbody"><span class="postbody">So for my sudoku solver, right now i have a big fat "if/ else if" section that is gross and wrong and should all be replaced by pointers. Except i'm not sure how to pull it off.
<br/>
<br/>
I have a sudoku object that is pretty much my main game engine. This object declares and defines instances of 81 cel objects, 9 row objects, 9 column objects, and 9 block objects (cel is a instance of the Cel class, rows, columns, and blocks are all instances of the Sequence class). I would like to have the cel objects contain pointers to each sequence they belong to, so i can do something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x = cel[1]-&gt;row-&gt;add(number);
<br/>
y = cel[5]-&gt;column-&gt;contains(number);
<br/>
</td> </tr></table><span class="postbody">
<br/>
where add(int number) and contains(int number) are functions of the sequence class.
<br/>
<br/>
Any examples of how to do this? When i google it, all i find is objects pointing to themselves and some stuff i can't make sense of.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173914 - Dwedit - Sat May 08, 2010 2:23 am</h4>
    <div class="postbody"><span class="postbody">delete<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173915 - zelbo - Sat May 08, 2010 2:48 am</h4>
    <div class="postbody"><span class="postbody">I think i've got it sorted now. Just a matter of putting the * in the right place. I wish it wasn't such a pain to post sample code, coding on a pc, internet through a mac. Weeee!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173916 - zelbo - Sat May 08, 2010 3:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">delete</td> </tr></table><span class="postbody">
<br/>
<br/>
do you mean delete the post? because you're right. this is a simple thing that i was just screwing up because i have no idea what i'm doing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173922 - Dwedit - Sat May 08, 2010 7:15 am</h4>
    <div class="postbody"><span class="postbody">I meant I made a response, then wanted to withdraw it, but this board does not have a delete button for regular users.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173925 - zelbo - Sat May 08, 2010 7:43 pm</h4>
    <div class="postbody"><span class="postbody">Ok, so currently i have something like this as a property of the cel class:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Sequence *row;</td> </tr></table><span class="postbody">
<br/>
<br/>
and set it like so:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cel[c]-&gt;row = &amp;row[x];</td> </tr></table><span class="postbody">
<br/>
<br/>
then when i try to invoke the add() function of the row via:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cel[c]-&gt;row-&gt;add(x);</td> </tr></table><span class="postbody">
<br/>
<br/>
it tells me i'm trying to use Sequence** and the closest match is Sequence*
<br/>
does that mean i should be doing something like this isntead?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cel[c].row-&gt;add(x);</td> </tr></table><span class="postbody">
<br/>
<br/>
i'll be able to get online with a friend's laptop shortly, so i'll be able to post the actual code and errors soon. These pointers are driving me crazy. i'm sure part of the problem is the fact that i'm using naked arrays, but i haven't been able to get vectors working as of yet. that will probably be my goal for the day, either getting vectors working, or figure out how to get Boost working so i can use boost arrays and smart pointers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173927 - vuurrobin - Sat May 08, 2010 9:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zelbo wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cel[c]-&gt;row = &amp;row[x];</td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
is row by any change an array of Sequence pointers? or is it an array of Sequence's.
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">but i haven't been able to get vectors working as of yet.</td> </tr></table><span class="postbody">
<br/>
<br/>
doesn't "#include &lt;vector&gt;" works? is the files extention .c or .cpp?<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173929 - zelbo - Sat May 08, 2010 10:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>vuurrobin wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zelbo wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cel[c]-&gt;row = &amp;row[x];</td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
is row by any change an array of Sequence pointers? or is it an array of Sequence's.
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
cel[c]-&gt;row is a Sequence pointer, &amp;row[x] i guess is an array of pointers (&amp;row is anyway, [x] is the index of one Sequence in that array)
<br/>
<br/>
i've given up on trying to use object pointers for now (also ran into some recursive issues since i wanted them to point to each other), so for now i'm using a slightly more involved workaround where i'm giving each object an array of index ints to help them find their friends. i think it will work, but it's a bit more effort since i can't reference sequences from within cels and vice/versa. Now i'm doing more stuff from within the sudoku object itself, which will work for now.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>vuurrobin wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
doesn't "#include &lt;vector&gt;" works? is the files extention .c or .cpp?</td> </tr></table><span class="postbody">
<br/>
<br/>
"#include &lt;vector&gt;" works, but i'm getting errors if i define it without declaring it and i'm not sure how to declare it properly. file extensions are .hpp or .cpp when i'm using c++ features, .c and .h if there are no c++ features that i'm aware of. i think it's that i have no grasp of the syntax for vectors.
<br/>
<br/>
in sudoku.hpp:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">std::vector&lt;Cel*&gt; cel2(9);</td> </tr></table><span class="postbody">
<br/>
<br/>
in sudoku.cpp:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">std::vector&lt;Cel*&gt; cel2(0) = new Cel();   </td> </tr></table><span class="postbody">
<br/>
<br/>
errors:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">In file included from c:/devkitPro/projects/sudoku_solve/source/main.cpp:1:
<br/>
c:/devkitPro/projects/sudoku_solve/include/sudoku.hpp:117: error: expected identifier before numeric constant
<br/>
c:/devkitPro/projects/sudoku_solve/include/sudoku.hpp:117: error: expected ',' or '...' before numeric constant
<br/>
make[1]: *** [main.o] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173930 - sajiimori - Sat May 08, 2010 10:59 pm</h4>
    <div class="postbody"><span class="postbody">The syntax you're missing isn't about vectors specifically - it's about constructors and the 'new' operator.  But actually, you can use vectors without using either of those features.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Declaring variables.
<br/>
int number;
<br/>
std::vector&lt;int&gt; listOfNumbers;
<br/>
std::vector&lt;Cell&gt; listOfCells;
<br/>
std::vector&lt;Cell*&gt; listOfPointersToCells;
<br/>
<br/>
// Adding a value to the end of a vector, increasing its size by 1.
<br/>
listOfNumbers.push_back(123);
<br/>
<br/>
// Instantly setting the size of a vector.
<br/>
listOfNumbers.resize(20);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
