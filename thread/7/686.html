<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>rot background and wraparound - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > rot background and wraparound</h2>
<div id="posts">
<div class="post">
    <h4>#3580 - misehert - Fri Feb 28, 2003 11:00 am</h4>
    <div class="postbody"><span class="postbody">I'm having trouble getting a mode 1, BG # 2, ROTBG_SIZE_256x256 to wraparound.  Displays, scrolls, rotates and zoom are all working fine.  I'm using the pern/gbajunkie tutorials - I assume I assign the bg.wraparound = 1; ?  I'm also confused because PERN in his bg.h defines wraparound as 0x2000 where as gbajunkie uses 0x1 - I think it's supposed to be bit 13 (so I would guess the 0x2000 is right), but I've tried both and still no wraparound.<br/>_________________<br/>Sorry, I'm just a Stoopid Noobie...
<br/>
<br/>
thank god for video x 4 - i can see again</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3583 - Probably Bob - Fri Feb 28, 2003 2:26 pm</h4>
    <div class="postbody"><span class="postbody">There is a bug in the pern project headers in backgrounds.h
<br/>
<br/>
In the typedef for the Bg struct, change :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    u8 wraparound; //wraparound flag
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
to
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    u16 wraparound; //wraparound flag
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
as a u8 is not big enough to hold the value 0x2000.
<br/>
<br/>
Then you can use bg2-&gt;wraparound = WRAPAROUND;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3584 - Probably Bob - Fri Feb 28, 2003 2:27 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, should say : bg.wraparound = WRAPAROUND;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3586 - Daikath - Fri Feb 28, 2003 5:33 pm</h4>
    <div class="postbody"><span class="postbody">You know, they have this neato invention lately called the "edit button" :P ;)<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3603 - misehert - Fri Feb 28, 2003 11:41 pm</h4>
    <div class="postbody"><span class="postbody">Wraparound is now working - thanks Probably Bob.
<br/>
<br/>
Now I'm sorry to be such a loser, but I can't get my recently learned collision detection to work beyond the original background map.  If I scroll beyond the base map into the wrapped map, my collision detection based on tile# goes to hell, and the sprites walking through walls and falling into the water...
<br/>
<br/>
Is there a way to control this?  I'm guessing somehow I have to keep recentering the screen when he goes off the edge, but it seems beyond my grasp.<br/>_________________<br/>Sorry, I'm just a Stoopid Noobie...
<br/>
<br/>
thank god for video x 4 - i can see again</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3605 - Probably Bob - Sat Mar 01, 2003 12:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Daikath wrote:</b></span></td> </tr> <tr> <td class="quote">You know, they have this neato invention lately called the "edit button" :P ;)</td> </tr></table><span class="postbody">
<br/>
<br/>
I really, honestly did not notice that until you pointed it out :)
<br/>
<br/>
D'oh!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
