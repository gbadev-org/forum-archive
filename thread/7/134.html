<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Pointing to a double array. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Pointing to a double array.</h2>
<div id="posts">
<div class="post">
    <h4>#811 - Lord Graga - Fri Jan 10, 2003 8:06 pm</h4>
    <div class="postbody"><span class="postbody">I have this functions:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void CheckCollision (u8* map);</td> </tr></table><span class="postbody">
<br/>
I want to point this array to it:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u8 map1[10][15]; //there are data in it, it just haven't got anything to this, so i let it out to make a smaller post</td> </tr></table><span class="postbody">
<br/>
But it gives me a error, what is wrong? I use ARM SDT 2250 Evaluation.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#813 - Vortex - Fri Jan 10, 2003 8:28 pm</h4>
    <div class="postbody"><span class="postbody">A very simple way is to convert your array definition to 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u8 map[10*15];
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
and just use a regular pointer. Passing two-dimentional arrays in C is pain.
<br/>
One possible solution is:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void foo( int array[rows][cols] )
<br/>
</td> </tr></table><span class="postbody">
<br/>
but you need to declare the array dimension in the function's prototype too, which IMHO sucks.
<br/>
<br/>
Just my $0.02</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#816 - Nessie - Fri Jan 10, 2003 8:38 pm</h4>
    <div class="postbody"><span class="postbody">Is there some reason you can just do this?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CheckCollision( (u8 *)&amp;map1[0][0]);
<br/>
</td> </tr></table><span class="postbody">
<br/>
It's admittedly a touch ugly, but ...:)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#872 - I.C.E - Sat Jan 11, 2003 7:16 pm</h4>
    <div class="postbody"><span class="postbody">This two should work I think:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CheckCollision(&amp;map1[0][0]);
<br/>
CheckCollision(*map1);
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#921 - DekuTree64 - Sun Jan 12, 2003 7:50 am</h4>
    <div class="postbody"><span class="postbody">To pass a double-pointer just use u8 **map. Then you can access it like map[x][y] or whatever. Just picture the u8**, which points to an array of u8*s, each of which points to an array of u8s. 
<br/>
And if that's not confusing enough, I've actually had to use up to a u8**** before^_^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1271 - MHz - Thu Jan 16, 2003 2:52 am</h4>
    <div class="postbody"><span class="postbody">The actual reason why it doesn't work is that the compiler can't relate 'U8 *' to 'U8[10][10]'. One way you could declare your CheckCollision method is ...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void CheckCollision(U8 map[10][10]);</td> </tr></table><span class="postbody">
<br/>
or ...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void CheckCollision(U8 map[][10]);</td> </tr></table><span class="postbody">
<br/>
This because the compiler must know the number of "columns" in the array in order to calc the right address when indexing (if you're using an array with three dimensions it must be declared map[10][10][10] or map[][10][10] and so on). It is also important to remember, by using one of these declarations you're still passing a *pointer* to the function and NOT the whole array (i.e. call by value)!
<br/>
But if you do want the method to accept an 'U8 *' parameter for some reason, you could always do as some of the others have said earlier or I'll give you another option; a <span style="text-decoration: underline">simple</span> cast ...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">CheckCollision((U8 *) map);</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
\ MHz /</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1293 - ampz - Thu Jan 16, 2003 2:11 pm</h4>
    <div class="postbody"><span class="postbody">This is how it's done.
<br/>
void CheckCollision(U8 **map);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2283 - AnthC - Sat Feb 01, 2003 8:54 am</h4>
    <div class="postbody"><span class="postbody">You can have pointers to to arrays as such :-
<br/>
u8 (*p)[32][32]=array;
<br/>
u8 (*p)[32][32]=(u8 (*)[32][32])0x4000000;
<br/>
etc.
<br/>
Anth</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
