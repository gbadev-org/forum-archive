<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > sprites</h2>
<div id="posts">
<div class="post">
    <h4>#4144 - phr0zn - Thu Mar 20, 2003 8:36 pm</h4>
    <div class="postbody"><span class="postbody">I am having trouble loading a third sprite in my Pong Demo.  I load the first two sprites perfectly, but the thrid sprite loads as the top half of the "paddle" sprite.  The paddle is 16x32, and the ball is 16x16.  What is happening is the ball is loading as the first 16x16 of the paddle sprite (both located in the same header file).  I believe the issue lies in the last loop of my code,  but I cannot figure out what is going wrong.  Thanks.
<br/>
<br/>
Also, for future reference, how do I load more sprites than 2 or 3?  Is there some easy way to figure out the palette memory loop?  I was able to figure out that for 16x32 it is 0-&gt;256, and 16x16 is 0-&gt;128 in the loop, but how do I load more than that?  
<br/>
<br/>
Thanks.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void SetupSprites()
<br/>
{
<br/>
   u16 loop;
<br/>
<br/>
   for(loop = 0; loop &lt; 256; loop++)          //load the palette into memory
<br/>
      OBJPaletteMem[loop] = palette[loop];
<br/>
<br/>
   InitializeSprites();                       //set all sprites off screen (stops artifact)
<br/>
<br/>
    sprites[0].attribute0 = COLOR_256 | BIT15 | player.y_pos;   //setup sprite info, 256 colour, shape and y-coord
<br/>
    sprites[0].attribute1 = BIT15 | player.x_pos;            //size 16x16 and x-coord
<br/>
    sprites[0].attribute2 = 0;                      //pointer to tile where sprite starts
<br/>
<br/>
    for(loop = 0; loop &lt; 256; loop++)               //load sprite image data
<br/>
    {
<br/>
        OAMData[loop] = paddleData[loop];
<br/>
    }
<br/>
<br/>
   sprites[1].attribute0 = COLOR_256 | BIT15 | computer.y_pos;   //setup sprite info, 256 colour, shape and y-coord
<br/>
    sprites[1].attribute1 = BIT15 | computer.x_pos;            //size 16x16 and x-coord
<br/>
    sprites[1].attribute2 = 0;  
<br/>
<br/>
<br/>
   sprites[2].attribute0 = COLOR_256 | SQUARE | pongball.y_pos;   //setup sprite info, 256 colour, shape and y-coord
<br/>
    sprites[2].attribute1 = SIZE_16 | pongball.x_pos;            //size 16x16 and x-coord
<br/>
    sprites[2].attribute2 = 8;  
<br/>
<br/>
   for(loop = 256; loop &lt; 384; loop++)               //load sprite image data
<br/>
    {
<br/>
        OAMData[loop] = pongballData[loop-128];
<br/>
    }
<br/>
<br/>
}
<br/>
</td> </tr></table><span class="postbody">[/code]<br/>_________________<br/><a href="http://cerberus.promodtecnologies.com" target="_blank">http://cerberus.promodtecnologies.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4146 - darkcloud - Thu Mar 20, 2003 10:32 pm</h4>
    <div class="postbody"><span class="postbody">I think you need to set attribute2 of sprite 2 to 16 rather than 8.  I might be wrong though because sometimes I get confused about attribute 2.  But it sounds like the answer, because if attribute2 is not set correctly, your sprite can turn out the way it did, (half of one sprite, half of another).  
<br/>
<br/>
To load in a sprite larger than 16x16, (I think you want to know how to calculate the number of times you need to loop),you just multiply the dimensions and divide by 2, for 256-color sprites.
<br/>
Ex)
<br/>
16x32 --&gt; 16 X 32 --&gt; 512
<br/>
512 / 2 = 256
<br/>
<br/>
64x64 --&gt; 64 X 64 --&gt; 4096
<br/>
4096 / 2 = 2048<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4150 - phr0zn - Thu Mar 20, 2003 11:41 pm</h4>
    <div class="postbody"><span class="postbody">as for the attribute2, is it safe to assume that for every '128' in the loop, to add 8?  so the first sprite will be 0-16, and the second sprite (at 256-384) will be 16-24.  The thrid sprite, assuming it is another 128 in the palette will be 24-32?  Or if it was 256 in the sprite, 16-32?
<br/>
<br/>
I will try that.
<br/>
<br/>
Thanks.<br/>_________________<br/><a href="http://cerberus.promodtecnologies.com" target="_blank">http://cerberus.promodtecnologies.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
