<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>undefined reference to `vtable for cSglBackground' - Help! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > undefined reference to `vtable for cSglBackground' - Help!</h2>
<div id="posts">
<div class="post">
    <h4>#8632 - Sweex - Wed Jul 16, 2003 11:49 pm</h4>
    <div class="postbody"><span class="postbody">Help would be MUCH appreciated with the following, as I'm going mad!:-(
<br/>
<br/>
I'm using DevkitAdvance/gcc to compile my c++ code. Compiling with g++, having my code in several libraries (using ar). 
<br/>
<br/>
All fine except for one thing; I get this error: <span style="font-weight: bold">undefined reference to `vtable for cSglBackground'</span>. For some reason, g++ does not include a vtable for cSglBackground (has virtual functions obviously).
<br/>
<br/>
I have absolutely no idea why this is happening. Tried all kinds of combinations with <span style="font-style: italic">-lm -lstdc++ -lsupc++ -lgcc -lc</span> as linker parameters, it didn't seem to matter. cSglBackground doesn't have a destructor, but that should not matter (I've tried adding a (virtual) destructor), but it did not make a difference).
<br/>
<br/>
I am pretty clueless at this point!:-(
<br/>
<br/>
Thanks in advance,
<br/>
<br/>
.Sweex.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8635 - Lord Graga - Thu Jul 17, 2003 12:07 am</h4>
    <div class="postbody"><span class="postbody">to destroy something it must be there first.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8636 - Sweex - Thu Jul 17, 2003 12:16 am</h4>
    <div class="postbody"><span class="postbody">Erhm, in all respect; what's that supposed to mean?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8654 - Sweex - Thu Jul 17, 2003 12:45 pm</h4>
    <div class="postbody"><span class="postbody">Forgive my impatience, but does nobody have any clue?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11592 - maximAL - Mon Oct 13, 2003 2:54 am</h4>
    <div class="postbody"><span class="postbody">hmm, have you really defined the virtual function? just "virtual void bla(void);" won't work, you also have to define it, even if it is just empty, like "virtual void bla(void) <span style="font-weight: bold">{}</span>"
<br/>
<br/>
<br/>
<br/>
hmm, i'm wondering if the thread starter is still into GBA dev *G*
<br/>
maybe someone else has the same problem...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11620 - ltaloc - Tue Oct 14, 2003 6:19 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
I have exactly the same problem when I define a <span style="text-decoration: underline">PURE</span> virtual function.
<br/>
virtual void myFunction() = 0;
<br/>
If this function is not a pure virtual - not "=0" - then it works fine. 
<br/>
So what I guess is that DevKit does not know pure virtual function. Thus you always have to implement your function, even if it is with an empty implementation - such as {}.
<br/>
Cheers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11623 - tepples - Tue Oct 14, 2003 8:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ltaloc wrote:</b></span></td> </tr> <tr> <td class="quote">So what I guess is that DevKit does not know pure virtual function.</td> </tr></table><span class="postbody">
<br/>
DevKit Advance should have no problems with pure virtual methods. You just have to provide an implementation of write(). <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=6103" target="_blank">Details</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11803 - ltaloc - Sun Oct 19, 2003 5:50 pm</h4>
    <div class="postbody"><span class="postbody">Thank you tepples !
<br/>
<br/>
For C++ users, if you want to define write in a .cpp file, you need to put extern "C" int write(...) {
<br/>
 return 0;
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11829 - beelzebub - Mon Oct 20, 2003 11:51 pm</h4>
    <div class="postbody"><span class="postbody">The vtable is only created by the compiler when you define the destructor, so make sure your class:
<br/>
<br/>
a) has a destructor (virtual of course)
<br/>
b) you define the destructor some where (even if it's empty)
<br/>
c) the file in with you define the destructor is included when you link.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12342 - MumblyJoe - Sat Nov 08, 2003 2:05 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, you will have some problems with pure virtual (or abstract, whatever you call them) functions. The problem is that DevKitAdv doesn't provide an implementation of write() which gcc seems to use in a function that is called when a vtable cant be created. The only real way around this is:
<br/>
<br/>
a) write your own write() function.
<br/>
b) dont use pure virtual functions.
<br/>
c) use a nasty work around for virtual functions, such as declaring your functions and not defining them. I'm not sure how much gcc will like that approach though.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
