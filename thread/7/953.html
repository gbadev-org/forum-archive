<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Initializing array of structs? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Initializing array of structs?</h2>
<div id="posts">
<div class="post">
    <h4>#4712 - Alunze - Mon Apr 07, 2003 9:22 pm</h4>
    <div class="postbody"><span class="postbody">I know this question is kind of lame, but it's something which would greatly help to my code's clarity and organization. How can I initialize an array of structs in the array's declaration?.
<br/>
<br/>
    Thanks in *advance* &gt;_6</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4716 - tepples - Mon Apr 07, 2003 9:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Alunze wrote:</b></span></td> </tr> <tr> <td class="quote">How can I initialize an array of structs in the array's declaration?</td> </tr></table><span class="postbody">
<br/>
The same way you initialize an array of arrays:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">typedef struct Player
<br/>
{
<br/>
  int foo, bar, baz;
<br/>
} Player;
<br/>
<br/>
Player p[2] =
<br/>
{
<br/>
  { 1, 2, 3 },
<br/>
  { 4, 5, 6 }
<br/>
};
<br/>
</td> </tr></table><span class="postbody">
<br/>
And add "const" in front of the data type if you want it to go into ROM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4722 - Alunze - Mon Apr 07, 2003 10:57 pm</h4>
    <div class="postbody"><span class="postbody">Aha, so that's how it's done. I was having trouble figuring out the syntax, thanks again :).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4730 - darkcloud - Tue Apr 08, 2003 1:16 am</h4>
    <div class="postbody"><span class="postbody">Actually, I've been wondering if its possible to initialize and entire array with a single value.  What I mean is that say I declare an int array of 100, is there a way to set all the values of that array without having to manually set them.
<br/>
Something like
<br/>
<br/>
int array[100] = 0; and that would set all values to 0.
<br/>
<br/>
Anything like that?<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4732 - tepples - Tue Apr 08, 2003 5:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darkcloud wrote:</b></span></td> </tr> <tr> <td class="quote">I've been wondering if its possible to initialize and entire array with a single value.  What I mean is that say I declare an int array of 100, is there a way to set all the values of that array without having to manually set them.</td> </tr></table><span class="postbody">
<br/>
It's possible, but only if you're initializing all the values to 0 and not to any other value. The key is that any omitted values in the array are set to 0:
<br/>
<br/>
int array[100] = {6, 8, 9};
<br/>
<br/>
which initializes the array to {6, 8, 9, 0, 0, 0, ..., 0}. However, this may take up as much space on the cart (or worse, in the multiboot binary) as if you had written out all the 0's because of limitations in the linker's architecture.
<br/>
<br/>
Another solution that works without inflating the binary is to rely on a detail of the C language specification: all statically allocated variables (global variables, static variables in module scope, and static variables in function scope) are guaranteed to contain 0 at the start of the program.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4735 - Daikath - Tue Apr 08, 2003 9:28 am</h4>
    <div class="postbody"><span class="postbody">wouldt this work? 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 loop;
<br/>
for (loop = 0;loop &lt;100; loop++)
<br/>
{
<br/>
array[loop] = 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Becuase I get the idea array[100] = 0; would only make the variable in place 100 of the array zero.<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4790 - CcSoccer881 - Wed Apr 09, 2003 9:00 pm</h4>
    <div class="postbody"><span class="postbody">I believe that you are correct..<br/>_________________<br/><a href="http://www.rsstudios.net" target="_blank">www.rsstudios.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4792 - darkcloud - Wed Apr 09, 2003 9:18 pm</h4>
    <div class="postbody"><span class="postbody">Yes that would work, but what I was asking for is a way to do that when I declare the array.  
<br/>
<br/>
Thanks tepples for explaining it.<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4804 - Sweex - Thu Apr 10, 2003 9:28 am</h4>
    <div class="postbody"><span class="postbody">I think your best shot to initialize an array on the same line of the declaration is by using memset.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int array[100] = memset(array, 0, sizeof(array)); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
If you're doing C++, you might be able to do some trickery with templates and end up with something like this...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
tArray&lt;int, 100&gt; array;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5069 - nintendodev - Sat Apr 19, 2003 10:04 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Daikath wrote:</b></span></td> </tr> <tr> <td class="quote">wouldt this work? 
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 loop;
<br/>
for (loop = 0;loop &lt;100; loop++)
<br/>
{
<br/>
array[loop] = 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Becuase I get the idea array[100] = 0; would only make the variable in place 100 of the array zero.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Sir, go faster:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 loop;
<br/>
VAR * ptrArr = array + 99;
<br/>
<br/>
for( loop = 100; loop' --loop _{
<br/>
 *ptrArr-- = 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Do a tcc or armcc -S -fs on this routine. Comparing 0 is shorter op than occupying a register ^_^*</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
