<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem with rand() function (ndslib) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Problem with rand() function (ndslib)</h2>
<div id="posts">
<div class="post">
    <h4>#40765 - slum - Fri Apr 22, 2005 8:49 am</h4>
    <div class="postbody"><span class="postbody">Hi everyone.
<br/>
<br/>
I need to generate a random integer using rand() function.
<br/>
I wrote this :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int gen=(int)(rand() &amp; 0xFFFF);</td> </tr></table><span class="postbody">
<br/>
<br/>
but it doesn't work, generating the same number (~1400).
<br/>
I think I need te get the ds timestamp, but I don't know how...
<br/>
<br/>
Thank you.
<br/>
<br/>
P.S. : Sorry, it's not in DS dev forum :/ please moive it :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40785 - tepples - Fri Apr 22, 2005 4:41 pm</h4>
    <div class="postbody"><span class="postbody">Wait for a keypress first, and then take the time from startup to keypress and plug that into srand(). Notice that virtually every official TETRIS? game for a Nintendo console needs at least three keypresses between power-on and gameplay start, if only to generate seedage for the PRNG.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40880 - slum - Sat Apr 23, 2005 9:05 am</h4>
    <div class="postbody"><span class="postbody">ok, thank you, but how can I get time betwween start and keypress ?
<br/>
I'm wondering if srand exists in nds librairies...
<br/>
<br/>
thank you</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40908 - tepples - Sat Apr 23, 2005 1:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>slum wrote:</b></span></td> </tr> <tr> <td class="quote">ok, thank you, but how can I get time betwween start and keypress ?</td> </tr></table><span class="postbody">
<br/>
Count the vblanks for one. For more seedage per press, use a keypress interrupt to mix VCOUNT into the seed. (Based on <a class="postlink" href="http://www.bottledlight.com/ds/index.php/Misc/KeyInput" target="_blank">the docs</a>, it looks like the X and Y buttons can't cause an interrupt. Strange.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I'm wondering if srand exists in nds librairies...</td> </tr></table><span class="postbody">
<br/>
It's in newlib.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41028 - wintermute - Sun Apr 24, 2005 10:01 am</h4>
    <div class="postbody"><span class="postbody">NDS has an RTC ...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
