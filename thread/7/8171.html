<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>unable to produce gba-binaries using my toolchain - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > unable to produce gba-binaries using my toolchain</h2>
<div id="posts">
<div class="post">
    <h4>#67396 - hns - Tue Jan 17, 2006 7:56 pm</h4>
    <div class="postbody"><span class="postbody">hello there.. 
<br/>
<br/>
i've built a cross compiler, but i'm unable to produce any binaries, which the emulators  (VirtualBoy Advance and Boycott) are able to run.. 
<br/>
<br/>
i've used a few different  gcc-packages / binutils / newlib combinations, but everytime i run a binary in the emulatoir, the emulator just shows a black screen, not doing anything...  (The emulator just works fine, using other precompiled gba-binaries. )
<br/>
<br/>
i'm using: debian amd64 sarge, binutils-2.12.1, gcc-3.1, newlib-1.10.0 (from the devkitadv distribution)
<br/>
<br/>
i use a pong example somewhere from the net ( i don't know where i got it..).
<br/>
<br/>
i can compile the source to an elf binary and objcopy to a gba-binary. But im unable to run it!..
<br/>
<br/>
What am i doing wrong? i guess its my compiler but i have no idea how to debug..
<br/>
<br/>
any hints
<br/>
<br/>
regards sven</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67398 - kusma - Tue Jan 17, 2006 8:01 pm</h4>
    <div class="postbody"><span class="postbody">do you have a reason not to simply use devkitPro?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67400 - hns - Tue Jan 17, 2006 8:06 pm</h4>
    <div class="postbody"><span class="postbody">i considered.. but i'm unable to access <a href="http://www.devkitpro.org/downloads.shtml" target="_blank">http://www.devkitpro.org/downloads.shtml</a>
<br/>
<br/>
do you know any other url?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67401 - hns - Tue Jan 17, 2006 8:10 pm</h4>
    <div class="postbody"><span class="postbody">me again... i made it thru <a href="http://www.devkitpro.org/downloads.shtml" target="_blank">http://www.devkitpro.org/downloads.shtml</a>
<br/>
<br/>
but i only see a windows version to download.. so where to fetch packages for x86_64 linux? 
<br/>
<br/>
P.S:  i know, this topic belongs to the "newbie section".. but i just wanted to know why my compiler is *?"%-up</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67971 - hns - Sat Jan 21, 2006 7:29 pm</h4>
    <div class="postbody"><span class="postbody">ok.. i have a working toolchain now. 
<br/>
<br/>
i've used the buildscripts from devkitpro.. which caused to same effect after compiling a demo.
<br/>
<br/>
The problem boils down, that my tool chain (now the devkitARM one) creates binaries whit the wrong entry point and section layout.. 
<br/>
<br/>
i've downloaded the crt0.o/linkerscript files from this site and voil?:
<br/>
<br/>
i can compile !!AND RUN!! gba files.. Juhu.. 
<br/>
<br/>
Sadly i have to use the following procedure:
<br/>
<br/>
arm-elf-gcc -c pong.c
<br/>
arm-elf-ld -Tlnkscript crt0.o pong.o -lc 
<br/>
arm-elf-objcopy -O binary a.out test.bin
<br/>
<br/>
if i dont, i get errors like:
<br/>
<br/>
arm-elf-gcc -Tlnkscript -o test27.elf main.c -lc
<br/>
<br/>
/opt/devkitARM/lib/gcc/arm-elf/4.0.1/../../../../arm-elf/bin/ld: section .data [0000000008009b64 -&gt; 0000000008009b6b] overlaps section .rodata [0000000008000480 -&gt; 0000000008009b8b]
<br/>
/opt/devkitARM/lib/gcc/arm-elf/4.0.1/../../../../arm-elf/bin/ld: section .jcr [0000000008009b6c -&gt; 0000000008009b6f] overlaps section .rodata [0000000008000480 -&gt; 0000000008009b8b]
<br/>
collect2: ld returned 1 exit status
<br/>
<br/>
<br/>
<br/>
Now: if someone is still reading my monolg here, there are some questions that came up during this odysee:
<br/>
<br/>
- could someone point me to some resource explaining the crt0.o file for the gba?
<br/>
- what causes the error above? 
<br/>
<br/>
Thanks in "Advance"(TM)
<br/>
<br/>
Hns</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67988 - Cearn - Sat Jan 21, 2006 10:24 pm</h4>
    <div class="postbody"><span class="postbody">devkitARM uses the '-specs' linker option to let the linker know where to find the boot code (ctr0.s) and where the sections are. See <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=418" target="_blank">the FAQ on C/C++</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68003 - hns - Sat Jan 21, 2006 11:47 pm</h4>
    <div class="postbody"><span class="postbody">thank you!!... i just was not able to find those hints until now..
<br/>
<br/>
sorry for wasting your time..
<br/>
<br/>
greez hns
<br/>
<br/>
P.S: it is all written down in the FAQ..  RTFM! RTFM! shame on me..</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
