<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>16 bit colour question. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > 16 bit colour question.</h2>
<div id="posts">
<div class="post">
    <h4>#11001 - arthur - Tue Sep 23, 2003 9:55 am</h4>
    <div class="postbody"><span class="postbody">Ok I know that you can use a macro like such:
<br/>
<br/>
  #define RGB_16BIT(r,g,b) (r+(g&lt;&lt;5)+(b&lt;&lt;10))
<br/>
<br/>
to encode a 16 bit value with rgb components. Now how would you go the other way round. i.e.  take a 16bit value and return the 3 component values as u8's?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11005 - torne - Tue Sep 23, 2003 10:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define RED(rgb) (rgb &amp; 0xFF)
<br/>
#define GREEN(rgb) ((rgb &gt;&gt; 5) &amp; 0xFF)
<br/>
#define BLUE(rgb) ((rgb &gt;&gt; 10) &amp; 0xFF)</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11006 - Burton Radons - Tue Sep 23, 2003 10:43 am</h4>
    <div class="postbody"><span class="postbody">Err, no...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define REG_16BIT_RED(rgb) ((rgb) &amp; 31)
<br/>
#define REG_16BIT_GREEN(rgb) (((rgb) &gt;&gt; 5) &amp; 31)
<br/>
#define REG_16BIT_BLUE(rgb) (((rgb) &gt;&gt; 10) &amp; 31)
<br/>
#define RGB_16BIT(r,g,b) ((r)+((g)&lt;&lt;5)+((b)&lt;&lt;10)) 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
There's the problem with the bitwise AND constant, and that one should always surround macro parameter usage with parentheses; if not, then when the expansion has a lower precedence than the arithmetic they're put in, the macro will behave incorrectly.  If you're lucky it'll give you a warning (a nigh incomprehensible warning), but more often than not you'll end up staring slack-jawed at code which looks solid but is behaving crazily.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11007 - torne - Tue Sep 23, 2003 10:50 am</h4>
    <div class="postbody"><span class="postbody">Gah, it's too early in the morning. =)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
