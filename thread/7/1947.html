<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>link error using fcvtbuf (__eqdf2 etc) in DevKitAdv R4 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > link error using fcvtbuf (__eqdf2 etc) in DevKitAdv R4</h2>
<div id="posts">
<div class="post">
    <h4>#10004 - cesium - Sun Aug 24, 2003 5:07 pm</h4>
    <div class="postbody"><span class="postbody">I need to convert a float to an ascii string with DevKitAdv R4.
<br/>
If you know a way to do this, please post.
<br/>
<br/>
I am trying to use the fcvtbuf function.
<br/>
I included the stdlib.h header.
<br/>
My code compiled just fine.
<br/>
But at link time... (barf!)
<br/>
C:\GBA\devkitadv\arm-agb-elf\lib\interwork/libc.a(ecvtbuf.o): In function `_gcvt':
<br/>
../../../../../../gcc-3.0.2/newlib/libc/stdlib/ecvtbuf.c:350: undefined reference to `__eqdf2'
<br/>
../../../../../../gcc-3.0.2/newlib/libc/stdlib/ecvtbuf.c:361: undefined reference to `__ledf2'
<br/>
../../../../../../gcc-3.0.2/newlib/libc/stdlib/ecvtbuf.c:347: undefined reference to `__negdf2'
<br/>
<br/>
my make file linker cmd is:
<br/>
ld $(LDFLAGS) -o WinWork1.elf $(O_FILES) -lm -lstdc++ -lgcc -lc
<br/>
<br/>
Did I leave out something? I tried including a bunch of other
<br/>
libs...no joy. Any ideas?
<br/>
<br/>
Thanks!
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10010 - Lupin - Sun Aug 24, 2003 5:59 pm</h4>
    <div class="postbody"><span class="postbody">yeah, I had the same problem some time ago... I moved over to ARM ADS though, it's much easier.
<br/>
<br/>
Why do you want to convert an float to an ascii char? This doesn't make any sense to me</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10014 - tepples - Sun Aug 24, 2003 7:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>cesium wrote:</b></span></td> </tr> <tr> <td class="quote">ld $(LDFLAGS) -o WinWork1.elf $(O_FILES) -lm -lstdc++ -lgcc -lc</td> </tr></table><span class="postbody">
<br/>
You usually need another -lgcc after -lc.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10023 - cesium - Sun Aug 24, 2003 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Lupin, thanks for the reply. I'll look at the ARM ADS. Do we just use
<br/>
our usual crtbegin and end with it? Is it tough to get it up and running
<br/>
for the GBA?
<br/>
<br/>
Also, Lupin, I'm trying to produce an ASCII string that is a representation
<br/>
of the value of a float (not a single char).
<br/>
<br/>
Tepples, thank you for the help. I added a -lgcc after my -lc and
<br/>
everything linked OK!!! I'm going to test the functionality now...
<br/>
I've read some of your help docs before, good work.
<br/>
<br/>
Thanks all,
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10024 - cesium - Sun Aug 24, 2003 10:17 pm</h4>
    <div class="postbody"><span class="postbody">Yup! It works!
<br/>
Thanks again,
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10029 - tom - Sun Aug 24, 2003 10:53 pm</h4>
    <div class="postbody"><span class="postbody">why don't you simply do the linking step via the gcc frontend and let it sort everything out by itself ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10037 - Gordon - Mon Aug 25, 2003 4:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tom wrote:</b></span></td> </tr> <tr> <td class="quote">why don't you simply do the linking step via the gcc frontend and let it sort everything out by itself ?</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10039 - tom - Mon Aug 25, 2003 10:09 am</h4>
    <div class="postbody"><span class="postbody">: What is the GCC frontend?
<br/>
<br/>
it's the program called gcc. this is not the compiler itself, just a frontend which, depending on the type of input files (and command line switches), calls the real compiler, as, ld, the preprocessor only...
<br/>
<br/>
it can make your life easier, since for example it knows which libraries to link to and in which order to throw them at the linker.
<br/>
<br/>
oh yes...if you're linking c++ programs you should use g++ instead of gcc, as gcc doesn't supply the -lstdc++ to ld, only g++ does that (i think).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10042 - Lupin - Mon Aug 25, 2003 2:09 pm</h4>
    <div class="postbody"><span class="postbody">I think it's better to have control about the compile process (even though I don't know how to use this "control" :D), so letting gcc link everything is not the way I would compile my project.
<br/>
<br/>
cesium: ARM ADS doesn't need an crtbegin.o and crtend.o, but it still needs the start file of course, the compiler works for every arm cpu and it's not specifically for gba programming, but it includes an very good emulator/debugger wich you could use to execute your code step by step and check the values of each register/variable in code (the debugger doesn't support swi calls though, wich is an real drawback for me :()</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10045 - tom - Mon Aug 25, 2003 2:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">I think it's better to have control about the compile process (even though I don't know how to use this "control" :D)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
pff...that's the point -  if you don't know how to do it, let gcc mess with ld and you'll be fine :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10142 - cesium - Wed Aug 27, 2003 10:23 pm</h4>
    <div class="postbody"><span class="postbody">I am soooo clueless when it comes to make files.
<br/>
Tom, can you suggest a resource that I can read to
<br/>
learn more about the use of gcc and ld (and g++) in
<br/>
the context of a make file?
<br/>
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10151 - tom - Thu Aug 28, 2003 11:06 am</h4>
    <div class="postbody"><span class="postbody">cesium:
<br/>
gnu documentation comes to mind. at least that's what i use.
<br/>
<a class="postlink" href="http://www.gnu.org/manual/manual.html" target="_blank">http://www.gnu.org/manual/manual.html</a>
<br/>
<br/>
(often this are not only reference manuals, but real books including tutorials, like the manuals for flex and bison)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10170 - cesium - Thu Aug 28, 2003 9:43 pm</h4>
    <div class="postbody"><span class="postbody">thx
<br/>
Cs</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
