<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>What is ASSERT? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > What is ASSERT?</h2>
<div id="posts">
<div class="post">
    <h4>#17362 - LOst? - Sat Mar 06, 2004 11:18 pm</h4>
    <div class="postbody"><span class="postbody">I've seen ASSERT's in some game code. It looks like some debug output and may be very informative?
<br/>
<br/>
How do I create an ASSERT function/macro?
<br/>
<br/>
What does it do?
<br/>
How do it work?
<br/>
What's good with it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17363 - sajiimori - Sat Mar 06, 2004 11:30 pm</h4>
    <div class="postbody"><span class="postbody">It's not a standard thing.  The C standard library has assert(), but that's not appropriate for GBA because it calls abort() if the assertion fails.  Anyway, if you know how to write macros, you can write one to do whatever you want when it fails.
<br/>
<br/>
Example:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define my_assert(x) \
<br/>
if(!(x)) { \
<br/>
  my_debug_output("assertion failed at %d: %s\n", \
<br/>
    __LINE__, #x); \
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
(The stringize syntax is just #x right?)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17365 - Miked0801 - Sat Mar 06, 2004 11:37 pm</h4>
    <div class="postbody"><span class="postbody">Learn to love ASSERT - it is your best friend.
<br/>
<br/>
What it does is stop game execution and hopefully report which .c module and line number the error occured on along with optional useful text.
<br/>
<br/>
You use asserts to make checks that certain vars/parameters are within expected ranges.  Here's an example:
<br/>
<br/>
void PlotPixel(u32 x, u32 y, u8 color)
<br/>
{
<br/>
    ASSERT(x &lt; 240);
<br/>
    ASSERT(y &lt; 160);
<br/>
<br/>
  // Do draw code here
<br/>
}
<br/>
<br/>
Now if ever this function receives out of bounds data, you'll know about it immediately and will be able to fix it.  Other common locations for asserts include:
<br/>
  the default: section of switch statements
<br/>
<br/>
  anything function that takes a pointer as an argument can be checked to see if the argument is a valid GBA pointer (and depending, not NULL)
<br/>
<br/>
  in memory management code to make sure that you aren't corrupting mem blocks (writing past the ends of arrays)
<br/>
<br/>
  anywhere else where you want to make sure data is valid.  A good, carefully thought out assert will save you more time than you can possibly imagine.
<br/>
<br/>
void ASSERT(BOOL value)
<br/>
{
<br/>
   if(!value)
<br/>
   {
<br/>
     write out debug info.
<br/>
     while(special escape input routine is false)
<br/>
     {
<br/>
     }
<br/>
  }
<br/>
}
<br/>
<br/>
Keep in mind that asserts do slow game execution and should be disabled when making a "Gold" build.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17368 - LOst? - Sat Mar 06, 2004 11:46 pm</h4>
    <div class="postbody"><span class="postbody">So how do I get the line number where the assert was called? I don't know that much about compilers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17375 - dagamer34 - Sun Mar 07, 2004 1:02 am</h4>
    <div class="postbody"><span class="postbody">__FILE__ - this tells you what file the assert occured in
<br/>
<br/>
__LINE__ - this tells you what line the error occured on<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17379 - LOst? - Sun Mar 07, 2004 2:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">__FILE__ - this tells you what file the assert occured in
<br/>
<br/>
__LINE__ - this tells you what line the error occured on</td> </tr></table><span class="postbody">
<br/>
Thanks! This will make my exception handlers much better ^_^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
