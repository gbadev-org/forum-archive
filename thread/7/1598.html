<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Overlapping arrays - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Overlapping arrays</h2>
<div id="posts">
<div class="post">
    <h4>#8178 - Alunze - Thu Jul 03, 2003 9:50 pm</h4>
    <div class="postbody"><span class="postbody">The situation is this: I have two .c files I want to link together. My problem is that both, among other thigs, declare an array, and when I link them, in the resulting program the arrays overlap themselves (share memory positions). What could be causing this and/or what could I do to prevent this from happening?
<br/>
    Thanks in *advance* &gt;_6</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8180 - niltsair - Thu Jul 03, 2003 9:55 pm</h4>
    <div class="postbody"><span class="postbody">How big are your arrays? The Gba only has 32kb of Ram and 256kb of external Ram.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8186 - Alunze - Fri Jul 04, 2003 12:39 am</h4>
    <div class="postbody"><span class="postbody">Well they aren't that big, one weights 2400 bytes and the other 1204.
<br/>
<br/>
Wait, you weren't really wrong. Those arrays aren't very big, but I have other which is no less than 48000 bytes long. This one should really reside in ROM, but I kept it in RAM provisionally.
<br/>
<br/>
What takes me to think: if variables are stored in internal RAM and the compiler/linkscript/whatever doesn't check if the 32K limit is surpassed, how could I allocate things in external RAM in case I needed room for mode data?
<br/>
<br/>
Thanks for the hint niltsair :).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8190 - Cyberman - Fri Jul 04, 2003 2:41 am</h4>
    <div class="postbody"><span class="postbody">You can have a 48000 "byte" sized easily in the GBA. However it behoves one to use ones resources wisely in the GBA.
<br/>
<br/>
Anyhow use rom define the array const.
<br/>
If you are putting information into the array then you can't use it as a const. Etc. if you define the array with predefined data but do not specify const it loads the data from ROM into memory.
<br/>
<br/>
IRAM is generally used for local variables (for functions) and the stack.
<br/>
WRAM is generally used for things you allocate such has big arrays etc.
<br/>
<br/>
Cyb</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8193 - niltsair - Fri Jul 04, 2003 4:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define IN_EWRAM __attribute__ ((section (".ewram")))
<br/>
u16 gWorkPic[38400] IN_EWRAM;</td> </tr></table><span class="postbody">
<br/>
Take note that External Ram has a much slower access speed.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
