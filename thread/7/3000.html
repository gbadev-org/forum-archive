<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Why doesn't C/C++ have... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Why doesn't C/C++ have...</h2>
<div id="posts">
<div class="post">
    <h4>#17373 - LOst? - Sun Mar 07, 2004 12:15 am</h4>
    <div class="postbody"><span class="postbody">Why doesn't C/C++ have a rotate operator? I love the ROR, ROL instructions that most assembly languages have, but C/C++ only have the operator&gt;&gt; and operator&lt;&lt;.
<br/>
C/C++ even have the typical assembly "NOT" instruction as operator~.
<br/>
<br/>
Why doesn't it have rotate operators?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17374 - tepples - Sun Mar 07, 2004 12:47 am</h4>
    <div class="postbody"><span class="postbody">The compiler will optimize (a &lt;&lt; 20) | (a &gt;&gt; 12) into the assembly code that represents (a ROL 20). You're free to make a static inline function for that.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17376 - LOst? - Sun Mar 07, 2004 1:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The compiler will optimize (a &lt;&lt; 20) | (a &gt;&gt; 12) into the assembly code that represents (a ROL 20). You're free to make a static inline function for that.</td> </tr></table><span class="postbody">
<br/>
<br/>
How can a shift become a rol? With a static inline function like?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17378 - tepples - Sun Mar 07, 2004 2:02 am</h4>
    <div class="postbody"><span class="postbody">Bit-rotation is equivalent to the OR of two shifts, and the compiler should recognize it if you do it right.
<br/>
<br/>
You can learn what inline functions are in any relatively recent book about C.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17380 - LOst? - Sun Mar 07, 2004 2:25 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Bit-rotation is equivalent to the OR of two shifts, and the compiler should recognize it if you do it right.
<br/>
<br/>
You can learn what inline functions are in any relatively recent book about C.</td> </tr></table><span class="postbody">
<br/>
<br/>
Oh, thanks for the info! ^_^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17407 - Paul Shirley - Sun Mar 07, 2004 2:56 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:03 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#17425 - LOst? - Sun Mar 07, 2004 8:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Paul Shirley wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The compiler will optimize (a &lt;&lt; 20) | (a &gt;&gt; 12) into the assembly code that represents (a ROL 20). You're free to make a static inline function for that.</td> </tr></table><span class="postbody">
<br/>
Beware: that only works for unsigned values. Its essential you code this as an inline function(s) with unsigned parameter or it will trip you up later.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for the info. I will take that in mind</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17439 - maleu - Mon Mar 08, 2004 5:43 am</h4>
    <div class="postbody"><span class="postbody">yes, but that doesn't let you use this nice little construct:
<br/>
<br/>
ror r0, #2
<br/>
bne 0f      // jump if bit 0 of r0 is set
<br/>
bcs 1f       // jump if bit 1 of r0 is set
<br/>
// fall trough otherwise
<br/>
<br/>
very useful e.g. for keypad input. no wat to do this in c, right?
<br/>
<br/>
other question: how to call bios functions in c (gcc) without jumping to a dummy function that contains nothing but the swi?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17451 - Paul Shirley - Mon Mar 08, 2004 4:23 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:03 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#17455 - tepples - Mon Mar 08, 2004 5:41 pm</h4>
    <div class="postbody"><span class="postbody">Wait for <a class="postlink" href="http://www.cminusminus.org/" target="_blank">C--</a>, a cross between C and assembly language that abstracts common features of 32-bit CPUs (such as a carry flag) to make it useful as a compiler's code generator.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17456 - Paul Shirley - Mon Mar 08, 2004 6:35 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:03 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#17458 - Miked0801 - Mon Mar 08, 2004 8:06 pm</h4>
    <div class="postbody"><span class="postbody">What no Carry?  Arghg, I'm melting!  All those years of GBC porgramming with only C and Z.  Wasted, wasted ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
