<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Kinda collision-detection... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Kinda collision-detection...</h2>
<div id="posts">
<div class="post">
    <h4>#7912 - SNES-lover - Sat Jun 28, 2003 12:06 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
I'm working on a Puyo-Puyo-like game for GBA, using HAM.
<br/>
I've come to the point where I'll make the blobs vanish if four or more float together...
<br/>
Anyone have ideas on how I'll make this?
<br/>
I have a "map" of the playing field, showing the blobs, like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">CSlime* PlayMap[5*8] = {
<br/>
0,0,0,0,0,
<br/>
0,0,0,0,0,
<br/>
0,0,0,0,0,
<br/>
0,0,0,0,0,
<br/>
0,0,0,0,0,
<br/>
0,Slime[1],0,0,0,
<br/>
Slime[2],Slime[3],Slime[5],Slime[4],0,
<br/>
Slime[10],Slime[9],Slime[7],Slime[6],0,
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
CSlime is the class used for the slimes, so this is a map of pointers to the different blobs.
<br/>
Each of them also has a "color"-attribute, ranging from 1 to 4, where 1, for example, is red.
<br/>
They also have an "ObjNo"-number, showing what sprite the slime in question possesses.
<br/>
The active, moveable blob has the same ObjNo as the total number of blobs on-screen, as it is the last to come out, so: Slime</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">[SlimesOnScreen].Active = true;</td> </tr></table><span class="postbody">
<br/>
<br/>
How should a function that detects if four or more blobs of the same color are connecting look?
<br/>
And how do I do when one blob has dissappeared, then the ObjNos become fucked up...
<br/>
<br/>
I'm not too good in this, OK? Help appreciated.
<br/>
<br/>
Thanks in Advance<br/>_________________<br/>In a realm beyond sight,
<br/>
the sky shines gold, not blue.
<br/>
There, the Triforce might
<br/>
make mortal dreams come true.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7915 - sgeos - Sat Jun 28, 2003 4:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SNES-lover wrote:</b></span></td> </tr> <tr> <td class="quote">Hi!
<br/>
I'm working on a Puyo-Puyo-like game for GBA, using HAM.
<br/>
I've come to the point where I'll make the blobs vanish if four or more float together...
<br/>
Anyone have ideas on how I'll make this?</td> </tr></table><span class="postbody">
<br/>
<br/>
Tepples used a span based fill algorithm in his tetris game.  I can't think of anything better.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7918 - tepples - Sat Jun 28, 2003 5:56 pm</h4>
    <div class="postbody"><span class="postbody">I made a puyo clone for PC a long time ago, as part of <span style="font-style: italic">freepuzzlearena</span> (<a class="postlink" href="http://www.pineight.com/fpa/" target="_blank">http://www.pineight.com/fpa/</a>). Take whatever you want from my puyo clone as you abide by the GNU GPL. And yes, I copy-pasted the same flood-fill code, with one change: count the number of blocks whose color was changed.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7952 - SNES-lover - Sun Jun 29, 2003 8:35 am</h4>
    <div class="postbody"><span class="postbody">Hmm...
<br/>
I really don't get how your Floodfill-stuff works, tepples... :\
<br/>
What does the call
<br/>
            ff = KAFloodFill(x, y, k | 16); 
<br/>
do?
<br/>
<br/>
I really don't get what that part of the code does, that "simple" detection-part.
<br/>
<br/>
Could you please make a further explanation?<br/>_________________<br/>In a realm beyond sight,
<br/>
the sky shines gold, not blue.
<br/>
There, the Triforce might
<br/>
make mortal dreams come true.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7982 - tepples - Sun Jun 29, 2003 9:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SNES-lover wrote:</b></span></td> </tr> <tr> <td class="quote">Hmm...
<br/>
I really don't get how your Floodfill-stuff works, tepples</td> </tr></table><span class="postbody">
<br/>
It looks to the left for matching colors, looks to the right for matching colors, fills the line, then looks above and below for matching colors and calls itself recursively.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I really don't get what that part of the code does, that "simple" detection-part.</td> </tr></table><span class="postbody">
<br/>
It fills the area with color (k | 16), which I have designated to mean "color k, but this block has been seen before in this pass through the playfield". The 'ff' is the number of blocks filled.
<br/>
<br/>
I wrote that code four years ago, based on a QBasic game I had written a year and a half before that. When I started writing QBasic games, I had just weaned myself from Applesoft BASIC, which had line numbers and two-letter variable names. When I port my puyo clone to GBA, I'll probably use more descriptive names.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7996 - sgeos - Mon Jun 30, 2003 6:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I wrote that code four years ago, based on a QBasic game I had written a year and a half before that. When I started writing QBasic games, I had just weaned myself from Applesoft BASIC, which had line numbers and two-letter variable names.</td> </tr></table><span class="postbody">
<br/>
<br/>
How long have you been coding games?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7998 - tepples - Mon Jun 30, 2003 6:33 am</h4>
    <div class="postbody"><span class="postbody">I began to learn Applesoft BASIC in 4th grade (== 1991). My first real game was a video poker sim in 1994, part BASIC and part 6502 assembly language. I found the PC and QBasic in 1997 and C in 1998. When I started learning how to write homebrew software for consoles in late 1999, I chose the NES partly because of my experience with 6502 asm.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7999 - sgeos - Mon Jun 30, 2003 8:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I began to learn Applesoft BASIC in 4th grade (== 1991)...</td> </tr></table><span class="postbody">
<br/>
<br/>
That explains your in (presumably relatively) in-depth knowledge of most of the technical questions that pop up here.  How were you first introduced to (programming stuff)?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8021 - tepples - Mon Jun 30, 2003 8:40 pm</h4>
    <div class="postbody"><span class="postbody">My very first programming experience was Logo in second grade (fall 1988). I was introduced to video games by the NES that I got for Christmas 1989.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8047 - sgeos - Tue Jul 01, 2003 6:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">My very first programming experience was Logo in second grade (fall 1988).</td> </tr></table><span class="postbody">
<br/>
<br/>
Was that for school, or something you did on your own?  (I'm not familiar with Logo... it almost sounds like I've heard of it...)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8061 - niltsair - Tue Jul 01, 2003 3:05 pm</h4>
    <div class="postbody"><span class="postbody">Logo is a programming language they use in school to teach kids, stands for Logowriter. There's an icon in the shape of a turtle, and you tell it to move x Units, rotate Left by Y, draw a line, etc.. I've done my first thing on it too, some rather limited Final Fantasy clone ;-) I haven't been programming for games 'till i discovered it could be done on the gba, last summer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8081 - sgeos - Tue Jul 01, 2003 5:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>niltsair wrote:</b></span></td> </tr> <tr> <td class="quote">Logo is a programming language they use in school to teach kids, stands for Logowriter. There's an icon in the shape of a turtle</td> </tr></table><span class="postbody">
<br/>
<br/>
I think I've used that actually, although I did everything manually...  you can change the color of the lines to green and white, etc, right?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8082 - niltsair - Tue Jul 01, 2003 6:01 pm</h4>
    <div class="postbody"><span class="postbody">Yes. You could also draw some shape for the turtle and use it for stamps. 
<br/>
<br/>
The 'programming' part was mostly a sequence of intructions to the turtles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8083 - sgeos - Tue Jul 01, 2003 7:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>niltsair wrote:</b></span></td> </tr> <tr> <td class="quote">Yes. You could also draw some shape for the turtle and use it for stamps. 
<br/>
<br/>
The 'programming' part was mostly a sequence of intructions to the turtles.</td> </tr></table><span class="postbody">
<br/>
<br/>
I think I remember rotating by an arbitrary amount and then telling it to move 1000 times or so.  Sometimes it would make patterns or completely fill the screen.  I recall the version I used having a mirror option and a 4 turtle mirror option.
<br/>
<br/>
-Brendan
<br/>
<br/>
PS Sorry SNES-lover, this got massively off topic.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
