<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>videobuffer picture manipulation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > videobuffer picture manipulation</h2>
<div id="posts">
<div class="post">
    <h4>#4124 - misehert - Wed Mar 19, 2003 9:36 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to add an animated game intro so the picture (in videobuffer) compresses in from both left and right to leave a vertical line down the middle.  I have set this up using several 240x160 data frames and DMA, but the memory of data file is huge - over 1.0meg.  Does anyone know a C/(C++) demo with source or a tutorial that shows how to manipulate picture with this type of animation effect?<br/>_________________<br/>Sorry, I'm just a Stoopid Noobie...
<br/>
<br/>
thank god for video x 4 - i can see again</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4127 - tepples - Wed Mar 19, 2003 11:13 pm</h4>
    <div class="postbody"><span class="postbody">If you're thinking what I think you're thinking (an effect somewhat similar to that of closing an open book), remember that modes 3-5 can be Mode 7'd.  Try increasing parameter 'a' of background 2's affine registers a bit every frame; it'll compress your image toward the left.  Then increase 'x_origin' to compensate and keep the image centered.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4170 - misehert - Fri Mar 21, 2003 11:41 pm</h4>
    <div class="postbody"><span class="postbody">I'm still struggling with this.  Some good advice above, and I've tried to read up on Mode 7, but it seems much more advanced for what I'm trying to do, I've been able to get the picture to squeeze in from the right, but I can't seem to move the x origin.  Also when it does squeeze from the right it seems to cut in half each time, the x's just control the speed?
<br/>
[code]DoIntro(void)
<br/>
{
<br/>
     SetMode( MODE_4 | BG2_ENABLE );
<br/>
<br/>
     REG_DMA3SAD = (u32)INTROPalette;
<br/>
     REG_DMA3DAD = (u32)BGPaletteMem;
<br/>
     REG_DMA3CNT = 256 | DMA_32NOW;
<br/>
<br/>
for (int x = 1; x &lt; 16; x++)
<br/>
{
<br/>
     REG_DMA3SAD = (u32)INTROData;
<br/>
     REG_DMA3DAD = (u32)VideoBuffer;
<br/>
     REG_DMA3CNT = (160*120) | DMA_32NOW;
<br/>
     Pause(10);
<br/>
     REG_BG2PA = 240 + x*x*x;  //from trial and error
<br/>
     REG_BG2X = (-119-x*x)&lt;&lt;8;//can't get this to work to increase x origin   
<br/>
//   REG_BG2HOFS = ?????;        //or should this be the x origin?
<br/>
}
<br/>
}[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4174 - tepples - Sat Mar 22, 2003 2:40 am</h4>
    <div class="postbody"><span class="postbody">Here's what works for me:
<br/>
<br/>
Let wid vary from 4 (collapsed) to 256 (full screen).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int pa = 65536 / wid;
<br/>
REG_BG2PA = pa;
<br/>
REG_BG2X = (120&lt;&lt;8) - 120*pa;
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4213 - misehert - Sun Mar 23, 2003 9:26 pm</h4>
    <div class="postbody"><span class="postbody">Man, you were right on... how did you ever figure that out?  I think I see the bit16 divided by bit 2 to bit 8 range, and the 120 for screen center x, but I'm in awe.  Thanks.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
