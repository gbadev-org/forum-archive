<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Very Stupid Question: Which Library Implements sin()? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Very Stupid Question: Which Library Implements sin()?</h2>
<div id="posts">
<div class="post">
    <h4>#8319 - dchartier - Tue Jul 08, 2003 5:34 am</h4>
    <div class="postbody"><span class="postbody">The title says it all: My linker can't find the implementations for sin() and cos().  I run gcc with the parameters:
<br/>
<br/>
     gcc sketch.c sketch.elf -I &lt;include-dir&gt;
<br/>
<br/>
I've installed the DevKit Advance from <a href="http://devkitadv.sourceforge.net/download.html" target="_blank">http://devkitadv.sourceforge.net/download.html</a> with the following modules: 
<br/>
<br/>
     - core
<br/>
     - binutils
<br/>
     - gcc
<br/>
     - newlib
<br/>
<br/>
Under devkitadv\lib\gcc-lib\arm-agb-elf\3.0.2, I find libgcc.a, but an "nm" on this file finds neither sin() nor cos().  The only place I could find such implementations was in devkitadv\arm-agb-elf\lib\libm.a, but I can't get gcc to link to this library.  I figure that I must be doing something wrong.
<br/>
<br/>
Can anyone tell me what I need to do to get this project to link?
<br/>
<br/>
Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8320 - tepples - Tue Jul 08, 2003 5:59 am</h4>
    <div class="postbody"><span class="postbody">It'd be most efficient to write your own cos() and sin() based on lookup tables, but if you really want to use the dog-slow built-in version in libm.a:
<br/>
<ol type="1"><li>#include &lt;math.h&gt;</li><li>link with -lm</li></ol><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8321 - dchartier - Tue Jul 08, 2003 6:03 am</h4>
    <div class="postbody"><span class="postbody">[quote="tepples"]It'd be most efficient to write your own cos() and sin() based on lookup tables, but if you really want to use the dog-slow built-in version in libm.a:
<br/>
[list=1][*]#include &lt;math.h&gt;[*]link with -lm[/list][/quote]
<br/>
<br/>
Thank you!
<br/>
<br/>
Actually, I was using the standard trig functions to generate in-memory sine and cosine look-up tables at program start-up.  But your advice is well taken.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8348 - Archeious - Tue Jul 08, 2003 9:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dchartier wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">It'd be most efficient to write your own cos() and sin() based on lookup tables, but if you really want to use the dog-slow built-in version in libm.a:
<br/>
<ol type="1"><li>#include &lt;math.h&gt;</li><li>link with -lm</li></ol></td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you!
<br/>
<br/>
Actually, I was using the standard trig functions to generate in-memory sine and cosine look-up tables at program start-up.  But your advice is well taken.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I would suggest pregenerating this on your PC as a .h file and include that in your project. Just a thought, they are few and far between so I thought I would share it. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8442 - dchartier - Thu Jul 10, 2003 8:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Archeious wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dchartier wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">It'd be most efficient to write your own cos() and sin() based on lookup tables, but if you really want to use the dog-slow built-in version in libm.a:
<br/>
<ol type="1"><li>#include &lt;math.h&gt;</li><li>link with -lm</li></ol></td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you!
<br/>
<br/>
Actually, I was using the standard trig functions to generate in-memory sine and cosine look-up tables at program start-up.  But your advice is well taken.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I would suggest pregenerating this on your PC as a .h file and include that in your project. Just a thought, they are few and far between so I thought I would share it. :)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Good point: I noticed that invoking the trigonometic functions 720 times was agonizingly slow!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
