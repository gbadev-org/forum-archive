<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBC sound channels - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > GBC sound channels</h2>
<div id="posts">
<div class="post">
    <h4>#6642 - nitro2k01 - Sat May 31, 2003 3:58 pm</h4>
    <div class="postbody"><span class="postbody">I tried to kick the GBC sound channels going with this piece of code
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    *(u16*)0x04000080 = 0xFF77;
<br/>
    *(u16*)0x04000062 = 0xFFFF;
<br/>
    *(u16*)0x04000064 = 0xFFFF;
<br/>
</td> </tr></table><span class="postbody">
<br/>
but it's not working. What's wrong?
<br/>
<br/>
I'm using HAM if it makes any difference.[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6651 - tepples - Sun Jun 01, 2003 2:20 am</h4>
    <div class="postbody"><span class="postbody">For one thing, you have to enable the GBC sound to both left and right speaker outputs and set its output volume with 0x04000080.  You may also have to turn on the sound circuitry (0x04000084) as well; some shells turn it off.
<br/>
<br/>
Learn more: <a class="postlink" href="http://belogic.com/gba/" target="_blank">belogic.com</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7017 - mpowell - Fri Jun 06, 2003 7:23 am</h4>
    <div class="postbody"><span class="postbody">Has anyone done any quick and dirty mixing of sounds? 
<br/>
<br/>
I haven't tried it yet, but I was going to just add samples together and divide by 2 to mix them, but I know that this isn't the best thing to do.  
<br/>
<br/>
Does anyone know how crappy this "add and divide samples" method sounds? 
<br/>
<br/>
Can you get away with adding four samples and dividing by 4?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7020 - gb_feedback - Fri Jun 06, 2003 11:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I haven't tried it yet, but I was going to just add samples together and divide by 2 to mix them, but I know that this isn't the best thing to do. </td> </tr></table><span class="postbody">
<br/>
Basically that's all there is to it. Of course if you do it for more and more channels the individual sounds are getting quieter and quieter, so it must be better to divide by less than the number of channels, and to then clamp the result of your (signed) addition to the max and min possible in an 8 bit signed number. In other words as you add two waveforms together, most of the time they don't add to larger values as they are cancelling each other. 
<br/>
<br/>
8 bits is not a lot to play with in a mixer - too loud and it clips, too quiet and a) noone can hear it and b) quantisation noise becomes obtrusive.
<br/>
<br/>
So in my opinion trial and error plays a big part here.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
