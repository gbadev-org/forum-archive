<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Out Of Memory... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Out Of Memory...</h2>
<div id="posts">
<div class="post">
    <h4>#23818 - Krakken - Thu Jul 22, 2004 6:28 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I have a very strange problem that I need some help with. I'm currently working on a project in which I am using my class library to control it all. I have several different classes to control the different aspects of the GBA workings and all are not amazingly huge. In my code I have declared aboout 15 of those classes as objects I can use. 
<br/>
<br/>
The problem I am having is my code executes flawlessly on all emulators but on the actual hardware some of my sprites were missing. I was trying to figure out the problem for hours before I finally realised that maybe it wasn't something in my code but rather a memory problem. You see, the sprites that wern't showing were the last class objects that are declared in my code. I swapped the order in which they are created and now the sprites that wern't showing before were showing and vice versa.
<br/>
<br/>
I checked the ExWRAM and IWRAM in the emulator and for some odd reason they were empty. Shouldn't the classes and my objects be stored here?
<br/>
<br/>
The very strange thing is that there is 256kb of ExWRAM and I can't see why it would be using an amount even close to this, so why am I getting this problem?
<br/>
<br/>
Thanks, Nat.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23819 - sajiimori - Thu Jul 22, 2004 6:52 am</h4>
    <div class="postbody"><span class="postbody">There's no way to tell from here.  It could be a bug completely unrelated to memory usage.  Memory usage will be the same on VBA and hardware.  Print lots of debug info to track your program.
<br/>
<br/>
IWRAM and EWRAM will be empty initially, but if you're using DevKitAdvance or similar then IWRAM will be used for a stack and for static/global variables, and EWRAM will be used for malloc/new.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23821 - tepples - Thu Jul 22, 2004 9:35 am</h4>
    <div class="postbody"><span class="postbody">Are you using the priority bits of the OAM entries? If so, go to the <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=418" target="_blank">FAQ</a>, read "Q: How do I draw things behind things?", and see if it helps any.
<br/>
<br/>
By default, the compiler puts <span style="font-style: italic">nothing</span> in EWRAM when building a ROM. You have to explicitly tell the compiler that you want something put in EWRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23826 - Krakken - Thu Jul 22, 2004 12:48 pm</h4>
    <div class="postbody"><span class="postbody">Nope not using priority bits. I assumed that if left unchanged that all sprites are drawn over the background?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23846 - Miked0801 - Fri Jul 23, 2004 12:21 am</h4>
    <div class="postbody"><span class="postbody">Too many sprites on a line perhaps?  Are the sprites that aren't appearing showing up as missing square?  If so, that may be your problem.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23866 - Krakken - Fri Jul 23, 2004 6:22 am</h4>
    <div class="postbody"><span class="postbody">I'm only using two sprites.
<br/>
It's so strange. Why would it work on _all_ emulators and not the hardware?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23874 - sgeos - Fri Jul 23, 2004 9:48 am</h4>
    <div class="postbody"><span class="postbody">Hardware is fussy.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23879 - Krakken - Fri Jul 23, 2004 12:54 pm</h4>
    <div class="postbody"><span class="postbody">Seems so. Can anyone recommend anything I should try?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23880 - poslundc - Fri Jul 23, 2004 1:37 pm</h4>
    <div class="postbody"><span class="postbody">Reduce the complexity of the problem. Pare your code down so you are just displaying simple sprites without all of the extra classes. Get it so that it works, then begin layering the complexity back on and find out at what point the hardware becomes inconsistent with the emulator.
<br/>
<br/>
Tracking down the source of a problem is oftentimes 90% of the work that goes into debugging.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
