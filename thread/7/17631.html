<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Assigning values (Solved) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Assigning values (Solved)</h2>
<div id="posts">
<div class="post">
    <h4>#176782 - MisterLogan - Tue Oct 11, 2011 5:51 am</h4>
    <div class="postbody"><span class="postbody">I don't know how to easily phrase this so I'll describe the situation. I have a function that gets run up to 32 times when i load a new map section. It loads sprite data into OAM and does some little index things. This function needs 5 variables that are in a struct called CurrentSprite (an x and y, a pointer to where the visual data is, and two pointers used to index OAM and object memory locations), four of which are loaded from another struct, named after whatever sprite is getting loaded, like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CurrentSprite.IOAM = &amp;sadghost.IOAM;
<br/>
CurrentSprite.IOBJ = &amp;sadghost.IOBJ;
<br/>
CurrentSprite.X = sadghost.X;
<br/>
CurrentSprite.Y = sadghost.Y;
<br/>
CurrentSprite.Tiles = (u16*) &amp;sadghostTiles;
<br/>
initNPCTiles(OBJMEMCounter, OAMCounter);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
initNPCTiles is the function. So my question is, is there any way to give the CurrentSprite struct a sprite structs attributes that doesn't take so much copying and pasting? Some way of giving a function "sadghost" and having it do this for me? I feel like this should be really obvious but my brain is not being very helpful. I guess at this point I would look silly and get past it rather than wait and do nothing.
<br/>
<br/>
Thanks</span><span class="gensmall"><br/><br/>Last edited by MisterLogan on Tue Oct 11, 2011 9:50 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#176783 - gauauu - Tue Oct 11, 2011 2:51 pm</h4>
    <div class="postbody"><span class="postbody">Why not use just a simple function for the assignment?  I'm not sure what you're types are named, so this is just an example:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
void assignSprite(struct CurrentSprite * currentSprite, struct SpriteAttribs * spriteAttribs, u16* tiles) {
<br/>
<br/>
  currentSprite-&gt;IOAM = &amp;(spriteAttribs-&gt;IOAM);
<br/>
  currentSprite-&gt;IOBJ = &amp;(spriteAttribs-&gt;IOBJ);
<br/>
  currentSprite-&gt;X = spriteAttribs-&gt;X;
<br/>
  currentSprite-&gt;Y = spriteAttribs-&gt;Y
<br/>
  currentSprite-&gt;Tiles = tiles;
<br/>
<br/>
}
<br/>
<br/>
...
<br/>
<br/>
assignSprite(&amp;CurrentSprite, &amp;sadghost, &amp;sadghostTiles);
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Warning: I've been doing java recently, haven't touched C in a couple years, so my syntax might be a bit off.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176786 - MisterLogan - Tue Oct 11, 2011 9:50 pm</h4>
    <div class="postbody"><span class="postbody">Oh cool, I didn't know that there was an operator like -&gt;. And your syntax was right on, just had to change the type names and it worked =).
<br/>
<br/>
Thanks a ton, it works great!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
