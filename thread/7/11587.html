<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>from a pointer to an array? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > from a pointer to an array?</h2>
<div id="posts">
<div class="post">
    <h4>#107658 - spinal_cord - Tue Oct 31, 2006 11:26 pm</h4>
    <div class="postbody"><span class="postbody">Im trying to use palibs file system (cant get fat working yet) to load an external level for my game. the file system can give me a pointer to my .txt file wich contanes my level map. Can someone tell me how to copy the map to an array? I'm quite new to C and I know little to nothing about pointers.
<br/>
<br/>
the pointer I would use is PA_PAFSFile(0) and I would like to get info from her to my map array levelloaded[].
<br/>
<br/>
Thankyou.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107662 - sajiimori - Tue Oct 31, 2006 11:52 pm</h4>
    <div class="postbody"><span class="postbody">There's no use in us repeating what is explained better elsewhere.  Buy a good C book, such as the C Primer Plus, or just follow some C tutorials on the internet if you're short on time or money.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107665 - spinal_cord - Wed Nov 01, 2006 12:14 am</h4>
    <div class="postbody"><span class="postbody">ahh yes, but what is the point in a public forum, if not to help each other and share knowlege? And what is the point in there being a c/c++ sub-forum on this forum if the only answers you will get is buy a good book or look else where?  in my opinion it seems pointless to have this whole sub-forum if that is the case.
<br/>
<br/>
Besides google gives me loads of pages about pointing to arrays, but nothing for copying what the pointer is pointing to to an array.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107666 - keldon - Wed Nov 01, 2006 12:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">ahh yes, but what is the point in a public forum, if not to help each other and share knowlege? And what is the point in there being a c/c++ sub-forum on this forum if the only answers you will get is buy a good book or look else where?  in my opinion it seems pointless to have this whole sub-forum if that is the case.</td> </tr></table><span class="postbody">
<br/>
<br/>
Don't take offence in what he's saying. Think of it in this way, it would be pointless in having 1000 different forums each duplicating information that already exists. Go to the beginners FAQ, it should have some good cpp tutorials to look at. If anything I would guess that you might be directed to a place like this ( <a href="http://www.cplusplus.com/" target="_blank">http://www.cplusplus.com/</a> )</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107669 - sajiimori - Wed Nov 01, 2006 12:32 am</h4>
    <div class="postbody"><span class="postbody">If you "know little to nothing about pointers," then you should learn something about pointers by following some tutorials or reading a book.  Every C programmer had to do it, you know?  There's no shame in that -- pointers are definitely not obvious at first!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107673 - sgeos - Wed Nov 01, 2006 2:32 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">ahh yes, but what is the point in a public forum, if not to help each other and share knowlege?</td> </tr></table><span class="postbody">
<br/>
The point of public forums certainly is to help people.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">And what is the point in there being a c/c++ sub-forum on this forum if the only answers you will get is buy a good book or look else where?</td> </tr></table><span class="postbody">
<br/>
To answer questions that are not covered by the book.  The C/C++ forum assumes that you have at least basic, if not advanced, C/C++ programming ability.  It also assumes that you are comfortable with the GBA hardware.
<br/>
<br/>
The beginners forum only assumes programming ability.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">in my opinion it seems pointless to have this whole sub-forum if that is the case.</td> </tr></table><span class="postbody">
<br/>
All posters are basically expected to have given a best effort attempt before posting.  When you post, tell us what you did, what you expected to happen, and what didn't happen.  We'll help.  We won't do your work for you.
<br/>
<br/>
I, for one, also expect people to put effort into spelling and grammar.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">Besides google gives me loads of pages about pointing to arrays, but nothing for copying what the pointer is pointing to to an array.</td> </tr></table><span class="postbody">
<br/>
Give it a shot on your own.  Try a few things even if you expect them all to fail.  You might be able to figure it out on your own.  If not, tell us what you did, what you expected to happen, and what did or didn't happen.  We'll help.
<br/>
<br/>
The comp.lang.c FAQ might be able to help you.  It assumes basic C programming ability.  I learned C from <a class="postlink" href="http://www.oreilly.com/catalog/pcp3/" target="_blank">Practical C Programming</a>, by Steve Oualline.  There are probably better books out there.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107769 - KayH - Wed Nov 01, 2006 9:22 pm</h4>
    <div class="postbody"><span class="postbody">More detailed you find the things said above:
<br/>
<a href="http://catb.org/esr/faqs/smart-questions.html" target="_blank">http://catb.org/esr/faqs/smart-questions.html</a>
<br/>
This is not the topic here, but usefull to know in any case.
<br/>
<br/>
Working with pointers is essential for a C/C++ programmer. Before you can goon, 
<br/>
read and understand the things shown in a good tutorial! Otherwise the community can't help you.
<br/>
<br/>
HTH KaY</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107805 - Ant6n - Thu Nov 02, 2006 5:21 am</h4>
    <div class="postbody"><span class="postbody">try 
<br/>
<a href="http://pw1.netcom.com/~tjensen/ptr/pointers.htm" target="_blank">http://pw1.netcom.com/~tjensen/ptr/pointers.htm</a>
<br/>
there is a strong correlation between pointers and arrays, and learning c involves learning about pointers (its like when you learn java you learn what classes are, and when you learn sml you learn about higher order functions etc)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107829 - spinal_cord - Thu Nov 02, 2006 12:06 pm</h4>
    <div class="postbody"><span class="postbody">I now know a little about pointers, but i must still ask my origional question -
<br/>
<br/>
How do I copy the srting that my pointer is pointing at, to an array.
<br/>
myarray[100]=mypointer only makes myarray[100] a copy of the string (or just another pointer to it?) how can i make myarray[0] to the first value in the string, eg. 'A' then myarray[1] to the second etc.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107831 - sgeos - Thu Nov 02, 2006 12:32 pm</h4>
    <div class="postbody"><span class="postbody">I'll give you a hint.  A string is an array of characters.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107837 - gmiller - Thu Nov 02, 2006 2:17 pm</h4>
    <div class="postbody"><span class="postbody">If you have a point to a type and you want the j'th element of that type then just use the pointer and subscript it.  Array names are just pointers to the type of the array element.  Here are some examples:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int junk[100]; // reserve space for 100 int's
<br/>
short *foo = (short *)junk; // point the short * to the junk array
<br/>
<br/>
/*
<br/>
  Of course I use the higher alignment requirement for int's to make sure I
<br/>
  do not get into trouble with the short pointer.
<br/>
*/
<br/>
<br/>
foo[5] = 12; // set the 5th short element to 12
<br/>
<br/>
*(foo + 5) = 12; // set the 5th short element = 12;
<br/>
<br/>
*junk = 77;  // set the zero'th int element to 77
<br/>
junk[0] = 77; // set the zero'th int element to 77
<br/>
<br/>
/*
<br/>
 This code is just taking advantage of the array name = pointer to element
<br/>
 but it was meant to show an example.  The overlap of the shorts will be
<br/>
 that the the first two shorts (assuming 16 bit) overlap the first int
<br/>
 (assuming 32 bit).   Depending on the machines endian-ness will
<br/>
 determine if the first short is the high order bytes of the int or low
<br/>
 order bytes.
<br/>
*/
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107897 - spinal_cord - Thu Nov 02, 2006 11:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">I'll give you a hint.  A string is an array of characters.
<br/>
<br/>
-Brendan</td> </tr></table><span class="postbody">
<br/>
<br/>
not much of a hint, i know what a string is, and should you have told me it ends with a \0 ?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107898 - keldon - Thu Nov 02, 2006 11:32 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">I'll give you a hint.  A string is an array of characters.
<br/>
<br/>
-Brendan</td> </tr></table><span class="postbody">
<br/>
<br/>
not much of a hint, i know what a string is, and should you have told me it ends with a \0 ?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
It really is a big hint depending on your knowledge.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">char *ptr;
<br/>
ptr = &amp;myArray[100];</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107901 - gmiller - Thu Nov 02, 2006 11:45 pm</h4>
    <div class="postbody"><span class="postbody">Well the example you gave set the pointer to the address of the 100'th element in the array and I do not know if that's what you meant.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107906 - keldon - Fri Nov 03, 2006 12:34 am</h4>
    <div class="postbody"><span class="postbody">Sorry, I'm quite busy preparing for a session tomorrow so I'm just throwing in nuggets where I think you can fill in the blanks. But in short I thought [from what you said] that you wanted to copy text from a string starting from a particular character, say the 100th. By starting the pointer at the 100th element you can then copy until the termination and be able to copy the substring.
<br/>
<br/>
I'm not sure exactly what problem you are experiencing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107912 - chishm - Fri Nov 03, 2006 1:54 am</h4>
    <div class="postbody"><span class="postbody">Have a look at <a class="postlink" href="http://www.cplusplus.com/ref/cstring/strncpy.html" target="_blank">strncpy</a>. If I understood your question correctly, you want something like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">strncpy (myarray, mypointer, 100);</td> </tr></table><span class="postbody">
<br/>
This will copy up to 100 characters from the location mypointer points at to the location myarray points at. If there are less than 100 characters in the string mypointer, myarray will only contain that many characters and the rest of the space in myarray will have whatever was in there before. Keep in mind that if mypointer has 100 or more characters, myarray won't be null terminated. 
<br/>
To be on the safe side, you should do it similar to this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/* It's better to use constants rather than magic numbers */
<br/>
#define MYARRAY_LENGTH 100
<br/>
char myarray [MYARRAY_LENGTH];
<br/>
/* Copy the string, reserving one char for the null terminator */
<br/>
strncpy (myarray, mypointer, MYARRAY_LENGTH - 1); 
<br/>
/* Set the last character of myarray to null, to make sure the string is always terminated correctly. Notice how MYARRAY_LENGTH - 1 is used instead of MYARRAY_LENGTH. This is because arrays are indexed starting from 0, so the 100th character of myarray is at myarray[99] */
<br/>
myarray [MYARRAY_LENGTH - 1] = '\0'; </td> </tr></table><span class="postbody">
<br/>
If this doesn't help, I suggest you read a good C or C++ book, specifically the sections on arrays, pointers and strings.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107944 - sgeos - Fri Nov 03, 2006 10:14 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">not much of a hint, i know what a string is, and should you have told me it ends with a \0 ?</td> </tr></table><span class="postbody">
<br/>
Without knowing what you are having trouble with, it is difficult to help you.  You've asked a question that any basic C book will answer.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">How do I copy the srting that my pointer is pointing at, to an array.</td> </tr></table><span class="postbody">
<br/>
If you must be given the answer, I'd use strcpy.  If for whatever reason strcpy doesn't meet your needs, I'd use a loop.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107956 - kusma - Fri Nov 03, 2006 12:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gmiller wrote:</b></span></td> </tr> <tr> <td class="quote">Well the example you gave set the pointer to the address of the 100'th element in the array and I do not know if that's what you meant.</td> </tr></table><span class="postbody">
<br/>
<br/>
actually, the 101'th in our normal 1-based numbering system ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107957 - gmiller - Fri Nov 03, 2006 1:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gmiller wrote:</b></span></td> </tr> <tr> <td class="quote">Well the example you gave set the pointer to the address of the 100'th element in the array and I do not know if that's what you meant.</td> </tr></table><span class="postbody">
<br/>
<br/>
actually, the 101'th in our normal 1-based numbering system ;)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yep ... I screwed up ...  101'th my bad</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108034 - spinal_cord - Sat Nov 04, 2006 5:55 pm</h4>
    <div class="postbody"><span class="postbody">chishm - that worked fine, thakyou, I realy must get a better book.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
