<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Linking Math.h with DevkitARM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Linking Math.h with DevkitARM</h2>
<div id="posts">
<div class="post">
    <h4>#106000 - Jinroh - Sat Oct 14, 2006 12:52 am</h4>
    <div class="postbody"><span class="postbody">Hello all, I searched on Beginner and C/C++ boards looking for a solution to this, but I have not been able to locate one for DevKitARM.
<br/>
<br/>
I'm needing to include Math.h so I can utilize some functions within. However, I can't for the life of me figure out how.
<br/>
<br/>
If anyone could give me a hand that would be great. A sample makefile is included just in case it's a makefile thing which I believe it would be:
<br/>
<br/>
Path=C:\devkitPro\devkitARM\bin;%Path%
<br/>
arm-elf-gcc -Wall -mthumb -mthumb-interwork -specs=gba.specs polyRotate.cpp -o polyRotate.elf
<br/>
arm-elf-objcopy -O binary polyRotate.elf polyRotate.gba
<br/>
gbafix polyRotate.gba
<br/>
<br/>
Thanks in Advance.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106004 - tepples - Sat Oct 14, 2006 1:13 am</h4>
    <div class="postbody"><span class="postbody">#include &lt;math.h&gt; is deprecated on the GBA and DS for a reason. The hardware has no support for the 'float' and 'double' data types, and the software workaround is slow. Which functions in math.h were you looking for?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106007 - Jinroh - Sat Oct 14, 2006 2:34 am</h4>
    <div class="postbody"><span class="postbody">Just Sin(), Cos(), and Tan(), I'm doing a quick test porting my polygon rotation function and don't really want to generate lookup tables if I don't have to.
<br/>
<br/>
Thanks for the info about it being deprecated, I would've busted my skull trying to get it to work.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106017 - poslundc - Sat Oct 14, 2006 4:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jinroh wrote:</b></span></td> </tr> <tr> <td class="quote">Just Sin(), Cos(), and Tan(), I'm doing a quick test porting my polygon rotation function and don't really want to generate lookup tables if I don't have to.</td> </tr></table><span class="postbody">
<br/>
<br/>
You can calculate sin() from the Taylor series: <a class="postlink" href="http://www.homeschoolmath.net/teaching/sine_calculator.php" target="_blank">Here's how</a>.
<br/>
<br/>
You can then calculate cos() from the periodic identity: cos(a) = sin(a + 90 degrees).
<br/>
<br/>
And tan(a) = sin(a) / cos(a).
<br/>
<br/>
But... you're gonna be in for a world of hurt if you don't use lookup tables. :D
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106020 - tepples - Sat Oct 14, 2006 5:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jinroh wrote:</b></span></td> </tr> <tr> <td class="quote">Just Sin(), Cos(), and Tan(), I'm doing a quick test porting my polygon rotation function and don't really want to generate lookup tables if I don't have to.</td> </tr></table><span class="postbody">
<br/>
You could build a lookup table at a comparatively low resolution (maybe 64 entries in a quadrant) and, if you desire more resolution, have cos() do linear interpolation on its entries.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106045 - Jinroh - Sat Oct 14, 2006 3:05 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the input guys.
<br/>
<br/>
I guess I'll just do my plan b and just write the LUTs from my raycaster to a header file.
<br/>
<br/>
Again, I appreciate the quick response time and I'll have something cool to submit soon. 
<br/>
<br/>
Thanks again.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106048 - poslundc - Sat Oct 14, 2006 6:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jinroh wrote:</b></span></td> </tr> <tr> <td class="quote">I guess I'll just do my plan b and just write the LUTs from my raycaster to a header file.</td> </tr></table><span class="postbody">
<br/>
<br/>
You should write it to a source file, not a header file.
<br/>
<br/>
A couple of explanations:
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=2605" target="_blank">http://forum.gbadev.org/viewtopic.php?t=2605</a>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=8299" target="_blank">http://forum.gbadev.org/viewtopic.php?t=8299</a>
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107136 - wintermute - Fri Oct 27, 2006 12:48 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">#include &lt;math.h&gt; is deprecated on the GBA and DS for a reason. The hardware has no support for the 'float' and 'double' data types, and the software workaround is slow. Which functions in math.h were you looking for?</td> </tr></table><span class="postbody">
<br/>
<br/>
#include &lt;math.h&gt; is <span style="font-weight: bold">not</span> deprecated. It's not recommended that you use floating point math but there's nothing preventing you from doing so.
<br/>
<br/>
It can be reasonable to use functions from math.h for prototyping code or even for code where speed isn't that much of an issue.
<br/>
<br/>
With the devkitPro makefiles you just need to add -lm to the LIBS variable to get the code to link.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107229 - tepples - Fri Oct 27, 2006 9:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">It can be reasonable to use functions from math.h for prototyping code</td> </tr></table><span class="postbody">
<br/>
LOCKJAW: The Overdose, Vitamins, and Luminesweeper began as prototypes developed for the PC using MinGW. I can imagine that so did a lot of GBA and DS games.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">or even for code where speed isn't that much of an issue.</td> </tr></table><span class="postbody">
<br/>
How large in bytes is the floating point library compared to the size of a typical GBA multiboot program?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107288 - wintermute - Sat Oct 28, 2006 7:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">It can be reasonable to use functions from math.h for prototyping code</td> </tr></table><span class="postbody">
<br/>
LOCKJAW: The Overdose, Vitamins, and Luminesweeper began as prototypes developed for the PC using MinGW. I can imagine that so did a lot of GBA and DS games.
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I wasn't talking about prototyping on other platforms and, being honest, I'm not entirely convinced of the value of that approach.
<br/>
<br/>
Certainly the compile/test cycle can be reduced when you're programming natively but prototyping a GBA game on a PC seems a little odd considering the vast differences between the platforms.
<br/>
<br/>
Much of the commercial work I did involved cross platform programming where a game was being written for one platform and simultaneously ported to another. When the PC was the primary platform and the port was for a console of some description there were many problems with memory usage and control schemes, not to mention trying to fit graphics into texture memory even on some of the later consoles.
<br/>
<br/>
Something I noticed in my commercial work was that programmers whose experience was primarily PC based tended to have problems with the restrictive nature of consoles. When your onboard memory is fixed in size without virtual memory to falll back on it can be surprisingly easy to just run out of available RAM.
<br/>
<br/>
Personally I feel that the GBA is an ideal starter platform for the would be game programmer. It's powerful enough to be reasonably forgiving of novice code and serves as a fun introduction to the world of embedded programming.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
How large in bytes is the floating point library compared to the size of a typical GBA multiboot program?</td> </tr></table><span class="postbody">
<br/>
<br/>
That depends on which floating point functions you intend to use and can vary quite a lot.
<br/>
<br/>
For a GBA multiboot application I would advise against using much, if any, of the standard libraries. Stdio can be quite heavy and newlib's malloc can take up a sizeable chunk. I would also tend to avoid using heavy C++ for a multiboot application.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108908 - Jinroh - Sun Nov 12, 2006 11:48 pm</h4>
    <div class="postbody"><span class="postbody">Hey,
<br/>
<br/>
Sorry for the delayed post,
<br/>
<br/>
I appreciate the assistance. I went on the Pern Project and linked a .BIN Lookup Table. Worked great.
<br/>
<br/>
Thanks again.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
