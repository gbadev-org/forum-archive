<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>trouble with multiple if's - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > trouble with multiple if's</h2>
<div id="posts">
<div class="post">
    <h4>#97542 - spinal_cord - Thu Aug 10, 2006 11:10 am</h4>
    <div class="postbody"><span class="postbody">Im tying to make an alarm clock, using the following code to check if its time to sound the alarm. However the alarm goes off every minute, regardless of the alarm time. Am I using the IF's correctly?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      if(alarm_hour==PA_RTC.Hour)
<br/>
      {
<br/>
         if(alarm_min==PA_RTC.Minutes)
<br/>
         {
<br/>
            if(alarm_set==1)
<br/>
            {
<br/>
               if(PA_RTC.Seconds==0)
<br/>
                  {
<br/>
                     //Do some sort of allert here!
<br/>
                  }
<br/>
            }
<br/>
         }
<br/>
      }                              
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
even if alarm_hour and PA_RTC.Hour are completely different, the alarm still happens, same with the minutes, although it does check if the seconds are zero.
<br/>
<br/>
What am i doing wrong?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#97556 - Sausage Boy - Thu Aug 10, 2006 12:43 pm</h4>
    <div class="postbody"><span class="postbody">An easier way would be to do
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if ( alarm_hour==PA_RTC.hour &amp;&amp; alarm_min==PA_RTC.Minutes &amp;&amp; ...andsoonandsoon...)
<br/>
{
<br/>
//Do stuff
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
However, that won't solve your problem. Perhaps you need to update something to get the correct values, or maybe there's a bug in PALib.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#97766 - sgeos - Fri Aug 11, 2006 1:43 pm</h4>
    <div class="postbody"><span class="postbody">Looks OK to me.  I'd find a way to test each condition individually.
<br/>
<br/>
You do realize that:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (x==1)</td> </tr></table><span class="postbody">and:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (x)</td> </tr></table><span class="postbody">Usually mean the same thing in C.  (The first stricly tests for one, the second for any non-zero value).
<br/>
<br/>
This:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (y==0)</td> </tr></table><span class="postbody">and:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (!y)</td> </tr></table><span class="postbody">Always mean the same thing in C.
<br/>
<br/>
I'd probably make isAlarm(), isAlarmHour(), isAlarmMinute(), isAlarmSecond(), isAlarmSet() functions and test them individually.  You can use a debugger, print, watch memory or whatever else you need to do to figure out what is going on.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void yourNewFunction(void)
<br/>
{
<br/>
  if ( isAlarm() )
<br/>
  {
<br/>
    // Do some sort of allert here! 
<br/>
  }
<br/>
}
<br/>
<br/>
int isAlarm()
<br/>
{
<br/>
  return isAlarmHour() &amp;&amp; isAlarmMinute() &amp;&amp; isAlarmSecond() &amp;&amp; isAlarmSet();
<br/>
} 
<br/>
<br/>
int isAlarmHour(void)
<br/>
{
<br/>
  return alarm_hour == PA_RTC.Hour;
<br/>
}
<br/>
<br/>
int isAlarmMinute(void)
<br/>
{
<br/>
  return alarm_min == PA_RTC.Minutes;
<br/>
}
<br/>
<br/>
int isAlarmSecond(void)
<br/>
{
<br/>
  return !(PA_RTC.Seconds);
<br/>
}
<br/>
<br/>
int isAlarmSet(void)
<br/>
{
<br/>
  return alarm_set;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#97800 - sajiimori - Fri Aug 11, 2006 4:58 pm</h4>
    <div class="postbody"><span class="postbody">Um, I'd take that advice about "all nonzero values are equivalent" with the world's largest grain of salt.  ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#97839 - spinal_cord - Fri Aug 11, 2006 9:02 pm</h4>
    <div class="postbody"><span class="postbody">dont worry guys, a had a sneaky bit of code where i forgot about it, I started a snooze function, and well, forgot to finish it, i had set the snooze timer for 1 minute (while testing) so it restarted the alarm every minute.
<br/>
<br/>
How the hell did i miss that?
<br/>
<br/>
anyway, thanks for the help guys.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98396 - sgeos - Tue Aug 15, 2006 12:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Um, I'd take that advice about "all nonzero values are equivalent" with the world's largest grain of salt.  ;)</td> </tr></table><span class="postbody">
<br/>
Does that still hold if one is using an integer to represent a boolean?  (Which I really should have stated.)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98409 - sajiimori - Tue Aug 15, 2006 2:33 am</h4>
    <div class="postbody"><span class="postbody">I'm not going to split hairs.  One should obviously pay attention to the difference between testing for nonzero and testing for a particular value.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98568 - sgeos - Wed Aug 16, 2006 2:17 am</h4>
    <div class="postbody"><span class="postbody">I guess my main problem with the above implementation is 1 is being used as a magic number.  I assumed that it was being used as a boolean value, hence my reply.  It could just as easily be being used for ALARM_SET, ALARM_UNSET or ALARM_ERROR.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98573 - sajiimori - Wed Aug 16, 2006 3:24 am</h4>
    <div class="postbody"><span class="postbody">I do agree about that.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
