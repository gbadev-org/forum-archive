<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>does recognise anpercent "&" ? plus does switc - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > does recognise anpercent "&" ? plus does switc</h2>
<div id="posts">
<div class="post">
    <h4>#177044 - blessingta@hotmail.co.uk - Fri Dec 02, 2011 1:25 pm</h4>
    <div class="postbody"><span class="postbody">does c also recognise the and percent "&amp;"?
<br/>
<br/>
//header
<br/>
//sections with errors
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">extern bool find_valid_movepath (unsigned int &amp; uiPiece,/*find piece chosen to be moved*/unsigned char &amp; Move_Piece,/*Locate valid path &amp; make move if true*/unsigned char &amp; pathway,unsigned char Store_valid_moves[9], unsigned char &amp; validpos);</td> </tr></table><span class="postbody">
<br/>
<br/>
//c file
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">bool find_valid_movepath (unsigned int &amp; uiPiece,/*find piece chosen to be moved*/unsigned char &amp; Move_Piece,/*Locate valid path &amp; make move if true*/unsigned char &amp; pathway,unsigned char Store_valid_moves[9], unsigned char &amp; validpos);</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">//whist valid position present
<br/>
      switch (validpos)
<br/>
      {
<br/>
      case 0:
<br/>
      //move invalid
<br/>
         return false;
<br/>
      //...
<br/>
      break;
<br/>
      default:
<br/>
      //valid move found: now chose
<br/>
      uiPiece = (rand() % validpos);
<br/>
<br/>
      //valid move was true
<br/>
      valid_move_true (Move_Piece,
<br/>
      //extract valid path
<br/>
      Store_valid_moves[uiPiece]);
<br/>
      return true;
<br/>
      break;
<br/>
      }</td> </tr></table><span class="postbody">
<br/>
Its throwing up these errors now
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
game.c
<br/>
arm-eabi-gcc -MMD -MP -MF /g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/build/game.d -g -Wall -O3 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/include -I/D/devkitPro/libgba/include -I/g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/build -c /g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c -o game.o 
<br/>
In file included from g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:1:0:
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/include/game.h:43:47: error: expected ';', ',' or ')' before '&amp;' token
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c: In function 'check_player_turn':
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:157:9: error: case label does not reduce to an integer constant
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:169:3: error: case label does not reduce to an integer constant
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c: In function 'reset_turn_info':
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:344:15: warning: unused variable 'ucMove' [-Wunused-variable]
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:343:15: warning: unused variable 'ucLocation' [-Wunused-variable]
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:342:6: warning: unused variable 'bvalid_Piece' [-Wunused-variable]
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c: At top level:
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:673:40: error: expected ';', ',' or ')' before '&amp;' token
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c: In function 'Randomly_Place_Piece':
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:711:6: warning: variable 'store_valid_moves' set but not used [-Wunused-but-set-variable]
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c: In function 'ComputerAI_Move':
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:766:3: warning: statement with no effect [-Wunused-value]
<br/>
g:/YEAR2/Console_Programming_CONPRG/Course_Work/gba/my_gba_game/source/game.c:768:3: warning: implicit declaration of function 'find_valid_movepath' [-Wimplicit-function-declaration]
<br/>
make[1]: *** [game.o] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177046 - Miked0801 - Fri Dec 02, 2011 4:29 pm</h4>
    <div class="postbody"><span class="postbody">"C" does not recognize reference passing, but C++ does.  Or, if you are using a C only compiler, you pass by pointer instead of reference and use -&gt; within your functions.
<br/>
<br/>
You appear to be using a GCC variant though.  That is both a C and C++ compiler.  Renaming your files from .c to .cpp will allow .cpp options to be used, but may cause other issues if you aren't up on C++ programming.  
<br/>
<br/>
Also, style note, please do not use /* comments */ within the parameter list of your functions.  Makes it dang hard to read and also has much room for accidental error.  Even worse, don't use &amp; within your comment blocks for and.  That just hurts my head.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177057 - Rajveer - Sat Dec 03, 2011 4:01 am</h4>
    <div class="postbody"><span class="postbody">Don't mean to shift this topic but, how does a reference work behind the scenes? As in terms of where it's stored in memory, what it points to e.t.c.. Is it just like a pointer that the compiler handles automatically in some way?
<br/>
<br/>
I've never used C++ myself, and I'm trying to think of how pass by reference is more efficient than pass by value with a pointer and works without copying the address of the original variable into the reference, but references aren't variables are they, so how are they stored? :S</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177058 - Dwedit - Sat Dec 03, 2011 7:21 am</h4>
    <div class="postbody"><span class="postbody">It's a pointer with different syntax.
<br/>
When you first create a reference, it's like you are sticking the Address Of &amp; operator in front of the right value.
<br/>
Every time you use a reference, it's like you are sticking the dereference operator * in front of the reference.
<br/>
References can not be reassigned.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177061 - ant512 - Sat Dec 03, 2011 10:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">References can not be reassigned.</td> </tr></table><span class="postbody">
<br/>
<br/>
Also, references cannot point at NULL.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177062 - Miked0801 - Sat Dec 03, 2011 10:54 pm</h4>
    <div class="postbody"><span class="postbody">There's alot more to it than that though.  Head over to stackoverflow.com and read up a bit on it for further info.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177064 - Dwedit - Sun Dec 04, 2011 6:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ant512 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">References can not be reassigned.</td> </tr></table><span class="postbody">
<br/>
<br/>
Also, references cannot point at NULL.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Why wouldn't references be able to point at NULL?  This code seems to create a reference to NULL:
<br/>
int &amp;ref = *((int*)0);
<br/>
The compiler happily accepts this code, and when you assign to ref, it writes to address 0.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
