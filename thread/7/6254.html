<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Button Combos - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Button Combos</h2>
<div id="posts">
<div class="post">
    <h4>#47507 - QuantumDoja - Sat Jul 09, 2005 10:04 pm</h4>
    <div class="postbody"><span class="postbody">Hi, I have a button sequence that i want to detect for a special move, much like street fighter or tekken.
<br/>
<br/>
Example: Up, Down, Left, A + B
<br/>
Example: Up + R, Down + L, A, B
<br/>
<br/>
I have this post: <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=4128&amp;highlight=button+combo" target="_blank">http://forum.gbadev.org/viewtopic.php?t=4128&amp;highlight=button+combo</a>
<br/>
<br/>
is this the right lines to code, having 1 function per combo?
<br/>
<br/>
I want something like [pseudo] - but if i have 32 special combos, it will have to check each one - maybe slow.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//Up + R, Down + L, A, B 
<br/>
if (button_Up pressed &amp;&amp; button_R pressed) {
<br/>
 then if (button_down pressed &amp;&amp; button_L pressed) {
<br/>
  then if (button_a pressed) {
<br/>
   then if (button_b pressed) {
<br/>
     do combo xyz
<br/>
    }
<br/>
  }
<br/>
 }
<br/>
}
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47508 - tepples - Sat Jul 09, 2005 10:12 pm</h4>
    <div class="postbody"><span class="postbody">Not if you don't want the "if then" to freeze up the rest of the game. Look up "finite state machine" on a search engine.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47526 - Mucca - Sun Jul 10, 2005 3:07 pm</h4>
    <div class="postbody"><span class="postbody">Buffer the input once per frame, and make it available throughout the system. For such combinations, it will be important to store whether buttons have just been pressed down, are still pressed, have just been released, as well as timings for button presses. A certain tolerance is also vital (either frame or time based). Eg if the combo is A + B + Down, its rather unreasonable to expect the player to have such timing that they can press all three in precisely the same frame, but by the same token it would make no sense at all if the player could press and hold each button individually at, say, one second intervals, so store some timings for each button, then you can adjust the tolerance times until they "feel right".
<br/>
<br/>
edit: oops, just read the previous thread, which makes my post pretty redundant, sorry</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47536 - Touchstone - Sun Jul 10, 2005 5:38 pm</h4>
    <div class="postbody"><span class="postbody">I think a good idea would be to have an array of buttons that needs to be pressed, and each frame you check if the current keys match the current position in the array and if so, move on to the next index in the array, or if this was the last index, perform the move.
<br/>
<br/>
Like so:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">KEY_UP = 1
<br/>
KEY_DOWN = 2
<br/>
KEY_A = 4
<br/>
KEY_B = 8
<br/>
Key moveSuperDuperAttackKey[3] = {KEY_UP, KEY_DOWN, KEY_A+KEY_B}
<br/>
<br/>
void oncePerFrame()
<br/>
{
<br/>
    Key currentPressedKey = sysGetKey();
<br/>
    if (moveSuperDuperAttackKey[ moveSuperDuperAttackKeyIndex ] == currentPressedKey)
<br/>
    {
<br/>
        if ( moveSuperDuperAttackIndex == moveSuperDuperAttackKeyLength )
<br/>
            performSuperDuperAttack();
<br/>
        else
<br/>
            moveSuperDuperAttackKeyIndex++;
<br/>
    }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Ofcourse variables and functions can be structured different to avoid odd names. And as someone mentioned, the game should have some sort of mechanism to reset the array index if the move is performed incorrectly. What constitutes as incorrectly is of course up to the game design.<br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47561 - Miked0801 - Sun Jul 10, 2005 10:44 pm</h4>
    <div class="postbody"><span class="postbody">Also, no input that takes over N tics should reset any combos - while input every few tics should be counted as in sequence.  Don't make the player input at 60Hz, but don't let him input a command every 1 second either :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
