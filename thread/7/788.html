<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Custom sprintf - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Custom sprintf</h2>
<div id="posts">
<div class="post">
    <h4>#3997 - Jack Handey - Sat Mar 15, 2003 3:06 am</h4>
    <div class="postbody"><span class="postbody">Does anyone have their own custom sprintf?  Or does anyone know how to write one?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4036 - Lord Graga - Sun Mar 16, 2003 7:38 pm</h4>
    <div class="postbody"><span class="postbody">You mean a write text function?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4052 - satanicfreak2 - Mon Mar 17, 2003 2:57 am</h4>
    <div class="postbody"><span class="postbody">download my tetris demo.  It has the source code for writing text.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4263 - niltsair - Wed Mar 26, 2003 7:23 am</h4>
    <div class="postbody"><span class="postbody">You can also output some text on the <span style="font-weight: bold">Mappy emulator</span>...
<br/>
<a class="postlink" href="http://www.bottledlight.com/" target="_blank">http://www.bottledlight.com/</a>
<br/>
<br/>
By using this code :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ARM SDT Code:
<br/>
void dprint(char *string) {
<br/>
  __asm {
<br/>
    mov r2, r0
<br/>
    mov r0, #0xC0DED00D
<br/>
    mov r1, #0
<br/>
    and r0, r0, r0
<br/>
  }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">GCC Code:
<br/>
void dprint(const char *sz) {
<br/>
  asm volatile("
<br/>
    mov r2, %0
<br/>
    ldr r0, =0xc0ded00d
<br/>
    mov r1, #0
<br/>
    and r0, r0, r0
<br/>
  " :
<br/>
  /* No output */ :
<br/>
  "r" (sz) :
<br/>
  "r0", "r1", "r2");
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<span style="font-style: italic">(From Mappy Specs Document)</span>
<br/>
<br/>
I found it usefull for debug purpose, no need find ways to display strings or numbers on the Gba Screen (by using some tiles like i did at first, or pixels).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4278 - joet - Wed Mar 26, 2003 1:52 pm</h4>
    <div class="postbody"><span class="postbody">To handle the variable args use va_list and vsprintf:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void txprint(char *string, ...){
<br/>
    va_list argptr;
<br/>
<br/>
    va_start(argptr, string);
<br/>
    vsprintf(text_data, string, argptr);
<br/>
    va_end(argptr);
<br/>
    
<br/>
    _print(text_data);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
(You'll need ot include stdarg.h)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
