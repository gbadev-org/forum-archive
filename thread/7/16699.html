<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>compiler warnings - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > compiler warnings</h2>
<div id="posts">
<div class="post">
    <h4>#168951 - moonlightcheese - Fri Jun 05, 2009 1:48 am</h4>
    <div class="postbody"><span class="postbody">getting warnings with this code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   if(bgmode) {
<br/>
      if(addr&gt;=0x06010000 &amp;&amp; addr&lt;=0x06017FE0) {      //check for valid VRAM address range
<br/>
         return (((unsigned int)addr)&gt;&gt;5)&amp;0x03FF;
<br/>
      }
<br/>
   } else {
<br/>
      if(addr&gt;=0x06014000 &amp;&amp; addr&lt;=0x06017FE0) {  
<br/>
         return (((unsigned int)addr)&gt;&gt;5)&amp;0x03FF;   //tile indices are the same in both modes
<br/>
      }
<br/>
   }</td> </tr></table><span class="postbody">
<br/>
about comparing pointers to integers.  is there a better way to write this code so i don't get these warnings?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168952 - Dwedit - Fri Jun 05, 2009 1:50 am</h4>
    <div class="postbody"><span class="postbody">Add (u32*) before each 0x in the addresses, or whatever type your pointer is.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168965 - Ruben - Sat Jun 06, 2009 12:00 pm</h4>
    <div class="postbody"><span class="postbody">Or you could do this, too...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   if(bgmode) { 
<br/>
      if(&amp;addr&gt;=0x06010000 &amp;&amp; &amp;addr&lt;=0x06017FE0) {      //check for valid VRAM address range 
<br/>
         return (((unsigned int)addr)&gt;&gt;5)&amp;0x03FF; 
<br/>
      } 
<br/>
   } else { 
<br/>
      if(&amp;addr&gt;=0x06014000 &amp;&amp; &amp;addr&lt;=0x06017FE0) {  
<br/>
         return (((unsigned int)addr)&gt;&gt;5)&amp;0x03FF;   //tile indices are the same in both modes 
<br/>
      } 
<br/>
   }</td> </tr></table><span class="postbody">
<br/>
Also note that, if you're using a late/new enough compiler, you can use /32 instead of &gt;&gt;5; it will handle it automatically.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168966 - Dwedit - Sat Jun 06, 2009 12:59 pm</h4>
    <div class="postbody"><span class="postbody">I don't think that works, you're requesting the address of a pointer variable here.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168968 - Ruben - Sat Jun 06, 2009 2:36 pm</h4>
    <div class="postbody"><span class="postbody">Whoops, yeah, replace the &amp; with (u32) and that should work.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
