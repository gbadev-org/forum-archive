<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Choosing randomly from a set of functions - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Choosing randomly from a set of functions</h2>
<div id="posts">
<div class="post">
    <h4>#176491 - MisterLogan - Sun Aug 07, 2011 8:38 am</h4>
    <div class="postbody"><span class="postbody">Is there any way to choose randomly from a changing set of functions based on a random number? I've seen a mention or two of putting function names without the "()" in arrays but i don't know how that works. Googling keeps getting me results for various "rand" functions :/.
<br/>
<br/>
The reason I ask is I am loading a set of sprites, the number of sprites and what sprites I'm loading depend on the situation (the map changing), and I need to be able to move a random sprite at a regular interval. Each sprite is moved by calling a function though, and I don't know how to randomly choose between a changing set of functions.
<br/>
<br/>
Any ideas on this/something in c++ that does this that I don't know about? (I'm quite new to programming in general)
<br/>
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176492 - ant512 - Sun Aug 07, 2011 8:50 am</h4>
    <div class="postbody"><span class="postbody">What you need is an array of function pointers.  Pointers can point to anything in memory, and since functions exist in memory, you can point at them too.  Store them in an array and call an array element as if it were a function.  There's a Stack Overflow question about this here:
<br/>
<br/>
<a href="http://stackoverflow.com/questions/252748/how-to-use-array-of-function-pointers" target="_blank">http://stackoverflow.com/questions/252748/how-to-use-array-of-function-pointers</a>
<br/>
<br/>
This is the basic idea:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include &lt;stdio.h&gt;
<br/>
#include &lt;stdlib.h&gt;
<br/>
<br/>
// These are all of the functions we're going to choose from randomly 
<br/>
int sum(int a, int b) { return a + b; }
<br/>
int subtract(int a, int b) { return a - b; }
<br/>
int mul(int a, int b) { return a * b; }
<br/>
int divide(int a, int b) { return a / b; }
<br/>
<br/>
// This is our array of function pointers 
<br/>
int (*p[4]) (int x, int y); 
<br/>
<br/>
int main(void)
<br/>
{
<br/>
  int result;
<br/>
  int index;
<br/>
<br/>
  // Insert pointers to functions into our array
<br/>
  p[0] = sum; /* address of sum() */
<br/>
  p[1] = subtract; /* address of subtract() */
<br/>
  p[2] = mul; /* address of mul() */
<br/>
  p[3] = divide; /* address of divide() */
<br/>
<br/>
  // Choose a random index
<br/>
  srand(50);
<br/>
  index = rand() % 4;
<br/>
<br/>
  // Call the function
<br/>
  result = (*p[index])(1, 2);
<br/>
<br/>
  printf("Result: %d\n", result);
<br/>
  printf("Index: %d\n", index);
<br/>
<br/>
  return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This will work in C and C++, but it will only work for functions, not methods of C++ classes.  If you need to do that you're better off investigating ways of declaring the function signature in an abstract base class, then encapsulating the different functionality within different implementations of the base class, and storing instances of the objects in an array.  C++ does allow pointers to member functions, but they're very limited and kind of crap.
<br/>
<br/>
You'll probably find that every time you run this program you get the same result out.  The reason for that is the way rand() works in C.  Try changing the value passed to srand() from 50 to something else and you'll find that the program's result changes.  For an explanation of this, you'll need to look up random number seeding in C.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176493 - MisterLogan - Sun Aug 07, 2011 9:28 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the quick reply.
<br/>
<br/>
I tried putting this in tonight but i think my brain is a bit too tired, i ended up somehow jumping back to the start of main every time i access the array.
<br/>
<br/>
I'm sure it will all make sense when I wake up though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176494 - vuurrobin - Sun Aug 07, 2011 1:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ant512 wrote:</b></span></td> </tr> <tr> <td class="quote">You'll probably find that every time you run this program you get the same result out.  The reason for that is the way rand() works in C.  Try changing the value passed to srand() from 50 to something else and you'll find that the program's result changes.  For an explanation of this, you'll need to look up random number seeding in C.</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm pretty sure the accepted way of doing that is to use the time function.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">srand(time(NULL));</td> </tr></table><span class="postbody"><br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176496 - MisterLogan - Sun Aug 07, 2011 11:20 pm</h4>
    <div class="postbody"><span class="postbody">If you aren't passing any variables, do you access it with a "()" after the "(*name[option])"? And the same question for declaring the array.
<br/>
<br/>
As far as random number seeding goes, I just start a timer at the start of main and get it's value when start is pressed at the title screen before turning it back off.
<br/>
<br/>
EDIT: I've been messing with this for a while and I can't seem to stop it from looping back into main. Either my syntax here is wrong or I messed something else up without noticing.
<br/>
<br/>
I create the array as such
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void (*pNPCFuncs[128])();</td> </tr></table><span class="postbody">
<br/>
Then add the functions to the array later on like so 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">pNPCFuncs[OAMCounter] = updatesadghostTiles;</td> </tr></table><span class="postbody">
<br/>
Then call the functions like this
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">(*pNPCFuncs[(Dice2+NPCOAMStart)])();</td> </tr></table><span class="postbody">
<br/>
<br/>
I've been messing with syntax for a while but this was the only way it would compile.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176497 - sverx - Mon Aug 08, 2011 9:05 am</h4>
    <div class="postbody"><span class="postbody">Some weeks ago it also happened to me to need to use function pointers, and here's where I learnt how to do it: <a href="http://www.newty.de/fpt/index.html" target="_blank">http://www.newty.de/fpt/index.html</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176499 - ant512 - Mon Aug 08, 2011 6:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MisterLogan wrote:</b></span></td> </tr> <tr> <td class="quote">I've been messing with syntax for a while but this was the only way it would compile.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yep, that's the way to do it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176500 - Dwedit - Mon Aug 08, 2011 8:14 pm</h4>
    <div class="postbody"><span class="postbody">Function pointers are just begging to be typedef'd to something more reasonable.
<br/>
Something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
typedef int (*FuncIntInt)(int);  //function that takes in an int, and returns an int
<br/>
<br/>
FuncIntInt functions[10];
<br/>
<br/>
otherInt = functions[5](someInt);
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
Not sure if that syntax is exactly correct or not, but it sure simplifies function pointers.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176501 - MisterLogan - Mon Aug 08, 2011 11:07 pm</h4>
    <div class="postbody"><span class="postbody">Well, I can't seem to get it working at all, as far as I can tell I've implemented it correctly, but every time I call a function it just starts main from the top. Is there any reason anyone knows of that would cause this? Does using a function like this not return control to the function I call it from normally?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176507 - ant512 - Tue Aug 09, 2011 9:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MisterLogan wrote:</b></span></td> </tr> <tr> <td class="quote">Is there any reason anyone knows of that would cause this?</td> </tr></table><span class="postbody">
<br/>
<br/>
The only reason I can think of is that you're clobbering the stack somehow and overwriting the return address.  The chances of you managing to overwrite that with the exact address of the start of main() is tiny, though.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Does using a function like this not return control to the function I call it from normally?</td> </tr></table><span class="postbody">
<br/>
<br/>
It should work like any other function call.  Can you post some of your code?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176512 - Azenris - Tue Aug 09, 2011 3:32 pm</h4>
    <div class="postbody"><span class="postbody">Any source you could show?<br/>_________________<br/>&lt;Robert Morley&gt;
<br/>
<a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176515 - elhobbs - Tue Aug 09, 2011 6:07 pm</h4>
    <div class="postbody"><span class="postbody">mixed calling conventions could cause some weird behavior - stack vs register parameters - expecting one and using another ... source code is probably the best option though, as Azenris already said.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176517 - MisterLogan - Tue Aug 09, 2011 8:38 pm</h4>
    <div class="postbody"><span class="postbody">I don't know what else i can post exactly, I'll put up the functions that get called and such though. Beware though, I am a huge newbie to C++ and programming in general, so I'm sure I'm doing silly things somewhere here. (try to not make too much fun if I'm doing silly things)
<br/>
<br/>
Alright, this is pretty much the same, it's global.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void (*pNPCFuncs[128])() = {NULL};</td> </tr></table><span class="postbody">
<br/>
<br/>
The first function is the one I'm putting in the pointer array, the other functions are exact copies with different names due to not having drawn more NPCs. When I load a new map I can add as many initTiles functions as I need and they take up a place in OBJ mem and OAM and mark an index (Isadghost) for both the OAM and OBJ mem placement so I can easily change them later. The indexes are also global (I normally pass variables for pretty much everything but I got pretty lazy last night). So that's that, to edit a sprite I just change AnimStage to whatever I need and then run whatever updateTiles function I need.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void updatesadghostTiles()
<br/>
{                   //kspritesize is 128
<br/>
    for(loop = 0; loop &lt; (kSpriteSize*2); loop++)
<br/>
        OAM_Data[IsadghostOBJ+loop] = sadghostTiles[loop+(AnimStage*kSpriteSize*2)];
<br/>
}
<br/>
void initsadghostTiles(u16 &amp;OBJMEMCounter, u16 &amp;OAMCounter)
<br/>
{
<br/>
        IsadghostOBJ = OBJMEMCounter;
<br/>
        IsadghostOAM = OAMCounter;
<br/>
        sprites[OAMCounter].attribute0 = COLOR_256 | SQUARE | SprPosY[0];
<br/>
        sprites[OAMCounter].attribute1 = SIZE_16 | SprPosX[0];
<br/>
        sprites[OAMCounter].attribute2 = PRIORITY(1) |OAMCounter*8;
<br/>
        OAMCounter += 1;
<br/>
<br/>
        sprites[OAMCounter].attribute0 = COLOR_256 | SQUARE | (SprPosY[0] + 16);
<br/>
        sprites[OAMCounter].attribute1 = SIZE_16 | SprPosX[0];
<br/>
        sprites[OAMCounter].attribute2 = PRIORITY(3) | OAMCounter*8;
<br/>
        OAMCounter += 1;
<br/>
//+= kspritesize*2 because I load two sprites here (for priority). Why 1 and 3 instead of 2 and 3? More problems!
<br/>
        OBJMEMCounter += kSpriteSize*2;
<br/>
        pNPCFuncs[OAMCounter] = &amp;updatesadghostTiles;
<br/>
        updatesadghostTiles();
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I use the pointer array in my NPCAnim function (which is almost entirely commented out right now)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void NPCAnim(u16 &amp;Dice1, u16 &amp;Dice2, s16 &amp;SpriteHoldX, s16 &amp;SpriteHoldY, u8 &amp;NPCLoop, u8 &amp;Nothing)
<br/>
    if(NPCLoop == 0)
<br/>
        NPCLoop = 16;
<br/>
//dice1 is a random between 1 and 8 or something like that. 1-4 correspond with a movement direction and the rest makes nothing happen.
<br/>
    if(Dice1 &gt; 4)
<br/>
        Nothing = 1;
<br/>
    if(NPCLoop == 16)
<br/>
        if(Nothing == 0)
<br/>
        {
<br/>
            AnimStage = (Dice1*2)-1;
<br/>
            (*pNPCFuncs[(Dice2+NPCOAMStart)])();
<br/>
        }
<br/>
    if(NPCLoop == 8)
<br/>
        if(Nothing == 0)
<br/>
        {
<br/>
            AnimStage = (Dice1-1)*2;
<br/>
            (*pNPCFuncs[(Dice2+NPCOAMStart)])();
<br/>
        }
<br/>
    NPCLoop -= 1;
<br/>
    if(NPCLoop == 0){
<br/>
<br/>
        Dice1 = 0;
<br/>
        Nothing = 0;</td> </tr></table><span class="postbody">
<br/>
    }
<br/>
[/code]
<br/>
<br/>
I took out all the commented stuff, it's all just NPC movement and object collision. For some reason when I wrote this code originally I made the loop start at 16 and go down? Anyway, it's not too hard to understand what's going on here.
<br/>
<br/>
And finally, here's where I add the sprites to OAM and OBJ mem. This section is in main.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
///********
<br/>
///general template for map loading.
<br/>
///********
<br/>
<br/>
    setSprites();
<br/>
    AnimStage=0;
<br/>
    ///main
<br/>
    initGhostlyTiles(OBJMEMCounter, OAMCounter);
<br/>
    initwalkfxTiles(OBJMEMCounter, OAMCounter);
<br/>
    ///npcs
<br/>
    NPCOAMStart = OAMCounter;
<br/>
    NPCCount = 2;
<br/>
    initsadghostTiles(OBJMEMCounter, OAMCounter);
<br/>
    initsadghostTiles2(OBJMEMCounter, OAMCounter);
<br/>
    ///bg sprites
<br/>
    initflowerTiles(OBJMEMCounter, OAMCounter);
<br/>
    OBJMEMCounter=0;
<br/>
    OAMCounter=0;
<br/>
   copyOAM();
<br/>
///*******</td> </tr></table><span class="postbody">
<br/>
<br/>
Last bit probably doesn't matter but it shows what NPCOAMStart is.
<br/>
<br/>
Anyway, thanks for any help, feel free to tell me if I'm doing unrelated things wrong.[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176520 - ant512 - Wed Aug 10, 2011 10:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MisterLogan wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">pNPCFuncs[OAMCounter] = &amp;updatesadghostTiles;</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
There's one problem - get rid of the ampersand.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176528 - MisterLogan - Wed Aug 10, 2011 7:56 pm</h4>
    <div class="postbody"><span class="postbody">Oh, that's from messing around with syntax from that tutorial someone else posted, it has the same problem both ways, but I'll remove it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176529 - Azenris - Wed Aug 10, 2011 8:17 pm</h4>
    <div class="postbody"><span class="postbody">I think you're supposed to use the ampersand, not using it is just a short-form. Another short-form (I think) is you don't have to specify the dereference, when used like a function.<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176535 - ant512 - Thu Aug 11, 2011 10:06 am</h4>
    <div class="postbody"><span class="postbody">This looks a bit suspect.  Here's initsadghostTiles() with sections snipped out:
<br/>
<br/>
void initsadghostTiles(u16 &amp;OBJMEMCounter, u16 &amp;OAMCounter) 
<br/>
{ 
<br/>
        ...
<br/>
        OAMCounter += 1; 
<br/>
<br/>
        ...
<br/>
        OAMCounter += 1; 
<br/>
<br/>
        pNPCFuncs[OAMCounter] = &amp;updatesadghostTiles; 
<br/>
        ...
<br/>
}
<br/>
<br/>
You end up with an array that looks like this:
<br/>
<br/>
pNPCFuncs[0] = NULL
<br/>
pNPCFuncs[1] = NULL
<br/>
pNPCFuncs[2] = &amp;updatesadghostTiles
<br/>
pNPCFuncs[3] = NULL
<br/>
pNPCFuncs[4] = NULL
<br/>
pNPCFuncs[5] = &amp;updatesadghostTiles
<br/>
<br/>
Is that what you intended?  If you aren't expecting to have an array that's  2/3rds empty, you're calling NULL() like a function and executing data/code/who knows what.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176538 - MisterLogan - Thu Aug 11, 2011 10:01 pm</h4>
    <div class="postbody"><span class="postbody">Arghhhh, how did I not notice that?! No, I didn't mean for that to happen, I don't know what I was thinking... They're supposed to be right next to each other and I guess I forgot OAMCounter was going up by two for the larger sprites.
<br/>
<br/>
Should be loaded like </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">pNPCFuncs[((OAMCounter-NPCOAMStart) &gt;&gt; 1)-1] = &amp;updatesadghostTiles2;</td> </tr></table><span class="postbody">
<br/>
<br/>
and just called as whatever dice2 is.
<br/>
<br/>
Thanks a lot, it works fine now!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176544 - MisterLogan - Sat Aug 13, 2011 7:31 am</h4>
    <div class="postbody"><span class="postbody">Alright, I got one more syntax question in this vein.
<br/>
<br/>
It's pretty much the same thing but for arrays, the situation being an array of array pointers (pointing to various consted map arrays). The problem being, how to call an individual element of an array, through that array of array pointers.
<br/>
<br/>
Quick example here.
<br/>
<br/>
I would guess the syntax is something like this. (bgMap is a const [256][256] array.)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 *MapIndex[1] ={
<br/>
&amp;bgMap
<br/>
};</td> </tr></table><span class="postbody">
<br/>
<br/>
But I can't find any helpful information for this particular situation through google, there's some info on pointing to arrays but it doesn't really fit.
<br/>
<br/>
So here's where I'm really just throwing guesses.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(loop = 0; loop &lt; 32; loop++){    // I need to access this element from bgMap through an array that is pointing to bgMap.
<br/>
            MapBuffer[lots of numbers here] = /*what to do here*/[(BGYTiles+30)+MapUpdateSwitch][BGXTiles+loop];
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't even know if that's a possible thing to do, but I don't know how I would accomplish this yet without something similar. Do I need to copy the pointer from the pointer array to a temp pointer so as to not be accessing an array element through an array element? If this is a thing, do I need to dereference it?
<br/>
<br/>
Feel free to tell me if this is a silly thing that is impossible. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176547 - Miked0801 - Sun Aug 14, 2011 5:29 am</h4>
    <div class="postbody"><span class="postbody">Play with parenthesis.  When you get into these situations, * and [] don't always bind in the order you expect them to.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176548 - MisterLogan - Sun Aug 14, 2011 7:58 am</h4>
    <div class="postbody"><span class="postbody">I will play with some parenthesis for now, but I think I'm missing some syntax somewhere here.
<br/>
<br/>
I ditched the array of array pointers, I realized it was entirely superfluous. So, from what I understand about pointers, there's a pointer, CurrentMap, pointing to the address of the first element in bgMap. So it would seem like I need to add the number of the element I need to access on to that memory address, then dereference to get the value I need. That makes perfect sense in my head. But I don't see how to do that with a two dimensional array. Does using currentmap like a two dimensional array with a * somewhere just work that out for you? I've been trying to get it to work like that with different parentheses like you said, but I just get an "invalid types 'const unsigned int[int]' for array subscript" error. I guess I could just use a y*xsize + x and switch to a 1d array but that seems kind of silly at this point.
<br/>
<br/>
Another thing I my brain skimmed past in a sleepy haze was that i'm making the pointer a const unsigned int. That, of course, defeats its purpose completely. But I can't unconst the pointer or I get a compile error about the conversion. Is there a way around this or should I just give up and find another way to do it?
<br/>
<br/>
I will keep playing with these parentheses though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176549 - Miked0801 - Sun Aug 14, 2011 3:08 pm</h4>
    <div class="postbody"><span class="postbody">There's nothing silly about y*xsize+x, that's exactly what the compiler's doing internally anyways.  If using a 1D array is what it takes to move forward, then do it.  More game making, less C compiler fighting :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
