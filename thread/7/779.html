<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to link with newlib using DevkitAdv? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > How to link with newlib using DevkitAdv?</h2>
<div id="posts">
<div class="post">
    <h4>#3978 - ZhouChang - Fri Mar 14, 2003 9:39 am</h4>
    <div class="postbody"><span class="postbody">Hello all,
<br/>
       I am programing my GBA using Devkitadv tool chain.
<br/>
I want to use sprintf,strcpy etc . Have these functions been implemented in newlib which coming from devkitadv? I want to link them into my gba file, How can i do that? Or where can i get a simple lib ? 
<br/>
Here is my Makefile:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
AS = arm-agb-elf-as
<br/>
LD = arm-agb-elf-ld
<br/>
CC = arm-agb-elf-gcc
<br/>
OBJDUMP = arm-agb-elf-objdump
<br/>
CFLAGS = -Wall
<br/>
ASFLAGS =
<br/>
LDFLAGS = -nostartfiles -nostdlib -T lnkscript
<br/>
<br/>
OBJECTS = crt0.o startup.o arm.o util.o zxfont.o
<br/>
<br/>
all: t.gba
<br/>
<br/>
clean:
<br/>
    rm -f *.o main.elf t.gba
<br/>
<br/>
t.gba: main.elf
<br/>
    arm-agb-elf-objcopy -O binary main.elf t.gba
<br/>
<br/>
main.elf: ${OBJECTS}
<br/>
    $(CC) $(LDFLAGS) -o main.elf ${OBJECTS} -lgcc
<br/>
    $(OBJDUMP) -x main.elf &gt; System.map
<br/>
<br/>
.c.o: $&lt;
<br/>
    $(CC) $(CFLAGS) -c -o $@ $&lt;
<br/>
<br/>
.s.o: $&lt;
<br/>
    $(AS) $(ASFLAGS) -o $@ $&lt;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3996 - Touchstone - Sat Mar 15, 2003 12:16 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">main.elf: ${OBJECTS} 
<br/>
    $(CC) $(LDFLAGS) -o main.elf ${OBJECTS} -lgcc 
<br/>
    $(OBJDUMP) -x main.elf &gt; System.map 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The '-lgcc' tell the linker to add the file libgcc.a when linking. Note how the linker add the 'lib' prefix and '.a' suffix automatically to the library filename.<br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
