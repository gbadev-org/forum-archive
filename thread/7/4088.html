<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Using SRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > Using SRAM</h2>
<div id="posts">
<div class="post">
    <h4>#26487 - ImInABand - Thu Sep 16, 2004 11:42 pm</h4>
    <div class="postbody"><span class="postbody">How would I implement the use of SRAM?  Could someone please give me a short run through?  (if it makes a difference i use devkitadvance)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26491 - DiscoStew - Fri Sep 17, 2004 12:41 am</h4>
    <div class="postbody"><span class="postbody">If I'm correct on this, Save RAM is located at 0x0E000000, and is approx 64KBytes big  (0x0E000000 - 0x0E00FFFF). You can only write 8-bits (1 byte) at a time, not 16/32 bits. Just an idea, though I don't know how you'd set up your stuff, is have a structure containing everything you want saved, then when you are ready to write/read, cast the struct as a char pointer, and write/read 8-bits at a time. Just an idea, since I never tried using SRAM before.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26493 - ImInABand - Fri Sep 17, 2004 12:49 am</h4>
    <div class="postbody"><span class="postbody">ill take a look at doing that when i get back from class.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26499 - Krakken - Fri Sep 17, 2004 4:10 am</h4>
    <div class="postbody"><span class="postbody">Yeah, it's pretty easy.
<br/>
I use memcpy() myself and it works just fine.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26534 - ImInABand - Fri Sep 17, 2004 11:29 pm</h4>
    <div class="postbody"><span class="postbody">yeah i figured it out.  it was pretty easy, but the way i set it up was i made a tag for it so it acts as a variable, so i can copy sram like this:
<br/>
<br/>
pSaveMemory[X] = variable;
<br/>
<br/>
and to load:
<br/>
<br/>
variable = pSaveMemory[X];</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26539 - tepples - Sat Sep 18, 2004 1:02 am</h4>
    <div class="postbody"><span class="postbody">Directly accessing SRAM is a bad idea. Hide your game's cartridge SRAM accesses in a memcpy() style interface just in case you want to adapt your program to use EEPROM or flash save should you get signed by a label.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26543 - Krakken - Sat Sep 18, 2004 1:41 am</h4>
    <div class="postbody"><span class="postbody">You can save a struct for example by doing this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct _xDataStruct {
<br/>
  int iData;
<br/>
  int iData2;
<br/>
  char cX;
<br/>
  char cY;
<br/>
  char* pcOtherData;
<br/>
};
<br/>
<br/>
_xDataStruct xStruct;
<br/>
<br/>
memcpy((void*)0x0E000000 + iOffset, (void*)&amp;xStruct, sizeof(_xDataStruct)); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This will save the entire struct into SRAM. To load it again, swap the first two memcpy() params around the other way.</span><span class="gensmall"><br/><br/>Last edited by Krakken on Sat Sep 18, 2004 1:42 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#26544 - ImInABand - Sat Sep 18, 2004 1:42 am</h4>
    <div class="postbody"><span class="postbody">yeah, but as of right now, all i make are no-chance-of-going-anywhere pdroms, most of which i make for my own amusement.  
<br/>
<br/>
IF AND ONLY IF I EVER get signed by a label [ fat chance of that happening]  i will switch to memcpy()  
<br/>
<br/>
have a nice day :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26545 - Krakken - Sat Sep 18, 2004 1:58 am</h4>
    <div class="postbody"><span class="postbody">You can do that also without memcpy(). Use the data like this though:
<br/>
<br/>
char* pcDataSRAM = (char*)&amp;xStruct;
<br/>
<br/>
Then use "pcDataSRAM" as if it were an array of bytes of size "sizeof(_xDataStruct)". It just allows you to organise your gamestates, player data much better.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26560 - dagamer34 - Sat Sep 18, 2004 4:28 pm</h4>
    <div class="postbody"><span class="postbody">I topic I made a very long time ago. Very useful I would think!
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=2550&amp;highlight=sram" target="_blank">Saving RAW Data</a>
<br/>
<br/>
It's usually a good idea to search around the forums before you make a topic as chances are it has been made before. You also get more insight into the topic itself, without having to wait for more people to reply. If you need more help then, then that's when its best to make a new topic as other people can be pointed to it in the future. :)<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
