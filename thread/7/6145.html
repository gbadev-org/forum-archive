<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>displaying values - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > displaying values</h2>
<div id="posts">
<div class="post">
    <h4>#46501 - wiz - Sun Jun 26, 2005 10:37 am</h4>
    <div class="postbody"><span class="postbody">Hello once again,
<br/>
<br/>
I have been thinking of methods to display text and numbers on screen using sprites.  So far everything is going really well.
<br/>
<br/>
In the past, on the PC, to display a number I would convert it to a string and loop through it getting the character value of each character.
<br/>
<br/>
But wouldn't this be rather slow on the GBA?  I'm trying to think up a way to display a number (lets say 12345) but I cant see how to get each number in order (as it would need to be split up like 1 then 2 then 3 then 4 then 5)
<br/>
<br/>
Maybe the conversion to string is the best method afterall?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46506 - Quirky - Sun Jun 26, 2005 12:48 pm</h4>
    <div class="postbody"><span class="postbody">What I would do would be to try the 'slow' approach and see if it fitted my needs. If it does, yay! if not, then start thinking of optimising. For a first draft you could even use sprintf, or the int only version <a class="postlink" href="http://www.objsw.com/docs/libc_76.html" target="_blank">siprintf</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46509 - Fatnickc - Sun Jun 26, 2005 1:05 pm</h4>
    <div class="postbody"><span class="postbody">There are some other things you could do. I have only really used these on 2 digit numbers, but once you have some of the numbers, you can get the rest.
<br/>
For example, if you had 3456, you would do this (note you don't work in order) :
<br/>
<br/>
6 :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while(x&gt;=10)
<br/>
x=x-10;
<br/>
fy=x;</td> </tr></table><span class="postbody">
<br/>
<br/>
(reset x)
<br/>
<br/>
5 :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x=x-fy;
<br/>
while(x&gt;=100)
<br/>
x=x-100;
<br/>
thy=x/10;</td> </tr></table><span class="postbody">
<br/>
<br/>
(reset x)
<br/>
<br/>
4 :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x=x-((thy*10)+fy);
<br/>
while(x&gt;=1000)
<br/>
x=x-1000;
<br/>
ty=x/100;</td> </tr></table><span class="postbody">
<br/>
<br/>
(reset x)
<br/>
<br/>
3 :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x=x-((ty*100)+(thy*10)+fy);
<br/>
oy=x/1000;</td> </tr></table><span class="postbody">
<br/>
<br/>
And there you have all of the individual digits.
<br/>
I'm very sure you can see the pattern for getting the xth digit, and you could expand it to meet your every need!
<br/>
<br/>
*** oy=first digit
<br/>
*** ty=second digit
<br/>
*** thy=third digit
<br/>
*** fy=fourth digit</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46517 - poslundc - Sun Jun 26, 2005 5:21 pm</h4>
    <div class="postbody"><span class="postbody">Check out <a class="postlink" href="http://www.danposluns.com/gbadev/posprintf/index.html" target="_blank">posprintf</a> for GBA-optimized quick-and-easy conversion from base-2 to base-10.
<br/>
<br/>
You can search the forums for other techiques as well, but one thing I definitely would recommend is sticking to the standard of printing the number to an ASCII string somehow, then just displaying that string using whatever text rendering technique you use. Numbers and text should probably not be treated differently as far as displaying them goes.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46655 - ScottLininger - Tue Jun 28, 2005 6:10 pm</h4>
    <div class="postbody"><span class="postbody">Here's a cheesy, unoptimized version of decimal printing. I use this function in my text engine. It assumes you have a function called BlitCharacter that takes an ASCII value and spits a single character onto your screen...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void printDec(int decimalNumber) {
<br/>
   
<br/>
   int place = 10; // change to 100 for 3-digit output, etc.
<br/>
   int lastAmount = 0;
<br/>
   int nextDigit;
<br/>
   do {
<br/>
     
<br/>
     nextDigit = (decimalNumber-lastAmount)/place;
<br/>
     lastAmount = lastAmount + (nextDigit*place);
<br/>
     BlitCharacter(nextDigit + 48); // since numbers start at 48 in ascii
<br/>
     place= place/10;
<br/>
     
<br/>
   } while(place &gt; 0);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
-Scott</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
