<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Information on GCC warnings - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Information on GCC warnings</h2>
<div id="posts">
<div class="post">
    <h4>#31916 - abilyk - Wed Dec 15, 2004 10:42 pm</h4>
    <div class="postbody"><span class="postbody">Hey guys,
<br/>
<br/>
Today I started compiling with -Wall and am working on cleaning up all the warnings that show up now (and here I thought my code was all nice and shiny!).  Does anyone know of any resources for info on GCC warnings?  I have to admit I don't really know what a lot of these warnings actually mean (like near initialization), and I've had little luck searching on Google.  I've been able to get rid of a lot through trial and error, but I'd like to make this a more educated process if possible.
<br/>
<br/>
Thanks,
<br/>
Andrew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31922 - abilyk - Wed Dec 15, 2004 11:45 pm</h4>
    <div class="postbody"><span class="postbody">I'm still interested in finding some resources just for learning's sake, but I've already cleaned up almost every error.  The one that remains I could easily fix, but I'd have to break the standards I've been coding under and I'd prefer to avoid that.  The way I've been doing it, every .c file (barring main.c) has a corresponding header file.  All functions are declared in the headers and defined in the .c files.  Here are the details:
<br/>
<br/>
In mathematics.h:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">CODE_IN_IWRAM        void SeedMTRand(u32 s);
<br/>
CODE_IN_IWRAM        u32  MTRand(void);
<br/>
CODE_IN_IWRAM static void NextState(void);</td> </tr></table><span class="postbody">
<br/>
<br/>
In mathematics.c:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">CODE_IN_IWRAM void SeedMTRand(u32 s)
<br/>
{
<br/>
    ...
<br/>
}
<br/>
<br/>
CODE_IN_IWRAM u32 MTRand(void)
<br/>
{
<br/>
    ...
<br/>
    NextState();
<br/>
    ...
<br/>
}
<br/>
<br/>
CODE_IN_IWRAM static void NextState(void)
<br/>
{
<br/>
    ...
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
As it is here, I get a warning in the .h file, <span style="font-style: italic">`NextState' declared `static' but never defined.</span>  The header file can't see the definition because the definition is static, so I understand why I'm getting the error.  If I remove the static from the header, I get a warning in the .c file, <span style="font-style: italic">static declaration for `NextState' follows non-static.</span>  This sounds misleading to me at least, because it's the static <span style="text-decoration: underline">definition</span> that's following the non-static declaration.  But regardless, my declaration apparently needs to be "static" as well.
<br/>
<br/>
Simple (and perhaps the only) solutions would be to declare the function in my .c file instead of the header file or to completely forgo a declaration and move the function definition above the MTRand function (which references NextState).  However, as mentioned above I'd like to keep things consistent, so if there's some sort of loophole to allow me to keep the declaration in the header, I'd love to hear it.
<br/>
<br/>
Thanks,
<br/>
Andrew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31928 - poslundc - Thu Dec 16, 2004 12:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>abilyk wrote:</b></span></td> </tr> <tr> <td class="quote">Simple (and perhaps the only) solutions would be to declare the function in my .c file instead of the header file</td> </tr></table><span class="postbody">
<br/>
<br/>
This is the correct solution.
<br/>
<br/>
Header files are for the public information that tells another module how to interface with your module. Static functions are, by definition, hidden from other modules and therefore should not appear in header files.
<br/>
<br/>
From a pragmatic standpoint, if I have a static function <span style="font-weight: bold">f</span> in <span style="font-weight: bold">foo.c</span> and put its prototype in <span style="font-weight: bold">foo.h</span>, then #include this header into <span style="font-weight: bold">bar.c</span>, I've just prototyped a function in <span style="font-weight: bold">bar.c</span> that is inaccessible to it, which is erroneous.
<br/>
<br/>
In sum, declare your prototypes in two places: public access routines in the header file, local routines in the C file. This public/private-classification coding practice applies to things like structures and macros as well.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
