<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>simple multiboot sample not working - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > simple multiboot sample not working</h2>
<div id="posts">
<div class="post">
    <h4>#1900 - circaeng - Sat Jan 25, 2003 6:11 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I am trying to get my first GBA program working. It works fine on BoyCott but the screen is blank when It runs on the real thing. I use my own cable with xboo. The cable wotks cause I don;t have problem downloading sample apps. The header to my app seems ok since the Nintendo logo appears. Here is the output of gbahdr.exe tool when run with my app:
<br/>
<br/>
gbahdr v0.1.2 by anarko
<br/>
<br/>
Start offset       : 0x080000C0
<br/>
Logo code          : Ok
<br/>
Game title         : 
<br/>
Game code          : 0x00000000
<br/>
Maker code         : 0x3031 (Nintendo)
<br/>
Fixed value        : Ok
<br/>
Main unit code     : 0x00
<br/>
Device type        : 0x00
<br/>
Unused data        : Ok
<br/>
Software version   : 0x00
<br/>
Complementary check: 0xF0 (Calculated F0, Ok)
<br/>
Checksum           : 0x0000
<br/>
<br/>
The app I try to run is:
<br/>
<br/>
#include "gba.h"
<br/>
<br/>
#include "screenmodes.h"
<br/>
<br/>
#define MULTIBOOT volatile const u8 __gba_multiboot=0;
<br/>
MULTIBOOT
<br/>
<br/>
u16* theVideoBuffer = (u16*)VideoBuffer;
<br/>
<br/>
#define RGB(r,g,b) (r+(g&lt;&lt;5)+(b&lt;&lt;10))                   //Macro to build a color from its parts
<br/>
<br/>
<br/>
<br/>
int main(void)
<br/>
<br/>
{
<br/>
<br/>
            SetMode( SCREENMODE3 | BG2ENABLE );      //Set screen mode
<br/>
<br/>
            int x = 10, y = 10;                                                       //Pixel location
<br/>
<br/>
<br/>
<br/>
            theVideoBuffer[ x + y * 240 ] = RGB( 31, 31, 31 ); //Plot our pixel
<br/>
<br/>
            return 0;
<br/>
<br/>
}
<br/>
<br/>
What am I doing wrong?
<br/>
<br/>
<br/>
Thank You!
<br/>
<br/>
Patrick</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1902 - tepples - Sat Jan 25, 2003 6:24 am</h4>
    <div class="postbody"><span class="postbody">Boycott Advance doesn't claim to support .mb programs natively; it probably treats them the same as .gba programs.
<br/>
<br/>
Does your program work on VisualBoyAdvance, when renamed to something.mb (NOT something.gba or something.bin)?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1903 - circaeng - Sat Jan 25, 2003 6:31 am</h4>
    <div class="postbody"><span class="postbody">I tried to install VBA on my NT system but failed to run for lack of DirectX</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1935 - tepples - Sun Jan 26, 2003 9:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>circaeng wrote:</b></span></td> </tr> <tr> <td class="quote">I tried to install VBA on my NT system but failed to run for lack of DirectX</td> </tr></table><span class="postbody">
<br/>
I'm using <a class="postlink" href="http://www.microsoft.com/windows2000/" target="_blank">Windows 2000 Professional</a> sp3 (NT 5.0) on a Dell box with an 866 MHz PIII processor, and VisualBoyAdvance works just fine.  VBA works out of the box on Windows XP (NT 5.1) as well.  Windows NT 4, on the other hand, is limited to DirectX 3.0 and is not designed for developing or testing games.
<br/>
<br/>
Another way to test if a ROM is actually compiled as .mb or not is to put it in a <a class="postlink" href="http://www.pineight.com/gba/#mbmenu" target="_blank">Multiboot Menu</a> and see if it runs.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1942 - ampz - Sun Jan 26, 2003 11:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>circaeng wrote:</b></span></td> </tr> <tr> <td class="quote">Hi,
<br/>
Start offset       : 0x080000C0
<br/>
<br/>
What am I doing wrong?
<br/>
Patrick</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, 0x080000C0 seems very wrong if you are trying to multiboot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2027 - circaeng - Mon Jan 27, 2003 11:06 pm</h4>
    <div class="postbody"><span class="postbody">Found the problem .
<br/>
<br/>
I now use 
<br/>
<br/>
int __gba_multiboot=0;
<br/>
<br/>
instead of const . const doesn't get included in code in c++. App now loads at 2000000
<br/>
<br/>
Patrick</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
