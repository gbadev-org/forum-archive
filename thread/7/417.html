<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Code will not boot on GBA hardware. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Code will not boot on GBA hardware.</h2>
<div id="posts">
<div class="post">
    <h4>#2615 - cesium - Sun Feb 09, 2003 5:37 am</h4>
    <div class="postbody"><span class="postbody">My code will simply not boot on actual GBA hardware. It emulates fine,
<br/>
it multiboots fine (I just send 2 copies to the GBA using the Flash 2 Advance, and it pre-pends a loader).
<br/>
<br/>
Any ideas?
<br/>
<br/>
I have implemented all the suggestions from other topics on crt0.s.
<br/>
I am using CPP, so I un-commented the CPP section in the lnkscript.
<br/>
I am using devkit advance, so I copied over the crtbegin and end from
<br/>
one of the interwork sub-dirs.
<br/>
I have crt0 as the first of my o files. Should crtbegin be first?
<br/>
I commented out boot.o.
<br/>
<br/>
Headers: whew, headers. I have hammered on my bin file with
<br/>
every possible header tool on the net. Although none of them ever
<br/>
seem to come up with the same 'complement check' value.
<br/>
<br/>
Flash2Advance: Using ver1.3NT, have tried checking and unchecking all
<br/>
config options, ktl.
<br/>
<br/>
Give a man a fish... and all that. I am really looking for some sound
<br/>
debugging concepts here... but if standing on my head and left shift
<br/>
clicking on location 0x0c makes it work... well that's ok too.
<br/>
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2616 - cesium - Sun Feb 09, 2003 6:00 am</h4>
    <div class="postbody"><span class="postbody">Correction to prev post: I probably mis-used the term 'multiboot'.
<br/>
What I meant was that I can get my code to run on real hardware
<br/>
if I send 2 copies of it via Flash2Advance and let it install its loader.
<br/>
Ick!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2617 - gb_feedback - Sun Feb 09, 2003 9:38 am</h4>
    <div class="postbody"><span class="postbody">It does sound like an initial state problem - what goes wrong? Blank screen?
<br/>
Maybe there's something you haven't set up but which emulators, and the memu programs do for you?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2621 - cesium - Sun Feb 09, 2003 3:09 pm</h4>
    <div class="postbody"><span class="postbody">Good one!
<br/>
<br/>
What I see is basically a blank 'white' screen.
<br/>
<br/>
You're suggestion that I have omitted some initialization code is a
<br/>
good one. I will study that further. Also, could you suggest an app that
<br/>
I could download to test booting?
<br/>
<br/>
This way I could take a peek at their init code.
<br/>
<br/>
A small app of the 'Hello World' variety would be great.
<br/>
<br/>
I'll take this opportunity to say that the GBA dev community
<br/>
is darned impressive. There are some good coders, writers, and
<br/>
generous folks here.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2623 - cesium - Sun Feb 09, 2003 3:51 pm</h4>
    <div class="postbody"><span class="postbody">Found the problem!
<br/>
<br/>
The ol'  "blank the display bit."
<br/>
(My code was running after all...)
<br/>
<br/>
I init the display using macros that OR my settings into the current
<br/>
state of the display control register. Thus I
<br/>
had a 1 in the blanking bit and never cleared it.
<br/>
<br/>
The demos I see on the net show
<br/>
initialization by WRITING a couple bits into the control register.
<br/>
That clears the other bits.
<br/>
<br/>
You da' man! Thanks!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
