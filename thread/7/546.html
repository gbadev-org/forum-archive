<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>custom lib usage problems - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > custom lib usage problems</h2>
<div id="posts">
<div class="post">
    <h4>#2915 - col - Fri Feb 14, 2003 2:03 pm</h4>
    <div class="postbody"><span class="postbody">Hi , I'm having some problems using a custom library in my link process.
<br/>
<br/>
I have built the library with:
<br/>
arm-agb-elf-ar rcs myLib.a foo.o bar.o etc.
<br/>
<br/>
I have also tried:
<br/>
arm-agb-elf-ar rc myLib.a foo.o bar.o etc.
<br/>
arm-agb-elf-ranlib myLib.a
<br/>
<br/>
<br/>
When I try to use it with devkitadv (windows):
<br/>
-L pathToMyLib     or     -lmyLib.a
<br/>
It dosn't work work.
<br/>
I am including headers for the individual .o files that make up the library.
<br/>
The headers are being accessed in the compile process, it's just linking that's messed up.
<br/>
(I have a feeling that it might be a cygwin issue as when i use -lmyLib.a, gcc can never find it!)
<br/>
<br/>
any suggestions?
<br/>
<br/>
cheers
<br/>
<br/>
col</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2916 - Saikou - Fri Feb 14, 2003 2:18 pm</h4>
    <div class="postbody"><span class="postbody">I'm not too sure if this is right, I don't have that much experience with gcc.
<br/>
<br/>
What I do is use ar to make the .a file, then pass it along to gcc along with the .o files, i.e. without the -L or -l option
<br/>
<br/>
Example:
<br/>
gcc Main.o MyLib.a -o Game.elf</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2928 - col - Fri Feb 14, 2003 3:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Saikou wrote:</b></span></td> </tr> <tr> <td class="quote">I'm not too sure if this is right, I don't have that much experience with gcc.
<br/>
<br/>
What I do is use ar to make the .a file, then pass it along to gcc along with the .o files, i.e. without the -L or -l option
<br/>
<br/>
Example:
<br/>
gcc Main.o MyLib.a -o Game.elf</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks
<br/>
<br/>
I'll give that a try (when I get home)
<br/>
<br/>
[edit] yep, thanks that worked.
<br/>
I'd still like to know why the -L -l switches don't work, and what they are specifically for - anyone know?
<br/>
<br/>
cheers
<br/>
<br/>
col</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2971 - BitWise - Sat Feb 15, 2003 10:24 am</h4>
    <div class="postbody"><span class="postbody">The -L option specifies the directories to look in for libararies while the -l provides the name of the target (less the lib prefix and .a suffix parts).
<br/>
<br/>
So assuming that libmylib.a is in a directory ../lib relative to the current directory you need to:
<br/>
<br/>
gcc -L../lib example.o -lmylib -o myApp</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2972 - BitWise - Sat Feb 15, 2003 10:26 am</h4>
    <div class="postbody"><span class="postbody">The -L option specifies the directories to look in for libararies while the -l provides the name of the target (less the lib prefix and .a suffix parts).
<br/>
<br/>
So assuming that libmylib.a is in a directory ../lib relative to the current directory you need to:
<br/>
<br/>
gcc -L../lib example.o -lmylib -o myApp</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2978 - col - Sat Feb 15, 2003 2:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>BitWise wrote:</b></span></td> </tr> <tr> <td class="quote">The -L option specifies the directories to look in for libararies while the -l provides the name of the target (less the lib prefix and .a suffix parts).
<br/>
<br/>
So assuming that libmylib.a is in a directory ../lib relative to the current directory you need to:
<br/>
<br/>
gcc -L../lib example.o -lmylib -o myApp</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, I knew what -L and -l were supposed to mean, but i didn't realise that the name of the lib should always pe prefixed with 'lib' ie.
<br/>
libmyLib.a instead of myLib.a
<br/>
<br/>
Am I understanding this correctly?
<br/>
<br/>
<br/>
cheers
<br/>
<br/>
col.</span><span class="gensmall"><br/><br/>Last edited by col on Sun Feb 16, 2003 2:16 am; edited 1 time in total</span></div>    
</div>
</div>

    </body>
</html>
