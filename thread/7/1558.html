<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>RGB macro question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > RGB macro question</h2>
<div id="posts">
<div class="post">
    <h4>#7933 - MidiMouse - Sat Jun 28, 2003 10:14 pm</h4>
    <div class="postbody"><span class="postbody">I was looking at the Loirak Development GBA Tutorial:
<br/>
<br/>
<a href="http://www.loirak.com/gameboy/gbatutor.html" target="_blank">http://www.loirak.com/gameboy/gbatutor.html</a>
<br/>
<br/>
but I don't understand the reason the purpose for shifting in this line in the first program:
<br/>
<br/>
#define RGB16(r,g,b) ((r)+(g&lt;&lt;5)+(b&lt;&lt;10))
<br/>
<br/>
I read the description, but still don't understand. Can someone clarify?
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7941 - Archeious - Sun Jun 29, 2003 1:19 am</h4>
    <div class="postbody"><span class="postbody">Pixel on the GBA are made up of three primary colors (RED,GREEN,BLUE) stored in a 16bit word (XBBBBBGGGGGRRRRR).  The &lt;&lt; and &gt;&gt; are shift operators.  In other words it shift the bits up or down. So a 0000000000011111b &lt;&lt; 5 becomes 0000001111100000b.  Hope that helps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7943 - MidiMouse - Sun Jun 29, 2003 3:29 am</h4>
    <div class="postbody"><span class="postbody">Ohhh, I see...that makes sense. Thanks
<br/>
<br/>
Okay, say I shift green &lt;&lt;3. Does that mean that I can only have 8 possible colors for red?
<br/>
<br/>
Thanks,
<br/>
Lam</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7946 - Archeious - Sun Jun 29, 2003 6:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MidiMouse wrote:</b></span></td> </tr> <tr> <td class="quote">Ohhh, I see...that makes sense. Thanks
<br/>
<br/>
Okay, say I shift green &lt;&lt;3. Does that mean that I can only have 8 possible colors for red?
<br/>
<br/>
Thanks,
<br/>
Lam</td> </tr></table><span class="postbody">
<br/>
<br/>
No because #define RGB16(r,g,b) ((r)+(g&lt;&lt;3)+(b&lt;&lt;6))  Let say you pass the values RGB16(31,18,25) it would resolve like this
<br/>
<br/>
((11111b)+(10010b&lt;&lt;3)+(11001b&lt;&lt;6)) or 
<br/>
((11111)+(10010000)+(11001000000)) or
<br/>
31+144+1600 =  1775 or
<br/>
000011011101111 and when that is stuck into a 16 palette it would be this 
<br/>
(0) Extra Bit (00001)Red (10111)Green (01111)Blue
<br/>
Nothing like the intended color.  Does that make sense?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7948 - tepples - Sun Jun 29, 2003 6:15 am</h4>
    <div class="postbody"><span class="postbody">On the other hand, some programs that render to an 8-bit buffer do set up the palette in such a way (3:3:2 direct color) that green is shifted left by 3 bits:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define RGB8(r,g,b) ((r)+(g&lt;&lt;3)+(b&lt;&lt;6))
<br/>
/*
<br/>
76543210Â  8-bit direct color
<br/>
||||||||
<br/>
|||||+++- Red (0-7)
<br/>
||+++---- Green (0-7)
<br/>
++------- Blue (0-3)
<br/>
*/</td> </tr></table><span class="postbody">
<br/>
But it still doesn't make sense in a 16-bit environment.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7979 - MidiMouse - Sun Jun 29, 2003 8:34 pm</h4>
    <div class="postbody"><span class="postbody">okay, I get it! Thanks alot!
<br/>
<br/>
-Lam</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
