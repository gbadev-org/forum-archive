<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Error in function (urgent) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Error in function (urgent)</h2>
<div id="posts">
<div class="post">
    <h4>#3379 - Jer1400 - Sun Feb 23, 2003 9:02 pm</h4>
    <div class="postbody"><span class="postbody">What I'm trying to do is create 2 functions, one to store the screen away and one to restore it. Then what I'll do is paste random peices of the screen that was drawn when the screen was black (it was hardware faded and then drawn) when I use the hardware fading to bring the screen back to normal for a cool effect. This is what the compiler tells me:
<br/>
<br/>
In file included from tutor.c:13:
<br/>
drawing.h:183: parse error before '}' token
<br/>
drawing.h:186: parse error before "for"
<br/>
<br/>
Here is the code it is talking about, and the lines are labeled so you know which ones are 183 and 186:
<br/>
<br/>
///SaveScreen\\\
<br/>
int SaveScreen()
<br/>
{			///////////////////////////////////////Line 183
<br/>
int x=0, y=0;
<br/>
int tempscreen [100000];
<br/>
for (y=0; y&lt;161; y++)	///////////////////////////////////////Line 186
<br/>
{
<br/>
for (x=0; x&lt;241; x++)
<br/>
tempscreen[x+y*240]=videoBuffer[x+y*240];
<br/>
}
<br/>
return 0;
<br/>
}
<br/>
<br/>
///RestoreScreen\\\
<br/>
void RestoreScreen(int x,int y,int x2,int y2,int xlocation,int ylocation)
<br/>
{
<br/>
int xcurrent=0, tempy=ylocation, tempx=xlocation;
<br/>
for (y=y; y&lt;y2; y++)
<br/>
{
<br/>
tempx=xlocation;
<br/>
for (xcurrent=x; xcurrent&lt;x2; xcurrent++)
<br/>
{
<br/>
videobuffer[tempx+tempy*240]=tempscreen[xcurrent+y*240];
<br/>
tempx++;
<br/>
}
<br/>
tempy++;
<br/>
}
<br/>
}
<br/>
<br/>
And incase you were wondering here is the code for the random thing:
<br/>
<br/>
int main(void)
<br/>
{
<br/>
int stall=0, pixels=0, x, y, x2, y2;
<br/>
SetMode(MODE_3 | BG2_ENABLE );
<br/>
fadeout(1);
<br/>
DrawName();
<br/>
SaveScreen();
<br/>
FillScreen(0,0,0);
<br/>
fadein(1);
<br/>
while(pixels&lt;160000)
<br/>
{
<br/>
x=rand()%241;
<br/>
y=rand()%161;
<br/>
x2=x+1;
<br/>
y2=y+1;
<br/>
RestoreScreen(x,y,x2,y2,x,y);
<br/>
pixels++;
<br/>
}
<br/>
while(1){}
<br/>
} //end main
<br/>
<br/>
I know most of this is not nessesary for you to see, and I only post it because 2 weeks ago when I was learning the basics it helped me a lot to look through other people's code and I hope that maybe someone else will get one of their problems solved through my own trial and error. Anyway, thanks in advance! :)
<br/>
	    ^GBA Humor...lol.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3381 - mbcook - Sun Feb 23, 2003 9:30 pm</h4>
    <div class="postbody"><span class="postbody">I think your missing a bracket before the code you posted. Could you give us a few lines before the problem too?<br/>_________________<br/>--Michael</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3392 - Jer1400 - Mon Feb 24, 2003 12:21 am</h4>
    <div class="postbody"><span class="postbody">I gave you everything...I'm not missing a bracket that's not supposed to be there. You see, there is an error in the savescreen function...anyway I just gave you all the code.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3395 - col - Mon Feb 24, 2003 12:41 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jer1400 wrote:</b></span></td> </tr> <tr> <td class="quote">I gave you everything......anyway I just gave you all the code.</td> </tr></table><span class="postbody">
<br/>
<br/>
...er so you're suggesting that you have 180 blank lines in the file before the code starts? hmm... ;-)
<br/>
<br/>
I think mbcook is probably right. The error is in the code that comes before the saveScreen() function
<br/>
<br/>
Cheers
<br/>
<br/>
col</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3398 - Jer1400 - Mon Feb 24, 2003 1:28 am</h4>
    <div class="postbody"><span class="postbody">No, all that file contains is a bunch of functions. It was working fine until I added the savescreen() function, and the errors even give me the exact places where they occured.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3400 - mbcook - Mon Feb 24, 2003 1:40 am</h4>
    <div class="postbody"><span class="postbody">Well that code looks correct to me. The error has to be before there. I don't know how it couldn't be.<br/>_________________<br/>--Michael</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3409 - Jer1400 - Mon Feb 24, 2003 6:18 am</h4>
    <div class="postbody"><span class="postbody">Well, usually what it means is that there was just a semi-colin left off. But what it does is it tells you the line and the character or function that comes right before the error. I think something is out of sequence or just plain left off. The problem is I don't know what.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3418 - headspin - Mon Feb 24, 2003 12:13 pm</h4>
    <div class="postbody"><span class="postbody">The line numbers given arn't necessarily where you have made an error, it's only where the compiler has realised there is an error and the line number is a guess of where the error has occured. Often the compiler gives the correct line number but sometimes it dosn't. Generally the error will be around the it which is why several people have said to look above the code given. I can't see any error in the code posted so it's almost certainly above it.
<br/>
<br/>
I would get in a habit of writing code with indentation when you have code within { .. } brackets because without it code is harder to read and debug.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3456 - Jer1400 - Tue Feb 25, 2003 7:50 am</h4>
    <div class="postbody"><span class="postbody">As I have said before, the above code consists of a bunch of functions I use to draw stuff. I've used all of those functions and compiled things without error several times before. It was only when I added that method that it said it had an error. I tested it by taking that one method out and compiling it, and guess what? It gave me the same error message, and on the same lines, respectively. Is there any so-called "guru" around here that I can talk to? I know most communities usually have one or two.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3462 - Splam - Tue Feb 25, 2003 11:45 am</h4>
    <div class="postbody"><span class="postbody">errr
<br/>
<br/>
int tempscreen [100000]; 
<br/>
<br/>
where do you think that is going?  390+k.. defining that has probably confused the compiler somewhat, definining it inside a function then referencing it from another function is also not a good idea ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3465 - Paul Shirley - Tue Feb 25, 2003 1:11 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:45 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3489 - Jer1400 - Tue Feb 25, 2003 10:50 pm</h4>
    <div class="postbody"><span class="postbody">Are any of you listening?! I compiled that function and that function alone and I got the same error. I took it out and compiled it and no errors came up in drawing.h! It has nothing to do with what is above there! All that is there are some of starmonkey's drawing functions that I modified. But if you still want it, when I get home I'll post it. Damn this is frustrating-I can't belive no one will listen to anything I am saying!<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3495 - Paul Shirley - Wed Feb 26, 2003 2:20 am</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:46 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3501 - Jer1400 - Wed Feb 26, 2003 6:25 am</h4>
    <div class="postbody"><span class="postbody">//////////////////////////
<br/>
///Drawing.h///
<br/>
///////////////////////
<br/>
<br/>
#define RGB16(r,g,b)  ((r)+(g&lt;&lt;5)+(b&lt;&lt;10))
<br/>
u16* videoBuffer = (u16*)0x6000000;
<br/>
<br/>
/////////////////////////
<br/>
///Functions///
<br/>
///////////////////////
<br/>
<br/>
//Set a pixel on the screen!
<br/>
void SetPixel(int x, int y, int r, int g, int b) {videoBuffer[x+y*240] = RGB16(r,g,b);}
<br/>
<br/>
//Draw a rectangle on the screen!
<br/>
void FillRect(int x_start, int y_start, int x_stop, int y_stop, int r, int g, int b)
<br/>
{
<br/>
int x_current;
<br/>
int y_current;
<br/>
for(x_current = x_start; x_current&lt;x_stop; x_current++)   //loop through all x
<br/>
{
<br/>
for(y_current = y_start; y_current&lt;y_stop; y_current++)   //loop through all x
<br/>
{
<br/>
videoBuffer[x_current+y_current*240] = RGB16(r,g,b);
<br/>
}
<br/>
}
<br/>
}
<br/>
<br/>
//Fill the screen with color!
<br/>
void FillScreen(int r, int g, int b)
<br/>
{
<br/>
int x_currentfillscreen;
<br/>
int y_currentfillscreen;
<br/>
for(x_currentfillscreen = 0; x_currentfillscreen&lt;240; x_currentfillscreen++)
<br/>
{
<br/>
for(y_currentfillscreen = 0; y_currentfillscreen&lt;160; y_currentfillscreen++)
<br/>
{
<br/>
videoBuffer[x_currentfillscreen+y_currentfillscreen*240] = RGB16(r,g,b);
<br/>
}
<br/>
}
<br/>
}
<br/>
<br/>
//Draw a line on the screen!
<br/>
void DrawLine(int x1, int y1, int x2, int y2, int r, int g, int b)
<br/>
{
<br/>
int i, deltax, deltay, numpixels;
<br/>
int d, dinc1, dinc2;
<br/>
int x, xinc1, xinc2;
<br/>
int y, yinc1, yinc2;
<br/>
<br/>
deltax = abs(x2 - x1);
<br/>
deltay = abs(y2 - y1);
<br/>
<br/>
if(deltax &gt;= deltay)
<br/>
{
<br/>
numpixels = deltax + 1;
<br/>
d = (2 * deltay) - deltax;
<br/>
dinc1 = deltay &lt;&lt; 1;
<br/>
dinc2 = (deltay - deltax) &lt;&lt; 1;
<br/>
xinc1 = 1;
<br/>
xinc2 = 1;
<br/>
yinc1 = 0;
<br/>
yinc2 = 1;
<br/>
}
<br/>
else
<br/>
{
<br/>
numpixels = deltay + 1;
<br/>
d = (2 * deltax) - deltay;
<br/>
dinc1 = deltax &lt;&lt; 1;
<br/>
dinc2 = (deltax - deltay) &lt;&lt; 1;
<br/>
xinc1 = 0;
<br/>
xinc2 = 1;
<br/>
yinc1 = 1;
<br/>
yinc2 = 1;
<br/>
}
<br/>
if(x1 &gt; x2)
<br/>
{
<br/>
xinc1 = -xinc1;
<br/>
xinc2 = -xinc2;
<br/>
}
<br/>
if(y1 &gt; y2)
<br/>
{
<br/>
yinc1 = -yinc1;
<br/>
yinc2 = -yinc2;
<br/>
}
<br/>
x = x1;
<br/>
y = y1;
<br/>
for(i = 1; i &lt; numpixels; i++)
<br/>
{
<br/>
SetPixel(x, y, r, g, b);
<br/>
if(d &lt; 0)
<br/>
{
<br/>
d = d + dinc1;
<br/>
x = x + xinc1;
<br/>
y = y + yinc1;
<br/>
}
<br/>
else
<br/>
{
<br/>
d = d + dinc2;
<br/>
x = x + xinc2;
<br/>
y = y + yinc2;
<br/>
}
<br/>
}
<br/>
}
<br/>
<br/>
//Draw a circle on the screen!
<br/>
void DrawCircle(int xCenter, int yCenter, int radius, int r, int g, int b)
<br/>
{
<br/>
int x = 0;
<br/>
int y = radius;
<br/>
int p = 3 - 2 * radius;
<br/>
while (x &lt;= y)
<br/>
{ 
<br/>
SetPixel(xCenter + x, yCenter + y, r, g, b);
<br/>
SetPixel(xCenter - x, yCenter + y, r, g, b);
<br/>
SetPixel(xCenter + x, yCenter - y, r, g, b);
<br/>
SetPixel(xCenter - x, yCenter - y, r, g, b);
<br/>
SetPixel(xCenter + y, yCenter + x, r, g, b);
<br/>
SetPixel(xCenter - y, yCenter + x, r, g, b);
<br/>
SetPixel(xCenter + y, yCenter - x, r, g, b);
<br/>
SetPixel(xCenter - y, yCenter - x, r, g, b);
<br/>
if (p &lt; 0)
<br/>
{
<br/>
p += 4 * x++ + 6;
<br/>
}
<br/>
else
<br/>
{
<br/>
p += 4 * (x++ - y--) + 10;
<br/>
}
<br/>
}
<br/>
}
<br/>
<br/>
//Fill a circle on the screen!
<br/>
void FillCircle(int x, int y, int radius, int r, int g, int b)
<br/>
{
<br/>
float crad=0;
<br/>
while(crad&lt;radius)
<br/>
{
<br/>
crad=crad+.5;
<br/>
DrawCircle(x,y,crad,r,g,b);
<br/>
}
<br/>
crad=0;
<br/>
while(crad&lt;radius-1)
<br/>
{
<br/>
crad=crad+.5;
<br/>
DrawCircle(x-1,y,crad,r,g,b);
<br/>
}
<br/>
crad=0;
<br/>
while(crad&lt;radius-1)
<br/>
{
<br/>
crad=crad+.5;
<br/>
DrawCircle(x+1,y,crad,r,g,b);
<br/>
}
<br/>
}
<br/>
<br/>
//Draw a circle that fades between 2 colors on the screen!
<br/>
int FadeCircle(int x, int y, int radius, int r, int g, int b, int r2, int g2, int b2)
<br/>
{
<br/>
float cradius=radius;
<br/>
int cr=r, cg=g, cb=b;
<br/>
while (cradius&gt;.5)
<br/>
{
<br/>
FillCircle(x,y,cradius,cr,cg,cb);
<br/>
if (cr&gt;r2)
<br/>
	cr--;
<br/>
if (cr&lt;r2)
<br/>
	cr++;
<br/>
if (cg&gt;g2)
<br/>
	cg--;
<br/>
if (cg&lt;g2)
<br/>
	cg++;
<br/>
if (cb&gt;b2)
<br/>
	cb--;
<br/>
if (cb&lt;b2)
<br/>
	cb++;
<br/>
cradius=cradius-.5;
<br/>
}
<br/>
return 0;
<br/>
}
<br/>
<br/>
///SaveScreen\\\
<br/>
void SaveScreen()
<br/>
{
<br/>
int x=0, y=0;
<br/>
const u16 tempscreen [];
<br/>
for (y=0; y&lt;161; y++)
<br/>
{
<br/>
for (x=0; x&lt;241; x++)
<br/>
tempscreen[x+y*240]=videoBuffer[x+y*240];
<br/>
}
<br/>
}
<br/>
<br/>
///RestoreScreen\\\
<br/>
void RestoreScreen(int x,int y,int x2,int y2,int xlocation,int ylocation)
<br/>
{
<br/>
int xcurrent=0, tempy=ylocation, tempx=xlocation;
<br/>
for (y=y; y&lt;y2; y++)
<br/>
{
<br/>
tempx=xlocation;
<br/>
for (xcurrent=x; xcurrent&lt;x2; xcurrent++)
<br/>
{
<br/>
videobuffer[tempx+tempy*240]=tempscreen[xcurrent+y*240];
<br/>
tempx++;
<br/>
}
<br/>
tempy++;
<br/>
}
<br/>
}<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3505 - siaspete - Wed Feb 26, 2003 8:29 am</h4>
    <div class="postbody"><span class="postbody">Please use the code tags! Also, is your post any more urgent than others?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3538 - Jer1400 - Wed Feb 26, 2003 10:54 pm</h4>
    <div class="postbody"><span class="postbody">It used to be, but not any more; I fixed it this morning. What I did was move the comments away from the functions 1 line and I made tempscreen a global variable.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3539 - Paul Shirley - Wed Feb 26, 2003 11:06 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:46 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3548 - Jer1400 - Thu Feb 27, 2003 3:45 am</h4>
    <div class="postbody"><span class="postbody">lol, my editor is notepad and my compiler is gcc.:)<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3551 - Jaywalk - Thu Feb 27, 2003 7:45 am</h4>
    <div class="postbody"><span class="postbody">Ah - the infamous Notepad. Do yourself a big favour and get - well - anything else. Here, try dowloading Textpad at <a class="postlink" href="http://textpad.com" target="_blank">http://textpad.com</a>. This is quite a good editor.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3556 - Paul Shirley - Thu Feb 27, 2003 2:38 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:47 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3566 - animension - Thu Feb 27, 2003 7:55 pm</h4>
    <div class="postbody"><span class="postbody">I recommend EditPlus for coding if you are running in Windows environment.<br/>_________________<br/>"Beer is proof that God loves us and wants us to be happy."
<br/>
-- Benjamin Franklin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3574 - Probably Bob - Fri Feb 28, 2003 5:56 am</h4>
    <div class="postbody"><span class="postbody">Your error is really simple, and I can't beleive no one else has noticed.
<br/>
<br/>
You are missing the terminating ';' on line 182.
<br/>
<br/>
That's it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3575 - Probably Bob - Fri Feb 28, 2003 5:59 am</h4>
    <div class="postbody"><span class="postbody">I'm sorry, I can't beleive I just said that.
<br/>
<br/>
How incredibly wrong could I be :)
<br/>
<br/>
I'm drunk, ok? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3577 - Jer1400 - Fri Feb 28, 2003 7:12 am</h4>
    <div class="postbody"><span class="postbody">Okay drunken probably bob.;)
<br/>
<br/>
But alas! Another problem has come my way! This time I have no clue what's going on, mainly because I'm such a newb at this stuff.:)
<br/>
<br/>
Anyway, it's with the savescreen / restore screen methods. I know there is something wrong within the savescreen that has something to do with temperarily transfering the "videoBuffer" data into the tempscreen array. Something doesn't transfer right, I think it may have something to do with the type of variable I make tempscreen. Anyway, keep in mind that there is no error, and that the problem is it just doesn't do what it's supposed to.
<br/>
<br/>
drawing.h:
<br/>
<br/>
//////////////////////////
<br/>
///Drawing.h///
<br/>
///////////////////////
<br/>
<br/>
#define RGB16(r,g,b)  ((r)+(g&lt;&lt;5)+(b&lt;&lt;10))
<br/>
u16* videoBuffer = (u16*)0x6000000;
<br/>
int tempscreen[];
<br/>
<br/>
///////The other drawing functions were here, btw
<br/>
<br/>
///SaveScreen\\\
<br/>
<br/>
<br/>
void SaveScreen()
<br/>
{
<br/>
int x=0, y=0;
<br/>
for (y=0; y&lt;161; y++)
<br/>
{
<br/>
for (x=0; x&lt;241; x++)
<br/>
tempscreen[x+y*240]=videoBuffer[x+y*240];
<br/>
}
<br/>
}
<br/>
<br/>
///RestoreScreen\\\
<br/>
<br/>
<br/>
<br/>
void RestoreScreen(int x,int y,int x2,int y2,int xlocation,int ylocation)
<br/>
{
<br/>
int xcurrent=0, tempy=ylocation, tempx=xlocation;
<br/>
for (y=y; y&lt;y2; y++)
<br/>
{
<br/>
tempx=xlocation;
<br/>
for (xcurrent=x; xcurrent&lt;x2; xcurrent++)
<br/>
{
<br/>
videoBuffer[tempx+tempy*240]=tempscreen[xcurrent+y*240];
<br/>
tempx++;
<br/>
}
<br/>
tempy++;
<br/>
}
<br/>
}
<br/>
<br/>
And this is the main program:
<br/>
<br/>
#include"gba.h"
<br/>
#include"screenmode.h"
<br/>
#include"keypad.h"
<br/>
#include"stdlib.h"
<br/>
#include"drawing.h"
<br/>
#include"screen_effects.h"
<br/>
#include"name.h"
<br/>
<br/>
/////////////////////////////////
<br/>
///Main Program///
<br/>
///////////////////////////////
<br/>
<br/>
int main(void)
<br/>
{
<br/>
int stall=0, pixels=0, x, y, x2, y2;
<br/>
SetMode(MODE_3 | BG2_ENABLE );
<br/>
fadeout(1); //uses hardware fading to fade the screen out.
<br/>
DrawName(); //draws an image
<br/>
SaveScreen(); //it never seems to get past here, and if I take it out
<br/>
//the restore screen works, but it just draws some weird random lines.
<br/>
<br/>
FillScreen(0,0,0); //it never gets to here. (this paints the screen black)
<br/>
while(stall&lt;1000000)
<br/>
{
<br/>
stall++;
<br/>
}
<br/>
stall=0;
<br/>
fadein(1); //fade the screen back in with hardware fading.
<br/>
while(pixels&lt;160000)
<br/>
{
<br/>
x=rand()%241;
<br/>
y=rand()%161;
<br/>
x2=x+1;
<br/>
y2=y+1;
<br/>
RestoreScreen(x,y,x2,y2,x,y);
<br/>
pixels++;
<br/>
}
<br/>
DrawName();
<br/>
while(1){}
<br/>
} //end main
<br/>
<br/>
<br/>
...and that's it.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3582 - Probably Bob - Fri Feb 28, 2003 2:12 pm</h4>
    <div class="postbody"><span class="postbody">Right sober now :)
<br/>
<br/>
You didn't say what the actual sypmtoms were, so I can't tell whether this is the entire problem, but :
<br/>
<br/>
[code]
<br/>
for (y=0; y&lt;161; y++) 
<br/>
{ 
<br/>
for (x=0; x&lt;241; x++) 
<br/>
[/code]
<br/>
<br/>
should be
<br/>
<br/>
[code]
<br/>
for (y=0; y&lt;160; y++) 
<br/>
{ 
<br/>
for (x=0; x&lt;240; x++) 
<br/>
[/code]
<br/>
<br/>
as x can only go up to 239 and y up to 159. Running that code with x=240, y=0 is exactly equivalent to having x=0, y=1 which is probably not what you are trying to acheive.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3588 - Paul Shirley - Fri Feb 28, 2003 6:38 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:47 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3593 - Jer1400 - Fri Feb 28, 2003 8:30 pm</h4>
    <div class="postbody"><span class="postbody">Of course it's a good idea to program games for the gba...that's what I want to do. That's what I am doing. I actually don't need this for the game I am working on now, but it just kind of stumped me and I was wondering.
<br/>
<br/>
Oh, and paul, I've tried making that array anywhere from 40000 to 10000000. The size isn't the problem. Somewhere the data is getting scrambled and instead of drawing the old screen, it draws some funky colored lines. I'll post a screenshot in about 8 hours to give you a better idea of what this looks like.<br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3599 - Paul Shirley - Fri Feb 28, 2003 9:27 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:48 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3616 - Jer1400 - Sat Mar 01, 2003 9:57 pm</h4>
    <div class="postbody"><span class="postbody">What answers? Some guy said program pc games and another told me something about the for loop, which is fine and has nothing to do with the tempscreen variable. Anyway, here is that screenshot:
<br/>
<br/>
<a href="http://www.flatface.net/~jer1400/gbapic.gif">[Images not permitted - Click here to view it]</a><br/>_________________<br/><a href="http://saoghal.cywh.com/Jer1400/index.html" target="_blank">http://saoghal.cywh.com/Jer1400/index.html</a>
<br/>
<br/>
*Note that the site is still in early development.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
