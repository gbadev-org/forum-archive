<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Populating structs - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Populating structs</h2>
<div id="posts">
<div class="post">
    <h4>#14227 - poslundc - Sat Jan 03, 2004 12:06 am</h4>
    <div class="postbody"><span class="postbody">Okay, say I have a struct, I can use typecasting to populate its contents when declaring a variable. eg:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">typedef struct Rect
<br/>
{
<br/>
   int x, y, w, h;
<br/>
}
<br/>
Rect;
<br/>
<br/>
Rect r = (Rect) {10, 15, 32, 32};</td> </tr></table><span class="postbody">
<br/>
<br/>
You can even do this with structs-within-structs, arrays of structs, etc.
<br/>
<br/>
Some of my structs are getting extremely bulky and complicated, however, and this method is becoming more unwieldy. In one case a struct with about 10 members includes another struct as a member, and <span style="font-style: italic">that</span> struct has another 15 members or so.
<br/>
<br/>
I don't want to have to populate both structs in a single line of code, but it doesn't seem like I can do only a partial declaration (ie. omit some of the members), unless I want to assign each member individually with its own assignment statement (which would just be a royal pain of the opposite kind).
<br/>
<br/>
Anyone know of an effective way of dealing with structs when they start to get like this? (Replacing the struct-within-struct with a pointer is not an option in this case.) Or is there some C syntax that can deal with this that I am unaware of?
<br/>
<br/>
Thanks,
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14229 - sajiimori - Sat Jan 03, 2004 12:24 am</h4>
    <div class="postbody"><span class="postbody">You can do partial initialization.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct Blah { int a, b, c; };
<br/>
struct Blah asdf = { a: 5, c: 10 };   // b will be 0
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14237 - poslundc - Sat Jan 03, 2004 2:31 am</h4>
    <div class="postbody"><span class="postbody">Holy canole. The things I wish I'd know ten years ago.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14270 - tepples - Sat Jan 03, 2004 4:35 pm</h4>
    <div class="postbody"><span class="postbody">Except ten years ago, partial initialization didn't exist. It's a new feature of ISO C99.
<br/>
<br/>
<a class="postlink" href="http://www.kuro5hin.org/story/2001/2/23/194544/139" target="_blank">Read more about C99</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14298 - Paul Shirley - Sat Jan 03, 2004 11:57 pm</h4>
    <div class="postbody"><span class="postbody">It has however existed as a gcc extension since long before C99.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
