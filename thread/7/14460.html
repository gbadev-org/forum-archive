<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Static member inheritance - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Static member inheritance</h2>
<div id="posts">
<div class="post">
    <h4>#144633 - Lick - Mon Nov 05, 2007 2:50 am</h4>
    <div class="postbody"><span class="postbody">Hey, I've got a derived class, that I want to put a static "member" in. However doing it the normal way results in every derived class from the same base class spawning the compiler error: Multiple definition of "SomeDerivedClass::my_static_var" ... first defined here ...
<br/>
<br/>
How do I solve this without using a static global?<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144642 - keldon - Mon Nov 05, 2007 8:03 am</h4>
    <div class="postbody"><span class="postbody">What exactly is this "normal way"?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144674 - Lick - Mon Nov 05, 2007 5:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class Base {};
<br/>
<br/>
class Derived1 : public Base { protected: static int member; };
<br/>
<br/>
class Derived2 : public Base {};</td> </tr></table><span class="postbody">
<br/>
<br/>
Gives the multiple definition error.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144692 - sajiimori - Mon Nov 05, 2007 8:54 pm</h4>
    <div class="postbody"><span class="postbody">There's nothing wrong with the part you posted.  Could you post a full example (including 'main'), along with the full text of the error message?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155677 - Scorp - Fri May 02, 2008 3:29 pm</h4>
    <div class="postbody"><span class="postbody">Are you talking about multiple inheritance / Diamond inheritance ? 
<br/>
<br/>
(This is a real pig if i remember)...
<br/>
<br/>
e.g.
<br/>
<br/>
class base
<br/>
{
<br/>
   int some_member;
<br/>
}
<br/>
<br/>
class Deriv1 : public virtual base
<br/>
{
<br/>
}
<br/>
<br/>
class Deriv2 : public virtual base
<br/>
{
<br/>
}
<br/>
<br/>
Class Final : public Deriv1, Deriv2
<br/>
{ 
<br/>
   Final() {
<br/>
      some_member = 123;   // ok
<br/>
   }
<br/>
}
<br/>
<br/>
<br/>
Note the "public virtual" declaration, this uses virtual inheritance, so when Deriv1 + Deriv2 are joined they share the same base class (and not attempt to instantiate a 2nd copy of base which would cause the error you've given).
<br/>
<br/>
Hope that helps (could have done with an example snippet of code, i could be talking about completely the wrong thing)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
