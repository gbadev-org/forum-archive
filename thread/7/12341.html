<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>printing a float var with iprintf() - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > printing a float var with iprintf()</h2>
<div id="posts">
<div class="post">
    <h4>#117325 - Yooser Naim - Sat Feb 03, 2007 9:18 pm</h4>
    <div class="postbody"><span class="postbody">I'm messing around with a helloworld example program from devkitPro, and I've run into a problem:
<br/>
<br/>
When I try to print a float variable to screen using iprintf(), like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">iprintf() ("blah blah %f", floatnumvar);</td> </tr></table><span class="postbody">
<br/>
<br/>
the emulator outputs: 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">blah blah f</td> </tr></table><span class="postbody">
<br/>
<br/>
Would anybody know why? Every C/C++ reference I've looked at refers to iprintf() as simply printf(), and says that I should be able to print a float by inserting %f in the string constant parameter. Where is there documentation on these sort of deviations from standard C/C++ libraries?
<br/>
How else could I display a float in a similar manner?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117326 - Sausage Boy - Sat Feb 03, 2007 9:30 pm</h4>
    <div class="postbody"><span class="postbody">Try with regular printf.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117329 - Yooser Naim - Sat Feb 03, 2007 10:42 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, I tried that too, but then printf() just displays "0.000000"
<br/>
instead of the value assigned to the float variable. So I still haven't found a similar way of displaying a float. Thanks for the response, though; every bit of help gets me a little closer to clearing things up.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117336 - Yooser Naim - Sat Feb 03, 2007 11:08 pm</h4>
    <div class="postbody"><span class="postbody">Well, it turns out, printf() doesn't just display zeros;
<br/>
I had actaully assigned the value of the expression 1/3 to the float variable(which was initialized to zero), but changing the expression to 1/3.0 causes it to be displayed. Why is this? Does it think of it as assigning an integer to a float, so it just doesn't assign anything at all?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117341 - gmiller - Sat Feb 03, 2007 11:38 pm</h4>
    <div class="postbody"><span class="postbody">if you use 1/3 then the expression is evaluated as integer and the interger part of 1/3 is zero.  If you use 1/3.0 then the expression is mixed type so it is evaluated as real so you get .3333333333333 and so on.  Standard rules for expressions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117343 - sgeos - Sun Feb 04, 2007 12:36 am</h4>
    <div class="postbody"><span class="postbody">Try something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">char buffer[BUFFER_SIZE];
<br/>
float myFloat = VALUE;
<br/>
<br/>
sprintf(buffer, "%f", myFloat);
<br/>
iprintf("myFloat == %s", buffer);</td> </tr></table><span class="postbody">
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117441 - Quirky - Sun Feb 04, 2007 9:58 pm</h4>
    <div class="postbody"><span class="postbody">Keep in mind that the DS (or GBA) does not have hardware floating points, so any floating point stuff has to be done in software. This means that printf and friends bring in all the floating point functions when linked to your binary. To keep the binary size down, newlib's iprintf can be used since it can perform integer operations only. Here is a iprintf man page: <a href="http://vmlinux.org/crash/mirror/www.objsw.com/docs/libc_65.html" target="_blank">http://vmlinux.org/crash/mirror/www.objsw.com/docs/libc_65.html</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
