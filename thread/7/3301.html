<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Having a pointer as a inparameter( GBA programming) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Having a pointer as a inparameter( GBA programming)</h2>
<div id="posts">
<div class="post">
    <h4>#19829 - CodeMasterMike - Mon Apr 26, 2004 1:30 pm</h4>
    <div class="postbody"><span class="postbody">hi! 
<br/>
<br/>
I'm sitting here and trying to have a struct pointer as a inparameter to a class function. here is the struct: 
<br/>
<br/>
typedef struct tagSprite 
<br/>
{ 
<br/>
unsigned short attribute0; 
<br/>
unsigned short attribute1; 
<br/>
unsigned short attribute2; 
<br/>
unsigned short attribute3; 
<br/>
}Sprite,*pSprite; 
<br/>
<br/>
<br/>
Then I declare the pointer in the main file: 
<br/>
<br/>
pSprite pSprites[255]; 
<br/>
<br/>
and then I'm going to send it into the function something like this: 
<br/>
<br/>
object-&gt;function(&amp;pSprite) 
<br/>
<br/>
the problem is when I try to start the program, I'll get an error that I can not understand 
<br/>
I get the error in the header for the class which is suppoes to take the pointer as a inparameter: 
<br/>
<br/>
function(pSprite pSprites) 
<br/>
<br/>
The error is: 
<br/>
<br/>
error: type specifier omitted for parameter `pSprite' 
<br/>
<br/>
<br/>
Can someone help me with this problem?? 
<br/>
Everything is made in C++ code</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19830 - sgeos - Mon Apr 26, 2004 2:05 pm</h4>
    <div class="postbody"><span class="postbody">This is an array:
<br/>
pSprite pSprites[255]; 
<br/>
<br/>
I think you want either:
<br/>
object-&gt;function(pSprites)
<br/>
<br/>
OR
<br/>
object-&gt;function(&amp;pSprites[0])
<br/>
<br/>
At least that is how I would do things in C.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19831 - CodeMasterMike - Mon Apr 26, 2004 2:09 pm</h4>
    <div class="postbody"><span class="postbody">yeah, I have done like this:
<br/>
<br/>
object-&gt;function(&amp;pSprites[255]) 
<br/>
<br/>
But it is in the header of the class that the function is in, where the problem lies(I think, but the errorcode shows me that, when it gives me the error code)
<br/>
<br/>
<br/>
Is the name type of the pointer  ( pSprite ) that gives the error.
<br/>
It looks like it doesn't see the  ' pSprite ' as the type for the pointer.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19833 - NoMis - Mon Apr 26, 2004 2:20 pm</h4>
    <div class="postbody"><span class="postbody">You have to make sure that the function recognises pSprite as a type. It has to be declared befor you declare the function either in an included headerfile or in the file itself.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
typedef struct tagSprite 
<br/>
{ 
<br/>
  unsigned short attribute0; 
<br/>
  unsigned short attribute1; 
<br/>
  unsigned short attribute2; 
<br/>
  unsigned short attribute3; 
<br/>
}Sprite,*pSprite; 
<br/>
<br/>
....
<br/>
<br/>
class CExample
<br/>
{
<br/>
     void foo(pSprite pSprites);
<br/>
     ...
<br/>
};
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
NoMis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19835 - CodeMasterMike - Mon Apr 26, 2004 2:31 pm</h4>
    <div class="postbody"><span class="postbody">I have first the struct in a header file.
<br/>
<br/>
then I include it first in the main cpp file, and then in the other class cpp file, so it should not be any problem.
<br/>
<br/>
<br/>
If I run the code that's in the function directly in the main file, it works fine. But I must have it in another function class.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19844 - sajiimori - Mon Apr 26, 2004 6:15 pm</h4>
    <div class="postbody"><span class="postbody">Since it hasn't been solved after a couple replies, I think that warrants posting a full program.  Remove all the unrelated code and post a minimal program that has the problem.
<br/>
<br/>
As for my 2 cents, I wouldn't make seperate typedefs for pointers at all.  My first C book did that, and I thought there must have been a good reason for it.  As it turns out, there wasn't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19850 - poslundc - Mon Apr 26, 2004 7:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>CodeMasterMike wrote:</b></span></td> </tr> <tr> <td class="quote">yeah, I have done like this:
<br/>
<br/>
object-&gt;function(&amp;pSprites[255])</td> </tr></table><span class="postbody">
<br/>
<br/>
You would want it to be &amp;pSprites[0], or just pSprites. &amp;pSprites[255] gives you a pointer to the end of the array, not the beginning.
<br/>
<br/>
HTH,
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19852 - CodeMasterMike - Mon Apr 26, 2004 9:56 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your efforts guys! 
<br/>
<br/>
But I tried another way, mayby not the best sollution to it. But anyway.
<br/>
<br/>
What I did was that I moved the declaration into the class that would have it as a inparameter and made it global.
<br/>
<br/>
And so far, it works.
<br/>
<br/>
It is a strange problem, for I doesn't understand what the type is, even though it is declared and the header was included..
<br/>
I tested it in Visual studio 2003, and it worked without problems there...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
