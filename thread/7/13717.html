<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Re: private/protected members - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Re: private/protected members</h2>
<div id="posts">
<div class="post">
    <h4>#134984 - keldon - Thu Jul 19, 2007 12:40 am</h4>
    <div class="postbody"><span class="postbody">I am completing an email-test (which they say I "can use any available help and resource").
<br/>
<br/>
One question is to do with the differences between private and protected class members, along with an example of their use. For protected methods I have written the following:
<br/>
<br/>
"<span style="font-style: italic">Protected class members open the implementation of the class (in regards to the protected variables) to friends, inherited classes and inherited classes friends. I would use a protected variable or a private variable with a protected getter/setter to allow more direct access to the classes implementation without exposing the variables as public.</span>"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134989 - tepples - Thu Jul 19, 2007 1:16 am</h4>
    <div class="postbody"><span class="postbody">While learning Python for work, I came out <a class="postlink" href="http://www.python.org/dev/peps/pep-0008/" target="_blank">PEP 8</a>, which called C++ protected methods a "subclass API". So here's my best explanation of 'protected' in Java and C++ (again, <a class="postlink" href="http://www.catb.org/jargon/html/L/language-lawyer.html" target="_blank">IANAL</a>):
<br/>
<br/>
A class's protected members make up the API that its subclasses use.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134995 - sgeos - Thu Jul 19, 2007 4:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">(which they say I "can use any available help and resource")</td> </tr></table><span class="postbody">
<br/>
What a silly thing to say...  these instructions boggle me.  In short:
<br/>
Private: For this class only.  (And friends.)
<br/>
Protected:  Like private, but accessible to derived classes.
<br/>
<br/>
<a class="postlink" href="http://www.linuxquestions.org/questions/showthread.php?t=215399" target="_blank">http://www.linuxquestions.org/questions/showthread.php?t=215399</a>
<br/>
<a class="postlink" href="http://msdn2.microsoft.com/en-us/library/ms858728.aspx" target="_blank">http://msdn2.microsoft.com/en-us/library/ms858728.aspx</a>
<br/>
Google is your friend.
<br/>
<br/>
Don't forget private inheritance (with regard to protected class members):
<br/>
<a class="postlink" href="http://www.parashift.com/c++-faq-lite/private-inheritance.html" target="_blank">http://www.parashift.com/c++-faq-lite/private-inheritance.html</a>
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135004 - keldon - Thu Jul 19, 2007 9:41 am</h4>
    <div class="postbody"><span class="postbody">lol, I know the difference between the two. What I'm talking about is the real world reasoning for using a protected class member. I don't want to give an example of use implied by the definition like, "<span style="font-style: italic">use protected class members when you want derived classes, friends, and derived classes friends to have access to a particular variable</span>" ^_^
<br/>
<br/>
My complete answer actually defines it with, "<span style="font-style: italic">Protected class members can be viewed by the class, its friends, derived classes and derived classes friends whilst private class members can only be viewed by the class and its friends</span>"
<br/>
<br/>
What I am putting together is the real world reasoning for it, or maybe I am over thinking it.
<br/>
<br/>
How about, "<span style="font-style: italic">A good example of using protected class members is with a big number API. The BigNumber class is immutable, however the Maths class is declared as a friend so that it can access its protected variables and perform efficient calculations on the BigNumber type</span>"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135022 - keldon - Thu Jul 19, 2007 1:13 pm</h4>
    <div class="postbody"><span class="postbody">Well I sent it off with the above answer for an example of use. Let's see if I get on to the next stage of the process.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135052 - sajiimori - Thu Jul 19, 2007 8:07 pm</h4>
    <div class="postbody"><span class="postbody">Well, for one, "protected" should be considered "almost public", rather than "almost private".  If your class is intended to provide certain invariants, those invariants are broken if protected members expose the ability to break them.
<br/>
<br/>
For instance, if a Character class is supposed to keep the character's shadow synchronized with its body, the class shouldn't provide either public or protected methods that allow the shadow to be moved independently (e.g. a method returning a non-const pointer to the shadow).
<br/>
<br/>
Basically, class members consist of private and non-private members.  The distinction between protected and public is often more like a comment than an actual restriction: "protected" usually says "general clients probably don't care about this," rather than "general clients musn't have access to this."
<br/>
<br/>
Exceptions:
<br/>
<br/>
A protected destructor is very important for base classes that don't have virtuals, to prevent deleting an object via a pointer to the base.
<br/>
<br/>
Also, "protected" is more meaningful when the concrete type of the object in question is known at compile time.  For instance, even if the Character class provides a protected method to move the shadow independently, individual classes in the hierarchy can claim shadow synchronization as an invariant for themselves but not their derived classes.  To illustrate:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void example()
<br/>
{
<br/>
   // At least *this* guy has a synchronized shadow.
<br/>
   Character byValue;
<br/>
<br/>
   // It's still synchronized even after this, guaranteed.
<br/>
   doAnythingYouWant(&amp;byValue);
<br/>
<br/>
   // The same can't be said here.  Who knows what the
<br/>
   // derived class did with it?
<br/>
   const Character&amp; byReference = getCharacterReference();
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135072 - sgeos - Fri Jul 20, 2007 12:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">What I am putting together is the real world reasoning for it, or maybe I am over thinking it.</td> </tr></table><span class="postbody">
<br/>
My honest thoughts on protected members are "sometimes that is what you want".
<br/>
<br/>
It looks like I agree with sajiimori- use protected members when you need to do something and public members would be silly.  (This happens, although one could argue that the classes need to be rethought.)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135093 - sajiimori - Fri Jul 20, 2007 4:31 am</h4>
    <div class="postbody"><span class="postbody">Glancing through the entire codebase for my last game, there were very few legitimate uses of 'protected'.
<br/>
<br/>
I used to think virtuals needed to be non-private for derived classes to override them, but now that I know you can override private virtuals, I'd estimate that 95% of the protected members in our codebase can be made private without any significant tradeoffs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135118 - keldon - Fri Jul 20, 2007 8:52 am</h4>
    <div class="postbody"><span class="postbody">Hmmm, well a virtual private method's behaviour is what is expected when it is protected with an exception: the friend of the derived class can no longer access the method.
<br/>
<br/>
Are there any documents on this that I could add to the <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=13662" target="_blank">MUL</a>? If anything I could link to this thread!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135207 - sajiimori - Fri Jul 20, 2007 10:43 pm</h4>
    <div class="postbody"><span class="postbody">I don't know of any good material, but I'm sure it's out there.  My opinions on it are just from experience.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
