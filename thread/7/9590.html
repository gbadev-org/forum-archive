<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Collision detection based on pixel color? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Collision detection based on pixel color?</h2>
<div id="posts">
<div class="post">
    <h4>#83468 - Lini - Tue May 16, 2006 3:33 pm</h4>
    <div class="postbody"><span class="postbody">How would I do collision detection based on pixel color?  I want the shots to collide with a ship only if there are non-black pixels touching.
<br/>
<br/>
Would I do loops to check the pixel color?  Is it even possible?
<br/>
<br/>
I'm using HAMLib/VisualHAM, so if anyone can help, I'd appreciate it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83479 - naleksiev - Tue May 16, 2006 4:29 pm</h4>
    <div class="postbody"><span class="postbody">You know the ships position and the bullet position. 
<br/>
So here are X and Y of the pixel that you need to check
<br/>
<br/>
x = bullet.X - ship.X;
<br/>
y = bullet.Y - ship.Y;
<br/>
<br/>
if x &lt; 0 || y &lt;0 || x &gt; ship.width || y &gt; ship.height // outside of the sprite
<br/>
   not collide
<br/>
else 
<br/>
   check what is the color in the ship sprite on pisition x, y. If you have animation check this for the current frame only
<br/>
<br/>
and you know if there're more bullets and ships just make this in loops</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83561 - tepples - Tue May 16, 2006 11:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lini wrote:</b></span></td> </tr> <tr> <td class="quote">How would I do collision detection based on pixel color?  I want the shots to collide with a ship only if there are non-black pixels touching.
<br/>
<br/>
Would I do loops to check the pixel color?  Is it even possible?</td> </tr></table><span class="postbody">
<br/>
Yes, it'd be possible to check the pixel colors, but it'd be dog-slow. Is there a reason why you can't use geometric methods? What shape is your ship?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83574 - shen3 - Wed May 17, 2006 1:31 am</h4>
    <div class="postbody"><span class="postbody">You might search on google for pixel perfect collision detection.
<br/>
<br/>
1 fast method is using 1-bit bitmaps for each sprite, which can then be quickly checked for overlaps using bitshifts and boolean logic. This method allows for doughnuts, or gaps in the middle of sprites. These bitmaps will need to be generated by some tool.
<br/>
<br/>
another method is having a tool generate a list of start x co-ordinates + length for each row of each sprite, then using these to check the collisions. This doesn't allow for holes in the row, so it is less pixel perfect then the first method.
<br/>
<br/>
A really really slow method would be to check the actual sprite data for each pixel you are worried about. This can work if you are only checking a small number of pixels per frame, or speed isn't an issue for some other reason.
<br/>
<br/>
Shen</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83653 - poslundc - Wed May 17, 2006 6:17 pm</h4>
    <div class="postbody"><span class="postbody">I'll just chime in agreeing with tepples that geometric collision is usually more than sufficient for the vast majority of games.
<br/>
<br/>
Pixel-level collision is slow and can even provide a worse gameplay experience in many situations.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88982 - Dracker - Thu Jun 22, 2006 5:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">I'll just chime in agreeing with tepples that geometric collision is usually more than sufficient for the vast majority of games.
<br/>
<br/>
Pixel-level collision is slow and can even provide a worse gameplay experience in many situations.
<br/>
<br/>
Dan.</td> </tr></table><span class="postbody">A LOT of highly acclaimed commercial games use geometric collision.  For instance, Metroid Fusion. (easy to tell in the Nightmare battle, where you can pass right through one of his "ears" without damage.)
<br/>
<br/>
Try making your non-black part of the ship a separate geometric area, and do collision detection on that.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
