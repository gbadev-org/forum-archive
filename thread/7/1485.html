<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>probably very stupid question.. stuck - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > probably very stupid question.. stuck</h2>
<div id="posts">
<div class="post">
    <h4>#7451 - Lotus-6 - Wed Jun 18, 2003 5:25 am</h4>
    <div class="postbody"><span class="postbody">using a doc to get started on GBA programming... I have all of their devkit stuff all set up and I changed vis C++ and stuff.. built this test program but I get an error when I try to build it that says
<br/>
<br/>
NMAKE : fatal error U1073: don't know how to make 'boot.o'
<br/>
Stop.
<br/>
Error executing nmake.
<br/>
<br/>
CPPTest.bin - 1 error(s), 0 warning(s)
<br/>
<br/>
<br/>
;_;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7454 - tepples - Wed Jun 18, 2003 5:33 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lotus-6 wrote:</b></span></td> </tr> <tr> <td class="quote">using a doc to get started on GBA programming... I have all of their devkit stuff all set up and I changed vis C++ and stuff.. built this test program but I get an error when I try to build it that says
<br/>
<br/>
NMAKE : fatal error U1073: don't know how to make 'boot.o'
<br/>
Stop.
<br/>
Error executing nmake.</td> </tr></table><span class="postbody">
<br/>
Can you show your makefile? Is there a 'boot.c' that's not being built for some reason, or did you forget to download 'boot.o'? Which tutorial are you using?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7455 - Lotus-6 - Wed Jun 18, 2003 5:40 am</h4>
    <div class="postbody"><span class="postbody">it's "newbie's guide to GBA development"
<br/>
<br/>
here's the list of files that are in the project:
<br/>
main.cpp
<br/>
boot.s
<br/>
CPPTest.mak
<br/>
Linkscript
<br/>
<br/>
here's the source for the makefile:
<br/>
# ------------------------------------------
<br/>
# Title:		CPPTest
<br/>
# File:			CPPTest.mak
<br/>
# Author:		Christer Andersson
<br/>
# Orignally by: Jaap Suter
<br/>
# 
<br/>
# Info:		This file is contains the make-instructions
<br/>
#			for the project.
<br/>
# 
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define some directories;
<br/>
# -------------------------------------------
<br/>
SRCDIR  = C:\GBADEV\CPPTest
<br/>
CMPDIR  = C:\GBA\bin
<br/>
LIBDIR  = C:\GBA\lib\gcc-lib\arm-agb-elf\3.0.2\interwork
<br/>
LIBDIR2 = C:\GBA\arm-agb-elf\lib\interwork
<br/>
INCDIR  = C:\GBA\lib\gcc-lib\arm-agb-elf\3.0.2\include
<br/>
INCDIR2 = C:\GBA\arm-agb-elf\include
<br/>
<br/>
# -------------------------------------------
<br/>
# Define what extensions we use;
<br/>
# -------------------------------------------
<br/>
.SUFFIXES : .cpp .s
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the flags for the compilers;
<br/>
# -------------------------------------------
<br/>
CFLAGS  = -I $(INCDIR2) -I $(INCDIR) -I $(SRCDIR) -mthumb-interwork -c -g -O2 -Wall -fverbose-asm
<br/>
SFLAGS  = -I $(INCDIR2) -I $(INCDIR) -mthumb-interwork 
<br/>
LDFLAGS = -L $(LIBDIR) -L $(LIBDIR2) -T LinkScript 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the list of all O files;
<br/>
# -------------------------------------------
<br/>
O_FILES			 = boot.o		\
<br/>
				   crtbegin.o	\
<br/>
				   crtend.o		\
<br/>
				   main.o					
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the final dependecy;
<br/>
# -------------------------------------------
<br/>
all : CPPTest.bin
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the copy from .elf to .bin file
<br/>
# -------------------------------------------
<br/>
CPPTest.bin : CPPTest.elf
<br/>
	objcopy -v -O binary CPPTest.elf CPPTest.bin
<br/>
	-@echo ------------------------------------------ 
<br/>
	-@echo Done 
<br/>
	-@echo ------------------------------------------ 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the linker instruction;
<br/>
# -------------------------------------------
<br/>
CPPTest.elf : $(O_FILES)
<br/>
	ld $(LDFLAGS) -o CPPTest.elf $(O_FILES) -lstdc++ -lgcc -lc  
<br/>
	-@echo ------------------------------------------ 
<br/>
	-@echo Linking Done
<br/>
	-@echo ------------------------------------------ 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define each compile;
<br/>
# -------------------------------------------
<br/>
{$(SRCDIR)}.cpp.o::
<br/>
	gcc  $(CFLAGS) $&lt; 
<br/>
	-@echo ------------------------------------------ 
<br/>
	-@echo CPP-Sources Compiled 
<br/>
	-@echo ------------------------------------------ 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define each assemble;
<br/>
# -------------------------------------------
<br/>
{$(SRCDIR)}.s.o:
<br/>
	as $(SFLAGS) $(SRCDIR)\$*.s -o$@
<br/>
	-@echo ------------------------------------------ 
<br/>
	-@echo ASM-Sources Compiled 
<br/>
	-@echo ------------------------------------------ 
<br/>
<br/>
<br/>
# -------------------------------------------
<br/>
# EOF;
<br/>
<br/>
//this is the end of the makefile
<br/>
<br/>
Honestly I've never even used a makefile before, although the concept doesn't seem hard to grasp.  The only programming experience I have is a first year computer science course I took this year on C++.. fun stuff, but all I've done is build console apps.  So... yeah, enough babbling.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7456 - tepples - Wed Jun 18, 2003 5:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lotus-6 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
# -------------------------------------------
<br/>
# Define the list of all O files;
<br/>
# -------------------------------------------
<br/>
O_FILES			 = boot.o		\
<br/>
				   crtbegin.o	\
<br/>
				   crtend.o		\
<br/>
				   main.o					
<br/>
</td> </tr></table><span class="postbody">
<br/>
First of all, you'll have to download boot.o and put it where the linker can find it (probably in the same folder as the project file).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7467 - gb_feedback - Wed Jun 18, 2003 12:14 pm</h4>
    <div class="postbody"><span class="postbody">Oh god I hate these makefile problems. To be honest once I get one working I try not to touch it or think about it again. Feeble I know.
<br/>
<br/>
Tepples: you're probably better able than I am to sort this, but I can say this:
<br/>
<br/>
boot.s is just crt0.s with a different name. According to Lotus-6 he has this file in his project already. Presumably boot.o is supposed to be made from boot.s by the 'Define each assemble' section.
<br/>
<br/>
the line 'SRCDIR = C:\GBADEV\CPPTest ' defines where the sources are supposed to be. Are they in fact there?
<br/>
<br/>
Even more basically I wonder if gcc can be found at all. You know, something to do with paths and things...
<br/>
<br/>
(If necessary read 'she' for 'he')<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7468 - Quirky - Wed Jun 18, 2003 12:50 pm</h4>
    <div class="postbody"><span class="postbody">the rule:
<br/>
<br/>
# ------------------------------------------- 
<br/>
# Define each assemble; 
<br/>
# ------------------------------------------- 
<br/>
{$(SRCDIR)}.s.o: 
<br/>
as $(SFLAGS) $(SRCDIR)\$*.s -o$@ 
<br/>
-@echo ------------------------------------------ 
<br/>
-@echo ASM-Sources Compiled 
<br/>
-@echo ------------------------------------------ 
<br/>
<br/>
should create your boot.o file. Is SRCDIR properly defined within the project? I imagine it's a path setting problem, as that always shafted me with VC++. Though the error makes it sound like it doesn't recognise this rule - but that be because it can't find boot.s to create boot.o</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7469 - gb_feedback - Wed Jun 18, 2003 12:56 pm</h4>
    <div class="postbody"><span class="postbody">Yeah I was going to say... The path is the bit you set up in Tools..Options..Directories. Could be worth double checking.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7490 - tepples - Wed Jun 18, 2003 6:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quirky wrote:</b></span></td> </tr> <tr> <td class="quote">the rule:
<br/>
<br/>
# ------------------------------------------- 
<br/>
# Define each assemble; 
<br/>
# ------------------------------------------- 
<br/>
{$(SRCDIR)}.s.o: 
<br/>
[snip]
<br/>
<br/>
should create your boot.o file.</td> </tr></table><span class="postbody">
<br/>
That rule would create boot.s.o not boot.o, right?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7495 - Lotus-6 - Wed Jun 18, 2003 6:24 pm</h4>
    <div class="postbody"><span class="postbody">blaaaaah.  I believe the boot.o err <span style="text-decoration: underline">might</span> have been related to bad directories, I changed some stuff and started over... now I seem to be getting this error:
<br/>
<br/>
 gcc  -I C:\GBA\arm-agb-elf\include -I C:\GBA\lib\gcc-lib\arm-agb-elf\3.0.2\include -I C:\GBADEV -mthumb-interwork -c -g -O2 -Wall -fverbose-asm C:\GBADEV\main.cpp 
<br/>
The system cannot execute the specified program.
<br/>
NMAKE : fatal error U1077: 'gcc' : return code '0x1'
<br/>
Stop.
<br/>
Error executing nmake.
<br/>
<br/>
I'm using devkitadvance, which is installed in C:\GBA
<br/>
<br/>
all of my files that i'm using to do this are uploaded onto <a href="http://www.sonicstrike.net/~tom/gba/CPPTest.dsp" target="_blank">http://www.sonicstrike.net/~tom/gba/CPPTest.dsp</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/boot.s" target="_blank">http://www.sonicstrike.net/~tom/gba/boot.s</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/CPPTest.dsw" target="_blank">http://www.sonicstrike.net/~tom/gba/CPPTest.dsw</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/CPPTest.mak" target="_blank">http://www.sonicstrike.net/~tom/gba/CPPTest.mak</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/CPPTest.opt" target="_blank">http://www.sonicstrike.net/~tom/gba/CPPTest.opt</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/CPPTest.plg" target="_blank">http://www.sonicstrike.net/~tom/gba/CPPTest.plg</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/crtbegin.o" target="_blank">http://www.sonicstrike.net/~tom/gba/crtbegin.o</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/crtend.o" target="_blank">http://www.sonicstrike.net/~tom/gba/crtend.o</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/Linkscript" target="_blank">http://www.sonicstrike.net/~tom/gba/Linkscript</a>
<br/>
<a href="http://www.sonicstrike.net/~tom/gba/main.cpp" target="_blank">http://www.sonicstrike.net/~tom/gba/main.cpp</a>
<br/>
<br/>
they're in the directory C:\GBADEV on my computer.
<br/>
when I created the workspace in C:\GBADEV, the FAQ said that Visual C++ would automatically create a C:\GBADEV\CPPTest directory and put the stuff in there, but it didn't, so I just modified it accordingly, but that shouldn't have been much of a big deal....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7524 - Quirky - Thu Jun 19, 2003 8:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">That rule would create boot.s.o not boot.o, right?</td> </tr></table><span class="postbody">
<br/>
<br/>
Hang on... good point. We're not talking about GNU make here, are we?
<br/>
<br/>
That rule is what's known as a "suffix rule", or specifically a double-suffix rule in this case[1], GNU make supports these but if NMAKE doesn't then it could be causing problems?
<br/>
<br/>
<br/>
[1] if you define a rule that is 2 recognised suffixes concatonated, make will not make a boot.s.o file, but will know you mean the source suffix is .s and target suffix is .o - I don't know if this works in NMAKE though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7525 - gb_feedback - Thu Jun 19, 2003 9:25 am</h4>
    <div class="postbody"><span class="postbody">The more I hear the more I realise I don't understand.
<br/>
<br/>
The thing is that I have a project which is set up almost identically to this (I must have used the same document to start the project off - it even has the same project name - to show how lazy I am). And in spite of the .s.o business and using NMAKE it still seems to assemble boot.s into boot.o successfully. (The stuff is all at home so I can't quote from it right now and of course I may be remembering incorrectly). 
<br/>
<br/>
I still wonder however whether the path to the gcc stuff has been defined correctly. (This was done in Tools..Options..Directories in Visual Studio 97.) I seem to remember this path ends with ...\bin
<br/>
<br/>
EDIT: btw a quick look in the nmake help file suggests this works the same way. If I'm reading it correctly they call it an inference rule:
<br/>
<br/>
.fromext.toext
<br/>
  commands<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7527 - Quirky - Thu Jun 19, 2003 10:36 am</h4>
    <div class="postbody"><span class="postbody">OK, then the suffix notation is supported in nmake (MS probably just copied the source to GNU make anyway ;) ) so that isn't the problem. I was just guessing with that anyway. Still, nice to learn why that rule works, I did wonder about it previously ;)
<br/>
<br/>
Which means the error is likely to be the path settings, as it's nearly always the path settings that screw things up ime.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7530 - col - Thu Jun 19, 2003 11:44 am</h4>
    <div class="postbody"><span class="postbody">depending which version of devkit you are using, you could try creating a folder calld 'bin' in the root of the drive - so 
<br/>
c:\bin    
<br/>
put all the cgg binaries/tools into this folder
<br/>
<br/>
cygwin can cause some odd path problems - this step fixed them all for me
<br/>
<br/>
and make sure you only have a single instance of cygwin1.dll in your system - if you find extra ones rename them
<br/>
<br/>
and you could try using make instead of nmake !
<br/>
<br/>
cheers
<br/>
<br/>
col</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7536 - Lotus-6 - Thu Jun 19, 2003 4:07 pm</h4>
    <div class="postbody"><span class="postbody">Well, problem solved.  I think it did have something to do with the paths... whatever it is, it works now... whee.  Now I can display an image, yay XD</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
