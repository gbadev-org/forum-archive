<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Source Compiling Manager - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > Source Compiling Manager</h2>
<div id="posts">
<div class="post">
    <h4>#1979 - pollier - Mon Jan 27, 2003 12:43 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I use GCC for my C code compilation and everything is done from a complicated batch file I wrote which compiles every C and assembly file in a folder and links them in another folder, etc. It works nicely.
<br/>
<br/>
So, all of my .o files are saved for next time. However, my batch program always compiles <span style="font-style: italic">every</span> source file every time. Compile times are slowing. Other than using a fully-featured IDE, are there any (preferably command-line driven) source compiling manager apps out there, so that only files that have changed since last time are recompiled?<br/>_________________<br/>(Works for me!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1980 - Sweex - Mon Jan 27, 2003 12:54 am</h4>
    <div class="postbody"><span class="postbody">So called "make" files. I use an nmake, which comes with Visual C++. DevKitAdvance (which you are probably using) comes with it's own make.exe . There must be information for writing make scripts with that program.
<br/>
<br/>
It might be hard at first, but it's definately the way to build your project and keep build-times low.
<br/>
<br/>
I'm sure a LOT of people here are using makefiles...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2000 - t0ne - Mon Jan 27, 2003 3:44 pm</h4>
    <div class="postbody"><span class="postbody">Yup, makefiles are the way to go.
<br/>
Using a makefile you can manage your dependencies and it will only build what is necessary (read: modified).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2045 - pollier - Tue Jan 28, 2003 5:47 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the advice, when I was doing win32 that was all taken care of for me. Now, I'm getting an error from my ld prog:
<br/>
<br/>
cannot open -lc: No such file or directory.
<br/>
<br/>
...any advice?<br/>_________________<br/>(Works for me!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2076 - t0ne - Tue Jan 28, 2003 10:08 pm</h4>
    <div class="postbody"><span class="postbody">It can't find a library named libc.a.
<br/>
You can use the -L option with ld to specify the paths it should search to find the libraries to link with. Alternatively use gcc instead and it should work out its paths based on your options like -mthumb-interwork.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2080 - pollier - Wed Jan 29, 2003 1:30 am</h4>
    <div class="postbody"><span class="postbody">Yeah, libc.a was in my bin folder.
<br/>
<br/>
Now another problem:
<br/>
<br/>
I get a huge number of undefined references in function
<br/>
`If_Undefined_Reference__rename_main_or_AgbMain_to_each_other_in_your_C_file'
<br/>
although the renaming isn't the problem.
<br/>
Things like `__sp_irq' and `__sp_usr' are undefined references. 
<br/>
<br/>
my linker line generated by gcc is as follows:
<br/>
<br/>
ld -X -o game.elf c:\Tools\GBA\GCC\bin/../lib/gcc-lib/thumb-elf/2.9-arm-000512/../../../crtbegin.o crt0.o -LC:/Tools/GBA/GCC/lib -Lc:\Tools\GBA\GCC\bin/../lib/gcc-lib/thumb-elf/2.9-arm-000512/../../.. output/main.o output/interrupt.o output/nmod.o output/crt0.o output/font.o output/sprite.o output/misc.o -nostartfiles -lgcc -lc -lgcc c:\Tools\GBA\GCC\bin/../lib/gcc-lib/thumb-elf/2.9-arm-000512/../../../crtend.o
<br/>
<br/>
As you can see, I'm using crtbegin.o and crtend.o even though I'm trying to stop this, but my -nostartfiles is going in the wrong place; that's not the problem, however--unless crtbegin.o and crtend.o somehow are causing undefined references? I'd like to cut out the crtbegin and crtend anyways; what arguments am I going to have to pass to what to get them off the list? And I wonder if that second '-lgcc' will do any damage...
<br/>
<br/>
Thanks for your help; this is getting overly complicated, isn't it?<br/>_________________<br/>(Works for me!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2099 - t0ne - Wed Jan 29, 2003 11:01 am</h4>
    <div class="postbody"><span class="postbody">How are you calling gcc (what switches are you using).
<br/>
Who's crt0.o and linkerscript are you using ... ummmm ... are you using devkitadvance or something else ?
<br/>
<br/>
In it's simplest form you can link with gcc with something like this (using devkitadv)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">gcc -mthumb-interwork -o myproject.elf mycode.o mycode2.o</td> </tr></table><span class="postbody">
<br/>
or slightly more real-world makefile something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">$(CC) -mthumb-interwork -o $(PROJECT).elf $(OBJS)
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2118 - pollier - Wed Jan 29, 2003 8:46 pm</h4>
    <div class="postbody"><span class="postbody">[oops] My linkerscript include argument was missing. Stupid me. I think I've got it figured out now; thanks, everyone!<br/>_________________<br/>(Works for me!)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
