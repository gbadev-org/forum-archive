<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>newbieQ: how to slow down sprite animation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > newbieQ: how to slow down sprite animation</h2>
<div id="posts">
<div class="post">
    <h4>#3331 - misehert - Sat Feb 22, 2003 10:29 pm</h4>
    <div class="postbody"><span class="postbody">Sorry for this newbie post - maybe there should be a forum for stupid questions.  o.k. I've gone through PERN and GBAJunkie tutorials, and have progressed to putting my own animated 32x32 sprite onto my own scrolling 512x512 background using C++ and gbadevkitadv.  
<br/>
<br/>
I'm trying to do a pokemon movement like demo with the animated sprite glued in the middle, but when I do the animation, the sprite goes into hyper mode - even using the timer delays.  
<br/>
1) Does anyone know a tutorial or available source for slowing this guy down?
<br/>
2) Then my next question is how to synchronise the sprite steps with the background scroll speed, so it does not look like it's on ice.<br/>_________________<br/>Sorry, I'm just a Stoopid Noobie...
<br/>
<br/>
thank god for video x 4 - i can see again</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3332 - darkcloud - Sat Feb 22, 2003 11:46 pm</h4>
    <div class="postbody"><span class="postbody">Just lengthen the amount of time between frame changes.  If your using the hardware timers, you can set them up like this (from PERN):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
REG_TMxCNT = TIME_FREQUENCY_1024 | TIME_ENABLE;
<br/>
REG_TMxD = 0;
<br/>
<br/>
//then to change frames
<br/>
<br/>
if (REG_TMxD &gt;= 16386/10)
<br/>
{
<br/>
//do frame switch code
<br/>
REG_TMxD = 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
16386 would be the value for one second so just divide that to get the speed between frames.  After you switch frames reset the timer to 0 again so you can do it again.  
<br/>
<br/>
I'm not really sure about the second question though, I would just do some trial and error until I get something I like.<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3338 - imikeyi - Sun Feb 23, 2003 2:01 am</h4>
    <div class="postbody"><span class="postbody">If you base your code around the vblank, it should be simple.
<br/>
<br/>
IE Model your main game loop like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   while(1)
<br/>
   {
<br/>
      getControls();
<br/>
      updateSprites();
<br/>
      doMiscStuff();
<br/>
      for(i = 0; i &lt; X; i++)
<br/>
          waitForVblank();
<br/>
   }
<br/>
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then X = the speed of your game, where 1 is very fast and 60 is slow.
<br/>
You could change the animation frame in updateSprites().<br/>_________________<br/>microkernel advance</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3348 - satanicfreak2 - Sun Feb 23, 2003 6:30 am</h4>
    <div class="postbody"><span class="postbody">dont slow it down... instead draw the same one say 10-20 times.  then draw the next one 10-20 times.
<br/>
<br/>
you can have a counter and when it reaches 20 switch to the next frame. and start the counter again. do this over and over again.
<br/>
<br/>
hope it helps</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3372 - CoolMan - Sun Feb 23, 2003 6:57 pm</h4>
    <div class="postbody"><span class="postbody">There are several different ways to do it. For instance, in my game, I sync with VBLANK, and only switch the sprite frame every X number of frames. It all depends on coding style. Details, (actual numbers), depend on some information that you haven't provided.
<br/>
<br/>
Hope that helps.<br/>_________________<br/>Moron! You don't herd chickens with a shotgun!
<br/>
<br/>
--CoolMan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3380 - misehert - Sun Feb 23, 2003 9:27 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the suggestions - as crazy as it may sound, the draw 10 times each solved the problem because it doesn't pause the background scroll like the waits (of course I was probably still doing something wrong with the vblank).  
<br/>
<br/>
Now I'm ready to move on to setting up my background boundaries using collision detection - I have staringmonkey's RPG demo source, so hopefully I'll get there.  Wish me luck - or I'll be back.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
