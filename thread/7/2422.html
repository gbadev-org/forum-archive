<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Question about using DMA to copy a tile to VRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Question about using DMA to copy a tile to VRAM</h2>
<div id="posts">
<div class="post">
    <h4>#12991 - codered - Wed Dec 03, 2003 1:32 am</h4>
    <div class="postbody"><span class="postbody">hey everybody...
<br/>
<br/>
so here's my problem:
<br/>
<br/>
Instead of copying my whole tileMap using DMA like :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DMA_Copy(3,(void*)house2Map.tiledata,(void*)CharBaseBlock(0),house2Map.tileDataSize/4,DMA_32NOW);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
i'm trying to load my tile data tile by tile using this code to add in each of the 279 tiles:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(u32 loop=0;loop&lt;279;loop++)
<br/>
    {
<br/>
        for(u32 loop2=0;loop2&lt;64;loop2++)
<br/>
        {
<br/>
            SubtileData[loop2] = house2Map.tiledata[loop2+(loop*64)];
<br/>
        }
<br/>
        DMA_Copy(3,(void*)SubtileData,(void*)(0x6000000+(loop*64)),32,DMA_32NOW);
<br/>
    }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
for now i'm just using a temp array "SubtileData" to keep each tile in till I can reformat my tileData arrays.
<br/>
<br/>
It kinda works, the only thing is that every other verticle line is nothing(black).
<br/>
<br/>
any help would be helpfull...
<br/>
<br/>
thanx
<br/>
<br/>
~CODE-RED~</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12993 - sajiimori - Wed Dec 03, 2003 4:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
i'm trying to load my tile data tile by tile 
<br/>
</td> </tr></table><span class="postbody">
<br/>
What was wrong with using DMA?  Why do you use the CPU to copy a tile to a temporary buffer and then use DMA to copy the tile to VRAM?  Why not just copy straight to VRAM?
<br/>
<br/>
Anyway, what are the types of SubtileData and house2Map.tiledata?  If they are arrays of (or pointers to) elements of different sizes, that might cause your problem.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
