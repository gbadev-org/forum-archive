<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>linking problem using SGADE and devkitadv r5b3 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>C/C++ > linking problem using SGADE and devkitadv r5b3</h2>
<div id="posts">
<div class="post">
    <h4>#22257 - Marill - Wed Jun 16, 2004 6:50 am</h4>
    <div class="postbody"><span class="postbody">SGADE + devkitadv r5b3
<br/>
CRT0.S : v1.28 Frohwein
<br/>
linkscript: v1.3 Frohwein
<br/>
Makefile: September 5, 2002 Jaap Suter, Mark T. Price
<br/>
<br/>
bascially followed the tutorial in <a href="http://www.suddenpresence.com/bbatutorial/chapter02.html" target="_blank">http://www.suddenpresence.com/bbatutorial/chapter02.html</a>
<br/>
<br/>
for the setup.
<br/>
<br/>
I've been coding with this setup in pure C with devkitadv r5b3 with absolutley no problems.
<br/>
<br/>
The problems come when I decided I need to go C++ in order to better manage my larger coding project. (this is not a C++ &gt; C thing, it's just that personally I am more comfortable with OOP with larger projects)
<br/>
<br/>
So I've followed the tutorial in <a href="http://www.suddenpresence.com/bbatutorial/chapter02.html" target="_blank">http://www.suddenpresence.com/bbatutorial/chapter02.html</a>
<br/>
<br/>
bottom section titled "Additions for C++ support "
<br/>
<br/>
It compiles nicely, but the error comes during the object linking 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Linking object files
<br/>
C:\devkitadv-r5-beta-3\bin\ld.exe: section .data [02013a88 -&gt; 02013adf] overlaps section .dtors [02013a88 -&gt; 02013a8f]
<br/>
make: *** [C:/gba/demogame2/bin/demogame2.elf] Error 1
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've read that there are some changes to the new devkitadv r5b3 from the old one devkitadv4 that could be the cause of the problems. The tutorial at the SGADE site is using version 4 of devkitadv.
<br/>
<br/>
So, I have installed version 4 of the devkitadv and I tried the compiling and linking again.
<br/>
<br/>
Compilation works fine. But during linking I get these errors
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Linking object files
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(__main.o): In function `__do_global_ctors':
<br/>
__main.o(.text+0xd0): undefined reference to `atexit'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `size_of_encoded_value':
<br/>
unwind-dw2-fde.o(.text+0x60): undefined reference to `abort'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `read_encoded_value_with_base':
<br/>
unwind-dw2-fde.o(.text+0x1e0): undefined reference to `abort'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `__register_frame':
<br/>
unwind-dw2-fde.o(.text+0x284): undefined reference to `malloc'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `__register_frame_table':
<br/>
unwind-dw2-fde.o(.text+0x348): undefined reference to `malloc'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `__deregister_frame_info_bases':
<br/>
unwind-dw2-fde.o(.text+0x404): undefined reference to `free'
<br/>
unwind-dw2-fde.o(.text+0x440): undefined reference to `abort'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `__deregister_frame':
<br/>
unwind-dw2-fde.o(.text+0x478): undefined reference to `free'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `base_from_object':
<br/>
unwind-dw2-fde.o(.text+0x4f0): undefined reference to `abort'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `get_cie_encoding':
<br/>
unwind-dw2-fde.o(.text+0x528): undefined reference to `strlen'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `start_fde_sort':
<br/>
unwind-dw2-fde.o(.text+0x12ec): undefined reference to `malloc'
<br/>
unwind-dw2-fde.o(.text+0x1310): undefined reference to `malloc'
<br/>
C:/devkitadv/lib/gcc-lib/arm-agb-elf/3.0.2/interwork/libgcc.a(unwind-dw2-fde.o):
<br/>
 In function `end_fde_sort':
<br/>
unwind-dw2-fde.o(.text+0x13cc): undefined reference to `free'
<br/>
unwind-dw2-fde.o(.text+0x140c): undefined reference to `abort'
<br/>
unwind-dw2-fde.o(.text+0x1410): undefined reference to `abort'
<br/>
make: *** [C:/gba/demogame2/bin/demogame2.elf] Error 1
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Anyone who has any idea what is going wrong, please help! Thanks in advance, I've been tearing my hair out trying to figure it out on my own!
<br/>
<br/>
thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22267 - Abscissa - Wed Jun 16, 2004 3:34 pm</h4>
    <div class="postbody"><span class="postbody">You know, I've been having pretty much the same problem.
<br/>
<br/>
crt0.S v1.26 by Jeff Frohwein   
<br/>
Makefile: 01/06/2002 Author: Benjamin D. Hale   Orignally by: Jaap Suter   Contributed to by:    Christer Andersson
<br/>
  (Makefile came with GBA Project AppWizard v2.6)
<br/>
DevKitAdvance R4
<br/>
<br/>
The error I've been getting when trying to use C++ is
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
C:\DevKitAdv\lib\gcc-lib\arm-agb-elf\3.0.2\interwork/libgcc.a(__main.o): In function `__do_global_dtors':
<br/>
__main.o(.text+0x80): undefined reference to `__EH_FRAME_BEGIN__'
<br/>
C:\DevKitAdv\lib\gcc-lib\arm-agb-elf\3.0.2\interwork/libgcc.a(__main.o): In function `__do_global_ctors':
<br/>
__main.o(.text+0x114): undefined reference to `__EH_FRAME_BEGIN__'
<br/>
NMAKE : fatal error U1077: 'C:\DevKitAdv\bin\ld' : return code '0x1'
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Pretty cryptic</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36565 - jeremy whiting - Thu Feb 24, 2005 7:27 pm</h4>
    <div class="postbody"><span class="postbody">anyone figure out how to solve this yet?  I just came across the same problem after converting all my code to c++ as well.
<br/>
<br/>
I'm using devkitadvance on linux that has arm-agb-elf-g++ 3.1 and Jeff's 1.28 crt0.s</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36574 - wintermute - Thu Feb 24, 2005 9:47 pm</h4>
    <div class="postbody"><span class="postbody">why is anyone still using devkitadvance?
<br/>
<br/>
<a href="http://sourceforge.net/projects/devkitpro" target="_blank">http://sourceforge.net/projects/devkitpro</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36576 - Kyoufu Kawa - Thu Feb 24, 2005 9:53 pm</h4>
    <div class="postbody"><span class="postbody">Beats me. I'd use DevKitArm, if I didn't already use ProDG.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36579 - MumblyJoe - Fri Feb 25, 2005 12:43 am</h4>
    <div class="postbody"><span class="postbody">I guess a lot of the old tutorials still say to use devkitadv or something.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
