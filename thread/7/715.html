<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>memory corruption - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>C/C++ > memory corruption</h2>
<div id="posts">
<div class="post">
    <h4>#3669 - daveb - Tue Mar 04, 2003 7:34 pm</h4>
    <div class="postbody"><span class="postbody">Hello all,
<br/>
Using g++I am creating an object using new.  In the constructor I am assigning the member variables, but if I examine them the values are corrupt.  The code previously worked and testing the same code in visual c causes no problems.
<br/>
<br/>
My guess is, new is returning a  restricted (&amp;volatile?) area of the GBAs memory and so the object is corrupt.  
<br/>
<br/>
Is there a way to ensure that the restriced parts of the GBAs memory are not overwritten?
<br/>
<br/>
Sorry if this is an obvious question or has been covered before.
<br/>
thanks
<br/>
david</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3670 - Vortex - Tue Mar 04, 2003 8:00 pm</h4>
    <div class="postbody"><span class="postbody">The new operator uses some form of alloc() to allocate memory on the heap. My suggestion is to try the following things:
<br/>
<br/>
1. Create a very simple C program using malloc(): void *p = malloc(...);
<br/>
    Print which memory location the poinet points to. Compare the value    with the GBAs memory map
<br/>
<br/>
2. Try to figure out where your heap is allocated and is there enought space for your allocated objects.
<br/>
<br/>
<br/>
Hope that helps</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3672 - Paul Shirley - Tue Mar 04, 2003 9:07 pm</h4>
    <div class="postbody"><span class="postbody">removed</span><span class="gensmall"><br/><br/>Last edited by Paul Shirley on Sun Mar 28, 2004 9:49 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#3694 - daveb - Wed Mar 05, 2003 12:15 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your replies.
<br/>
My code is like this.  This code worked previously until I built up another class.
<br/>
<br/>
...
<br/>
object f*
<br/>
f = new object;
<br/>
printf("f = %d",f); // output was 12394656  using visual boy sdl
<br/>
...
<br/>
object::object()
<br/>
{
<br/>
   membervalue = 4;// type s16
<br/>
   printf("member value = %d",membervalue);  //output was -498401148
<br/>
}
<br/>
<br/>
How can I tag all my values as EWRAM? - Paul, I cant find your previous post.
<br/>
Also how can I determine where in memory 12394656 actually is.
<br/>
Is there some sort of tutorial for programming within the gba memory?  Although I have some C++ experience I have no knowledge of working with fixed areas of memory.
<br/>
<br/>
Again thanks,
<br/>
david</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178255 - Dwedit - Sun Nov 09, 2014 7:19 pm</h4>
    <div class="postbody"><span class="postbody">Reference counting is where it's at.  Then you never need to use new or delete ever again.
<br/>
For an example, see <a href="http://wehlou.com/Code/Rcptr/" target="_blank">http://wehlou.com/Code/Rcptr/</a>  (The .exe file is a winzip self extractor containing a Visual C++ 6 project)
<br/>
<br/>
The code may be from 2001, but that's fine.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178273 - gauauu - Mon Nov 17, 2014 5:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SimonB wrote:</b></span></td> </tr> <tr> <td class="quote">Nice bump, almost 12 years later...:P
<br/>
<br/>
Simon</td> </tr></table><span class="postbody">
<br/>
<br/>
Pretty sure this is attempts at spam. All these new accounts have a single word in their sig (which is probably supposed to be a spam link) and are bumping dead threads.
<br/>
<br/>
We need some mods to swoop in and kill them :)  (Simon, are you the only moderator that's still around?)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178277 - SimonB - Thu Nov 20, 2014 5:09 pm</h4>
    <div class="postbody"><span class="postbody">*Swooping*
<br/>
<br/>
:=)
<br/>
<br/>
Simon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178278 - SimonB - Thu Nov 20, 2014 5:20 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://forum.gbadev.org/viewtopic.php?p=178250&amp;highlight=#178250" target="_blank">http://forum.gbadev.org/viewtopic.php?p=178250&amp;highlight=#178250</a>
<br/>
<br/>
See that thread. It started with that user, but he had a much more human/relevant post. I dont remember seeing that spam URL in his signature before, so it was probably changed later, after you replied.
<br/>
<br/>
Then 3 spam-bots followed, all with IP's from Pakistan (like the original adson3492) and with gmail.com e-mail adresses and one word signatures.
<br/>
<br/>
The first of the spam-bots had the word "adson" as his signature (note the first "human" spam-bots nickname....adson3492).
<br/>
<br/>
Oh well, they have been deleted now :=) (will delete adson3492 in a day or so)
<br/>
<br/>
Simon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178280 - gauauu - Fri Nov 21, 2014 8:43 pm</h4>
    <div class="postbody"><span class="postbody">Thanks!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
