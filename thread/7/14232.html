<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Pointer to an array of function pointers :S - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>C/C++ > Pointer to an array of function pointers :S</h2>
<div id="posts">
<div class="post">
    <h4>#141593 - Ruben - Thu Sep 27, 2007 9:12 am</h4>
    <div class="postbody"><span class="postbody">OK. I have NO idea how I would go about doing this because my compiler's just giving me errors about arithmetic or sumthing like that but anyways... I have an const array that contains pointers to functions:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const void (*MyArray[])) {
<br/>
 0, &amp;Function1, 0, 0, 0, &amp;Function2,
<br/>
 ...
<br/>
 0,
<br/>
};</td> </tr></table><span class="postbody">
<br/>
OK. That's fine. But what I want to do is have somthing like this:
<br/>
I want a pointer variable that can point to my array of pointers. I want, for example, to be able to do this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void* (*pFunctionArray)() = &amp;MyArray;
<br/>
</td> </tr></table><span class="postbody">
<br/>
Even though that's not correct... I think you get the point. Like I said, I have NO idea on how to do this!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141594 - DekuTree64 - Thu Sep 27, 2007 9:37 am</h4>
    <div class="postbody"><span class="postbody">Seems to compile ok for me if I put both asterisks inside the parentheses:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void a() {}
<br/>
void b() {}
<br/>
void (*array[])() = { a, b };
<br/>
void (**arrayPtr)() = array;</td> </tr></table><span class="postbody">
<br/>
<br/>
Although I'd use a typedef like this so it's easier to tell what's going on:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">typedef void (*FunctionPointer)();
<br/>
FunctionPointer array[] = { a, b };
<br/>
FunctionPointer *arrayPtr = array;</td> </tr></table><span class="postbody"><br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141596 - Ruben - Thu Sep 27, 2007 9:58 am</h4>
    <div class="postbody"><span class="postbody">Hehe... looks like I have to do a LOT more researching on C++ LMFAO!!!!! Hehehe!! Cheers!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141608 - gmiller - Thu Sep 27, 2007 1:02 pm</h4>
    <div class="postbody"><span class="postbody">this is basic C not C++ ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141609 - Ruben - Thu Sep 27, 2007 1:41 pm</h4>
    <div class="postbody"><span class="postbody">...*blushes*.... lol.... hehehe... should've figured that... I guess I kinda knew... lol...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141611 - Ruben - Thu Sep 27, 2007 2:45 pm</h4>
    <div class="postbody"><span class="postbody">1 more question:
<br/>
I've got myself the pointer array setup like this:
<br/>
void (**_MapBG2Events)();
<br/>
void (**_MapBG3Events)();
<br/>
<br/>
But just how would I assign a 'const void' array onto this??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141664 - gmiller - Fri Sep 28, 2007 2:33 am</h4>
    <div class="postbody"><span class="postbody">As DekutTress64 suggested:
<br/>
<br/>
Code:
<br/>
typedef void (*FunctionPointer)();
<br/>
FunctionPointer array[] = { a, b };
<br/>
FunctionPointer *arrayPtr = array;
<br/>
<br/>
But define the array to be "const FunctionPointer array = { a, b};" this way the table is filled in at compile time.  If you want it at runtime then it can't be const or up in the ROM.</span><span class="gensmall"><br/><br/>Last edited by gmiller on Fri Sep 28, 2007 1:25 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#141665 - Ruben - Fri Sep 28, 2007 2:44 am</h4>
    <div class="postbody"><span class="postbody">Alright. I'll do that right away!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
