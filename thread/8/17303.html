<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Printing Strings - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>ASM > Printing Strings</h2>
<div id="posts">
<div class="post">
    <h4>#174594 - nathanpc - Mon Jun 28, 2010 6:50 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
 There is any way that I can print a string(and if possible say the position that it should be written) using Assembly?
<br/>
<br/>
Best Regards,
<br/>
 Nathan Paulino Campos<br/>_________________<br/><span style="font-size: 9px; line-height: normal">Reading Tonc and trying to remind my very old C knowledge.
<br/>
<br/>
Just bought a GameBoy Advance SP one of those cartridges to put the ROMs for onboard debug.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174595 - Dwedit - Mon Jun 28, 2010 9:13 pm</h4>
    <div class="postbody"><span class="postbody">Choice #1: Do it yourself.  You decide whether you want to just use one tile per character, or make a variable-width font text engine to display text.  Tutorials from Tonc look nice.
<br/>
<br/>
Choice #2: Use libgba's console functions.
<br/>
<br/>
When calling C code from ASM:
<br/>
r0-r3 = first 4 arguments to a function
<br/>
r4-r11 should be preserved by the function you call.  r0-r3 and r12 are scratch space, and may be trashed.  When making your own functions in ASM to call from C, preserve r4-r11.
<br/>
r0 is the return value for stuff up to 32-bits in size.
<br/>
<br/>
Then you just use the BL instruction to call it after you've put stuff into the input registers.  And of course, you always push the old link register on the stack before you call anything, so that your function can return.  Sometimes people even put the link register into another register instead of using the stack, but that's a little messy.
<br/>
<br/>
I don't know offhand how to call a vararg function like printf though, sorry.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174596 - nathanpc - Mon Jun 28, 2010 9:31 pm</h4>
    <div class="postbody"><span class="postbody">I'm going to make my own library, by plotting pixels. ;)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">Reading Tonc and trying to remind my very old C knowledge.
<br/>
<br/>
Just bought a GameBoy Advance SP one of those cartridges to put the ROMs for onboard debug.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174600 - fincs - Tue Jun 29, 2010 1:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">I don't know offhand how to call a vararg function like printf though, sorry.</td> </tr></table><span class="postbody">
<br/>
When there are more than 4 arguments to a function the remaining parameters are pushed to the stack.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174606 - headspin - Wed Jun 30, 2010 7:37 am</h4>
    <div class="postbody"><span class="postbody">We have a section on our forums with some code in asm for displaying text on the DS. Shouldn't be too hard to modify for the GBA. There are a couple of GBA examples too.
<br/>
<br/>
<a href="http://greatflash.co.uk/index.php?board=12.0" target="_blank">http://greatflash.co.uk/index.php?board=12.0</a><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174610 - nathanpc - Wed Jun 30, 2010 10:34 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the link. ;)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">Reading Tonc and trying to remind my very old C knowledge.
<br/>
<br/>
Just bought a GameBoy Advance SP one of those cartridges to put the ROMs for onboard debug.</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
