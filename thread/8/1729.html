<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>gas newb - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > gas newb</h2>
<div id="posts">
<div class="post">
    <h4>#8828 - jhorvath - Mon Jul 21, 2003 4:17 am</h4>
    <div class="postbody"><span class="postbody">hello,
<br/>
<br/>
i'm having a bit of trouble ..(on account of my ignorance , nothing real technical), with gas.
<br/>
<br/>
all i'm trying to do (don't laugh...) is set the video mode and put a little red pixel on the screen (gbaguy's asm tut)
<br/>
<br/>
now i find that everything is well and good if i supply actual numeric values , ie:
<br/>
<br/>
    ldr r1,=0x04000000
<br/>
<br/>
however if i try to use a variable, say ..
<br/>
<br/>
    ldr r1,=REG_DISPCNT
<br/>
<br/>
..that would have been defined in my gba.s as
<br/>
<br/>
    .data
<br/>
    REG_DISPCNT    : .word 0x04000000
<br/>
    {..a lot more like the line above..}
<br/>
    .pool
<br/>
    .end
<br/>
<br/>
possibly something is wrong with the way i *define* my variables. i had them defined differently, then i read someone's post about putting variables in ram (or something) so i changed the file to this...anyway...
<br/>
<br/>
i guess what i'm wondering is ..does there seem anything wrong with an *.include* file with a layout as my gba.s (see above), and if so does anyone have a quick explanation , or possibly a file they could send me for reference.
<br/>
<br/>
thanks in advance,<br/>_________________<br/>/* jhorvath */</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8830 - slip - Mon Jul 21, 2003 8:03 am</h4>
    <div class="postbody"><span class="postbody">Hey, by the looks of it you are declaring REG_DISPCNT as data and not as a macro.
<br/>
It looks like your not using the screen.h file that gbaguy says to in his tutorial. The line of code that defines the macro looks like this
<br/>
<br/>
@define REG_DISPCNT 0x04000000
<br/>
<br/>
I hope that helps. I'm no expert I only started asm last week. But I had no problems with gbaguy's tutorial with the pixel. Go back and download screen.h and see how you go =)
<br/>
good luck<br/>_________________<br/>[url="http://www.ice-d.com"]www.ice-d.com[/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8831 - sgstair - Mon Jul 21, 2003 8:10 am</h4>
    <div class="postbody"><span class="postbody">Well, definitely your problem is that you're declaring your REG_DISPCNT as data, though I have no personal experience with @define, I use .EQU
<br/>
(ex: .EQU REG_DISPCNT, 0x04000000 )
<br/>
<br/>
In fact I'm not sure @define even works, as @ is the character that comments out the rest of the line.
<br/>
<br/>
slip: you may have mistaken a comment for the actual define :) 
<br/>
<br/>
Anyhow, good luck, ASM is a valuable tool for those who can master it :)
<br/>
<br/>
-Stephen<br/>_________________<br/><a class="postlink" href="http://blog.akkit.org/" target="_blank">http://blog.akkit.org/</a> - <a class="postlink" href="http://www.akkit.org/dswifi/" target="_blank">http://www.akkit.org/dswifi/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8833 - tom - Mon Jul 21, 2003 9:08 am</h4>
    <div class="postbody"><span class="postbody">@define is goldroad syntax.
<br/>
guess i'm repeating myself, but you really shouldn't use goldroad =)
<br/>
<br/>
use the .equ method as described by sgstair</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8846 - jhorvath - Mon Jul 21, 2003 6:09 pm</h4>
    <div class="postbody"><span class="postbody">.equ works (though i'm sure you already new that :) )
<br/>
<br/>
thanks alot folks,
<br/>
<br/>
p.s. i've been a gnu man since i started using linux... if there's a gnu way of doing something, that's usually how i get it done, with the exception of vim ;) of course (hence no goldroad for me...plus no goldroad natively on linux anyway).
<br/>
<br/>
thanks again<br/>_________________<br/>/* jhorvath */</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
