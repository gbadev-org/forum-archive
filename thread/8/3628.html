<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GAS .incbin - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > GAS .incbin</h2>
<div id="posts">
<div class="post">
    <h4>#22735 - booger - Mon Jun 28, 2004 7:58 am</h4>
    <div class="postbody"><span class="postbody">Is there anyone who has gotten the GAS .incbin directive function properly?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22751 - wintermute - Mon Jun 28, 2004 7:15 pm</h4>
    <div class="postbody"><span class="postbody">yes.
<br/>
<br/>
You need devkitARM for that one though</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22761 - booger - Mon Jun 28, 2004 9:23 pm</h4>
    <div class="postbody"><span class="postbody">ahh..darn, i'm too lazy to change my dev-environment now..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22775 - wintermute - Tue Jun 29, 2004 7:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>booger wrote:</b></span></td> </tr> <tr> <td class="quote">ahh..darn, i'm too lazy to change my dev-environment now..</td> </tr></table><span class="postbody">
<br/>
<br/>
well if you're doing things right then it's a straight swap, most people manage in a couple of minutes. DevkitARM is pretty much the same but more up to date and windows friendly.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22781 - booger - Tue Jun 29, 2004 9:19 am</h4>
    <div class="postbody"><span class="postbody">ok, then i'll give it a try; .incbin is such a great feature!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22787 - ProblemBaby - Tue Jun 29, 2004 10:17 am</h4>
    <div class="postbody"><span class="postbody">Is my problem the same??
<br/>
When I use incbin I get this error when I try to compile:
<br/>
<br/>
Error: Unknown pseudo-op:  `.incbin'</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22810 - booger - Tue Jun 29, 2004 10:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">Is my problem the same??
<br/>
When I use incbin I get this error when I try to compile:
<br/>
<br/>
Error: Unknown pseudo-op:  `.incbin'</td> </tr></table><span class="postbody">
<br/>
<br/>
i don't think you're having the same problem. when i tried to use .incbin the assembler/compiler told me that the file was padded and not entirely read.
<br/>
are you sure you're using .incbin in an assembler-file with this syntax:
<br/>
<br/>
 .incbin "myfile.bin"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22818 - ProblemBaby - Tue Jun 29, 2004 10:48 pm</h4>
    <div class="postbody"><span class="postbody">Yes my asm file looks like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
.global LogoGFX
<br/>
.global LogoMAP
<br/>
.global LogoPAL
<br/>
.TEXT
<br/>
<br/>
LogoGFX:
<br/>
.incbin "Logo.gfx"
<br/>
<br/>
LogoMAP:
<br/>
.incbin "Logo.map"
<br/>
<br/>
LogoPAL:
<br/>
.incbin "Logo.pal"
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22846 - booger - Wed Jun 30, 2004 12:49 pm</h4>
    <div class="postbody"><span class="postbody">how strange. which compiler-package are you using?
<br/>
<br/>
anyhow - upgrade to devkitarm and that would probably not be a problem anymore..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22848 - wintermute - Wed Jun 30, 2004 1:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>booger wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">Is my problem the same??
<br/>
When I use incbin I get this error when I try to compile:
<br/>
<br/>
Error: Unknown pseudo-op:  `.incbin'</td> </tr></table><span class="postbody">
<br/>
<br/>
i don't think you're having the same problem. when i tried to use .incbin the assembler/compiler told me that the file was padded and not entirely read.
<br/>
are you sure you're using .incbin in an assembler-file with this syntax:
<br/>
<br/>
 .incbin "myfile.bin"</span></td> </tr></table><span class="postbody">
<br/>
<br/>
can you give me a shout if you get the same problem with devkitARM?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22849 - ProblemBaby - Wed Jun 30, 2004 1:46 pm</h4>
    <div class="postbody"><span class="postbody">Yes it works thanks
<br/>
But I wonder what is the difference
<br/>
between devkitadv and devkitarm?
<br/>
<br/>
then I wonder why
<br/>
I got a lot of 
<br/>
packed attribute ignored
<br/>
<br/>
My makefile look something like this:
<br/>
@arm-elf-gcc -nostartfiles -Wall -mcpu=arm7tdmi -ffreestanding -fpeephole -fomit-frame-pointer -fverbose-asm -mthumb-interwork -Wl,-T lnkscript -O2 -o Game.elf &lt;here are all files&gt;
<br/>
<br/>
I dont know what the most of the settings do but can the packed-thing have something to do with this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22852 - wintermute - Wed Jun 30, 2004 2:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">Yes it works thanks
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
well, I meant Booger's problems  :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
But I wonder what is the difference
<br/>
between devkitadv and devkitarm?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
devkitARM is a lot closer to the FSF sources and is currently using the latest stable releases of all the packages. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
then I wonder why
<br/>
I got a lot of 
<br/>
packed attribute ignored
<br/>
<br/>
My makefile look something like this:
<br/>
@arm-elf-gcc -nostartfiles -Wall -mcpu=arm7tdmi -ffreestanding -fpeephole -fomit-frame-pointer -fverbose-asm -mthumb-interwork -Wl,-T lnkscript -O2 -o Game.elf &lt;here are all files&gt;
<br/>
<br/>
I dont know what the most of the settings do but can the packed-thing have something to do with this?</td> </tr></table><span class="postbody">
<br/>
<br/>
this one could be related to the -fverbose-asm switch, I can't be sure without seeing the warning output from your compile.
<br/>
<br/>
Ideally it would help if you could put together a minimal test case which shows the problem you're having.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22854 - booger - Wed Jun 30, 2004 3:42 pm</h4>
    <div class="postbody"><span class="postbody">yo wintermute! - everything works just fine! the .incbin makes my day, and the rest of the package seems stable and well put-together! thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22867 - ProblemBaby - Wed Jun 30, 2004 5:45 pm</h4>
    <div class="postbody"><span class="postbody">Aha it was a bit confusing=)
<br/>
<br/>
I took away the verbose mode but no difference=/
<br/>
But...
<br/>
First of all it wasnt many=) it was three to be exact the file was included
<br/>
in many other files so it looked like damn much.
<br/>
<br/>
It was in a krawall file that have three structures that looks like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
typedef __attribute__ ((packed)) struct {
<br/>
//stuff
<br/>
} Sample;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I dont really know what the __attribute__ ((packed)) thing do so I dont know what the consequenses (how is it spelled???) will be.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
