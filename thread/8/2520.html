<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>MBV2, GoldRoad....how do i get a listing to work - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > MBV2, GoldRoad....how do i get a listing to work</h2>
<div id="posts">
<div class="post">
    <h4>#13734 - LOOP-HOG - Sun Dec 21, 2003 9:20 pm</h4>
    <div class="postbody"><span class="postbody">I am using the Goldroad assembler to try to create a .MB file, that is to say, one that you can download directly to the GBA using the MBV2 cable.  I have tried several sample listings, but none of them work.  Always the screen will go blank and then nothing will come up.  I'm thinking that **ALL** Goldroad sample listings assume the usage of either an emulator OR a flashcart.  
<br/>
<br/>
I've read some of the technical info on how to make a .MB file as opposed to a .GBA file, but it just isn't clicking.  
<br/>
<br/>
basically what i want is a small simple listing that is 100% guaranteed to work with the multiboot cable, ( tested with said hardware ) and nothing else, so that I can see everything that is involved in making a .MB file function properly.
<br/>
<br/>
thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13752 - LOOP-HOG - Mon Dec 22, 2003 5:42 am</h4>
    <div class="postbody"><span class="postbody">@include screen.h 
<br/>
<br/>
@textarea 0x2000000
<br/>
<br/>
	@dcb 0x00,0x00,0x00,0x00
<br/>
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
	@dcb 0x00,0x00,0x00,0x00
<br/>
<br/>
; Note: The title MUST have 12 characters. You can of course use spaces at the end. 
<br/>
	@dcb "TITLE   HERE"
<br/>
<br/>
	@dcb "Home"
<br/>
<br/>
	@dcb 0x00,0x00
<br/>
<br/>
	@dcb 0x96
<br/>
<br/>
	@dcb 0x00
<br/>
<br/>
	@dcb 0x00
<br/>
<br/>
	@dcb 0x00,0x00,0x00,0x00,0x00,0x00,0x00
<br/>
<br/>
	@dcb 0x00
<br/>
<br/>
                ; Complement check - use gbafix to determine your complement ( e.g. gbafix -v yourgame.agb ) and insert it here
<br/>
	@dcb 0x62
<br/>
<br/>
	@dcb 0x00,0x00
<br/>
<br/>
b main
<br/>
<br/>
  @dcb 0x1C,0x0
<br/>
<br/>
main:
<br/>
<br/>
ldr r1,=REG_DISPCNT
<br/>
ldr r2,=(BG2_ENABLE|MODE_3)
<br/>
str r2,[r1]
<br/>
<br/>
ldr r1,= 0x7FFF
<br/>
ldr r2,=vram
<br/>
add r2,r2,38400
<br/>
str r1,[r2]
<br/>
<br/>
START
<br/>
b START
<br/>
<br/>
@pool
<br/>
@endarea</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13753 - LOOP-HOG - Mon Dec 22, 2003 5:47 am</h4>
    <div class="postbody"><span class="postbody">BigRedPMP from  #gbadev on irc.blessed.net  helped me out alot with it.  My original listing had the header wrong.  Posted above is a correct header.  The program is very simple, just a sample to get something to work. 
<br/>
<br/>
First you need to run the listing through the Goldroad assembler.  Then you take the resulting .mb file and fix the checksum on it using GBAFIX.  After that you upload it to a GBA using a multiboot cable, such as MVB2 or XBOO.  After that you should see if you squint hard enough a white pixel on a black screen, the pixel is in the middle left of the screen right up against the edge.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14030 - rogergba - Sat Dec 27, 2003 11:05 pm</h4>
    <div class="postbody"><span class="postbody">I was just about to ask for this very code.
<br/>
Some sort of sample multiboot code to get me going.
<br/>
thx.
<br/>
<br/>
I spent MANY years developing for the c64 and I must say that the assembly on the arm is all but readable to me as is, without reading an instruction maunal.
<br/>
<br/>
Now for a plan...
<br/>
Now for a project...
<br/>
Now for a financial goal...
<br/>
...the knowledge is there
<br/>
and away we go!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
