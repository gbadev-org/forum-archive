<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Pixels Aren't Displaying - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Pixels Aren't Displaying</h2>
<div id="posts">
<div class="post">
    <h4>#174618 - nathanpc - Fri Jul 02, 2010 1:13 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
 I'm trying to plot pixels, side-by-side. Something like this dots: <span style="color: red">.</span><span style="color: green">.</span><span style="color: blue">.</span>, without any space between them. Then I've done this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">.arm
<br/>
.text
<br/>
.global main
<br/>
<br/>
.macro plot_pixel x, y, color
<br/>
    mov r0, #0x6000000
<br/>
    mov r1, \color
<br/>
    ldr r2, =(\x+\y*240)*2
<br/>
    str r1, [r0, r2]
<br/>
.endm
<br/>
<br/>
main:
<br/>
    mov r0, #0x4000000
<br/>
    mov r1, #0x400
<br/>
    add r1, r1, #3
<br/>
    str r1, [r0]
<br/>
<br/>
    plot_pixel 119, 80, #0x1F
<br/>
    plot_pixel 120, 80, #0x03E0
<br/>
    plot_pixel 121, 80, #0x7C00
<br/>
<br/>
infin:
<br/>
    b infin</td> </tr></table><span class="postbody">
<br/>
But when I tried to emulate this, what I got was this:
<br/>
<a href="http://img294.imageshack.us/img294/9335/gba2pix.png">[Images not permitted - Click here to view it]</a>
<br/>
What I should do?
<br/>
<br/>
Best Regards,
<br/>
 Nathan Paulino Campos<br/>_________________<br/><span style="font-size: 9px; line-height: normal">Reading Tonc and trying to remind my very old C knowledge.
<br/>
<br/>
Just bought a GameBoy Advance SP one of those cartridges to put the ROMs for onboard debug.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174620 - Cearn - Fri Jul 02, 2010 6:32 am</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">str</span> stores words (32-bit), not halfwords (16-bit). You need <span style="font-weight: bold">strh</span>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174623 - nathanpc - Fri Jul 02, 2010 10:35 am</h4>
    <div class="postbody"><span class="postbody">Ahh, now I understood. I've found the <span style="font-weight: bold">str</span> and <span style="font-weight: bold">strh</span> part at my ARM Assembly book. :)
<br/>
<br/>
Thanks very much!<br/>_________________<br/><span style="font-size: 9px; line-height: normal">Reading Tonc and trying to remind my very old C knowledge.
<br/>
<br/>
Just bought a GameBoy Advance SP one of those cartridges to put the ROMs for onboard debug.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174632 - Dwedit - Sat Jul 03, 2010 2:46 am</h4>
    <div class="postbody"><span class="postbody">If you don't have a copy already, grab this:
<br/>
<a href="http://www.eecs.umich.edu/~panalyzer/pdfs/ARM_doc.pdf" target="_blank">http://www.eecs.umich.edu/~panalyzer/pdfs/ARM_doc.pdf</a>  (1.3MB, 268 page PDF)
<br/>
It's the ARM7TDMI data sheet, with tons of information on all the ARM and THUMB instructions.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174648 - nathanpc - Mon Jul 05, 2010 12:02 am</h4>
    <div class="postbody"><span class="postbody">Thanks very much! This will be handy. ;)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">Reading Tonc and trying to remind my very old C knowledge.
<br/>
<br/>
Just bought a GameBoy Advance SP one of those cartridges to put the ROMs for onboard debug.</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
