<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>IP - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > IP</h2>
<div id="posts">
<div class="post">
    <h4>#29351 - sgeos - Thu Nov 18, 2004 8:31 pm</h4>
    <div class="postbody"><span class="postbody">gcc spits out asm that uses a register "ip".  According to <a class="postlink" href="http://www.cs.cornell.edu/courses/cs414/2004fa/armcallconvention.pdf" target="_blank">this page</a>, ip is "the intra-procedure-call scratch register".  What is an "intra-procedure-call scratch register" and what is it used for?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29352 - DekuTree64 - Thu Nov 18, 2004 9:15 pm</h4>
    <div class="postbody"><span class="postbody">That's just another name for r12. By 'scratch register', they mean it's similar to how you never have to restore r0-r3 to their original values before exiting. The only difference is it will never have an argument or anything in it, so it's just free to do whatever you want with right from the get-go. That also means you need to save it before calling other functions if you have something in it.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29362 - sgeos - Fri Nov 19, 2004 2:09 am</h4>
    <div class="postbody"><span class="postbody">Fair enough.  What is FP and what is it used for?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29363 - sajiimori - Fri Nov 19, 2004 2:23 am</h4>
    <div class="postbody"><span class="postbody">Is it the frame pointer, which is the backed up copy of the stack pointer before local variables are allocated?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29365 - DekuTree64 - Fri Nov 19, 2004 2:27 am</h4>
    <div class="postbody"><span class="postbody">That one I've never been too clear on. Since it's called frame pointer, I'd assume that it's used as a frame of reference, maybe to copy the stack pointer into and then push variable numbers of arguments onto it and still be able to access all your variables. That could be done just as well with any register though, so I don't know why they gave it a special name. Maybe just reminiscent of older processors that had special instructions to access specific registers (like the stack instructions in THUMB mode)<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29368 - tepples - Fri Nov 19, 2004 3:25 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">Since it's called frame pointer, I'd assume that it's used as a frame of reference, maybe to copy the stack pointer into and then push variable numbers of arguments onto it and still be able to access all your variables. That could be done just as well with any register though, so I don't know why they gave it a special name.</td> </tr></table><span class="postbody">
<br/>
Defining the frame pointer in the ABI helps debuggers find the frame pointer when they can't infer it from the stack pointer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29376 - allenu - Fri Nov 19, 2004 5:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">That one I've never been too clear on. Since it's called frame pointer, I'd assume that it's used as a frame of reference, maybe to copy the stack pointer into and then push variable numbers of arguments onto it and still be able to access all your variables. </td> </tr></table><span class="postbody">
<br/>
<br/>
The frame pointer, as I've seen it on other processors, is used to point to the place in the stack where local variables for a function go.  You're right that you can use other registers for the same task, but I think often there are opcodes  that specifically use the FP register implicitly.  That is, you cannot specific another register to use as a 'frame pointer'.
<br/>
<br/>
I know on the DSP we use at work, the LINK and UNLINK opcodes automatically adjust FP.  Looking through my 68000 book, however, that processor does allow you to specify another register as a frame pointer.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
