<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Something's screwy with devkitpro - Not giving link errors! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Something's screwy with devkitpro - Not giving link errors!</h2>
<div id="posts">
<div class="post">
    <h4>#130856 - Dwedit - Fri Jun 08, 2007 7:12 pm</h4>
    <div class="postbody"><span class="postbody">This code generates no link errors despite the fact that it should:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 .text
<br/>
  adr r0,some_label
<br/>
<br/>
 .section .iwram, "ax", %progbits
<br/>
 .subsection 0
<br/>
 .align
<br/>
 .pool
<br/>
some_label:
<br/>
  bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Does the linker even get a chance to find invalid PC reletive operations?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130899 - wintermute - Sat Jun 09, 2007 2:42 am</h4>
    <div class="postbody"><span class="postbody">The assembler is designed to be used by the compiler rather than be used for large projects and does not report errors in some cases where it might be expected that it should.
<br/>
<br/>
As I've told you several times before, the assembler assumes that references within the same compilation unit can be reached by normal branches. You *must* separate iwram code into it's own object and *not* mix code in different areas in the same compilation unit or all bets are off.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
