<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Memory Addressing - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>ASM > Memory Addressing</h2>
<div id="posts">
<div class="post">
    <h4>#109503 - WangJang - Sat Nov 18, 2006 9:16 pm</h4>
    <div class="postbody"><span class="postbody">*EDIT*
<br/>
<br/>
Very sorry, i looked again and i totally missed the "adr" instruction :(
<br/>
<br/>
Delete this is need be :)
<br/>
<br/>
Sorry to bother, but i have a very noob question.
<br/>
<br/>
I searched and could not find what i was looking for, this is what i am trying to do.
<br/>
<br/>
i have a set address like:
<br/>
<br/>
_ButtonStore:	.long 0x04000130
<br/>
<br/>
So i can load that by doing.
<br/>
ldr   r0, _ButtonStore
<br/>
<br/>
now r0 will contain 0x04000130
<br/>
<br/>
But how can i make r0 contain only the location of "_ButtonStore" its self
<br/>
the address that its reading 0x04000130 from ?
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109529 - DekuTree64 - Sun Nov 19, 2006 1:02 am</h4>
    <div class="postbody"><span class="postbody">Just for reference, adr compiles to a pc-relative add, so it only works with data that's near the current code. To reference a global variable from another file or something, use
<br/>
<br/>
ldr r0, =_ButtonStore
<br/>
<br/>
That stores a pointer to the variable at the nearest .pool directive, and does a pc-relative load to it. You can also load constants that way, rather than building them a byte at a time with immediate values.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109560 - WangJang - Sun Nov 19, 2006 9:27 am</h4>
    <div class="postbody"><span class="postbody">Many thanks :)
<br/>
<br/>
This actually solved my second problem, all is well now.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
