<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Quick Stack Question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>ASM > Quick Stack Question</h2>
<div id="posts">
<div class="post">
    <h4>#1618 - Epo - Mon Jan 20, 2003 7:48 pm</h4>
    <div class="postbody"><span class="postbody">Whats the best way to use the stack?
<br/>
<br/>
What I used so far is:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
; To PUSH
<br/>
str &lt;register&gt;, [r13]+4!
<br/>
<br/>
; To POP
<br/>
sub r13,r13,#0x4
<br/>
ldr &lt;register&gt;,[r13]
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Also, should I check for a stack overflow or something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1623 - Touchstone - Mon Jan 20, 2003 8:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">stmfd   sp!, {r3-r10}      @ push
<br/>
ldmfd   sp!, {r3-r10}      @ pop
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1625 - Touchstone - Mon Jan 20, 2003 8:28 pm</h4>
    <div class="postbody"><span class="postbody">Oh, to check your stack usage you can fill your designated stack area with easy to recognize data (like 'STCK' or whatever) and in your gameloop check to make sure that the last slot in the stack is still 'STCK'. You won't see as soon as the stack has been overflowed but you will know within one frame that the stack has been overflowed. If you notice that you have some kind of stack overflow you can start a timer interrupt that check the stack every so often and hope that you'll trap the stack overflow sooner this way. By having designated 'STCK' you can also check total stack usage after the game has been running for a while, that way you'll end up not wasting lots of CPU RAM on unused stack.<br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1630 - Epo - Mon Jan 20, 2003 9:01 pm</h4>
    <div class="postbody"><span class="postbody">Great, thanks!
<br/>
<br/>
 - Epo</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
