<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Interpolating between integers - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Interpolating between integers</h2>
<div id="posts">
<div class="post">
    <h4>#7899 - Lupin - Fri Jun 27, 2003 8:05 pm</h4>
    <div class="postbody"><span class="postbody">How could I interpolate between two Integers? I have an "time"-Value wich goes from 0-7 and 2 values wich I want to interpolate between, this has to be done fast, the basic formular for doing this in normal math would be new=src+((dest-source)*t), but now I need to do this really fast by using asm and only integer based calculations.
<br/>
<br/>
I think this is possible by using some and/or/shift operators, but I'm not that good at bit fiddling, so maybe someone of you has done something like this before.
<br/>
<br/>
I need this to create an fast lookup table for integer division wich covers the whole range of an 16bit value (maybe even an 32bit one), by using an very small lookup table</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7900 - tepples - Fri Jun 27, 2003 8:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">How could I interpolate between two Integers? I have an "time"-Value wich goes from 0-7 and 2 values wich I want to interpolate between, this has to be done fast, the basic formular for doing this in normal math would be new=src+((dest-source)*t), but now I need to do this really fast by using asm and only integer based calculations.</td> </tr></table><span class="postbody">
<br/>
<br/>
On the ARM7TDMI processor, multiplication by an integer less than 255 is quite fast (3 cycles or so).  If you set <span style="font-style: italic">t</span> to range from 0 (src) to 256 (dst) and then shift the result to the right by 8 bits, you have it.  Or set <span style="font-style: italic">t</span> to range from 0 to 8 and then shift the result to the right by 3 bits.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7908 - Lupin - Sat Jun 28, 2003 10:22 am</h4>
    <div class="postbody"><span class="postbody">Ok, but why do I need to shift afetr I multiplied the value?
<br/>
<br/>
Do you know how many cycles an software divide takes?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7921 - tepples - Sat Jun 28, 2003 6:10 pm</h4>
    <div class="postbody"><span class="postbody">A BIOS divide is extremely slow (a couple hundred cycles last time I checked).
<br/>
<br/>
A right shift is equivalent (modulo rounding differences for negative numbers) to a divide by a power of 2. For example, shifting a number right by 3 divides the number by 8 (that is, 2^3).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
