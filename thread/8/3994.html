<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>A little simple question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>ASM > A little simple question</h2>
<div id="posts">
<div class="post">
    <h4>#25841 - ProblemBaby - Sun Aug 29, 2004 12:20 pm</h4>
    <div class="postbody"><span class="postbody">Iam using both c and asm in my project.
<br/>
My gba.h file contains a lot of register flags but also C-structures
<br/>
so It cant be included by a .S-file.
<br/>
Does it exist a compilator directive to see if it is a C or S file that includes the header.
<br/>
Something like this:
<br/>
<br/>
flags
<br/>
#if C_CODE
<br/>
struct...
<br/>
#endif
<br/>
<br/>
#if ASM_CODE
<br/>
.byte...
<br/>
#endif
<br/>
<br/>
I would be comfortable!
<br/>
and then I wonder how to make a function prototype in asm.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25847 - tepples - Sun Aug 29, 2004 3:46 pm</h4>
    <div class="postbody"><span class="postbody">Assembly language doesn't use function prototypes.
<br/>
<br/>
It'd probably work better to make separate headers that in turn #include common files.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25849 - f(DarkAngel) - Sun Aug 29, 2004 4:19 pm</h4>
    <div class="postbody"><span class="postbody">Or you can write headers that has only cpp directives, like reg definitions - then you can define vu16p to nothing for as headers, and include type definitions file in c headers that includes the as headers.<br/>_________________<br/>death scream...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26128 - torne - Wed Sep 08, 2004 12:35 pm</h4>
    <div class="postbody"><span class="postbody">You can trivially determine whether the header has been included by C or ASM just by defining some flag of your own: for example, in your .S, put #define THIS_IS_ASM before you include any files ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26136 - Lord Graga - Wed Sep 08, 2004 1:24 pm</h4>
    <div class="postbody"><span class="postbody">I suggest that you do not use a gba.h when you write asm. This will give you more overview when optimizing your code.[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26152 - torne - Wed Sep 08, 2004 4:57 pm</h4>
    <div class="postbody"><span class="postbody">Graga, what do you mean? What effect does defining things in the preprocessor have on optimisation?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
