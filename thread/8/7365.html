<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Speed of jumps - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Speed of jumps</h2>
<div id="posts">
<div class="post">
    <h4>#59568 - SittingDuck - Wed Nov 02, 2005 6:49 pm</h4>
    <div class="postbody"><span class="postbody">Why do jumps take so long? Is it because the prefetch cache has to fill up?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59594 - poslundc - Wed Nov 02, 2005 8:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SittingDuck wrote:</b></span></td> </tr> <tr> <td class="quote">Why do jumps take so long? Is it because the prefetch cache has to fill up?</td> </tr></table><span class="postbody">
<br/>
<br/>
The instruction prefetch on the GBA (which is turned off by default) can improve performance of sequential code, but I think you'll only ever see a benefit in Thumb code running from ROM. I'm not too clear on the specifics of its operation, but it only ever "caches" a single instruction ahead.
<br/>
<br/>
Branches are slow because they require a flush of the three-stage instruction pipeline. They are even slower for code running from ROM because they require a random rather than sequential memory access. Branches in code running from EWRAM or IWRAM still requires the pipeline flush (two extra cycles), but you don't incur an additional penalty for reading from a different memory location.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
