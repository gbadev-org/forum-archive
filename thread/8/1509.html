<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Getting GCC asm output - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Getting GCC asm output</h2>
<div id="posts">
<div class="post">
    <h4>#7621 - Lupin - Sat Jun 21, 2003 3:36 pm</h4>
    <div class="postbody"><span class="postbody">is there an way to get the ASM code wich GCC produces? I want to know how I could use the swi 0xe0000-Instruction in pure asm</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7627 - loading - Sat Jun 21, 2003 4:16 pm</h4>
    <div class="postbody"><span class="postbody">If you have a C file you want to translate to asm use
<br/>
gcc  (-mthumb) -S main.c -lm
<br/>
with that you'll get main.s an asm version of main.c</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7665 - Lupin - Sun Jun 22, 2003 7:12 pm</h4>
    <div class="postbody"><span class="postbody">do you know how I could get the C-code into between the ASM instructions? So I would know what's going on :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7818 - loading - Wed Jun 25, 2003 5:27 pm</h4>
    <div class="postbody"><span class="postbody">no way to do that - i tend to add a few ionline assemblys in my c++ files (like shift left 0 or crap like that) to be able to read the output</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7851 - dragor - Thu Jun 26, 2003 5:26 pm</h4>
    <div class="postbody"><span class="postbody">when you compile your file use a line like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
gcc -g -S main.c -o main.s
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The -S option, as mentioned before, tells the compiler to stop at the asm level.
<br/>
The -g option tells the compiler to generate debugging information.  If you look at the .s file after, you'll notice labels like: .L1, .L2, .L3, ...  These are line numbers.  These are what IDEs use for source level debugging.  They'll telling you exactly what the compiler is doing with each line of your .c file.<br/>_________________<br/>Sum Ergo Cogito</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7857 - Jason Wilkins - Thu Jun 26, 2003 9:34 pm</h4>
    <div class="postbody"><span class="postbody">The .L## labels are not line numbers, they are labels produced by the compiler to implement loops and if statements.  If you have no branches in a function, it will contain no .L## labels.
<br/>
<br/>
The .LM# are labels which correspond to the .stabn directives, which contain the line number among other things.  They do corrrespond to each line, as you say.  I think the line number is the 3 argument of the .stabn directive which goes with the LM# label.  The forth argument is the offset from the beginning of the function in bytes, and is were you will find the LM# label.<br/>_________________<br/><a href="http://devkitadv.sourceforge.net" target="_blank">http://devkitadv.sourceforge.net</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
