<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>using Linkcable in Goldroad ASM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > using Linkcable in Goldroad ASM</h2>
<div id="posts">
<div class="post">
    <h4>#5615 - f00l - Sat May 03, 2003 12:46 pm</h4>
    <div class="postbody"><span class="postbody">Hi ,
<br/>
<br/>
I'm just a newbie trying to use the linkcable in goldroad ASM,
<br/>
this is what I have so far :
<br/>
<br/>
<br/>
<br/>
<br/>
This is what I want to do :
<br/>
<br/>
Recommended Communication Procedure for MASTER unit (internal clock)
<br/>
- Initialize data which is to be sent to slave (placed in REG_SCCNT_H for 8-bit mode or REG_SCD0 for 32-bit mode)
<br/>
- Wait for SI to become LOW (slave ready). (Check timeout here!)
<br/>
- Set Start flag.
<br/>
- Wait for IRQ (or for Start bit to become zero).
<br/>
- Process received data (received in REG_SCCNT_H for 8-bit mode or REG_SCD0 for 32-bit mode)
<br/>
<br/>
<br/>
<br/>
And this is my code, can somebody tell me if it works and if not, how I can get it to work...
<br/>
<br/>
<br/>
<br/>
<br/>
ldr r2,=0x40012A     ; REG_SCCNT_H
<br/>
ldr r1,=0xFF
<br/>
<br/>
strb r1,[r2]
<br/>
<br/>
ldr r3,=0x4000128   ; REG_SCCNT_L
<br/>
ldr r0,=0x00
<br/>
<br/>
SUBS r3,r0              ; Wait until r3 is 0
<br/>
ldrbZ r3,[r2]            ; and then read it...
<br/>
<br/>
<br/>
<br/>
<br/>
Thanks<br/>_________________<br/>woei!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6964 - Ampersand - Thu Jun 05, 2003 12:49 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I think this might be what you've ment to do... no guarantee's I'm right...
<br/>
<br/>
Ampersand
<br/>
<br/>
----------------------------------------------------------------------------X
<br/>
ldr r2,=0x40012A ; REG_SCCNT_H
<br/>
<br/>
;prepare
<br/>
   mov r0,#3         ; set coutdown number
<br/>
<br/>
loop:
<br/>
   subS r0,r0,#1    ; sub r0 with 1 store in r0 and set flag 
<br/>
bne loop               ; while r3 is not zero repeat countdown
<br/>
<br/>
;Continue to do something
<br/>
   ldrb rX,[rX] ; Do what ever u want... to do.
<br/>
<br/>
infinity
<br/>
b infinity<br/>_________________<br/><a href="http://www.iome.nl" target="_blank">www.iome.nl</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7000 - MrMr[iCE] - Thu Jun 05, 2003 10:57 pm</h4>
    <div class="postbody"><span class="postbody">I think you left out a zero in the REG_SCCNT line:
<br/>
<br/>
ldr r2,=0x40012A ; REG_SCCNT_H
<br/>
<br/>
should be
<br/>
<br/>
ldr r2, =0x400012A ;REG_SCCNT_H<br/>_________________<br/>Does the corpse have a familiar face?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7856 - f00l - Thu Jun 26, 2003 6:55 pm</h4>
    <div class="postbody"><span class="postbody">hehe.. here's the new asm source.. at the moment I can't test it, but does anybody know if it's okay ?  :
<br/>
<br/>
ldr r2,=0x400012A  ; REG_SCCNT_H 
<br/>
ldr r1,=0xFF       ; data to be send (255,test number)
<br/>
<br/>
strb r1,[r2]       ; write r1 to r2
<br/>
<br/>
<br/>
ldr r3,=0x4000128  ; REG_SCCNT_L 
<br/>
mov r0,#3          ; set coutdown number 
<br/>
<br/>
<br/>
loop:              ; start loop
<br/>
<br/>
subS r0,r0,#1      ; sub r0 with 1 store in r0 and set flag 
<br/>
bne loop           ; while r3 is not zero repeat countdown 
<br/>
<br/>
ldrbZ r3,[r2]      ; and then read it... 
<br/>
<br/>
infinity           ; main loop
<br/>
b infinity         ; end main loop<br/>_________________<br/>woei!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
