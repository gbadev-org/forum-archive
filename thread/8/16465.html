<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NDS Assembler questions - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > NDS Assembler questions</h2>
<div id="posts">
<div class="post">
    <h4>#166890 - cewlout - Sun Feb 22, 2009 11:44 pm</h4>
    <div class="postbody"><span class="postbody">Hello dudes,
<br/>
<br/>
Is anyone able to point me to a nds assembly language example file with simple graphic display or something?
<br/>
<br/>
Or some kind of startup code for the nintendo ds? (Turning on LCD correctly etc..?)
<br/>
<br/>
Which compiler for assembly do you prefer for nds?
<br/>
<br/>
thanks a lot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166893 - Dwedit - Mon Feb 23, 2009 12:46 am</h4>
    <div class="postbody"><span class="postbody">Use C combined with Assembly for the best of both worlds.
<br/>
That way you can do low performance stuff in a less tedious programming language, then ASM for the high performance stuff.
<br/>
<br/>
To mix C and Assembly, preserve registers r4-r11 after calling ASM from C, like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
my_asm_function:
<br/>
  stmfd sp!,{r4-r11,lr}
<br/>
  ...
<br/>
  ldmfd sp!,{r4-r11,lr}
<br/>
  bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
Registers r0-r3 are used as arguments, and r0 is for return values.
<br/>
You'll probably want to call your ASM code from inside C code, even if it's just from within the main function.
<br/>
<br/>
You can use the GNU assembler from devkitarm, its only quirks are the confusing syntax for declaring a section of code to be in faster RAM, and that is uses @ as the comment character.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
