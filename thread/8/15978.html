<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBA OS - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>ASM > GBA OS</h2>
<div id="posts">
<div class="post">
    <h4>#162159 - moonlightcheese - Wed Aug 27, 2008 2:09 am</h4>
    <div class="postbody"><span class="postbody">i've got a school project on the horizon that i'm going to use as an opportunity to get down and dirty with the gba.  this will be my first time building an operating system and what i'd like to do is flash the eeprom or rom or whatever on my GBA-SP.
<br/>
<br/>
specifically what i'm trying to accomplish is to back up the eeprom on the gba, just for the sake of experience and safety, and flash it with a boot loader that will load part (or all) of the os kernel that i'm writing and from there, load the rest of the system software like the shell and other things from a flash cartridge and basically use the flash cartridge as a block device which will essentially allow me to run a small version of minix (or my version of minix, stripped down for this umpc device) on the gba.
<br/>
<br/>
i'll need to buy a flash cart but i understand that retailer information is forbidden so i guess i can't ask for where and what exactly to buy?
<br/>
<br/>
anyway, what i need to know is more specifics about the hardware, such as how much memory i have to play with, a schematic of the gba-sp if possible, the model of the rom on the board, how to flash it (if there's an easy way), any specifics that are particular to the gba that may interfere with normal arm7 architecture and things of that nature.  any gba specific hardware information would be great.
<br/>
<br/>
what i already know is the type of architecture i'll need to be coding for (ARM7TDMI).  and i've found most of the architecture specific resources i think i'll need.  i'm already underway with setting up a gcc cross-compiler and i'm hard at work poring over my two OS text books and the minix code.  other than that, i have a lot to learn.  i'd like to turn this into a long-term project and offer the capability of connecting devices like ps/2 keyboards and such to the gba if possible and turning this into a useful umpc device with a basic shell and maybe a gui of some kind.
<br/>
<br/>
any insight and help would be awesome!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162161 - tepples - Wed Aug 27, 2008 2:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>moonlightcheese wrote:</b></span></td> </tr> <tr> <td class="quote">this will be my first time building an operating system and what i'd like to do is flash the eeprom or rom or whatever on my GBA-SP.</td> </tr></table><span class="postbody">
<br/>
There is no writable memory to speak of inside a GBA SP. You'll need to write your OS kernel to a SLOT-2 flash card and use that.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">load the rest of the system software like the shell and other things from a flash cartridge and basically use the flash cartridge as a block device</td> </tr></table><span class="postbody">
<br/>
Most file systems use blocks of 512 to 4,096 bytes. But NOR flash cards appear to have 131,072 byte blocks. You'll probably want to use what's called a "SLOT-2 SD adapter" so that you can use a "typical" file system.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">i'll need to buy a flash cart but i understand that retailer information is forbidden so i guess i can't ask for where and what exactly to buy?</td> </tr></table><span class="postbody">
<br/>
The "what" is fine to discuss.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">i'd like to turn this into a long-term project and offer the capability of connecting devices like ps/2 keyboards and such to the gba if possible and turning this into a useful umpc device with a basic shell and maybe a gui of some kind.</td> </tr></table><span class="postbody">
<br/>
Did somebody say openpandora.org?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162164 - moonlightcheese - Wed Aug 27, 2008 2:52 am</h4>
    <div class="postbody"><span class="postbody">wow... didn't know about open pandora.  but i kinda had my heart set on coding for the gba since it'd be relatively cheap since i already own the hardware and at most would have to purchase a flashable eeprom to replace the one on board.  i'm totally willing and more than capable of doing the soldering.  would that be possible?
<br/>
<br/>
edit: or would it even be necessary?  then again... at that point it would only be useful for this school project as i doubt anyone else would be comfortable soldering their gba....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162168 - Dwedit - Wed Aug 27, 2008 5:17 am</h4>
    <div class="postbody"><span class="postbody">The onboard ROM is inside the processor.  You can't get around that fact that when you turn it on, you will see a Game Boy logo, and it will check a cartridge for a valid Nintendo logo before it boots.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162177 - moonlightcheese - Wed Aug 27, 2008 12:48 pm</h4>
    <div class="postbody"><span class="postbody">ok, that's enough information to at least get a better idea of the work involved.  i checked out some of the beginner information and it looks like i won't have the option of building a memory mapped io table and i'll have to make sure the prof is cool with that.  also, trying to fit minix+bash and other functionality into 256KBytes of memory may be impossible.  looks like minix requires 8MB of ram at the very least.  it may be necessary for me to use pandora (if it's available for purchase now?) or something like it... but i'm not giving up yet!  man it would be so cool to switch on the gba and see a login screen and be able to hook up a keyboard or rs232 conn or something :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162193 - Dwedit - Wed Aug 27, 2008 8:57 pm</h4>
    <div class="postbody"><span class="postbody">Someone once ported a really old version of Unix to the GBA.  There have also been small operating systems ported over which provide some Posix functionality.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162195 - Miked0801 - Wed Aug 27, 2008 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Lol.  Good luck with the RS232 code.  That isn't anywhere in the realm of easy on a GBA.  Not to be a downer, but a more suitable development platform may be in order here.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162204 - Dwedit - Thu Aug 28, 2008 1:08 am</h4>
    <div class="postbody"><span class="postbody">Doesn't the GBA link port naturally have a UART COMMS mode?  Just get a MBV2 cable from somewhere and you can do GBA communication with a standard serial port.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162207 - dantheman - Thu Aug 28, 2008 2:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>moonlightcheese wrote:</b></span></td> </tr> <tr> <td class="quote">but i'm not giving up yet!  man it would be so cool to switch on the gba and see a login screen and be able to hook up a <span style="font-weight: bold">keyboard </span>or rs232 conn or something :D</td> </tr></table><span class="postbody">
<br/>
<br/>
Closest thing I've seen - <a href="http://www.brolinembedded.se/projects/keyboard/" target="_blank">http://www.brolinembedded.se/projects/keyboard/</a>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">Someone once ported a really old version of Unix to the GBA.  There have also been small operating systems ported over which provide some Posix functionality.</td> </tr></table><span class="postbody">
<br/>
<br/>
Link to the Unix port (which crashes after a few "ls" commands due to lack of memory) -  <a href="http://wwwhsse.fh-hagenberg.at/Studierende/hse02006/uclgba/" target="_blank">http://wwwhsse.fh-hagenberg.at/Studierende/hse02006/uclgba/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162292 - moonlightcheese - Sat Aug 30, 2008 1:08 am</h4>
    <div class="postbody"><span class="postbody">wow, that's actually more information than i was expecting :D
<br/>
thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162300 - pepsiman - Sat Aug 30, 2008 6:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dantheman wrote:</b></span></td> </tr> <tr> <td class="quote">Link to the Unix port (which crashes after a few "ls" commands due to lack of memory) -  <a href="http://wwwhsse.fh-hagenberg.at/Studierende/hse02006/uclgba/" target="_blank">http://wwwhsse.fh-hagenberg.at/Studierende/hse02006/uclgba/</a></td> </tr></table><span class="postbody">
<br/>
That's the Linux port, the Unix port is here:
<br/>
<a href="http://www.kernelthread.com/publications/gbaunix/" target="_blank">http://www.kernelthread.com/publications/gbaunix/</a>
<br/>
<br/>
Linux Is Not UniX</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162512 - dantheman - Thu Sep 04, 2008 6:53 am</h4>
    <div class="postbody"><span class="postbody">My bad, didn't realize both had been ported so I went with what Dwedit said.  Of course now that you linked the page I remember that I read it a while ago but never really experimented with it.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
