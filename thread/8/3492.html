<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>mod replayer for goldroad - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>ASM > mod replayer for goldroad</h2>
<div id="posts">
<div class="post">
    <h4>#21448 - booger - Sat May 29, 2004 2:01 pm</h4>
    <div class="postbody"><span class="postbody">i'm not sure if this should go in the audio or assembly forum, but i decided to post it here anyway. here goes:
<br/>
i'm looking for a mod replayer which is simple to implement in code aimed for the goldroad assembler; i find gas annoying for
<br/>
a project written in 100% assembler, but most players i've found are targeted towards gas-projects. has anyone modifyed an existing player (like nmod) or do i have to do it myself..?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21454 - poslundc - Sat May 29, 2004 3:41 pm</h4>
    <div class="postbody"><span class="postbody">I think very few people are using goldroad for new development. First of all, it's much easier to use GAS because it comes with the GNU toolchain - which most of us are already using anyway - and keeps everything streamlined with GCC. Also, unless things have changed since I started ASM programming, goldroad is abandonware and is no longer under development, and hasn't been updated or maintained in quite a while.
<br/>
<br/>
There are only some minor syntactical differences between goldroad and GAS. You can probably convert the program yourself to goldroad without much difficulty, but if you plan on relying on community resources regularly then you might consider taking the plunge into GAS instead, as you will be saving yourself a lot of conversion work in the long run.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21467 - booger - Sat May 29, 2004 5:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">I think very few people are using goldroad for new development. First of all, it's much easier to use GAS because it comes with the GNU toolchain - which most of us are already using anyway - and keeps everything streamlined with GCC. Also, unless things have changed since I started ASM programming, goldroad is abandonware and is no longer under development, and hasn't been updated or maintained in quite a while.
<br/>
<br/>
There are only some minor syntactical differences between goldroad and GAS. You can probably convert the program yourself to goldroad without much difficulty, but if you plan on relying on community resources regularly then you might consider taking the plunge into GAS instead, as you will be saving yourself a lot of conversion work in the long run.
<br/>
<br/>
Dan.</td> </tr></table><span class="postbody">
<br/>
<br/>
you may be right..i've given gas a second chance, and i guess it's more reliable in the long run! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25334 - [mRg] - Fri Aug 20, 2004 8:33 pm</h4>
    <div class="postbody"><span class="postbody">just to jump on this old topic for a second ..
<br/>
<br/>
I am creating a project in pure asm (gas) and was just curious as to if there was a recommended/tried/tested asm mod player out there .. im curious to see how one would work (trying to learn as much as i can hehe) and would hope to implement it into my project with the least of fuss. (well i dont mind a bit of fuss .. helps the learning proces :P)
<br/>
<br/>
Any nudges in the right direction would be welcome.
<br/>
<br/>
[mRg]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25335 - wintermute - Fri Aug 20, 2004 9:55 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://www.pdroms.de/roms.php?system=Gameboy%20Advance&amp;typ=Applications&amp;first=0" target="_blank">http://www.pdroms.de/roms.php?system=Gameboy%20Advance&amp;typ=Applications&amp;first=0</a>
<br/>
<br/>
<br/>
NMOD player 1c</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25350 - [mRg] - Sat Aug 21, 2004 8:36 am</h4>
    <div class="postbody"><span class="postbody">thanks wintermute  :)
<br/>
<br/>
I'll try it out :)
<br/>
<br/>
[mRg]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25356 - [mRg] - Sat Aug 21, 2004 2:57 pm</h4>
    <div class="postbody"><span class="postbody">Lo again .. .. if anyone can cast their eye on this I would be greatful !
<br/>
<br/>
(Apologies for the basic code but I am a newbie at this :)
<br/>
<br/>
Just a simple routine to play a mod in asm (trying to convert from the C example) .. Im probably doing something that is quickly recified or I have no idea what I'm doing (which, to be honest, is more likely hehe)
<br/>
<br/>
It compiles OK but I get a weird static noise when i run it (well least there is some noise not silence I guess :) which i think is it just playing very slowly.
<br/>
<br/>
I thought it may be something to do with the way i have assigned the interrupt handler .. or .. does the code need to be in iwram ? (I am a little unsure about iwram at this point as I am just starting out and links to useful docs explaining this would be useful too hehe) .. or .. have i included the nmod.s in the wrong place ?
<br/>
<br/>
Any help /pointers are always appreciated.
<br/>
<br/>
Regards
<br/>
<br/>
[mRg]
<br/>
<br/>
C Example (comes with NMOD)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main(int argc, char argv[])
<br/>
{
<br/>
int i;
<br/>
//Set timer1 interrupt handler to NMOD_Timer1iRQ 
<br/>
iTimer1Intr=NMOD_Timer1iRQ;
<br/>
//Set mastervolumes to maximum
<br/>
NMOD_SetMasterVol(64,0);
<br/>
NMOD_SetMasterVol(64,1);
<br/>
NMOD_SetMasterVol(64,2);
<br/>
NMOD_SetMasterVol(64,3);
<br/>
//Start playing
<br/>
NMOD_Play( (u32)(&amp;BIN(module)) );
<br/>
for(;;)
<br/>
   {
<br/>
   pad=Joypad();
<br/>
   if (!(pad&amp;Pad1Start))
<br/>
      {
<br/>
      break;
<br/>
      }
<br/>
   VSync();
<br/>
   }
<br/>
//Stop playing
<br/>
NMOD_Stop();
<br/>
for(;;);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
My Code .. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
.arm
<br/>
.text
<br/>
.global main
<br/>
<br/>
@-------------------------------------------------------
<br/>
@ Include header with standard GBA definitions                         
<br/>
@-------------------------------------------------------
<br/>
<br/>
.include "includes/gba.h"
<br/>
<br/>
@-------------------------------------------------------
<br/>
@ Main program label                        
<br/>
@-------------------------------------------------------
<br/>
<br/>
main:
<br/>
<br/>
@--------------------------------------------------------
<br/>
@ Setup screen
<br/>
@--------------------------------------------------------
<br/>
<br/>
         ldr r0, =REG_DISPCNT
<br/>
         ldr r1, =(MODE_4|BG2_ENABLE)   @ LOAD REGISTER - OR the options we want together.
<br/>
         strh r1, [r0]
<br/>
         
<br/>
@--------------------------------------------------------
<br/>
@ Music setup
<br/>
@--------------------------------------------------------            
<br/>
<br/>
         ldr r0, =0x03007ffc            @ Set interrupt
<br/>
         ldr r1, =NMOD_Timer1iRQ      @ to NMOD Timer
<br/>
         str r1, [r0]
<br/>
<br/>
         mov r0, #64                  @ Set max vol
<br/>
         mov r1, #0                  @ Channel 0
<br/>
         bl NMOD_SetMasterVol   
<br/>
         
<br/>
         mov r0, #64                  @ Set max vol
<br/>
         mov r1, #1                  @ Channel 1
<br/>
         bl NMOD_SetMasterVol
<br/>
         
<br/>
         mov r0, #64                  @ Set max vol
<br/>
         mov r1, #2                  @ Channel 2
<br/>
         bl NMOD_SetMasterVol
<br/>
         
<br/>
         mov r0, #64                  @ Set max vol
<br/>
         mov r1, #3                  @ Channel 3
<br/>
         bl NMOD_SetMasterVol
<br/>
         
<br/>
         ldr r0,=mymod               @ Point to included module
<br/>
         bl NMOD_Play               @ Play the module ?
<br/>
                                                                                                                                                                                                                                                                                                    
<br/>
@--------------------------------------------------------
<br/>
@ Main infinite loop
<br/>
@--------------------------------------------------------
<br/>
<br/>
infin:
<br/>
         
<br/>
         
<br/>
         @--------------------------------------------------------
<br/>
         @ Wait for VBlank
<br/>
         @--------------------------------------------------------   
<br/>
         
<br/>
         ldr r0,=REG_VCOUNT    
<br/>
waitVBlank: 
<br/>
         ldrh r1, [r0]                           
<br/>
         cmp r1, #161                            
<br/>
         bne waitVBlank                           
<br/>
         
<br/>
         b infin
<br/>
<br/>
.ltorg 
<br/>
         
<br/>
mymod:
<br/>
         .incbin "includes/module.bin"
<br/>
         
<br/>
.include "nmod.s"
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25459 - FluBBa - Mon Aug 23, 2004 12:44 pm</h4>
    <div class="postbody"><span class="postbody">iTimer1Intr is not 0x03007ffc.
<br/>
You should probably set up <span style="text-decoration: underline">your</span> interrupt handler to jump to NMOD_Timer1iRQ on Timer1IRQ.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
