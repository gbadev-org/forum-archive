<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Custom divider? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Custom divider?</h2>
<div id="posts">
<div class="post">
    <h4>#176564 - GLaDOS - Thu Aug 18, 2011 7:55 am</h4>
    <div class="postbody"><span class="postbody">I noticed in the beginners FAQ, it refers to the possibility of using a custom divider to optimize divisions. However, the link is broken because Geocities no longer exists.
<br/>
<br/>
Does anyone know where I can find the information?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176579 - Ruben - Fri Aug 19, 2011 3:53 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.peter-teichmann.de/adiv1e.html" target="_blank">32/32=32 Division</a>
<br/>
You may have to change the name of the labels in order to make it work with GAS.
<br/>
<br/>
EDIT:
<br/>
Oh yeah, you may also have to change the 'movs pc, foo' to 'bx foo' for ARM-THUMB interworking (if you're working on the GBA, anyway - the DS doesn't need bx).
<br/>
<br/>
Also, if this is for the GBA, put it in IWRAM. If it's for the DS, put it in ITCM.</span><span class="gensmall"><br/><br/>Last edited by Ruben on Sat Aug 20, 2011 7:25 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#176586 - Miked0801 - Sat Aug 20, 2011 4:16 am</h4>
    <div class="postbody"><span class="postbody">Your better off multplying by the fixed point reciprical if possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176587 - GLaDOS - Sat Aug 20, 2011 5:09 am</h4>
    <div class="postbody"><span class="postbody">I already converted all divisions to multiplications where possible. But there are a couple which are impossible to get rid of.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176588 - Miked0801 - Sat Aug 20, 2011 5:27 pm</h4>
    <div class="postbody"><span class="postbody">Then, are you sure that division is hurting you that much?  I've no problem using that custom divider, but I don't really believe it's going to net you that much performance - depending on what you are dividing with now of course.  If your current divider is at all decent, you might get 2-3%, nothing more.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176589 - GLaDOS - Sat Aug 20, 2011 6:47 pm</h4>
    <div class="postbody"><span class="postbody">Well, I'm using whatever GCC generates in ARM code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176591 - Ruben - Sun Aug 21, 2011 4:30 am</h4>
    <div class="postbody"><span class="postbody">GCC uses a slightly looped version of the divider I linked.
<br/>
For most uses, it's good enough, but if you're dividing a LOT, it may help to use the one I linked.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
