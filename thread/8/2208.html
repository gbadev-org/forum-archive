<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Register bank switch. Why don't work ? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Register bank switch. Why don't work ?</h2>
<div id="posts">
<div class="post">
    <h4>#11520 - simnav - Thu Oct 09, 2003 9:08 am</h4>
    <div class="postbody"><span class="postbody">Hi to everybody !
<br/>
I'm trying to write data to user bank registers when I'm in IRQ mode with this instruction:
<br/>
<br/>
ldmfd sp,{r1-r12}^
<br/>
<br/>
This should pop data from IRQ stack and store them in registers of USR mode. Is it wrong ? I ask you this because what happens with VisualBoy Emulator+Insignt debugger is that data are stored int IRQ bank and not in USR mode.
<br/>
I don't think that is a emulator problem but is a error of mine, but where is the error ?
<br/>
<br/>
Thank you in advance.
<br/>
simnav.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11524 - torne - Thu Oct 09, 2003 1:25 pm</h4>
    <div class="postbody"><span class="postbody">Your instruction is right with ref. to the ARM manual. The only thing I can think of is that your assembler is broken; is it Goldroad? If it is, then that's probably the issue. =)
<br/>
<br/>
Try disassembling the code to make sure it has been assembled correctly? I can't think of any reason at all why it wouldn't work. Maybe try another emulator (use No$GBA if your code is multiboot as no$ seems to match hardware much better than VBA in my experience, though VBA has improved drastically). I'll give it a shot myself sometime later when I'm tinkering with interrupt code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11530 - tepples - Thu Oct 09, 2003 3:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>torne wrote:</b></span></td> </tr> <tr> <td class="quote">use No$GBA</td> </tr></table><span class="postbody">
<br/>
It's no longer available from the author except to those who already have both $2000 and a publishing deal.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11543 - torne - Thu Oct 09, 2003 11:58 pm</h4>
    <div class="postbody"><span class="postbody">It's around on the 'net, and he specifically said it was OK to keep distributing existing unregistered copies under the original licence terms. He's just not hosting it any more.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11598 - simnav - Mon Oct 13, 2003 7:51 am</h4>
    <div class="postbody"><span class="postbody">I've found no$gba emulator in free edition but it don't work as Visual Boy Advance. I think that it's a mistake of mine but I can understand what is it !!! Probably I had to abort my multitasking project on GBA !!!! @!#!
<br/>
<br/>
Hi.
<br/>
Simnav.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
