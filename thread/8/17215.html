<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to write an Asm program that works? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > How to write an Asm program that works?</h2>
<div id="posts">
<div class="post">
    <h4>#173642 - bollkalle - Tue Apr 20, 2010 4:24 pm</h4>
    <div class="postbody"><span class="postbody">I use the assembler arm-agb-elf-as. In devkitadv. But all my programs give the error in vba: Unsupported ARM mode: 00
<br/>
<br/>
What do I need to have in the code to get the code legal for the assembler and the gba? All other programs that other people have done run correctly.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173645 - kusma - Tue Apr 20, 2010 6:34 pm</h4>
    <div class="postbody"><span class="postbody">slightly off-topic, but worth mentioning: Devkit Advance is horribly outdated, use devkitARM instead, available from <a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173655 - Ruben - Wed Apr 21, 2010 10:27 am</h4>
    <div class="postbody"><span class="postbody">Wellllllll, for one, you'd need to make sure that, if you're using a custom cart file, you start up correctly. Secondly, as mentioned before, use devKitARM - compilers change a lot over 5+ years ;D. Lastly, if the problem isn't that, upload the code to pastebin or something and we'll [at least I will =P] take a look at it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173658 - bollkalle - Wed Apr 21, 2010 5:50 pm</h4>
    <div class="postbody"><span class="postbody">The problem is not the compilers, because other programs written by experienced gba programmers do work in devkitadv.
<br/>
<br/>
"Wellllllll, for one, you'd need to make sure that, if you're using a custom cart file, you start up correctly."
<br/>
<br/>
What do you mean?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173659 - Dwedit - Wed Apr 21, 2010 8:33 pm</h4>
    <div class="postbody"><span class="postbody">Maybe start with one of the example programs from devkitpro's examples directory.  Remove all the .c files, make a .s file which exports 'main'.  Then you can use devkitpro's crt0 code to get you all nice and booted, and jump to the main function.
<br/>
<br/>
The ctr0 code basically copies the areas of memory to where they're supposed to be, then jumps to main.
<br/>
<br/>
Obviously you can't directly execute .o files, those aren't plain old binary files, and they're not relocated to the correct start address.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
