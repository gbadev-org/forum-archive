<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Need some info about the directives - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Need some info about the directives</h2>
<div id="posts">
<div class="post">
    <h4>#35288 - ProblemBaby - Wed Feb 02, 2005 5:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi
<br/>
<br/>
I need some about the asm directives.
<br/>
Do someone know a tutorial or something that describes them in detail?
<br/>
I couldnt find any!
<br/>
<br/>
Well I ask some questions anyway here
<br/>
When I write .section .iwram, "ax", %progbits
<br/>
what does "ax", %progbits mean
<br/>
I just say it somewhere and started to write it myself=)
<br/>
<br/>
Am I right: If I want to put data somewhere is it this I should use?
<br/>
.section .rodata
<br/>
.section .iwram, "ax", %progbits
<br/>
.section .ewram
<br/>
?
<br/>
<br/>
And when I want to put data it is
<br/>
.text
<br/>
.section .iwram, "ax", %progbits
<br/>
.section .ewram
<br/>
?
<br/>
<br/>
Thanks for helping</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35354 - mentz - Thu Feb 03, 2005 3:29 pm</h4>
    <div class="postbody"><span class="postbody">Once upon a time...nice programmer creating their program with big guide full of word about using in the best mode their program...
<br/>
<br/>
Now programmer are afraid that someone could grab their ideas...
<br/>
<br/>
The only who made a good guide for his program, was the creator of goldroad assembler (the doc is 'half-hided' in his web site).
<br/>
<br/>
goldroad create clean code instead of other gcc that put a lot of garbage in their assembled files...(using ARM for each compiler)
<br/>
<br/>
(try to create the same program with goldroad and gcc and disassemble it)
<br/>
<br/>
i think the best method to know certain things is to view inside the output file (.gba) and follow step by step with a disassembler (like the one with the VBA) and a memory viewer...
<br/>
<br/>
I hope someone could give a reply to your answer...<br/>_________________<br/>xXx</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35359 - sasq - Thu Feb 03, 2005 4:26 pm</h4>
    <div class="postbody"><span class="postbody">Wow that was a waste of reply-space...
<br/>
<br/>
The format of section is:
<br/>
<br/>
<span style="font-style: italic">.section name[, "flags"[, @type]]</span>
<br/>
<br/>
"name" is used by the linker to decide where to put the section - iwram means in - you gussed it - to place it in iwram. "ax" are the two flags "allocate" and "executable" and the %progbits type says that the section contains data. That is probably default anyway - I have never included flags or type in my sections and had no problems.
<br/>
<br/>
".section rodata" is for data (not code) that goes into ROM (0x08000000-&gt;)
<br/>
<br/>
".section text" is for normal code, also goes into ROM
<br/>
<br/>
(Oh and if you dont know, IWRAM is tha fast 32KByte RAM at 0x03000000 and EWRAM is the 256KByte work ram at 0x02000000)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35362 - poslundc - Thu Feb 03, 2005 4:33 pm</h4>
    <div class="postbody"><span class="postbody">I was writing a response, but sasq gave a much clearer and consise one than mine, so there wasn't much point after that...
<br/>
<br/>
I will, however, point you to this page: <a class="postlink" href="http://re-eject.gbadev.org/" target="_blank">http://re-eject.gbadev.org/</a>. Grab the GAS ARM reference off of it for a useful reference sheet to the most useful GAS directives for GBA programming.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35426 - ProblemBaby - Fri Feb 04, 2005 3:05 pm</h4>
    <div class="postbody"><span class="postbody">sasq: Thanks for the information!
<br/>
<br/>
is it true what mentz said that gcc puts a lot of garbage in the assembled files, does that mean that gcc compiled ASM are slower?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35427 - poslundc - Fri Feb 04, 2005 3:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">is it true what mentz said that gcc puts a lot of garbage in the assembled files, does that mean that gcc compiled ASM are slower?</td> </tr></table><span class="postbody">
<br/>
<br/>
If you write your own assembly, it doesn't make a whit of difference if you use GCC, Goldroad, or anything else to assemble it. There is no compilation stage when going from assembly to binary.
<br/>
<br/>
When it comes to how good a job the compiler does of optimizing your C code, GCC is probably not the best out there for the ARM processor. The ARM SDT reportedly does a much better job. I don't know how Goldroad compares.
<br/>
<br/>
BUT, keep this in mind when selecting a compiler: 
<br/>
<br/>
- GCC is the most widely adopted and supported free compiler out there. The ARM SDT is expensive, and Goldroad is abandonware and hasn't been updated (to my knowledge) in years. Almost everyone who posts to this forum uses GCC, and there is a big advantage in using the compiler that everyone else uses, especially if you think you're going to be asking questions of people in the forums that will require them to be familiar with the development environment you use.
<br/>
<br/>
- The probability that GCC produces sub-optimal code doesn't matter for 95% of the programming you're doing; it just has to be "good enough". For the 5% where it does matter, you can always recode it in assembly if necessary.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35436 - sasq - Fri Feb 04, 2005 4:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
is it true what mentz said that gcc puts a lot of garbage in the assembled files, does that mean that gcc compiled ASM are slower?</td> </tr></table><span class="postbody">
<br/>
<br/>
No offense but menz was talking out of his ass ;)
<br/>
<br/>
Goldroad is a very primitive assembler - it's full of bugs and you have to write all code in one file (putting code in include files doesnt count!) since it has no linking capabilities.  At the top of my head the only advantage it has over gas that I can come up with is it's incbin directive, and that it can assemble directly to a GBA-file  (but a simple objcopy takes care of that in the gas case).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35445 - Lupin - Fri Feb 04, 2005 9:04 pm</h4>
    <div class="postbody"><span class="postbody">DevKitARM supports .incbin too.
<br/>
<br/>
I found the GCC assembler not bad or confusing at all. I would definately take GCC over Goldroad.<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
