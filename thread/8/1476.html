<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>.code 16 or .code 32 ? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>ASM > .code 16 or .code 32 ?</h2>
<div id="posts">
<div class="post">
    <h4>#7425 - Lupin - Tue Jun 17, 2003 5:12 pm</h4>
    <div class="postbody"><span class="postbody">I have some questions:
<br/>
<br/>
where is the difference between .code 16 or .code 32?
<br/>
<br/>
where is the difference between thumb and arm? I compiled an function wich is meant to be thumb code to arm code, without changing anything (expect the function propertys).
<br/>
<br/>
What is the advantage/disadvantage of thmb/arm? 
<br/>
And what does .align	1/2/4 mean?
<br/>
<br/>
perhaps you could enlighten me ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7450 - tepples - Wed Jun 18, 2003 5:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">What is the advantage/disadvantage of thmb/arm?</td> </tr></table><span class="postbody">
<br/>
ARM instructions are 32-bit. Thumb is a 16-bit encoding of a subset of ARM instructions. Sometimes, two or three Thumb instructions are needed to perform the action of a single ARM instruction. Thanks to the magic of interworking (-mthumb-interwork), any ARM or Thumb function can easily call Thumb or ARM functions. However, because the GBA BIOS was compiled without interworking, it expects interrupt service routines (ISRs) to be in ARM instructions.
<br/>
<br/>
In general, Thumb code runs faster from 16-bit memory (ROM, VRAM, and EWRAM), but ARM code runs faster from 32-bit memory (IWRAM). Use ARM code in IWRAM for the tightest loops (audio mixer, polygon rasterizer, etc) and for your ISR's entry point, and use Thumb code in EWRAM or ROM for the rest. (Thumb code in EWRAM is ever so slightly slower than Thumb code in ROM, but it uses much less battery power.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And what does .align	1/2/4 mean?</td> </tr></table><span class="postbody">
<br/>
The .align directive pads the binary with zeroes until the current address is a multiple of the given number. Like most other RISC architectures, the ARM architecture can load or store a 4-byte integer value (u32, s32, int, long int) only at an address that's a multiple of 4. Likewise, a 2-byte integer value (u16, s16, short int) needs to be at an address that's a multiple of 2. And because DMA copies require an alignment at least 2, preferably 4, you should align your const data to a 4-byte boundary.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7557 - Lupin - Thu Jun 19, 2003 7:47 pm</h4>
    <div class="postbody"><span class="postbody">thank you for your good explanations!
<br/>
<br/>
Do you know an good tutorial to learn ASM? An book would even be better. It's very hard to find good explanations about ASM :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
