<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GNU CPP and assembly question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>ASM > GNU CPP and assembly question</h2>
<div id="posts">
<div class="post">
    <h4>#5211 - SmileyDude - Wed Apr 23, 2003 8:00 am</h4>
    <div class="postbody"><span class="postbody">Hey everyone -- hopefully, this is an easy question :)
<br/>
<br/>
I'm using the GNU CPP with my assembly files, so I can get things like #define, #ifdef, etc, etc from my .S files.  I'm trying to put together a common gba.h file that I can use for both assembly and C/C++ code, but I need to be able to tell if I am #included from a .S or a .c file -- is there anything I can #ifdef for that would tell me that I'm being included from a .S file?
<br/>
<br/>
As a workaround, I can just do the kludge of #define __ASSEMBLY__ before including my header file, but I would prefer to have this automated if possible...<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5291 - Touchstone - Thu Apr 24, 2003 5:44 pm</h4>
    <div class="postbody"><span class="postbody">You can add a preprocessor directive from the command-line. At least for the C compiler. I'm pretty sure it's the -D option. Maybe that works for 'as' aswell. Just add it to your makefile or whatever.
<br/>
<br/>
I'm talking about GCC here, just to clarify. :)<br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5691 - SmileyDude - Tue May 06, 2003 6:14 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Touchstone wrote:</b></span></td> </tr> <tr> <td class="quote">You can add a preprocessor directive from the command-line. At least for the C compiler.</td> </tr></table><span class="postbody">
<br/>
<br/>
Now that's an interesting method -- one that I was aware of, but just completely forgot about for this problem.  Since I'm using gcc for the asm files, I can easily put in a -D option.  Small makefile change that's guarenteed to work as opposed to trying to find an existing #define... looks like I have a solution :)
<br/>
<br/>
thanks!<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
