<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Is there an advantage to using RSB over SUB sometimes? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>ASM > Is there an advantage to using RSB over SUB sometimes?</h2>
<div id="posts">
<div class="post">
    <h4>#46294 - Digeraticus - Wed Jun 22, 2005 8:04 pm</h4>
    <div class="postbody"><span class="postbody">I was reading an article on ARM assembly code (looking for something else) when I stumbled across a statement that said that RSB has an advantage over SUB when the operands you want to use aren?t in the right order. It then said that the reason for this would be explained later in the article (which it wasn?t).
<br/>
<br/>
Anyone have a clue what this is about?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46295 - DekuTree64 - Wed Jun 22, 2005 8:13 pm</h4>
    <div class="postbody"><span class="postbody">Yes, it can save you an instruction sometimes. Most common is negating a number. With rsb, you can just do
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">rsb reg, reg, #0</td> </tr></table><span class="postbody">
<br/>
Which is reg = 0 - reg.
<br/>
Without rsb, you need 2 instructions and a temp register:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">mov rTemp, #0
<br/>
sub reg, rTemp, reg</td> </tr></table><span class="postbody">
<br/>
<br/>
'course, you could also negate without the temp reg :)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">mvn reg, reg
<br/>
add reg, reg, #1</td> </tr></table><span class="postbody">
<br/>
but it still takes 2 instructions.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46330 - tum_ - Thu Jun 23, 2005 8:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">Yes, it can save you an instruction sometimes. Most common is negating a number. With rsb, you can just do
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">rsb reg, reg, #0</td> </tr></table><span class="postbody">
<br/>
Which is reg = 0 - reg.
<br/>
Without rsb
<br/>
[snipped]
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
In other words, the advantage is due to the fact that
<br/>
in ARM the two operands are not 'equal in rights':
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ARM Data Sheet wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
The first operand is always a register (Rn). The second operand may be a
<br/>
shifted register (Rm) or a rotated 8 bit immediate value (Imm)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The same applies to RSC vs SBC.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46391 - Digeraticus - Fri Jun 24, 2005 2:53 am</h4>
    <div class="postbody"><span class="postbody">Thank you for your quick &amp; to-the-point responses.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
