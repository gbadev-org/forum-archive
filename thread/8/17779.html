<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>inline assembly error - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > inline assembly error</h2>
<div id="posts">
<div class="post">
    <h4>#177020 - blessingta@hotmail.co.uk - Fri Nov 25, 2011 11:11 am</h4>
    <div class="postbody"><span class="postbody">why wont this insertion work?
<br/>
<br/>
asm 
<br/>
	(
<br/>
	//@ DEFINING DATA IN ASSEMBLY
<br/>
	  .align 2
<br/>
word_var:               //@ int word_var= 0xCAFEBABE
<br/>
    .word   0xCAFEBABE
<br/>
sArray:                 //@ int sArray[4]= { 1,2,3,4 }
<br/>
    .word   1, 2, 3, 4      //@ NO comma at the end!!
<br/>
	);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177021 - blessingta@hotmail.co.uk - Fri Nov 25, 2011 12:19 pm</h4>
    <div class="postbody"><span class="postbody">Plus what is the assembly operation for bjarne stroustrup's ++?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177022 - blessingta@hotmail.co.uk - Fri Nov 25, 2011 12:40 pm</h4>
    <div class="postbody"><span class="postbody">this edit wont work either:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   asm 
<br/>
   (
<br/>
"word_var:               /* int word_var= 0xCAFEBABE*/"
<br/>
    ".word   0xCAFEBABE"
<br/>
"sArray:                 /* int sArray[4]= { 1,2,3,4 }*/"
<br/>
".word   1, 2, 3, 4      /* NO comma at the end!!*/"
<br/>
   );
<br/>
   </td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">&gt; "make" 
<br/>
main.c
<br/>
arm-eabi-gcc -MMD -MP -MF /g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/ASM/32BITS/build/main.d -g -Wall -O3 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/ASM/32BITS/include -I/D/devkitPro/libgba/include -I/g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/ASM/32BITS/build -c /g/YEAR2/Console_Programming_CONPRG/Course_Work/gba/ASM/32BITS/source/main.c -o main.o 
<br/>
C:\Users\cam01468\AppData\Local\Temp\ccghdj18.s: Assembler messages:
<br/>
C:\Users\cam01468\AppData\Local\Temp\ccghdj18.s:286: Error: junk at end of line, first unrecognized character is `s'
<br/>
make[1]: *** [main.o] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177023 - Dwedit - Fri Nov 25, 2011 5:22 pm</h4>
    <div class="postbody"><span class="postbody">For inline ASM:
<br/>
<br/>
Use input, output, and clobber lists so the compiler can figure out how to pass variables in and out of your ASM code.
<br/>
<br/>
Use \n at the end of every line.
<br/>
<br/>
This page has good information: <a class="postlink" href="http://www.ethernut.de/en/documents/arm-inline-asm.html" target="_blank">ARM GCC Inline Assembler Cookbook</a><br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177024 - sverx - Fri Nov 25, 2011 5:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If we have more than one instructions, we write one per line in double quotes, and also suffix a \n and \t to the instruction. This is because gcc sends each instruction as a string to as(GAS) and by using the newline&amp;sol;tab we send correctly formatted lines to the assembler.</td> </tr></table><span class="postbody">
<br/>
<br/>
<a class="postlink" href="http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s4" target="_blank">http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s4</a>
<br/>
<br/>
edit: <span style="font-weight: bold">Dwedit</span> was faster.<br/>_________________<br/><a class="postlink" href="http://bit.ly/yiQrz9" target="_blank">libXM7</a>|<a class="postlink" href="http://bit.ly/yJwcOo" target="_blank">NDS programming tutorial (Italiano)</a>|<a class="postlink" href="http://disjointedstudio.blogspot.com/" target="_blank">Waimanu DS / GBA</a>|<a class="postlink" href="http://adshomebrewersdiary.blogspot.com" target="_blank">A DS Homebrewer's Diary</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
