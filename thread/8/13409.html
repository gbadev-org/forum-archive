<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compile ASM source? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>ASM > Compile ASM source?</h2>
<div id="posts">
<div class="post">
    <h4>#131067 - Sithviperx - Sun Jun 10, 2007 8:13 pm</h4>
    <div class="postbody"><span class="postbody">Hello everyone, please excuse my ignorance in this matter, but I'm trying to figure out how to "Compile" this ASM code into an Action Replay code.  I am also supposed to add something called "Arctan" to it, but I probably lack the technical expertise for that too.
<br/>
<br/>
There is already an AR version of the code out, but it is limited in what it can do, the source version is fully able to be used (As long as I add "Arctan").  I would post the code here, but I think thats asking a bit much of you guys to compile it for me. (Unless of course you want to do that for me)
<br/>
<br/>
A link/guide on how to do this would really be helpful as my google searches have returned nothing relevant.  
<br/>
<br/>
Thanks in advance</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131078 - Dwedit - Sun Jun 10, 2007 10:19 pm</h4>
    <div class="postbody"><span class="postbody">We can't help you if you don't post the code you need compiled.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131100 - Sithviperx - Mon Jun 11, 2007 2:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">.org $37fbacc
<br/>
ldr pc, Target
<br/>
<br/>
.org $37fbad4
<br/>
Target:
<br/>
.long 0x2000000
<br/>
<br/>
037FBACC E59FF000
<br/>
037FBAD4 02000000
<br/>
<br/>
037FBACC E3A00005 //Disabler for reloading test script
<br/>
037FBAD4 E12FFF1C
<br/>
<br/>
.org $2000000
<br/>
ldr r0, CustomStack
<br/>
stmdb r0!, {r1-r11, lr}
<br/>
sub r0, #0x4
<br/>
ldrb r3, [r0]
<br/>
sub r1, r0, #0x4
<br/>
ldr r2, [r1]
<br/>
ldr r4, IOFetch
<br/>
ldrh r4, [r4]
<br/>
and r4, r4, #0x8
<br/>
cmp r4, #0x0
<br/>
bne NoIncrement
<br/>
cmp r2, #0x1
<br/>
beq There
<br/>
add r3, #0x1
<br/>
mov r2, #0x1
<br/>
str r2, [r1]
<br/>
b There
<br/>
NoIncrement:
<br/>
mov r2, #0x0
<br/>
str r2, [r1]
<br/>
There:
<br/>
and r3, r3, #0x3
<br/>
strb r3, [r0]
<br/>
mov r2, #0xf30
<br/>
ldr r1, Who
<br/>
ldr r1, [r1]
<br/>
cmp r1, r3
<br/>
beq AimAtSelf
<br/>
mul r0, r1, r2
<br/>
mul r5, r3, r2
<br/>
ldr r4, Base
<br/>
add r5, r5, r4
<br/>
add r4, r4, r0
<br/>
ldr r8, [r4]
<br/>
ldr r9, [r5]
<br/>
sub r8, r9, r8
<br/>
ldr r9, [r4, #0x4]
<br/>
ldr r10, [r5, #0x4]
<br/>
sub r9, r10, r9
<br/>
ldr r10, [r4, #0x8]
<br/>
ldr r3, [r5, #0x8]
<br/>
sub r10, r10, r3
<br/>
ldr r2, CorrectionScalarTwo
<br/>
mov r0, #0x0
<br/>
mov r1, #0x0
<br/>
smlal r1, r0, r2, r9
<br/>
lsr r1, r1, #0x10
<br/>
lsl r0, r0, #0x10
<br/>
add r9, r0, r1
<br/>
mov r3, r8
<br/>
bl Sixteen
<br/>
mov r3, r9
<br/>
bl Sixteen
<br/>
mov r3, r10
<br/>
bl Sixteen
<br/>
b Seventeen
<br/>
Sixteen:
<br/>
and r6, r3, #0x80000000
<br/>
cmp r6, #0x0
<br/>
rsbne r3, r3, #0x0
<br/>
orr r3, r3, #0x4000
<br/>
mov r6, #0x0
<br/>
Eighteen:
<br/>
and r7, r3, #0x80000000
<br/>
cmp r7, #0x0
<br/>
bne Shift
<br/>
lsl r3, r3, #0x1
<br/>
add r6, #0x1
<br/>
b Eighteen
<br/>
Shift:
<br/>
rsb r6, r6, #0x11
<br/>
asr r8, r8, r6
<br/>
asr r9, r9, r6
<br/>
asr r10, r10, r6
<br/>
bx lr
<br/>
Seventeen:
<br/>
cmp r8, #0x0
<br/>
beq DivByZero
<br/>
and r6, r8, #0x80000000
<br/>
lsl r0, r10, #0x10
<br/>
mov r1, r8
<br/>
swi #0x90000
<br/>
mul r0, r8, r8
<br/>
ldr r1, CorrectionScalar
<br/>
ldr r2, TestOne
<br/>
mov r11, #0x6
<br/>
cmp r3, r2
<br/>
blt Divide
<br/>
lsl r11, #0x10
<br/>
eor r1, r1, r11
<br/>
lsr r11, #0x10
<br/>
add r11, #0x7
<br/>
ldr r2, TestTwo
<br/>
cmp r3, r2
<br/>
blt Divide
<br/>
lsl r11, #0x10
<br/>
eor r1, r1, r11
<br/>
lsr r11, #0x10
<br/>
add r11, #0x3
<br/>
ldr r2, TestThree
<br/>
cmp r3, r2
<br/>
blt Divide
<br/>
lsl r11, #0x10
<br/>
eor r1, r1, r11
<br/>
Divide:
<br/>
swi #0x90000
<br/>
lsl r0, r0, #0x10
<br/>
swi #0xd0000
<br/>
cmp r6, #0x0
<br/>
rsbne r0, r0, #0x0
<br/>
mov r8, r0
<br/>
DivByZero:
<br/>
mul r0, r8, r8
<br/>
mul r1, r10, r10
<br/>
add r0, r0, r1
<br/>
swi #0xd0000
<br/>
mov r1, r9
<br/>
and r6, r1, #0x80000000
<br/>
cmp r6, #0x0
<br/>
rsbne r1, r1, #0x0
<br/>
orr r11, r0, #0x4000
<br/>
mov r3, #0x0
<br/>
Nineteen:
<br/>
and r2, r11, #0x80000000
<br/>
cmp r2, #0x0
<br/>
bne Swerve
<br/>
lsl r11, r11, #0x1
<br/>
add r3, #0x1
<br/>
b Nineteen
<br/>
Swerve:
<br/>
rsb r3, r3, #0x11
<br/>
asr r0, r0, r3
<br/>
asr r1, r1, r3
<br/>
bl Arctan
<br/>
and r7, r0, #0x8000
<br/>
cmp r7, #0x0
<br/>
eorne r0, r0, #0x8000
<br/>
lsr r0, r0, #0x1
<br/>
cmp r6, #0x0
<br/>
rsbne r0, r0, #0x0
<br/>
str r0, [r4, #0x84]
<br/>
mov r0, r8
<br/>
mov r1, r10
<br/>
and r6, r0, #0x80000000
<br/>
cmp r6, #0x0
<br/>
rsbne r0, r0, #0x0
<br/>
and r7, r1, #0x80000000
<br/>
cmp r7, #0x0
<br/>
rsbne r1, r1, #0x0
<br/>
bl Arctan
<br/>
and r11, r0, #0x8000
<br/>
cmp r11, #0x0
<br/>
eorne r0, r0, #0x8000
<br/>
lsr r0, r0, #0x2
<br/>
cmp r7, #0x0
<br/>
rsbeq r0, r0, #0x0
<br/>
str r0, [r4, #0x88]
<br/>
ldr r2, [r4, #0x80]
<br/>
and r3, r2, #0x80000000
<br/>
cmp r6, r3
<br/>
beq OldTilt
<br/>
rsb r2, r2, #0x0
<br/>
OldTilt:
<br/>
str r2, [r4, #0x80]
<br/>
AimAtSelf:
<br/>
ldr r0, CustomStack
<br/>
sub r0, #0x30
<br/>
ldmia r0!, {r1-r11, lr}
<br/>
mov r0, #0x5
<br/>
ldr r12, Return
<br/>
bx r12
<br/>
CustomStack:
<br/>
.long 0x2004000
<br/>
IOFetch:
<br/>
.long 0x4000130
<br/>
Who:
<br/>
.long 0x20d9cb8
<br/>
Base:
<br/>
.long 0x20da730
<br/>
CorrectionScalar:
<br/>
.long 0x39e28
<br/>
CorrectionScalarTwo:
<br/>
.long 0x5e28
<br/>
TestOne:
<br/>
.long 0x1186e
<br/>
TestTwo:
<br/>
.long 0x20867
<br/>
TestThree:
<br/>
.long 0x41c1b
<br/>
Return:
<br/>
.long 0x37fbb2c
<br/>
<br/>
If you want the Arctan, rip it from the AR code.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Note: Not my code.  And remember there is a note beside some of the code at the top.
<br/>
<br/>
Need to compile this to Action Replay code and add "Arctan" which apparently already resides in this AR code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">E2000000 00000488
<br/>
E59F02D8 E9204FFE
<br/>
E2400004 E5903000
<br/>
E2401004 E5912000
<br/>
E59F42C4 E1D440B0
<br/>
E2044008 E3540000
<br/>
1A000005 E3520001
<br/>
0A000005 E2833001
<br/>
E3A02001 E5812000
<br/>
EA000001 E3A02000
<br/>
E5812000 E59F7294
<br/>
E5D71000 E2411001
<br/>
E1510003 AA000000
<br/>
E3A03000 E5C03000
<br/>
E3A02EF3 E59F1278
<br/>
E5911000 E0000291
<br/>
E0050293 E59F426C
<br/>
E0855004 E0844000
<br/>
E3A03000 E3A06000
<br/>
E7948006 E7959006
<br/>
E1580009 02833001
<br/>
E2866004 E356000C
<br/>
0A000000 EAFFFFF7
<br/>
E3530003 0A000083
<br/>
E59F8234 E3A09055
<br/>
E1A09409 E2899057
<br/>
E1A09409 E289902A
<br/>
E1A09409 E28990A9
<br/>
E0288009 E1A01101
<br/>
E0811008 E1D110B0
<br/>
E1A01281 E3A080AB
<br/>
E1A08608 E2888079
<br/>
E1A08208 E2888006
<br/>
E1A08408 E28880A5
<br/>
E0211008 E1510008
<br/>
1A00006C E5948000
<br/>
E5959000 E0498008
<br/>
E5949004 E595A004
<br/>
E04A9009 E594A008
<br/>
E5953008 E04AA003
<br/>
E1A03008 EB000004
<br/>
E1A03009 EB000002
<br/>
E1A0300A EB000000
<br/>
EA00000F E2036102
<br/>
E3560000 12633000
<br/>
E3833901 E3A06000
<br/>
E2037102 E3570000 
<br/>
1A000002 E1A03083
<br/>
E2866001 EAFFFFF9
<br/>
E2666011 E1A08658
<br/>
E1A09659 E1A0A65A
<br/>
E12FFF1E E0000898
<br/>
E0010A9A E0800001
<br/>
EF0D0000 E1A01009
<br/>
E2016102 E3560000
<br/>
12611000 E380B901
<br/>
E3A03000 E20B2102
<br/>
E3520000 1A000002
<br/>
E1A0B08B E2833001
<br/>
EAFFFFF9 E2633011
<br/>
E1A00350 E1A01351
<br/>
EB000044 E2007902
<br/>
E3570000 12200902
<br/>
E1A00120 E3560000
<br/>
12600000 E59FB0DC
<br/>
E24BB038 E92B000B
<br/>
E1A00800 E3A01F63
<br/>
E1A01401 E2811F86
<br/>
EF090000 E1A02000
<br/>
E8BB000B E1A01000
<br/>
E0000091 E1A01002
<br/>
EF090000 E5840084
<br/>
E1A00008 E1A0100A
<br/>
E2006102 E3560000
<br/>
12600000 E2017102
<br/>
E3570000 12611000
<br/>
EB000026 E200B902
<br/>
E35B0000 12200902
<br/>
E1A00120 E3570000
<br/>
02600000 E59FB064
<br/>
E24BB038 E92B000B 
<br/>
E1A00800 E3A01011
<br/>
E1A01601 E2811FAA
<br/>
EF090000 E1A02000
<br/>
E8BB000B E1A01000
<br/>
E0000091 E1A01002
<br/>
EF090000 E5840088
<br/>
E5942080 E2023102
<br/>
E1560003 0A000000
<br/>
E2622000 E5842080
<br/>
E59F0010 E2400030
<br/>
E8B04FFE E3A00000
<br/>
EE070F90 E12FFF1E
<br/>
02004000 04000130
<br/>
020E7900 020D9CB8
<br/>
020DA730 57595185
<br/>
E28F2001 E12FFF12
<br/>
2900B5F0 2800D106
<br/>
2000DB01 2080E049
<br/>
E0460200 D1072800
<br/>
DB022900 02002040
<br/>
20C0E03F E03C0200
<br/>
03921C02 039B1C0B
<br/>
424D4244 02362640
<br/>
29000077 2800DB1B
<br/>
4288DB0F 1C01DB06
<br/>
F0001C18 F000F82D
<br/>
E026F855 F0001C10
<br/>
F000F827 1A30F84F
<br/>
428CE01F 1C01DBF6
<br/>
F0001C18 F000F81D
<br/>
1838F845 2800E015
<br/>
42ACDC09 1C10DCF3
<br/>
F812F000 F83AF000
<br/>
1A3019F6 42A8E009
<br/>
1C01DBF5 F0001C18
<br/>
F000F807 19FFF82F
<br/>
BCF01838 4718BC08
<br/>
4718A300 E2113102
<br/>
42611000 E033C040
<br/>
22600000 E1B02001
<br/>
E15200A0 91A02082
<br/>
3AFFFFFC E1500002
<br/>
E0A33003 20400002
<br/>
E1320001 11A020A2
<br/>
1AFFFFF9 E1A01000
<br/>
E1A00003 E1B0C08C
<br/>
22600000 42611000
<br/>
E12FFF1E 4718A300
<br/>
E0010090 E1A01741
<br/>
E2611000 E3A030A9
<br/>
E0030391 E1A03743
<br/>
E2833E39 E0030391
<br/>
E1A03743 E2833C09
<br/>
E283301C E0030391
<br/>
E1A03743 E2833C0F
<br/>
E28330B6 E0030391
<br/>
E1A03743 E2833C16
<br/>
E28330AA E0030391
<br/>
E1A03743 E2833A02
<br/>
E2833081 E0030391
<br/>
E1A03743 E2833C36
<br/>
E2833051 E0030391
<br/>
E1A03743 E2833CA2
<br/>
E28330F9 E0000093
<br/>
E1A00840 E12FFF1E
<br/>
02088344 E59F0000
<br/>
02088348 E12FFF10
<br/>
0208834C 02000000</td> </tr></table><span class="postbody">
<br/>
<br/>
To clarify.  The source of this works on Wifi, the Action Replay version does not.  In order to use the source, I need to compile it and add "Arctan" by ripping it from the AR code.  I'm not asking you guys to do it for me, but some help would be appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131120 - keldon - Mon Jun 11, 2007 10:12 am</h4>
    <div class="postbody"><span class="postbody"><a href="http://nocash.emubase.de/gbatek.htm#biosfunctions" target="_blank">http://nocash.emubase.de/gbatek.htm#biosfunctions</a>
<br/>
<br/>
You can find out the <a class="postlink" href="http://en.wikipedia.org/wiki/ARM7TDMI" target="_blank">ARM7TDMI</a> opcodes; can't seem to find the link for it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131132 - tepples - Mon Jun 11, 2007 12:04 pm</h4>
    <div class="postbody"><span class="postbody">It has something to do with 'arm-eabi-as -a', right?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
