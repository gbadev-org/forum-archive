<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Unlimited tiles with Grit - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Unlimited tiles with Grit</h2>
<div id="posts">
<div class="post">
    <h4>#165719 - Chano Marrano - Mon Jan 05, 2009 2:20 pm</h4>
    <div class="postbody"><span class="postbody">Is there any way to surpass the 1024 tile limit in a map with Grit? 
<br/>
For example if flipping flags could be overwritten, tile index can be expanded to allow 4096 unique tiles (for a dynamic tile reloading map).<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165720 - eKid - Mon Jan 05, 2009 2:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chano Marrano wrote:</b></span></td> </tr> <tr> <td class="quote">(for a dynamic tile reloading map)</td> </tr></table><span class="postbody">
<br/>
Sounds scary. :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165785 - silent_code - Tue Jan 06, 2009 8:25 pm</h4>
    <div class="postbody"><span class="postbody">If you're asking to fool the hardware, then the answer is no. Anything else (a dynamic tiling background engine) would have to be written by you for your game engine.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165787 - gauauu - Tue Jan 06, 2009 8:50 pm</h4>
    <div class="postbody"><span class="postbody">I don't think he's talking about fooling the hardware.  He's talking about making a map with 4000 tiles, where his engine loads the correct tiles into vram when needed.  It sounds (I haven't messed with grit enough to confirm this) that grit only supports 1024 tiles, but he'd like it to support more to generate the tile data for his large dynamic maps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165788 - Chano Marrano - Tue Jan 06, 2009 8:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If you're asking to fool the hardware, then the answer is no. Anything else (a dynamic tiling background engine) would have to be written by you for your game engine.</td> </tr></table><span class="postbody">
<br/>
I know, I know. The problem is that if a bitmap with more than 1024 tiles is converted with Grit the program doesn't allow to overwrite the flipping flags. With gfx2gba I hadn't that problem.<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165795 - eKid - Wed Jan 07, 2009 3:06 am</h4>
    <div class="postbody"><span class="postbody">How would your system organize the data (how would grit know how to format it)? It would seem pretty messy to manage such a thing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165806 - Chano Marrano - Wed Jan 07, 2009 9:14 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">How would your system organize the data (how would grit know how to format it)?</td> </tr></table><span class="postbody"> Grit doesn't need to know any special format. It's as simple as converting tile 1024 as 0xX400 instead of 0xX000. Tile number is moduled by 1024, I only want to remove this restriction.
<br/>
<br/>
Another problem is how to manage this data on the GBA, but that's out of the question.<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165813 - kusma - Wed Jan 07, 2009 1:00 pm</h4>
    <div class="postbody"><span class="postbody">For constructing very custom maps, I've found that I'd have to write my own converters. It's not really that much of a hassle if you're using something like FreeImage, though. However, extending Grit might be a more future-proof option.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165900 - silent_code - Mon Jan 12, 2009 10:03 am</h4>
    <div class="postbody"><span class="postbody">A very contemporary name comes to mind: MegaTile ... ;^D<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165907 - DensitY - Mon Jan 12, 2009 8:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">A very contemporary name comes to mind: MegaTile ... ;^D</td> </tr></table><span class="postbody">
<br/>
<br/>
lol!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165911 - Kyoufu Kawa - Mon Jan 12, 2009 9:44 pm</h4>
    <div class="postbody"><span class="postbody">More like "jetpacks to mind" or something like that, amirite? ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165936 - Jinroh - Tue Jan 13, 2009 7:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">A very contemporary name comes to mind: MegaTile ... ;^D</td> </tr></table><span class="postbody">
<br/>
<br/>
ROFL! ^_^
<br/>
<br/>
I will also agree that you will have to write some kind of tile/scene management system.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165989 - silent_code - Thu Jan 15, 2009 6:09 pm</h4>
    <div class="postbody"><span class="postbody">X^D<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165996 - Cearn - Thu Jan 15, 2009 7:40 pm</h4>
    <div class="postbody"><span class="postbody">I masked the tile index with 0x03FF because generally it's not a good idea for bitfields to bleed into each other. However, since if you're over the tile limit, the data will have gone sour anyway, I suppose I could modify it so that it either doesn't mask at all, or only mask those bits that didn't appear in the tile-reduction options (for example, -mRtpf would use 10-bits for the tiles, but -mRtp would use 12). If you can build grit from the source, you can even make the modification yourself: it's one line in grit_tile_reduce(); the one that says "se |= jj &amp; SE_ID_MASK;". Remove the mask there and it should work.
<br/>
<br/>
Having said that, even with this change you'll need to be careful. As far as I can tell, dynamic tile loading has certain special needs. For example, you can't have something like tiles 0x0002 and 0x0402 in the same field of view because they'd both use character 2. Either the maps would have to be specifically prepared to work around those occurring, or the map engine must be able to work around that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166001 - Chano Marrano - Thu Jan 15, 2009 9:51 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, Cearn. I'll try to modify Grit next week.
<br/>
<br/>
About the tile loading thing, I think it would be a good approach to have a table of correspondence between BG tiles and tiles loaded in VRAM, and another table with the number of map entries on screen that are using each VRAM tile (a value of 0 means that a BG tile can be loaded in the VRAM tile).
<br/>
<br/>
For example, if the map is scrolled one column right, the engine would have to delete the left column that is not visible anymore (decrementing the values of the second table) and to load the new visible column at the right (incrementing the values of the second table and loading new tiles in VRAM if necessary).<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176272 - elwing - Wed Jun 08, 2011 9:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chano Marrano wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks, Cearn. I'll try to modify Grit next week.
<br/>
<br/>
About the tile loading thing, I think it would be a good approach to have a table of correspondence between BG tiles and tiles loaded in VRAM, and another table with the number of map entries on screen that are using each VRAM tile (a value of 0 means that a BG tile can be loaded in the VRAM tile).
<br/>
<br/>
For example, if the map is scrolled one column right, the engine would have to delete the left column that is not visible anymore (decrementing the values of the second table) and to load the new visible column at the right (incrementing the values of the second table and loading new tiles in VRAM if necessary).</td> </tr></table><span class="postbody">
<br/>
<br/>
That seems really costly, would be nice to see if you're able to do that...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176288 - keldon - Wed Jun 15, 2011 12:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chano Marrano wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks, Cearn. I'll try to modify Grit next week.
<br/>
<br/>
About the tile loading thing, I think it would be a good approach to have a table of correspondence between BG tiles and tiles loaded in VRAM, and another table with the number of map entries on screen that are using each VRAM tile (a value of 0 means that a BG tile can be loaded in the VRAM tile).
<br/>
<br/>
For example, if the map is scrolled one column right, the engine would have to delete the left column that is not visible anymore (decrementing the values of the second table) and to load the new visible column at the right (incrementing the values of the second table and loading new tiles in VRAM if necessary).</td> </tr></table><span class="postbody">
<br/>
<br/>
That's the sort of thing that was on on the DMG (classic gameboy), although IIRC tile data wasn't copied. But why do you need to do this with tiles, if you have no duplicates then this is essentially a giant bitmap, and if there are duplicate tiles (that can result in reduced tiles) then are you using Tonc in the right way?
<br/>
___
<br/>
&lt;<span style="font-weight: bold">edit</span>&gt;: So you could just store a giant 4-bit bitmap (presuming that's not what you were proposing), then rendering that into tile data memory.
<br/>
&lt;/edit&gt;
<br/>
---
<br/>
<br/>
The streaming could be complicated since you need both vertical and horizontal scrolling ability, so you may want to duplicate your data so that it can be streamed in all directions effectively (or is card-streaming not an issue with the sd-based file systems).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176289 - Chano Marrano - Wed Jun 15, 2011 7:58 pm</h4>
    <div class="postbody"><span class="postbody">Necropost LOL.
<br/>
<br/>
In this two years I haven't much time to work on GBA (career and work :P), and eventually I lost interest on it.
<br/>
<br/>
Whatever, what I wanted to do was to be able to show a "giant bitmap" without having to stream all tiles in a row/column, only the unduplicated ones.
<br/>
<br/>
I don't understand why I would need to duplicate any data, I think a buffer of 31x21 tiles should allow to scroll on both directions simultaneously.
<br/>
<br/>
Do you know a better approach to get this?
<br/>
<br/>
PS: sorry for my bad english u_u.<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176291 - keldon - Wed Jun 15, 2011 11:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chano Marrano wrote:</b></span></td> </tr> <tr> <td class="quote">Necropost LOL.
<br/>
<br/>
In this two years I haven't much time to work on GBA (career and work :P), and eventually I lost interest on it.
<br/>
<br/>
Whatever, what I wanted to do was to be able to show a "giant bitmap" without having to stream all tiles in a row/column, only the unduplicated ones.
<br/>
<br/>
I don't understand why I would need to duplicate any data, I think a buffer of 31x21 tiles should allow to scroll on both directions simultaneously.
<br/>
<br/>
Do you know a better approach to get this?
<br/>
<br/>
PS: sorry for my bad english u_u.</td> </tr></table><span class="postbody">
<br/>
<br/>
You can blame <span style="font-weight: bold">Yequan</span> for the necroposting. When I say duplicate, I mean identical tiles. So if you only had 1000 unique tiles, then they could all fit within the 1024 tile names.
<br/>
<br/>
You can ignore what I said about the horizontal/vertical streaming, I thought you were having a super huge bitmap (like 1028 tiles wide of something).
<br/>
<br/>
Here's a link on how to do this: <a class="postlink" href="http://devrs.com/gb/files/mapscroll.txt" target="_blank">Jason's large map scrolling</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176294 - Chano Marrano - Thu Jun 16, 2011 12:47 pm</h4>
    <div class="postbody"><span class="postbody">What I mean with the "giant bitmap" thing is to allow maps of more than 1024 unique tiles (I think it's also called dynamic tile reloading). The 31x21 tiles buffer I talked before is for VRAM.<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176295 - keldon - Thu Jun 16, 2011 2:33 pm</h4>
    <div class="postbody"><span class="postbody">Ok, and for the dynamic tile reloading it is a simple case of keeping a list of available tile names and a key-map from your original tile name to the "allocated" tile name.
<br/>
<br/>
I am curious, where exactly did you get 'stuck'? I guess the first obstacle is getting Tonc/Usent to output more than 1024 tile names, but where else would you need assistance after that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176300 - Chano Marrano - Fri Jun 17, 2011 5:46 am</h4>
    <div class="postbody"><span class="postbody">Nothing, really. As I said, I just lost interest in it because of lack of time.
<br/>
<br/>
Sorry if I make you losing your time. I suppose I should have asked moderators to close this thread two years ago.<br/>_________________<br/><a class="postlink" href="http://www.playeradvance.org/forum/showthread.php?t=19881" target="_blank">Sh*tty RPG</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176303 - gauauu - Fri Jun 17, 2011 2:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chano Marrano wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Sorry if I make you losing your time. I suppose I should have asked moderators to close this thread two years ago.</td> </tr></table><span class="postbody">
<br/>
<br/>
No, it's worth leaving threads open and buried.  We need to ask the mods to delete spammer accounts like Yequan that necro these old threads to sell crap.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
