<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Any way to combine 2(256x256) maps into 1(512x256) map? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Any way to combine 2(256x256) maps into 1(512x256) map?</h2>
<div id="posts">
<div class="post">
    <h4>#66362 - gs2phateon - Tue Jan 10, 2006 3:37 am</h4>
    <div class="postbody"><span class="postbody">At this point I have basically given up on making a 512x256 map the old-fashioned way.  I have been working on this for about 2 weeks, and my program never reads the tiles right.
<br/>
<br/>
So I'm moving on.
<br/>
<br/>
Now, I'm just trying to combine 2 smaller maps into one large, longer map.  The palette and map were very easy to do: the palette is the same for both of my maps, and the maps I could just copy and paste into one file.
<br/>
<br/>
I've answered half my question already, but that still leaves the tile sets.  Obviously, it hasn't worked to copy and paste those into the same file.  I know it's just the tiles that aren't working, because I can use either of the original tile sets for its respective map, and the other will just look funny.
<br/>
<br/>
So is there any way to load one set of tiles or one side of a map, and then use another set for the other half?  Or even better, are there any programs out there that will let me simply merge both of my sets of 8x8 tiles into one larger tileset?  Any help would be VERY appreciated, thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66364 - poslundc - Tue Jan 10, 2006 4:14 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gs2phateon wrote:</b></span></td> </tr> <tr> <td class="quote">So is there any way to load one set of tiles or one side of a map, and then use another set for the other half?</td> </tr></table><span class="postbody">
<br/>
<br/>
No, there isn't.
<br/>
<br/>
If the combined number of tiles is less than 1024, though, you can load the tilesets sequentially into VRAM and then add the correct offset to get from one tileset to the next when you specify your tile index in the map data. So if you have two tilesets, and your first tileset has 72 tiles in it, then tile 0 of the second tileset would become 72, tile 1 would be 73, etc.
<br/>
<br/>
Few games use maps larger than the 256x256 maps; they just scroll around and replace the edges of the map with new tile entries as they are reached. This works in part because the text background wrap, so that when you scroll past the right border of the map you'll start displaying tiles from the left edge, etc. Play just about any scrolling game in an emulator with the map viewer open to see how it works.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66365 - gs2phateon - Tue Jan 10, 2006 4:39 am</h4>
    <div class="postbody"><span class="postbody">But if you aren't using map bigger than 256x256, where are the new tiles being loaded from?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66366 - poslundc - Tue Jan 10, 2006 4:54 am</h4>
    <div class="postbody"><span class="postbody">The same place you load your 256x256 map from: the ROM. You just use a map larger than 256x256 and copy in the sections you need.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66370 - gs2phateon - Tue Jan 10, 2006 5:10 am</h4>
    <div class="postbody"><span class="postbody">And the tiles and the palette, how are they adjusted?  I have done something similar to this before, but I had all of the tiles made before-hand.  Do I make all of the tiles with the map too?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66381 - poslundc - Tue Jan 10, 2006 7:06 am</h4>
    <div class="postbody"><span class="postbody">You can design whatever kind of system you choose. All the GBA has a predetermined need for is the tile data and the screen data in VRAM; how you populate that data is up to you.
<br/>
<br/>
Most people write tools (such as a map editor) to convert information into a form that their program can use. If you are using someone else's tool, you'll need a way to convert and interpret its output into the correct data to display.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66480 - gs2phateon - Wed Jan 11, 2006 3:14 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the help, I got it to work, sort of.  I made the map and everything, and it could scroll a huge map tile by tile.  I wasn't using the scrolling register.  Right now I'm trying to use it so I can scroll pixel by pixel, but I'm having a hard time readjusting the position on the map, so it will just wrap around the edges.  Do you have any tips for this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66491 - poslundc - Wed Jan 11, 2006 7:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gs2phateon wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks for the help, I got it to work, sort of.  I made the map and everything, and it could scroll a huge map tile by tile.  I wasn't using the scrolling register.  Right now I'm trying to use it so I can scroll pixel by pixel, but I'm having a hard time readjusting the position on the map, so it will just wrap around the edges.  Do you have any tips for this?</td> </tr></table><span class="postbody">
<br/>
<br/>
You can scroll the VRAM map to any location on your ROM map if you bitwise-AND the x- and y-coordinates with 255 (0xFF).
<br/>
<br/>
To convert tile coordinates in the ROM map to tile coordinates to use in the VRAM map, bitwise-AND the tile coordinates with 31 (0x1F).
<br/>
<br/>
First get it working, then see if you can figure out why it works.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66510 - pure_ev1l - Wed Jan 11, 2006 2:13 pm</h4>
    <div class="postbody"><span class="postbody">I haven't read ppl's reply's just because I can't be bothered, just saw the topic and thought I would add my 2 cents as I just typed something relivant on another topic...
<br/>
<br/>
"its easy. I have only been programing for GBA for 4 days now, and I have made my own map editor with infinite size capabilities with some good tools and a gba game that can play any size map with no (visible) loading
<br/>
<br/>
all you need to do is if u move 1 tile left load a line of tiles down the left side off screen....
<br/>
<br/>
the only limittation of it is the fact that I ran out of virtual memory on my comp trying to compile a map bigger than 1024*1024 tiles....
<br/>
<br/>
but if I would have been able to compile it, it would have played.
<br/>
<br/>
if what I'm saying applies to your problem then with a slight grudge I could part with my source code for dynamic loading of an infinite map?"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66694 - gs2phateon - Fri Jan 13, 2006 12:06 am</h4>
    <div class="postbody"><span class="postbody">Yes, that is a pretty easy concept to understand, and I tried that, but I could only get it to work on a map that scrolled by tiles.  I was just having some trouble using the scroll register to scroll by pixels.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66695 - gs2phateon - Fri Jan 13, 2006 12:12 am</h4>
    <div class="postbody"><span class="postbody">I have another question, how do you "bitwise-AND the x- and y-coordinates with 255 (0xFF)"?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66698 - poslundc - Fri Jan 13, 2006 12:34 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.phim.unibe.ch/comp_doc/c_manual/C/CONCEPT/expressions.html" target="_blank">C Operators</a>
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66725 - LOst? - Fri Jan 13, 2006 5:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">Few games use maps larger than the 256x256 maps; they just scroll around and replace the edges of the map with new tile entries as they are reached. This works in part because the text background wrap, so that when you scroll past the right border of the map you'll start displaying tiles from the left edge, etc. Play just about any scrolling game in an emulator with the map viewer open to see how it works.
<br/>
<br/>
Dan.</td> </tr></table><span class="postbody">
<br/>
<br/>
There is one problem. For GBA this works because the size of the screen is 240x160. That leaves a little edge for updating new tiles. But on the DS, the screen is 256 in width. That means you need to use 512 in map size in order to get a hidden edge to update the map. I hope you understand what I mean.<br/>_________________<br/><span style="font-style: italic">Exceptions are fun</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66753 - tepples - Fri Jan 13, 2006 7:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">But on the DS, the screen is 256 in width. That means you need to use 512 in map size in order to get a hidden edge to update the map.</td> </tr></table><span class="postbody">
<br/>
That or use windowing to restrict the display to 248 pixels wide. A lot of NES games did that (notably <span style="font-style: italic">Super Mario Bros. 3</span>), and so did <span style="font-style: italic">Kirby Super Star</span> for Super NES. But the majority of horizontally scrolling games for those systems just used a 512-pixel-wide map, which was laid out as two separate map segments just as it is on the GBA and Nintendo DS.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66879 - gs2phateon - Sat Jan 14, 2006 2:07 am</h4>
    <div class="postbody"><span class="postbody">So what's the final word?  Is 512x256 any easier to use?  I also have another question.  Supposing I try to make a large scrolling map, do I have to refresh the tiles as well as the map coordinates every loop, or whenever I move the map?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66880 - poslundc - Sat Jan 14, 2006 2:16 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gs2phateon wrote:</b></span></td> </tr> <tr> <td class="quote">Is 512x256 any easier to use?</td> </tr></table><span class="postbody">
<br/>
<br/>
No.
<br/>
<br/>
The main conceivable reason to use one would be to span the entire 256 pixel width on the DS. On the GBA they are only ever useful for a small subset of special purposes that don't include general-purpose scrolling.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I also have another question.  Supposing I try to make a large scrolling map, do I have to refresh the tiles as well as the map coordinates every loop, or whenever I move the map?</td> </tr></table><span class="postbody">
<br/>
<br/>
So long as you have enough VRAM, a text background can hold up to 1024 16-colour tiles. If you are able to stay within this limit, you won't have to refresh any tiles.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67140 - gs2phateon - Sun Jan 15, 2006 9:02 pm</h4>
    <div class="postbody"><span class="postbody">Wow, I finally got it to work right!  All I basically did was have it scroll pixel by pixel using the scroll register, and every time the number of pixels scrolled equals 8, the tiles move one in the direction scrolled, and the number of pixels equals zero again.  Then it repeats until it reaches the boundary I set.  It doesn't wrap around, but I don't really need it for what I'm making.  Thanks for all your help poslundc!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
