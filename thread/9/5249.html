<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Strange Sprite size Changings??? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Strange Sprite size Changings???</h2>
<div id="posts">
<div class="post">
    <h4>#38124 - demitri - Tue Mar 22, 2005 2:06 pm</h4>
    <div class="postbody"><span class="postbody">Hey everybody,
<br/>
<br/>
I've searched the forum for a similar problem and cannot find an answer. Maybe you guys can help me out.  
<br/>
Here's my problem:
<br/>
I'm and trying to display a sprite which is WIDE  SIZE_32.  for the first tile in the set i can display it fine.  however, if i try and display the next tile in the set, it diplays as a 32X64 instead of a 16X32.  it changes automatically and i cannot figure out why.  
<br/>
any help you can give is appreciated.
<br/>
thanks,
<br/>
Demitri</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38126 - Lord Graga - Tue Mar 22, 2005 3:42 pm</h4>
    <div class="postbody"><span class="postbody">Your #defines are fucked up. Get some other ones. Read Cowbite or GBATEK for the real bits.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38128 - demitri - Tue Mar 22, 2005 4:15 pm</h4>
    <div class="postbody"><span class="postbody">I don't think it's my define's 
<br/>
Because I can display the sprites properly if i do not set the Rotation Flag.  it's only after i set the flag that the sprites change size.  I can View the sprites in VBA OEM viewer and the first tile has the correct dimensions, but the others do not. 
<br/>
-Demitri</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38133 - DiscoStew - Tue Mar 22, 2005 6:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>demitri wrote:</b></span></td> </tr> <tr> <td class="quote">I can View the sprites in VBA OEM viewer and the first tile has the correct dimensions, but the others do not. </td> </tr></table><span class="postbody">First tile? You mean the upper-left tile that is being displayed in the sprite? Of course it would show correctly, whether you are in 1D or 2D sprite mode, cause that is the way the GBA operates. If it isn't your defines, then maybe it could be more likely how you are setting the attributes for the sprites. If you say you are setting the Rotation Flag on, are you preserving what was originally in that attribute? If not, then everything for that attribute gets erased, and only the Rotation Flag is set.
<br/>
<br/>
Perhaps a little code would brighten things up for us who are trying to help you fix the problem. Sometimes words cannot totally describe what is happening in your program.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38134 - demitri - Tue Mar 22, 2005 6:56 pm</h4>
    <div class="postbody"><span class="postbody">alrighty, Here's my Initsprite function which dictates all the attributes of any given sprite. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void InitSprite(int num, int x, int y, int type, int size,int tileIndex, int needRotScale, int sdouble)
<br/>
{
<br/>
        unsigned int sprite_size =0;
<br/>
        
<br/>
        mysprites[num].alive = 1;
<br/>
        mysprites[num].size = size;
<br/>
        mysprites[num].x = x;
<br/>
        mysprites[num].y = y;
<br/>
        mysprites[num].rotate = ROTATION_FLAG;
<br/>
        mysprites[num].scale = 1 &lt;&lt; 8;
<br/>
        mysprites[num].angle = 0;
<br/>
        
<br/>
                 switch (size)
<br/>
    {
<br/>
        case 8: sprite_size = SIZE_8; break;
<br/>
        case 16: sprite_size = SIZE_16; break;
<br/>
        case 32: sprite_size = SIZE_32; break;
<br/>
        case 64: sprite_size = SIZE_64; break;
<br/>
<br/>
    }
<br/>
        
<br/>
        sprites[num].attribute2 = (tileIndex +512 );
<br/>
        
<br/>
        if( needRotScale == 1 &amp;&amp; sdouble == 1)
<br/>
        {
<br/>
            sprites[num].attribute0 = y | COLOR_256 | type | SIZE_DOUBLE | ROTATION_FLAG; 
<br/>
            sprites[num].attribute1 = x | sprite_size | ROTDATA(tileIndex + 512 + num);
<br/>
<br/>
        }else if(needRotScale ==1 &amp;&amp; sdouble == 0){
<br/>
                        sprites[num].attribute0 = y | COLOR_256 | type| ROTATION_FLAG;  
<br/>
            sprites[num].attribute1 = x | sprite_size | ROTDATA(tileIndex + 512 + num);
<br/>
<br/>
        }else if(needRotScale == 0)
<br/>
        {
<br/>
            sprites[num].attribute0 = y | COLOR_256 | type;
<br/>
            sprites[num].attribute1 = x | sprite_size;
<br/>
        }
<br/>
}
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I have used rotating sprites in other parts of my code, which work fine.  but those items are 32 &amp; 64 pixel squares.  It is only in my current section whereby i'm trying to used WIDE/TALL 32  sized scaled sprites that i run into problems.  
<br/>
Thanks 
<br/>
-Demitri</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38136 - DiscoStew - Tue Mar 22, 2005 8:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ROTDATA(tileIndex + 512 + num); </td> </tr></table><span class="postbody">
<br/>
EEEEKKKKKKK!!!!!! I believe that may be your problem.
<br/>
The ROTDATA macro is meant for specifying which of the <span style="font-weight: bold">32</span> slots of rotation data would be used on this sprite, not the tile index that is used in Attribute2. In order to take advantage of Sprite Rotation, you'll need to know how it is set up, and how the GBA processes it. I recommend looking through Cearn's tutorials found <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/index.htm" target="_blank">here</a>. If the tutorial gets confusing (as it had for me the first time), just download the source code for the app, and take a look at it. If you know how a matrix works, then you should have no problem using it.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38185 - demitri - Wed Mar 23, 2005 7:35 pm</h4>
    <div class="postbody"><span class="postbody">hahah... nice eeekk... anyways,
<br/>
I fixed the crazy (512 + tileIndex _ num) thing, and it's now works beautifully!  Thanks sooooo much.  I swear i saw something similar to it done elsewhere... but regardless, i won't blame anyone else for what is obviously an oversight on my behalf.   So thanks for your help!
<br/>
-Demitri.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
