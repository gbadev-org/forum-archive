<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Rotating Background Issue - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Rotating Background Issue</h2>
<div id="posts">
<div class="post">
    <h4>#112836 - Edelnutte - Wed Dec 20, 2006 7:37 pm</h4>
    <div class="postbody"><span class="postbody">Hi, as the title might tell you, I have a question about rotatable BG's.
<br/>
I read and understood how PA PA PB and PC affect the Background. But i can  just scale them like this: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
         /                   /
<br/>
       /                   /
<br/>
     /                   / 
<br/>
   </td> </tr></table><span class="postbody">
<br/>
<br/>
But how I want it is like this 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
         /                 \
<br/>
       /                     \
<br/>
     /                         \
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Can anyone tell me how to do that please ?????</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112843 - DekuTree64 - Wed Dec 20, 2006 8:04 pm</h4>
    <div class="postbody"><span class="postbody">The only way to do that is by changing the parameters each scanline during HBlank. The effect is usually called "mode 7", in reference to the mode on SNES that had a rotate/scale background.
<br/>
<br/>
How to actually calculate those parameters is a bit more difficult. The way I've done it before is by tracing the edges of a triangle (effectively a 2D view frustum) and setting the starting x/y to the left coordinate, and PA to (xRight - xLeft) / screenWidth, and PB to (yRight - yLeft) / screenWidth. PC and PD don't matter, since you're overwriting the current X and Y coordinates at the start of each scanline anyway.
<br/>
<br/>
I can give a better explanation later once I can check my old code, if that's not enough to go off of.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112858 - Peter - Wed Dec 20, 2006 9:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">The only way to do that is by changing the parameters each scanline during HBlank. The effect is usually called "mode 7" ...</td> </tr></table><span class="postbody">
<br/>
You can find detailed information about this in <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/mode7.htm" target="_blank">TONC: Mode 7</a> and <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/mode7ex.htm" target="_blank">TONC: More Mode7 Tricks</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112860 - Edelnutte - Wed Dec 20, 2006 10:09 pm</h4>
    <div class="postbody"><span class="postbody">Thank you both. I already looked at TONC's Tutorial but not so close since I wanted to make it all by myself. 
<br/>
So DekuTree64 did I understand you righ, by changing the parameters each HBL-Scanline I just "mix" a BG that is scaled left with one that is scaled right to achieve that effect?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112867 - tepples - Wed Dec 20, 2006 10:49 pm</h4>
    <div class="postbody"><span class="postbody">Pretty much. For each scanline, you calculate the texel coordinate of the left side of the screen and the texel coordinate of the right side. Each scanline's data then consists of texel origin (left) and step size (right - left / 240).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
