<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mapping points in perspective - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Mapping points in perspective</h2>
<div id="posts">
<div class="post">
    <h4>#11766 - Datch - Sat Oct 18, 2003 5:11 pm</h4>
    <div class="postbody"><span class="postbody">Not really limited to GBA but anyway...
<br/>
<br/>
I would like to know how to calculate the new x,y of a point when drawn in pespective.  
<br/>
<br/>
Here's a sample :
<br/>
<br/>
<a href="http://www.rene.forgues.net/pointmapping.gif">[Images not permitted - Click here to view it]</a>
<br/>
A(6,2) =&gt; A'(6,5)
<br/>
B(6,4) =&gt; B'(6,8)
<br/>
C(6,8) =&gt; C'(6,12)
<br/>
D(6,12) =&gt; D'(6,14.5)
<br/>
<br/>
It's easy to figure out this way that to every single point in the first rectangle there is a corresponding point in the perspective trapeze.  I just would like to know how to figure out the new coordinates of the points. 
<br/>
<br/>
I've made a lot of searches on Google but I can't figure out a combination of key words that will bring me a page with the answer.  So in a last attempt I'm asking you.  Any hint will be appreciated!<br/>_________________<br/>Visit SR-388 now and get a 40% discount!</span><span class="gensmall"><br/><br/>Last edited by Datch on Sat Oct 18, 2003 6:26 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#11768 - poslundc - Sat Oct 18, 2003 5:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Datch wrote:</b></span></td> </tr> <tr> <td class="quote">Not really limited to GBA but anyway...
<br/>
<br/>
I would like to know how to calculate the new x,y of a point when drawn in pespective.</td> </tr></table><span class="postbody">
<br/>
<br/>
This largely depends on what variables you are using to define perspective (angle, coordinates, etc.). Your image link is broken, and since your transformation function appears to be non-linear, it's hard to understand what you are trying to accomplish.
<br/>
<br/>
There is a good <a class="postlink" href="http://www.permadi.com/tutorial/raycast/" target="_blank">raycasting tutorial</a> that explains many of the mathematics behind calculating perspective, and although it is primarily geared to developing a Wolfenstein-style wall-mapper I still found it quite useful when developing my terrain engine.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11769 - Datch - Sat Oct 18, 2003 6:10 pm</h4>
    <div class="postbody"><span class="postbody">Hmm..  The image was fine in the preview.  Anyway, here's the link to it :
<br/>
<br/>
[url]
<br/>
<a href="http://www.geocities.com/datch78/pointmapping.gif" target="_blank">http://www.geocities.com/datch78/pointmapping.gif</a>
<br/>
[/url]
<br/>
<br/>
There is no 3d involved.  It's only mapping 2d points to a 2d plane to give a perspective illusion.<br/>_________________<br/>Visit SR-388 now and get a 40% discount!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11773 - Datch - Sat Oct 18, 2003 6:27 pm</h4>
    <div class="postbody"><span class="postbody">Image linking doesn't work on Geocities/Yahoo due to some kind of protection.  
<br/>
<br/>
I've uploaded the image somewhere else and it should be visible in the first message.<br/>_________________<br/>Visit SR-388 now and get a 40% discount!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11774 - DekuTree64 - Sat Oct 18, 2003 6:32 pm</h4>
    <div class="postbody"><span class="postbody">The image does work, you just have to copy the URL without the <a href="http://" target="_blank">http://</a> and paste it into a new window. Otherwise Geocities will know it's being linked from another site and they're mean about that.
<br/>
Unfortunately I can't really tell what the image is getting at. How exactly do you project 2D onto 2D? I know for 3D an easy way to project is to multiply your x and y by some value and divide by z. You can control the aspect ration by changing your scale values and adding to z before dividing by it. I'm no 3D expert, but I think this would change the size and distance of the projection plane.
<br/>
But what exactly are you trying to do? What sort of program is it?<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11783 - Datch - Sat Oct 18, 2003 9:39 pm</h4>
    <div class="postbody"><span class="postbody">Hi deku.  First thanks for your reply.  I'll try to explain what I want more clearly.
<br/>
<br/>
If you look at the picture, you can see that point C is centered in the first rectangle.  You can tell it is centered by drawing the two diagonales and you'll see the C point is at the intersection of the two diagonales.  So if I draw a rectangle in pespective, which gives a trapeze like in the second rectangle, I can find the exact position of the point C by drawing the two diagonales again and by putting the C' point at the intersection again.  Tada!  The point is plotted.  I can procede the same way to plot the other points and find the new positions of A', B' and D'.  By plotting many points from a rectangle to a trapeze this way you'll get a nice perspective effect.   
<br/>
<br/>
It's more image distortion than 3d.  It's exactly like the Photoshop distortion tool, if you've seen it before.  I just want to be able to do that!  :)<br/>_________________<br/>Visit SR-388 now and get a 40% discount!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11786 - DekuTree64 - Sat Oct 18, 2003 10:20 pm</h4>
    <div class="postbody"><span class="postbody">Oh, ok. I think this is what you want: <a href="http://freespace.virgin.net/hugo.elias/graphics/x_persp.htm" target="_blank">http://freespace.virgin.net/hugo.elias/graphics/x_persp.htm</a><br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
