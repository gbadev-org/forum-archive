<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Image Brightness! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Graphics > Image Brightness!</h2>
<div id="posts">
<div class="post">
    <h4>#43296 - _Dan - Sat May 21, 2005 6:34 pm</h4>
    <div class="postbody"><span class="postbody">Hello!
<br/>
<br/>
I've just started coding for my GBA and it's all very exciting but I have a problem.
<br/>
<br/>
I've wrote some code turn a bitmap into a .h file (as a C array), and it's working, however, when I use the images in my GBA program, some of the brighter areas of the graphics appear too bright...an example:
<br/>
<br/>
The original:
<br/>
<a href="http://www.freepgs.com/xzist/files/alicescreen.jpg">[Images not permitted - Click here to view it]</a>
<br/>
The GBA version:
<br/>
<a href="http://www.freepgs.com/xzist/files/alicegbascreen.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
The code I use to convert colours is:
<br/>
<br/>
unsigned short int colour = ((r&gt;&gt;3) | ((g&gt;&gt;3)&lt;&lt;5) | ((b&gt;&gt;3)&lt;&lt;10));
<br/>
<br/>
Where r,g,b are the colour componants from a 24 bitmap. And "colour" is the two byte GBA pixel.
<br/>
<br/>
Can anyone tell me why it's so bright?
<br/>
(it's not because it's in an emulator or anything is it?)
<br/>
<br/>
I am using mode 3 which I think is correct:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">    unsigned short *video = (unsigned short *)0x6000000;
<br/>
    *(unsigned long *)0x4000000 = (0x3 | 0x400); // set video mode 3 (240x160 16-bit)</td> </tr></table><span class="postbody">
<br/>
<br/>
Any help appreciated!
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43297 - tepples - Sat May 21, 2005 6:39 pm</h4>
    <div class="postbody"><span class="postbody">What types are the variables r, g, b? Remember that 'char' is signed by default on many platforms and unsigned on others; always use 'signed char' or 'unsigned char'.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43298 - sajiimori - Sat May 21, 2005 6:45 pm</h4>
    <div class="postbody"><span class="postbody">Looks fine to me.  It might be the way you're reading the 8-bit color components from the image, so let's have a look at that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43299 - _Dan - Sat May 21, 2005 6:45 pm</h4>
    <div class="postbody"><span class="postbody">Yes, that was it. It's working beautifully now, thanks very much :-)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
