<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Converting sprite. Fixed - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Converting sprite. Fixed</h2>
<div id="posts">
<div class="post">
    <h4>#91247 - psycorpse - Wed Jul 05, 2006 5:16 pm</h4>
    <div class="postbody"><span class="postbody">I have been messing around with this graphic and I am having no luck displaying it on the screen. The image that I have converted is 128x128 and I know that it will take 4 entries to display it but I they come out scrambled. I have used the GraphicsConverter for OS X and I have used gfx2gba for windows. No luck either way. I also used flags so that it would convert to 8x8 tiles. Any help would be great. Maybe I just need to save it to a different format but I figured I would come here first. 
<br/>
<br/>
<a href="http://webpages.charter.net/psycorpse/images/face1.gif">[Images not permitted - Click here to view it]</a>
<br/>
Thanks,
<br/>
Mike</span><span class="gensmall"><br/><br/>Last edited by psycorpse on Thu Jul 06, 2006 5:49 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#91252 - tepples - Wed Jul 05, 2006 5:51 pm</h4>
    <div class="postbody"><span class="postbody">What options are you passing to the converter? How "scrambled" is it appearing (screenshot please)? Can you provide the binary output file for me to look at in my tile editor?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91253 - naleksiev - Wed Jul 05, 2006 6:09 pm</h4>
    <div class="postbody"><span class="postbody">Maybe you just didn't set the correct tiles arrangment 1D or 2D?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91254 - psycorpse - Wed Jul 05, 2006 6:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">What options are you passing to the converter? How "scrambled" is it appearing (screenshot please)? Can you provide the binary output file for me to look at in my tile editor?</td> </tr></table><span class="postbody">
<br/>
<br/>
Here is my binary: 
<br/>
<a class="postlink" href="http://webpages.charter.net/psycorpse/Homebrew_Holdem.nds" target="_blank">Homebrew Holdem</a>
<br/>
<br/>
Here is my screenshot:
<br/>
<a class="postlink" href="http://webpages.charter.net/psycorpse/images/dualis01.bmp" target="_blank">Screenshot</a>
<br/>
<br/>
This is the command that I used to convert.
<br/>
gfx2gba -c256 -t8 -pSpritePal.bin face1.gif 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>naleksiev wrote:</b></span></td> </tr> <tr> <td class="quote">Maybe you just didn't set the correct tiles arrangment 1D or 2D?</td> </tr></table><span class="postbody">
<br/>
<br/>
I have set DISPLAY_SPR_1D</span><span class="gensmall"><br/><br/>Last edited by psycorpse on Wed Jul 05, 2006 6:44 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#91256 - psycorpse - Wed Jul 05, 2006 6:18 pm</h4>
    <div class="postbody"><span class="postbody">***NOTE***
<br/>
<br/>
I believe that the .nds file there is set to use 16 colors and not 256 but it is still the same issue. I was trying all sorts of things to get this to work. Im out to lunch. Be back in a few minutes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91339 - psycorpse - Thu Jul 06, 2006 3:27 pm</h4>
    <div class="postbody"><span class="postbody">Ok. I have changed some code around however I am still having some issues. I have again converted the image from .gif to .bmp and ran it through gfx2gba with -c256 -t8 -pSpritePal.bin *.bmp. I have added that to the data folder and have added the proper include files. Here is the new screenshot. I want to think it has something to do with the converting process but who am I to say that. HEH. 
<br/>
<br/>
<a class="postlink" href="http://webpages.charter.net/psycorpse/dualis00.bmp" target="_blank">Updated Screenshot</a>
<br/>
<br/>
I am also posting my code as well just to make sure that I am not doing anything wrong.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// Setup VRAM
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG_0x6000000, VRAM_B_MAIN_BG_0x6020000,
<br/>
                VRAM_C_SUB_BG_0x6200000, VRAM_D_LCD);
<br/>
   
<br/>
   // Setup Sprite VRAM
<br/>
   vramSetBankE(VRAM_E_MAIN_SPRITE);
<br/>
   
<br/>
   // SetVideo
<br/>
   videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE | DISPLAY_SPR_ACTIVE | DISPLAY_SPR_1D);
<br/>
   videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   // copy the sprite palette
<br/>
   dmaCopy(SpritePal_bin, SPRITE_PALETTE, SpritePal_bin_size);
<br/>
   
<br/>
   // copy the graphics
<br/>
   dmaCopy(face1_bin, SPRITE_GFX, face1_bin_size);
<br/>
   
<br/>
   // Display the sprite
<br/>
   spriteEntry[0].attribute[0] = ATTR0_COLOR_256 | ATTR0_ROTSCALE_DOUBLE | 10; // y
<br/>
   spriteEntry[0].attribute[1] = ATTR1_ROTDATA(0) | ATTR1_SIZE_64 | 10; // x 
<br/>
   spriteEntry[0].attribute[2] = 0;
<br/>
   
<br/>
   spriteEntry[1].attribute[0] = ATTR0_COLOR_256 | ATTR0_ROTSCALE_DOUBLE | 10; // y
<br/>
   spriteEntry[1].attribute[1] = ATTR1_ROTDATA(0) | ATTR1_SIZE_64 | 74; // x 
<br/>
   spriteEntry[1].attribute[2] = 32;
<br/>
   
<br/>
   // Display the sprite
<br/>
   spriteEntry[2].attribute[0] = ATTR0_COLOR_256 | ATTR0_ROTSCALE_DOUBLE | 74; // y
<br/>
   spriteEntry[2].attribute[1] = ATTR1_ROTDATA(0) | ATTR1_SIZE_64 | 10; // x 
<br/>
   spriteEntry[2].attribute[2] = 64;
<br/>
   
<br/>
   spriteEntry[3].attribute[0] = ATTR0_COLOR_256 | ATTR0_ROTSCALE_DOUBLE | 74; // y
<br/>
   spriteEntry[3].attribute[1] = ATTR1_ROTDATA(0) | ATTR1_SIZE_64 | 74; // x 
<br/>
   spriteEntry[3].attribute[2] = 128;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91356 - psycorpse - Thu Jul 06, 2006 5:51 pm</h4>
    <div class="postbody"><span class="postbody">I needed to add -t8 -T64 for 64pixel tiles. I also added -F just incase it was looking for flipped tiles. Just an FYI</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
