<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Background mode functions - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Background mode functions</h2>
<div id="posts">
<div class="post">
    <h4>#176985 - blessingta@hotmail.co.uk - Wed Nov 16, 2011 5:39 pm</h4>
    <div class="postbody"><span class="postbody">hi 
<br/>
<br/>
Where are these functions in devkitpro and what do they so?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">SetMode(MODE_4 | BG2_ON);
<br/>
//what is screen mode and why is mode_4 chosen in one of the pcx 
<br/>
//background examples?
<br/>
<br/>
//And secondly, I'm thinking BG2_ON is the background layer chosen 
<br/>
//(the third from the front) is this write?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">DecodePCX(splash_pcx, (u16*)VRAM, PaletteBuffer);
<br/>
<br/>
//With this I was thinking that this was obviously the function
<br/>
//used to load the data from the makefile. 
<br/>
//VRAM would be the OAM sprite holder used to describe how we output the stuff onto screen isn't ?
<br/>
<br/>
// And finally the palletebuffer isÂ  where the splash image is loaded is loaded.</td> </tr></table><span class="postbody">
<br/>
<br/>
Am I on the write lines? Plus where can I find code that demonstrates various areas/ways of sprite loading?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176989 - elhobbs - Wed Nov 16, 2011 6:46 pm</h4>
    <div class="postbody"><span class="postbody">no, you do not appear to be on the right lines. This looks like a bitmap mode example. what is wrong with the examples installed with devkitpro?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178352 - guybrushthreepwood - Wed Mar 25, 2015 5:31 am</h4>
    <div class="postbody"><span class="postbody">Okay, first of all, SetMode is defined to set the value of a register to a certain value. Certain bits hold certain information and that's what the MODE_X and BGX_ON set when binary or'ed together. 
<br/>
<br/>
Mode 3 holds the entire 240 x 160 data as 16-bit values for each pixel and stores the color directly. The disadvantage is that any changes you make are displayed right away and making large changes to the screen can result in taring.
<br/>
<br/>
Mode 4 holds the data as 8-bit values corresponding to a palette array of 256 colors (which can have the same depth, but you only get 256 of them). Note that you can still only write to vram 16 bits at a time so binary operators are needed. In other words, values representing 2 pixels are double-packed.
<br/>
<br/>
This allows mode 4 to hold 2 screens worth of data, so the concept is that you write to one side of vram which isn't currently visible, then change which side is being read from, then write to the other side, etc. This prevents taring and is called page flipping.
<br/>
<br/>
Mode 5 is like mode 3 but with reduced resolution. It looks bad. No one uses it.
<br/>
<br/>
Modes 0,1,2 are tiled modes. Whole other topic.
<br/>
<br/>
Hard to explain what to do until you learn how mode 4 works. I'd recommend learning tutorials. In practicality, usually tiles are used and there is learning involved in those modes as well.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178354 - AntonioND - Wed Mar 25, 2015 7:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>guybrushthreepwood wrote:</b></span></td> </tr> <tr> <td class="quote">Mode 5 is like mode 3 but with reduced resolution. It looks bad. No one uses it.</td> </tr></table><span class="postbody">
<br/>
That's not true, some 3D games and demos use mode 5. They scale the BG to fill the whole screen. It's a good idea to be able to draw polygons faster.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178355 - elhobbs - Thu Mar 26, 2015 12:21 am</h4>
    <div class="postbody"><span class="postbody">I assumed this post was spam as it is responding to a 4 year old thread...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178357 - SimonB - Thu Mar 26, 2015 4:40 pm</h4>
    <div class="postbody"><span class="postbody">There was a new spam post before guybrushthreepwood posted. After the spam was deleted it does indeed look like guybrushthreepwood bumped the thread...but he/she didn't :=)
<br/>
<br/>
Simon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178358 - DekuTree64 - Thu Mar 26, 2015 7:55 pm</h4>
    <div class="postbody"><span class="postbody">The trick to mode 5 is that the width of the usable area is equal to the height of the screen. It's designed to be rotated 90 degrees and then scaled so the pixels are doubled horizontally. Still pretty ugly, but at least it's consistent. Also has the interesting effect of making it so sequential pixels in memory go in the up/down direction rather than left/right. 
<br/>
<br/>
You can also do basically the same style of double buffering with normal horizontal addressing, by using mode 3 and scaling so the pixels are doubled horizontally. Then only draw to one half of the screen each frame, using whichever is currently offscreen as the back buffer, and change the scroll register to "flip" :)<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
