<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Understanding .pal.c, .raw.c, .map.c - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Understanding .pal.c, .raw.c, .map.c</h2>
<div id="posts">
<div class="post">
    <h4>#9090 - RaBBi - Mon Jul 28, 2003 12:06 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
Like nobody seems to have a script to export map/tiles from TileStudio, I'll try this week to code my own. 
<br/>
<br/>
This script will export map/tiles/palette/bounds/layers data from TileStudio to a .c file that HAM can use in this functions, for example. 
<br/>
<br/>
I hope I'll manage to. 
<br/>
<br/>
But I'd need to know how the .pal.c, raw.c and map.c (created by gfx2gba) are structured, and how arrays entries are corresponding between us.
<br/>
<br/>
If someone can give me a brief explantation, I'll win some time ^^
<br/>
<br/>
Also If someone is interested in doing it with me, here comes my msn : <a href="mailto:rabbikimto@hotmail.com">rabbikimto@hotmail.com</a>
<br/>
<br/>
I'll post my result here when finished. 
<br/>
<br/>
<br/>
Good week to all of you ! lol<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9097 - niltsair - Mon Jul 28, 2003 3:04 pm</h4>
    <div class="postbody"><span class="postbody">I did one some time ago, but lost it amidst Windows reformat :-p
<br/>
<br/>
You'll need to use the 'tiny tiles' option in the export. 
<br/>
<br/>
As for the format, you don't need the '.raw" or '.pal" export, those are just the binaries values of the palettes and tiles and if some people want to use that format, then a separate export file should be created.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9105 - RaBBi - Mon Jul 28, 2003 4:16 pm</h4>
    <div class="postbody"><span class="postbody">yeah I know it (tiny tiles....) niltsair :)
<br/>
<br/>
In fact I have a .tsd used for the "DirectGBA" librabry (from a french comptatriot author ^^), but it seems to not be adapted to HAM unlike the file generated by gfx2gba.
<br/>
<br/>
So I would like to find a way to create an unique .c file, with info about palette, tiles and map, plus layers/bounds and other.
<br/>
<br/>
But I need to understand the values in the array entries of pal/tiles/map from gfx2gba files.
<br/>
<br/>
Did you fint it difficult to code the script ?<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9106 - niltsair - Mon Jul 28, 2003 4:33 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, i found out about Tile Studio from that french guy's tutorial too ;-)
<br/>
<br/>
Mmm, not to difficult, I mostly builded it out of the DirectGba tutorial one and others export files examples from tile studio to get myself started.
<br/>
<br/>
A trick I used for sprites exports, was to actually build a map of your sprites, so they get exported in the order you wanted them.
<br/>
<br/>
There was some options that i found lacking that i think they added, in particular the detection of flipped tiles (instead of the creation of a new one) and layer support. But overall, i think that this is a very nice program, the best i've used so far for tiles creation.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9114 - RaBBi - Mon Jul 28, 2003 5:45 pm</h4>
    <div class="postbody"><span class="postbody">yeah I find it good too
<br/>
and I want to take the more power of it I can ^^
<br/>
<br/>
did you still use this soft ?
<br/>
<br/>
In fact, for the moment, I don't manage to identify what are the difference between what is generated by TileStudio (from french guy's .tsd) and what is generated by gfx2gba.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9117 - niltsair - Mon Jul 28, 2003 5:59 pm</h4>
    <div class="postbody"><span class="postbody">gfx2gba only generate arrays of data while the other export, generate the arrays of data and code to initialize structure containing info about them tiles and map, that he use in his library.
<br/>
<br/>
Right now i'm working on a raycast engine so i don't use it. But when i go back to working with tiles, i'll get around writing an export file again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9118 - RaBBi - Mon Jul 28, 2003 6:11 pm</h4>
    <div class="postbody"><span class="postbody">yeah I know for the structures, but it's not really the matter.
<br/>
Perhaps I will use the defined, but I think I'd use the ones I'd create ^^
<br/>
<br/>
In fact, it seems that the arrays in gfx2gba files and the arrays in the TS Exporter aren't similar.
<br/>
<br/>
So I wanted to know if they store the information (tiles, maps) by the same way.
<br/>
Cos when I put pointers to my tile array or map array in HAM functions, the result is too weird...<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9119 - niltsair - Mon Jul 28, 2003 6:15 pm</h4>
    <div class="postbody"><span class="postbody">I don't know about the specific format used by Ham, but you can see the format expected by the GBA on pern project or the french guy tutorial. Ham might expect a structutre that contains info about the Maps/Tiles which contains a pointer to the actual data.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9120 - RaBBi - Mon Jul 28, 2003 6:28 pm</h4>
    <div class="postbody"><span class="postbody">yes
<br/>
but like I said, structures doesn't matter for the moment.
<br/>
<br/>
If I know how is stored and how are linked the array of tiles and map and palette in gfx2gba files, which works in ham, whithout any structures defined in gfx2gba files,
<br/>
so if I know that and if I can re-create/generate the same information with the TS exporter, my arrays will be working on HAM too.
<br/>
<br/>
won't they ? ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9122 - niltsair - Mon Jul 28, 2003 6:38 pm</h4>
    <div class="postbody"><span class="postbody">It should, like i said I never used Ham.
<br/>
<br/>
But gfx2gba generates GBA specific code, so by having this format (gba format) you should be fine :
<br/>
<br/>
-Palette : 256 u16 entries representing each colors.
<br/>
-Tiles    : 8x8 u8 entries containing the index of the color used
<br/>
-Map     : 32x32 u16 entries containing : 
<br/>
............................... bits 0-9: Tile number
<br/>
............................... bit 10: Horizontal flip flag
<br/>
............................... bit 11: Vertical flip flag
<br/>
<br/>
<br/>
This is for 256colors mode, and a 256x256 map.
<br/>
<br/>
When using the tiles values in your program, you need to cast it to u16.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9127 - Geno - Mon Jul 28, 2003 10:56 pm</h4>
    <div class="postbody"><span class="postbody">Actually, I believe the latest version of TileStudio contains a file for exporting for the GBA format.<br/>_________________<br/>Out of Order.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9128 - RaBBi - Mon Jul 28, 2003 11:00 pm</h4>
    <div class="postbody"><span class="postbody">THANK U NILTSAIR !
<br/>
<br/>
The info that I was missing was the map format ^^
<br/>
<br/>
So can I paste some code generated by the french export script here ?
<br/>
And you should tell me if it's gba-formated, cause I suppose it doesn't.
<br/>
<br/>
<br/>
Geno&gt;Yes the lastest version has an export script for GBA, but it seems to be in ASM ;)
<br/>
(I say "it seems" cause I'm not familiar with ASM yet)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9154 - niltsair - Tue Jul 29, 2003 2:46 pm</h4>
    <div class="postbody"><span class="postbody">It was GBA format.
<br/>
<br/>
You basicly only needed to keep the code producing arrays. The rest was code to initialize structure containing infos about the Tiles/Maps and some boundaries maps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9176 - RaBBi - Tue Jul 29, 2003 11:19 pm</h4>
    <div class="postbody"><span class="postbody">ok niltsair
<br/>
<br/>
but that was what I do the first and ham doesn't seems to understand data array that I put in function parameters.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
