<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>how to convert  an RGB value to a color palette value - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Graphics > how to convert  an RGB value to a color palette value</h2>
<div id="posts">
<div class="post">
    <h4>#41763 - kouky - Sun May 01, 2005 7:07 pm</h4>
    <div class="postbody"><span class="postbody">Could someone give me a formula to convert  a rgb value
<br/>
(between 0,0,0 to 255,255,255) into a color value used by the gba ( between 0000 to 7fff).
<br/>
<br/>
I searched by myself all the afternoon, but can't resolve it.
<br/>
<br/>
Thank you</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41778 - DekuTree64 - Sun May 01, 2005 9:17 pm</h4>
    <div class="postbody"><span class="postbody">8-bit RGB (255,255,255) is rrrrrrrrggggggggbbbbbbbb, and GBA's 5-bit BGR (31,31,31) is 1bbbbbgggggrrrrr. To convert, separate out the colors, shift them down, and put them back together.
<br/>
<br/>
Generally it's more normal to make macros that take the colors in RGB order and put them together as BGR, so I've named mine RGB15.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   // Shift the component you want into the 
<br/>
   // bottom 8 bits, and mask off the rest
<br/>
#define RGB_R(color)    (((color) &gt;&gt; 16) &amp; 0xff)
<br/>
#define RGB_G(color)    (((color) &gt;&gt; 8) &amp; 0xff)
<br/>
#define RGB_B(color)    ((color) &amp; 0xff)
<br/>
<br/>
   // Put 5-bit (0,31) values together in GBA's BGR order
<br/>
#define RGB15(r, g, b)  ((r) | ((g) &lt;&lt; 5) | ((b) &lt;&lt; 10)
<br/>
<br/>
   // Shift each component down by 3 bits 
<br/>
   // to get from 8-bit to 5-bit
<br/>
#define RGB8_TO_RGB15(color)   RGB15( RGB_R(color)&gt;&gt;3, RGB_G(color)&gt;&gt;3, RGB_B(color)&gt;&gt;3 )</td> </tr></table><span class="postbody"><br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
