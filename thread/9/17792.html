<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>stoping the ghost effect in animation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > stoping the ghost effect in animation</h2>
<div id="posts">
<div class="post">
    <h4>#177096 - blessingta@hotmail.co.uk - Sat Dec 10, 2011 5:21 pm</h4>
    <div class="postbody"><span class="postbody">how do I stop GBA from not clearing my animations once they are finished? So far I've tried using these two functions:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void clear_sprites()
<br/>
{
<br/>
//Max x = 230,MAx y = 150;
<br/>
int i_x_sp = 0, i_y_sp = 0;
<br/>
for (i_y_sp = 0;i_y_sp &lt; 150 ;i_y_sp++ )
<br/>
{
<br/>
for (i_x_sp = 0;i_x_sp &lt; 230 ;i_x_sp++ )
<br/>
{
<br/>
psMy_OAM_Sprites16[0 * 4 + 0] = ((0&lt;&lt;14)|(0&lt;&lt;7)|(i_y_sp&lt;&lt;0));
<br/>
psMy_OAM_Sprites16[0 * 4 + 1] = ((0&lt;&lt;14)|(0&lt;&lt;13)|(0&lt;&lt;12)|(0&lt;&lt;8)|(i_x_sp&lt;&lt;0));
<br/>
psMy_OAM_Sprites16[0 * 4 + 2] = ((0&lt;&lt;12)|(0&lt;&lt;10)|(0&lt;&lt;8)|(0&lt;&lt;0));
<br/>
psMy_OAM_Sprites16[0 * 4 + 3] = 0; 
<br/>
<br/>
}
<br/>
}
<br/>
}
<br/>
<br/>
<br/>
void clear_screen()
<br/>
{
<br/>
int i= 0, j= 0;
<br/>
for (i = 0; i &lt; 20 ;i++)
<br/>
{
<br/>
if (j &gt;= 30 &amp;&amp; i &lt; 20) //go to a new line when, we running out of line space 
<br/>
{j = 0; i++;} 
<br/>
//clear fonts with blank space
<br/>
usMemPtr[(i*32) + j] = ((0 &lt;&lt;12)|(0 &lt;&lt; 11)|(0 &lt;&lt;10)|(32 &lt;&lt; 0));
<br/>
j++;
<br/>
}
<br/>
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177097 - blessingta@hotmail.co.uk - Sat Dec 10, 2011 5:27 pm</h4>
    <div class="postbody"><span class="postbody">this is how i render my sprites
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
void bluecircle_sprites(int i_x_sp,int i_y_sp, int oam_pos)
<br/>
{//2x2 size
<br/>
//priority = layer 0
<br/>
if (!(oam_pos &gt; 9 &amp;&amp; oam_pos &lt; 19))
<br/>
{oam_pos = 10;}
<br/>
int i_layer = 0;
<br/>
<br/>
int i_sprite_shape = 0,i_sprite_size = 1; 
<br/>
int pallete = 2;//change pallette 
<br/>
///////////////////////////////////////
<br/>
///////////ANIMATE_SPRITE/////////////
<br/>
static int sprite_reference;//1;
<br/>
sprite_reference += 4;
<br/>
if (sprite_reference &gt; 9) //9 is the largest sprite
<br/>
{sprite_reference = 1;} //restart frame (loop)
<br/>
///////////////////////////////////////
<br/>
<br/>
   psMy_OAM_Sprites16[oam_pos * 4 + 0] = ((i_sprite_shape&lt;&lt;14)|(0&lt;&lt;7)|(i_y_sp&lt;&lt;0));
<br/>
    psMy_OAM_Sprites16[oam_pos * 4 + 1] = ((i_sprite_size&lt;&lt;14)|(0&lt;&lt;13)|(0&lt;&lt;12)|(0&lt;&lt;8)|(i_x_sp&lt;&lt;0));
<br/>
    psMy_OAM_Sprites16[oam_pos * 4 + 2] = ((pallete&lt;&lt;12)|(i_layer&lt;&lt;10)|(0&lt;&lt;8)|(sprite_reference&lt;&lt;0));
<br/>
    psMy_OAM_Sprites16[oam_pos * 4 + 3] = 0; 
<br/>
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177100 - Miked0801 - Sat Dec 10, 2011 6:43 pm</h4>
    <div class="postbody"><span class="postbody">Interrupt management.  Clear and redraw your OAMs in VBlank.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
