<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>256 Colors, only getting 21 or so. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > 256 Colors, only getting 21 or so.</h2>
<div id="posts">
<div class="post">
    <h4>#6182 - Daedro - Mon May 19, 2003 4:22 am</h4>
    <div class="postbody"><span class="postbody">I know this is a very newbie question, but Im tired and enoyed.
<br/>
<br/>
I have an image, its in 256 colors format. It has about 112 colors. Only about 21 or so colors are showing up and I get a very unblended image.
<br/>
<br/>
I know it is something with my coding, becuase it looks fine before I convert it into c. Also I have seen real-life pictures on gba with what looks like more than 256 colors, so what am I doing wrong?
<br/>
<br/>
I have         </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">REG_BG0CNT = BG_COLOR_256 | TEXTBG_SIZE_256x256 | (31 &lt;&lt; SCREEN_SHIFT) | WRAPAROUND;</td> </tr></table><span class="postbody">
<br/>
thats the only thing to define the color setting, but that doesnt matter becuase even in 16 color i can get 256 color.. what is going on.. 
<br/>
<br/>
I also have:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">        SetMode(MODE_0 | BG0_ENABLE | BG1_ENABLE);</td> </tr></table><span class="postbody">
<br/>
if it helps any.
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6183 - niltsair - Mon May 19, 2003 4:42 am</h4>
    <div class="postbody"><span class="postbody">Perhaps if you showed us the code you use to load your palette.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6189 - Daedro - Mon May 19, 2003 8:12 am</h4>
    <div class="postbody"><span class="postbody">Here:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void PlotBG()
<br/>
{ 
<br/>
   u16* bg0map =(u16*)ScreenBaseBlock(31);
<br/>
   BlitBG(bg0map,testMap.layers[0].data, testMap.layers[0].w,0,0);
<br/>
}
<br/>
<br/>
int main()
<br/>
{
<br/>
    int x=0,y=0;
<br/>
<br/>
   u16* bg0map =(u16*)ScreenBaseBlock(31);
<br/>
<br/>
        REG_BG0CNT = BG_COLOR_256 | TEXTBG_SIZE_256x256 | (31 &lt;&lt; SCREEN_SHIFT) | WRAPAROUND;
<br/>
<br/>
        SetMode(MODE_0 | BG0_ENABLE | BG1_ENABLE);
<br/>
<br/>
   //now we use aour DMA copy rotuine to copy in the palette
<br/>
   DMA_Copy(3,(void*)testMap.pal,(void*)BGPaletteMem,256,DMA_16NOW);
<br/>
<br/>
   //now we copy in the tile data
<br/>
   DMA_Copy(3,(void*)testMap.tiledata,(void*)CharBaseBlock(0),testMap.tileDataSize/4,DMA_32NOW);
<br/>
<br/>
        BlitBG(bg0map,testMap.layers[1].data, testMap.layers[0].w,0,0);
<br/>
<br/>
        while(1)
<br/>
   {
<br/>
<br/>
        while(!(REG_DISPSTAT &amp; 1)); //wait for vblank to start
<br/>
<br/>
        if(!(*KEYS &amp; KEY_START)) //hittem up
<br/>
   
<br/>
        {
<br/>
           PlotBG(); // my border referal
<br/>
        }
<br/>
        
<br/>
        while((REG_DISPSTAT &amp; 1));
<br/>
        
<br/>
        }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It is probably how its being setup.. before i loaded a palette and then data, i have an extra in here now and it gets bad. I am using the basic map editor that thepernproject suggests.. is outputs like: testMap.layers[1].data
<br/>
<br/>
Its a strange one.. or maybe its seems like that because I move around to different ways or formatting a lot lately. I use own map editor, no fliping or selecting mulitple tiles... another doesnt export to c, ect ect ect. Anyone suggest a very nice map editor?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
