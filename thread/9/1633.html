<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprites in tiles - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Sprites in tiles</h2>
<div id="posts">
<div class="post">
    <h4>#8326 - RaBBi - Tue Jul 08, 2003 1:33 pm</h4>
    <div class="postbody"><span class="postbody">Hello everybody ^^
<br/>
<br/>
Firstable I'd like to say sorry for my poor English.
<br/>
I'm a french newbie on GBA dev, but I'll try to explain my problems by the clearest way ^^
<br/>
<br/>
So, that's the number one lol
<br/>
<br/>
My aim is to animate sprite.
<br/>
So I found a tuto on it in the samples directory of vham (yes I use this IDE with Ham, I forget to precise ;-)).
<br/>
But the bmp used is buggy...but it's a 16x192 (16x16x12) tiles bmp I suppose.
<br/>
<br/>
So I do my own bmp with 32x384 (32x32x12), with the same disposition as the bmp use in tuto, aka 3 Up, 3 Right, 3 Down,  3 Left.
<br/>
<br/>
Then I used gfx2gba (both version to try -_-) to generate my .c files.
<br/>
<br/>
Then, in the code, I load the palette, then create object sprite with ham command.
<br/>
Something like that :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
ham_CreateObj((void*) &amp;eikishi[32*32],0,2,etc....)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The 32*32 is to target the up-center position of the sprite.
<br/>
<br/>
But finally, after building....my sprite looks very weird...
<br/>
One line blank, one line with some pixel, one line blank...
<br/>
<br/>
I don't know if this came from a bad switches in gfx2gba...
<br/>
<br/>
Can you help me ?
<br/>
Perhaps I don't understand the array structure or the concept of number of bits for a image...
<br/>
I'm desappointed, but no hopeless ! ^^
<br/>
<br/>
(I'm in mode 1, but I think the mode is not a problem with sprite?)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8332 - Cyberman - Tue Jul 08, 2003 3:41 pm</h4>
    <div class="postbody"><span class="postbody">Lots of things could be wrong here. I am no expert with gfx2gba, as I use my own utilities to convert things now.  I would first inspect the sprite data yiou are loading.
<br/>
<ul>
<br/>
Check the C code that was generated for your sprite to see if the pixel pattern looks right.
<br/>
Check to see if you are loading the right data to begin with.
<br/>
Be SURE your data is TILED, and not linear the GBA can store sprite data 2 ways one is 8x8 tiles the other is 8x8 adjacent tiles.  All of them though are 8x8 tiles.
<br/>
BE sure you are using the right palette and that you are using the right number of colors. IE 16 or 256 colors and select the proper palette to be sure.
<br/>
</ul>
<br/>
For animating the sprite you will need to reload the graphics at strategic intervals as well.  However seeing it first might be a better place to start ;)
<br/>
<br/>
Cyb</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8333 - RaBBi - Tue Jul 08, 2003 3:47 pm</h4>
    <div class="postbody"><span class="postbody">Thank U Cyb ^^
<br/>
<br/>
I think the problem comes from this :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cyberman wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Be SURE your data is TILED, and not linear the GBA can store sprite data 2 ways one is 8x8 tiles the other is 8x8 adjacent tiles. All of them though are 8x8 tiles.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
How can I verify this difference ? (in my C code)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8336 - niltsair - Tue Jul 08, 2003 5:04 pm</h4>
    <div class="postbody"><span class="postbody">A quick and painless way would be to create a 8x16 bitmaps. Put every even(pair) lines in one color, and odd(impair) line in another color. Generate your .c file. 
<br/>
<br/>
<span style="font-weight: bold">If the resulting array is :</span>
<br/>
Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1 .... (16color 0 then 16 color 1)
<br/>
<br/>
Then it's not converting right.
<br/>
<br/>
<span style="font-weight: bold">Else, if it's :</span>
<br/>
Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 0, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, Color 1, .... (8 color 0 then 8 color 1)
<br/>
<br/>
Then the conversion is right.
<br/>
<br/>
Basicly, you need the data to be divided in 8x8 chunks and not just one big picture.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8337 - RaBBi - Tue Jul 08, 2003 5:09 pm</h4>
    <div class="postbody"><span class="postbody">ok thanks, I'll try to test it ^^
<br/>
<br/>
Can someone look at the sample "vham_obj_anim" to see what's wrong with the bitmap et how the guy did, cause it's bitmap is not composed by 8x8 tiles ?
<br/>
<br/>
EDIT: It's ok ^^
<br/>
Like I was thinking to, it's a bad gfx2gba switch, I must use -t8 for tile size.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
