<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>yeti3d hangs - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > yeti3d hangs</h2>
<div id="posts">
<div class="post">
    <h4>#15601 - cesium - Mon Jan 26, 2004 12:46 am</h4>
    <div class="postbody"><span class="postbody">The awesome yeti3d team wrote:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">NOTE: There is a GBA timer bug that causes the engine to freeze after ~2 minutes. The bug has been fixed and I'll upload a new demo soon. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
I am finding that the demos created using the GPL'd code also hang
<br/>
after about 2 minutes.
<br/>
<br/>
Does anyone else have a problem with yeti3d hanging?
<br/>
Will the fix be rolled into the GPL code?
<br/>
<br/>
Cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15602 - Tim - Mon Jan 26, 2004 12:50 am</h4>
    <div class="postbody"><span class="postbody">I couldn't get the Temple demo to work on my flashcard for some reason, I just got a black screen.
<br/>
<br/>
I think they've got rid of the bug which hangs it when you press Select, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15603 - cesium - Mon Jan 26, 2004 2:40 am</h4>
    <div class="postbody"><span class="postbody">The hang when pressing select is not really a bug. This is the main loop:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">  while (!yeti.keyboard.select)
<br/>
  {
<br/>
    &lt;code removed for brevity&gt;
<br/>
  }
<br/>
  return 0;
<br/>
</td> </tr></table><span class="postbody">
<br/>
so pressing select just stops the app.
<br/>
<br/>
Does anyone know how I can learn to put various entities in my levels
<br/>
using the yeti editor?
<br/>
<br/>
How then do I implement the behavior of an entity? I see a routine called
<br/>
guard behavior, do I just implement an analogous set of routines?
<br/>
What about power-ups?
<br/>
<br/>
Also, how do we dynamically alter wall/floor heights at run-time in
<br/>
order to implement secret stuff/elevators etc?
<br/>
<br/>
I'm totally new to FPS programming (though not to programming) and a reference to a tutorial would
<br/>
be much appreciated.
<br/>
<br/>
Cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15622 - Derek - Mon Jan 26, 2004 9:05 am</h4>
    <div class="postbody"><span class="postbody">The fix is very simple. In main.c replace the timelag macro with:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define timelag() (s16)((*(volatile u16*)0x400010C) - real)</td> </tr></table><span class="postbody">
<br/>
<br/>
The GPL timer code stupidly uses two timers, since it was based on other source durring a time when I didn't understand GBA timers myself :-)
<br/>
<br/>
I now only use one timer which is more accurate. The GPL code is really only useful if you are learning how to write fast texture mapping or fix point rotations. This style of code is very rare these days. A lot of older DOS forums have vanished from the internet. 
<br/>
<br/>
The GPL rendering is far too dark. I received a flashcard 3 days ago, so I only just saw this stuff running on a GBA. The Gamma has been fixed, so I'll get a demo out soon.
<br/>
<br/>
I'm thinking about releasing a second GPL version based on the latest code which has enough features for a TombRaider or a Red Faction. Perspective correct tmapping is done. Everything required for a RF is written.
<br/>
<br/>
<a class="postlink" href="http://www.n-gage.com/R1/en/games/games_red_faction.html" target="_blank">http://www.n-gage.com/R1/en/games/games_red_faction.html</a>
<br/>
<br/>
Maybe a shareware version is the go (?). What do people think? What about a 3D API released with HAM?
<br/>
<br/>
Derek Evans - Yeti3D Author
<br/>
<a class="postlink" href="http://www.theteahouse.com.au/gba/" target="_blank">http://www.theteahouse.com.au/gba/</a></span><span class="gensmall"><br/><br/>Last edited by Derek on Mon Jan 26, 2004 1:53 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#15624 - Derek - Mon Jan 26, 2004 9:32 am</h4>
    <div class="postbody"><span class="postbody">While on the topic of Yeti3D's future. 
<br/>
<br/>
On the back of my GBA is a copyright date of 2000, mmm, but its now 2004 (!) and all Nintendo seems to be offering is:
<br/>
<br/>
1) A new double screen device with no guaranteed GBA/GB support.
<br/>
2) Some kinda "China Only" all in one play thingie.
<br/>
<br/>
Whats up with that! Do theses remind you of geek toys from the late 80's, or am I just too far into my 30's.
<br/>
<br/>
Where is my GBA with everything a GP32 has! If nintendo leaves it too long, you will see a Sony device emulating GBA games.
<br/>
<br/>
I knew the Amiga was dead the day I could emulate the hardware faster on my PC.
<br/>
<br/>
That day will soon come for the GBA unless Nintendo upgrades the hardware. We dont need a new platform!
<br/>
<br/>
BTW: Yes, I want a keyboard attactment and touch screen as standard. Beleive it or not, kids like todo more than just play old platform games.
<br/>
<br/>
Derek Evans</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15635 - cesium - Mon Jan 26, 2004 7:56 pm</h4>
    <div class="postbody"><span class="postbody">Derek,
<br/>
 Thanks for the reply. I'll try that timer fix when I get home tonight.
<br/>
<br/>
As far as the GPL code goes, I'm using it to demonstrate an alternative
<br/>
hardware interface to the GBA other than the usual buttons. I'll bring in
<br/>
the hardware interface through the external serial port on the back.
<br/>
<br/>
This way I can throw together a proof of concept pretty quickly.
<br/>
Thank you for the GPL.
<br/>
<br/>
Any tips on implementing entities? Power ups? etc?
<br/>
<br/>
Thanks!
<br/>
Cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15642 - Derek - Mon Jan 26, 2004 11:47 pm</h4>
    <div class="postbody"><span class="postbody">Thats cool.
<br/>
<br/>
Entities are done, although incomplete in the GPL version. You call yeti_entity() to grab a entity pointer from the entity pool.
<br/>
<br/>
If you look in game_init() you will see code which iterates the map and creates entities for each cell based on the entity id which is programmed by the Yeti3D editor.
<br/>
<br/>
Basiclly, you add more ID's for each entity type. The latest version has a ton of these for trees, scrubs, monsters, pickups, exit points, transporters, overpath bridges, chairs, candles, pots, boxes, etc etc.
<br/>
<br/>
I have xxx_init() functions for each entity plus "behaviour" callbacks. You also have onhit() events for each entity to detect collisions. ontick() events are used for AI. The latest code also has entity-to-world collision callbacks plus a global entity-to-entity callback which is avaliable if you want to override the default "simple" collision detection code. On faster platforms, you can use full sphere-to-sphere collisions. The default is box-to-box.
<br/>
<br/>
The latest code also supports switchable MD2 rendering &amp; more sprite blending effects. 
<br/>
<br/>
I'll see if I can release a new version soon. If I decide to release, I want to make sure the code is perfect to prevent any incompatiblities between ports.
<br/>
<br/>
Other new features include the terrain &amp; cell warping code which allows for some very cool worlds. I also have some invisible cell collision variables which provides collision detection for static entities. This is a lot faster than the entity-to-entity code which bogs down with increasing numbers of entities.
<br/>
<br/>
So, basiclly you can jump on trees or boxs, or create platform/bridges which allows players to cross over in mid air. Cool stuff.
<br/>
<br/>
Derek Evans
<br/>
<a class="postlink" href="http://www.theteahouse.com.au/gba/" target="_blank">http://www.theteahouse.com.au/gba/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
