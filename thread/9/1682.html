<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mode 5 Question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > Mode 5 Question</h2>
<div id="posts">
<div class="post">
    <h4>#8538 - Sckuz - Sun Jul 13, 2003 9:48 am</h4>
    <div class="postbody"><span class="postbody">Does anyone know how mode 5 looks on an actual gameboy? Does it stretch to fill the whole screen or is it windowed like it is in the emulator?<br/>_________________<br/>"There is no right and wrong. There's only fun and boring." - The Plague</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8540 - Sweex - Sun Jul 13, 2003 1:38 pm</h4>
    <div class="postbody"><span class="postbody">You can decide yourself as you can rotate and scale it. I think most people scale it to fullscreen though, as the GBA screen is already tiny enough!:-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8547 - Sckuz - Sun Jul 13, 2003 7:42 pm</h4>
    <div class="postbody"><span class="postbody">So, how do I scale it then?<br/>_________________<br/>"There is no right and wrong. There's only fun and boring." - The Plague</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8549 - tepples - Sun Jul 13, 2003 9:35 pm</h4>
    <div class="postbody"><span class="postbody">To scale the display of a bitmapped graphics mode, use the background 2 affine matrix registers.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8554 - Sckuz - Mon Jul 14, 2003 3:32 am</h4>
    <div class="postbody"><span class="postbody">Sorry if this is a stupid quesiton..  but how do i do that?<br/>_________________<br/>"There is no right and wrong. There's only fun and boring." - The Plague</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8556 - Sweex - Mon Jul 14, 2003 9:22 am</h4>
    <div class="postbody"><span class="postbody">Tepples' reply is really straightforward, so I assume you didn't do very much programming for the GBA yet.
<br/>
<br/>
Why don't you read some tutorials, and then write a simple example program for each of the videomodes? I believe it's much better to see these things for yourself than to ask everybody at the forum.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8574 - Sckuz - Tue Jul 15, 2003 3:15 am</h4>
    <div class="postbody"><span class="postbody">Yeah.. Im very new to the GBA. Anyway, I figured it out. I took tepples suggestion and looked up some stuff on rotating/scaling backgrounds.  All that work just to discover that scaled mode 5 looks pretty sad. I might have to use a tweaked mode 4. Anyway, thanks for the help &amp; sorry I'm lazy.<br/>_________________<br/>"There is no right and wrong. There's only fun and boring." - The Plague</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9586 - Derek - Sat Aug 09, 2003 2:39 pm</h4>
    <div class="postbody"><span class="postbody">Sometimes its just better to give the code and move on. I didn't have time to work read hardware doc's either, since I knew after the mode is set then its all standard C/C++ coding.
<br/>
<br/>
This is the code that I use to setup a mode 5 rotated/stretched to 120x160. You will lose 8 pixels. 
<br/>
<br/>
  *(unsigned int*)0x04000000 = 0x405; 
<br/>
  *(unsigned short*)0x4000020 = 0;
<br/>
  *(unsigned short*)0x4000022 = (-1 &lt;&lt; 8);
<br/>
  *(unsigned short*)0x4000024 = 128;
<br/>
  *(unsigned short*)0x4000026 = 0;
<br/>
  *(unsigned short*)0x4000028 = 159 &lt;&lt; 8;
<br/>
<br/>
Play with the 128 to adjust the stretch. Heres a demo of a mode 5 3D engine.
<br/>
<br/>
<a href="http://www.theteahouse.com.au/gba/index.html" target="_blank">http://www.theteahouse.com.au/gba/index.html</a>
<br/>
<br/>
Derek Evans</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19599 - corranga - Thu Apr 22, 2004 5:46 pm</h4>
    <div class="postbody"><span class="postbody">Been trying to find a way to switch between 'fullscreen' and normal sized mode 5 by using input, but I can't get it to work properly.  I presume that I have to reset particular register values in order to switch between the different versions of mode 5 but I can't find which / what I need to do, can someone help?
<br/>
<br/>
Chris<br/>_________________<br/>If virtual reality is ever on a par with reality, I want to be Bomberman! :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19600 - tepples - Thu Apr 22, 2004 6:21 pm</h4>
    <div class="postbody"><span class="postbody">Look over this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">struct BGAFFINEREC
<br/>
{
<br/>
  unsigned short pa;  /* map_x increment per pixel */
<br/>
  unsigned short pb;  /* map_x increment per scanline */
<br/>
  unsigned short pc;  /* map_y increment per pixel */
<br/>
  unsigned short pd;  /* map_y increment per scanline */
<br/>
  unsigned int x_origin, y_origin;
<br/>
};
<br/>
<br/>
#define BGAFFINE ((volatile struct BGAFFINEREC *)0x04000000)
<br/>
<br/>
const struct BGAFFINEREC identity = {256, 0, 0, 256,  0, 0};
<br/>
const struct BGAFFINEREC mode3paged = {128, 0, 0, 256,  0, 0};
<br/>
const struct BGAFFINEREC mode5fullscreen = {0, -256, 128, 0,  319 &lt;&lt; 7, 0};
<br/>
<br/>
/* To turn off rot/scale */
<br/>
BGAFFINE[2] = identity;
<br/>
<br/>
/* To display Mode 5 in rotated/scaled fullscreen */
<br/>
BGAFFINE[2] = mode5fullscreen;
<br/>
<br/>
/* To display half of Mode 3 in scaled fullscreen */
<br/>
BGAFFINE[2] = mode3paged;
<br/>
<br/>
/* To switch "pages" of Mode 3 */
<br/>
BGAFFINE[2].x_origin = page ? 120 &lt;&lt; 8 : 0;
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
