<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>mapEd Flags : HOW TO - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Graphics > mapEd Flags : HOW TO</h2>
<div id="posts">
<div class="post">
    <h4>#18634 - RaBBi - Tue Mar 30, 2004 3:33 pm</h4>
    <div class="postbody"><span class="postbody">Hi ^^
<br/>
<br/>
Back from holidays, I'm returning on my GBA project.
<br/>
<br/>
First step was to test alphablending on flame tiles.
<br/>
After good results, I started to try to animate tiles, using 3 or 4 animation steps.
<br/>
<br/>
When thinking about the way to do it, I thought about using flags array, and remembered that mapEd had this sort of features.
<br/>
<br/>
But after reading the customizable .txt file, I don't understand how to add my own flags
<br/>
<br/>
So I ask Nessie if he could post an easy way, alternatively to the list of rules that I don't understand entirely.
<br/>
<br/>
Thanks ^^
<br/>
<br/>
EDIT: seems to understand a little bit more by myself, but an explanation from the author should be really welcome :)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18635 - Nessie - Tue Mar 30, 2004 4:56 pm</h4>
    <div class="postbody"><span class="postbody">I apologize, some mapEd features are admittedly poorly implemented and even more poorly documented.  :)
<br/>
<br/>
Anyway, Flags are an extension of the collision layer, as in, you need a collision layer in your map in order to 'draw' in custom flags.  I'm guessing this is the part that maybe wasn't overly obvious?
<br/>
<br/>
As per this other mapEd topic, <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3148" target="_blank">http://forum.gbadev.org/viewtopic.php?t=3148</a>, which roughly describes how the collision tile end of collision layers work.....you might be able to do exactly what you want using custom collision tiles that represent various things.  (I would recommend using the collision tile way if at all possible.)
<br/>
<br/>
It is up to your engine to correctly interpret these 'various' things, heh.
<br/>
<br/>
But, if you are positive that you will need to encode various pieces of information into a single array position in the collision array, just post back here and I can try to explain how flags work a bit more.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18636 - RaBBi - Tue Mar 30, 2004 6:01 pm</h4>
    <div class="postbody"><span class="postbody">Yes I want to store multiple information (flags) for a tile.
<br/>
<br/>
So I search how to use the .txt and bits fields but my editings are sometimes "illogicals" regarding the way I think it works.
<br/>
<br/>
I thought about doing this for instance :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CollisionTileIndex {
<br/>
   bits   4         // allocate 4 bits for the collision tile index
<br/>
}
<br/>
<br/>
NULL {
<br/>
   bits   4         // pad out 4 empty bits
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
So I'd have 8 bits for 8 flags (if I understood).
<br/>
<br/>
But in collision array, I got this kind of results :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const unsigned int CollisionMap[2048] = {
<br/>
0x0110,0x0220,0x2440,0x4880,0x9000,0x0000,...}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Which means that the 4 higher bits of the lower byte are used but I pad them with 4 null bits...
<br/>
<br/>
So, I must be wrong.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18637 - Nessie - Tue Mar 30, 2004 7:16 pm</h4>
    <div class="postbody"><span class="postbody">Ok, in the example you've shown, you've reserved 4 bits for the collision tile index and spaced out an extra 4 unused bits.  
<br/>
<br/>
The collision tile index is only filled in if you are using collision tiles as described in the other post.  If you haven't drawn any collision tiles into the collision layer, the space is still reserved but will be unused.
<br/>
<br/>
Regarding the NULL bits, you might add some extra 'padding' if you wanted to reserve some free space for some other tool to write into.  And if you don't need/want any extra space added, you can discard the NULL entry in the external file
<br/>
<br/>
Actual flags (you can only have single bit flags for now) that can be created for use in the editor follow this format:
<br/>
<br/>
<span style="color: blue"><span style="font-style: italic">descriptive_name</span>
<br/>
{
<br/>
    icon    <span style="font-style: italic">$visual_representation</span>
<br/>
    color    0 255 255 128
<br/>
}
<br/>
</span>
<br/>
// Visual representation can be any one of the following.  
<br/>
$death, $trigger, $solid, $upArrow, $sideArrow, $doNotEnter,$upLeftDot, $upRightDot, $lowRightDot, $lowLeftDot$, $centerDot,$upLeftBox, $upRightBox, $lowRightBox, $lowLeftBox$, $fullBox
<br/>
<br/>
// Specifying a color is optional and is in the format of:  <span style="color: red">red</span> <span style="color: green">green</span> <span style="color: blue">blue</span> <span style="color: black">alpha</span>
<br/>
// each color component is in the range of 0-255
<br/>
<br/>
<span style="font-style: italic">Edit: Actually, I just re-read your post and I'm not entirely sure that I understand your problem?  If this post has nothing to do with your problem, I guess re-state the question and maybe I'll catch on. :)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18641 - RaBBi - Tue Mar 30, 2004 8:54 pm</h4>
    <div class="postbody"><span class="postbody">Ok.
<br/>
<br/>
I just don't understand why the 4 higher bits of the lower Byte are filled/used.
<br/>
Cause I used 4 bits as NULL as you can see.
<br/>
<br/>
In fact, I don't understand the values in the array....
<br/>
<br/>
I respectively use these flags :
<br/>
<br/>
solid,jump through, killer, testeur (my own test), trigger.
<br/>
<br/>
So I intended to have these values instead (in my understanding, which is certainly wrong) :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
0x0100, 0x0200, 0x0300, 0x0400....
<br/>
<br/>
Can you explain me the resulted values with my configuration? (4bits-4bits-8bits).
<br/>
<br/>
Thanks ^^</td> </tr></table><span class="postbody"><br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
