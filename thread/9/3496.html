<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>What GXF File Format best to you use for? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Graphics > What GXF File Format best to you use for?</h2>
<div id="posts">
<div class="post">
    <h4>#21526 - Lord - Sun May 30, 2004 11:00 pm</h4>
    <div class="postbody"><span class="postbody">First of all, hi. :)
<br/>
<br/>
I'm really glad i finally found a Forum full of other guys working with the GBA for fun or whatever. ;)
<br/>
<br/>
However, due to the lack of a good 16*16 Color Tile Map-Editor, i've decided to code my own(seems to be best to me either way).
<br/>
Now I'm facing a little problem with that:
<br/>
<br/>
I don't know what GFX File Format I should use. It has to support a 16 Color Palette, should not be compressed and have a good documentation so I can strip the Pal an the Pal entry for any Pixel. Any suggestions? If you know of a good converting library(for Delphi) I would also welcome that.
<br/>
<br/>
You might say I could use TBitmap, but afaik you can only get each pixel's color, not its Palette Entry? If I'm wrong with that please tell me, too ^^.
<br/>
<br/>
Sorry for nearly asking for Delphi rather that C, but I thougt I could give it a shot.
<br/>
<br/>
Hoping for a good time here,
<br/>
<br/>
Lord.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21527 - wintermute - Mon May 31, 2004 12:02 am</h4>
    <div class="postbody"><span class="postbody"><a href="http://nessie.gbadev.org/" target="_blank">http://nessie.gbadev.org/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21528 - sajiimori - Mon May 31, 2004 12:52 am</h4>
    <div class="postbody"><span class="postbody">Windows BMPs carry their palettes, and they can be 16 color uncompressed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21534 - Lord - Mon May 31, 2004 9:27 am</h4>
    <div class="postbody"><span class="postbody">MapEd is kind of messed up for me in every version(I only se half of the Layer I'm working on), and I don't see a possibility to open a(or multiple, rather) Palette(s) after importing my 16 Color Map Data?
<br/>
<br/>
Sajiimori, do you know of any page that Describes these 16 color uncompressed Bitmaps?
<br/>
<br/>
Thanks, Lord.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21536 - keldon - Mon May 31, 2004 11:43 am</h4>
    <div class="postbody"><span class="postbody">This covers it all.
<br/>
<br/>
<a href="http://www.fortunecity.com/skyscraper/windows/364/bmpffrmt.html" target="_blank">http://www.fortunecity.com/skyscraper/windows/364/bmpffrmt.html</a>
<br/>
<br/>
p.s. even though you're in Delphi, you can freely use the Windows API. The structures given, such as BITMAPINFOHEADER, etc. are Win API structures.
<br/>
<br/>
The WIN API comes with Delphi, (win32.hlp or sometimes windows.hlp). To use the Windows API simply import them into your project using <span style="font-weight: bold">uses Windows</span>.
<br/>
<br/>
Maybe using a windows bitmap may have advantages over using TBitmap, or you could mix their usage as I think I remember you could use a TBitmap like a bitmap.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21537 - Lord - Mon May 31, 2004 12:23 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for this great Site and andvice :)
<br/>
<br/>
Well but now that I've startet with writing my own interpreter I think I'll continue doing it that way nevertheless since it is fun ^^
<br/>
<br/>
<span style="font-style: italic">Edit:</span>Besides do you think its wise to use WinAPI functions to Plot the Pixels on my form or should I rather use DirectDraw for speed reaons?
<br/>
<br/>
Thanks again, Lord.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21539 - isildur - Mon May 31, 2004 2:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks for this great Site and andvice :)
<br/>
<br/>
Well but now that I've startet with writing my own interpreter I think I'll continue doing it that way nevertheless since it is fun ^^
<br/>
<br/>
<span style="font-style: italic">Edit:</span>Besides do you think its wise to use WinAPI functions to Plot the Pixels on my form or should I rather use DirectDraw for speed reaons?
<br/>
<br/>
Thanks again, Lord.</td> </tr></table><span class="postbody">
<br/>
<br/>
I would not bother doing it with DirectDraw, it's overkill I think. The gdi is usually fast enough.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21550 - sajiimori - Mon May 31, 2004 7:20 pm</h4>
    <div class="postbody"><span class="postbody">Maybe use DirectDraw if you plan on having fully animated previews with parallax scrolling and all that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21559 - Akolade - Mon May 31, 2004 11:30 pm</h4>
    <div class="postbody"><span class="postbody">Using Directdraw/Directx is nice as it allows easy scaling/rotation. Plus you can simulate transparency if necessary.
<br/>
Though it can take a little learning to get going.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21581 - keldon - Tue Jun 01, 2004 11:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">hdc = GetDC ( hWnd );
<br/>
backbuffer = CreateCompatibleDC ( hdc );
<br/>
backbufferBitmap = CreateDIBSection ( hdc, bitmapinfo, DIB_PAL_COLORS, &amp;backbufferBits, NULL, NULL );
<br/>
SelectObject ( backbuffer, backbufferBitmap );
<br/>
<br/>
{ backbufferBits is the pointer to the actual pixels }
<br/>
<br/>
BitBlt ( hdc, 0, 0, width, height, backbuffer, 0, 0, SRCCOPY )
<br/>
ReleaseDC ( hWnd, hdc )</td> </tr></table><span class="postbody">
<br/>
<br/>
That's the code required to write directly to the window bitmap buffer; all that's required for this is a valid BITMAPINFO structure. &amp;backbufferBits means the address of backbufferBits in C, can't remember it in Delphi.
<br/>
<br/>
However the datatypes are slightly different in Delphi ( for some reason ), and there is a lot of tinkering around with type casting - mostly relying on byte arrays. Also you have to manually set the size yourself, which is a bummer, since some datatypes, such as hCursor are quite mysterious as to how many bytes they actually are. Just assume 4 bytes unless stated otherwise, and the cbSize is also counted - so the BITMAPINFOHEADER, for example is 40 bytes.
<br/>
<br/>
Also working in 24/32 bit colours is a must; if you are unsure how to do that I can give you the code. 24 bit colour is supported in 16 bit screen modes also.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Using Directdraw/Directx is nice as it allows easy scaling/rotation. Plus you can simulate transparency if necessary. 
<br/>
Though it can take a little learning to get goin</td> </tr></table><span class="postbody">
<br/>
I think the tutorials packed in the DirectX.hlp file work pretty well in teaching direct draw functions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21592 - Akolade - Tue Jun 01, 2004 4:56 pm</h4>
    <div class="postbody"><span class="postbody">Yes, the DX tutorials are pretty good. What I found tricky at first was combining MFC with DX. I would suggest to anyone new to it to just make a very simple program at first, just to get the basic structure of what you need to get going, then go from there. 
<br/>
Like, make a dialog window with an area for some DX graphics.
<br/>
<br/>
So far I've spent more time working on my tools than my GBA code I swear..</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
