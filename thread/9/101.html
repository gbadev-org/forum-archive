<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Converting RGB values - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Converting RGB values</h2>
<div id="posts">
<div class="post">
    <h4>#576 - XyzZyx - Wed Jan 08, 2003 9:41 pm</h4>
    <div class="postbody"><span class="postbody">I just managed to load graphics onto the screen! But something seems to be wrong with the palette. I have all the RGB values with each color in range 0-255 and am trying to do a real-time conversion into the 15-bit format the gameboy uses. Here is the formula I came up with:
<br/>
<span style="font-weight: bold">u16 rgb = (r &gt;&gt; 3) | (g &gt;&gt; 3) &lt;&lt; 5 | (b &gt;&gt; 3) &lt;&lt; 10;</span>
<br/>
I don't know, have I mixed the bit positions or something? Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#583 - Lord Graga - Wed Jan 08, 2003 9:55 pm</h4>
    <div class="postbody"><span class="postbody">r + g &lt;&lt;5+ b&lt;&lt;10</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#585 - Nessie - Wed Jan 08, 2003 10:05 pm</h4>
    <div class="postbody"><span class="postbody">Lord Graga's formula is correct for converting a (0-31) RGB value to a 15 bit color.
<br/>
<br/>
The formula you have posted should work for a run-time conversion from (0-255) RGB to (0-31) RGB....except, I suspect you are falling trap to an order of operations problem.
<br/>
<br/>
I'd try augmenting it with a few parens just to make sure:
<br/>
<br/>
u16 rgb = (r &gt;&gt; 3 ) + (( g &gt;&gt; 3 ) &lt;&lt; 5 ) + (( b &gt;&gt; 3 ) &lt;&lt; 10 );</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
