<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Silly question about graphics.. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Silly question about graphics..</h2>
<div id="posts">
<div class="post">
    <h4>#76401 - Issac - Tue Mar 21, 2006 10:33 am</h4>
    <div class="postbody"><span class="postbody">Hello, I've been having some problem with graphics.. or sprites..
<br/>
I'm using the Webbesen gba tutorial to figure out the sprite usage...
<br/>
it works with ONE 8x8 square...
<br/>
but when i try my 32x32 square.. it's all garbled... 
<br/>
<br/>
Code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void maingame(){
<br/>
  key_poll();
<br/>
  u16 loop;
<br/>
<br/>
  SetMode(MODE_4 | BG2_ENABLE | OBJ_ENABLE | OBJ_MAP_1D);
<br/>
<br/>
  for (loop = 0; loop &lt; 256; loop++) 
<br/>
  {
<br/>
    BG_PaletteMem[loop]=bakgrund01Palette[loop];
<br/>
  }
<br/>
  for (loop = 0; loop &lt; (120*160); loop++) 
<br/>
  {
<br/>
    FrontBuffer[loop] = bakgrund01Data[loop] ;
<br/>
  }
<br/>
<br/>
  for(loop = 0; loop &lt; 256; loop++) 
<br/>
  {
<br/>
    OBJ_PaletteMem[loop] = shotPalette[loop];
<br/>
  }
<br/>
<br/>
  memcpy( (u16 *)0x06014100, &amp;killerData, sizeof(killerData) );
<br/>
<br/>
  sprites[0].attribute0 = COLOR_256 | SQUARE | 50;
<br/>
  sprites[0].attribute1 = SIZE_32 | 50;
<br/>
  sprites[0].attribute2 = 512;
<br/>
<br/>
while(1)
<br/>
{
<br/>
   WaitForVsync();
<br/>
   CopyOAM();
<br/>
}
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
Screen:
<br/>
<a href="http://img.photobucket.com/albums/v281/lssscrules/Gba.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
If anyone could help me, i'd be VERY grateful!
<br/>
<br/>
Ask if anything is unclear!<br/>_________________<br/>yeah, well, maybe... or? anyways.... eh...  what was i talking about??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76437 - tepples - Tue Mar 21, 2006 6:39 pm</h4>
    <div class="postbody"><span class="postbody">What is the bitmap supposed to look like, and what command are you using to convert it from your paint program's format to the GBA's format?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76530 - Issac - Wed Mar 22, 2006 2:27 pm</h4>
    <div class="postbody"><span class="postbody">hey,
<br/>
It's supposed to look like this:
<br/>
<a href="http://img.photobucket.com/albums/v281/lssscrules/killer.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
and im using the pcx2gba tool, just dragging the pcx-file to the program icon, dropping it there.. and i get an output (it says something about 8bits... i think)
<br/>
<br/>
and it works with the 8x8 square.. 
<br/>
<br/>
that's what i know for now... does that help or should i check something special?<br/>_________________<br/>yeah, well, maybe... or? anyways.... eh...  what was i talking about??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76536 - Cearn - Wed Mar 22, 2006 3:32 pm</h4>
    <div class="postbody"><span class="postbody">The first problem is that pcx2gba gives bitmap output, but for sprites you need tiles. For that you'd need something like pcx2sprite.
<br/>
<br/>
A secondary problem is that you load the sprite to 0x06014100, which is sprite tile index 520, not 512. This will cause the sprite to appear shifted down 16 pixels, with the last 8 tiles simply cut off.
<br/>
<br/>
And the obligatory sidenote: the coding standards used in Webbesen's tutorial are little short of atrocious; most of the functions are inefficient (even without falling onder premature optimisation), and sometimes flawed. It's an okay resource to learn the most basic concepts of GBA programming and pong, but if possible stay the %$^&amp; away from the actual code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76539 - Issac - Wed Mar 22, 2006 4:25 pm</h4>
    <div class="postbody"><span class="postbody">okay, and, I know i asked this before, but are there any siple ways to insert a tiled sprite?
<br/>
<br/>
define simple: as including a bittmapped "sprite"....<br/>_________________<br/>yeah, well, maybe... or? anyways.... eh...  what was i talking about??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76542 - Cearn - Wed Mar 22, 2006 4:41 pm</h4>
    <div class="postbody"><span class="postbody">Yes, use pcx2sprite instead of pcx2gba. This will tile the image for you, which you can then copy to obj VRAM as you're doing now. That is the simplest way. Well, that or using a converter with a graphical user interface, in which you can set the options with buttons instead of command line flags. gfx2gba has a GUI for it, and and the exporter in Usenti is a GUI.
<br/>
<br/>
The copy routine is not the problem (well not in this case, but only because you're lucky), the internal format of your sprite graphics array is.
<br/>
<br/>
There are ways of performing the conversion in-game (i.e., converting the output of pcx2gba to something pcx2sprite would have given) but that's rather unpleasant business, with lots of offsets and ands. Just use a converter that can tile images.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
