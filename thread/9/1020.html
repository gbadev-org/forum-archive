<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Colour With Sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Colour With Sprites</h2>
<div id="posts">
<div class="post">
    <h4>#4937 - redneon - Tue Apr 15, 2003 11:47 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I'm creating a breakout clone (yes, another one) to try and teach myself GBA programming. I've managed to do quite a bit but I have a couple of questions about sprites and colours. First, is it possible to have a colour palette for each sprite or do you have to have one palette for all of them? Second, I am assuming that you have to have one colour palette for all of them and in this case, how do I do this? I did try putting all my sprites in a .pcx file, converting this to a .h file and using that for the colour palette but it hasn't worked.
<br/>
<br/>
Please help,
<br/>
<br/>
redneon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4939 - delbogun - Tue Apr 15, 2003 12:46 pm</h4>
    <div class="postbody"><span class="postbody">As far as I know, you can only have one palette for all sprites. But you could use the tile memory and palette for some objects and that way get two palettes.
<br/>
Make sure the .pcx file is saved as a 256-color image, but that's probably depends on what tool you used for conversion.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4942 - tepples - Tue Apr 15, 2003 3:03 pm</h4>
    <div class="postbody"><span class="postbody">What delbogun said is true for sprites with 8 bits per pixel, but sprites with 4 bits per pixel can have any of 16 palettes.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4945 - redneon - Tue Apr 15, 2003 4:01 pm</h4>
    <div class="postbody"><span class="postbody">So you can either have one 256 colour palette or 16 16 colour palettes is that right? How would I set up 16 16 colour palettes?
<br/>
<br/>
Darrell</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4956 - tepples - Tue Apr 15, 2003 7:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>redneon wrote:</b></span></td> </tr> <tr> <td class="quote">So you can either have one 256 colour palette or 16 16 colour palettes is that right?</td> </tr></table><span class="postbody">
<br/>
Correct.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">How would I set up 16 16 colour palettes?</td> </tr></table><span class="postbody">
<br/>
Load each 16-color palette into an area of palette RAM, and tell each sprite to use a particular palette. See the [url=http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#OAM%20(sprites)]CowBite Spec[/url].<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4978 - redneon - Wed Apr 16, 2003 12:30 pm</h4>
    <div class="postbody"><span class="postbody">I'm still having trouble. I was wondering if someone would be kind enough to download my code from <a href="http://dazblake.pwp.blueyonder.co.uk/bod.zip" target="_blank">http://dazblake.pwp.blueyonder.co.uk/bod.zip</a> and figure out how I can get all the sprites to display correctly? So far all the sprites (the bat, brick and ball) are all using the sprite image from the bat and I can't figure out what I'm doing wrong.
<br/>
<br/>
Please help,
<br/>
<br/>
Darrell</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6804 - hnager - Tue Jun 03, 2003 1:01 am</h4>
    <div class="postbody"><span class="postbody">Just curious to see if you ever resolved your sprite issues...I think I'm having the same problem with my 16 color sprites and can't figure out what's wrong with it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7205 - Daedro - Thu Jun 12, 2003 6:02 am</h4>
    <div class="postbody"><span class="postbody">I am too, 16 colors wont work. But the wierdest thing is my 256 wont either.. it cuts them in half horizontally and puts the pieces together and will not even show the image even cut in half :-/
<br/>
<br/>
Any more info in these posts would be greatly appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7347 - Ninja - Mon Jun 16, 2003 12:05 am</h4>
    <div class="postbody"><span class="postbody">If someone can post their source code, or a working link, I can try to help you out with this.  I used to have a lot of trouble with my sprites back in the day too.  :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7351 - hnager - Mon Jun 16, 2003 1:21 am</h4>
    <div class="postbody"><span class="postbody">I've since solved the problem - thanks to the forum. But I'm still looking for a smooth way to convert the 16 color sprite data to the properly formatted array (if I'm not mistaken it's in 8x8 quadrents). Any suggestions/?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7368 - Cyberman - Mon Jun 16, 2003 2:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I've since solved the problem - thanks to the forum. But I'm still looking for a smooth way to convert the 16 color sprite data to the properly formatted array (if I'm not mistaken it's in 8x8 quadrents). Any suggestions/?</td> </tr></table><span class="postbody">
<br/>
<br/>
The color information for sprites can be stored in two ways in the GBA just like that of tiles
<br/>
<br/>
<span style="font-style: italic"><span style="font-weight: bold">Two Dimensional Character Mapping (DISPCNT Bit 6 cleared)</span>
<br/>
This mapping mode assumes that the 1024 OBJ tiles are arranged as a matrix of 32x32 tiles / 256x256 pixels (In 256 color mode: 16x32 tiles / 128x256 pixels). Ie. the upper row of this matrix contains tiles 00h-1Fh, the next row tiles 20h-3Fh, and so on.
<br/>
For example, when displaying a 16x16 pixel OBJ, with tile number set to 04h; The upper row of the OBJ will consist of tile 04h and 05h, the next row of 24h and 25h. (In 256 color mode: 04h and 06h, 24h and 26h.)
<br/>
<br/>
<span style="font-weight: bold">One Dimensional Character Mapping (DISPCNT Bit 6 set)</span>
<br/>
In this mode, tiles are mapped each after each other from 00h-3FFh.
<br/>
Using the same example as above, the upper row of the OBJ will consist of tile 04h and 05h, the next row of tile 06h and 07h. (In 256 color mode: 04h and 06h, 08h and 0Ah.)</span>
<br/>
<br/>
This affects how sprites are stored in internal memory.
<br/>
<br/>
If you are talking about how you store the sprite data in ROM to load into VRAM The 'bit' organization goes something like this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
[h] - high nybble
<br/>
[l] = low nybble
<br/>
0     1     2     3
<br/>
[h][l][h][l][h][l][h][l] 0
<br/>
[h][l][h][l][h][l][h][l] 4
<br/>
[h][l][h][l][h][l][h][l] 8
<br/>
[h][l][h][l][h][l][h][l] 16
<br/>
[h][l][h][l][h][l][h][l] 20
<br/>
[h][l][h][l][h][l][h][l] 24
<br/>
[h][l][h][l][h][l][h][l] 28
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This should give you an idea &lt;if it's not mangled too much&gt; of the order data is layed out in each tile.
<br/>
<br/>
If you selected linear mode then the tile data for a sprite (use a 32x32 pixel on as an example) is thus.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
[00][01][02][03]
<br/>
[04][05][06][07]
<br/>
[08][09][10][11]
<br/>
[12][13][14][15]
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Each number being a tile formated as mentioned above.
<br/>
<br/>
To create a sprite in rom right GFX2GBA does a pretty good job of meta tiling data from a windows bitmap file.
<br/>
<br/>
As for how to make is easier.. create your own utils, like I did? :) Seriously I think someone made a gfx2gba wrapping program to make it easier but still ones own tools seems to be the best way at the moment.
<br/>
<br/>
Cyb[/b]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7387 - hnager - Mon Jun 16, 2003 8:10 pm</h4>
    <div class="postbody"><span class="postbody">Hmmm, I may not have explained exactly where I'm having difficulty - take a look at this long thread:
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=1344&amp;highlight=color+colour+sprite" target="_blank">http://forum.gbadev.org/viewtopic.php?t=1344&amp;highlight=color+colour+sprite</a>
<br/>
<br/>
It looks as if 16 color sprites need to be formatted differently (even in a 1d mode) - so a 16x16 sprite would be brought in as if 4 tiles. Getting the array to that point is where I have trouble.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
