<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Alpha Blending - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Alpha Blending</h2>
<div id="posts">
<div class="post">
    <h4>#69348 - gs2phateon - Mon Jan 30, 2006 6:17 am</h4>
    <div class="postbody"><span class="postbody">I'm trying to do this on Mode 0, but I'm have some difficulty.  I'm pretty sure I set it up, but the Sprite I'm using isn't turning transparent.  If it makes any difference, I'm using two backgrounds.  I have already been able to do this on the bitmap modes, so is there anything I have to change when switching over to the tile-based modes?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69349 - tepples - Mon Jan 30, 2006 6:23 am</h4>
    <div class="postbody"><span class="postbody">It only alpha-blends if the frontmost pixel in the stack is marked as a top layer and the second pixel is marked as a bottom layer. Using the OAM transparency bit already marks the sprite as top, so you'll need to mark both of your bg layers as bottom in BLDCNT.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69350 - gs2phateon - Mon Jan 30, 2006 6:31 am</h4>
    <div class="postbody"><span class="postbody">Sorry, I'm not really sure how to go about doing that.  I'm using backgrounds 1 and 3, would it be possible for you to do a quick example?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69353 - gs2phateon - Mon Jan 30, 2006 6:45 am</h4>
    <div class="postbody"><span class="postbody">OK, I think I got it, but the blended sprite (green) looks kind of dark against a dark background (blue).  This is supposed to happen right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69354 - tepples - Mon Jan 30, 2006 6:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gs2phateon wrote:</b></span></td> </tr> <tr> <td class="quote">Oh, and if this helps, the example I used for mode 3 was
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">REG_BLDMOD = (1 &lt;&lt; 4) | (1 &lt;&lt; 10);</td> </tr></table><span class="postbody">
<br/>
<br/>
If doing an example is too hard, could you explain what each part in this line means?</span></td> </tr></table><span class="postbody">
<br/>
(1 &lt;&lt; 4) means all sprites are "top"; (1 &lt;&lt; 10) means BG2 is "bottom". In general, you don't want to make all sprites "top"; instead you want to set the semitransparent bit in an individual OAM structure.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/*
<br/>
 * Defines for BLDCNT that may or may not make more sense
<br/>
 * than those in libgba headers
<br/>
 */
<br/>
#define BLEND_BG0_TOP (1 &lt;&lt; 0)
<br/>
#define BLEND_BG1_TOP (1 &lt;&lt; 1)
<br/>
#define BLEND_BG2_TOP (1 &lt;&lt; 2)
<br/>
#define BLEND_BG3_TOP (1 &lt;&lt; 3)
<br/>
<br/>
#define BLEND_BG0_BOTTOM (1 &lt;&lt; 8)
<br/>
#define BLEND_BG1_BOTTOM (1 &lt;&lt; 9)
<br/>
#define BLEND_BG2_BOTTOM (1 &lt;&lt; 10)
<br/>
#define BLEND_BG3_BOTTOM (1 &lt;&lt; 11)
<br/>
#define BLEND_SKY_BOTTOM (1 &lt;&lt; 13)
<br/>
<br/>
#define BLEND_ALPHA (1 &lt;&lt; 6)
<br/>
<br/>
// Defines for OAM attribute 0 (Y)
<br/>
#define OAM_ALPHA (1 &lt;&lt; 10)
<br/>
</td> </tr></table><span class="postbody">
<br/>
You might have to change the first line of the following to correspond to which bg layers you're actually using:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">//For use with above defines
<br/>
REG_BLDMOD = BLEND_ALPHA | BLEND_BG2_BOTTOM | BLEND_BG3_BOTTOM;
<br/>
OAM[0].attr0 = (/*whatever*/) | OAM_ALPHA;
<br/>
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69356 - gs2phateon - Mon Jan 30, 2006 6:54 am</h4>
    <div class="postbody"><span class="postbody">Thanks, that helped me a lot.  I also have a better idea how to change the bits on other registers.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
