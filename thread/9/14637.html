<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Small problem with git - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > Small problem with git</h2>
<div id="posts">
<div class="post">
    <h4>#146681 - KaioShin - Fri Dec 07, 2007 3:53 pm</h4>
    <div class="postbody"><span class="postbody">Hi all. I wonder if someone could assist me with a problem I've with git. 
<br/>
<br/>
Take a look at the following image please:
<br/>
<br/>
<a href="http://img401.imageshack.us/img401/2459/tilemaped6.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
The image I want to display was converted to tiles and tilemap with git. 
<br/>
<br/>
However, as you can see in the end of the very first line it ignored the visible area and so the whole picture is shifted apart by 2 tiles. The last 2 tiles on row 1 should have started at row 2. The error continues in each line of course. 
<br/>
<br/>
I'm sure the problem lies in my usage of the paramters. There are so many, and I'm no graphics expert, so I'm not sure what I should change. 
<br/>
<br/>
My command string was:
<br/>
<br/>
git test.bmp -gB4 -mRtpf -ftb -ma0
<br/>
<br/>
Can anyone help me solve my problem?
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#146686 - Cearn - Fri Dec 07, 2007 5:39 pm</h4>
    <div class="postbody"><span class="postbody">A screen-block is 32 tiles wide, but the GBA screen is 240 pixels = 30 tiles wide. I'm guessing your bitmap is 240 pixels wide as well. git (which is now known as <a class="postlink" href="http://www.coranac.com/projects/#grit" target="_blank">grit</a>) doesn't pad to 32-tile boundaries unless you tell it to, so the output map will be 30 tiles wide as well, which results in the two tile misalignment when you feed it directly into a screen-blocks.
<br/>
<br/>
Possible solutions: pad the original bitmap, tell g(r)it to pad using `-aw 256'  or export to screen-block layout with `-mLs':</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148670 - KaioShin - Tue Jan 08, 2008 6:36 pm</h4>
    <div class="postbody"><span class="postbody">The tiles and tilemap worked perfectly now :)
<br/>
<br/>
But somehow I can't get palettes to work right at all :(
<br/>
<br/>
Source Image:
<br/>
<a href="http://img.photobucket.com/albums/v128/crystaelf/dqmcvza3gs2_fix1a.gif">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
As it appears after conversion:
<br/>
<br/>
<a href="http://img178.imageshack.us/img178/9981/badtitlevo5.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
I tried a variety of options for grit. Nothing worked. Can someone help me with this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148673 - Cearn - Tue Jan 08, 2008 7:21 pm</h4>
    <div class="postbody"><span class="postbody">Notice the pattern of wrongness here: the places where the colors seem to change are tile boundaries. This usually indicates that you have a 4bpp background, but have tiles that use colors from multiple 16-color palettes. 
<br/>
If, for example, a tile uses colors 0x11 and 0x21, it will take color 1 from palette 1 (or 2), but not both. Look the how the colors are arranged in the palette to see if this is the case.
<br/>
<br/>
To solve this, either use 8bpp output and disable tile-palette reduction (the `p' in `-mRtpf'. For your convenience, you can also use `-mR4' and `-mR8' as aliases for `-mRtpf' and `-mRtf', respectively. Alternatively, you can rearrange the colors in the palette of the original image so that the tiles don't access multiple sub-palettes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148693 - KaioShin - Tue Jan 08, 2008 11:24 pm</h4>
    <div class="postbody"><span class="postbody">Thank you, I'll try your suggestions :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
