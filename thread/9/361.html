<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>gif2spr rearranging palette colours? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > gif2spr rearranging palette colours?</h2>
<div id="posts">
<div class="post">
    <h4>#2239 - TurboHz - Fri Jan 31, 2003 3:05 pm</h4>
    <div class="postbody"><span class="postbody">I've been using gif2spr to convert graphics to GBA format.
<br/>
It seems to work ok; my sprites and tiles are displayed correctly.
<br/>
<br/>
BUT, using VisualBoyAdvance, I noticed that the palette (and also the tile data, accordingly), is being rearranged? (I'm using 16 colour palettes, BTW)
<br/>
<br/>
I wanted to do some FX changing palette values dinamically, so I arranged my palette to make it easy to shift the values to next palette slot... (did I make that clear enough???)
<br/>
<br/>
Anyone has noticed that as well?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2259 - loopy - Fri Jan 31, 2003 10:09 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, I get fed up with that too.  Doesn't seem too many people are using 16 color sprites and all the utilities are for 256.  Anyway, I use pcx2sprite and then convert the 256-color output to 16 with my own VB utility, code below:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Attribute VB_Name = "colorConvert"
<br/>
Option Explicit
<br/>
<br/>
Sub Main()
<br/>
<br/>
    Dim i As Integer
<br/>
    
<br/>
    Dim s As String
<br/>
    Dim s2 As String
<br/>
    
<br/>
    Dim endOfFile As Boolean
<br/>
    Dim endOfString As Boolean
<br/>
<br/>
    Open Command() For Binary As #1
<br/>
    Open App.Path &amp; "\output.h" For Output As #2
<br/>
    
<br/>
    For i = 1 To 9
<br/>
        Line Input #1, s
<br/>
    Next i
<br/>
    
<br/>
    Print #2, s
<br/>
    
<br/>
    endOfFile = False
<br/>
    
<br/>
    While endOfFile = False
<br/>
        Line Input #1, s
<br/>
        If Right$(s, 2) = "};" Then endOfFile = True
<br/>
        
<br/>
        endOfString = False
<br/>
        i = 24
<br/>
        s2 = "  "
<br/>
                
<br/>
        While endOfString = False
<br/>
            s2 = s2 &amp; "0x" &amp; Mid$(s, i + 8, 1) &amp; Mid$(s, i + 10, 1) &amp; Mid$(s, i, 1) &amp; Mid$(s, i + 2, 1) &amp; ", "
<br/>
            i = i + 16
<br/>
            If i &gt;= Len(s) Then endOfString = True
<br/>
        Wend
<br/>
        
<br/>
        If endOfFile = True Then s2 = Left$(s2, Len(s2) - 2)
<br/>
        
<br/>
        Print #2, s2
<br/>
    Wend
<br/>
    
<br/>
    Print #2, "};"
<br/>
    
<br/>
    Close #2
<br/>
    Close #1
<br/>
<br/>
End Sub
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You can just drag-and-drop your 256-color .h file and this will spit out output.h.  It cuts out the palette, but you just cut that out of the original file if you want it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2309 - Maddox - Sat Feb 01, 2003 10:05 pm</h4>
    <div class="postbody"><span class="postbody">Keep trying because professionals MOSTLY use 16-color sprites.  Oops, $0.02.<br/>_________________<br/>You probably suck.  I hope you're is not a game programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2411 - Quirky - Mon Feb 03, 2003 8:41 am</h4>
    <div class="postbody"><span class="postbody">FFS Maddox. If you have such a problem helping people out, just stop posting.
<br/>
<br/>
As for using gif2spr - I think like most conversion tools it arranges the palette in the order it finds the colours in the first image file. A way round that might be to create an (unused) image that has the colours in the order you want them. Then these'll be added to the internal palette first and used as references when optimising the other images.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2412 - TurboHz - Mon Feb 03, 2003 9:20 am</h4>
    <div class="postbody"><span class="postbody">I found another workaround.
<br/>
<br/>
I convert the images to 4bit BMPs, and the use <span style="font-weight: bold">bmp2raw</span> to export raw binary data for both palette and image. With this utility, the palette order is preserved-</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2432 - tepples - Mon Feb 03, 2003 9:41 pm</h4>
    <div class="postbody"><span class="postbody">There's a converter called "bmp2bg" in the tools folder of the source code for TOD.  It converts .bmp and .pcx bitmaps to 4-bit tile data, preserving maps and even correcting for the difference between sRGB (CRT gamma) and GBA gamma.
<br/>
<br/>
Despite the name, it also works for 16-color sprites.  For 2D mode, place all your cels side-by-side in a 256-pixel-wide bitmap; for 1D mode, line up your cells vertically in a bitmap that's as wide as one sprite.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2435 - lordmetroid - Mon Feb 03, 2003 10:41 pm</h4>
    <div class="postbody"><span class="postbody">Yes I have noticed that professionals use 16 colors tiles...
<br/>
However we are amateurs and I personally choosed to use 256 colors because it gives me less trouble to code for it.
<br/>
<br/>
However there are alot of advantages with haveing 16 color tiles.
<br/>
Not only does it take less space to store and is fatser to upload to VRAM it also quite impossible that one would need to use so many colors as 256 on a signle tile!<br/>_________________<br/>*Spam*
<br/>
Open Solutions for an open mind, <a href="http://www.areta.org" target="_blank">www.areta.org</a>
<br/>
<br/>
Areta is an organization of coders codeing mostly open source project, but there is alot of sections like GBA dev, Language learning communities, RPG communities, etc...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2453 - loopy - Tue Feb 04, 2003 8:58 am</h4>
    <div class="postbody"><span class="postbody">Is that all you had to say, Maddox?  Assuming you are a professional and use 16-color sprites, you mean to tell me that you didn't have any profound advice?  Perhaps that's why you'd rather post snide comments than contributing knowledge and insight.
<br/>
<br/>
By the way, your grammar sucks.  I hope your [sic] not a native English speaker.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2497 - JonH - Wed Feb 05, 2003 12:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>loopy wrote:</b></span></td> </tr> <tr> <td class="quote">By the way, your grammar sucks.  I hope your [sic] not a native English speaker.</td> </tr></table><span class="postbody">
<br/>
<br/>
heh i done that one already on a different thread ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
