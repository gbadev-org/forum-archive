<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>chopped up sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Graphics > chopped up sprites</h2>
<div id="posts">
<div class="post">
    <h4>#8136 - Foz - Wed Jul 02, 2003 6:33 pm</h4>
    <div class="postbody"><span class="postbody">I recently created a 256 color sprite in Photoshop and saved it as a .PCX file.  I then used Dovoto's pcx2gba to create the header.  The output read a 64x64 sprite with 8 bits per pixel which was correct.  I then used this file in a test program:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main()
<br/>
{
<br/>
   u16 loop;
<br/>
   u16* temp;
<br/>
<br/>
   SetMode(MODE_1 | OBJ_ENABLE | OBJ_MAP_1D); 
<br/>
   for(loop = 0; loop &lt; 256; loop++)
<br/>
      OBJPaletteMem[loop] = playerPalette[loop];
<br/>
<br/>
   InitializeSprites();
<br/>
<br/>
        sprites[0].attribute0 = COLOR_256 | SQUARE | ROTATION_FLAG | 50;   
<br/>
        sprites[0].attribute1 = SIZE_64 | ROTDATA(0) | 120;                  sprites[0].attribute2 = 0;                      
<br/>
<br/>
   for(loop = 0; loop &lt; 2048; loop++)      // 64x64 / 2 pixels at a time
<br/>
          {
<br/>
             OAMData[loop] = playerData[loop];
<br/>
          }
<br/>
<br/>
        while(1)   //the main game loop
<br/>
   {
<br/>
      GetInput();
<br/>
      RotateSprite(0, angle, zoom, zoom); 
<br/>
      WaitForVsync();
<br/>
      CopyOAM();            }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Most of the code is gbajunkie's with some changes. Anyway, when I run Mappy VM the sprite appears 64x64 but it is all rearranged beyond recognition. Here is the CopyOAM function:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void CopyOAM()
<br/>
{
<br/>
   u16 loop;
<br/>
   u16* temp;
<br/>
   temp = (u16*)sprites;
<br/>
   for(loop = 0; loop &lt; 128*4; loop++)
<br/>
   {
<br/>
      OAM[loop] = temp[loop];
<br/>
   }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
 I'm not sure if the problem is here or in the translation of the graphic with the pcx2gba program.[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8138 - niltsair - Wed Jul 02, 2003 6:47 pm</h4>
    <div class="postbody"><span class="postbody">You have to convert your picture using another program because the pixels aren't arranged in the way you expect, for sprites, instead of being 64x64, the gba expect the sprite data to be divided in tiles 
<br/>
<br/>
(Tile 00) (Tile 01) (Tile 02) (Tile 03) (Tile 04) (Tile 05) (Tile 06) (Tile 07) 
<br/>
(Tile 08) (Tile 09) (Tile 10) (Tile 11) (Tile 12) (Tile 13) (Tile 14) (Tile 15)
<br/>
....
<br/>
<br/>
Where each tile are a 8x8 pixels block.
<br/>
<br/>
Anyway, there's probably an option for pcx2gba to output sprite format, and if not, you'll have to pick another converter.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8146 - Foz - Thu Jul 03, 2003 12:54 am</h4>
    <div class="postbody"><span class="postbody">Thanks niltsair.  I used pcx2sprite and it worked fine.  gbajunkie's tutorial says to use pcx2gba.  He must have gotten them mixed up.  I'll send him an email.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
