<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GNU Make and "recompiling" graphics files - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Graphics > GNU Make and "recompiling" graphics files</h2>
<div id="posts">
<div class="post">
    <h4>#118920 - tepples - Sun Feb 18, 2007 6:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=118915#118915" target="_blank">a digression about recompiling parts of a project</a>, HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">So what you're saying is if each source file is compiled to its own object file, there will never be a need to recompile one source file that hasn't changed just because another has? That makes sense</td> </tr></table><span class="postbody">
<br/>
Of course it <span style="font-style: italic">makes</span> sense; it's Make.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">and I suppose if compiling was taking a long time, I could exploit this by storing somewhere the date and time each file was last compiled, and only recompiling if the last modification date is later than this.</td> </tr></table><span class="postbody">
<br/>
Make does this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In <a class="postlink" href="http://www.gnu.org/software/make/" target="_blank">GNU Make home page</a>, the package maintainer wrote:</b></span></td> </tr> <tr> <td class="quote">If a target file is newer than all of its dependencies, then it is already up to date, and it does not need to be regenerated. The other target files do need to be updated, but in the right order: each target file must be regenerated before it is used in regenerating other targets.</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">So far, though, I don't think I've had anything take more than 10 seconds to compile, even with tens of thousands of lines.</td> </tr></table><span class="postbody">
<br/>
But how big of projects have you tackled? LOCKJAW: The Overdose (TOD) has twelve C source code files, several header files, and four GBFS files. "bkgnds.gbfs" depends on compressed .lz files, which depend on .spl4 (for title screen) and .todbg (for in-game background) files, which depend on .bmp files. "samples.gbfs" depends on .8gbm files, which depend on .wav files. Yes, Make is good for more than calling GCC to turn program source code into object code; it can also call programs to turn PC graphics formats into GBA-native compressed graphics formats. In fact, compatibility with Make is why I prefer command-line graphics conversion programs to those that use only a GUI.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">I'd end up recompiling them all anyway, because just typing "make" is easier than "make file.c".</td> </tr></table><span class="postbody">
<br/>
Make automatically looks at all the files and sees what needs to be rcompiled based on modification dates. All you have to do is "make tod.gba" or, if tod.gba is listed as the makefile's primary target file, just "make".
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">Bit off topic?</td> </tr></table><span class="postbody">
<br/>
I can't split a topic in the middle of a post, so I'll split it as of this post.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119019 - HyperHacker - Mon Feb 19, 2007 3:45 am</h4>
    <div class="postbody"><span class="postbody">Heh, but it's still in Graphics. :-p
<br/>
<br/>
I'm too lazy to count the number of lines/graphics/etc right now, but last I checked, both added up to over 10000 lines. My Pok?mon level editor has 840KB of source code and graphics, while my Mario Kart 64 "editor" (with no editing functions yet) has 211K. Both also include various files from a "general-purpose" directory (re-useable code), so the totals would be a bit higher than that. Neither of these are NDS apps, but the compile time shouldn't be a lot different, should it?
<br/>
<br/>
I don't mean to sound like I'm arguing against the idea of compiling each file to its own object file and not including them all together into one big lump. I'm just trying to understand what all the benefits are.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119051 - keldon - Mon Feb 19, 2007 11:09 am</h4>
    <div class="postbody"><span class="postbody">#1: compilation time. If you have to compile an entire project everytime you edit one file then your compile time is greatly reduced. Plus when you wish to edit only a graphic file why on earth would you want to compile the entire project? It makes no sense.
<br/>
<br/>
#2: kick bad habits from early. When you get into doing larger projects you will not be able to work by including c files and will need to be familiar with using makefiles and including header files. There are a few extra keywords that you will be using in some circumstances. You may also find that you are less encouraged to take up good coding practices that are fine for small projects but don't scale up as the task grows.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119062 - sgeos - Mon Feb 19, 2007 12:18 pm</h4>
    <div class="postbody"><span class="postbody">You might generate source files from fancy user friendly files.  This can be time consuming- more so if it is not automated.  You can generate object files from binary files.  In both cases, make is your friend.
<br/>
<br/>
Include can be made to work, but it will work no better than the standard approach; it may indeed not work nearly as well.  Very few experienced programmers would be happy to see the include approach.  They probably won't want to work on a project with you.  If they don't want to work with you, they won't hire you.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119084 - tepples - Mon Feb 19, 2007 2:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">You might generate source files from fancy user friendly files.  This can be time consuming- more so if it is not automated.  You can generate object files from binary files.  In both cases, make is your friend.</td> </tr></table><span class="postbody">
<br/>
Can make be taught to operate a GUI conversion tool? Or should developers be diligent to avoid GUI conversion tools that do not also have a command-line mode and warn the authors of those tools that their work will be avoided for this reason?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119102 - wintermute - Mon Feb 19, 2007 6:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Can make be taught to operate a GUI conversion tool? 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
No.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Or should developers be diligent to avoid GUI conversion tools that do not also have a command-line mode and warn the authors of those tools that their work will be avoided for this reason?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes.
<br/>
<br/>
This is probably one of the major reasons why old school programmers nearly always provide command line options in their tools.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119203 - Miked0801 - Tue Feb 20, 2007 7:40 pm</h4>
    <div class="postbody"><span class="postbody">Old-school?  Any program that has to do any real, automated work needs a command line interface.  GUIs are nice, but command line gets stuff done.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119206 - poslundc - Tue Feb 20, 2007 8:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">Old-school?  Any program that has to do any real, automated work needs a command line interface.  GUIs are nice, but command line gets stuff done.</td> </tr></table><span class="postbody">
<br/>
<br/>
I might narrow that by saying "command line has an almost universally accessible interface for scripting".
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119292 - Miked0801 - Wed Feb 21, 2007 5:12 pm</h4>
    <div class="postbody"><span class="postbody">Fair :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119296 - sgeos - Wed Feb 21, 2007 6:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Can make be taught to operate a GUI conversion tool? Or should developers be diligent to avoid GUI conversion tools that do not also have a command-line mode and warn the authors of those tools that their work will be avoided for this reason?</td> </tr></table><span class="postbody">
<br/>
gd is an easy library to use.  You should be able to write your own graphic filters.  What do you want to do?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
