<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>maped & Ham - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Graphics > maped & Ham</h2>
<div id="posts">
<div class="post">
    <h4>#12722 - RaBBi - Mon Nov 24, 2003 4:03 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
First I wanted to know if someone yet used this wondeful map/tile editor with the Ham Kit.
<br/>
<br/>
I use this kit and, few months ago, when I tested some simple maps, the exported header works fine with Ham.
<br/>
<br/>
But now, using the 0.98.5 version, the result is weird maps...
<br/>
<br/>
I explain here what I do :
<br/>
<br/>
- I load several tilesets that use the same 256 colors palette
<br/>
- These tilesets have tiles in 16 colors each but on a same tileset there are several tiles using a different bank of the big palette
<br/>
- The editor doesn't warn me using this but...
<br/>
<br/>
...when exporting I got 2 errors : one for map and one for tiles (I forgot the error numbers)
<br/>
<br/>
In fact, I rip some commercials games just to learn to dev, and tiles in 8x8, in disorder, are not easy to manipulate.
<br/>
So I rip entire maps (one by layer) and load them in MapEdit each one as a Tileset.
<br/>
<br/>
It seems the problem is from the exported backgroundTiles.c
<br/>
I try to compare with a .c generated by gfx2gba (which works with Ham).
<br/>
The gfx2gba array contains 0x.. values instead of 0x.... values contained in mapedit .c file.
<br/>
<br/>
Thank you ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12738 - RaBBi - Mon Nov 24, 2003 11:27 pm</h4>
    <div class="postbody"><span class="postbody">I fix my problem using "u16" that is more convenient for Ham ^^^
<br/>
<br/>
But now I got other problem with output of MapEdit.
<br/>
<br/>
The tileset that I load use a 256 colors palette that I extract from a game played in VBA.
<br/>
<br/>
I try to do my map and export my headers, but the palette is changed.
<br/>
<br/>
I follow Nessie's recommandations and put the first upper-left tile of my tileset in the index 0 color.
<br/>
But the exported palette replaced this value on all the 16 color palettes by a black color.
<br/>
And rearrange the indexes.
<br/>
<br/>
So I wanted to know if it's possible and how to keep the source palette by using MapEdit.
<br/>
<br/>
Note : The colors are very similar between the 16 color line.
<br/>
So I think that when a tile doesn't use all the colors from a line, it uses the colors from a precedent line that contains them.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12743 - Nessie - Tue Nov 25, 2003 1:17 am</h4>
    <div class="postbody"><span class="postbody">MapEd currently only supports 16 colour tiles ( 16 colours in any of the 8x8 tile blocks).  If you are trying to build a map in 256 colour mode, it won't work like you expect.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12746 - RaBBi - Tue Nov 25, 2003 8:35 am</h4>
    <div class="postbody"><span class="postbody">I don't try to make a map in 256 colors.
<br/>
<br/>
In fact, instead of loading several tilesets with 16 colors each, I load a tileset with more than 16 colors (in my case, it use 4 rows of 16 colors).
<br/>
But each tile of it uses 16 colors. I know it because I ripped this BG from a game that works in 16 color mode.
<br/>
<br/>
Anyway, even if you load only tilesets with 16 colors, you get a map which has more than 16.
<br/>
So I think I'm not wrong in the concept doing this way, but this is the palette (it's the same for all the tilesets I load) which is arranged and I don't want to.
<br/>
I'd like mapEdit uses the palette and don"t try to rearrange it.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12752 - Nessie - Tue Nov 25, 2003 4:18 pm</h4>
    <div class="postbody"><span class="postbody">If you send me your tileset, perhaps I can help, otherwise I'm just guessing at what the problem is?
<br/>
<br/>
One other note is that, like on the GBA hardware, mapEd treats the first color in each 16 colour bank as transparent? 
<br/>
<br/>
So...
<br/>
<br/>
Palette Index #
<br/>
<span style="font-weight: bold">0</span> - Bank 0 - transparent colour
<br/>
<span style="font-weight: bold">1-15</span> - Bank 0 - visible colours
<br/>
<br/>
<span style="font-weight: bold">16</span> - Bank 1 - transparent colour
<br/>
<span style="font-weight: bold">17-31</span> - Bank 1 - visible colours
<br/>
<br/>
<span style="font-weight: bold">32</span> - Bank 2 - transparent colour
<br/>
...etc, etc...
<br/>
<br/>
Just trying to help..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12753 - RaBBi - Tue Nov 25, 2003 5:56 pm</h4>
    <div class="postbody"><span class="postbody">Yes, by the time, I know that (about transparent indexes) ^^
<br/>
And it's why I think mapEd is a great tool too :)
<br/>
<br/>
Ok, I'll try to up here my tileset.
<br/>
I'll put 2 files : one in .png, just exported by the emulator.
<br/>
And the other, a .bmp, which I created from the original .png plus the .pal exported by the emulator (I used PSP to apply the palette to the .bmp)
<br/>
<br/>
If you want more information on my problem, I just can say that :
<br/>
<br/>
- mapEd rearrange the original palette of the tilesets (which use all the same palette) and it's not that I want
<br/>
- even if the display of tileset and map is OK in maped, the fact that it rearranges the palette, occurs tile colors errors on GBA.
<br/>
<br/>
Here come the files (in .rar) &gt;&gt; <a class="postlink" href="http://www.yumeteam.net/gba/mapedit_tofix.rar" target="_blank">download</a>
<br/>
<br/>
Thank you ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12762 - Nessie - Tue Nov 25, 2003 11:06 pm</h4>
    <div class="postbody"><span class="postbody">I would say the tilesets look fine. 
<br/>
<br/>
It seems to me that somone in that past had issues with garbled maps...one thing to consider is that the engine I'm using just uses a single 32x32 tile (256x256 pixels) hardware layer...and uses scrolling and 'seam' updates to allow a map of practically any size. The exported mapEd data is therefore blasted out into a huge rectangular array.
<br/>
<br/>
If you are using a 64x64 tile (512x512 pixel) hardware layer, the data needs to be in 32x32 blocks, with each chunk coming right after the previous chunk.  I helped the kid write code to translate the format, so it's not hard to do.
<br/>
<br/>
Possibly you are experiencing this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12765 - RaBBi - Tue Nov 25, 2003 11:45 pm</h4>
    <div class="postbody"><span class="postbody">Tilesets look fine? What do you mean exactly?
<br/>
Did you try to use it and display on GBA? 
<br/>
<br/>
<br/>
In fact, I'm newbie in dev and I use a Ham dev for the moment.
<br/>
So I don't really understand what do you want me to do.
<br/>
<br/>
But if you manage me, I'll be ok to experience what you want (on GBA of course lol)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12830 - RaBBi - Fri Nov 28, 2003 4:19 pm</h4>
    <div class="postbody"><span class="postbody">after many tries :
<br/>
<br/>
With the help of Photoshop, I manage to load a tileset using X different 16 colors palettes, and the export keeps only the palettes use by the maps and don't rearrange them.
<br/>
That point is OK.
<br/>
<br/>
BUT, the export is not perfect. It seems that the tiles don't point on the right index and right palette.
<br/>
Thus I get a map with tiles using wrong colors.
<br/>
It seems that only the tiles using the first 16 colors are right exported.
<br/>
<br/>
Other thing, which may be linked to the precedent : When I export in BMP, I got a really trash image that use some 4 colors.
<br/>
And when I try to apply the right palette (just to see) I get EXACTLY the same unright colored image than on GBA.
<br/>
<br/>
May I identify some fixes needed by this excellent Map Editor.
<br/>
<br/>
(If I could help too, tell me)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12841 - Nessie - Fri Nov 28, 2003 6:34 pm</h4>
    <div class="postbody"><span class="postbody">MapEd does strip all unused tiles and palettes from the final exported data.  This is done intentionally....(as you'll note, mapEd, allows you to load up mutliple tilesets...)...this is also why there is a tileCount option on the menu (1..2..3 button) that shows the current number of unique tiles and palettes currently in use.
<br/>
<br/>
The is an alternate mode, UnOptimized mode, which you can enable when you create a map...this will export your tileset and palettes un-altered.
<br/>
<br/>
Finally, I currently have no time to support a community version of mapEd...I've had to make some fairly major changes specific to the project that I'm working on, and for various reasons, I can't/won't release this version to the community.
<br/>
<br/>
I would still like to have a community version of mapEd.  If anyone is interested in taking on the development role for that version, I'd very much appreciate it...perhaps other people will appreciate it as well.
<br/>
<br/>
For now, mapEd will not go open source, though it may some time after it reaches version 1.0.</span><span class="gensmall"><br/><br/>Last edited by Nessie on Fri Nov 28, 2003 7:55 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#12847 - RaBBi - Fri Nov 28, 2003 7:24 pm</h4>
    <div class="postbody"><span class="postbody">Ok I understand ^^
<br/>
<br/>
I'll try to do my own tileset from map I'd rip and I'll use this un-optimized mode.
<br/>
I think it can works.
<br/>
This is just the fact that using tiles of 8x8 isn't really easy ^^
<br/>
<br/>
By ripping and reorganizing original map in own tileset, removing manually the flipped and picking bigger tiles (blocks of pixels more than 8x8 to be easier to manipulate), I think mapEd would be able to give the result I want.
<br/>
<br/>
Thank you for all you've done yet ;)<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12862 - RaBBi - Sat Nov 29, 2003 12:38 am</h4>
    <div class="postbody"><span class="postbody">I spoke too fast.
<br/>
<br/>
I've tried with this unoptimized mode, and mapEd keeps on rearranging the palette...
<br/>
<br/>
I've got the same results in both cases.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12883 - Nessie - Sat Nov 29, 2003 3:51 pm</h4>
    <div class="postbody"><span class="postbody">Unoptimized mode was intended for exporting to .h/.c files...it currently has nothing to do with exporting a layer to a .bmp, if that's what you mean.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12895 - RaBBi - Sun Nov 30, 2003 1:12 am</h4>
    <div class="postbody"><span class="postbody">Nope, I told about export headers in these two modes.
<br/>
<br/>
But "don't worry", I find out how to do ^^
<br/>
I recompose my own tilesets from the ripped maps.
<br/>
I identify a palette and make tilesets in 4bits with the metatiles using an unique palette.
<br/>
<br/>
It takes me more time, but the final results is very good and it's now a pleasure to use your editor ^^
<br/>
Even if it still rearranges the palettes, there's no problem cause there is one palette by tileset.
<br/>
<br/>
What I wanted is to load a tileset which use a more than 16 colors palette, and that mapEd export the used colors without rearrange, but it's not possible.
<br/>
But it works and it's OK for me ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
