<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Fun behavior from bools - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>OffTopic > Fun behavior from bools</h2>
<div id="posts">
<div class="post">
    <h4>#173931 - zelbo - Sat May 08, 2010 11:19 pm</h4>
    <div class="postbody"><span class="postbody">figured i'd post it here since i don't expect anyone to figure it out for me, this is one i'm going to need to sort out myself, but i thought it was interesting.
<br/>
i'm using something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">iprintf("%i", is_true());</td> </tr></table><span class="postbody">
<br/>
<br/>
to display some true/false info in the form of 1/0 (this should work, right?). It was working pretty good till i messed something up and now using %i to print something that should be a bool (the function is declared as a bool and returns a bool) is now displaying stuff like "48" and "19".
<br/>
<br/>
I don't know what i screwed up to make that happen, but i'm sure it's going to take some digging to figure this one out.
<br/>
<br/>
I guess i'm getting pretty sloppy now, since i'm trying to make some progress before i'm without computer access for a couple of months (probably the rest of the year). i like living in the woods, but i'm sure going to miss computers. especially cracked.com and programming.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173936 - headspin - Sun May 09, 2010 10:57 am</h4>
    <div class="postbody"><span class="postbody">If your variable returns a bool it should only have a value of 0 or 1. You could always try:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">iprintf("%i", is_true() ? 1 : 0);</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173942 - Pete_Lockwood - Sun May 09, 2010 12:21 pm</h4>
    <div class="postbody"><span class="postbody">48 sounds like ascii '0' but no clue how a function declared as returning a 'typed' bool could be returning '0'.<br/>_________________<br/>It's not an illusion, it just looks like one.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173947 - zeruda - Sun May 09, 2010 5:15 pm</h4>
    <div class="postbody"><span class="postbody">Sometimes when I get random behaviour that makes no sense, after banging my head on the wall for an hour I then realise I should do a complete rebuild and that fixes the issue.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173963 - elwing - Mon May 10, 2010 8:01 am</h4>
    <div class="postbody"><span class="postbody">hum, by the way a bool is:
<br/>
<ul>0 =&gt; false</ul><ul>any other value =&gt; true</ul>it is not:<ul>0 =&gt; false</ul><ul>1 =&gt; true</ul><ul>anyother value =&gt; undefined...</ul>
<br/>
<br/>
edit: hum, and by the way you should only use boolean as (expression) or as "true" or "false" and not their integer value... (like the "istrue()?1:0" mantionned...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173965 - headspin - Mon May 10, 2010 8:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>elwing wrote:</b></span></td> </tr> <tr> <td class="quote">hum, by the way a bool is:
<br/>
<ul>0 =&gt; false</ul><ul>any other value =&gt; true</ul>it is not:<ul>0 =&gt; false</ul><ul>1 =&gt; true</ul><ul>anyother value =&gt; undefined...</ul>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Running the following in GCC 4.2
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">bool value = 32;
<br/>
<br/>
fprintf(stderr, "%d\n", value);</td> </tr></table><span class="postbody">
<br/>
<br/>
Outputs "1" for me. I always thought it worked as you suggested but it must depend on the compiler.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173966 - elwing - Mon May 10, 2010 8:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>headspin wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Outputs "1" for me. I always thought it worked as you suggested but it must depend on the compiler.</td> </tr></table><span class="postbody">
<br/>
<br/>
hum, you're right it's prolly compiler dependent... not sure if ANSI says something specific about that... anyway you should never use the integer value directly...
<br/>
<br/>
another reason to not use the integer value is that bool basic type is not always the same (not sure if that's an error or if that's not something defined by ANSI...) ex: bool is a 32bit int under wondows CE 4.2 but a 8bit integer under windows CE 5.0</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173985 - ninjalj - Mon May 10, 2010 10:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>elwing wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>headspin wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Outputs "1" for me. I always thought it worked as you suggested but it must depend on the compiler.</td> </tr></table><span class="postbody">
<br/>
<br/>
hum, you're right it's prolly compiler dependent... not sure if ANSI says something specific about that...</span></td> </tr></table><span class="postbody">
<br/>
<br/>
ISO C 99 says (6.3.1.2.1):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">When any scalar value is converted to _Bool, the result is 0 if the value compares equal
<br/>
to 0; otherwise, the result is 1.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
IDK about C++, but it's probably the same.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173987 - sgeos - Mon May 10, 2010 11:58 pm</h4>
    <div class="postbody"><span class="postbody">I'd read up on GDB and debug it on the PC.  Debuggers are awesome, and GDB isn't hard to learn.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173989 - Drovor - Tue May 11, 2010 3:32 am</h4>
    <div class="postbody"><span class="postbody">You can use "!!is_true()" to convert any true output into 1.  I've never found a need for it, but thought it was a neat trick when I heard of it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173993 - elwing - Tue May 11, 2010 7:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Drovor wrote:</b></span></td> </tr> <tr> <td class="quote">You can use "!!is_true()" to convert any true output into 1.  I've never found a need for it, but thought it was a neat trick when I heard of it.</td> </tr></table><span class="postbody">
<br/>
<br/>
lol, neat trick...
<br/>
I wonder what is the best trough between this and a jump using x?1:0...
<br/>
I guess its the double inversion that is faster, am I right?
<br/>
<br/>
that said it really does not matter as the only place where you want to get specifically a 0 or a 1 is only in traces, where performance are already completly out of frame...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174543 - Stocky - Wed Jun 23, 2010 11:07 am</h4>
    <div class="postbody"><span class="postbody">well yes its a neat trick but now new to me..i found it a year ago or so..anyways..thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174544 - vuurrobin - Wed Jun 23, 2010 12:19 pm</h4>
    <div class="postbody"><span class="postbody">you can also use (is_true() != false). not sure what would be the smallest or fastest.
<br/>
<br/>
<br/>
edit: also watch out which language you use. in c++, bool is a real type which can only be true or false. but in c it is useally an enum that may have other values than specified in the enum definition.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174547 - sajiimori - Wed Jun 23, 2010 10:59 pm</h4>
    <div class="postbody"><span class="postbody">In C++, bool is an integer type.  You can do arbitrary integer operations on them, such as +=.  Don't assume they're either 0 or 1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174631 - kusma - Fri Jul 02, 2010 6:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">In C++, bool is an integer type.  You can do arbitrary integer operations on them, such as +=.  Don't assume they're either 0 or 1.</td> </tr></table><span class="postbody">
<br/>
C99 introduced a C++ style bool-type, so this goes for C99 and above as well. For older C-languages, there is no bool type.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174633 - ninjalj - Sat Jul 03, 2010 2:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">In C++, bool is an integer type.  You can do arbitrary integer operations on them, such as +=.  Don't assume they're either 0 or 1.</td> </tr></table><span class="postbody">
<br/>
C99 introduced a C++ style bool-type, so this goes for C99 and above as well. For older C-languages, there is no bool type.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know about C++, but in C99 you can assume any _Bool var (or bool, which is a macro defined in &lt;stdbool.h&gt;) is either 0 or 1. See my post above.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174634 - vuurrobin - Sat Jul 03, 2010 3:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">In C++, bool is an integer type.  You can do arbitrary integer operations on them, such as +=.  Don't assume they're either 0 or 1.</td> </tr></table><span class="postbody">
<br/>
<br/>
I just tried it in c++ and c (by including stdbool.h) using mingw, and although I could use += etc, the value of the bool stayed 1 or 0.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174636 - sajiimori - Sat Jul 03, 2010 11:47 pm</h4>
    <div class="postbody"><span class="postbody">Indeed, I just tried various ways to trick MinGW into producing a bool with a value other than 0 or 1 (besides reinterpretation which is totally cheating), and I couldn't do it.
<br/>
<br/>
So, at least GCC and MSVC try to guarantee that bools are 0 or 1.  That's good news.  Now I can't remember if I ever actually had a problem with C++ bool, or if I've just been paranoid for no reason.  :)
<br/>
<br/>
Interestingly, MinGW doesn't trust its own booleans to be 0 or 1.  Indexing into an array with "b != false" generates extra opcodes as opposed to just indexing with b.  Oh well, miscellaneous trivia...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174647 - ninjalj - Sun Jul 04, 2010 9:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Interestingly, MinGW doesn't trust its own booleans to be 0 or 1.  Indexing into an array with "b != false" generates extra opcodes as opposed to just indexing with b.  Oh well, miscellaneous trivia...</td> </tr></table><span class="postbody">
<br/>
<br/>
That's because the array index is an integer (technically, when subscripting an array, one of the expressions shall have type "pointer to object type", and the other shall have integer type), so the equality expression gets an integer promotion.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
