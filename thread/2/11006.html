<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS WiFi hosts, pub library access - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>OffTopic > DS WiFi hosts, pub library access</h2>
<div id="posts">
<div class="post">
    <h4>#100935 - Libnet - Thu Aug 31, 2006 10:22 pm</h4>
    <div class="postbody"><span class="postbody">I am responsible for the public wireless access for a library system and I would like to provide support for the nintendo DS wireless.  We require the use of captive portals on all our wireless networks, so initially that cuts off the DS since it has no browser to view the portal page.  I have tried talking to nintendo support but they don't have a script for what I am asking.  
<br/>
<br/>
I don't have access to a DS or know anyone with one so I have been trying to find out online what servers the DS connects to.  I am guessing that all the traffic between wireless DS users goes to a central set of servers, and that the DS's are not talking directly to each other.  Could someone tell me from experience or by sniffing traffic what servers the DS tries to connect to when it first connects to a wireless network, and then when it plays a multiplayer game.
<br/>
<br/>
Most captive portals can easly allow traffic to a certain host or hosts even if the device hasn't authenticated through the portal.  So I can just allow traffic to those servers and the DS would be supported.  
<br/>
<br/>
It would be nice to get DS users into the library by providing them a service like this.
<br/>
<br/>
Thanks for your help.
<br/>
Josh</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100940 - Lick - Thu Aug 31, 2006 10:45 pm</h4>
    <div class="postbody"><span class="postbody">The DS Wifi system just connects to an Access Point, the way a laptop does. After that, it's free connecting/sending/receiving to whatever and whoever you want, and in what message-protocol (HTTP/FTP/custom protocol) you like.
<br/>
<span style="font-weight: bold">There are no central servers, just the local AP and the worldwideweb.</span>
<br/>
<br/>
It has a totally different connection mode though, that can get comparable results with BlueTooth. I actually think that it's programmed similarly to BlueTooth is.
<br/>
<span style="font-weight: bold">In this case, there's not even an AP. It's DS to DS, directly!</span><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100941 - Libnet - Thu Aug 31, 2006 10:58 pm</h4>
    <div class="postbody"><span class="postbody">I don't see it being the same as a laptop though, a laptop has no problem with a captive portal because it can run a web browser to get to the authentication screen.  I don't think the web browser is released yet, if it was that could provide a workaround.  They could plug in the browser, connect to the splash screen and authenticate.  Shutdown the DS and swap out the browser for whatever multiplayer game they want to play and connect again, and they might still be authenticated on the firewall, depending on the firewall. 
<br/>
<br/>
I would like to support users that just want to play official multiplayer games.  I have heard that the DS use gamespy as it's server browser, but I don't know that for sure.
<br/>
<br/>
I haven't heard that you have to forward any ports back to the DS for multiplayer games to work, if you did that would mean that someone would need to connect directly to the DS, which isn't possible behind a nat gateway or firewall.   So I still think that the games use a central server of some kind.
<br/>
<br/>
Josh</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100942 - Lick - Thu Aug 31, 2006 11:22 pm</h4>
    <div class="postbody"><span class="postbody">I'm sorry, I lost in <span style="text-decoration: underline">what your goal</span> is and <span style="text-decoration: underline">what you want to create.. </span>
<br/>
<br/>
Having a central server doesn't have anything to do with the fact that it can connect to other servers as well. It can! So it can also connect to your website's server. Depending how much graphics your website is designed to have, Opera DS will be able to load it up!<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100947 - tepples - Thu Aug 31, 2006 11:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Libnet wrote:</b></span></td> </tr> <tr> <td class="quote">I don't think the web browser is released yet, if it was that could provide a workaround.  They could plug in the browser</td> </tr></table><span class="postbody">
<br/>
Which costs extra and is not scheduled for a North American release. Please fill in the "Location:" field of <a class="postlink" href="http://forum.gbadev.org/profile.php?mode=editprofile" target="_blank">your profile</a>.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I would like to support users that just want to play official multiplayer games.  I have heard that the DS use gamespy as it's server browser, but I don't know that for sure.</td> </tr></table><span class="postbody">
<br/>
Whitelist MAC addresses 0009BF:* (DS) and 001656:* (DS Lite).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I haven't heard that you have to forward any ports back to the DS for multiplayer games to work, if you did that would mean that someone would need to connect directly to the DS, which isn't possible behind a nat gateway or firewall. So I still think that the games use a central server of some kind.</td> </tr></table><span class="postbody">
<br/>
DS games require support for UDP. However, some NATs can automatically forward incoming UDP packets from a remote host to a DS if the DS has already sent a UDP packet on that port to the same host.
<br/>
<br/>
You could contact Nintendo on behalf of the library and ask for help in setting this up.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100978 - Lick - Fri Sep 01, 2006 9:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">DS games require support for UDP. However, some NATs can automatically forward incoming UDP packets from a remote host to a DS if the DS has already sent a UDP packet on that port to the same host.
<br/>
<br/>
You could contact Nintendo on behalf of the library and ask for help in setting this up.</td> </tr></table><span class="postbody">
<br/>
I didn't know about this.. But I'm sure they use TCP for the lobbying first. 
<br/>
<br/>
Is there a way we could make our games work with their Central Servers then? :p<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100982 - Flood_of_SYNs - Fri Sep 01, 2006 10:07 am</h4>
    <div class="postbody"><span class="postbody">Whitelisting the DS and DSlite MAC address range is the best idea (same thing the <a class="postlink" href="http://en.wikipedia.org/wiki/McDonald%27s" target="_blank">McDonalds</a> in my area do for DS internet access).
<br/>
<br/>
About a month or so ago I did alot of DS WFC packet capturing.
<br/>
And here is what I have observed.
<br/>
<br/>
The DS uses this to test that it can get to the internet.
<br/>
<a class="postlink" href="http://conntest.nintendowifi.net/" target="_blank">http://conntest.nintendowifi.net/</a>
<br/>
<br/>
It uses HTTPS for what looks like authentication, and UDP packets when you are playing the game.<br/>_________________<br/><span style="font-weight: bold"><span style="font-size: 9px; line-height: normal"><span style="color: blue">Blue NDS v4 (FlashMe v7) - GBAMP V2 CF</span>
<br/>
?There is no shame in not knowing; the shame lies in not finding out.?
<br/>
?The church is near but the road is icy, the bar is far away but I will walk carefully?</span></span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
