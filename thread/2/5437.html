<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Emulating Commodore 64 on Nintendo DS? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>OffTopic > Emulating Commodore 64 on Nintendo DS?</h2>
<div id="posts">
<div class="post">
    <h4>#39795 - ampz - Tue Apr 12, 2005 11:17 am</h4>
    <div class="postbody"><span class="postbody">Should be doable... There are open source sid players and C64 emulators available.
<br/>
However, I'd much rather see a C64 emulator for GBA than just a SID player. Do that and I will kiss your feet. :)
<br/>
<br/>
The C64 resolution (320*200) does not quite fit the GBA screen, but NES could be scaled without too visible artefacts, so I guess the same should be doable with C64. Should actually be a bit easier since the NES I think has a troublesome resolution of 256*256.
<br/>
<br/>
320/240 = 4/3 = 1.33
<br/>
200/160 = 5/4 = 1.25
<br/>
<br/>
Seems to me like scaling factor 4/3 would be appropriate for both the horizontal and vertical since this would leave a few pixels at the top and bottom to show the C64 screen border.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39835 - Quirky - Tue Apr 12, 2005 8:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Should actually be a bit easier since the NES I think has a troublesome resolution of 256*256.</td> </tr></table><span class="postbody">
<br/>
<br/>
The NES can make use of tile modes, the C64 would have to use somekind of "bitmap" I imagine. The extra overhead interpretting the screen might be a bit of a problem?
<br/>
<br/>
Also, Splam released a SID player a few years ago for the GBA. Have a skeet on <a href="http://www.gbadev.org/demos.php" target="_blank">http://www.gbadev.org/demos.php</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39846 - ampz - Tue Apr 12, 2005 10:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quirky wrote:</b></span></td> </tr> <tr> <td class="quote">The NES can make use of tile modes, the C64 would have to use somekind of "bitmap" I imagine. The extra overhead interpretting the screen might be a bit of a problem?</td> </tr></table><span class="postbody">
<br/>
"interpretting the screen" ?
<br/>
Bitmaps are bitmaps... There is little to interpret.
<br/>
The C64 has tile (text) modes as well, not that I see the relevance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39858 - tepples - Wed Apr 13, 2005 12:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">The C64 resolution (320*200) does not quite fit the GBA screen, but NES could be scaled without too visible artefacts, so I guess the same should be doable with C64. Should actually be a bit easier since the NES I think has a troublesome resolution of 256*256.</td> </tr></table><span class="postbody">
<br/>
NES resolution is 256x240, and PocketNES scales a 240x213 pixel window of that down to 240x160. The point is PocketNES style scaling works in practice because it's a lot easier to scale height than to scale width.
<br/>
<br/>
The C=64 often uses tile modes, but symmetrically scaling tiles as you suggest would tend to leave <a class="postlink" href="http://www.pocketnes.org/res/bad/" target="_blank">an unreadable mess</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39892 - ampz - Wed Apr 13, 2005 6:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">The C64 resolution (320*200) does not quite fit the GBA screen, but NES could be scaled without too visible artefacts, so I guess the same should be doable with C64. Should actually be a bit easier since the NES I think has a troublesome resolution of 256*256.</td> </tr></table><span class="postbody">
<br/>
NES resolution is 256x240, and PocketNES scales a 240x213 pixel window of that down to 240x160. The point is PocketNES style scaling works in practice because it's a lot easier to scale height than to scale width.
<br/>
<br/>
The C=64 often uses tile modes, but symmetrically scaling tiles as you suggest would tend to leave <a class="postlink" href="http://www.pocketnes.org/res/bad/" target="_blank">an unreadable mess</a>.</span></td> </tr></table><span class="postbody">
<br/>
The readability can be somewhat improved by averaging two lines rather than simply removing every 4th line.
<br/>
<br/>
The DS would be interesting for emulation purposes.. It has the extra CPU power, as well as higher resolution (less scaling) and touchscreen for emulation of keyboards and such.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39912 - tepples - Wed Apr 13, 2005 2:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The C=64 often uses tile modes, but symmetrically scaling tiles as you suggest would tend to leave <a class="postlink" href="http://www.pocketnes.org/res/bad/" target="_blank">an unreadable mess</a>.</td> </tr></table><span class="postbody">
<br/>
The readability can be somewhat improved by averaging two lines rather than simply removing every 4th line.</span></td> </tr></table><span class="postbody">
<br/>
Hardware scaling can't just "average two lines". PocketNES fakes averaging by drawing two lines alternately to the LCD, but if you're using fake averaging vertically, then you can't really use fake averaging horizontally at the same time. Or do you suggest rendering the whole screen in software to begin with?
<br/>
<br/>
(Video related comments split from another thread about SID emulation.)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39916 - ampz - Wed Apr 13, 2005 2:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Hardware scaling can't just "average two lines". PocketNES fakes averaging by drawing two lines alternately to the LCD,</td> </tr></table><span class="postbody">I know. That's why the averaged lines in pocketNES flicker slightly.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">but if you're using fake averaging vertically, then you can't really use fake averaging horizontally at the same time. Or do you suggest rendering the whole screen in software to begin with?</td> </tr></table><span class="postbody">
<br/>
That would probably be the easiest solution. Sprites could still be handled in hardware.
<br/>
Or perhaps it is possible to do scaled tile modes by building the entire screen using sprites, or multiple tile backgrounds, or both.
<br/>
C64 bitmap modes would have to be software scaled anyway, but that can probably be done without much extra processing requirements.
<br/>
<br/>
EDIT
<br/>
Hardware scaling should of course not be much of a problem on the DS..
<br/>
For the GBA, each tile can be displayed in the form av a sprite. Only use 6*6pixels of each sprite, let the rest of the pixels be transparent. There would be 40 sprites per scanline, so the GBA sprite limit is not a problem.
<br/>
<br/>
The only thing that would have to be done in software is scaling the individual 8*8 tiles to 6*6 sprites. But that should not be much of a problem since it will only have to be done when the game updates the tile data.
<br/>
Oh, and of course some hblank DMA will have to update parts of OAM every now and then since there are "only" 128 hardware sprites in the GBA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39943 - tepples - Wed Apr 13, 2005 8:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Hardware scaling should of course not be much of a problem on the DS</td> </tr></table><span class="postbody">
<br/>
Unlike many other 3D consoles' pixel shaders, such as those of the N64 and the PSP, the pixel shader in the Nintendo DS does <span style="font-style: italic">not</span> use linear interpolation. Instead, it uses PS1 style nearest neighbor resampling. However, would it be too hard to write a software downsampler for the ARM9?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">[For tile modes, t]he only thing that would have to be done in software is scaling the individual 8*8 tiles to 6*6 sprites. But that should not be much of a problem since it will only have to be done when the game updates the tile data.</td> </tr></table><span class="postbody">
<br/>
You haven't seen a lot of "DYCP" demos that dynamically update almost all the tile data every frame. It's not like the NES, where tile data can be updated only during vblank; the Commodore 64 allows write access to tile data almost all the time, with VRAM access being interleaved between the CPU and the PPU just as on the GBA.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39947 - ampz - Wed Apr 13, 2005 9:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">[For tile modes, t]he only thing that would have to be done in software is scaling the individual 8*8 tiles to 6*6 sprites. But that should not be much of a problem since it will only have to be done when the game updates the tile data.</td> </tr></table><span class="postbody">
<br/>
You haven't seen a lot of "DYCP" demos that dynamically update almost all the tile data every frame. It's not like the NES, where tile data can be updated only during vblank; the Commodore 64 allows write access to tile data almost all the time, with VRAM access being interleaved between the CPU and the PPU just as on the GBA.</span></td> </tr></table><span class="postbody">
<br/>
Even if tile data is updated all the time in some games and demos, why would that be much of a problem?
<br/>
Yes, rewriting and scaling tile data probably takes two to three times the cycles compared to just rewriting it. It is still not alot of cycles.
<br/>
It might cause some games and demos to run a bit slower on the GBA, but most will do just fine. And there would certainly not be any problems on the DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40016 - sgeos - Thu Apr 14, 2005 2:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Hardware scaling should of course not be much of a problem on the DS..
<br/>
For the GBA, each tile can be displayed in the form av a sprite. Only use 6*6pixels of each sprite, let the rest of the pixels be transparent. There would be 40 sprites per scanline, so the GBA sprite limit is not a problem.
<br/>
<br/>
The only thing that would have to be done in software is scaling the individual 8*8 tiles to 6*6 sprites. But that should not be much of a problem since it will only have to be done when the game updates the tile data.</td> </tr></table><span class="postbody">
<br/>
Why not just hardware scale a BG?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40036 - ampz - Thu Apr 14, 2005 5:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Hardware scaling should of course not be much of a problem on the DS..
<br/>
For the GBA, each tile can be displayed in the form av a sprite. Only use 6*6pixels of each sprite, let the rest of the pixels be transparent. There would be 40 sprites per scanline, so the GBA sprite limit is not a problem.
<br/>
<br/>
The only thing that would have to be done in software is scaling the individual 8*8 tiles to 6*6 sprites. But that should not be much of a problem since it will only have to be done when the game updates the tile data.</td> </tr></table><span class="postbody">Why not just hardware scale a BG?
<br/>
-Brendan</span></td> </tr></table><span class="postbody">
<br/>
For one, GBA hardware scaling of BGs does not average pixels.
<br/>
Second, I don't think the scaleable BGs are big enough IIRC.
<br/>
Third, scaleable BGs do not support a few essential feature most other consoles do support. Like wrap around. Not sure if the C64 supports this, I would have to look that up.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40060 - Lord Graga - Thu Apr 14, 2005 9:13 pm</h4>
    <div class="postbody"><span class="postbody">GBA supports wraparound with rotated BG's.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40063 - tepples - Thu Apr 14, 2005 9:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">GBA supports wraparound with rotated BG's.</td> </tr></table><span class="postbody">
<br/>
But are rotated BGs large enough, in terms of number of distinct tiles?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40066 - ampz - Thu Apr 14, 2005 9:44 pm</h4>
    <div class="postbody"><span class="postbody">I stand corrected.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40144 - FluBBa - Fri Apr 15, 2005 12:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">GBA supports wraparound with rotated BG's.</td> </tr></table><span class="postbody">
<br/>
But are rotated BGs large enough, in terms of number of distinct tiles?</span></td> </tr></table><span class="postbody">
<br/>
In one way, yes. The C64 only has 256 tiles.
<br/>
But you can change the palette for each(?) tile (which is quite hard in Rot/Scale mode on the GBA as it's 256 color and no palette switch) and it can switch which bank of tiles it uses, and the tiles on the C64 are 1/2bitplane, converting this to 8bitplane on the GBA takes 4/8 times more memory.
<br/>
<br/>
Mmm, doesn't sound completly perfect to me.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
