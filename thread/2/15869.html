<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>FLISL (Forth-Like Interpreted Scripting Language) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>OffTopic > FLISL (Forth-Like Interpreted Scripting Language)</h2>
<div id="posts">
<div class="post">
    <h4>#161009 - zzo38computer - Sat Jul 26, 2008 6:51 am</h4>
    <div class="postbody"><span class="postbody">Do you think this is a good of scripting-language to embed to other program? Please make a comment of it.
<br/>
<br/>
Specifications and examples at: <a class="postlink" href="http://zzo38computer.cjb.net/flisl/" target="_blank">http://zzo38computer.cjb.net/flisl/</a>
<br/>
<br/>
This is something I made today and think it is good idea for embedding scripting. I used it in my own program sometimes as well.<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161010 - nanou - Sat Jul 26, 2008 7:20 am</h4>
    <div class="postbody"><span class="postbody">Context (please specify).
<br/>
<br/>
It definitely depends on what you intend to use it for and what the implementation does. At first I'm tempted to say "no", but if it code for it were close to to the size profile of an actual forth machine, then it could make a good extension language, for example. But for most uses of scripting, it would be a pain to use IMO.
<br/>
<br/>
OTOH, why not just implement Forth? I find stack machines awkward to program for so if I'm not getting the benefits of Forth, I don't want to put up with what I see as the drawbacks. But I guess some people love programming that way.<br/>_________________<br/>- nanou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161016 - keldon - Sat Jul 26, 2008 8:52 am</h4>
    <div class="postbody"><span class="postbody">Hmm; the syntax looks a little ambiguous/inconsistent to me! I created some incremental garbage collection code if you would like to have a look I could send it to you!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161038 - zzo38computer - Sat Jul 26, 2008 4:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">Hmm; the syntax looks a little ambiguous/inconsistent to me!</td> </tr></table><span class="postbody">Can you tell me what you see as inconsistent/ambiguous? If there are mistakes, I would like to correct them.
<br/>
<br/>
(Note: Also, I have simplified the ]ELSE and ]ELSE[ commands to go to the end of the next block and executes the command ending that block.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">I created some incremental garbage collection code if you would like to have a look I could send it to you!</td> </tr></table><span class="postbody">Can't you just post it here instead? Is that code relevant to this topic, please?<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161051 - keldon - Sun Jul 27, 2008 12:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zzo38computer wrote:</b></span></td> </tr> <tr> <td class="quote">Can you tell me what you see as inconsistent/ambiguous? If there are mistakes, I would like to correct them.</td> </tr></table><span class="postbody">
<br/>
<br/>
The WHILE loop seems a little pointless when compared with the if and does not seem to belong to the same trail of thought; so maybe it should appear more like below ...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x WHILE [commands ]</td> </tr></table><span class="postbody">
<br/>
... although the "do while" loop does seem coherent and the "if next" loop is an interesting one. (EDIT; it might make complete sense in forth, I've never used it).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zzo38computer wrote:</b></span></td> </tr> <tr> <td class="quote">Can't you just post it here instead? Is that code relevant to this topic, please?</td> </tr></table><span class="postbody">
<br/>
I haven't published the code so I couldn't post a link to it. As for its relevance, it all depends on the type of data your vm operates on; any type of data construct with the need for resource management is a potential candidate for GC.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161052 - sajiimori - Sun Jul 27, 2008 12:20 am</h4>
    <div class="postbody"><span class="postbody">The WHILE should be inside the brackets because the ]LOOP command jumps back to the opening bracket, and if the WHILE was outside the brackets, it wouldn't be executed again.
<br/>
<br/>
Forth is very literal like that, which is part of its charm.  =)
<br/>
<br/>
Edit: As for my opinion on using a Forth-like language for scripting: Forth is oriented toward the "how" more than the "what" of programming, and in that sense is not as expressive as I'd like.
<br/>
<br/>
It also requires a mechanical and diciplined style of thinking, which means technically-challenged scripters won't be able to cobble together bits of game logic without a lot of assistance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161053 - keldon - Sun Jul 27, 2008 1:00 am</h4>
    <div class="postbody"><span class="postbody">Oh; I had a feeling it might be part of forth literature; I also noticed that I misread the definition of the IF WHILE construct. I thought it was the same as the loop, now that makes much more sense as a language!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161054 - zzo38computer - Sun Jul 27, 2008 2:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x IF[ commands y ]NEXT</td> </tr></table><span class="postbody"> is effectively the same as </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x IF[ commands y ]WHILE</td> </tr></table><span class="postbody"> in FLISL, use whatever is most sensible to you (a proper implementation of FLISL should accept both ways). This type of loop allows you to have one condition for the first iteration and another condition for the rest of the iterations of the loop. If you want the same condition each time, the </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">[ x WHILE commands ]LOOP</td> </tr></table><span class="postbody"> format is better.
<br/>
<br/>
Some differences from Forth and FLISL and what the equivalent commands would be:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Forth  :::  FLISL
<br/>
<br/>
IF x ELSE y THEN  :::  IF[ x ]ELSE[ y ]
<br/>
BEGIN x UNTIL  :::  [ x ]UNTIL
<br/>
BEGIN x AGAIN  :::  [ x ]LOOP
<br/>
BEGIN x WHILE y REPEAT  :::  [ x WHILE y ]LOOP
<br/>
BEGIN WHILE REPEAT 0  :::  AND[ ]NEXT
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161134 - zzo38computer - Tue Jul 29, 2008 1:28 am</h4>
    <div class="postbody"><span class="postbody">I just fixed it up a bit and added some stuff. (ELSE works a bit differently now) Now it is improved?<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161185 - nce - Wed Jul 30, 2008 12:39 am</h4>
    <div class="postbody"><span class="postbody">Personnally I've implemented a stack machine in my project, but I've build a compiler to use the same syntax a C...  
<br/>
<br/>
I find the FLISL syntax quite hard to follow, and would force me to focus to much on it...
<br/>
<br/>
If you just want a good scripting language why not using lua or something ? ( I think lua would have been too much for me, I was just in need of a scripting language for loading and triggering event with the lowest memory impact possible )
<br/>
<br/>
Now, if it's for the fun of doing your own that's a good start :)<br/>_________________<br/>-jerome-</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161191 - zzo38computer - Wed Jul 30, 2008 4:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nce wrote:</b></span></td> </tr> <tr> <td class="quote">Personnally I've implemented a stack machine in my project, but I've build a compiler to use the same syntax a C...  
<br/>
<br/>
I find the FLISL syntax quite hard to follow, and would force me to focus to much on it...
<br/>
<br/>
If you just want a good scripting language why not using lua or something ? ( I think lua would have been too much for me, I was just in need of a scripting language for loading and triggering event with the lowest memory impact possible )
<br/>
<br/>
Now, if it's for the fun of doing your own that's a good start :)</td> </tr></table><span class="postbody">
<br/>
I understand that, but I don't like Lua, however. FLISL is better (in my opinion). If you have implemented a stack machine in your project, maybe you can allow FLISL syntax to be available as well, in case you want to program more direct? (At least I would prefer the FLISL syntax when it is available, many other people would also, but not everyone) Then you have multiple ways of doing that. Lua is too much I think, FLISL should be even more low memory than Lua (and Lua is already low memory usage, compared to JavaScript).
<br/>
<br/>
I also added more optional commands, more examples, and a logo that you can use if you want to indicate which project uses FLISL.<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161342 - tepples - Fri Aug 01, 2008 8:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nce wrote:</b></span></td> </tr> <tr> <td class="quote">If you just want a good scripting language why not using lua or something ? ( I think lua would have been too much for me, I was just in need of a scripting language for loading and triggering event with the lowest memory impact possible )</td> </tr></table><span class="postbody">
<br/>
That might be Lua. I haven't tried Lua, but after I read the manual, a few things jumped out that I'd find hard to get used to, such as the absence of any data structure other than an associative array (which Lua calls a "table" and other languages call a "hash map" or "dict") and the convention of starting array indices as 1.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161369 - nce - Sat Aug 02, 2008 4:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">... and the convention of starting array indices as 1.</td> </tr></table><span class="postbody">
<br/>
<br/>
yes I agree that something annoying but I work a lot with maxscript where it's exactly the same and you can get used to it ( I just do a lot of mistakes if I jump between max and c several time in a day )
<br/>
<br/>
btw : maxscript is one of my favorite scripting language
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zzo38computer wrote:</b></span></td> </tr> <tr> <td class="quote"> If you have implemented a stack machine in your project, maybe you can allow FLISL syntax to be available as well, in case you want to program more direct? </td> </tr></table><span class="postbody">
<br/>
<br/>
yes technically that shouldn't be hard to do.  It's just that I don't have any idea how to specify some part of the language with the flisl syntax ( I haven't look carrefully though )  I've defined my language to do just what I need so :
<br/>
<br/>
3 types of variable scope : local ( only defined inside of the function ) global ( defined for all scripts ) member ( defined for the entire  instance of the script. )
<br/>
3 types of variables : integer , vector ( 3 int ) , string ( 12 characters, same size as a vector )
<br/>
no array, no struct, nothing fancy :)
<br/>
A script is apply to an object ( character , trigger ,... ).
<br/>
A script is a list of event that the object will try to call like : onLoad, onDestroy, onEnter, ....
<br/>
<br/>
btw, it also does the casting automatically when possible like :
<br/>
int i = 0;
<br/>
string x = "aName_" + i;<br/>_________________<br/>-jerome-</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161373 - keldon - Sat Aug 02, 2008 9:49 am</h4>
    <div class="postbody"><span class="postbody">There is also <a class="postlink" href="http://www.somedude.net/gamemonkey/" target="_blank">GameMonkey</a> - if you can get it to compile. In regards to Lua's restrictions on data types, you can do a lot with its associative array system, such as:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Table = {};
<br/>
Table.X = 10;
<br/>
Table["Y"] = 20;
<br/>
print (Table["X"], Table.Y);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161437 - zzo38computer - Sun Aug 03, 2008 4:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nce wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">... and the convention of starting array indices as 1.</td> </tr></table><span class="postbody">
<br/>
<br/>
yes I agree that something annoying but I work a lot with maxscript where it's exactly the same and you can get used to it ( I just do a lot of mistakes if I jump between max and c several time in a day )
<br/>
<br/>
btw : maxscript is one of my favorite scripting language</span></td> </tr></table><span class="postbody">
<br/>
In BASIC you can set the array index starting to whatever you want to. In Forth (but not FLISL) you can also do that, like:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">HERE 1- 5 ALLOT CONSTANT arrayname</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nce wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zzo38computer wrote:</b></span></td> </tr> <tr> <td class="quote"> If you have implemented a stack machine in your project, maybe you can allow FLISL syntax to be available as well, in case you want to program more direct? </td> </tr></table><span class="postbody">
<br/>
<br/>
yes technically that shouldn't be hard to do.  It's just that I don't have any idea how to specify some part of the language with the flisl syntax ( I haven't look carrefully though )  I've defined my language to do just what I need so :
<br/>
<br/>
3 types of variable scope : local ( only defined inside of the function ) global ( defined for all scripts ) member ( defined for the entire  instance of the script. )
<br/>
3 types of variables : integer , vector ( 3 int ) , string ( 12 characters, same size as a vector )
<br/>
no array, no struct, nothing fancy :)
<br/>
A script is apply to an object ( character , trigger ,... ).
<br/>
A script is a list of event that the object will try to call like : onLoad, onDestroy, onEnter, ....
<br/>
<br/>
btw, it also does the casting automatically when possible like :
<br/>
int i = 0;
<br/>
string x = "aName_" + i;</span></td> </tr></table><span class="postbody">
<br/>
FLISL was invented for doing simple things in your scripting language like that (it was invented originally for PuzzleMesh, which needs a embedded scripting language like FLISL). FLISL is good if Lua is too much for you, if you can't or don't want to use Lua, or whatever other reason.
<br/>
<br/>
You could look at the PuzzleMesh code for a old version of FLISL implemented in PHP (together with a bunch of PuzzleMesh-specific commands). When the next version of PuzzleMesh is released it will be updated to correspond with the current FLISL specification.
<br/>
<br/>
If you want a more complex and full one, you can probably implement a full Forth interpreter (which is still pretty short). If your program is written in C you can also embed Lua if you want to, and there is Forth interpreter written in Lua. I found one which wasn't very good and made some improvements to it (and may continue making more improvements later): <a class="postlink" href="http://zzo38computer.cjb.net/luaforth/forth.lua" target="_blank">http://zzo38computer.cjb.net/luaforth/forth.lua</a> Now I can program ToME in Forth (or I could, if ToME used 5.1. Actually it uses Lua 4.0, I checked, I hope they should fix that soon).<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
