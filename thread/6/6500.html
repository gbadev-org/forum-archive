<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>devkitARM release 15 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Announcements And Comments > devkitARM release 15</h2>
<div id="posts">
<div class="post">
    <h4>#50050 - wintermute - Thu Aug 04, 2005 8:46 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://devkitpro.sourceforge.net/" target="_blank">http://devkitpro.sourceforge.net/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50054 - tepples - Thu Aug 04, 2005 9:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In the announcement, you wrote:</b></span></td> </tr> <tr> <td class="quote">bin2s updated to exclude file path from labels</td> </tr></table><span class="postbody">
<br/>
Was the default behavior changed, or was the new behavior put behind a switch the way Info-ZIP's Zip and UnZip tools do it?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
E:\&gt;zip
<br/>
Copyright (C) 1990-1999 Info-ZIP
<br/>
Type 'zip "-L"' for software license.
<br/>
[...]
<br/>
  -r   recurse into directories     -j   junk (don't record) directory names
<br/>
[...]
<br/>
<br/>
E:\&gt;unzip
<br/>
UnZip 5.41 of 16 April 2000, by Info-ZIP.  Maintained by C. Spieler.  Send
<br/>
bug reports to the authors at <a href="mailto:Zip-Bugs@lists.wku.edu">Zip-Bugs@lists.wku.edu</a>; see README for details.
<br/>
[...]
<br/>
  -j  junk paths (do not make directories)   -v  be verbose/print version info
<br/>
[...]
<br/>
<br/>
E:\&gt;
<br/>
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50074 - wintermute - Fri Aug 05, 2005 12:39 am</h4>
    <div class="postbody"><span class="postbody">Currently I've just changed the default behaviour with bin2s. Is there a need for the labels to contain the full pathname?
<br/>
<br/>
Part of this was to enable bin2s to work properly within the automated makefiles used in the example projects.
<br/>
<br/>
gbfs hasn't been changed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50090 - zazery - Fri Aug 05, 2005 8:37 am</h4>
    <div class="postbody"><span class="postbody">I have <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=6194" target="_blank">previously </a> had some problems building the example files. After installing devkitARM r15, it seems that I am getting a few more errors. I made sure to checkout the example files again so I shouldn't have any problem in case some files were left over, even after doing a 'make clean'.
<br/>
<br/>
I'm still learning about the gcc compiler and make files, however it looks like there is a quotation make missing from the error statement when checking for the DEVKITARM system variable. Then it says on line 59 (-fomit-frame-pointer\) that it's missing a separator.
<br/>
<br/>
Here is the output when I compile the examples without modifying the makefile in the PCXView project, as explained above.    
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\examples\gba&gt;make
<br/>
make[1]: Entering directory `/c/examples/gba/PCXView'
<br/>
Makefile:6: Extraneous text after `ifeq' directive
<br/>
Makefile:8: Extraneous text after `endif' directive
<br/>
: No such file or directoryevkitARM/gba_rules
<br/>
Makefile:30: *** missing separator.  Stop.
<br/>
make[1]: Leaving directory `/c/examples/gba/PCXView'
<br/>
make[1]: Entering directory `/c/examples/gba/PlayBoyScout'
<br/>
make[2]: *** No rule to make target `ScoutSplash.o', needed by `/c/examples/gba/
<br/>
PlayBoyScout/PlayBoyScout_mb.elf'.  Stop.
<br/>
make[1]: *** [build] Error 2
<br/>
make[1]: Leaving directory `/c/examples/gba/PlayBoyScout'
<br/>
make[1]: Entering directory `/c/examples/gba/SimpleBGScroll'
<br/>
main.c
<br/>
c:/examples/gba/SimpleBGScroll/source/main.c:47:32: error: r6502_portfont_bin.h:
<br/>
 No such file or directory
<br/>
c:/examples/gba/SimpleBGScroll/source/main.c: In function 'main':
<br/>
c:/examples/gba/SimpleBGScroll/source/main.c:215: error: 'r6502_portfont_bin' un
<br/>
declared (first use in this function)
<br/>
c:/examples/gba/SimpleBGScroll/source/main.c:215: error: (Each undeclared identi
<br/>
fier is reported only once
<br/>
c:/examples/gba/SimpleBGScroll/source/main.c:215: error: for each function it ap
<br/>
pears in.)
<br/>
make[2]: *** [main.o] Error 1
<br/>
make[1]: *** [build] Error 2
<br/>
make[1]: Leaving directory `/c/examples/gba/SimpleBGScroll'
<br/>
make[1]: Entering directory `/c/examples/gba/XbooLoad'
<br/>
XbooLoad.c
<br/>
linking multiboot
<br/>
built ... XbooLoad_mb.gba
<br/>
ROM fixed!
<br/>
make[1]: Leaving directory `/c/examples/gba/XbooLoad'
<br/>
make[1]: Entering directory `/c/examples/gba/mbv2print'
<br/>
mbv2print.c
<br/>
linking cartridge
<br/>
built ... sprite.gba
<br/>
ROM fixed!
<br/>
make[1]: Leaving directory `/c/examples/gba/mbv2print'
<br/>
<br/>
C:\examples\gba&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
Hopefully just a silly error on my part.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50154 - tepples - Sat Aug 06, 2005 2:16 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zazery wrote:</b></span></td> </tr> <tr> <td class="quote">Here is the output when I compile the examples without modifying the makefile in the PCXView project, as explained above.    
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\examples\gba&gt;make
<br/>
make[1]: Entering directory `/c/examples/gba/PCXView'
<br/>
Makefile:6: Extraneous text after `ifeq' directive
<br/>
Makefile:8: Extraneous text after `endif' directive
<br/>
: No such file or directoryevkitARM/gba_rules</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
It could be a line ending problem (UNIX \n vs. Windows \r\n).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50155 - notb4dinner - Sat Aug 06, 2005 2:23 am</h4>
    <div class="postbody"><span class="postbody">Would it be possible for the OSX builds that appeared for r12 and r13 to continue?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50217 - wintermute - Sat Aug 06, 2005 5:32 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>notb4dinner wrote:</b></span></td> </tr> <tr> <td class="quote">Would it be possible for the OSX builds that appeared for r12 and r13 to continue?</td> </tr></table><span class="postbody">
<br/>
<br/>
Hopefully.
<br/>
<br/>
We've been having trouble keeping people around with the time &amp; resources to do the builds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50225 - wintermute - Sat Aug 06, 2005 6:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zazery wrote:</b></span></td> </tr> <tr> <td class="quote">Here is the output when I compile the examples without modifying the makefile in the PCXView project, as explained above.    
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\examples\gba&gt;make
<br/>
make[1]: Entering directory `/c/examples/gba/PCXView'
<br/>
Makefile:6: Extraneous text after `ifeq' directive
<br/>
Makefile:8: Extraneous text after `endif' directive
<br/>
: No such file or directoryevkitARM/gba_rules</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
It could be a line ending problem (UNIX \n vs. Windows \r\n).</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yep, that looks like exactly what the problem is - make sure your cvs client checks out with unix endings.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50228 - zazery - Sat Aug 06, 2005 7:11 pm</h4>
    <div class="postbody"><span class="postbody">You're right, works great now. Thanks tepples and wintermute.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50730 - notb4dinner - Fri Aug 12, 2005 1:20 pm</h4>
    <div class="postbody"><span class="postbody">I've just had a go at building devkitARM on OSX using the build script on CVS.  I'm using the script to download the appropriate packages.  After downloading and extracting a few of the packages it dies with the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">patch: **** Can't open patch file /Users/matt/Desktop/devkitr15/dkarm/patches/binutils-2.16.1.patch : No such file or directory
<br/>
Error patching binutils</td> </tr></table><span class="postbody">
<br/>
<br/>
Edit: Damn I'm stupid.  Remember kiddies download EVERYTHING in the buildscripts module...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51288 - wintermute - Thu Aug 18, 2005 12:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>notb4dinner wrote:</b></span></td> </tr> <tr> <td class="quote">I've just had a go at building devkitARM on OSX using the build script on CVS.  I'm using the script to download the appropriate packages.  After downloading and extracting a few of the packages it dies with the following:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">patch: **** Can't open patch file /Users/matt/Desktop/devkitr15/dkarm/patches/binutils-2.16.1.patch : No such file or directory
<br/>
Error patching binutils</td> </tr></table><span class="postbody">
<br/>
<br/>
Edit: Damn I'm stupid.  Remember kiddies download EVERYTHING in the buildscripts module...</span></td> </tr></table><span class="postbody">
<br/>
<br/>
did you manage to get it to build?
<br/>
<br/>
If not, the latest release is now available for OS X
<br/>
<br/>
<a href="http://www.devkitpro.org/" target="_blank">http://www.devkitpro.org/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51294 - notb4dinner - Thu Aug 18, 2005 12:44 am</h4>
    <div class="postbody"><span class="postbody">Nah, it crapped out building the tools and I couldn't be bothered dealing with it.
<br/>
<br/>
Thanks for the build Mr Spiv.
<br/>
<br/>
Edit: ndstool is dying with 'Illegal instruction'. Do we know what architecture Mr. Spiv built this on/for?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51373 - tepples - Thu Aug 18, 2005 9:08 pm</h4>
    <div class="postbody"><span class="postbody">"r15" is the program counter. Now that you've run out of registers, will you change the numbering system? :-)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51402 - MumblyJoe - Fri Aug 19, 2005 5:14 am</h4>
    <div class="postbody"><span class="postbody">Was the numbering system zero indexed? I don't remember r0? Anyway tepples, we have two CPU's now so winty can start at r0b now. That would confuse some people.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52152 - chishm - Sat Aug 27, 2005 2:08 pm</h4>
    <div class="postbody"><span class="postbody">Since shared IWRAM is no longer included in either link script, how do we use it besides hardcoded pointers? Was there any reason why it was removed from the ARM9 linkscript, and if so, is it going to be in the ARM7 one?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52155 - wintermute - Sat Aug 27, 2005 3:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">Since shared IWRAM is no longer included in either link script, how do we use it besides hardcoded pointers? Was there any reason why it was removed from the ARM9 linkscript, and if so, is it going to be in the ARM7 one?</td> </tr></table><span class="postbody">
<br/>
<br/>
It was removed because it isn't fixed and needs special treatment best left to the end user. Some method of using it may be implemented later but it probably won't be via attributes. For now I strongly suggest ignoring it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52183 - chishm - Sun Aug 28, 2005 4:04 am</h4>
    <div class="postbody"><span class="postbody">I guess I will need to customise the link scripts so I can use it for code. Is there any way to use my own link scripts and crt0 files without placing them in the lib directory. That way I can keep the customised code with the project.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52201 - wintermute - Sun Aug 28, 2005 11:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">I guess I will need to customise the link scripts so I can use it for code. Is there any way to use my own link scripts and crt0 files without placing them in the lib directory. That way I can keep the customised code with the project.</td> </tr></table><span class="postbody">
<br/>
<br/>
Why do you need to use it for code? What happens if the libaries use shared iwram in some way that's incompatible with your use?
<br/>
<br/>
Shared iwram is also a bit of a misnomer given that it's paged.  The intent would seem to be to use it for fast data transfer between processors. I suspect (but haven't tested this yet) that the two pages are mirrored and can be used as if both pages occupy the same 16k area.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52205 - chishm - Sun Aug 28, 2005 12:01 pm</h4>
    <div class="postbody"><span class="postbody">This is for a one off project - a GBAMP boot menu. It is the only place that I can run code from that is almost guaranteed not to be overwritten with another binary. It only needs a small file loader in there, so I don't intend to use many library functions. It would be good to know whether it is paged between the two processors.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52245 - gladius - Sun Aug 28, 2005 6:03 pm</h4>
    <div class="postbody"><span class="postbody">I'd like to second the request for custom linkscript/crt's.  For my purposes, I needed the shared iwram to be assigned to the arm7.  If custom linkscripts/crt break the libraries, that is the fault of the coder, not you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52400 - wintermute - Tue Aug 30, 2005 2:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">This is for a one off project - a GBAMP boot menu. It is the only place that I can run code from that is almost guaranteed not to be overwritten with another binary. It only needs a small file loader in there, so I don't intend to use many library functions. It would be good to know whether it is paged between the two processors.</td> </tr></table><span class="postbody">
<br/>
<br/>
Wouldn't you be better off putting your loader in the gbamp firmware?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52434 - chishm - Tue Aug 30, 2005 10:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Wouldn't you be better off putting your loader in the gbamp firmware?</td> </tr></table><span class="postbody">
<br/>
That's what I'm doing, but I can't run it from the firmware itself because there are some bits of data in certain locations it needs in order to run normally. Also, I need at least 1KB of variables in a place that won't be overwritten with binaries in order to use the CF card. So I'll repeat my question: Is there any way to use custom link scripts? Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52464 - tepples - Wed Aug 31, 2005 3:04 am</h4>
    <div class="postbody"><span class="postbody">Ever played with the -fPIC option? It lets you generate "position independent" code that relies only on PC-relative addressing so that no matter where in RAM the code is copied, it'll still run. At least <a class="postlink" href="http://members.iinet.net.au/~freeaxs/gbacomp/#Displaying%20a%20JPEG%20Image%20on%20the%20GBA" target="_blank">Burton Radons' JPEG decoder</a> uses it.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53022 - ribrdb2 - Mon Sep 05, 2005 3:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">So I'll repeat my question: Is there any way to use custom link scripts? Thanks.</td> </tr></table><span class="postbody">
<br/>
You could look at the GNU ld manpage, I think it's -T option or something like that. You could also look at the .spec files that come with dev kit arm to see how it does it. We have a custom spec file for each project that tells gdb to include the custom crt's and link scripts.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53047 - Quirky - Mon Sep 05, 2005 7:25 pm</h4>
    <div class="postbody"><span class="postbody">I seem to remember rather clumsily using Jeff's crt0.s and linkscript with devkitarm at first until I realised the correct way to do things. You can do it with -nostartfiles -Tlnkscript (replace lnkscript with whatever file you use) and link with crt0.o first. This may not work on the DS of course.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53088 - chishm - Tue Sep 06, 2005 12:52 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the help, unfortunately its a little too late. I have already made the linkscript and crt0 and used a custom spec file in the lib directory. This is okay, since rather than being for a specific program, the linkscript and startup file are designed for any program to be run from the GBAMP firmware, so I will probably reuse them.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ribrdb2 wrote:</b></span></td> </tr> <tr> <td class="quote">We have a custom spec file for each project that tells gdb to include the custom crt's and link scripts.</td> </tr></table><span class="postbody">
<br/>
How do you do that?
<br/>
<br/>
EDIT: Okay, I figured it out, just give the full path to the spec file.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
