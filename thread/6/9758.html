<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>devkitARM release 19 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Announcements And Comments > devkitARM release 19</h2>
<div id="posts">
<div class="post">
    <h4>#85642 - wintermute - Thu Jun 01, 2006 1:49 pm</h4>
    <div class="postbody"><span class="postbody">We've had a few updates today which have hopefully ironed out the hiccups with the latest release.
<br/>
<br/>
The toolchain has now moved to arm-eabi for various reasons, the main one being that -march=armv5te -mtune=arm946e-s works as intended without those nasty linker errors.
<br/>
<br/>
binutils is now 2.16.93
<br/>
gcc is now 4.1.1
<br/>
<br/>
while libgba &amp; libnds 20060531 are listed in the news item a latent problem arose with the division overrides which has been fixed with the 20060601 releases.
<br/>
<br/>
dsbuild is unfortunately missing from the archive due to a small build error which went unnoticed. An archive can be downloaded from devkitpro.org directly.
<br/>
<br/>
While old libraries are not compatible with the new toolchain a tool called change-eabi has been provided which will remark the object files. This should be treated as a last resort and libraries should be recompiled where possible. I've mailed the Apex Audio and Krawall authors about the new toolchain so hopefully you'll be able to get eabi compatible libraries from them soon.
<br/>
<br/>
<br/>
<a href="http://www.devkitpro.org" target="_blank">http://www.devkitpro.org</a>
<br/>
<br/>
As usual the toolchain and latest libraries will be automatically updated for people using the devkitPro updater.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85651 - melw - Thu Jun 01, 2006 3:53 pm</h4>
    <div class="postbody"><span class="postbody">I downloaded the R19, but can't get anything compiling... All the examples give exactly the same error:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">collect2: _spawnvp: No such file or directory
<br/>
make[2]: *** [/c/devkitPro/examples/nds/Graphics/2D/BG_Rotation/BG_Rotation.elf] Error 1</td> </tr></table><span class="postbody">
<br/>
<br/>
This on a PC running WinXP with SP2.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85653 - ribrdb2 - Thu Jun 01, 2006 4:03 pm</h4>
    <div class="postbody"><span class="postbody">What do you mean it's moved to arm-eabi? What was it before? Will this cause problems with debuggers again?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85656 - wintermute - Thu Jun 01, 2006 4:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>melw wrote:</b></span></td> </tr> <tr> <td class="quote">I downloaded the R19, but can't get anything compiling... All the examples give exactly the same error:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">collect2: _spawnvp: No such file or directory
<br/>
make[2]: *** [/c/devkitPro/examples/nds/Graphics/2D/BG_Rotation/BG_Rotation.elf] Error 1</td> </tr></table><span class="postbody">
<br/>
<br/>
This on a PC running WinXP with SP2.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Install msys and/or make sure the msys/bin folder is first in your path.
<br/>
<br/>
The updater does this automatically.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85730 - jake2431 - Fri Jun 02, 2006 1:45 am</h4>
    <div class="postbody"><span class="postbody">Hey wintermute. I haven't tried devKitPro for a while now, but since I saw that there was a new release I decided to try the updater again(remember I was having problems last time?). Anyway I used the updater v. 1.2.7 and it said that another updater was available and i pressed ok(or yes) and that seemed to ge fine. After that it asked if I wanted to use the new updater and I hit yes. then it started to download. About 3o seconds into it, however, it came up with a error message from windows(you know the one that says send or don't send). Any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85735 - swimgod - Fri Jun 02, 2006 2:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
"make" -C arm7
<br/>
make[1]: Entering directory `/f/dissonance/arm7'
<br/>
main.c
<br/>
arm-elf-gcc -MMD -MP -MF /f/dissonance/arm7/build/main.d -g -Wall -O2 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I/f/dissonance/arm7/include -I/f/dissonance/arm7/build -I/c/devkitPro/libnds/include -I/f/dissonance/arm7/build -DARM7 -c /f/dissonance/arm7/source/main.c -o main.o
<br/>
linking dissonance.arm7.elf
<br/>
c:/devkitPro/libnds/lib\libnds7.a: could not read symbols: File format not recognized
<br/>
</td> </tr></table><span class="postbody">
<br/>
i get this problem...
<br/>
<br/>
the libnds7.a is from the new release,
<br/>
and it says "c:/devkitPro/libnds/lib\libnds7.a: could not read symbols: File format not recognized"
<br/>
<br/>
whats wrong?<br/>_________________<br/><span style="font-size: 9px; line-height: normal">
<br/>
1x <span style="font-weight: bold">WII</span> 2x remotes
<br/>
2x NDS/L(FMv7-ORG:v4,FMv7-org:DSL)
<br/>
1x GBAMP
<br/>
2x 1gb (MicroDrive{typeII}&amp;SanDisk{typeI})
<br/>
1x SuperPass2
<br/>
1x Supercard-CF</span>
<br/>
<a class="postlink" href="http://swimgod.com/ms_skins" target="_blank">MoonShell skins</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85772 - PacoChan - Fri Jun 02, 2006 9:18 am</h4>
    <div class="postbody"><span class="postbody">Hi, I have a problem with the new version. When I compile any GBA example or any GBA game I made before, they compile well but they don't work in any version of VisualBoy Advance, they show a white screen. Is this a problem of the release or of the emulator? (DS demos work fine with dualis)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85784 - wintermute - Fri Jun 02, 2006 10:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>swimgod wrote:</b></span></td> </tr> <tr> <td class="quote">[code]
<br/>
<br/>
i get this problem...
<br/>
<br/>
the libnds7.a is from the new release,
<br/>
and it says "c:/devkitPro/libnds/lib\libnds7.a: could not read symbols: File format not recognized"
<br/>
<br/>
whats wrong?</td> </tr></table><span class="postbody">
<br/>
<br/>
<a href="http://www.devkitpro.org/index.php?action=fullnews&amp;id=105" target="_blank">http://www.devkitpro.org/index.php?action=fullnews&amp;id=105</a>
<br/>
<br/>
<a href="http://sourceforge.net/project/shownotes.php?group_id=114505&amp;release_id=421527" target="_blank">http://sourceforge.net/project/shownotes.php?group_id=114505&amp;release_id=421527</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85787 - ProblemBaby - Fri Jun 02, 2006 10:53 am</h4>
    <div class="postbody"><span class="postbody">I get exactly the same error as melw
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
collect2: _spawnvp: No such file or directory 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Install msys and/or make sure the msys/bin folder is first in your path. 
<br/>
<br/>
The updater does this automatically.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I installed with the new version with the updater, so any other ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85789 - wintermute - Fri Jun 02, 2006 10:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
I installed with the new version with the updater, so any other ideas?</td> </tr></table><span class="postbody">
<br/>
<br/>
Check your path. Is the path to the msys bin directory first?
<br/>
<br/>
Did you install msys? Is msys make being used for the build?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85790 - wintermute - Fri Jun 02, 2006 11:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PacoChan wrote:</b></span></td> </tr> <tr> <td class="quote">Hi, I have a problem with the new version. When I compile any GBA example or any GBA game I made before, they compile well but they don't work in any version of VisualBoy Advance, they show a white screen. Is this a problem of the release or of the emulator? (DS demos work fine with dualis)</td> </tr></table><span class="postbody">
<br/>
<br/>
<a href="http://www.devkitpro.org/index.php?action=fullnews&amp;id=110" target="_blank">http://www.devkitpro.org/index.php?action=fullnews&amp;id=110</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85794 - ProblemBaby - Fri Jun 02, 2006 11:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Check your path. Is the path to the msys bin directory first? 
<br/>
<br/>
Did you install msys? Is msys make being used for the build?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't understand what you mean about the bin directory being first, if you mean in the environment variable list, it is.
<br/>
<br/>
msys is installed and its used for the build.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85799 - wintermute - Fri Jun 02, 2006 12:33 pm</h4>
    <div class="postbody"><span class="postbody">I mean this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
C:\&gt;echo %PATH%
<br/>
e:\msys\bin;e:\tools\bin;e:\mingw\bin;C:\WINNT\system32;C:\WINNT;C:\WINNT\System
<br/>
32\Wbem;E:\WATCOM\BINNT;E:\WATCOM\BINW;E:\devstudio\common\Tools\WinNT;E:\devstu
<br/>
dio\common\MSDev98\Bin;E:\devstudio\common\Tools;E:\devstudio\VC98\bin
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
note that the first entry is e:\msys\bin; This is my development msys rather than the msys supplied by devkitPro. I've tried the latter on my setup and it works fine here.
<br/>
<br/>
Does it work from an msys shell?
<br/>
<br/>
Do you have any gcc related environment variables set?
<br/>
<br/>
The one thing that's guaranteed to fix your problem is to remove the elf2flt script but I'd really like to find a way to ensure this works for everyone.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85800 - wintermute - Fri Jun 02, 2006 12:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jake2431 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
 About 3o seconds into it, however, it came up with a error message from windows(you know the one that says send or don't send). Any ideas?</td> </tr></table><span class="postbody">
<br/>
<br/>
Possibly a download problem? Have you tried downloading 1.3.1 manually?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85803 - melw - Fri Jun 02, 2006 12:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Install msys and/or make sure the msys/bin folder is first in your path.
<br/>
<br/>
The updater does this automatically.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, this helped. Everything works now as it should.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85975 - ProblemBaby - Sat Jun 03, 2006 5:15 pm</h4>
    <div class="postbody"><span class="postbody">Installing msys solved the error. Just one more problem my interrupt code doesn't work anymore. As soon as I enable an interrupt, the program hangs. What kind of changes have been made that could cause this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85977 - Cearn - Sat Jun 03, 2006 5:37 pm</h4>
    <div class="postbody"><span class="postbody">This maybe a problem in the linkscripts as well. I've seen __sp_irq, which I guess is used in interrupts, end up in EWRAM instead of IWRAM where it belongs. <a class="postlink" href="http://www.devkitpro.org/index.php?action=fullnews&amp;id=110" target="_blank">linkscript patch news</a>. 
<br/>
If not that, maybe looking in the VBA disassembler can at least point you to where the thing hangs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85986 - ProblemBaby - Sat Jun 03, 2006 6:29 pm</h4>
    <div class="postbody"><span class="postbody">Oh I forgot to tell you that it is NDS code. Dualis and hardware hangs exactly after everything is enabled: IE, IME and DISPSTAT.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85991 - wintermute - Sat Jun 03, 2006 6:48 pm</h4>
    <div class="postbody"><span class="postbody">If you can break it down to a small testcase which fails I can have a look.
<br/>
<br/>
It's certainly possible that the DS linkscripts still have latent problems - there are some issues with calculated values with the newer binutils ld<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86017 - ProblemBaby - Sat Jun 03, 2006 9:58 pm</h4>
    <div class="postbody"><span class="postbody">I think it is my Process Interrupt routine. I putted the code in itcm for arm9 and now it works in dualis, still not on hardware.
<br/>
<br/>
here is the code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   u32 i;
<br/>
   for (i = 0; i &lt; 32; i++)
<br/>
   {
<br/>
      if (REG_IF &amp; BIT(i))
<br/>
         InterruptFunction[i]();
<br/>
   }
<br/>
<br/>
   INTERRUPT_WAITFLAGS |= REG_IE &amp; REG_IF;
<br/>
   REG_IF |= REG_IE &amp; REG_IF;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86067 - DekuTree64 - Sun Jun 04, 2006 4:53 am</h4>
    <div class="postbody"><span class="postbody">Ah yes, there are a couple of linkscript bugs I ran across a while back and mentioned in the chat room, but never got around to writing a proper report on.
<br/>
<br/>
First is in ds_arm9.ld, up at the top:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">__dtcm_end      =   0x00804000;
<br/>
<br/>
__sp_svc   =   __dtcm_end - 0x100;
<br/>
__sp_irq   =   __sp_svc - 0x100;
<br/>
__sp_usr   =   __sp_irq - 0x100;
<br/>
</td> </tr></table><span class="postbody">
<br/>
And then down below
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   .dtcm __dtcm_start : AT (__dtcm_lma)
<br/>
   {
<br/>
      __dtcm_start = ABSOLUTE(.);
<br/>
      *(.dtcm)
<br/>
      *(.dtcm.*)
<br/>
      . = ALIGN(4);
<br/>
   } &gt;dtcm = 0xff
<br/>
   __dtcm_end = . ;</td> </tr></table><span class="postbody">
<br/>
That redefines __dtcm_end, which caused some weirdness with the stack pointers that are calculated off of it. I changed the one at the top (and that __sp_svc references) to __dheap_end.
<br/>
<br/>
And then
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   .sbss __dtcm_end : 
<br/>
   {
<br/>
      __sbss_start = ABSOLUTE(.);
<br/>
      __sbss_start__ = ABSOLUTE(.);
<br/>
      *(.sbss)
<br/>
      . = ALIGN(4);    /* REQUIRED. LD is flaky without it. */
<br/>
      __sbss_end = ABSOLUTE(.);
<br/>
   } &gt;dtcm</td> </tr></table><span class="postbody">
<br/>
That __sbss_end = ABSOLUTE(.); needs to be moved outside the brackets.
<br/>
<br/>
I added a line for *(.bss*) just before *(COMMON) in the .bss block. If I remember right, that was causing all my .bss stuff to not actually be initialized to 0.
<br/>
Also, mine has the ABSOLUTE removed from 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   __bss_end = ABSOLUTE(.) ;
<br/>
   __bss_end__ = ABSOLUTE(.) ;</td> </tr></table><span class="postbody">
<br/>
But I don't remember any specific problem related to that. Probably doesn't matter.
<br/>
<br/>
<br/>
ARM7 has the same problem as __dtcm_end, but with __iwram_end, and I added the *(.bss*) line for it too.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86094 - wintermute - Sun Jun 04, 2006 12:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">Ah yes, there are a couple of linkscript bugs I ran across a while back and mentioned in the chat room, but never got around to writing a proper report on.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Since this is a thread on release 19 it might be an idea if you checked the current linkscripts before making comments like this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
First is in ds_arm9.ld, up at the top:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">__dtcm_end      =   0x00804000;
<br/>
<br/>
__sp_svc   =   __dtcm_end - 0x100;
<br/>
__sp_irq   =   __sp_svc - 0x100;
<br/>
__sp_usr   =   __sp_irq - 0x100;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
__itcm_start   =   ORIGIN(itcm);
<br/>
__ewram_end   =   ORIGIN(ewram) + LENGTH(ewram);
<br/>
__eheap_end   =   ORIGIN(ewram) + LENGTH(ewram);
<br/>
__dtcm_start   =   ORIGIN(dtcm);
<br/>
__dtcm_top   =   ORIGIN(dtcm) + LENGTH(dtcm);
<br/>
__irq_flags   =   __dtcm_top - 0x08;
<br/>
__irq_vector   =   __dtcm_top - 0x04;
<br/>
<br/>
__sp_svc   =   __dtcm_top - 0x100;
<br/>
__sp_irq   =   __sp_svc - 0x100;
<br/>
__sp_usr   =   __sp_irq - 0x100;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
That __sbss_end = ABSOLUTE(.); needs to be moved outside the brackets.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It needs to remain inside the brackets. ld seems to have problems with values outside sections - it might be a binutils bug.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
I added a line for *(.bss*) just before *(COMMON) in the .bss block. If I remember right, that was causing all my .bss stuff to not actually be initialized to 0.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That was fixed in release 18<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86097 - wintermute - Sun Jun 04, 2006 12:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">I think it is my Process Interrupt routine. I putted the code in itcm for arm9 and now it works in dualis, still not on hardware.
<br/>
<br/>
here is the code:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   u32 i;
<br/>
   for (i = 0; i &lt; 32; i++)
<br/>
   {
<br/>
      if (REG_IF &amp; BIT(i))
<br/>
         InterruptFunction[i]();
<br/>
   }
<br/>
<br/>
   INTERRUPT_WAITFLAGS |= REG_IE &amp; REG_IF;
<br/>
   REG_IF |= REG_IE &amp; REG_IF;
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
That's not quite right. I'd really recommend using the libnds dispatcher and associated functions.
<br/>
<br/>
<ul>
<br/>
<li>there are only 25 irq flags, checking 32 isn't safe (you might be lucky but I've had problems with this sort of thing in the past).
<br/>
</li><li>REG_IF bits will be set for all pending interrupts regardless of the REG_IE bits so this code will process handlers for disabled irqs.
<br/>
</li><li>REG_IF |= &lt;any value&gt; will clear all pending irqs since it reads the register first. You should  write REG_IF = &lt;irq bit you've just processed&gt; in the appropriate handler rather than just blindly resetting everything.
<br/>
</li><li>INTERRUPT_WAITFLAGS isn't defined in libnds, you want  VBLANK_INTR_WAIT_FLAGS.
<br/>
</li></ul>
<br/>
<br/>
The last point is probably your main problem - the bios irq flags are in dtcm which has been moved. I'm not entirely sure who decided on the old address but it overlapped itcm which was the source of some very weird bugs.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86106 - ProblemBaby - Sun Jun 04, 2006 2:27 pm</h4>
    <div class="postbody"><span class="postbody">I was the last thing you mentioned, Ive my own defines and the address to the irq_handler was wrong. The strange thing is that
<br/>
__irq_vector is undefined, but not __irq_flags. I looked thoruh the linkscript and found the correct address.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86108 - wintermute - Sun Jun 04, 2006 2:52 pm</h4>
    <div class="postbody"><span class="postbody">__irq_vector most definitely <span style="font-weight: bold">is</span> defined. You'd have a hard job finding it in the linkscript if it wasn't.
<br/>
<br/>
Use the libnds defines in interrupts.h, do <span style="font-weight: bold">not</span> hard code these values in your project.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86122 - ProblemBaby - Sun Jun 04, 2006 3:30 pm</h4>
    <div class="postbody"><span class="postbody">I see it in the linkscript but when I use it in my code I get:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
error: '__irq_vector' undeclared (first use in this function)
<br/>
</td> </tr></table><span class="postbody">
<br/>
So Ive to hardcode it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86124 - wintermute - Sun Jun 04, 2006 3:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
extern VoidFunctionPointer   __irq_vector[];
<br/>
extern   vuint32   __irq_flags[];
<br/>
#define VBLANK_INTR_WAIT_FLAGS  *(__irq_flags)
<br/>
#define IRQ_HANDLER             *(__irq_vector)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Do <span style="font-weight: bold">not</span> hard code these.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86128 - ProblemBaby - Sun Jun 04, 2006 4:46 pm</h4>
    <div class="postbody"><span class="postbody">It works, thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86927 - Onions - Sat Jun 10, 2006 5:39 pm</h4>
    <div class="postbody"><span class="postbody">I'm having a similar problem to what someone had earlier.
<br/>
<br/>
I get this error message when building...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
linking hello_world.elf
<br/>
collect2: _spawnvp: No such file or directory
<br/>
make[1]: *** [/c/devkitPro/examples/nds/Graphics/2D/hello_world/hello_world.elf] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:00
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I tried moving the mysys folder to C:\, but when I did that I got...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
<br/>
&gt; Failed to create process: The system cannot find the file specified.
<br/>
<br/>
&gt; Process Exit Code: 0
<br/>
&gt; Time Taken: 00:00
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But, I redirected it's location to point to it at C:\ and I know get my first error again.
<br/>
<br/>
So, it looks to me the problem wasn't the location, and it was finding the mysys within Devkitpro's root folder to begin with. I would guess my error is similar to those already experienced and fixed, so maybe I'm overlooking something. 
<br/>
Any help in what that may be is appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86929 - wintermute - Sat Jun 10, 2006 5:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Onions wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
So, it looks to me the problem wasn't the location, and it was finding the mysys within Devkitpro's root folder to begin with. I would guess my error is similar to those already experienced and fixed, so maybe I'm overlooking something. 
<br/>
Any help in what that may be is appreciated.</td> </tr></table><span class="postbody">
<br/>
<br/>
The problem has nothing to do with the location of msys, merely it's location in the PATH environment variable. It may be due to paths with spaces in the sytem PATH before the path to msys/bin or perhaps something found in earlier paths is confusing the script execution mechanism.
<br/>
<br/>
Editing the system PATH variable so that the msys bin folder is the first entry has fixed this issue for everyone so far. See this post -&gt; <a href="http://forum.gbadev.org/viewtopic.php?p=85799#85799" target="_blank">http://forum.gbadev.org/viewtopic.php?p=85799#85799</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86944 - Onions - Sat Jun 10, 2006 9:45 pm</h4>
    <div class="postbody"><span class="postbody">Oh, I thought you meant the mysys location (or path) should be at the root of your drive (such as C:\mysys) for it to work (which I've been told some other apps needed to be located at - HAM, I think is one). You meant it should be the first listed path in the PATH variable found in Control Panel/System.
<br/>
<br/>
I've now gotten it to work and have tried out some of the demos.
<br/>
<br/>
Thanks! One last question - is there any way to get an emulator to launch with the newly compiled code while working within, say, Programmer's Notepad?
<br/>
<br/>
I'd been working with HAM on the GBA lately, and it speeds things along having VisualBoy Advance connected directly into Visual HAM. So I was hoping for something similar if possible (I'm guessing one could write some sort of command line to accomplish this, although I don't know where to start if so).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86953 - wintermute - Sat Jun 10, 2006 11:10 pm</h4>
    <div class="postbody"><span class="postbody">Set your file associations so that .gba files load with vba when you double click them then add a run target to the makefile, just after the clean target.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
run:
<br/>
   start $(OUTPUT).gba
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You can then add a "make run" tool for PN2 using the directions shown here -&gt; <a href="http://www.devkitpro.org/pn2.shtml" target="_blank">http://www.devkitpro.org/pn2.shtml</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86983 - Onions - Sun Jun 11, 2006 4:49 am</h4>
    <div class="postbody"><span class="postbody">Ok, I've associated my files with the appropriate emu, then added the line you listed exactly (well, I had to use tab instead of whatever was originally used - as it caused an error) in my makefile after the clean command...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...
<br/>
   @rm -fr $(BUILD) $(TARGET).elf $(TARGET).nds $(TARGET).arm9 $(TARGET).ds.gba 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I think my problem lies in the tool making part. I went by the tutorial you showed, but it's not specifically for "running" a file, so I'm probably messing it up somewheres here.
<br/>
it seems nothing happens, even when I use the shortcut keys I assigned the tool.
<br/>
<br/>
Any help is appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#87000 - MrD - Sun Jun 11, 2006 10:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Set your file associations so that .gba files load with vba when you double click them then add a run target to the makefile, just after the clean target.
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
run:
<br/>
   start $(OUTPUT).gba
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You can then add a "make run" tool for PN2 using the directions shown here -&gt; <a href="http://www.devkitpro.org/pn2.shtml" target="_blank">http://www.devkitpro.org/pn2.shtml</a></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Just don't forget (like me) that this will make .ds.gba files open with VBA too.<br/>_________________<br/>Not active on this forum. For Lemmings DS help see its website.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
