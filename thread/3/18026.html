<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>128kB SRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Hardware > 128kB SRAM</h2>
<div id="posts">
<div class="post">
    <h4>#178293 - JoeWawaw - Sun Nov 30, 2014 4:31 am</h4>
    <div class="postbody"><span class="postbody">Hi, does anyone know how the GBA implements bank switching for SRAM? the theoretical max would be 2^16 = 64kB of SRAM, yet some games have 128kB of it. 
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178294 - Dwedit - Sun Nov 30, 2014 5:08 am</h4>
    <div class="postbody"><span class="postbody">No game uses 128KB of SRAM, at sizes beyond 32K, official cartridges use Flash memory instead of SRAM.
<br/>
The sequence of writes for bankswitching is documented right in GBATEK:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 Bank Switching (devices bigger than 64K only)
<br/>
<br/>
  [E005555h]=AAh, [E002AAAh]=55h, [E005555h]=B0h  (select bank command)
<br/>
  [E000000h]=bnk                                  (write bank number 0..1)
<br/>
<br/>
Specifies 64K bank number for read/write/erase operations.
<br/>
Required because gamepak flash/sram addressbus is limited to 16bit width.
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178295 - JoeWawaw - Sun Nov 30, 2014 7:47 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, i misspoke, what i meant to say was that flash memory in some gba cartridges is 128kB in size (the battery files generated by vba are 128kB)
<br/>
since accessing RAM is done with 16 addresses
<br/>
these writes documented in gbatek, how would i load them?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178296 - JoeWawaw - Mon Dec 01, 2014 9:25 pm</h4>
    <div class="postbody"><span class="postbody">UPDATE:
<br/>
looking through the datasheet and probing the pins on the cartridge, all i had to do was setup the arduino as a writer, and write the command bytes to the gba cartridge to select memory bank 1
<br/>
then i reverted the arduino to a reader and read the rest of the memory bank
<br/>
Save file obtained works perfectly.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
