<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Slot2 Analog Input - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Hardware > Slot2 Analog Input</h2>
<div id="posts">
<div class="post">
    <h4>#172982 - Aurelio - Sun Mar 14, 2010 11:43 am</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
I need to read an external analog input on my DS. I was thinking of using slot2 for doing this, but i don't really know how to do this.
<br/>
I just need to read a couple of potentiometers.
<br/>
Can you help me?
<br/>
<br/>
Thank you,
<br/>
Aurelio</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173003 - sverx - Mon Mar 15, 2010 10:57 am</h4>
    <div class="postbody"><span class="postbody">I believe there are no analog inputs on slot-2 so maybe you could check that topic here about NDS &amp; Arduino ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173010 - Aurelio - Mon Mar 15, 2010 2:15 pm</h4>
    <div class="postbody"><span class="postbody">I want to do something like the motion sensor(but i just want to read a couple of potentiometers, not an accelerometer).
<br/>
I read the code of the part of libnds about the ndsmotion(slot2 version) and I saw that it read some values from the SRAM, how can I do that?
<br/>
<br/>
Thank you</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173011 - kusma - Mon Mar 15, 2010 2:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Aurelio wrote:</b></span></td> </tr> <tr> <td class="quote">I want to do something like the motion sensor(but i just want to read a couple of potentiometers, not an accelerometer).
<br/>
I read the code of the part of libnds about the ndsmotion(slot2 version) and I saw that it read some values from the SRAM, how can I do that?
<br/>
<br/>
Thank you</td> </tr></table><span class="postbody">
<br/>
Are you planning to make your own cartridge? If so, I guess you could communicate over the cartridge bus. But the signal will be digital, so you'll need an AD converter on the cartridge.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173012 - Aurelio - Mon Mar 15, 2010 2:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Aurelio wrote:</b></span></td> </tr> <tr> <td class="quote">I want to do something like the motion sensor(but i just want to read a couple of potentiometers, not an accelerometer).
<br/>
I read the code of the part of libnds about the ndsmotion(slot2 version) and I saw that it read some values from the SRAM, how can I do that?
<br/>
<br/>
Thank you</td> </tr></table><span class="postbody">
<br/>
Are you planning to make your own cartridge? If so, I guess you could communicate over the cartridge bus. But the signal will be digital, so you'll need an AD converter on the cartridge.</span></td> </tr></table><span class="postbody">
<br/>
Yes, I'm planning to make my own catridge. Can you help me to do the schematic of the catridge? Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173013 - headspin - Mon Mar 15, 2010 3:55 pm</h4>
    <div class="postbody"><span class="postbody">What ever happened to Natrium42's DSSerial card? Anyway he does have <a class="postlink" href="http://www.electrobee.com/gameio-p-51.html" target="_blank">this</a> in his store.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173014 - Aurelio - Mon Mar 15, 2010 4:05 pm</h4>
    <div class="postbody"><span class="postbody">DSerial is slot1, i need a slot2 card.
<br/>
That card from electrobee is too expensive.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173084 - headspin - Sat Mar 20, 2010 8:09 am</h4>
    <div class="postbody"><span class="postbody">Perhaps something like <a class="postlink" href="http://www.hdrlabs.com/occ/hardware.html" target="_blank">this</a> will help you make one?<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173087 - kusma - Sat Mar 20, 2010 2:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Aurelio wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">Are you planning to make your own cartridge? If so, I guess you could communicate over the cartridge bus. But the signal will be digital, so you'll need an AD converter on the cartridge.</td> </tr></table><span class="postbody">
<br/>
Yes, I'm planning to make my own catridge. Can you help me to do the schematic of the catridge? Thanks</span></td> </tr></table><span class="postbody">
<br/>
I'm sorry, but I can't. I'm not a hardware engineer, and my only knowledge of these things come from friends and former co-workers who are ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173295 - Aurelio - Tue Mar 30, 2010 2:38 pm</h4>
    <div class="postbody"><span class="postbody">Anyone can help me?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173300 - headspin - Tue Mar 30, 2010 8:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Aurelio wrote:</b></span></td> </tr> <tr> <td class="quote">Anyone can help me?</td> </tr></table><span class="postbody">
<br/>
<br/>
You don't want to buy the cart I suggested because it's too expensive. So you want to make one. I posted a link to a website that shows you how to make an interface for a camera with open source software. That could be modified to suit your needs.
<br/>
<br/>
If you can't make one, buy that cart. If you can't afford it, I guess your out of luck!<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173301 - Aurelio - Tue Mar 30, 2010 8:15 pm</h4>
    <div class="postbody"><span class="postbody">It only handle buttons, I need to read values from potentiometers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173304 - headspin - Tue Mar 30, 2010 9:53 pm</h4>
    <div class="postbody"><span class="postbody">If you don't have any skills in electronics how would you make it in the first place? What is a button other than a single bit? If you combine multiple bits and you have enough of them you can send/receive an analog value. ie. 8 bits gives you 0-255 digital signal.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173318 - sverx - Wed Mar 31, 2010 9:14 am</h4>
    <div class="postbody"><span class="postbody">I suggest you again to check <a class="postlink" href="http://en.wikipedia.org/wiki/Arduino#Hardware" target="_blank">Arduino Duemilanove</a>, it has 6 analog inputs and you can use it for many other things beside what you want to do with the DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177896 - WriteASM - Sun Apr 21, 2013 3:57 pm</h4>
    <div class="postbody"><span class="postbody">It's been about three years since the last post here, obviously, but it <span style="font-style: italic">is </span>possible to get analog readings with only digital I/Os, and a couple of passive external components.  Parts you can easily remove from obsolete/nonworking devices.
<br/>
<br/>
The general theory uses a R-C circuit, where the controller discharges the capacitor, and then times how long it takes for the capacitor (C) to recharge through the resistor (R).  Note that the values will be upside-down, where lower voltage = higher output count; the result (or the circuit) can be flipped.
<br/>
<br/>
The simplest method requires one bidirectional I/O pin (I.E. link port), one capacitor, and one resistor.  Connect the capacitor from the I/O pin to ground (0v, VSS, whatever you call it), and the resistor from the I/O pin to the analog source.
<br/>
Code needs to do the following:
<br/>
??Step 1: Set the I/O pin to output (0): This discharges the capacitor; a small delay is required here.
<br/>
??Step 2: Start a timer, and set the I/O pin to an input
<br/>
??Step 3: When the I/O pin reads (1), stop the timer, read the value.
<br/>
<br/>
A slightly more complex method can probably be used in a cartridge if there is an input-only pin for "sense", and one I/O or "static" output-only pin for discharge/reset.  Connect the resistor and capacitor as with the above example to the input-only "sense" pin, but this time add a small diode between the two pins, ring side to the "reset pin".  The read process becomes as follows:
<br/>
??Step 1: Set the "reset" pin to output (0).  The capacitor is discharged through the diode and the "reset" pin.
<br/>
??Step 2: Set the "reset" pin to output (1), releasing the capacitor.  Start a timer.
<br/>
??Step 3: (same as first method).  Note that the diode will not discharge the capacitor as far.
<br/>
<br/>
<br/>
None of the values are critical--if you want a fast "read", use a smaller capacitor (0.01uF, etc.)  If you want more precision, use a larger capacitor (I.E. 1uF.)  The resistor, obviously also is important.  Off the top of my head, I'd suggest 10K, but that's just a start.
<br/>
<br/>
The reset signal can be shared between multiple channels, but the discharge time will need to be correspondingly increased...especially if one channel affects the others, or if there are residual values.  The signal can also be buffered with a transistor.
<br/>
<br/>
Note that the lower the output value, the faster the routine will return, and vice-versa.  And, of course, the result will not be linear without a constant-current source to the capacitor.  Obviously, this isn't for everyone.
<br/>
<br/>
<br/>
Just so you know, I've had relatively good success with this method.  Of course, a real A/D is a lot easier to work with, besides being perfectly linear and rock-solid!  But when you don't have one...:-)<br/>_________________<br/>"Finally, brethren, whatever is true, whatever is honorable, whatever is right, whatever is pure, whatever is lovely, whatever is of good repute, if there is any excellence and if anything worthy of praise, dwell on these things." (Philippians 4:8)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177897 - WriteASM - Sun Apr 21, 2013 3:59 pm</h4>
    <div class="postbody"><span class="postbody">It's been about three years since the last post here, obviously, but it <span style="font-style: italic">is </span>possible to get analog readings with only digital I/Os, and a couple of passive external components.  Parts you can easily remove from obsolete/nonworking devices.
<br/>
<br/>
The general theory uses a R-C circuit, where the controller discharges the capacitor, and then times how long it takes for the capacitor (C) to recharge through the resistor (R).  Note that the values will be upside-down, where lower voltage = higher output count; the result (or the circuit) can be flipped.
<br/>
<br/>
The simplest method requires one bidirectional I/O pin (I.E. link port), one capacitor, and one resistor.  Connect the capacitor from the I/O pin to ground (0v, VSS, whatever you call it), and the resistor from the I/O pin to the analog source.
<br/>
Code needs to do the following:
<br/>
--Step 1: Set the I/O pin to output (0): This discharges the capacitor; a small delay is required here.
<br/>
--Step 2: Start a timer, and set the I/O pin to an input
<br/>
--Step 3: When the I/O pin reads (1), stop the timer, read the value.
<br/>
<br/>
A slightly more complex method can probably be used in a cartridge if there is an input-only pin for "sense", and one I/O or "static" output-only pin for discharge/reset.  Connect the resistor and capacitor as with the above example to the input-only "sense" pin, but this time add a small diode between the two pins, ring side to the "reset pin".  The read process becomes as follows:
<br/>
--Step 1: Set the "reset" pin to output (0).  The capacitor is discharged through the diode and the "reset" pin.
<br/>
--Step 2: Set the "reset" pin to output (1), releasing the capacitor.  Start a timer.
<br/>
--Step 3: (same as first method).  Note that the diode will not discharge the capacitor as far.
<br/>
<br/>
<br/>
None of the values are critical--if you want a fast "read", use a smaller capacitor (0.01uF, etc.)  If you want more precision, use a larger capacitor (I.E. 1uF.)  The resistor, obviously also is important.  Off the top of my head, I'd suggest 10K, but that's just a start.
<br/>
<br/>
The reset signal can be shared between multiple channels, but the discharge time will need to be correspondingly increased...especially if one channel affects the others, or if there are residual values.  The signal can also be buffered with a transistor.
<br/>
<br/>
Note that the lower the output value, the faster the routine will return, and vice-versa.  And, of course, the result will not be linear without a constant-current source to the capacitor.  Obviously, this isn't for everyone.
<br/>
<br/>
<br/>
Just so you know, I've had relatively good success with this method.  Of course, a real A/D is a lot easier to work with, besides being perfectly linear and rock-solid!  But when you don't have one...:-)<br/>_________________<br/>"Finally, brethren, whatever is true, whatever is honorable, whatever is right, whatever is pure, whatever is lovely, whatever is of good repute, if there is any excellence and if anything worthy of praise, dwell on these things." (Philippians 4:8)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#177900 - sverx - Mon Apr 22, 2013 10:17 am</h4>
    <div class="postbody"><span class="postbody">It reminds me on how joysticks worked on PCs...<br/>_________________<br/><a class="postlink" href="http://bit.ly/yiQrz9" target="_blank">libXM7</a>|<a class="postlink" href="http://bit.ly/yJwcOo" target="_blank">NDS programming tutorial (Italiano)</a>|<a class="postlink" href="http://disjointedstudio.blogspot.com/" target="_blank">Waimanu DS / GBA</a>|<a class="postlink" href="http://adshomebrewersdiary.blogspot.com" target="_blank">A DS Homebrewer's Diary</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
