<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>adapting a flash cartridge to a cf card - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Hardware > adapting a flash cartridge to a cf card</h2>
<div id="posts">
<div class="post">
    <h4>#10988 - dotmatrix - Mon Sep 22, 2003 8:45 pm</h4>
    <div class="postbody"><span class="postbody">i want to be able to use a compactflash card as the memory source for the roms on a flash cartridge. kind of like the flash2advance gamewallet, but playing them straight from it. i was wondering if someone could help me figure out how to implant a working cf slot into like a 64Mb flash cartridge. any tips would be much appreciated. thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10990 - torne - Mon Sep 22, 2003 10:27 pm</h4>
    <div class="postbody"><span class="postbody">You can't play games straight from CF, it's too slow. That's why the GameWallet works the way it does.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10992 - dotmatrix - Mon Sep 22, 2003 11:19 pm</h4>
    <div class="postbody"><span class="postbody">well what about the GBank Super Card Reader. it uses SD memory. is SD faster???</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10993 - torne - Mon Sep 22, 2003 11:35 pm</h4>
    <div class="postbody"><span class="postbody">I don't know, never used it, but I suspect not. The maximum wait states that the GBA can manage is 8 for a 16-bit access so anything that takes more than 8 GBA clock cycles to prepare for a read (477 nanoseconds or so) won't work. Also, most commercial games use 4 or 2 wait states, so you either need to be below 4 or 2 cycles, or apply the old flash speed patches used back in the days of the original visoly flashcarts, which often break games or make them run badly..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10996 - tepples - Mon Sep 22, 2003 11:54 pm</h4>
    <div class="postbody"><span class="postbody">How much would it cost to put 8 MB of 100ns RAM into a cart? Or does inexpensive RAM draw too much current?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11004 - torne - Tue Sep 23, 2003 10:07 am</h4>
    <div class="postbody"><span class="postbody">No idea, check some datasheets. You could probably make a cart entirely out of SRAM, though you might want a write-protect switch so you don't screw up your own code during debugging. =)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11410 - MattyMatt - Sun Oct 05, 2003 4:53 pm</h4>
    <div class="postbody"><span class="postbody">CF (and Smartmedia, probably a better choice) use a slightly simplified ATA interface, so you'd need a circuit as complex as the the gbacd to read it. 
<br/>
<br/>
Probably easier would be to mod a gbalink cable so it has a USB A socket, and then plug a USB card reader into that.  A pure ram  cart would be very useful in that situation. No need to worry about a backup battery for the main (rom replacement) ram, but the drain on your gba battery could be quite high.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11411 - torne - Sun Oct 05, 2003 5:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MattyMatt wrote:</b></span></td> </tr> <tr> <td class="quote">CF (and Smartmedia, probably a better choice) use a slightly simplified ATA interface, so you'd need a circuit as complex as the the gbacd to read it. </td> </tr></table><span class="postbody">
<br/>
<br/>
It's not too bad; I've seen people construct CF interfaces before...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MattyMatt wrote:</b></span></td> </tr> <tr> <td class="quote">Probably easier would be to mod a gbalink cable so it has a USB A socket, and then plug a USB card reader into that.</td> </tr></table><span class="postbody">
<br/>
<br/>
You hafta be kidding =)
<br/>
You would have to build a USB host adapter and hub into your 'cart' - building a host adapter is orders of magnitude more difficult than even a USB device, which is already pretty hard unless your device conforms strictly to one of the standard interfaces (HID, Mass Storage, Imaging..etc). Standard host adapter chips, as far as I know, all have PCI bus interfaces, which is obviously not suitable for connecting to a GBA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11416 - tepples - Sun Oct 05, 2003 10:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>torne wrote:</b></span></td> </tr> <tr> <td class="quote">It's not too bad; I've seen people construct CF interfaces before</td> </tr></table><span class="postbody">
<br/>
You would need several megabytes of RAM on the cart to hold the currently loaded program, unless you want the adapter to load only .mb programs. That's why I asked how much 8 MB of SRAM would cost.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11429 - Cyberman - Mon Oct 06, 2003 7:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MattyMatt wrote:</b></span></td> </tr> <tr> <td class="quote">CF (and Smartmedia, probably a better choice) use a slightly simplified ATA interface, so you'd need a circuit as complex as the the gbacd to read it. 
<br/>
<br/>
Probably easier would be to mod a gbalink cable so it has a USB A socket, and then plug a USB card reader into that.  A pure ram  cart would be very useful in that situation. No need to worry about a backup battery for the main (rom replacement) ram, but the drain on your gba battery could be quite high.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well this is kind of nutty.. CF does require a wee bit of firmware to work though.  
<br/>
USB is rather tiresome and complex. Did I mention tiresome? You are going up an order of magnitude in complexity from CF to USB.
<br/>
<br/>
SmartMedia and derivatives is relatively simple hence why it's a more likely candidate.
<br/>
<br/>
As for making an 8mb Sram cart.. is that megabits or bytes?
<br/>
Cypress makes low power mobile SRAM at densities of 16mb and 32mb in a (<a class="postlink" href="http://www.cypress.com/products/family.cfm?objectid=F0F37869-7AF2-464B-9A7B16EC2F32F7E2&amp;foid=F0F37869-7AF2-464B-9A7B16EC2F32F7E2&amp;familyName=MicroPower%20SRAMs" target="_blank">see this</a>) 1mw x 16 2mx16 single package. These are in fBGA packages however or regular BGA packages (not exactly easy to "solder"). Anyhow you have to interface it to the GBA (it's a 2.5V device so a CPLD with multiple voltage IO would be handy to handle that). So Sic et Non then if 8 megabytes.. well you'll need 4 of these and a CPLD. Might be a tight squeeze :)
<br/>
<br/>
It's too bad the GBA doesn't have a reset pin on the bus for the carts, would be handy for quickly updating a ROM image for debugging purposes.
<br/>
<br/>
Cyb<br/>_________________<br/>If at first you don't succeed parachuting is NOT for you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11431 - tepples - Mon Oct 06, 2003 7:52 pm</h4>
    <div class="postbody"><span class="postbody">The GBA cart edge does in fact have something that could be used as a "reset pin," namely the Game Pak IRQ line. A cart could use this line to trigger a register reset followed by a jump to 0x08000000.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11480 - Master S - Wed Oct 08, 2003 11:34 am</h4>
    <div class="postbody"><span class="postbody">As said before, this can not be done unless you buffer the data from the card into some sort of ram. 
<br/>
<br/>
Anyway how about the MultiMediaCard, it's quit easy to interface, as you can use the SPI interface (Motorola), it only requres 4 pins :
<br/>
 CS (Chip select)
<br/>
 Data in and Data out
<br/>
 and a clock
<br/>
  (+ power supply :))
<br/>
<br/>
And it's operating at 3.3 volts (as the GBA)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12343 - duncanentwisle - Sat Nov 08, 2003 2:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>torne wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Standard host adapter chips, as far as I know, all have PCI bus interfaces, which is obviously not suitable for connecting to a GBA.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Just for informations sake (you're still right about the difficulty stuff) - but there is the Philips ISP1161 which is a single chip *host* and device controller that can interface to ISA (see Simtec - <a href="http://www.simtec.co.uk/products/EB1161ISA/" target="_blank">http://www.simtec.co.uk/products/EB1161ISA/</a>).
<br/>
<br/>
(I haven't looked into it in any great detail, so I expect you'll find that it isn't in the remotest sense usable, and you'll clip me around the ear :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12346 - torne - Sat Nov 08, 2003 3:03 pm</h4>
    <div class="postbody"><span class="postbody">Nice toy. You could probably build that into a GBA device. Would still be hard =)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
