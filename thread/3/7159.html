<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Open-source generic flash cart library/writer - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Hardware > Open-source generic flash cart library/writer</h2>
<div id="posts">
<div class="post">
    <h4>#57239 - darkfader - Fri Oct 14, 2005 2:29 pm</h4>
    <div class="postbody"><span class="postbody">Is there some open-source generic flash cart library/writer utility yet?
<br/>
<br/>
* low-level hardware access library for x86/ARM supporting parallel port/USB linkers, DS/GBA slot etc.
<br/>
* cart/flash library supporting different kinds of carts to do stuff like:
<br/>
read, write, cart type detection, (optional) erase, (automatic) bankswitching, special features like SDRAM expansion.
<br/>
* wrapper(?) library to access cart as block device. The library should be usable as a pre-loaded module when running on GBA/DS.
<br/>
* front ends:
<br/>
GBA/DS WMB/Wifi flasher, Win/MAC GUI
<br/>
* On top of the block device library, there could be filesystem libraries to access SD/CF/UDISK.
<br/>
<br/>
This all could go under devkitpro/projects folder.</span><span class="gensmall"><br/><br/>Last edited by darkfader on Thu Oct 27, 2005 11:22 am; edited 12 times in total</span></div>    
</div>
<div class="post">
    <h4>#57286 - Dwedit - Fri Oct 14, 2005 8:45 pm</h4>
    <div class="postbody"><span class="postbody">That's asking for quite a bit... Even pogoshell doesn't have enough information to support many different flash cartirdge's bankswitching systems.  So I'm guessing there's not much information out there.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57604 - Vince - Mon Oct 17, 2005 9:11 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
As for open-source flashers for carts, there are :
<br/>
+ if2a, which is targeted at F2A/F2AU users. See <a href="http://if2a.free.fr" target="_blank">http://if2a.free.fr</a> for more info
<br/>
+ ucon64, which aims at supporting a wider range of backup devices. It has support for f2a but not for F2AU. Home page here : <a href="http://ucon64.sourceforge.net/index2.html" target="_blank">http://ucon64.sourceforge.net/index2.html</a>
<br/>
+ there is also a cart flasher for FA Extreme for Mac users. See <a href="http://www.deadcoderssociety.tk/" target="_blank">http://www.deadcoderssociety.tk/</a> for hints.
<br/>
<br/>
That's it for what I know. Not very much carts are supported.
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57646 - SmileyDude - Mon Oct 17, 2005 4:07 pm</h4>
    <div class="postbody"><span class="postbody">i was working on something like this a few years ago, but i got distracted by work :(
<br/>
<br/>
ideally, the library should have multiple parts -- an interface to the cart part (the flasher, GBA/DS port, whatever).  And an accessing the cart itself part.  I don't know how much should ideally be exposed of the lower level details.  I guess ideally, the library should allow querying of the cart for it's capabilities and then the programmer can call the appropriate method to switch banks if necessary, etc, etc.
<br/>
<br/>
The other sticking point is that on a PC, you're not going to have direct memory access to the cart, but on the GBA/DS you do.  From a programming perspective, it would be nice to have a single API for both -- i.e, something like cartMemcpy() that would handle the details of reading/writing (this would be the code that the other layers would use to access the cart).  But, on the GBA/DS, this would be inefficient -- why copy from the cart when you can use it directly?
<br/>
<br/>
Still -- I like the idea of a library that could work on multiple platforms for accessing the different types of flash carts and linkers (heh -- you could even support plugging in a USB flasher to a PSP, PS2, or XBox :D), but it really needs a well thought out architecture/API, IMO...<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57671 - Joat - Mon Oct 17, 2005 6:41 pm</h4>
    <div class="postbody"><span class="postbody">I would honestly be very happy for just a list of registers and unlock sequences, that alone is more than is publically available for most flash carts.  People can then write libraries on top of this info or whatever.
<br/>
<br/>
I'd be glad to put all of this info up on the DS wiki if anyone has some.  I've got code for visoly carts somwhere that I'll put up to start the ball rolling (when I find it, just did a clean reinstall so I need to restore my backups first).
<br/>
<br/>
As it stands, you have to dump and RE the multirom menu for switching information, and the multiboot stub for programming info (if it's a gba multiboot linker dealy), or the x86 program and driver (for other types).<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57705 - tepples - Mon Oct 17, 2005 9:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SmileyDude wrote:</b></span></td> </tr> <tr> <td class="quote">it would be nice to have a single API for both -- i.e, something like cartMemcpy() that would handle the details of reading/writing (this would be the code that the other layers would use to access the cart).  But, on the GBA/DS, this would be inefficient -- why copy from the cart when you can use it directly?</td> </tr></table><span class="postbody">
<br/>
For easy portability between cart builds and GBAMP builds of a single program perhaps?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59747 - Joat - Thu Nov 03, 2005 10:12 pm</h4>
    <div class="postbody"><span class="postbody">Enjoy (and please contribute if you have information, either drop me an email or msg me on IRC or the forum):
<br/>
<br/>
<a href="http://www.bottledlight.com/ds/index.php/Hardware/FlashCartridges" target="_blank">http://www.bottledlight.com/ds/index.php/Hardware/FlashCartridges</a>
<br/>
<br/>
That is almost everything I have.  I didn't include the visoly parallel port interface (cartlib.c handles that, but should probably be added anyways), the f2a usb interface (if2a handles it, I think; I don't have one), or pseudcode for m3 / gbamp (chishm's lib does very well, although I will be adding the pseudocode I think).
<br/>
<br/>
I don't know how to flash the actual gbamp / m3 / supercard firmware (as opposed to getting to their CF interface), or how to bank in the supercard SDRAM, and of course, borden is a bitch like always and never responded to any of my mails about the EZFA.  I really need to get around to dumping the multiboot flasher and REing it, maybe soon.  The flasher is compressed or encrypted in the exe or stored on the Atmel (unlikely but possible), a quick hexedit of the pc client didn't turn up a gba logo.
<br/>
<br/>
And if anyone wants to donate some old flasher hardware not listed or un-REd, I'm not one to turn down a gift :)
<br/>
<br/>
What I have:
<br/>
  Visoly 64M Turbo
<br/>
  EZFA 256M
<br/>
  NeoFlash 512M (dunno where the last few rom bank bits are)
<br/>
  GBA MP v2
<br/>
<br/>
What I have info about:
<br/>
  Visoly Turbo / Non-turbo and F2A
<br/>
  NeoFlash (is this the same as XgFlash 1 and 2, or just 2?)
<br/>
  GBA MP v2 (CF only)
<br/>
  Supercard CF (CF only)
<br/>
  Supercard SD (SD only, possibly buggy, that asm was whack)
<br/>
  M3 (CF only)
<br/>
  EZF-3 (unlock and rom banking only)
<br/>
<br/>
Not flash cartridge related, but cartridge related still:
<br/>
  Anyone know how to rumble or read the tilt sensor on wario ware twisted / yoshi topsy turvy / etc..., or the sunlight sensor on Boktai, and so forth.
<br/>
<br/>
I'm sure stuff like this has been figured out, but I for one can never find it when I need it (not that I need any of those, since I don't have those games, but it's an example), so I'd like to stick it on the wiki as well.<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63332 - FluBBa - Mon Dec 12, 2005 1:26 am</h4>
    <div class="postbody"><span class="postbody">I updated my post on the tilt sensor in the <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=699" target="_blank">coding part</a> of the forum.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68659 - Sicon - Thu Jan 26, 2006 8:41 am</h4>
    <div class="postbody"><span class="postbody">Dr. neo released his code, <a href="http://www.neoflash.com/forum/index.php/topic,302.0.html" target="_blank">http://www.neoflash.com/forum/index.php/topic,302.0.html</a> for the windows writer I often use. You might find it useful.<br/>_________________<br/><a href="http://www.fullsail.edu/" target="_blank">http://www.fullsail.edu/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
