<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>BIOS functions - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Hardware > BIOS functions</h2>
<div id="posts">
<div class="post">
    <h4>#59569 - SittingDuck - Wed Nov 02, 2005 7:01 pm</h4>
    <div class="postbody"><span class="postbody">Do BIOS functions have any real advantage over my own code? Are they fast? I've heard somewhere <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/" target="_blank">(from TONC)</a> that BIOS calls are for space and not speed. (Stupid, since GBA programming is all about speed!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59599 - poslundc - Wed Nov 02, 2005 9:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SittingDuck wrote:</b></span></td> </tr> <tr> <td class="quote">Do BIOS functions have any real advantage over my own code? Are they fast? I've heard somewhere <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/" target="_blank">(from TONC)</a> that BIOS calls are for space and not speed.</td> </tr></table><span class="postbody">
<br/>
<br/>
They are optimized to fit on the small BIOS chip and make some speed tradeoffs in this regard. There is also an entry penalty for calling BIOS routines that makes them quite easy to beat with your own assembly code placed in IWRAM.
<br/>
<br/>
They are coded in the ARM instruction set and in zero-waitstate memory (same as IWRAM), so they easily outperform compiled C code running from the ROM.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">(Stupid, since GBA programming is all about speed!)</td> </tr></table><span class="postbody">
<br/>
<br/>
*shakes head and sighs* You have a long road ahead.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59612 - Joat - Wed Nov 02, 2005 9:58 pm</h4>
    <div class="postbody"><span class="postbody">The BIOS functions are really there because the bios bootup sequence uses them, and they figured hey, why not expose these to developers.
<br/>
<br/>
Some, like the compression functions make a lot of sense to use, especially when time isn't critical, and the CPU clear beats the pants off of using DMA to clear (but a short cpu loop will kill both of them if you only need to clear a few bytes).
<br/>
<br/>
Others, like the math functions are not particularly good implementations, and even being in zero wait memory doesn't save them, and the sound engine is neither documented nor worth documenting (it's a steaming turd).  Had they cut that dumb sound engine from ROM, they would have had room for ARM implementations of all the math funcs that are currently in thumb, although judicious unrolling would still be pushing it.
<br/>
<br/>
Like poslundc said, if you need speed, stick a well-written function in IWRAM, but honestly, write your code first, make it work correctly, and *then* worry about making it fast.
<br/>
<br/>
(broke the run-on into a few sentances)<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59619 - tepples - Wed Nov 02, 2005 10:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Joat wrote:</b></span></td> </tr> <tr> <td class="quote">Had they cut that dumb sound engine from ROM, they would have had room for ARM implementations of all the math funcs that are currently in thumb</td> </tr></table><span class="postbody">
<br/>
But then you wouldn't get that arpeggio before the "da-ding".<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59637 - Joat - Wed Nov 02, 2005 11:15 pm</h4>
    <div class="postbody"><span class="postbody">Although it's been a long time since I last looked, IIRC yes you would.  The music driver itself isn't used by the BIOS (I'll check later tonight, I could be remembering wrong), although midikey2freq was.  Even if it were, it'd be as easy or a lot easier to just do a nice intro sound outright rather than have a moderately sophisticated multi-channel mixer / driver.<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59680 - SittingDuck - Thu Nov 03, 2005 9:21 am</h4>
    <div class="postbody"><span class="postbody">Is it possible, then, to keep some ARM code in ROM and load it into IWRAM when it is needed? For example if there are several games on one cartridge.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59703 - tepples - Thu Nov 03, 2005 5:13 pm</h4>
    <div class="postbody"><span class="postbody">Yes. There are "IWRAM overlays" but I've never investigated how to get them to work.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
