<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Debugging serial bit-banging without an oscilloscope? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Hardware > Debugging serial bit-banging without an oscilloscope?</h2>
<div id="posts">
<div class="post">
    <h4>#141781 - tepples - Sat Sep 29, 2007 8:52 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to make a GBA program so that I can use the GBA as a controller for <span style="font-style: italic">any</span> GameCube game, not just the ones that support the GameCube to GBA cable. This requires communicating over JOYBUS, the GameCube controller port protocol. But GBATEK states that the GBA serial chip intercepts some JOYBUS commands and sends responses before my program even sees them. Specifically, it identifies itself as a GBA (0x0004), not a GameCube controller (0x0900).
<br/>
<br/>
So I have to handle JOYBUS with bit-banging in general purpose mode. Google found <a class="postlink" href="http://www.int03.co.uk/crema/hardware/gamecube/gc-control.htm" target="_blank">this</a> and <a class="postlink" href="http://www.raphnet.net/electronique/x2wii/index_en.php" target="_blank">this</a> and <a class="postlink" href="http://www.gc-linux.org/docs/yagcd/chap9.html#sec9" target="_blank">this</a>. I've successfully received "command" bytes from a GameCube and from a third-party GameCube to USB adapter. But when I try to respond to these command bytes, I get no result on the screen, just as if I had not plugged in the cable. Is there a way to see what is actually coming out of my GBA's serial port when I call the send_bits() function that I wrote without spending $250 to buy an oscilloscope? Has anyone tried this already who is willing to look at my code?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141843 - truedream - Sun Sep 30, 2007 8:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I'm trying to make a GBA program so that I can use the GBA as a controller for <span style="font-style: italic">any</span> GameCube game, not just the ones that support the GameCube to GBA cable. This requires communicating over JOYBUS, the GameCube controller port protocol. But GBATEK states that the GBA serial chip intercepts some JOYBUS commands and sends responses before my program even sees them. Specifically, it identifies itself as a GBA (0x0004), not a GameCube controller (0x0900).
<br/>
<br/>
So I have to handle JOYBUS with bit-banging in general purpose mode. Google found <a class="postlink" href="http://www.int03.co.uk/crema/hardware/gamecube/gc-control.htm" target="_blank">this</a> and <a class="postlink" href="http://www.raphnet.net/electronique/x2wii/index_en.php" target="_blank">this</a> and <a class="postlink" href="http://www.gc-linux.org/docs/yagcd/chap9.html#sec9" target="_blank">this</a>. I've successfully received "command" bytes from a GameCube and from a third-party GameCube to USB adapter. But when I try to respond to these command bytes, I get no result on the screen, just as if I had not plugged in the cable. Is there a way to see what is actually coming out of my GBA's serial port when I call the send_bits() function that I wrote without spending $250 to buy an oscilloscope? Has anyone tried this already who is willing to look at my code?</td> </tr></table><span class="postbody">
<br/>
<br/>
hi I cant help immediatly, but I have working proto of slot-2 FPGA board that also is useable as logic analyzer, the product is going to manufacturing soon, so I may send you sample ;)
<br/>
<br/>
I am about to twiddle with the link port myself too but this is low priority on my list right now
<br/>
<br/>
Antti</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141904 - KeithE - Mon Oct 01, 2007 2:13 pm</h4>
    <div class="postbody"><span class="postbody">Tepples, I hope you can do this.  I tried a while ago and I gave up because it didn't seem like it was possible to make the GBA respond fast enough.  My work is discussed in this topic: <a href="http://forum.gbadev.org/viewtopic.php?t=9482" target="_blank">http://forum.gbadev.org/viewtopic.php?t=9482</a>
<br/>
<br/>
I have read that you can make an inexpensive logic analyzer using the parallel port of a computer, but I've never tried it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141906 - truedream - Mon Oct 01, 2007 2:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>KeithE wrote:</b></span></td> </tr> <tr> <td class="quote">Tepples, I hope you can do this.  I tried a while ago and I gave up because it didn't seem like it was possible to make the GBA respond fast enough.  My work is discussed in this topic: <a href="http://forum.gbadev.org/viewtopic.php?t=9482" target="_blank">http://forum.gbadev.org/viewtopic.php?t=9482</a>
<br/>
<br/>
I have read that you can make an inexpensive logic analyzer using the parallel port of a computer, but I've never tried it.</td> </tr></table><span class="postbody">
<br/>
<br/>
any MCU doing overage 8MIPS can handle GC joybus slave mode
<br/>
in 100% software bitnbang mode.
<br/>
<br/>
so its doable with GBA of course by using the ext conn in GPIO
<br/>
mode, if its reasonable is another question</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153763 - bluesceada - Sat Apr 05, 2008 5:14 pm</h4>
    <div class="postbody"><span class="postbody">Hey you are doing the same I wanted to do.. did you get any further until now?
<br/>
<br/>
(but I already needed to gave up at the compiler, see another topic)
<br/>
<br/>
Are you trying with a direct gba&lt;-&gt;gc cable? Because most cables have a small circuit inside that is maybe doing the wrong thing for this case? I should check what is inside mine...
<br/>
<br/>
Other than that, maybe you also need to first "register" the type of gamecube controller on the gamecube before being able to already send the 64bit signal of "key information".
<br/>
<br/>
Then if you think timings are too short you also might to use assembler to send signals, at around 16mhz, 1us is not that long.
<br/>
<br/>
Hm what an idea -- as I can't get the compiler to work I should maybe just look into assembler and what is available in this part.
<br/>
<br/>
It would be also nice, if you show your C code here you have so far, if more people see it, more people can think about optimizing it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153897 - tepples - Tue Apr 08, 2008 12:52 am</h4>
    <div class="postbody"><span class="postbody">main.c
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;gba.h&gt;
<br/>
#include "agbtty.h"
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
<br/>
static void serial_set_gp_mode(void) {
<br/>
  REG_RCNT = R_GPIO;
<br/>
}
<br/>
<br/>
static void serial_gp_monitor(void) {
<br/>
  while (1) {
<br/>
    unsigned int read = REG_RCNT;
<br/>
    unsigned int color = 0;
<br/>
    if (read &amp; GPIO_SI) {
<br/>
      color |= RGB5( 0,31,31);
<br/>
    }
<br/>
    BG_PALETTE[0] = color;
<br/>
  }
<br/>
}
<br/>
<br/>
int get_bits(char *bitlens);
<br/>
void send_bits(const char *bits, size_t n);
<br/>
<br/>
<br/>
#define TIMER ((volatile u32 *)(0x04000100))
<br/>
#define TMCNT(x) ((x) &lt;&lt; 16)
<br/>
// libgba and libnds differ on naming
<br/>
#ifndef TIMER_ENABLE
<br/>
#define TIMER_ENABLE (1 &lt;&lt; 7)
<br/>
#endif
<br/>
#ifndef TIMER_CASCADE
<br/>
#define TIMER_CASCADE (1 &lt;&lt; 2)
<br/>
#endif
<br/>
<br/>
void startTimer(void) {
<br/>
  TIMER[2] = 0;
<br/>
  TIMER[3] = 0;
<br/>
  TIMER[3] = 0 | TMCNT(TIMER_CASCADE | TIMER_ENABLE);
<br/>
  TIMER[2] = 0 | TMCNT(TIMER_ENABLE);
<br/>
}
<br/>
<br/>
u32 readTimer(void) {
<br/>
  unsigned int lo = TIMER[2] &amp; 0xFFFF;
<br/>
  unsigned int hi = TIMER[3] &amp; 0xFFFF;
<br/>
<br/>
  // If the timer wrapped between reading lo and hi, reread once.
<br/>
  unsigned int lo2 = TIMER[2] &amp; 0xFFFF;
<br/>
  if (lo2 &lt; lo) {
<br/>
    hi = TIMER[3] &amp; 0xFFFF;
<br/>
    lo = lo2;
<br/>
  }
<br/>
  return lo | (hi &lt;&lt; 16);
<br/>
}
<br/>
<br/>
void time_send_bits(int n) {
<br/>
  char bits[65] = {0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1};
<br/>
  u32 stime, etime;
<br/>
<br/>
  startTimer();
<br/>
  stime = readTimer();
<br/>
  send_bits(bits, n);
<br/>
  etime = readTimer();
<br/>
  siprintf(bits, "%u ", etime - stime);
<br/>
  agbtty_puts(bits);
<br/>
}
<br/>
<br/>
void test_get_bits(void) {
<br/>
  char bitlens[33];
<br/>
  size_t len = get_bits(bitlens);
<br/>
  for (int i = 0; i &lt; len; ++i) {
<br/>
    MAP[4][7][i] = bitlens[i] &lt; 2 ? '1' : '0';
<br/>
  }
<br/>
  for (int i = len; i &lt; 30; ++i) {
<br/>
    MAP[4][7][i] = ' ';
<br/>
  }
<br/>
  agbtty_gotoxy(0, 8);
<br/>
  siprintf(bitlens, "%2u ", (unsigned int)len);
<br/>
  agbtty_puts(bitlens);
<br/>
}
<br/>
<br/>
unsigned int wait_cmd_byte(void) {
<br/>
  char bitlens[33];
<br/>
  get_bits(bitlens);
<br/>
  unsigned int bits = 0;
<br/>
  for (int i = 0; i &lt; 8; ++i) {
<br/>
    bits = (bits &lt;&lt; 1) | (bitlens[i] &lt; 2);
<br/>
  }
<br/>
  agbtty_gotoxy(6, 8);
<br/>
  {
<br/>
    char txt[32];
<br/>
    siprintf(txt, "%02x ", bits);
<br/>
    agbtty_puts(txt);
<br/>
  }
<br/>
  return bits;
<br/>
}
<br/>
<br/>
int main(void)
<br/>
{
<br/>
  agbtty_init();
<br/>
  //agbtty_init_cursor();
<br/>
<br/>
  REG_DISPCNT = 0 | BG0_ON | OBJ_ON;
<br/>
  BG_PALETTE[  0] = RGB5(31,31, 0);
<br/>
  BG_PALETTE[  1] = RGB5( 0,31, 0);
<br/>
  SPRITE_PALETTE[1] = RGB5(16,16, 0);
<br/>
<br/>
  agbtty_puts("hello world\n\n");
<br/>
  serial_set_gp_mode();
<br/>
  
<br/>
  time_send_bits(1);
<br/>
  time_send_bits(65);
<br/>
  /* difference should be close to 1024 */
<br/>
  
<br/>
  while (1) {
<br/>
    char ctrlbits[65] = {0};
<br/>
    int j = (~REG_KEYINPUT);
<br/>
    ctrlbits[3] = j &amp; KEY_START;
<br/>
    ctrlbits[16] = 1;
<br/>
    ctrlbits[24] = 1;
<br/>
    ctrlbits[32] = 1;
<br/>
    ctrlbits[40] = 1;
<br/>
    ctrlbits[48] = 1;
<br/>
    ctrlbits[56] = 1;
<br/>
    int c = wait_cmd_byte();
<br/>
    switch (c) {
<br/>
    case 0:  // identify
<br/>
      {
<br/>
        char sig[25] = {0, 0, 0, 0, 1, 0, 0, 1,
<br/>
                        0, 0, 0, 0, 0, 0, 0, 0,
<br/>
                        0, 0, 0, 0, 0, 0, 0, 0, 1};
<br/>
        send_bits(sig, sizeof(sig));
<br/>
      }
<br/>
      break;
<br/>
    case 0x40:  // send buttons
<br/>
      {
<br/>
        send_bits(ctrlbits, 65);
<br/>
      }
<br/>
      break;
<br/>
    }
<br/>
  }
<br/>
  while(1);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
getbits.iwram.c
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;gba_sio.h&gt;
<br/>
#include &lt;gba_video.h&gt;
<br/>
#include &lt;sys/types.h&gt;
<br/>
<br/>
int get_bits(char *bitlens) {
<br/>
  unsigned int bitno = 0, uplen = 0;
<br/>
  while (REG_RCNT &amp; GPIO_SI) { }
<br/>
  BG_PALETTE[0] = RGB5(31,23, 0);
<br/>
  do {
<br/>
    unsigned int downlen = 0;
<br/>
    uplen = 0;
<br/>
    while (downlen &lt; 60 &amp;&amp; !(REG_RCNT &amp; GPIO_SI)) {
<br/>
      ++downlen;
<br/>
    }
<br/>
    while (uplen &lt; 60 &amp;&amp; (REG_RCNT &amp; GPIO_SI)) {
<br/>
      ++uplen;
<br/>
    }
<br/>
    bitlens[bitno++] = downlen;
<br/>
  } while (uplen &lt; 60 &amp;&amp; bitno &lt; 33);
<br/>
  BG_PALETTE[0] = RGB5(31,31,31);
<br/>
  return bitno;
<br/>
}
<br/>
<br/>
#if 1
<br/>
  #define SO_HI (R_GPIO | GPIO_SO_OUTPUT | GPIO_SO)
<br/>
  #define SO_LO (R_GPIO | GPIO_SO_OUTPUT)
<br/>
#else
<br/>
  #define SO_HI (R_GPIO | GPIO_SI_OUTPUT | GPIO_SI)
<br/>
  #define SO_LO (R_GPIO | GPIO_SI_OUTPUT)
<br/>
#endif
<br/>
void send_bits(char *bits, size_t len) {
<br/>
  for (size_t i = 0; i &lt; len; ++i) {
<br/>
    unsigned int data = bits[i] ? SO_HI : SO_LO;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_HI;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = SO_LO;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
    REG_RCNT = data;
<br/>
  }
<br/>
  REG_RCNT = R_GPIO;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I was able to get get_bits working, recognizing the status bytes that Melee was sending. But I could never actually send anything, and I don't know why because I don't own a logic analyzer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153965 - bluesceada - Tue Apr 08, 2008 6:54 pm</h4>
    <div class="postbody"><span class="postbody">I didn't read all of the code exactly, but it seems you dont test for those 24 "welcome" bits of the gamecube (0100 0000 0000 0011 0000 0010) and just check if any bits get received?
<br/>
<br/>
And all those
<br/>
REG_RCNT = SO_HI;
<br/>
REG_RCNT = SO_LO;
<br/>
REG_RCNT = data;
<br/>
would maybe get optimized-out by the compiler to one single "REG_RCNT = data;"
<br/>
check my looking in the resulting assembler code, one time with all those lines, and one time with just the "REG_RCNT = data;"
<br/>
<br/>
Then: Do you send the whole 64(65)bit of data? that one array with an max. index of 65 is not really filled up?
<br/>
<br/>
In some days/weeks (depending on my time) I might come up with my first try..
<br/>
<br/>
What is also important: Do you use the correct cable? So far I didn't exactly look at the circuit which is inside my "original" gba&lt;-&gt;gc cable..
<br/>
<br/>
Maybe you got some hints my me, and sorry for not reading the whole code step by step.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153977 - tepples - Tue Apr 08, 2008 9:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">I didn't read all of the code exactly, but it seems you dont test for those 24 "welcome" bits of the gamecube (0100 0000 0000 0011 0000 0010) and just check if any bits get received?</td> </tr></table><span class="postbody">
<br/>
I think I was testing for those, but I removed it when I couldn't get any sort of response at all.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And all those
<br/>
REG_RCNT = SO_HI;
<br/>
REG_RCNT = SO_LO;
<br/>
REG_RCNT = data;
<br/>
would maybe get optimized-out by the compiler to one single "REG_RCNT = data;"</td> </tr></table><span class="postbody">
<br/>
REG_RCNT is volatile. I've already run timing tests, and the more REG_RCNT writes I put in, the longer it takes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Then: Do you send the whole 64(65)bit of data? that one array with an max. index of 65 is not really filled up?</td> </tr></table><span class="postbody">
<br/>
I would need a logic analyzer to answer that.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">What is also important: Do you use the correct cable?</td> </tr></table><span class="postbody">
<br/>
I would need a logic analyzer to answer that.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153981 - bluesceada - Tue Apr 08, 2008 10:34 pm</h4>
    <div class="postbody"><span class="postbody">I don't think you necessarily need a logic anaylzer for that... That would be trial and error coding, which is often the fastest way - okay, but also can result in working, but not really clean working code
<br/>
<br/>
If you are 100% sure what every part of your code does and how your connection circuit is assembled, you can in nearly all / most cases say what the hardware will do.
<br/>
<br/>
Anyway.... I will try it when time permits, I hope I can come up with a working code (and the way the cable has to be connected or what schematic you need to connect it) soon.
<br/>
<br/>
In the most simple case both the GBA input and output (whatever pins you will use for those)  would need to be connected to that one wire the GC uses for Data Transfer, with 2 Diodes blocking the lines in one direction so we don't get some unwanted problems.
<br/>
<br/>
So I have to check what the official cables circuit does (yeh actually I need to open it up with a screwdriver then, otherwise you really just can use a logic anaylzer), they might help to do something completely different, as the GBA is normally connected to the Gamecube as not just a Controller.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153985 - tepples - Tue Apr 08, 2008 11:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">That would be trial and error coding</td> </tr></table><span class="postbody">
<br/>
For me, it was more like trial and error and error and error and error and error and error and spend 5 hours getting no response from the system with which I'm trying to communicate and switch to working on one of my other projects coding.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If you are 100% sure what every part of your code does</td> </tr></table><span class="postbody">
<br/>
What steps would you recommend that I take to become 100% sure what every part of my code does?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">and how your connection circuit is assembled</td> </tr></table><span class="postbody">
<br/>
If only I had a multimeter, the money to buy a second cable to tear apart, and the time to do this instead of my other projects...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">you can in nearly all / most cases say what the hardware will do.</td> </tr></table><span class="postbody">
<br/>
In this case, I don't know what the hardware will do, especially the hardware on the other side of the cable.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Anyway.... I will try it when time permits, I hope I can come up with a working code (and the way the cable has to be connected or what schematic you need to connect it) soon.</td> </tr></table><span class="postbody">
<br/>
Good luck with your work ;-)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154025 - bluesceada - Wed Apr 09, 2008 5:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">What steps would you recommend that I take to become 100% sure what every part of my code does?</td> </tr></table><span class="postbody">
<br/>
Umm, a good programmer should know how the language works he uses in every bit. Of course if you need to code much stuff, you can't always look at everything,... 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If only I had a multimeter, the money to buy a second cable to tear apart, and the time to do this instead of my other projects...</td> </tr></table><span class="postbody">
<br/>
You neither need a multimeter, nor a second cable (just if the circuit is molted inside the cable, mine can just be opened by two screws) - anyways, I didn't wanted to insult you or anything..
<br/>
<br/>
And yeah, time is always a problem :-(
<br/>
<br/>
I hope I didn't sound arrogant earlier - sorry.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Good luck with your work ;-)</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154050 - sgeos - Thu Apr 10, 2008 12:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">Umm, a good programmer should know how the language works he uses in every bit.</td> </tr></table><span class="postbody">
<br/>
This does not necessarily extend to knowledge of the hardware, especially when you are reverse engineering something.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">Of course if you need to code much stuff, you can't always look at everything,... </td> </tr></table><span class="postbody">
<br/>
Also, if you need to get a bunch of things done with a plethora of technologies, you don't necessarily need to do the best job with all of them.  A boolean "good enough" is all you need.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154061 - bluesceada - Thu Apr 10, 2008 9:25 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">This does not necessarily extend to knowledge of the hardware, especially when you are reverse engineering something.</td> </tr></table><span class="postbody">
<br/>
Ok, let's say an "embedded programmer". And reverse engineering, okay,.. but the GBA is now nearly completely specified at GBATEK.
<br/>
And if you don't even know if your code is correct, you can't come down to the hardware as the cause of the problem. You are in the dark then.
<br/>
<br/>
And the Gamecube Controller is also well specified and lots of people used <a href="http://www.int03.co.uk/crema/hardware/gamecube/gc-control.htm" target="_blank">http://www.int03.co.uk/crema/hardware/gamecube/gc-control.htm</a> to convert their NES and SNES pad to work with the Gamecube by using Microcontrollers.
<br/>
<br/>
The biggest problem (you could call reverse engineering) is just the standard cable inbetween, if you want to use that. (So you don't also have to do a special cable)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Also, if you need to get a bunch of things done with a plethora of technologies, you don't necessarily need to do the best job with all of them.  A boolean "good enough" is all you need.
<br/>
<br/>
-Brendan</td> </tr></table><span class="postbody">
<br/>
<br/>
Hm yeah right, but with the 16mhz you actually have to do nearly the best job with the timings the gc needs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154096 - tepples - Fri Apr 11, 2008 12:30 am</h4>
    <div class="postbody"><span class="postbody">So are you claiming that people should look at assembly language and be able to emulate the code cycle for cycle with pencil and paper, and that that's the most efficient solution when one cannot see the output?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154109 - bluesceada - Fri Apr 11, 2008 7:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">So are you claiming that people should look at assembly language and be able to emulate the code cycle for cycle with pencil and paper, and that that's the most efficient solution when one cannot see the output?</td> </tr></table><span class="postbody">
<br/>
<br/>
Not that much.
<br/>
But one should in average know how much cycles you need to do some sort of action after it was compiled. For example, that if you use a timer, you also have to know in average the time you need for execution code after the time has end / the timer interrupt was fired etc.
<br/>
<br/>
And in rare cases you might also need to look at assembly, or use inline assembly in c.
<br/>
<br/>
You normally don't have to do that for game programming of course.
<br/>
But this is a quite low latency case for the gba's hardware..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154157 - sgeos - Sat Apr 12, 2008 1:04 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">And the Gamecube Controller is also well specified ...</td> </tr></table><span class="postbody">
<br/>
If this problem has been solved before, then it should be relatively easy to reproduce that solution.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">Hm yeah right, but with the 16mhz you actually have to do nearly the best job with the timings the gc needs.</td> </tr></table><span class="postbody">
<br/>
Sure.  The bar for "good enough" is fairly high.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">And in rare cases you might also need to look at assembly, or use inline assembly in c. 
<br/>
<br/>
You normally don't have to do that for game programming of course. 
<br/>
But this is a quite low latency case for the gba's hardware..</td> </tr></table><span class="postbody">
<br/>
I agree.  Dealing with low level hardware timing is inherently arcane.  (From the standpoint of a software person, at least.)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154160 - tepples - Sat Apr 12, 2008 1:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">And the Gamecube Controller is also well specified ...</td> </tr></table><span class="postbody">
<br/>
If this problem has been solved before, then it should be relatively easy to reproduce that solution.</span></td> </tr></table><span class="postbody">
<br/>
The obvious roadblock comes in checking one's work, especially to see <span style="font-style: italic">what part</span> of a reproduced solution is incorrect.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">Dealing with low level hardware timing is inherently arcane.  (From the standpoint of a software person, at least.)</td> </tr></table><span class="postbody">
<br/>
Especially without the proper tools. On the NES, I have to deal with low-level hardware timing to make a raster split (the kind of thing you'd use VCOUNT for on a GBA), but then I have a reasonably accurate emulator that shows the output.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154169 - sgeos - Sat Apr 12, 2008 4:14 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">Dealing with low level hardware timing is inherently arcane.  (From the standpoint of a software person, at least.)</td> </tr></table><span class="postbody">
<br/>
Especially without the proper tools.</span></td> </tr></table><span class="postbody">
<br/>
For what it is worth, you might consider making an itemized list of the tools you feel you need to complete the job.  I'm actually not especially interested in the application, but other people might be and in theory you might be able to get enough support to get your tools.  Each entry should have the following information: Problem you need to solve, proposed tool to solve the problem, cost of new tool, alternative solutions you are aware of.  Others may be able to point out cheaper alternatives... and then again, maybe not.  Specialized knowledge <span style="font-weight: bold">is</span> somewhat rare, afterall.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154171 - tepples - Sat Apr 12, 2008 4:28 am</h4>
    <div class="postbody"><span class="postbody">In the case of emulating a GameCube controller, this would involve tools to monitor the output of a cycle-accurate GBA CPU, so as to compare the program's output to the desired output. I can think of two toolsets that might start to complete this:
<br/>
<ol type="a"><li>GBA + logic analyzer </li><li>cycle accurate PC-based GBA debugger + output logging </li></ol><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154272 - bluesceada - Sun Apr 13, 2008 11:36 pm</h4>
    <div class="postbody"><span class="postbody">It's quite problematic, I didn't had much (any) time this weekend, but I looked at one of the "solutions" which was entirely written in assembler for some PIC 16F last week, but I just have very very basic knowledge of assembler at all... so it didn't really help...
<br/>
But I still think that a logic analyzer or osci or good emulator still isn't necessary, though they might make it easier of course......
<br/>
Maybe I have time for this at the next weekend.
<br/>
// -- ok I maybe shouldnt continue to report about this -here- as it's offtopic, sorry
<br/>
<br/>
Btw: What kind of "specialized knowledge" are you talking about, what do you mean?
<br/>
<br/>
so to get on your topic now really:
<br/>
<br/>
So getting access to an oscilloscope shouldn't be to hard, I could get this easily at university (I still want to try this out without such options, I will not always be able to measure all things in future things, so I want to do as less trial &amp; error as possible.)
<br/>
<br/>
You should also be able to ask at schools or whatever. I guess it depends on your state of life.
<br/>
If you are still a student, teachers or professors should be very willed to provide support, as it will be educatable to you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154300 - sgeos - Mon Apr 14, 2008 8:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bluesceada wrote:</b></span></td> </tr> <tr> <td class="quote">Btw: What kind of "specialized knowledge" are you talking about, what do you mean?</td> </tr></table><span class="postbody">
<br/>
Anything.  This is a general comment that applies to all fields.  The more specialized the knowledge, the harder is to find people with that knowledge who are in a position to share it.
<br/>
<br/>
Applied specifically to this topic, a vague "useful knowledge of hardware".
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154307 - bluesceada - Mon Apr 14, 2008 2:26 pm</h4>
    <div class="postbody"><span class="postbody">Umm okay, specialized knowledge is for me things scientists research or really special technology like extremely exact sensors or whatever you may think about... Special software algorithms..
<br/>
<br/>
The GBA is far from being anything special - just some (quite) typical embedded arm-system with a display and some buttons and a link port...
<br/>
And the Gamecube uses just some typical bi-directional transfer protocol, probably not a standard, but nothing very special.
<br/>
<br/>
But of course you are right, though I don't see this knowledge you need here as _that_ special. At least not for anybody involved in at least a bit of embedded system technology.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154624 - bluesceada - Sat Apr 19, 2008 11:53 am</h4>
    <div class="postbody"><span class="postbody">Btw, this should be exactly what you need :-)
<br/>
<br/>
<a href="http://tfla-01.berlios.de/" target="_blank">http://tfla-01.berlios.de/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
