<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Pipelines and branching - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Hardware > Pipelines and branching</h2>
<div id="posts">
<div class="post">
    <h4>#11420 - poslundc - Mon Oct 06, 2003 2:52 am</h4>
    <div class="postbody"><span class="postbody">The GBA has a 3-stage pipleline. Do branch instructions flush the pipeline, or can you do creative assembly branching (like you can in MIPS) so that the instruction immediately following a branch instruction gets executed?
<br/>
<br/>
For that matter, will -O3 on gcc do that for me? :)
<br/>
<br/>
(I'm writing a somewhat time-critical function and trying to weigh the costs and benefits of having greater or fewer branch instructions in it...)
<br/>
<br/>
Thanks,
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11422 - tepples - Mon Oct 06, 2003 5:43 am</h4>
    <div class="postbody"><span class="postbody">The ARM architecture does not have MIPS-style delay slots. Taken branches on ARM7 cores flush the pipeline, costing two cycles. You'll want to use conditional execution to reduce forward branches and loop unrolling to reduce backward branches.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11426 - poslundc - Mon Oct 06, 2003 4:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The ARM architecture does not have MIPS-style delay slots. Taken branches on ARM7 cores flush the pipeline, costing two cycles. You'll want to use conditional execution to reduce forward branches and loop unrolling to reduce backward branches.</td> </tr></table><span class="postbody">
<br/>
<br/>
Conditional execution is only available in ARM, not Thumb, however?
<br/>
<br/>
Therefore any code generated by gcc at any optimization level will, by default, branch instead of using conditional execution, if I am not mistaken.
<br/>
<br/>
That sucks.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11433 - tepples - Mon Oct 06, 2003 7:58 pm</h4>
    <div class="postbody"><span class="postbody">If you're getting to the point where you count cycles, it may be time to put ARM code in IWRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11438 - tom - Tue Oct 07, 2003 12:31 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">Therefore any code generated by gcc at any optimization level will, by default, branch instead of using conditional execution, if I am not mistaken.</td> </tr></table><span class="postbody">
<br/>
<br/>
That is, any code compiled as thumb =)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
