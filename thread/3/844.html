<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Simulating a GBA Speaker... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Hardware > Simulating a GBA Speaker...</h2>
<div id="posts">
<div class="post">
    <h4>#4203 - yannis - Sun Mar 23, 2003 12:26 pm</h4>
    <div class="postbody"><span class="postbody">Hi there,
<br/>
<br/>
I am thinking of finding an external speaker to plug into my laptop which has the same frequency response as a GBA internal speaker..
<br/>
<br/>
does anyone know the technical details of the GBA internal speaker, and where I could find something like it to plug into a headphone socket ?
<br/>
<br/>
much thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4308 - tenner - Thu Mar 27, 2003 3:14 am</h4>
    <div class="postbody"><span class="postbody">would it work to just know the frequensies and then use a sound editor and filter the sound thru an eq?<br/>_________________<br/>current signature: 7/8</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4309 - yannis - Thu Mar 27, 2003 3:17 am</h4>
    <div class="postbody"><span class="postbody">no.
<br/>
<br/>
because I want to do this in real time. I've heard of people doing this so someone must have an idea which speakers to get hold of, which ones have the same frequency responses..<br/>_________________<br/>DS &amp; GBA Audio Professional
<br/>
<a href="http://www.GroovyAudio.com" target="_blank">www.GroovyAudio.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4312 - tepples - Thu Mar 27, 2003 4:27 am</h4>
    <div class="postbody"><span class="postbody">To do it in real time, read up on IIR filters.  A 3-pole Butterworth high-pass filter with cutoff frequency 800 Hz makes a good approximation of the GBA speaker's frequency response.  I figured it out by playing white noise through my GBA, miking its speaker, and using Cool Edit Pro's "scientific filter" to try to come up with the closest thing.  Of course, for it to sound right after this sort of filtering, you have to hook the PC up to a stereo system, not to laptop speakers with a high-pass characteristic of their own.
<br/>
<br/>
Here is the code for such a filter, obtained with <a class="postlink" href="http://www-users.cs.york.ac.uk/~fisher/mkfilter/trad.html" target="_blank">this tool</a>, designed for a 44100 Hz output:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
/* Digital filter designed by mkfilter/mkshape/gencode   A.J. Fisher
<br/>
   Command line: /www/usr/fisher/helpers/mkfilter -Bu -Hp -o 3 -a 1.8140589569e-02 0.0000000000e+00 -l */
<br/>
<br/>
#define NZEROS 3
<br/>
#define NPOLES 3
<br/>
#define GAIN   1.120799837e+00
<br/>
<br/>
static float xv[NZEROS+1] = {0}, yv[NPOLES+1] = {0};
<br/>
<br/>
static void filterloop()
<br/>
  { for (;;)
<br/>
      { xv[0] = xv[1]; xv[1] = xv[2]; xv[2] = xv[3]; 
<br/>
        xv[3] = input_value() / GAIN;
<br/>
        yv[0] = yv[1]; yv[1] = yv[2]; yv[2] = yv[3]; 
<br/>
        yv[3] =   (xv[3] - xv[0]) + 3 * (xv[1] - xv[2])
<br/>
                     + (  0.7960564529 * yv[0]) + ( -2.5695426386 * yv[1])
<br/>
                     + (  2.7721606930 * yv[2]);
<br/>
        output_value(yv[3]);
<br/>
      }
<br/>
  }
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
