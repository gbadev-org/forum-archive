<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Solving the 8bit Write problem for RAM in cart address space - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Hardware > Solving the 8bit Write problem for RAM in cart address space</h2>
<div id="posts">
<div class="post">
    <h4>#111014 - cesium - Sun Dec 03, 2006 5:49 pm</h4>
    <div class="postbody"><span class="postbody">Reading and writing 16 and 32 bit words to RAM on a
<br/>
GBA cart works fine.
<br/>
<br/>
The problem arises when you try to write an 8 bit byte to
<br/>
RAM in the cart address space: The upper byte and lower byte
<br/>
in the 16 bit word at that RAM locaction BOTH become the
<br/>
value in the byte you are writing.
<br/>
<br/>
Not good.
<br/>
<br/>
The DSLinux folks have modified their compiler so that they can
<br/>
read and write to RAM that has been mapped into the GBA cart
<br/>
address space.
<br/>
<br/>
I'm not exactly sure how they did it, but it had something to do with
<br/>
trapping 8 bit writes. Maybe they used the memory cache too.
<br/>
<br/>
Anyway, has anyone tried to use their compiler for GBA apps?
<br/>
<br/>
I have a cart with 8 MBytes of Flash and 16 MBytes of RAM and
<br/>
I'd like to use the RAM in my C/C++ apps.
<br/>
<br/>
Any ideas on how to apply their success to GBA RAM expansion?
<br/>
Can their toolchain be used to compile our C/C++ apps?
<br/>
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111026 - Dwedit - Sun Dec 03, 2006 7:21 pm</h4>
    <div class="postbody"><span class="postbody">The GBA doesn't support traps on 8-bit writes to the cartridge area, so the exception handling method won't work.  But a complier modified to never emit 8 bit writes would work great on a GBA.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111027 - cesium - Sun Dec 03, 2006 7:24 pm</h4>
    <div class="postbody"><span class="postbody">I'm sorry I said trapping. That really implies expection handling.
<br/>
<br/>
I know that they modified the compiler to <span style="font-style: italic">handle</span> not <span style="font-style: italic">trap</span>
<br/>
8bit writes.
<br/>
<br/>
Anyone ever use their modified compiler?
<br/>
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111057 - Ant6n - Sun Dec 03, 2006 9:15 pm</h4>
    <div class="postbody"><span class="postbody">well, the simplest solution is always to read the word where you want to put your byte, then either update the lower or higher byte of it and write it back. not good enough?
<br/>
caching would probably work fine, too, but you'd have to do it all by yourself.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111077 - cesium - Sun Dec 03, 2006 11:29 pm</h4>
    <div class="postbody"><span class="postbody">I'm hoping to use a wide range of open source libraries in my
<br/>
application. I would have to go through the source code, line by line
<br/>
to ensure there were no 8 bit writes.
<br/>
<br/>
Not a pleasing idea.
<br/>
<br/>
I'd rather a compiler do the checking, not me.
<br/>
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
