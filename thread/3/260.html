<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>MBV2 cable: Hardware newbie needs help... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Hardware > MBV2 cable: Hardware newbie needs help...</h2>
<div id="posts">
<div class="post">
    <h4>#1580 - Indecisive - Mon Jan 20, 2003 1:42 pm</h4>
    <div class="postbody"><span class="postbody">I recently got an MBV2 cable from lik-sang. I've so far succeeded in transferring the little demo program that came with it onto my GBA and it works fine. Unfortunately, my programs don't. 
<br/>
<br/>
I have so far only been running them on emulators (which works fine) and I know I need to do something to them so they can run on hardware. Some sort of header?
<br/>
<br/>
I'm using DevKit Advance so if someone can provide a .h or .c that I can just add to the start of my prog that would be brilliant. Can anyone help?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1601 - tepples - Mon Jan 20, 2003 6:02 pm</h4>
    <div class="postbody"><span class="postbody">If you're using a recent version of Devkit Advance or any other system built around Jeff F's linker script, then put the following line in ONE of your source code files:
<br/>
<br/>
int __gba_multiboot;
<br/>
<br/>
This will instruct the linker script to output code relocated to EWRAM rather than ROM.  (If run from ROM, the program will copy itself to RAM before running it.)  Files compiled this way are usually named with the .mb extension rather than .gba.
<br/>
<br/>
You can put several .mb files into one .gba with a menu program such as <a class="postlink" href="http://www.pineight.com/gba/#mbmenu" target="_blank">this one</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2250 - Indecisive - Fri Jan 31, 2003 6:50 pm</h4>
    <div class="postbody"><span class="postbody">Okay, just got round to trying this. Guess I don't have a recent enough version of DevKit Advance as it didn't seem to work.
<br/>
There weren't any errors when I compiled it, but I still get nothing but a blank screen after I transfer it.
<br/>
Does this mean I need to get a more recent version of DevKit Advance or does someone have a .h or whatever I can #include make my program multiboot?
<br/>
If this post is a bit odd it's because I'm not really sure what I'm talking about when it comes to hardware. So any help would be appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2513 - Maverick - Wed Feb 05, 2003 2:45 pm</h4>
    <div class="postbody"><span class="postbody">Just after your includes at the top, write in this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define MULTIBOOT volatile const u8 __gba_multiboot;
<br/>
MULTIBOOT
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then continue on with the rest of your code as normal, you also need a make.bat file that looks like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
path=C:\devkitadv\bin
<br/>
gcc -Ttext=0x02000000 -o game.elf game.c
<br/>
objcopy -O binary game.elf game.mb
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The first lot of code is to tell the GBA to boot the file into GBA RAM, this is necessary as there is no cart in the GBA so we cant load to CART RAM.
<br/>
<br/>
The change in the make.bat file from a normal one is the 
<br/>
-Ttext=0x02000000
<br/>
This is to tell the GBA to start from memory address 0x02000000 and not 0x08000000, again because there is no cart installed.
<br/>
<br/>
Hope this helps!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3581 - Indecisive - Fri Feb 28, 2003 12:29 pm</h4>
    <div class="postbody"><span class="postbody">Couldn't let this go without responding. I just got round to trying this yesterday and it works. Many, many thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3711 - phr0zn - Thu Mar 06, 2003 2:43 am</h4>
    <div class="postbody"><span class="postbody">Hey, I know this is a semi-old topic but I am still having trouble getting my MBV2 cable to work.
<br/>
<br/>
I am running windowsxp and I downloaded the UserPort.sys file and put it in Windows\System32\Drivers and am using UserPort.exe with my printer IO resources specified correctly (or I believe so - 378-37F).  
<br/>
<br/>
However, when I run mb -s glib -w 500, nothing happens (it runs...just nothing seems to be going on).  I double and double and double, but nothing happens.  Approx how long should I wait?
<br/>
<br/>
Could there be something wrong with my cable, or am I doing something wrong?  
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3712 - phr0zn - Thu Mar 06, 2003 3:02 am</h4>
    <div class="postbody"><span class="postbody">one more thing I noticed: every time I hit exit in UserPort, the IO registers seem to return to default.  However, it says it is still running when I click to start it again.  
<br/>
<br/>
I have tried removing all of its entries and adding mine, and it does that, but when I load it up again mine are gone and it has returned to the default settings.  Any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3736 - Maverick - Thu Mar 06, 2003 11:52 pm</h4>
    <div class="postbody"><span class="postbody">How far does mb.exe get?
<br/>
<br/>
What are the outputs given after you type this in?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3738 - phr0zn - Fri Mar 07, 2003 1:15 am</h4>
    <div class="postbody"><span class="postbody">it just kinda stalls there, and my 2.4ghz computer just kinda slowly freezes.  It seems like it could be doing something...and thats why I ask how long it should take.  There is no output, but nothing really happens.  maybe im not waiting long enough?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3739 - ampz - Fri Mar 07, 2003 2:12 am</h4>
    <div class="postbody"><span class="postbody">No idea about the MBV2...
<br/>
The XBOO cable downloads 20kB of code in 1-2seconds on my machine (450MHz)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3747 - Maverick - Fri Mar 07, 2003 3:28 pm</h4>
    <div class="postbody"><span class="postbody">Is your LPT1 set to 0378-037F or 378-37F.
<br/>
<br/>
I dont know how this prog works, so i dont know if this could make a difference.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3749 - tepples - Fri Mar 07, 2003 4:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>phr0zn wrote:</b></span></td> </tr> <tr> <td class="quote">it just kinda stalls there, and my 2.4ghz computer just kinda slowly freezes.  It seems like it could be doing something</td> </tr></table><span class="postbody">
<br/>
Look at the GBA, and turn up the volume.  If you hear six notes out of an ascending G major scale and you see "Nintendo?" on the display, the transfer has started.  If the "Nintendo?" slowly fades in and out, the transfer is continuing.  When "GAME BOY" and "Nintendo?" fade to white, the transferred program has started.  (If it remains white after that point, the bug is in your program, not the transfer technique.)
<br/>
<br/>
That said, UserPort's default settings worked for me on Windows 2000.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3758 - phr0zn - Fri Mar 07, 2003 10:31 pm</h4>
    <div class="postbody"><span class="postbody">when i enter 0378-037F it just changes it to 378-37F, so I think they are the same.
<br/>
<br/>
As for the sound, etc: no sound, no blinking, no nothing.  just kinda is there.
<br/>
<br/>
well...this is a bummer :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3765 - Maverick - Sat Mar 08, 2003 12:10 am</h4>
    <div class="postbody"><span class="postbody">So, userport.sys is in system32, userport.exe is ready the mbv2 is in parallel port, lpt is set to 378-37F, userport is set to 378-37F
<br/>
<br/>
mb -s glib -w 500
<br/>
<br/>
with glib.mb in the same folder
<br/>
<br/>
But when you turn on the GBA and hit enter, nothing hapens at all?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3772 - phr0zn - Sat Mar 08, 2003 5:51 am</h4>
    <div class="postbody"><span class="postbody">exactly.  that is a perfect description of what happens :)<br/>_________________<br/><a href="http://cerberus.promodtecnologies.com" target="_blank">http://cerberus.promodtecnologies.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3774 - ampz - Sat Mar 08, 2003 1:22 pm</h4>
    <div class="postbody"><span class="postbody">Wrong paralell port mode?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3775 - Maverick - Sat Mar 08, 2003 1:47 pm</h4>
    <div class="postbody"><span class="postbody">I dont have XP myself but the way that it is supposed to work is:
<br/>
<br/>
userport.exe in XP root directory
<br/>
userport.sys in XP\system32\drivers\
<br/>
address range same as lpt port settings
<br/>
then click start on userport.exe
<br/>
then turn gba on with no cartridge installed
<br/>
<br/>
GBA output should be just GAME BOY
<br/>
<br/>
connect the mbv2 cable between the parallel port and the GBA
<br/>
then startbar\run\cmd
<br/>
goto directory with mb.exe and glib.mb in
<br/>
type mb -s glib -w 500
<br/>
<br/>
MB.EXE output should be
<br/>
Parallel MBV2 cable found: hardware=vX.X, firmware=vX
<br/>
EPP support found.
<br/>
Looking for multiboot-ready GBA...
<br/>
Sending data. Please wait...
<br/>
CRC Ok - Done.
<br/>
<br/>
GBA should "Bling"
<br/>
NintendoR should now be flashing on the screen
<br/>
<br/>
When NintendoR stops flashing and GAME BOY and NintendoR fade away, the multiboot rom should execute.
<br/>
<br/>
This is the theory, but this is everything you are doing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3785 - phr0zn - Sat Mar 08, 2003 9:13 pm</h4>
    <div class="postbody"><span class="postbody">yah.  at this point
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
MB.EXE output should be 
<br/>
Parallel MBV2 cable found: hardware=vX.X, firmware=vX 
<br/>
EPP support found. 
<br/>
Looking for multiboot-ready GBA... 
<br/>
Sending data. Please wait... 
<br/>
CRC Ok - Done. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
nothing happens.  i will try it on another computer with win98 or something, see if its the cable or my computer.<br/>_________________<br/><a href="http://cerberus.promodtecnologies.com" target="_blank">http://cerberus.promodtecnologies.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4633 - Maverick - Sat Apr 05, 2003 4:46 pm</h4>
    <div class="postbody"><span class="postbody">When you click start in userport.exe, what happens?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4744 - slippyr4 - Tue Apr 08, 2003 12:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">#define MULTIBOOT volatile const u8 __gba_multiboot; 
<br/>
MULTIBOOT 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Why bother defining MULTIBOOT, when you only use it once, and on the next line? Better to just put:-
<br/>
<br/>
<span style="font-weight: bold">volatile const u8 __gba_multiboot;</span>
<br/>
<br/>
on one line.[/quote]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
