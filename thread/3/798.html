<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Flash2Advance's Flash Chip Addressing/Enabling? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Hardware > Flash2Advance's Flash Chip Addressing/Enabling?</h2>
<div id="posts">
<div class="post">
    <h4>#4031 - cesium - Sun Mar 16, 2003 5:46 pm</h4>
    <div class="postbody"><span class="postbody">I've been using my Flash2Advance 128M Flash Card as a test
<br/>
subject for learning to program flash chips. I've enabled writing
<br/>
by using the Visoly preamble (write foo 500 times, stand on head,
<br/>
gargle peanut butter etc.).
<br/>
<br/>
Looking at the cart, I see 4 each of Intel's F320B3TC Advanced Boot
<br/>
Block Flash chips. I have been able to read the manufacturer code
<br/>
using the Read Identifier Command, but reading the Device code
<br/>
is confusing me.
<br/>
<br/>
I dont' receive the Device Code when I read 0x08000001.
<br/>
But I do get the proper Device Code (0x8896) when I
<br/>
read 0x08000004.
<br/>
<br/>
Does this make sense? Why Isn't it at 0x08000001? (or perhaps
<br/>
0x08000002)
<br/>
<br/>
Also, do you have an opinion on enabling flash chips? Do you
<br/>
like the "perform a goofy series of writes" method?
<br/>
What about just placing a small switch on the cart PCB?
<br/>
How about just enabling writes all the time?
<br/>
<br/>
Is this simply a product security issue?
<br/>
I guess if your CPLD has extra gates, it just takes a few lines
<br/>
of VHDL to design a "write protect" algorithm.
<br/>
<br/>
Cheers,
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4040 - ampz - Sun Mar 16, 2003 8:22 pm</h4>
    <div class="postbody"><span class="postbody">The funky write protection routine used by visoly is kinda redundant. Flash chips already include write protection. (ie. you have to issue the proper write command before you can write anything).
<br/>
<br/>
Are you saying flash2advance use exactly the same routine as visoly does?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4045 - cesium - Sun Mar 16, 2003 10:01 pm</h4>
    <div class="postbody"><span class="postbody">ampz,
<br/>
Ahhh. Of course. the Intel Memory Command Set should serve as
<br/>
protection enough.
<br/>
<br/>
As far as the Visoly preamble enabling the Flash2Advance,
<br/>
I had to 'execute' this sequence in order to get the Intel 'Read Identifier
<br/>
Codes'  to return the Manufacturer ID (0x0089) properly.
<br/>
This is as far as I've gotten in the Intel Command Set.
<br/>
<br/>
Does it make sense to you that the I get the manufacturer ID
<br/>
from 0x08000000 and the Device code from 0x08000004 ?
<br/>
<br/>
I'll keep trying more Intel commands and keep you posted.
<br/>
<br/>
cesium
<br/>
<br/>
PS, The F320B3TC's are obsolete, right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4048 - ampz - Mon Mar 17, 2003 12:10 am</h4>
    <div class="postbody"><span class="postbody">Yes.
<br/>
I assume that this 128M flash cart of yours contains two 64M flash parts?
<br/>
They are connected in paralell, one part for the upper 8 bits and one part for the lower 8 bits on the 16bit databus.
<br/>
<br/>
Since it's a 16bit bus and we are working with 16bit operations, only even adresses are valid.
<br/>
0x08000000, 0x08000002, 0x08000004, 0x08000006 and so on.
<br/>
Also, when reading device identifier codes, the A0 pin on the flash part is unused. That's why you get the device code from 0x08000004.
<br/>
You should find the block 0 lock configuration at adress 0x08000008.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4051 - cesium - Mon Mar 17, 2003 2:51 am</h4>
    <div class="postbody"><span class="postbody">I need to re-read that Intel data sheet. I do recall something about A0
<br/>
not being used.
<br/>
<br/>
I'll print out your reply, the data sheet, and sketch some *Parallel*
<br/>
architectures over breakfast in the morning.
<br/>
<br/>
Thanks ampz!
<br/>
<br/>
cesium</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
