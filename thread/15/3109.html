<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Unknown compression format - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Game Design > Unknown compression format</h2>
<div id="posts">
<div class="post">
    <h4>#18319 - LOst? - Tue Mar 23, 2004 10:55 pm</h4>
    <div class="postbody"><span class="postbody">I have tried the GBA Crusher on a Sega Genesis tile data to see how much I can decrease the size.
<br/>
<br/>
I'm actually looking for the name of the compression type used by the basic Sega games, and I thought it could be some sort of LZ, so I tried to compare the data after being compressed. Here is the result:
<br/>
<br/>
Huffman 4-bit: Genesis tile data ended up 17% compressed
<br/>
Huffman 8-bit: Genesis tile data ended up 35% compressed
<br/>
LZ77 and VRAM safe: Genesis tile data ended up 33% compressed
<br/>
<span style="font-weight: bold">Sega Genesis compression: Genesis tile data are 55% compressed</span>
<br/>
<br/>
<br/>
I don't know much about compression or how it works. The tile format in Sega Genesis is 4 bit per pixel. The LZ77 isn't good on this format? Is there any other LZ compression that may be better to use? Or is this compression format made up by Sega (which I don't believe)?
<br/>
<br/>
Oh by the way, I tried to compress GBA tiles with the GBA Crucher and the Sega Genesis compression format with the result:
<br/>
<br/>
Huffman 4-bit: GBA tile data ended up 50% compressed
<br/>
Huffman 8-bit: GBA tile data ended up 62% compressed
<br/>
LZ77 and VRAM safe: GBA tile data ended up 67% compressed
<br/>
<span style="font-weight: bold">Sega Genesis compression: GBA tile data are 33% compressed</span>
<br/>
<br/>
So I guess LZ77 is best for GBA tile data.
<br/>
<br/>
Does anyone know what type of compression the Genesis uses after seeing just these results? Just a guess would be nice :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18320 - Miked0801 - Tue Mar 23, 2004 11:23 pm</h4>
    <div class="postbody"><span class="postbody">A guess would be an LZ compressor with a filter applied to the data.  But with the data supplied, I can only guess.  I'm pretty sure it won't be an LZ78/LZW type nor anything more memory intensive.  As the compression rates are high, I doublt it's a Huffman or RLE.  That leaves LZ77.  With even a differential filter, many tilesets compress much better.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18321 - LOst? - Tue Mar 23, 2004 11:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">A guess would be an LZ compressor with a filter applied to the data.  But with the data supplied, I can only guess.  I'm pretty sure it won't be an LZ78/LZW type nor anything more memory intensive.  As the compression rates are high, I doublt it's a Huffman or RLE.  That leaves LZ77.  With even a differential filter, many tilesets compress much better.</td> </tr></table><span class="postbody">
<br/>
<br/>
Compression is too complex for my brain...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">The art compression format is a very dense compression format. It's only used for art because the format relies on the data being in blocks of 64 bytes.</td> </tr></table><span class="postbody">
<br/>
From a guy I know that has written a compressor/decompressor tool for the Genesis tile format. The problem is that he's calling the compression format with his own name, even though it's used in more than 10 original Sega games. It would be fun to know the real name of it and that's why I'm asking for help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18326 - Miked0801 - Wed Mar 24, 2004 3:19 am</h4>
    <div class="postbody"><span class="postbody">Hmmm.  Maybe he's creating a lookup of some-sort then where the top N 64-byte patterns are turned into special escape sequences to get compression.  Just a guess.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18334 - tepples - Wed Mar 24, 2004 4:47 am</h4>
    <div class="postbody"><span class="postbody">The only difference between Sega Genesis tile data and 4-bit GBA tile data is that Sega Genesis tile data is nibble-swapped to work better with the big-endian 68K architecture. This suggests some sort of nibble-wise operation.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18345 - LOst? - Wed Mar 24, 2004 6:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The only difference between Sega Genesis tile data and 4-bit GBA tile data is that Sega Genesis tile data is nibble-swapped to work better with the big-endian 68K architecture. This suggests some sort of nibble-wise operation.</td> </tr></table><span class="postbody">
<br/>
<br/>
Okay. It's always interesting to know how different consoles work. I like the M68k processor a lot.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
