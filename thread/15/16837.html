<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GORF Final Alpha - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Game Design > GORF Final Alpha</h2>
<div id="posts">
<div class="post">
    <h4>#170076 - ArugulaZ - Fri Aug 28, 2009 3:12 am</h4>
    <div class="postbody"><span class="postbody">I'm thrilled with the progress I've made with GORF!  All five stages are included now, along with some sound effects and collision detection for the player's ship.  I'd put it at 75% finished now.  Download the alpha from my web site and let me know what you think of it... what you liked and what could be improved.  Who says you can't do anything with BASIC? :D
<br/>
<br/>
<a href="http://www.lakupo.com/grblitz" target="_blank">http://www.lakupo.com/grblitz</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170078 - dantheman - Fri Aug 28, 2009 4:51 am</h4>
    <div class="postbody"><span class="postbody">Not bad at all.  I'm very impressed with what you've managed to make with DragonBASIC, considering its relatively high overhead.  My only criticism is with the way bullets are fired, as I'm used to just hitting the fire button often rather than having to wait until it hits.  Looking at the top of the source file though, it looks like that's already on your to-do list, which I'm glad to see.
<br/>
<br/>
EDIT:  fixed horrible late-night grammar.</span><span class="gensmall"><br/><br/>Last edited by dantheman on Fri Aug 28, 2009 6:24 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#170083 - ScottLininger - Fri Aug 28, 2009 5:07 pm</h4>
    <div class="postbody"><span class="postbody">Fantastic! Nice gameplay, consistent look &amp; feel, and a complete thought!
<br/>
<br/>
Well done,
<br/>
<br/>
Scott<br/>_________________<br/>Some of my <a class="postlink" href="http://www.scottlininger.com/" target="_blank">GBA projects</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170093 - ArugulaZ - Sun Aug 30, 2009 12:22 am</h4>
    <div class="postbody"><span class="postbody">Thanks guys, I appreciate the encouragement.  This has been a labor of love for me... if you've ever played the <span style="font-style: italic">other</span> home versions of GORF, you'd understand why.  I still get nightmares from the ColecoVision game... brr!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170134 - keldon - Tue Sep 01, 2009 5:17 pm</h4>
    <div class="postbody"><span class="postbody">That is excellent. You don't have to be great to complete a your work, but you have to complete your work to be great!!!
<br/>
<br/>
Bravo ... only wish I hadn't destroyed my EZ flash cart :'(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170142 - ritz - Thu Sep 03, 2009 2:50 pm</h4>
    <div class="postbody"><span class="postbody">Very good game, very well done!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ArugulaZ wrote:</b></span></td> </tr> <tr> <td class="quote">http://www.lakupo.com/grblitz</td> </tr></table><span class="postbody">
<br/>
P.S. <span style="font-style: italic">Awesome</span> slogan on your webpage: "For the love of the game". Wish I would've thought of that... you should make it your sig :)  Or, maybe, you could quickly delete it before people read this and *I* can use it ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170162 - ArugulaZ - Fri Sep 04, 2009 9:06 pm</h4>
    <div class="postbody"><span class="postbody">Glad you're still following this project!  It's grown by leaps and bounds since the last time I posted.  You can download the latest beta from my web site:
<br/>
<br/>
<a href="http://www.lakupo.com/grblitz" target="_blank">http://www.lakupo.com/grblitz</a>
<br/>
<br/>
The core game is pretty much finished at this point, and there are a variety of extras, including an art gallery and a title screen.  I'm amazed at just how good Dragon BASIC is... after registering the product I haven't bumped into any restrictions or limitations, and my game is pushing 7000 lines at this point.  BASIC or not, this could easily be used to make professional-quality games.  It's just a shame that there isn't a DS version of the software... I would have loved to see what Massung could have done with the hardware.  He's working for Disney or something now, correct?
<br/>
<br/>
Anyway, thanks for the encouragement!  I'll keep plugging away at this and keep you posted on its progress!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170167 - Dwedit - Sat Sep 05, 2009 1:56 am</h4>
    <div class="postbody"><span class="postbody">I don't know if you can do anything about it, but it always uses 100% CPU usage without halting, making it a battery eater.  (NO$GBA debug version tells you those things immediately)<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170174 - ArugulaZ - Sat Sep 05, 2009 5:33 pm</h4>
    <div class="postbody"><span class="postbody">That explains why it chews through my Game Boy Micro's battery in an hour.  It's like playing a friggin' Atari Lynx or something.
<br/>
<br/>
Honestly, I don't know if I can do anything about this, but I <span style="font-style: italic">do</span> appreciate the explanation.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170177 - Dwedit - Sat Sep 05, 2009 7:17 pm</h4>
    <div class="postbody"><span class="postbody">In order to wait for Vblank, Dragon basic is doing retarded stuff like this endless loop which repeatedly checks what the current scanline number is:
<br/>
<br/>
mov r2,#0x04000000
<br/>
0:
<br/>
ldrh r3,[r2,#6]
<br/>
cmp r3,#160
<br/>
bne 0b
<br/>
<br/>
Which is a big NO-NO for how to wait for vblank.  The proper way is to install an IRQ handler, then use SWI WaitForVblank so the system can enter low power mode.
<br/>
It might be possible to ASM hack the game to make it not do that.
<br/>
<br/>
Don't feel too bad, even commercial games like Wario Ware even have bad Vblank wait code.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170179 - gauauu - Sat Sep 05, 2009 11:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote"> (NO$GBA debug version tells you those things immediately)</td> </tr></table><span class="postbody">
<br/>
<br/>
Rub it in, why don't you ;-)
<br/>
<br/>
Alas, what I wouldn't give for a copy of that thing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170180 - ArugulaZ - Sun Sep 06, 2009 12:25 am</h4>
    <div class="postbody"><span class="postbody">There <span style="font-style: italic">is</span> a dedicated VBLANK command in Dragon BASIC that might solve the problem, but it seems to slow execution time.  I believe the loops in some of the stages may take two vertical scans to complete, and when you add a pause for vertical blank on top of that... well, things start to crawl.  I'll experiment and see if I can fix the problem without hurting the gameplay.  I really hate the hit it takes on battery life, and anything that can address this would be appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170288 - ArugulaZ - Wed Sep 16, 2009 12:50 am</h4>
    <div class="postbody"><span class="postbody">Here's the nearly finished beta of GORF.  Please give it a spin and let me know what you think of it.
<br/>
<br/>
<a href="http://www.lakupo.com/grblitz/gorf_beta_98.zip" target="_blank">http://www.lakupo.com/grblitz/gorf_beta_98.zip</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170291 - Dwedit - Wed Sep 16, 2009 4:29 am</h4>
    <div class="postbody"><span class="postbody">Okay, I'll go look at the "Dragon Basic" language and see if there is any way I can make it less retarded and less battery munching.
<br/>
<br/>
Edit: I successfully modified the libraries, and made the minesweeper example program use the proper way to wait for vblank.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170292 - ArugulaZ - Wed Sep 16, 2009 6:05 am</h4>
    <div class="postbody"><span class="postbody">Really?  Hmm... maybe I'll try feeding my GORF code into the modified version of Dragon BASIC.  Worst it could do is give me an error, right?  Do you have a ZIP file of the revised compiler and libraries?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170302 - Dwedit - Wed Sep 16, 2009 1:23 pm</h4>
    <div class="postbody"><span class="postbody">Add this code somewhere in Interrupts.f:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
\ wait for an interrupt
<br/>
: waitirq ( -- ) 02 swi ;
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
and inside interrupts.dbc:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
PROTOTYPE SUB      WAITIRQ
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Add this to core.f:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
\ wait for the next vertical blank
<br/>
code vblank2 ( -- )
<br/>
   
<br/>
   $4000000 ## v0 mov,
<br/>
   
<br/>
   \ wait for vertical blank
<br/>
   l: __wait
<br/>
   2 swi,
<br/>
   v0 6 #( v1 ldrh,
<br/>
   160 ## v1 cmp,
<br/>
   __wait ne? b,
<br/>
   
<br/>
   \ done
<br/>
   ret
<br/>
end-code
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Add this to core.dbc:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
PROTOTYPE SUB       VBLANK2
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Then an example of how to use the new code:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DIM needtowait
<br/>
<br/>
SUB VBLANKWAIT
<br/>
   If needtowait = 1
<br/>
      VBLANK2
<br/>
   END IF
<br/>
   needtowait = 1
<br/>
END SUB
<br/>
<br/>
vbl: SUB NONEEDTOWAIT
<br/>
   needtowait = 0
<br/>
   end sub
<br/>
<br/>
; Entry point
<br/>
start:
<br/>
   ;You must install the IRQ handler and enable interrupts, otherwise the vblank wait code will crash.
<br/>
   needtowait = 1
<br/>
   ENABLEINTERRUPTS
<br/>
   ONVBLANK vbl
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then any time you want to wait for vblank, call VBLANKWAIT.  It uses the needtowait variable to prevent it from waiting two frames if your code got too slow.  You can also set needtowait to 1 to force it to wait, or just call VBLANK2.
<br/>
I'm not 100% sure if the needtowait stuff actually works or not.  I think it does.
<br/>
<br/>
The built in VBLANK function is bad.  Never call it for any reason.  It lacks any code to enter low power mode.
<br/>
<br/>
If you want to do it for timers, you would add an ONTIMER, and a timer handler, then enable interrupts for the timer, then call WAITIRQ when you want to wait for the timer to finish (you only do this if the timer is not already finished)<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170308 - ArugulaZ - Wed Sep 16, 2009 3:13 pm</h4>
    <div class="postbody"><span class="postbody">It seems to work great!  It slowed my production logo to a crawl, but everything else works at the speed it did previously.  I'm going to test it on the actual hardware in an hour after my GameBoy Micro is fully charged, and return with a report shortly afterward.
<br/>
<br/>
Thanks, by the way!
<br/>
<br/>
Oh yeah, one question.  Dragon BASIC <span style="font-style: italic">officially</span> supports four rotation matrices, but will allow more if you assign them.  Could this have something to do with the logo running more slowly than the rest of the program?  I've got a ton of rotation going on there, what with the letters squashing and stretching and all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170309 - Dwedit - Wed Sep 16, 2009 3:20 pm</h4>
    <div class="postbody"><span class="postbody">Rotating and scaling sprites is free, the hardware does that for you.  Calling matrix muliplication code is not free though.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170320 - Miked0801 - Wed Sep 16, 2009 6:16 pm</h4>
    <div class="postbody"><span class="postbody">But not too bad to do - depending on the implementation.  Even a 3x3 X 3x3 matrix mul is only around 18 muls and adds.  Child's play if done right in code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170334 - ArugulaZ - Thu Sep 17, 2009 5:10 am</h4>
    <div class="postbody"><span class="postbody">(sigh) 
<br/>
<br/>
I'm hearing reports that the game has a grudge against 3-in-1 cartridges.  Evidently it's a header problem, but I can't test it for myself because I don't have one of these cartridges, and I can't really fix it because I don't know ASM.  I wish I didn't have to ask, but I'm going to swallow my pride and do it anyway for the sake of the game.  Can anyone help?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170340 - Dwedit - Thu Sep 17, 2009 1:34 pm</h4>
    <div class="postbody"><span class="postbody">You don't need to know ASM to fix a header problem, you just need to whip out a hex editor, and fix it.
<br/>
But knowing HOW to fix it is the problem.  Find someone who knows about hacking games to work with crappy flash products.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170348 - ArugulaZ - Fri Sep 18, 2009 2:22 am</h4>
    <div class="postbody"><span class="postbody">I forgot I had a tool called GBAfix.  Never used it in the past because hey, it worked with <span style="font-style: italic">my</span> card!  I just forgot about everyone else's...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170427 - ArugulaZ - Wed Sep 23, 2009 3:53 pm</h4>
    <div class="postbody"><span class="postbody">All right gang, the game is finished.  I might do some bugfixes and touch up the Mission Matrix a bit at a later date, but for the moment, I'm done.  You can get the finished product from this address:
<br/>
<br/>
<a href="http://www.lakupo.com/grblitz" target="_blank">http://www.lakupo.com/grblitz</a>
<br/>
<br/>
I was hoping for a more enthusiastic response to the game, but so far it's been pretty tepid.  My dreams of fame and fortune have been dashed! ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
