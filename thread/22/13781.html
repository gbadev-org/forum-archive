<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>'Mouse' on GBA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Motion Sensor > 'Mouse' on GBA</h2>
<div id="posts">
<div class="post">
    <h4>#135755 - Ant6n - Thu Jul 26, 2007 2:24 am</h4>
    <div class="postbody"><span class="postbody">I've spend some time the last couple of days trying to devise a way to get a sort of mouse working on the gba using the gbaccelerometer. Here is what i have come up with so far. I created some sort of library called gbamouse.
<br/>
It reads the values from the gbaccelerometer and provides these as acceleration on the axis, rotation around the axis, angle between rotated xy,yz,zy planes and the corresponding untransformed planes.
<br/>
Unlike a sort of joystick, a tilting of the gba from the original position doesn't represent movement of the mouse, but an absolution position that is relative to the original position (i.e. calibration)
<br/>
<br/>
I provided a little example to show the settings. One can browse through them with the dpad. It also shows the values the mouse object reads. One can turn that off to see the mouse running at 'normal' speed. So far everything is programmed using floats (and pretty fugly), because this is a proof of concept.
<br/>
<br/>
I hope that people test this and give feedback, and their favorite settings.
<br/>
I hope that eventually people will port some old dos game or so (that is if they havent all moved to the DS yet).
<br/>
source/binary:
<br/>
<a href="http://www.cs.mcgill.ca/~adubra/gba/mouse/gbaMouse.zip" target="_blank">http://www.cs.mcgill.ca/~adubra/gba/mouse/gbaMouse.zip</a>
<br/>
Anton
<br/>
<br/>
<br/>
(ps:)The settings are:
<br/>
source of mouse x and y values - either axis angle, plane angle or values directly from accelerometer
<br/>
x/y sensitivity - the higher the value, the farther the mouse will go on tilt
<br/>
x/y mouse lag - its a sort of filter to avoid small jumps; it represents how much the difference between old mouse position and  new measured mouse position is to be multiplied by to get the new actual mouse position
<br/>
one can associate a button (or more) with the mouse, for movement and calibration (in the example i used both shoulders and select)
<br/>
calibration - calibration on pressing mouse, releasing mouse, no calibration
<br/>
center on calibration - either center the mouse on calibration, or keep it where it is
<br/>
when to move - move or not on button press, move or not on not button press</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135800 - KeithE - Thu Jul 26, 2007 1:49 pm</h4>
    <div class="postbody"><span class="postbody">Cool.  I like it.  Here are the settings that I liked best (with the showing of values off)
<br/>
<br/>
mouse x: plane
<br/>
xsensit: 524
<br/>
x-lag: .08
<br/>
mouse y: plane
<br/>
ysensit: 655
<br/>
y-lag: .08
<br/>
calibrt: on press
<br/>
ccenter: no move-calibrate
<br/>
whenmov: on key press
<br/>
<br/>
Something strange that I noticed - when I hold it upside down, like when lying in bed, the directions are reversed from what I would expect.  To see what I mean, hold it face up and rotate to the right - cursor moves to the right.  Now, hold it face down and rotate to the right - cursor moves to the left.
<br/>
<br/>
Another thing you might want to try - use a running average of a few samples of the accelerometer readings instead of the raw values to reduce bouncing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135828 - Ant6n - Thu Jul 26, 2007 6:46 pm</h4>
    <div class="postbody"><span class="postbody">Thank you for trying!
<br/>
EDIT
<br/>
i wrote some bs.
<br/>
the angles do wrap around when upside down... have to think about that
<br/>
/EDIT
<br/>
<br/>
<br/>
as for running average, i hoped that the 'mouselag' would be enough. The mouse position uses a sort of running average, i find new values by:
<br/>
mousex += (newx - mousex)*mouselag
<br/>
Maybe i should try a real running average over a couple of accelerator readings as well.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
