<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Callibration? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Motion Sensor > Callibration?</h2>
<div id="posts">
<div class="post">
    <h4>#133470 - spinal_cord - Fri Jul 06, 2007 9:59 am</h4>
    <div class="postbody"><span class="postbody">Just wondering (after using the Wii sinse xmas) would it be a good idea to have a set callibration in a motion game? perhaps just a default callibration with the ability to recallibrate at a later time. I get bored with having to hold the DS steady at the start of every game.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134987 - Ant6n - Thu Jul 19, 2007 1:01 am</h4>
    <div class="postbody"><span class="postbody">I have been looking at the problem of calibration, too. I think there are two levels of calibration. The first would be finding the zero and scale of each axis. This one should stay the same as long as the same motion sensor is used.
<br/>
The other is related to how the gba/ds is held by the player. This one might change all the time.
<br/>
When mixing these two problems together, one might get awkward/inaccurate results. So I have been trying to calibrate at least the first level, by reading values and using some sort of iterative approach to try to calibrate the six values. But since my math is a little limited, I haven't had much luck.
<br/>
So now I tend toward saving the offset and scale in sram (on gba). I do wonder though how big the range of possible zeroes is. on my accelerator i get
<br/>
X: ~2095, ~797 ticks/g
<br/>
Y: ~2135, ~781 ticks/g
<br/>
Z: ~2080, ~852 ticks/g
<br/>
Does anybody have uppoer/lower bounds for these values?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135040 - KeithE - Thu Jul 19, 2007 5:51 pm</h4>
    <div class="postbody"><span class="postbody">You can expect up to about 10% error on offset and 5% on sensitivity.
<br/>
<br/>
Most DS Motion Cards/Paks will be within 5% on offset and 3% on sensitivity, but some have higher error.
<br/>
<br/>
There are a few ways to calibrate that pop into my head right now.  I'm sure there are others as well.
<br/>
<br/>
1) set the DS flat on table to calibrate - gives you X=0, Y=0, Z=1
<br/>
2) Have the user hold in a desired orientation to set the "zeroed position"
<br/>
3) Do a calibration like in Yoshi Topsy Turvy as follows:
<br/>
     Draw a line on the screen from bottom left to top right, and tell the user to tip the console until the line is flat, then repeat with a line drawn from bottom right to top left.
<br/>
<br/>
Warioware Twisted requires the user to calibrate the gyro every time the game starts by holding it still.  I believe it measures the gyro output and keeps sampling until it is not changing more than a certain amount.  Then it averages the saved samples and calls that the "zero rate offset".</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135060 - sirpoonga - Thu Jul 19, 2007 8:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>KeithE wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
2) Have the user hold in a desired orientation to set the "zeroed position"</td> </tr></table><span class="postbody">
<br/>
This is how I plan to calibrate motion maze.  I think everyone will have a difference in what they feel is level.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135067 - Ant6n - Thu Jul 19, 2007 10:26 pm</h4>
    <div class="postbody"><span class="postbody">The way I found my zero values is putting my SP flat on a table, and turning it around 360 degrees (around z axis). Since the table might not be perfectly leveled, and the sensors might not be perfectly leveled with the SP, i get a range of values on the x and y axis. The median of the min and max should be the zero value. When doing this on the side one can find the zero of the z (easy for SP, not so easy for original GBA).
<br/>
When knowing x0,y0,z0, one can have the user hold the game boy in all directions (approximately), and get the sensitivity values. This is fairly simple i.e. 
<br/>
if x &gt;&gt; y,z then xsensitiviy += (1/x - xsensitivy)*0.1
<br/>
<br/>
People feel differently about what is 'level', especially around the x-axis. That's why I'll use some trig and keep adjusting that value. But my trigonometry might not be very good if my zeroes and sensitivities are all wrong.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135216 - Dood77 - Fri Jul 20, 2007 11:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sirpoonga wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>KeithE wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
2) Have the user hold in a desired orientation to set the "zeroed position"</td> </tr></table><span class="postbody">
<br/>
This is how I plan to calibrate motion maze.  I think everyone will have a difference in what they feel is level.</span></td> </tr></table><span class="postbody">
<br/>
Also good if someone wants to play lying down.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
