<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Saving accelerometer output to file? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS Motion Sensor > Saving accelerometer output to file?</h2>
<div id="posts">
<div class="post">
    <h4>#150720 - nerkle - Mon Feb 11, 2008 11:38 am</h4>
    <div class="postbody"><span class="postbody">Hi
<br/>
<br/>
Forgive the n00b q's...
<br/>
<br/>
I teach high school physics (in Wales, UK) and keen to use the Motion PAK in class as a crossover between traditional data logging and game-gear.
<br/>
<br/>
I am sure the answer to this is yes, but not being a coder (can handle Python at a push!!) wouldn't know where to start.
<br/>
<br/>
Is it possible to stream the output from the sensors directly to a file (I have an R4 and 2GB of flash)?
<br/>
If so, is there homebrew already out there that does this?
<br/>
If not, how hard would it be to code?
<br/>
<br/>
Fake edit:  
<br/>
Also, it grabs me that if the two additional sensor inputs on the Motion Pak could also captured, I would have the makings of a data logger (connect light sensor for example)
<br/>
<br/>
Thanks in advance...
<br/>
<br/>
Glen</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#150742 - nipil - Mon Feb 11, 2008 8:36 pm</h4>
    <div class="postbody"><span class="postbody">Kind of the same answer as i did for your <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=150739#150739" target="_blank">other post</a>, saving is easy using libfat (i guessa any cart could handle 1kB/sec ;)
<br/>
The data source is even easier to use than temperature, thanks to "ndsmotion.h".
<br/>
Make a call to motion_init() in your code, check that it returns positive int to be sure the cart is ok, then continuously
<br/>
(preferably on vblank, so it's 60HZ) poll the motion data using motion_acceleration_{x,y,z} and motion_rotation.
<br/>
<br/>
External inputs can be used with motion_{enable,read}_ain_{1,2}.
<br/>
Beware of the external input voltage, there's some limitations...
<br/>
But I can't seem to find the relevant post or website... sorry<br/>_________________<br/>NDS Lite Gold/Silver, MK5/R4DS, MSI PC54G2, D-Link DI-624</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#150764 - zazery - Tue Feb 12, 2008 7:14 am</h4>
    <div class="postbody"><span class="postbody">About year ago when I first got my motion card I made a small program that would log the data. My goal at the time was to analyze it and see if I could approximate where the DS was relative to where I started recording.
<br/>
<br/>
I use vblank for my timing like nipil suggested. I simply store up to 60 seconds of data and then wrote it to the card.
<br/>
<br/>
You can find my project <a class="postlink" href="http://sunspot.dnsalias.com/?page_id=5" target="_blank">here</a>. I can't guarantee that it compiles anymore but the binary should work. The output files are raw binary and can be viewed using MotionPlot
<br/>
<br/>
A few results did come of it.
<br/>
<a class="postlink" href="http://sunspot.dnsalias.com/files/DS/RelativeMotion/MotionPlot/snapshots/cicle-small.png" target="_blank">Small circle</a> (sine and cosine looking)
<br/>
<a class="postlink" href="http://sunspot.dnsalias.com/files/DS/RelativeMotion/MotionPlot/snapshots/square-plot.png" target="_blank">Square plot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#150843 - nerkle - Wed Feb 13, 2008 9:43 am</h4>
    <div class="postbody"><span class="postbody">Thanks all..
<br/>
<br/>
After downloading and playing with DevKit I am please to find that all looks sensible and **easy** to understand.  I complied a few test progs and played with file out out.
<br/>
<br/>
Now to wait for the MotionPAK to find its way from the USA to UK...
<br/>
<br/>
Zazery -- mind if I pick apart your source?
<br/>
<br/>
Cheers
<br/>
Glen</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#150973 - zazery - Sat Feb 16, 2008 4:44 am</h4>
    <div class="postbody"><span class="postbody">Go right ahead.
<br/>
<br/>
I'm interested in seeing what you come up with and how successful it is in class. The only type of data logging that was used when I took physics in high school was an echolocation sensor for a TI83+ calculator.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
