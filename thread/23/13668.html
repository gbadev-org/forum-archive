<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>[Win32] dpgmux - prepare videos for MoonShell - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS homebrew announcements > [Win32] dpgmux - prepare videos for MoonShell</h2>
<div id="posts">
<div class="post">
    <h4>#134509 - spacy51 - Fri Jul 13, 2007 2:38 pm</h4>
    <div class="postbody"><span class="postbody">Hi there.
<br/>
I already finished this project a while ago:
<br/>
<br/>
dpgmux
<br/>
A very simple GPL'ed multiplexer/demultiplexer for dpg files.
<br/>
It either takes seperate MPEG1-Video and MPEG1-Audio streams and creates a DPGv3 file (also writes GOP-List for faster video navigation),
<br/>
or it takes a dpg file and demultiplexes it into its video and audio stream.
<br/>
<br/>
The source code was badly inspired by the original dpgtools' delphi source code. However, I did not actually copy/paste it, since I wrote my utility in M$ compliant C (using secure string functions).
<br/>
<br/>
This package also includes several command line encoding scripts for easy video and audio encoding to the right format using ffmpeg. There are also all in one scripts which do the encoding &amp; muxing with just one drag&amp;drop.
<br/>
<br/>
I recommend reading the included documentation.
<br/>
<br/>
Using ffmpeg &amp; dpgmux, I finally managed to get quite impressive video &amp; sound quality at framerates of 20-25 fps.
<br/>
<br/>
Here's the download at Google Code:
<br/>
<a class="postlink" href="http://code.google.com/p/gbxemu/downloads/detail?name=dpgmux1002.exe&amp;can=2&amp;q=" target="_blank">http://code.google.com/p/gbxemu/downloads/detail?name=dpgmux1002.exe&amp;can=2&amp;q=</a>
<br/>
<br/>
Source code is obtainable via SVN at the project page.
<br/>
<br/>
have fun[/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134909 - dantheman - Wed Jul 18, 2007 8:04 am</h4>
    <div class="postbody"><span class="postbody">Just tried this for the first time tonight.  It works pretty well for what it does, and it's pretty darn fast.  However, I've noticed that getting the same video quality as DPGTools or BatchDPG makes the file take up a lot more space.  
<br/>
<br/>
In DPGTools it appears that there are two profiles, a low-quality one that's very fast to encode and a high-quality profile that's fairly slow to encode.  Would a modification to the "encode+mux_#_#.cmd" file allow for a slower, higher quality conversion? 
<br/>
<br/>
As an example, I converted the same file in both DPGTools (high quality encoding) and dpgmux at a bitrate of 256 for both and got output files with about the same filesize, but the one converted with dpgmux did not look as good as the one from DPGtools when played back in Moonshell 1.71 (though it encoded about 20 times faster, heh).
<br/>
<br/>
Just a general question as well: would the audio sound better if it was encoded at 32768 sample rate instead of 32000?  I know the PDF doc recommends 32000, but I remember Tepples saying that the DS outputs at 32768 so it has to use CPU cycles to convert anything that isn't already at that sample rate.  In addition, DPGTools 13 and BatchDPG v1.3 Beta 4.5 both added 32768 as an option, which I'm guessing is for a good reason.  However, attempting to change the option in the batch file give me an error about how a sample rate of 32768 is not allowed for mp2, so perhaps it can't be done.
<br/>
<br/>
All in all though, it's a good program, so congrats on making another DPG encoder for people to use.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135172 - EvilRyu - Fri Jul 20, 2007 4:36 pm</h4>
    <div class="postbody"><span class="postbody">Wow, this thing is fast! I mean fast! And it produces a good quality.
<br/>
<br/>
I have some questions. (I used the auto script encode+mux 4_3 and played the video with moonshell 1.71)
<br/>
<br/>
I encoded an anime and it convert it at the same fps as the original video (23.98) and it had no skipping at all! With BatchDPG and/or dpgtools i can't handle more than 20 fps without skipping at 256x192 resolution. This is quite impressive. My question is does your program always detect the original framerate from the source and keeps the same framerate at the final dpg video?
<br/>
<br/>
It doesn't seem that you can burn soft-subs with this. Is it possible? And if so how? Any plans to add this feature in next updates? (if any)
<br/>
<br/>
Unfortunately it seems that the audio was a little out of sync (just a little) but it happen when i was seeking the video. However it seems that after a couple of pauses it went back to normal. 
<br/>
<br/>
Seriously your program will simply be outstanding IMHO if you planning to release further updates. 
<br/>
<br/>
<br/>
Sorry for my bad English and thanks for your program. I will do some more tests, probably tonight.
<br/>
<br/>
<span style="font-weight: bold">Edit- Nevermind about the soft-subs, i find a way to do it. I simply used AviSynth with the textsub command, it made the encoding last a little longer but worked like a charm!</span>
<br/>
<br/>
<span style="font-weight: bold">Edit 2- After i did some tests, i must say that i will start using your encoder for my NDS movies needs. The audio out of sync problems i mention doesn't exist. I guess only if you seek the video on purpose back and forth you might experience this, but i guess this is normal and it doesn't really matter. I guess the only negatives i found was that it doesn't have a batch function and it doesn't work well for some kind of videos (for example videos in rmvb format) but the standard anime format aka xvid 170 MB 640x480 it works amazing well.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135789 - A2hok - Thu Jul 26, 2007 9:59 am</h4>
    <div class="postbody"><span class="postbody">Its very good, but infantile paralyser recommends that the sample freq should be 32768Hz because it means the DS does not need to recode it for its speakers. I tried changing it manually in the scripts but ffmpeg does not like the new frequency and outputs a file of 0 kb.
<br/>
<br/>
Also when encoding, does ffmpeg change the framerate or leave it like the source. In other words can I encode a 30 fps video without moonshell freezing up.
<br/>
<br/>
Otherwise, this is a very fast converter and the quality aint half bad.
<br/>
<br/>
Thanks<br/>_________________<br/>White DS --- Supercard SD --- Passcard ---
<br/>
-------<a class="postlink" href="http://www.ugames.tk" target="_blank">www.ugames.tk</a>--------
<br/>
[url="http://www.oxado.com/?origin=pub88742"]Webmasters, make money displaying Oxado contextual ads![/url]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
