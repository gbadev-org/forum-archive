<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Knytt Stories DS - with source - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS homebrew announcements > Knytt Stories DS - with source</h2>
<div id="posts">
<div class="post">
    <h4>#172169 - rrc2soft - Thu Jan 21, 2010 12:47 pm</h4>
    <div class="postbody"><span class="postbody">Dear all,
<br/>
<br/>
We have been porting a platform game, "Knytt Stories", for the Nintendo DS for more than a year and a half. A few days ago we released the beta version. A few minutes ago, I opened the source with the New BSD license . I will continue working on the code in the next two months in order to release the final version, so the source code itself will evolve.
<br/>
<br/>
Copying the description from the web site:
<br/>
<br/>
"Knytt Stories is a freeware platform game made by Nicklas 'Nifflas' Nygren (http://nifflas.ni2.se/). The game include several short levels ('stories'), and there are many new stories created by the community that anyone can play. As a tribute to this great game, we are developing a (free) DS version of it - Knytt Stories DS."
<br/>
<br/>
The game is located in <a href="http://www.rodrigoroman.com/rrc2soft/nds_dsknytt.html" target="_blank">http://www.rodrigoroman.com/rrc2soft/nds_dsknytt.html</a>
<br/>
The source code can be found at <a href="http://code.google.com/p/knyttds/" target="_blank">http://code.google.com/p/knyttds/</a>
<br/>
<br/>
The source actually uses PAlib with a bit of libnds magic, is a bit messy, ... but maybe some parts of it can be useful (even if to learn how NOT to do things  :-) ).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172170 - headspin - Fri Jan 22, 2010 12:04 am</h4>
    <div class="postbody"><span class="postbody">Looks great, nice work! :)<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172204 - KillerMapper - Sun Jan 24, 2010 6:49 pm</h4>
    <div class="postbody"><span class="postbody">Nice game!<br/>_________________<br/><a href="http://www.mariokartsource.com" target="_blank">www.mariokartsource.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172554 - Darkflame - Sat Feb 13, 2010 2:47 am</h4>
    <div class="postbody"><span class="postbody">Wowsa...this is what Ive been waiting for :) :)<br/>_________________<br/><a class="postlink" href="http://www.rateoholic.co.uk/RateoholicResults.php#SEARCHFOR=&amp;TYPE=VideoGame%25&amp;BY=darkflame&amp;ORDER=hyb_down&amp;ST=0" target="_blank">Darkflames Reviews</a>    --   
<br/>
Make your own at;
<br/>
<a class="postlink" href="http://www.rateoholic.co.uk" target="_blank"> Rateoholic:Reviews for anything, by anyone.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172580 - Darkflame - Tue Feb 16, 2010 9:09 pm</h4>
    <div class="postbody"><span class="postbody">Just checked out a few random modules in it...works pretty flawlessly.
<br/>
I think theres a slight problem with the wall climbing... doesn't seem quite right...but nothing remotely game breaking.
<br/>
<br/>
I liked the inclusion of the fanart too :)<br/>_________________<br/><a class="postlink" href="http://www.rateoholic.co.uk/RateoholicResults.php#SEARCHFOR=&amp;TYPE=VideoGame%25&amp;BY=darkflame&amp;ORDER=hyb_down&amp;ST=0" target="_blank">Darkflames Reviews</a>    --   
<br/>
Make your own at;
<br/>
<a class="postlink" href="http://www.rateoholic.co.uk" target="_blank"> Rateoholic:Reviews for anything, by anyone.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172617 - rrc2soft - Fri Feb 19, 2010 9:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Darkflame wrote:</b></span></td> </tr> <tr> <td class="quote">Just checked out a few random modules in it...works pretty flawlessly.
<br/>
I think theres a slight problem with the wall climbing... doesn't seem quite right...but nothing remotely game breaking.
<br/>
<br/>
I liked the inclusion of the fanart too :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Did you tried the final version? It is already on the Internet ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172618 - Cid2Mizard - Fri Feb 19, 2010 10:03 pm</h4>
    <div class="postbody"><span class="postbody">wow excellent oO<br/>_________________<br/><a href="http://www.nintendomax.com" target="_blank">www.nintendomax.com</a> 100% Hack 0% Warez</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172671 - lilalurl - Wed Feb 24, 2010 1:46 am</h4>
    <div class="postbody"><span class="postbody">Nice work!
<br/>
I played a bit (tutorial + 15 minutes of gameplay) and it really works great on the DS.
<br/>
<br/>
<br/>
Given that I already liked Within a Deep Forest by Nifflas, I can probably only like Knytt Stories too.
<br/>
Well, it is not like I am asking something like "could there be a port of Within a Deep Forest to the DS too?" ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172680 - Kyoufu Kawa - Wed Feb 24, 2010 4:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>lilalurl wrote:</b></span></td> </tr> <tr> <td class="quote">Well, it is not like I am asking something like "could there be a port of Within a Deep Forest to the DS too?" ;-)</td> </tr></table><span class="postbody">When I mentioned this port to a friend of mine, he did ask that. Literally. Mostly because he prefers Within a Deep Forest over Knytt Stories. So let me be the third to ask that same question.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172686 - rrc2soft - Thu Feb 25, 2010 10:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Kyoufu Kawa wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>lilalurl wrote:</b></span></td> </tr> <tr> <td class="quote">Well, it is not like I am asking something like "could there be a port of Within a Deep Forest to the DS too?" ;-)</td> </tr></table><span class="postbody">When I mentioned this port to a friend of mine, he did ask that. Literally. Mostly because he prefers Within a Deep Forest over Knytt Stories. So let me be the third to ask that same question.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Not by me, sorry to disappoint you ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172695 - Kyoufu Kawa - Thu Feb 25, 2010 6:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>rrc2soft wrote:</b></span></td> </tr> <tr> <td class="quote">Not by me, sorry to disappoint you ;-)</td> </tr></table><span class="postbody">That's okay. I -expected- that reply.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172743 - Darkflame - Sun Feb 28, 2010 3:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>rrc2soft wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Darkflame wrote:</b></span></td> </tr> <tr> <td class="quote">Just checked out a few random modules in it...works pretty flawlessly.
<br/>
I think theres a slight problem with the wall climbing... doesn't seem quite right...but nothing remotely game breaking.
<br/>
<br/>
I liked the inclusion of the fanart too :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Did you tried the final version? It is already on the Internet ;)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Oh cool!
<br/>
*downloads*
<br/>
--
<br/>
<br/>
Just tried, works perfectly now :)
<br/>
Fantastic work, I'll get a lot of use out of this!<br/>_________________<br/><a class="postlink" href="http://www.rateoholic.co.uk/RateoholicResults.php#SEARCHFOR=&amp;TYPE=VideoGame%25&amp;BY=darkflame&amp;ORDER=hyb_down&amp;ST=0" target="_blank">Darkflames Reviews</a>    --   
<br/>
Make your own at;
<br/>
<a class="postlink" href="http://www.rateoholic.co.uk" target="_blank"> Rateoholic:Reviews for anything, by anyone.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172767 - Vague Rant - Tue Mar 02, 2010 6:59 am</h4>
    <div class="postbody"><span class="postbody">Hey guys, I dropped you an email a few days ago, but not sure if the address is still current, so I figured I'd ask here too:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I'm in contact with several of the coders behind the AKAIO flash card menu (a custom loader for the Acekard series of devices). They're aware that the normal Knytt Stories DS build does not run under AKAIO--it crashes at the intro screen--and said if they knew what was done differently between the compatibility and standard builds, they'd probably be able to get the standard build running correctly. In the readme you state that the compatibility build is compiled with "older libraries"; is there any chance you could be more specific about the differences in build environment for the two versions? Thanks for any assistance.</td> </tr></table><span class="postbody"><br/>_________________<br/>I've got nothing to say, but it's OK.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172784 - rrc2soft - Wed Mar 03, 2010 7:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vague Rant wrote:</b></span></td> </tr> <tr> <td class="quote">Hey guys, I dropped you an email a few days ago, but not sure if the address is still current, so I figured I'd ask here too:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I'm in contact with several of the coders behind the AKAIO flash card menu (a custom loader for the Acekard series of devices). They're aware that the normal Knytt Stories DS build does not run under AKAIO--it crashes at the intro screen--and said if they knew what was done differently between the compatibility and standard builds, they'd probably be able to get the standard build running correctly. In the readme you state that the compatibility build is compiled with "older libraries"; is there any chance you could be more specific about the differences in build environment for the two versions? Thanks for any assistance.</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Hi Vague Rant,
<br/>
<br/>
Our address is current, but we didn't receive the message. Anyway, here is our answer :-).
<br/>
<br/>
The problem lies on the management of the mp3 sound libraries (check the last messages of this thread: <a class="postlink" href="http://palib-dev.com/forum/index.php/topic,58.45.html" target="_blank">http://palib-dev.com/forum/index.php/topic,58.45.html</a>). With the newest version of PAlib &amp; devkitpro, ASlib is broken for DSi carts (maybe because IPC management and FIFO management is mixed in the same library - yikes!). However, with older versions that use only IPC (I think they are 080823 and r23, but I need to check my backups, my home computer broke just after the release) it works.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172788 - wintermute - Wed Mar 03, 2010 1:35 pm</h4>
    <div class="postbody"><span class="postbody">Best thing you could do is get rid of PALib and ASLib dependencies, then you'll have a good chance of building with recent tools. devkitPro only provide support for the current set of libraries and attempting to work with older sets will cause you an immense amount of grief.
<br/>
<br/>
No support is provided for PALib users at all, other than assistance in fixing the mess that installing that has made of your toolchain.
<br/>
<br/>
<a href="http://wiki.devkitpro.org/index.php/PAlib" target="_blank">http://wiki.devkitpro.org/index.php/PAlib</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172790 - rrc2soft - Wed Mar 03, 2010 3:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Best thing you could do is get rid of PALib and ASLib dependencies, then you'll have a good chance of building with recent tools. devkitPro only provide support for the current set of libraries and attempting to work with older sets will cause you an immense amount of grief.
<br/>
<br/>
No support is provided for PALib users at all, other than assistance in fixing the mess that installing that has made of your toolchain.
<br/>
<br/>
<a href="http://wiki.devkitpro.org/index.php/PAlib" target="_blank">http://wiki.devkitpro.org/index.php/PAlib</a></td> </tr></table><span class="postbody">
<br/>
<br/>
While I could get rid of PAlib if I wanted, it is simply impossible to discard ASlib as I need to make use of mp3 playback. The game heavily relies on this in order to play user-generated content. Note that players could use .wav to play the tracks, but that would increase the size of a story to the extent that users would never download the game or its stories. Bottom line: Knytt Stories DS would not exist without mp3 playback.
<br/>
<br/>
Besides, you are giving me the chance to say some things that I have wanted to say since two years ago :-D. I know that somewhere in this forum is stated that "Wintermute recommends not using mp3" due to management of the arm7 and the like. However, I believe that software libraries are just tools that are used to create something. For me, I wasn't pursuing the "purity" in software: I was pursuing a final product. Working with older set of libraries didn't caused me grief: they did provide me with a finished product that people can (and are) enjoying. A bit buggy? Maybe. But what mattered for me is that users are enjoying the game and discovering the works of its authors ;-). 
<br/>
<br/>
Having said that,
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vague Rant wrote:</b></span></td> </tr> <tr> <td class="quote">Hey guys, I dropped you an email a few days ago, but not sure if the address is still current, so I figured I'd ask here too:
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Vague Rant, you can tell the AKAIO guys to not bother about the error, as it is basically my fault that the not-"compatible" version does not work on the Acekard ;-). Actually, I was thinking not to release the game when I discovered the error, but when I checked that the "compatibility" version worked with DSi consoles, I chose just to release both versions and wait till the PAlib/ASlib community released a solution. If you want, I can state that explicitly in the Knytt Stories DS FAQ in order to avoid further confusion.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172799 - wintermute - Wed Mar 03, 2010 10:44 pm</h4>
    <div class="postbody"><span class="postbody">Recommendations against mp3 playback have nothing to do with "purity" it's a simple matter of being an inappropriate audio format for a DS under most circumstances. Not all cards run at the same speed which can and will cause rather strange glitches when audio streaming is involved.
<br/>
<br/>
As for getting rid of PALib and ASLib, my main concern isn't really about your ease of working or ability to finish the project. You've just released source which won't build with the latest tools and libraries which is going to result in people breaking their tools in order to try and compile it. Ultimately this is majorly detrimental to the homebrew community and causes major problems for the devkitPro support team.
<br/>
<br/>
Somewhere in my half finished projects folder I have code that uses maxmod for mp3 playback. I'll see if I can dig it out and make it useable once I've crossed out a few more important TODOs. In the meantime it would be much appreciated if you removed the PALib dependencies and built your project with a standard template using up to date tools.
<br/>
<br/>
Please don't encourage people to use old, buggy, unsupported libraries and tools.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172804 - rrc2soft - Thu Mar 04, 2010 6:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">...</td> </tr></table><span class="postbody">
<br/>
<br/>
As I disagree with your point of view (although I understand it), I have answered you in a private message (I would go offtopic).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173097 - Darkflame - Mon Mar 22, 2010 12:16 am</h4>
    <div class="postbody"><span class="postbody">Just thoughing it out there, but is there a codec that has similar compression without the drawbacks of mp3?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"> A bit buggy? Maybe. But what mattered for me is that users are enjoying the game and discovering the works of its authors ;-). </td> </tr></table><span class="postbody">
<br/>
<br/>
We sure are :)<br/>_________________<br/><a class="postlink" href="http://www.rateoholic.co.uk/RateoholicResults.php#SEARCHFOR=&amp;TYPE=VideoGame%25&amp;BY=darkflame&amp;ORDER=hyb_down&amp;ST=0" target="_blank">Darkflames Reviews</a>    --   
<br/>
Make your own at;
<br/>
<a class="postlink" href="http://www.rateoholic.co.uk" target="_blank"> Rateoholic:Reviews for anything, by anyone.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174666 - =Polaris= - Tue Jul 06, 2010 7:09 pm</h4>
    <div class="postbody"><span class="postbody">I have a question, when porting new episodes to the ds, you say on your site to convert the music file into mp3 and raw. Which ones should I convert in mp3 and which ones in raw ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174712 - rrc2soft - Fri Jul 09, 2010 8:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>=Polaris= wrote:</b></span></td> </tr> <tr> <td class="quote">I have a question, when porting new episodes to the ds, you say on your site to convert the music file into mp3 and raw. Which ones should I convert in mp3 and which ones in raw ?</td> </tr></table><span class="postbody">
<br/>
<br/>
Music -&gt; mp3
<br/>
Ambient tracks -&gt; raw
<br/>
(unless the ambient track is looped, then you can Ambient tracks -&gt; mp3)
<br/>
<br/>
...OK, I'll update the FAQ :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174715 - relminator - Sat Jul 10, 2010 4:51 am</h4>
    <div class="postbody"><span class="postbody">Looks good!!!<br/>_________________<br/><a href="http://rel.betterwebber.com" target="_blank">http://rel.betterwebber.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174747 - takieda - Wed Jul 14, 2010 1:52 am</h4>
    <div class="postbody"><span class="postbody">is there any particular reason to convert ambient tracks to raw as opposed to .mp3 files? I was having difficulty converting it to raw (I'm assuming .raw is the extension)? My converter doesn't have that option, and I'd rather not have to install something else just to do that. If it's okay as an MP3, I'll just keep everything as I have it. I converted all of Gaia's .ogg files to .mp3 and everything seems to work, but I haven't played it too far (no bugs so far as I can tell).<br/>_________________<br/>Est Sularis Oth Mithas - My Honor is My Life
<br/>
(\_/)
<br/>
(o.o)
<br/>
(&gt; &lt;) This is The Bunny. Copy The Bunny into your signature to help him on his way to world domination.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174752 - rrc2soft - Thu Jul 15, 2010 10:55 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>takieda wrote:</b></span></td> </tr> <tr> <td class="quote">is there any particular reason to convert ambient tracks to raw as opposed to .mp3 files? I was having difficulty converting it to raw (I'm assuming .raw is the extension)? My converter doesn't have that option, and I'd rather not have to install something else just to do that. If it's okay as an MP3, I'll just keep everything as I have it. I converted all of Gaia's .ogg files to .mp3 and everything seems to work, but I haven't played it too far (no bugs so far as I can tell).</td> </tr></table><span class="postbody">
<br/>
<br/>
One screen of Knytt Stories can have two ambient tracks and one music track. As the DS is not powerful enough to play two mp3's at the same time (in fact, games should not use mp3 at all! ;-) ), the best solution was to use .raw(s) for ambient tracks and .mp3(s) for music tracks (and .mp3(s) for ambient tracks that loop).
<br/>
<br/>
If all your tracks are .mp3, the only thing that will happen is that whenever a .mp3 ambient track is played, the music track will not be played. Gameplay should not be affected by this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174755 - Dwedit - Thu Jul 15, 2010 6:15 pm</h4>
    <div class="postbody"><span class="postbody">Raw meaning WAV, or ADPCM?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174757 - fincs - Thu Jul 15, 2010 6:30 pm</h4>
    <div class="postbody"><span class="postbody">RAW in PAlibese means headerless PCM8 11025hz (most of the time) sound effects.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
