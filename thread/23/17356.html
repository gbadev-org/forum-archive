<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Car Physic Demo - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS homebrew announcements > Car Physic Demo</h2>
<div id="posts">
<div class="post">
    <h4>#174950 - Jim - Sun Aug 08, 2010 12:21 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I've made a racing demo a while ago, where you drive a Ferrari F40 on the grounds of the Norisring.
<br/>
<br/>
It's a very dark Demo, because I haven't included a sky. The graphic part was not so important for me for this version.
<br/>
I've used models that I've found on several pages. <a class="postlink" href="http://www.nfscars.net/file/view/highstakes/53.aspx" target="_blank">The F40 is from a NFS-Page</a> and <a class="postlink" href="http://www.xtremeracers.net/nuke/modules.php?name=Downloads&amp;d_op=viewdownloaddetails&amp;lid=618&amp;ttitle=Racer_-_Norisring" target="_blank">the track is a model that was converted for racer.nl</a> so I don't know from which original game it is.
<br/>
<br/>
More important was the physic that is mainly code by Marco Monster. I tried to get it stable and to have a good feeling for driving a car. Because of this I've included the Norisring but only the important parts of the track. It's only there for testing the driving. It's a complete flat track so I hadn't to change the 2D physic engine much.
<br/>
<br/>
At the moment I'm working on the graphics and the collisions. So I hope to release a new version in the near future.
<br/>
<br/>
For more informations and links (about car physic in general) visit my <a class="postlink" href="http://www.jimb.de/Projects/Racing.html" target="_blank">page</a>.
<br/>
<br/>
<br/>
Download:
<br/>
<a class="postlink" href="http://www.jimb.de/Downloads/Racing/CarPhysics5_NDS.nds" target="_blank">CarPhysics5_NDS.nds (683 KB)</a>
<br/>
<br/>
<a class="postlink" href="http://www.jimb.de/Projects/car_physics_5_demo.png" target="_blank">Screenshot</a>
<br/>
<br/>
Control:
<br/>
Left | Right = Steer Left | Right
<br/>
R = Accelerate
<br/>
L = Brake
<br/>
Select = Reset
<br/>
Touch "back" | "next" = Previous | Next Screen
<br/>
<br/>
- No DLDI used
<br/>
- Tested with M3 DS REAL on Hardware and no$gba</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174967 - keldon - Tue Aug 10, 2010 7:32 pm</h4>
    <div class="postbody"><span class="postbody">Oh wow this is great; funnily enough I'm running your program in DS emulator in a Windows emulator ^_^
<br/>
<br/>
The steering input system needs to allow for oversteer so that the user tap left/right to control the steering angle, also the wheel needs to return to neutral much quicker.
<br/>
<br/>
Will be interesting to see where this goes, awesome!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174977 - Jim - Thu Aug 12, 2010 2:12 am</h4>
    <div class="postbody"><span class="postbody">Thanks for your comment.
<br/>
<br/>
The thing with the wheel to go to neutral will be changed.
<br/>
But what do you mean with the oversteer and the control of the steering angle? At the moment I have a very simple (linear) tire model that gives you always full grip and so no over- or understeer, or do you mean something else?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174980 - keldon - Thu Aug 12, 2010 9:36 am</h4>
    <div class="postbody"><span class="postbody">Yes, oversteer and understeer; or if they haven't been implemented it should be much quicker to reach full lock otherwise it makes turning extremely difficult.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175638 - Jim - Tue Jan 11, 2011 7:17 pm</h4>
    <div class="postbody"><span class="postbody">New version with a better control, graphic and included collision with the ground. That should be every point that I have mentioned here before.
<br/>
<br/>
To make use of the collision detection I have changed the track to one that has more up and downs than the Norisring and that's Laguna Seca.
<br/>
<br/>
Here the main points of this demo:
<br/>
+ stable physics
<br/>
+ better control (quicker steering and return to neutral)
<br/>
+ you can see the weight distribution
<br/>
+ collision with the ground
<br/>
+ timing that stops the best time of the session, with 3 sectors
<br/>
+ 2D map of the track with the position of the car
<br/>
- no collision with the walls
<br/>
- no change of speed or traction on dirt
<br/>
- so you don't have to stay on track
<br/>
- no drifts, only light oversteer if you brake
<br/>
- framerate goes down if there are many collision detections, mainly in the last corner
<br/>
<br/>
Download:
<br/>
<a class="postlink" href="http://www.jimb.de/Downloads/Racing/CarPhysics6_NDS.zip" target="_blank">CarPhysics6_NDS.zip (1.02 MB)</a>
<br/>
<br/>
<a class="postlink" href="http://www.jimb.de/Projects/car_physics_6_demo.png" target="_blank">Screenshot</a>
<br/>
<br/>
For now I have decided to start this project again and rework the code, because I ran in some problems with the physics in the last time (mainly the tyres) and I tried many things out in the last year that were only fast included.
<br/>
That's the current state of my project. I hope you enjoy it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175643 - PypeBros - Wed Jan 12, 2011 9:43 am</h4>
    <div class="postbody"><span class="postbody">From the screenshot on your site, I'd suggest you also invest some effort into giving the car a shadow. That could greatly improve realism.<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175645 - SchmendrickSchmuck - Wed Jan 12, 2011 12:12 pm</h4>
    <div class="postbody"><span class="postbody">When accelerating and braking quickly a few times, the controls for left and right get reversed, steering left makes the car (slowly) turn right, and vice versa. Also, braking is a little slow.
<br/>
Looks good otherwise</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175649 - racesimfan - Wed Jan 12, 2011 6:10 pm</h4>
    <div class="postbody"><span class="postbody">Great game thanks! It has huge potential! Finally a real racing game on ds with real tracks!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175653 - relminator - Thu Jan 13, 2011 10:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jim wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<span style="font-weight: bold">1 - no collision with the walls</span>
<br/>
<br/>
<span style="font-weight: bold">2 - framerate goes down if there are many collision detections, mainly in the last corner</span>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
1. I once helped a guy with a fast collsion code for his DS racing game(Kartz Animalia).  I maybe able to help in that department.
<br/>
<br/>
2. Did you try to do a broadphase collision system?
<br/>
<br/>
a. Divide your track models into grids. A simple 2d grid system should work (though if you want to use octrees or quadtrees, I have some code here somewhere).
<br/>
b. Limit your collisions to triangles within the box that intersects(or that contains) your car.
<br/>
<br/>
The beauty of that grid system is that it can also be used to limit your rendered polygons by using the DS's hardware "box-testing".<br/>_________________<br/><a href="http://rel.betterwebber.com" target="_blank">http://rel.betterwebber.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175670 - keldon - Thu Jan 13, 2011 10:27 pm</h4>
    <div class="postbody"><span class="postbody">Oh, this had a really nice feel to it and the graphics look really nice. There were a few weird graphical glitches on hardware, which increased when you came off of the track and tried to return to it. Overall the experience was good and I am looking forward to the final release!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175675 - Jim - Fri Jan 14, 2011 12:58 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for all your comments.
<br/>
<br/>
@PypeBros: I haven't thought about shadows, but that comes now on my list.
<br/>
<br/>
@SchmendrickSchmuck:
<br/>
The problem with the reversed controls could be corrected in a minute but I will do this with the next release. Except there are some other bugs that make this new version unplayable.
<br/>
The brake and tyre force values have been changed at the end, so it can be possible that the braking force is a bit low.
<br/>
<br/>
@elminator: Thanks for the hints with the collision detection, but I think I have already a good basement.
<br/>
I have already divided my track in several parts, you can see this when you drive the track in the wrong direction, because I only render some parts forward in the right direction. Also the collision detection uses this system, but the track model isn't realy made for the NDS. Especially the corners have many triangles. On the other hand I have divided the track by hand and so some parts are be a bit unoptimised.
<br/>
<br/>
The collision with the walls is also something that I have already done. But the main problem for me is, how to handle a collision after the car is in the wall. I already have a working solution for this, but not over the complete track so I've decided to leave it out for now.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
