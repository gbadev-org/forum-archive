<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>COW - OS platform library - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS homebrew announcements > COW - OS platform library</h2>
<div id="posts">
<div class="post">
    <h4>#138730 - Vich - Tue Aug 28, 2007 11:13 am</h4>
    <div class="postbody"><span class="postbody">I would like to announce COW to you. This project is a C++ GPL'ed platform-independant platform library. It compiles with Visual Studio, makefile and SCons. It has been verified to compile for Windows, Linux and the DS.
<br/>
<br/>
COW offers a set of features including(but not limitted to):
<br/>
- RTTI and serialization(XML, later also binary with conversion tools from&amp;to)
<br/>
- FixedPointMath template class that has conversion accessors for float/int conversion. Should work as fast as the defines from libnds, but is a lot more friendly to use.
<br/>
- (Serializable) Storage types to replace STL. This saves LOTS of executable size. (array, list, dlist, string)
<br/>
- (Serializable) Metrics and vector classes with the expected operators.
<br/>
- A few bit operators.
<br/>
- Handy 'tools' like AutoPtr, platform-independant asserts
<br/>
- Pattern templates like Singleton and Factory
<br/>
- A streaming system: filestream, stringstream, memorystream and more. This system allows uniform file handling and stream opening (eg. StreamManager::OpenStream("file://file.txt", [read/write mode])
<br/>
- ImageReaders for different image file formats that can read image data from any kind of stream input to pixel data.
<br/>
- etc.
<br/>
<br/>
<br/>
COW also includes platform-independant unit tests, which help a lot during development.
<br/>
It also includes a tutorial project with small sample applications that are well-documented.
<br/>
<br/>
The current project state is beta and although the code design might still change slightly, I think it is already grown-up enough to be shared among you. I'll be happy to fix bugs for you if you chose to use my library and post the bugs here.
<br/>
<br/>
A self-modified version of TinyXML(to make use of my own containers) is used for serialization, since this is the smallest XML library that I can find. I think that you will find the speed of serializing from/to XML very fast. I will make a binary serialization system later to make things even quicker, but at the moment I'm too busy with other matters to do this.
<br/>
<br/>
Project page:
<br/>
<a href="http://www.lifeisdigital.net/index.php?page=projects/cow" target="_blank">http://www.lifeisdigital.net/index.php?page=projects/cow</a>
<br/>
(you find more up-to-date info here)
<br/>
Source-forge page:
<br/>
<a href="http://sourceforge.net/projects/cow" target="_blank">http://sourceforge.net/projects/cow</a>
<br/>
Get the files with SVN:
<br/>
svn co <a href="https://cow.svn.sourceforge.net/svnroot/cow" target="_blank">https://cow.svn.sourceforge.net/svnroot/cow</a> cow
<br/>
<br/>
Browse the source code:
<br/>
<a href="http://cow.svn.sourceforge.net/viewvc/cow/trunk/Source/COW" target="_blank">http://cow.svn.sourceforge.net/viewvc/cow/trunk/Source/COW</a>
<br/>
Browse the demo source code(UnitTests and Tutorials are interesting):
<br/>
<a href="http://cow.svn.sourceforge.net/viewvc/cow/trunk/Demos/Source/" target="_blank">http://cow.svn.sourceforge.net/viewvc/cow/trunk/Demos/Source/</a>
<br/>
The tutorials are still being worked on, but the UnitTest project also 'explains' quite a few features.
<br/>
<br/>
Got questions/suggestions/bugs? Please post them here!<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"><br/><br/>Last edited by Vich on Tue Sep 25, 2007 8:59 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#138735 - Schyzophrenic - Tue Aug 28, 2007 12:05 pm</h4>
    <div class="postbody"><span class="postbody">This is a great idea ! I am looking forward to seeing new versions ! 
<br/>
<br/>
I'll test it as soon as I can. It sounds really great !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138736 - Vich - Tue Aug 28, 2007 12:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Schyzophrenic wrote:</b></span></td> </tr> <tr> <td class="quote">This is a great idea ! I am looking forward to seeing new versions ! 
<br/>
<br/>
I'll test it as soon as I can. It sounds really great !</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks ^^;
<br/>
I've spent quite a few years developping this, so I really hope it can be useful to someone else but me. This project was split off from the <a class="postlink" href="http://home.lifeisdigital.net/index.php?option=com_content&amp;task=category&amp;sectionid=10&amp;id=29&amp;Itemid=55" target="_blank">AlterNova project</a>(2d/3d gfx engine) and it use used in the <a class="postlink" href="http://sourceforge.net/projects/tina" target="_blank">TINA project</a>(GUI library). Both are also cross-platform(Win/Lin/DS) and OS, but still in alpha stage.
<br/>
<br/>
Addendum:
<br/>
<br/>
TINA serialization can looks like this with COW:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
<br/>
&lt;!-- Serialization data, created by COW --&gt;
<br/>
&lt;object_list&gt;
<br/>
<br/>
   &lt;object type="ImageTemplate" version="1" name="image_template"&gt;
<br/>
      &lt;members&gt;
<br/>
         &lt;control_type&gt;"Image"&lt;/control_type&gt;
<br/>
      &lt;/members&gt;
<br/>
   &lt;/object&gt;
<br/>
<br/>
   &lt;object type="Image" version="1" name="logo"&gt;
<br/>
      &lt;members&gt;
<br/>
         &lt;metrics&gt;(0,200)(1024,256)&lt;/metrics&gt;
<br/>
         &lt;texture&gt;"data/logo.tga"&lt;/texture&gt;
<br/>
         &lt;template&gt;[image_template]&lt;/template&gt;
<br/>
      &lt;/members&gt;
<br/>
   &lt;/object&gt;
<br/>
<br/>
   &lt;object type="Image" version="1" name="title"&gt;
<br/>
      &lt;members&gt;
<br/>
         &lt;metrics&gt;(0,336)(1024,8)&lt;/metrics&gt;
<br/>
         &lt;texture&gt;"data/textures/title.tga"&lt;/texture&gt;
<br/>
         &lt;template&gt;[image_template]&lt;/template&gt;
<br/>
      &lt;/members&gt;
<br/>
   &lt;/object&gt;
<br/>
<br/>
   &lt;object type="TextLabel" version="1" name="program_title_text"&gt;
<br/>
      &lt;members&gt;
<br/>
         &lt;metrics&gt;(0,0)(128,16)&lt;/metrics&gt;
<br/>
         &lt;caption&gt;"Program title. All rights reserved."&lt;/caption&gt;
<br/>
         &lt;color&gt;#FFFFFFFF&lt;/color&gt;
<br/>
      &lt;/members&gt;
<br/>
   &lt;/object&gt;
<br/>
<br/>
&lt;/object_list&gt;
<br/>
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138737 - kusma - Tue Aug 28, 2007 12:37 pm</h4>
    <div class="postbody"><span class="postbody">This seems like a library of really useful tools. Good work! I especially love the serialization support!
<br/>
<br/>
Sorry if this part seems negative, but here's some potential issues I saw after a quick code-browse:
<br/>
<ul>
<br/>
<li>BreakPointMessage: This function seems to assume that a console is running in the NDS-builds. Assertion are usually expected to terminate the program - how about just initializing the console fully before displaying the error-message?
<br/>
</li><li>FpNumber-constructors should be made explicit to prevent unexpected code-paths for float-code.
<br/>
</li><li>FpNumber : "Fp" is commonly used to denote "floating point", How about FixedNumber instead?
<br/>
</li><li>Singleton: Argh, people of the world: stop encouraging this fundamentally flawed pattern. Globals are globals, no matter if they are hidden "inside" an object! :P
<br/>
</li><li>GPL : IMO wrong license for a library of this nature. You might disagree, this is politics I guess.
<br/>
</li></ul></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138739 - Vich - Tue Aug 28, 2007 12:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">This seems like a library of really useful tools. Good work! I especially love the serialization support!
<br/>
<br/>
Sorry if this part seems negative, but here's some potential issues I saw after a quick code-browse:
<br/>
<ul>
<br/>
<li>BreakPointMessage: This function seems to assume that a console is running in the NDS-builds. Assertion are usually expected to terminate the program - how about just initializing the console fully before displaying the error-message?
<br/>
</li></ul></td> </tr></table><span class="postbody">
<br/>
Good point. I will make a system that tells the state of the COW initialization. (what was initialized and what wasn't)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><li>FpNumber-constructors should be made explicit to prevent unexpected code-paths for float-code.
<br/>
</li><li>FpNumber : "Fp" is commonly used to denote "floating point", How about FixedNumber instead?
<br/>
</li></td> </tr></table><span class="postbody">
<br/>
I will fix both name and ctors. (wasn't happy with the name either, but I couldn't find anything better ... I suck at finding good names sometimes :P)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><li>Singleton: Argh, people of the world: stop encouraging this fundamentally flawed pattern. Globals are globals, no matter if they are hidden "inside" an object! :P</li></td> </tr></table><span class="postbody">
<br/>
Hey, I had a phase, ok? :P
<br/>
I made it and used it and then just made static classes of the singletons I had. I just keep it just in case I ever need it again.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<li>GPL : IMO wrong license for a library of this nature. You might disagree, this is politics I guess.
<br/>
</li></td> </tr></table><span class="postbody">
<br/>
The older versions used to be LGPL. LGPL or other licenses will become available in the future at a cheap price. I spent about 4 years of spair time in my life to this and I think it's a shame if someone uses all that code without contributing anything to OS. So: yes, it will eventually be possible to use it for non-OS software, but at a (very fair) price. Probably something like the Bass library does(un4seen.com).
<br/>
<br/>
As for the apologize: that's absolutely not needed, I appreciate your feedback very much.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"><br/><br/>Last edited by Vich on Tue Aug 28, 2007 1:16 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#138743 - kusma - Tue Aug 28, 2007 1:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">The older versions used to be LGPL. LGPL or other licenses will become available in the future at a cheap price. I spent about 4 years of spair time in my life to this and I think it's a shame if someone uses all that code without contributing anything to OS. So: yes, it will eventually be possible to use it for non-OS software, but at a (very fair) price. Probably something like the Bass library does(un4seen.com).
<br/>
</td> </tr></table><span class="postbody">
<br/>
Sure, I see your point. The problem I can see with it, is that it sets strict limitations to the licenses of the application using your library, thus it might limit your user base beyond what's needed to ensure what you seem to wish. I don't have any concrete suggestions to alternatives though, picking the right license is always tricky.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138744 - Vich - Tue Aug 28, 2007 1:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">Sure, I see your point. The problem I can see with it, is that it sets strict limitations to the licenses of the application using your library, thus it might limit your user base beyond what's needed to ensure what you seem to wish. I don't have any concrete suggestions to alternatives though, picking the right license is always tricky.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, I suppose it's more like a religion than politics. 'I believe' that if you develop non-commercial software, there shouldn't be a problem with publishing the source under GPL license(except that one might be ashamed of the quality).
<br/>
If someone makes a commercial benefit then it shouldn't be a problem to pay a very reasonable fee for a library. But that's just my opinion of course.
<br/>
<br/>
I see of it more as sharing knowledge: I don't mind sharing my knowledge, as long as others don't mind sharing theirs. If people want to avoid this, they can always make a settlement with me by helping me to improve my hobby projects even further and donating a fee(and thus contributing in another way). (And the fee is probably the political part :P)
<br/>
<br/>
But let's not start a license discussion here. For now it will be GPL-only, but that might change in the future. (I just felt like I should share my way-of-thinking here)<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138745 - Payk - Tue Aug 28, 2007 1:28 pm</h4>
    <div class="postbody"><span class="postbody">neat! happy to see it growing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138761 - tepples - Tue Aug 28, 2007 8:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">'I believe' that if you develop non-commercial software, there shouldn't be a problem with publishing the source under GPL license(except that one might be ashamed of the quality).</td> </tr></table><span class="postbody">
<br/>
There exist free software licenses that are free but <a class="postlink" href="http://www.fsf.org/licensing/licenses/" target="_blank">incompatible</a>. For example, anything that uses Lick's RAM access library or Lick's rebooting library cannot be published under the GNU General Public License because Lick's license is not GPL compatible, which I have explained in <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=129145#129145" target="_blank">this post</a>.
<br/>
<br/>
<span style="font-weight: bold">EDIT:</span> Now a bad example, given that Lick's libraries are now MIT licensed. Substitute the Apache license and versions of the GNU General Public License prior to version 3.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Wed Sep 12, 2007 11:34 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#138770 - Vich - Tue Aug 28, 2007 11:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">[*]BreakPointMessage: This function seems to assume that a console is running in the NDS-builds. Assertion are usually expected to terminate the program - how about just initializing the console fully before displaying the error-message?
<br/>
</td> </tr></table><span class="postbody">
<br/>
I fixed it. I made an option to disable/enable asserts in general. This might also be handy for debugging when there are a few hundreds of asserts when you only need to see one or a few in a specific place in the code.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
[*]FpNumber-constructors should be made explicit to prevent unexpected code-paths for float-code.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Could you clarify that with a sample?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">[*]FpNumber : "Fp" is commonly used to denote "floating point", How about FixedNumber instead?</td> </tr></table><span class="postbody">
<br/>
Renamed.
<br/>
<br/>
Thanks again for your feedback :)<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138851 - Quirky - Wed Aug 29, 2007 8:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
[*]FpNumber-constructors should be made explicit to prevent unexpected code-paths for float-code.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Could you clarify that with a sample?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Since the constructor is FpNumber(float inValue) I imagine you could end up using what you think are floats, but are really FpNumbers.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
FpNumber f1(100);
<br/>
float f2;
<br/>
// more code here...
<br/>
f1 = 1.0;  // typo, meant f2, but allowed due to FpNumber(float inValue) constructor.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
After adding explicit, you would need to do this to set f1 to a temp value:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
FpNumber f1(100);
<br/>
float f2;
<br/>
// more code here...
<br/>
f1 = FpNumber(1.0);
<br/>
f1 = 1.0; // ! error
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It is pretty unlikely to be a real problem IMO, but perhaps worth considering.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138854 - Vich - Wed Aug 29, 2007 10:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quirky wrote:</b></span></td> </tr> <tr> <td class="quote">Since the constructor is FpNumber(float inValue) I imagine you could end up using what you think are floats, but are really FpNumbers.
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
FpNumber f1(100);
<br/>
float f2;
<br/>
// more code here...
<br/>
f1 = 1.0;  // typo, meant f2, but allowed due to FpNumber(float inValue) constructor.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
After adding explicit, you would need to do this to set f1 to a temp value:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
FpNumber f1(100);
<br/>
float f2;
<br/>
// more code here...
<br/>
f1 = FpNumber(1.0);
<br/>
f1 = 1.0; // ! error
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It is pretty unlikely to be a real problem IMO, but perhaps worth considering.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I personally think it shouldn't be a problem, since there's there's no difference in code paths  between:
<br/>
f1 = FpNumber(1.0);
<br/>
and
<br/>
f1 = 1.0;
<br/>
<br/>
I personally think that any programmer should be able to see that in this case.
<br/>
<br/>
p.s. 1.0 will be a double.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138921 - Quirky - Thu Aug 30, 2007 7:48 pm</h4>
    <div class="postbody"><span class="postbody">Oh yeah! Should be 1.0f, just goes to show how often I use "magic" decimal-point numbers in code ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138941 - kusma - Fri Aug 31, 2007 1:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">I personally think it shouldn't be a problem, since there's there's no difference in code paths  between:
<br/>
f1 = FpNumber(1.0);
<br/>
and
<br/>
f1 = 1.0;
<br/>
<br/>
I personally think that any programmer should be able to see that in this case.
<br/>
</td> </tr></table><span class="postbody">
<br/>
With big systems it's often not too easy to see what path the code takes. Let's say you've only implemented the fixed-point version of a function like log2() that returns an int; there's no way to tell 6 months later that your float will be automatically promoted to a fixed-point number (and thus potentially loosing range or precision), so you might spend hours debugging just that.
<br/>
<br/>
It's not really the case above that is the issue here, it's whenever a floating-point number DOES get promoted without it being explicit in the code. The cost of having to explicitly construct the type from a float/double does not outweigh the uncertainty of the non-explicit constructor IMO.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139982 - Vich - Wed Sep 12, 2007 10:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">I personally think it shouldn't be a problem, since there's there's no difference in code paths  between:
<br/>
f1 = FpNumber(1.0);
<br/>
and
<br/>
f1 = 1.0;
<br/>
<br/>
I personally think that any programmer should be able to see that in this case.
<br/>
</td> </tr></table><span class="postbody">
<br/>
With big systems it's often not too easy to see what path the code takes. Let's say you've only implemented the fixed-point version of a function like log2() that returns an int; there's no way to tell 6 months later that your float will be automatically promoted to a fixed-point number (and thus potentially loosing range or precision), so you might spend hours debugging just that.
<br/>
<br/>
It's not really the case above that is the issue here, it's whenever a floating-point number DOES get promoted without it being explicit in the code. The cost of having to explicitly construct the type from a float/double does not outweigh the uncertainty of the non-explicit constructor IMO.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Ah, thanks, that's clarifies it. I'll change it soon :)
<br/>
I've also made lots of improvements in the RTTI/serialization system(eg. linking to objects in external XML files). I will post the changes soon. They're still on my laptop, so I'll have to commit them first.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140336 - Vich - Sat Sep 15, 2007 1:26 pm</h4>
    <div class="postbody"><span class="postbody">Okay, here's a list of improvements:
<br/>
<br/>
- I created a network stream that works in windows and *nix platforms and it is currently implemented for TCP/IP, just like files, you can now open streams like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<a href="tcp://www.google.com:80" target="_blank">tcp://www.google.com:80</a>
<br/>
<a href="tcp://127.0.0.1:80" target="_blank">tcp://127.0.0.1:80</a>
<br/>
<a href="file://something.txt" target="_blank">file://something.txt</a></td> </tr></table><span class="postbody">
<br/>
A Nintendo DS network stream will be implemented soon. Opening a network stream on the DS(or any other not-implented platform) now gives a network stream with a dummy socket which has HasEnded() set to true and IsValid() set to false.
<br/>
<br/>
- I've made a <a class="postlink" href="http://cow.svn.sourceforge.net/viewvc/cow/trunk/Demos/Source/Tutorials/Streaming.cpp?view=markup" target="_blank">tutorial for streaming</a> that opens and downloads the Google "about" page.
<br/>
<br/>
- External link loading from serialized XML objects.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">&lt;link&gt;[local_link]&lt;/link&gt;
<br/>
&lt;link&gt;[folder/file:external_link]&lt;/link&gt;</td> </tr></table><span class="postbody">
<br/>
Loading a link to an external file results in the loading of all objects in that file into the given object system.
<br/>
Note that an external link does not include a streaming prefix(eg. "file://"), because the serializer will chose the same prefix as the original file that was parsed. This way, you can stream your objects from different sources without having to change all the links.
<br/>
<br/>
- A managed stream now has its source location stored in itself.
<br/>
- Renamed global functions to gName() and renamed names like Rtti to RTTI, Xml to XML, etc.
<br/>
- Fixed all builds that were broken(*nix,  DS)
<br/>
- Created SCons build script for the unit tests and tutorials
<br/>
- Made foreign constructors for FixedPoint explicit.
<br/>
- Surpressed offsetof() warnings for GCC(DS and *nix), as I know that this data is platform-specific and all the compilers that I've test give valid offset data.
<br/>
<br/>
I've been a busy bee :)<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141175 - Vich - Sat Sep 22, 2007 11:32 pm</h4>
    <div class="postbody"><span class="postbody">More improvements and features:
<br/>
(I've been coding like a mad man)
<br/>
<br/>
- 2D/3D integer/float point classes added.
<br/>
- Fixed network initialization
<br/>
- Improved streaming system (refactored a lot of code)
<br/>
- Created a MemoryStream so you can read/write a chunk of memory just like a network, a stringstream or a file stream. Very handy for Nintendo DS files that are attached to the executable.
<br/>
- Added my own memory functions like gMemSet (memset()) so I can later add validation there in debug mode.
<br/>
- Fixed bug in StringStream and improved it in general
<br/>
- Improved ObjectSystem
<br/>
- Refactored SerializationWriter (big improvement)
<br/>
- Created easy-to-use functions like gLoadAssetsFromXML() and gSaveAssetsToXML() that load and save a whole object from/to XML through serialization.
<br/>
- Imported a the latest version of TinyXML
<br/>
- Added COW_MEMORY_MODEL setting to COWSettings.h, which will control the typedef of types like int32, uint32, etc.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141308 - Vich - Sun Sep 23, 2007 11:39 pm</h4>
    <div class="postbody"><span class="postbody">More functionality:
<br/>
<br/>
- Added Image and ImagePalette classes.
<br/>
- Added ImageStreamer, BMPStreamer and TGAStreamer that can use any kind of stream(FileStream, TCPStream, MemoryStream, etc.) to read one or more images.
<br/>
- Added tutorial for loading images.
<br/>
- Improved assert
<br/>
<br/>
Fixes:
<br/>
<br/>
- Fix for FileStream and Stream<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141958 - Sh4wn - Tue Oct 02, 2007 12:03 pm</h4>
    <div class="postbody"><span class="postbody">Looks very nice :)
<br/>
<br/>
Definitly going to use this, when I create my own nds app. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142604 - Vich - Wed Oct 10, 2007 7:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sh4wn wrote:</b></span></td> </tr> <tr> <td class="quote">Looks very nice :)
<br/>
<br/>
Definitly going to use this, when I create my own nds app. :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks. Tell me if you need any help setting stuff up or if you don't understand some functionality.
<br/>
I think that I need to add more tutorial applications.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142733 - Vich - Fri Oct 12, 2007 12:59 pm</h4>
    <div class="postbody"><span class="postbody">reply to <a href="http://forum.gbadev.org/viewtopic.php?p=142729#142729" target="_blank">http://forum.gbadev.org/viewtopic.php?p=142729#142729</a>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">I know, it's just my take on the "FREE" aspect. LGPL is more 'free' for the developer, but [potentially] less 'free' for the consumer.</td> </tr></table><span class="postbody">
<br/>
You're right.
<br/>
I've been thinking and I might do something like this:
<br/>
- completely free for non-commercial use (self-modified version of zlib/png or something similar ... suggestions are welcome)
<br/>
- GPL license remains available.
<br/>
- Different paid licenses available for commercial projects.  Commercial projects can also use the GPL license of course. So people who want to earn money with my project can donate code or money.
<br/>
<br/>
What do you think?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">You have a good take on GPL software, tutorials are (part of) the way forward!</td> </tr></table><span class="postbody">
<br/>
Thanks :) The tutorials project is relatively new so it will be expanded later. Suggestions and criticism are always welcome.
<br/>
<br/>
@ other people who read this:
<br/>
What do you think of this licensing scheme suggestion?<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142740 - gauauu - Fri Oct 12, 2007 2:50 pm</h4>
    <div class="postbody"><span class="postbody">I don't use COW, but I've always appreciated license schemes like what you are talking about.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142745 - keldon - Fri Oct 12, 2007 3:18 pm</h4>
    <div class="postbody"><span class="postbody">Hmm, that would be great but does either license allow such a clause? Technically it should, since the GPL version of the code is derived from your original code, although any GPL derived forks and advancements will not be allowed to return back to the original project unless the original project is GPL'd(I think).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142747 - Vich - Fri Oct 12, 2007 3:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">Hmm, that would be great but does either license allow such a clause? Technically it should, since the GPL version of the code is derived from your original code, although any GPL derived forks and advancements will not be allowed to return back to the original project unless the original project is GPL'd(I think).</td> </tr></table><span class="postbody">
<br/>
<br/>
With GPL it's definitely possible to have other licenses aside, Quake3 is proof of that.
<br/>
With the zlib/png scheme for non-commercial use it should be possible too. I'll have to add a non-commercial clause(for COW and derived products of COW), so the license remains non-commercial.
<br/>
Then what is left is a commercial license, which works in a very specific way for 1 or more derived software products(depending on the commercial license type), so that should work without any problem. I already have a prototype ready for this.
<br/>
<br/>
Forks of GPL'ed and non-commercial zlib/png variants will of course remain within the license that was chosen to fork:
<br/>
- GPL will remain GPL, no problem there.
<br/>
- zlib/png with non-commercial clause will just remain zlib/png with commercial clause and with a notice that derived products must remain non-commercial.
<br/>
In this case, someone won't be able to fork a forked GPL project into the zlib/png&amp;non-commercial license or vice versa, but I don't think that's a problem.
<br/>
<br/>
The only real difficulty I can think of is how to describe "commercial" projects
<br/>
<br/>
The "fork of a fork" problem could be solved by creating a new license which is a combination of GPL and zlib/png&amp;non-commercial that states that you have to publish your fork always with these 2 licenses. What do you think about that?<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142752 - keldon - Fri Oct 12, 2007 5:53 pm</h4>
    <div class="postbody"><span class="postbody">Replace "commercial" product with the clauses that you have assumed a "commercial" product implies. For example you may class a product as commercial if there is no fully functional freely available program for download, freely obtainable with costs going only to postal administration (or something of those lines). Also state that "justifiable" postal administration only covers the cost of the postal company (which can eventually be 5 paragraphs long covering every possible loop hole).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142765 - tepples - Fri Oct 12, 2007 9:08 pm</h4>
    <div class="postbody"><span class="postbody">The <a class="postlink" href="http://www.opensource.org/licenses/sleepycat.php" target="_blank">Sleepycat license</a>, used for Berkeley DB, is probably the most compatible copyleft license around.
<br/>
<br/>
As for "non-commercial", what about the cost of the blank media that a program ships on? The GNU GPL limits the cost of a source disc under <a class="postlink" href="http://www.gnu.org/copyleft/gpl.html" target="_blank">section 6b</a> to "a price no more than your reasonable cost of physically performing this conveying of source".<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142835 - Vich - Sun Oct 14, 2007 11:27 am</h4>
    <div class="postbody"><span class="postbody">Thank you keldon and tepples. I will create some kind of hybrid license and I'll post it here soon.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142909 - Vich - Mon Oct 15, 2007 12:23 am</h4>
    <div class="postbody"><span class="postbody">Aside from the licensing, I have some update information:
<br/>
This weekend I've added relative link support to the serialization system, so you can make links like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
&lt;link&gt;[local_link]&lt;/link&gt;
<br/>
-&gt; Link from within a file (not a new feature)
<br/>
<br/>
&lt;link&gt;[folder/file.xml:external_link]&lt;/link&gt;
<br/>
-&gt; Link is absolute (not a new feature)
<br/>
<br/>
&lt;link&gt;[./file.xml:external_link]&lt;/link&gt;
<br/>
-&gt; Link is relative to the file where it is linked from
<br/>
<br/>
&lt;link&gt;[../../file.xml:external_link]&lt;/link&gt;
<br/>
-&gt; Link is 2 folders below the file that is linked from.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've added 2 new tutorials:
<br/>
- <a class="postlink" href="http://cow.svn.sourceforge.net/viewvc/cow/trunk/Applications/Source/Tutorials/HTTPStream.cpp?view=markup" target="_blank">HTTPStream</a>
<br/>
- <a class="postlink" href="http://cow.svn.sourceforge.net/viewvc/cow/trunk/Applications/Source/Tutorials/Serialization.cpp?view=markup" target="_blank">Serialization</a>
<br/>
<br/>
There is also a <a class="postlink" href="http://cow.svn.sourceforge.net/viewvc/cow/trunk/Documents/CodeStyle.htm?view=log" target="_blank">code style</a> document available.
<br/>
<br/>
Aside from this I've submitted lots of other fixes and some structural OO improvements(concerning stream registration and serialization), but probably nobody will care about those :P<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
