<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Chapter 5 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Patater's Introduction to Nintendo DS Programming > Chapter 5</h2>
<div id="posts">
<div class="post">
    <h4>#165213 - the-anonymous-coward - Sat Dec 13, 2008 12:06 am</h4>
    <div class="postbody"><span class="postbody">Okay, so I am trying to work my way through this tutorial. I tried to build the Chapter five project from its folder, just to make sure my system is set up correctly, but I get this output:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
thrust_1_22050_8_s.raw
<br/>
grit /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/moon.png -fts -omoon
<br/>
STATUS: ---grit v0.8.3 ---
<br/>
STATUS: Individual runs.
<br/>
STATUS: Input file c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/moon.png
<br/>
STATUS: Output file: 'moon'.
<br/>
STATUS: Started run at: 2008-12-12, 17:59:37
<br/>
STATUS: Validatating gr.
<br/>
WARNING:   No explicit symbol name. In overwrite mode, so using dst title.
<br/>
STATUS: Validation succeeded.
<br/>
STATUS: Preparing data.
<br/>
STATUS: Work-DIB creation.
<br/>
WARNING:   converting from 4 bpp to 4 bpp.
<br/>
STATUS: Work-DIB creation complete: 32x32@8.
<br/>
STATUS: Tile preparation.
<br/>
STATUS:   tiling to 8x8 tiles.
<br/>
STATUS: Tile preparation complete.
<br/>
STATUS: Graphics preparation.
<br/>
STATUS:   Bitpacking: 8 -&gt; 4.
<br/>
STATUS: Graphics preparation complete.
<br/>
STATUS: Palette preparation.
<br/>
STATUS: Palette preparation complete.
<br/>
STATUS: Data preparation complete.
<br/>
STATUS: Export to GNU asm: moon into moon.s .
<br/>
STATUS: Run completed :).
<br/>
STATUS: Done!
<br/>
moon.s
<br/>
arm-eabi-gcc -MMD -MP -MF /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build/moon.d -x assembler-with-cpp -g -mthumb -mthumb-interwork -c moon.s -o moon.o
<br/>
grit /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/orangeShuttle.png -fts -oorangeShuttle
<br/>
STATUS: ---grit v0.8.3 ---
<br/>
STATUS: Individual runs.
<br/>
STATUS: Input file c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/orangeShuttle.png
<br/>
STATUS: Output file: 'orangeShuttle'.
<br/>
STATUS: Started run at: 2008-12-12, 17:59:39
<br/>
STATUS: Validatating gr.
<br/>
WARNING:   No explicit symbol name. In overwrite mode, so using dst title.
<br/>
STATUS: Validation succeeded.
<br/>
STATUS: Preparing data.
<br/>
STATUS: Work-DIB creation.
<br/>
WARNING:   converting from 4 bpp to 4 bpp.
<br/>
STATUS: Work-DIB creation complete: 64x64@8.
<br/>
STATUS: Tile preparation.
<br/>
STATUS:   tiling to 8x8 tiles.
<br/>
STATUS: Tile preparation complete.
<br/>
STATUS: Graphics preparation.
<br/>
STATUS:   Bitpacking: 8 -&gt; 4.
<br/>
STATUS: Graphics preparation complete.
<br/>
STATUS: Palette preparation.
<br/>
STATUS: Palette preparation complete.
<br/>
STATUS: Data preparation complete.
<br/>
STATUS: Export to GNU asm: orangeShuttle into orangeShuttle.s .
<br/>
STATUS: Run completed :).
<br/>
STATUS: Done!
<br/>
orangeShuttle.s
<br/>
arm-eabi-gcc -MMD -MP -MF /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build/orangeShuttle.d -x assembler-with-cpp -g -mthumb -mthumb-interwork -c orangeShuttle.s -o orangeShuttle.o
<br/>
grit /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/planet.png -fts -oplanet
<br/>
STATUS: ---grit v0.8.3 ---
<br/>
STATUS: Individual runs.
<br/>
STATUS: Input file c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/planet.png
<br/>
STATUS: Output file: 'planet'.
<br/>
STATUS: Started run at: 2008-12-12, 17:59:39
<br/>
STATUS: Validatating gr.
<br/>
WARNING:   No explicit symbol name. In overwrite mode, so using dst title.
<br/>
STATUS: Validation succeeded.
<br/>
STATUS: Preparing data.
<br/>
STATUS: Work-DIB creation.
<br/>
WARNING:   converting from 24 bpp to 16 bpp.
<br/>
STATUS:   converting to: 16bpp BGR, alpha=1, except for 0x0000.
<br/>
STATUS: Work-DIB creation complete: 128x128@16.
<br/>
STATUS: Tile preparation.
<br/>
STATUS: Tile preparation complete.
<br/>
STATUS: Graphics preparation.
<br/>
STATUS: Graphics preparation complete.
<br/>
STATUS: Data preparation complete.
<br/>
STATUS: Export to GNU asm: planet into planet.s .
<br/>
STATUS: Run completed :).
<br/>
STATUS: Done!
<br/>
planet.s
<br/>
arm-eabi-gcc -MMD -MP -MF /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build/planet.d -x assembler-with-cpp -g -mthumb -mthumb-interwork -c planet.s -o planet.o
<br/>
grit /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/splash.png -fts -osplash
<br/>
STATUS: ---grit v0.8.3 ---
<br/>
STATUS: Individual runs.
<br/>
STATUS: Input file c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/splash.png
<br/>
STATUS: Output file: 'splash'.
<br/>
STATUS: Started run at: 2008-12-12, 17:59:39
<br/>
STATUS: Validatating gr.
<br/>
WARNING:   No explicit symbol name. In overwrite mode, so using dst title.
<br/>
STATUS: Validation succeeded.
<br/>
STATUS: Preparing data.
<br/>
STATUS: Work-DIB creation.
<br/>
WARNING:   converting from 24 bpp to 16 bpp.
<br/>
STATUS:   converting to: 16bpp BGR, alpha=1, except for 0x0000.
<br/>
STATUS: Work-DIB creation complete: 256x192@16.
<br/>
STATUS: Tile preparation.
<br/>
STATUS: Tile preparation complete.
<br/>
STATUS: Graphics preparation.
<br/>
STATUS: Graphics preparation complete.
<br/>
STATUS: Data preparation complete.
<br/>
STATUS: Export to GNU asm: splash into splash.s .
<br/>
STATUS: Run completed :).
<br/>
STATUS: Done!
<br/>
splash.s
<br/>
arm-eabi-gcc -MMD -MP -MF /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build/splash.d -x assembler-with-cpp -g -mthumb -mthumb-interwork -c splash.s -o splash.o
<br/>
grit /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/starField.png -fts -ostarField
<br/>
STATUS: ---grit v0.8.3 ---
<br/>
STATUS: Individual runs.
<br/>
STATUS: Input file c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/gfx/starField.png
<br/>
STATUS: Output file: 'starField'.
<br/>
STATUS: Started run at: 2008-12-12, 17:59:40
<br/>
STATUS: Validatating gr.
<br/>
WARNING:   No explicit symbol name. In overwrite mode, so using dst title.
<br/>
STATUS: Validation succeeded.
<br/>
STATUS: Preparing data.
<br/>
STATUS: Work-DIB creation.
<br/>
WARNING:   converting from 24 bpp to 16 bpp.
<br/>
STATUS: converting to: 16bpp BGR, alpha=1.
<br/>
STATUS: Work-DIB creation complete: 256x192@16.
<br/>
STATUS: Tile preparation.
<br/>
STATUS: Tile preparation complete.
<br/>
STATUS: Graphics preparation.
<br/>
STATUS: Graphics preparation complete.
<br/>
STATUS: Data preparation complete.
<br/>
STATUS: Export to GNU asm: starField into starField.s .
<br/>
STATUS: Run completed :).
<br/>
STATUS: Done!
<br/>
starField.s
<br/>
arm-eabi-gcc -MMD -MP -MF /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build/starField.d -x assembler-with-cpp -g -mthumb -mthumb-interwork -c starField.s -o starField.o
<br/>
main.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build/main.d -g -Wall -O2 -march=armv5te -mtune=arm946e-s -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/include -I/c/devkitPro/libnds/include -I/c/devkitPro/libnds/include -I/c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/build -DARM9 -fno-rtti -fno-exceptions -c /c/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp -o main.o
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp: In function 'void initBackgrounds()':
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:51: error: 'BG3_CR' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:58: error: 'BG3_XDX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:59: error: 'BG3_XDY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:60: error: 'BG3_YDX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:61: error: 'BG3_YDY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:65: error: 'BG3_CX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:66: error: 'BG3_CY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:70: error: 'BG2_CR' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:77: error: 'BG2_XDX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:78: error: 'BG2_XDY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:79: error: 'BG2_YDX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:80: error: 'BG2_YDY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:84: error: 'BG2_CX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:85: error: 'BG2_CY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:88: error: 'SUB_BG3_CR' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:95: error: 'SUB_BG3_XDX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:96: error: 'SUB_BG3_XDY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:97: error: 'SUB_BG3_YDX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:98: error: 'SUB_BG3_YDY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:103: error: 'SUB_BG3_CX' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:104: error: 'SUB_BG3_CY' was not declared in this scope
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp: In function 'int main()':
<br/>
c:/MyProjects/NDS/Tutorial/manual/code/chapter_5-backgrounds/source/main.cpp:139: error: 'powerON' was not declared in this scope
<br/>
make[1]: *** [main.o] Error 1
<br/>
rm moon.s splash.s planet.s orangeShuttle.s starField.s
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:11
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I just assumed that the code that came with manual would build. Keep in mind that I am not very experienced in any of this, so it could be something very simple.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165215 - Ludo6431 - Sat Dec 13, 2008 12:40 am</h4>
    <div class="postbody"><span class="postbody">You use devkitARM r24...
<br/>
i think in the libnds of this release, these registers are not defined... (view : <a href="http://forum.gbadev.org/viewtopic.php?p=165210#165210" target="_blank">http://forum.gbadev.org/viewtopic.php?p=165210#165210</a>)<br/>_________________<br/>Sorry for my poor english, I'm french.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165217 - wintermute - Sat Dec 13, 2008 1:24 am</h4>
    <div class="postbody"><span class="postbody">The naming scheme in the latest libnds has changed, hopefully Patater will get round to updating soon.
<br/>
<br/>
In the meantime the answer in the thread linked above should help with this too.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165220 - the-anonymous-coward - Sat Dec 13, 2008 2:11 am</h4>
    <div class="postbody"><span class="postbody">Oh, thanks guys. I looked through the header files and thought it must just be something stupid I wias missing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165262 - Patater - Mon Dec 15, 2008 2:50 pm</h4>
    <div class="postbody"><span class="postbody">The new version of the manual is now up. All chapters are verified to build and work with version 1.3.1 of libnds.
<br/>
<br/>
<a class="postlink" href="http://patater.com/manual" target="_blank">http://patater.com/manual</a>
<br/>
<br/>
Enjoy the manual and good luck on your projects!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165285 - the-anonymous-coward - Tue Dec 16, 2008 4:47 am</h4>
    <div class="postbody"><span class="postbody">Thanks Patater!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165289 - the-anonymous-coward - Tue Dec 16, 2008 6:47 am</h4>
    <div class="postbody"><span class="postbody">Patater, I thought I would go through and just make sure that all the chapters compile. Chapters 6, 7, 8, and 9 don't, all because SPRITE_DMA_CHANNEL isn't visible. Just thought I'd let you know.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165307 - Patater - Tue Dec 16, 2008 3:06 pm</h4>
    <div class="postbody"><span class="postbody">Doh. I thought I had addressed that. This is embarrassing for me. Anyhow, it is fixed. Sorry for the trouble. Thanks for notifying me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165318 - the-anonymous-coward - Wed Dec 17, 2008 12:29 am</h4>
    <div class="postbody"><span class="postbody">Ah, it's no big deal. Maybe I should have let you known more discreetly. I embarrass myself quite often when it comes to coding.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
