<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>simple silly question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > simple silly question</h2>
<div id="posts">
<div class="post">
    <h4>#23611 - underthesun - Fri Jul 16, 2004 4:20 am</h4>
    <div class="postbody"><span class="postbody">Hi, newbie has a few questions:
<br/>
<br/>
I was just reading somewhere that says DMA has a limit to 1000 kilobit for copying?
<br/>
<br/>
then DMA wouldn't be able to copy an array of 38400 shorts (my buffer for graphics) into the output buffer? in the vblank time?
<br/>
<br/>
if not, then i'm wondering how people manage to put graphics out in vblank time (if the memory writing to videobuffer is done while its not vblank, "blitting" seems to happen)
<br/>
<br/>
is sprites the answers?
<br/>
<br/>
Thanks in advance!<br/>_________________<br/><span style="font-size: 1px; line-height: normal"><a class="postlink" href="http://utgc.port5.com" target="_blank">I</a> am just a gba noob. be gentle :p</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23613 - Darmstadium - Fri Jul 16, 2004 5:19 am</h4>
    <div class="postbody"><span class="postbody">mm, i don't think that there's a limit to how much you can transfer at a time, except that you only have so many bits in REG_DMxCNT to specify how many words you want copied. I'm sure that you can copy as much as you would ever want.
<br/>
<br/>
sprites are fairly small images that you can move around on the screen and rotate and do other stuff to. You should look at a tutorial for more info. I suggest gbajunkie's at <a class="postlink" href="http://www.gbajunkie.co.uk" target="_blank">www.gbajunkie.co.uk</a>. It's a lot better than the PERN project tutorial. You should start with gbajunkie's and then move to the PERN project.
<br/>
<br/>
good luck!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23617 - underthesun - Fri Jul 16, 2004 8:08 am</h4>
    <div class="postbody"><span class="postbody">oh thanks. I never actually thought of making a wrapper function that dmacopies 1000 bits by 1000 bits... :S.
<br/>
<br/>
thanks for the pointer. did look at the pern project, but guess i'll now be @ gbajunkie tutorial. thanks again!<br/>_________________<br/><span style="font-size: 1px; line-height: normal"><a class="postlink" href="http://utgc.port5.com" target="_blank">I</a> am just a gba noob. be gentle :p</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23654 - sajiimori - Sat Jul 17, 2004 5:28 am</h4>
    <div class="postbody"><span class="postbody">Single DMA transfers are neither limited to 1000 kilobits nor 1000 bits.  You can fill all of EWRAM in one go if you want.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23657 - underthesun - Sat Jul 17, 2004 10:25 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Single DMA transfers are neither limited to 1000 kilobits nor 1000 bits.  You can fill all of EWRAM in one go if you want.</td> </tr></table><span class="postbody">
<br/>
<br/>
I did my first ever dma transfer yesterday, and it really is fast (good for making boxes on bitmap mode? :D, with fixed source on a colour).
<br/>
<br/>
But the thing is, isn't the bits on the dma control register.. isn't there only 7 bits for the wordcounts, which leaves about.. 2^7 = 128 * 4 bytes? or am I getting my maths wrong? 
<br/>
<br/>
how do ou actually transfer 1000 kbits on a single (or three-liner more likely) call, which involves setting source register, dest register and activating it?
<br/>
<br/>
thanks again<br/>_________________<br/><span style="font-size: 1px; line-height: normal"><a class="postlink" href="http://utgc.port5.com" target="_blank">I</a> am just a gba noob. be gentle :p</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23659 - poslundc - Sat Jul 17, 2004 2:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>underthesun wrote:</b></span></td> </tr> <tr> <td class="quote">I did my first ever dma transfer yesterday, and it really is fast (good for making boxes on bitmap mode? :D, with fixed source on a colour).</td> </tr></table><span class="postbody">
<br/>
<br/>
DMA is actually slower than software copying if the source is fixed, because the DMA has to re-read the source for every iteration. Consider using the CPUFastSet SWI call instead.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">But the thing is, isn't the bits on the dma control register.. isn't there only 7 bits for the wordcounts, which leaves about.. 2^7 = 128 * 4 bytes? or am I getting my maths wrong?</td> </tr></table><span class="postbody">
<br/>
<br/>
There are actually 16 bits for the wordcounts... but the number you can use depend on the DMA. DMA0-2 recognize numbers up to 16384 (14 bits, with 0 representing 16384) and DMA3 recognizes numbers up to 65535 (16 bits, with 0 representing 65536).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">how do ou actually transfer 1000 kbits on a single (or three-liner more likely) call, which involves setting source register, dest register and activating it?</td> </tr></table><span class="postbody">
<br/>
<br/>
Your use of kilobits is a bit awkward... you are better off working in bytes on the GBA. If you wanted to transfer 125 kilobytes (the equivalent of 1000 kilobits), well, first of all you'll have to transfer 126 if you're using 16-bit DMA or 128 if you're using 32-bit DMA. If you're using 16-bit DMA then set the wordcount to 63; if you're using 32-bit DMA set the wordcount to 32.
<br/>
<br/>
Keep in mind that large DMA transfers are a bad idea if you've got time-critical interrupts firing regularly because interrupts will be delayed while the DMA is running. Just something to keep in the back of your head.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
