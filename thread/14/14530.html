<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBA DevkitARM Compilation Errors - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > GBA DevkitARM Compilation Errors</h2>
<div id="posts">
<div class="post">
    <h4>#145444 - modchamp - Thu Nov 15, 2007 7:01 pm</h4>
    <div class="postbody"><span class="postbody">Well I'm once again hooked on the gbamp and since I want to get into DS programming I thought I'd start with GBA programming as it seems much simpler. Anyways I really have no idea what I'm doing at this point so I'd like a little help.
<br/>
<br/>
OS: Windows XP Home Service Pack 2
<br/>
Compiler: DevkitPro 1.4.4
<br/>
Installation Location: c:\devkitPro AND c:\devkitPro\devkitARM
<br/>
<br/>
Here's my test C file:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/*
<br/>
   Turn the screen green!
<br/>
   Platform: GBA
<br/>
   Author: Damian Yerrick
<br/>
   Copyright: All rights released
<br/>
*/
<br/>
<br/>
typedef unsigned int u16;
<br/>
#define BG_COLORS ((u16 *)0x05000000)
<br/>
#define REG_DISPCNT (*(u16 *)0x04000000)
<br/>
#define RGB5(r,g,b)   ((r)|((g)&lt;&lt;5)|((b)&lt;&lt;10))
<br/>
<br/>
int main(void) {
<br/>
  REG_DISPCNT = 0;  // mode 0, no backgrounds or sprites
<br/>
  BG_COLORS[0] = RGB5(0, 31, 0);
<br/>
  while (1) {}
<br/>
} </td> </tr></table><span class="postbody">
<br/>
<br/>
Here's my test batch file:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">set Path=c:\devkitPro\devkitARM\bin
<br/>
arm-eabi-gcc -Wall -mthumb -mthumb-interwork test.c -o test.elf -specs=gba_mb.specs
<br/>
arm-eabi-objcopy -O binary test.elf test.gba
<br/>
gbafix test.gba
<br/>
pause </td> </tr></table><span class="postbody">
<br/>
<br/>
And here's the error I'm getting when I try and run the batch file:
<br/>
<a href="http://aycu25.webshots.com/image/32624/2000463071733690600_rs.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
If more information is required to help me, let me know and I'd be glad to post it. All help is greatly appreciated. 
<br/>
<br/>
Thanks,
<br/>
<br/>
-Modchamp</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145446 - NeX - Thu Nov 15, 2007 7:14 pm</h4>
    <div class="postbody"><span class="postbody">May I ask why you are using a command line to compile?  I never have done, on the PC, GBA or DS.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145448 - modchamp - Thu Nov 15, 2007 7:17 pm</h4>
    <div class="postbody"><span class="postbody">How do you suggest I compile it then? To me it seemed that a batch file was the easiest and fastest way to compile and recompile things.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145452 - NeX - Thu Nov 15, 2007 7:29 pm</h4>
    <div class="postbody"><span class="postbody">Well, in whatever editor I am using, I simply hit the "Compile" or "Make" button.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145453 - modchamp - Thu Nov 15, 2007 7:31 pm</h4>
    <div class="postbody"><span class="postbody">Lol mind being a little more helpful?
<br/>
<br/>
Could you please tell me which program your using, and maybe even give me an example of how you go about compiling with it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145456 - gauauu - Thu Nov 15, 2007 8:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NeX wrote:</b></span></td> </tr> <tr> <td class="quote">May I ask why you are using a command line to compile?  I never have done, on the PC, GBA or DS.</td> </tr></table><span class="postbody">
<br/>
<br/>
The command line is a fine way to compile (although I would recommend makefiles instead of batch files, but that's less important for an immediate "check to see if the toolchain works").  If you are using the magic "build" buttons of an editor or IDE, you still have to have your toolchain environment set up correctly.
<br/>
<br/>
That being said, modchamp, is there a directory called c:\devkitPro\msys?  Depending on how you installed devkitPro, it should have gotten installed as well.  Try adding c:\devkitPro\msys\bin to your path as well, and see if that helps.
<br/>
<br/>
I'm not an expert on the toolchain setup (I got mine working, and left it at that).  So hopefully someone smarter will come along and answer if I'm totally off.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145457 - modchamp - Thu Nov 15, 2007 8:50 pm</h4>
    <div class="postbody"><span class="postbody">Ok I change my set Path to:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">set Path=c:\devkitPro\devkitARM\bin;c:\devkitPro\devkitmsys\bin</td> </tr></table><span class="postbody">
<br/>
<br/>
still getting the same error though.
<br/>
<br/>
Also I really don't like makefiles ^_^ But if they would work I'd use them too, got an example of a makefile I could try?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145458 - bean_xp - Thu Nov 15, 2007 10:10 pm</h4>
    <div class="postbody"><span class="postbody">Just use the ones included in the DevKitPro examples they should work fine for most cases.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145459 - modchamp - Thu Nov 15, 2007 10:28 pm</h4>
    <div class="postbody"><span class="postbody">Ok I found the devkitpro example and here is what I've got:
<br/>
<br/>
C source code
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include &lt;gba_console.h&gt;
<br/>
#include &lt;gba_video.h&gt;
<br/>
#include &lt;gba_interrupt.h&gt;
<br/>
#include &lt;gba_systemcalls.h&gt;
<br/>
#include &lt;gba_input.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
#include &lt;stdlib.h&gt;
<br/>
<br/>
int frame = 0;
<br/>
<br/>
void Vblank() {
<br/>
<br/>
   frame++;
<br/>
}
<br/>
//---------------------------------------------------------------------------------
<br/>
// Program entry point
<br/>
//---------------------------------------------------------------------------------
<br/>
int main(void) {
<br/>
//---------------------------------------------------------------------------------
<br/>
<br/>
<br/>
   // the vblank interrupt must be enabled for VBlankIntrWait() to work
<br/>
   // since the default dispatcher handles the bios flags no vblank handler
<br/>
   // is required
<br/>
   irqInit();
<br/>
   irqSet(IRQ_VBLANK, Vblank);
<br/>
   irqEnable(IRQ_VBLANK);
<br/>
<br/>
   consoleInit( 0 , 4 , 0, NULL , 0 , 15);
<br/>
<br/>
   BG_COLORS[0]=RGB8(58,110,165);
<br/>
   BG_COLORS[241]=RGB5(31,31,31);
<br/>
<br/>
   SetMode(MODE_0 | BG0_ON);
<br/>
<br/>
   // ansi escape sequence to set print co-ordinates
<br/>
   // /x1b[line;columnH
<br/>
   iprintf("\x1b[10;10HHello World!\n");
<br/>
   iprintf("%x",malloc(200));
<br/>
   while (1) {
<br/>
      VBlankIntrWait();
<br/>
      scanKeys();
<br/>
<br/>
   }
<br/>
}
<br/>
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Makefile:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#---------------------------------------------------------------------------------
<br/>
# Clear the implicit built in rules
<br/>
#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM)
<br/>
endif
<br/>
<br/>
include $(DEVKITARM)/gba_rules
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output, if this ends with _mb a multiboot image is generated
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# DATA is a list of directories containing data files
<br/>
# INCLUDES is a list of directories containing header files
<br/>
#---------------------------------------------------------------------------------
<br/>
TARGET      :=   $(shell basename $(CURDIR))_mb
<br/>
BUILD      :=   build
<br/>
SOURCES      :=   source
<br/>
DATA      :=   
<br/>
INCLUDES   :=
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# options for code generation
<br/>
#---------------------------------------------------------------------------------
<br/>
ARCH   :=   -mthumb -mthumb-interwork
<br/>
<br/>
CFLAGS   :=   -g -Wall -O3\
<br/>
      -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
       -fomit-frame-pointer\
<br/>
      -ffast-math \
<br/>
      $(ARCH)
<br/>
<br/>
CFLAGS   +=   $(INCLUDE)
<br/>
<br/>
CXXFLAGS   :=   $(CFLAGS) -fno-rtti -fno-exceptions
<br/>
<br/>
ASFLAGS   :=   $(ARCH)
<br/>
LDFLAGS   =   -g $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# path to tools - this can be deleted if you set the path to the toolchain in windows
<br/>
#---------------------------------------------------------------------------------
<br/>
export PATH   :=   $(DEVKITARM)/bin:$(PATH)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBS   :=   -lgba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBGBA)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# no real need to edit anything past this point unless you need to add additional
<br/>
# rules for different file extensions
<br/>
#---------------------------------------------------------------------------------
<br/>
ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OUTPUT   :=   $(CURDIR)/$(TARGET)
<br/>
export VPATH   :=   $(foreach dir,$(SOURCES),$(CURDIR)/$(dir)) \
<br/>
         $(foreach dir,$(DATA),$(CURDIR)/$(dir))
<br/>
<br/>
export DEPSDIR   :=   $(CURDIR)/$(BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# automatically build a list of object files for our project
<br/>
#---------------------------------------------------------------------------------
<br/>
CFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.c)))
<br/>
CPPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
SFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.s)))
<br/>
BINFILES   :=   $(foreach dir,$(DATA),$(notdir $(wildcard $(dir)/*.*)))
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# use CXX for linking C++ projects, CC for standard C
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(CPPFILES)),)
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CC)
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CXX)
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OFILES   := $(addsuffix .o,$(BINFILES)) $(CPPFILES:.cpp=.o) $(CFILES:.c=.o) $(SFILES:.s=.o)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of include paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export INCLUDE   :=   $(foreach dir,$(INCLUDES),-I$(CURDIR)/$(dir)) \
<br/>
         $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
         -I$(CURDIR)/$(BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of library paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
<br/>
.PHONY: $(BUILD) clean
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
   @[ -d $@ ] || mkdir -p $@
<br/>
   @make --no-print-directory -C $(BUILD) -f $(CURDIR)/Makefile
<br/>
<br/>
all   : $(BUILD)
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...
<br/>
   @rm -fr $(BUILD) $(TARGET).elf $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
<br/>
DEPENDS   :=   $(OFILES:.o=.d)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# main targets
<br/>
#---------------------------------------------------------------------------------
<br/>
$(OUTPUT).gba   :   $(OUTPUT).elf
<br/>
<br/>
$(OUTPUT).elf   :   $(OFILES)
<br/>
<br/>
-include $(DEPENDS)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
When I click make in Programmers Notepad I get this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">&gt; "make" 
<br/>
template.c
<br/>
arm-eabi-gcc -MMD -MP -MF /c/devkitpro/examples/gba/template/build/template.d -g -Wall -O3 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork  -I/c/devkitPro/libgba/include -I/c/devkitpro/examples/gba/template/build -c /c/devkitpro/examples/gba/template/source/template.c -o template.o
<br/>
/c/devkitPro/devkitARM/bin/arm-eabi-gcc: /c/devkitPro/devkitARM/bin/arm-eabi-gcc: cannot execute binary file
<br/>
make[1]: *** [template.o] Error 126
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:00</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
What did I do wrong?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145500 - gauauu - Fri Nov 16, 2007 8:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>modchamp wrote:</b></span></td> </tr> <tr> <td class="quote">Ok I change my set Path to:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">set Path=c:\devkitPro\devkitARM\bin;c:\devkitPro\devkitmsys\bin</td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Again, I don't really know...but since nobody else has responded....
<br/>
<br/>
Is this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:\devkitPro\devkitmsys\bin</td> </tr></table><span class="postbody">
<br/>
just a typo?
<br/>
<br/>
do you mean:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:\devkitPro\msys\bin</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145501 - modchamp - Fri Nov 16, 2007 8:48 pm</h4>
    <div class="postbody"><span class="postbody">Ahh yes your right.
<br/>
<br/>
Well fixed that and now I'm getting this:
<br/>
<a href="http://aycu29.webshots.com/image/33668/2001362839989354359_rs.jpg">[Images not permitted - Click here to view it]</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145601 - wintermute - Sun Nov 18, 2007 9:44 pm</h4>
    <div class="postbody"><span class="postbody">That looks like you have old files from devkitARM r18 in your installation.
<br/>
<br/>
Have a look in devkitARM/arm-eabi/bin and delete the ld file in there - <span style="font-weight: bold">note:</span> ld <span style="font-weight: bold">not</span> ld.exe.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145603 - modchamp - Sun Nov 18, 2007 10:05 pm</h4>
    <div class="postbody"><span class="postbody">Thanks so much it worked. :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145631 - anox - Mon Nov 19, 2007 5:02 pm</h4>
    <div class="postbody"><span class="postbody">Yeah those makefiles can be a pain in the a**! I am currently working on one for devARM and am having a really great time :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145637 - Philip2 - Mon Nov 19, 2007 7:21 pm</h4>
    <div class="postbody"><span class="postbody">I also tried the Makefile from the gba examples.
<br/>
<br/>
I set up the enviroment vars:
<br/>
<br/>
export DEVKITARM=/home/codeST/GBA/devkitARM
<br/>
<br/>
and set up a simple test C file in the same folder as the makefile.
<br/>
<br/>
When I run "make" then the only thing I get ist:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make
<br/>
linking multiboot
<br/>
/home/codeST/GBA/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/bin/ld: cannot find -lgba
<br/>
collect2: ld returned 1 exit status
<br/>
make[1]: *** [/home/codeST/FlunkyBall/FlunkyBall_mb.elf] Fehler 1
<br/>
make: *** [build] Fehler 2
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Why cant it find the gba lib? Do I need to modify the Makefile somehow?
<br/>
I thought they would all be in the lib folder of devkitarm?
<br/>
<br/>
Thanks for your help</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145703 - anox - Tue Nov 20, 2007 7:08 pm</h4>
    <div class="postbody"><span class="postbody">Hey Philip2, how about this one:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
fenriz@base666:~/Code/Java/Flunkyball$ make
<br/>
arm-eabi-gcc -I./ -mthumb-interwork -mthumb -O2 -Wall -g -c main.cpp -o main.o
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-abort.o): In function `abort':
<br/>
(.text+0xc): undefined reference to `_exit'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-exit.o): In function `exit':
<br/>
(.text+0x1a): undefined reference to `_exit'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-signal.o): In function `_raise_r':
<br/>
(.text+0x110): undefined reference to `_getpid_r'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-signal.o): In function `_raise_r':
<br/>
(.text+0x11a): undefined reference to `_kill_r'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-mallocr.o): In function `_malloc_r':
<br/>
(.text+0x288): undefined reference to `_sbrk_r'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-mallocr.o): In function `_malloc_r':
<br/>
(.text+0x3d4): undefined reference to `_sbrk_r'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-freer.o): In function `_malloc_trim_r':
<br/>
(.text+0x2e): undefined reference to `_sbrk_r'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-freer.o): In function `_malloc_trim_r':
<br/>
(.text+0x4e): undefined reference to `_sbrk_r'
<br/>
/home/fenriz/DevkitPro/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/lib/thumb/libc.a(lib_a-freer.o): In function `_malloc_trim_r':
<br/>
(.text+0x76): undefined reference to `_sbrk_r'
<br/>
collect2: ld returned 1 exit status
<br/>
make: *** [Flunkyball.elf] Fehler 1
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Paths are correctly set so I really dont know whats the matter. In case my makefile helps...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#
<br/>
# test.mak
<br/>
#
<br/>
# makefile for a simple demo
<br/>
<br/>
<br/>
# --- Project details ---
<br/>
PROJ    := Flunkyball
<br/>
EXT     := gba
<br/>
<br/>
CFILES  := main.cpp
<br/>
<br/>
COBJS   := $(CFILES:.cpp=.o)
<br/>
OBJS    := $(COBJS)
<br/>
<br/>
#--- Tool settings ---
<br/>
# for devkitARM r19+ use PREFIX := arm-eabi
<br/>
PREFIX := arm-eabi-
<br/>
AS      := $(PREFIX)as
<br/>
CC      := $(PREFIX)gcc
<br/>
LD      := $(PREFIX)gcc
<br/>
OBJCOPY := $(PREFIX)objcopy
<br/>
<br/>
<br/>
MODEL   := -mthumb-interwork -mthumb
<br/>
#SPECS   := -specs=gba.specs         # comment out for DKA
<br/>
<br/>
ASFLAGS := -mthumb-interwork
<br/>
CFLAGS  := -I./ $(MODEL) -O2 -Wall
<br/>
LDFLAGS := $(MODEL)
<br/>
<br/>
#--- Build steps ---
<br/>
build : $(PROJ).$(EXT)
<br/>
<br/>
$(PROJ).$(EXT) : $(PROJ).elf
<br/>
   @$(OBJCOPY) -v -O binary $&lt; $@
<br/>
   -@gbafix $@
<br/>
<br/>
$(PROJ).elf : $(OBJS)
<br/>
   @$(LD) $(OBJS) $(LDFLAGS) -o $@
<br/>
<br/>
$(COBJS) : %.o : %.cpp
<br/>
   $(CC) $(CFLAGS) -g -c $&lt; -o $@
<br/>
<br/>
<br/>
# --- Clean ---
<br/>
.PHONY : clean
<br/>
clean :
<br/>
   @rm -fv $(COBJS)
<br/>
   @rm -fv $(PROJ).$(EXT)
<br/>
   @rm -fv $(PROJ).elf
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145706 - wintermute - Tue Nov 20, 2007 7:35 pm</h4>
    <div class="postbody"><span class="postbody">Couple of problems.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#SPECS   := -specs=gba.specs         # comment out for DKA 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Confusing comments and terminology here - the DKA in the comment actually refers to the obsolete devkitAdvance, not devkitARM. The specs line is required for devkitARM.
<br/>
<br/>
Since you're building C++ code you need to link with g++ and not gcc as specified here.
<br/>
<br/>
Personally I really recommend the devkitPro supplied templates, they automatically pick up source files, switch the linker as appropriate and auto generate dependencies during the build.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145707 - wintermute - Tue Nov 20, 2007 7:38 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Philip2 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
When I run "make" then the only thing I get ist:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make
<br/>
linking multiboot
<br/>
/home/codeST/GBA/devkitARM/bin/../lib/gcc/arm-eabi/4.1.2/../../../../arm-eabi/bin/ld: cannot find -lgba
<br/>
collect2: ld returned 1 exit status
<br/>
make[1]: *** [/home/codeST/FlunkyBall/FlunkyBall_mb.elf] Fehler 1
<br/>
make: *** [build] Fehler 2
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Why cant it find the gba lib? Do I need to modify the Makefile somehow?
<br/>
I thought they would all be in the lib folder of devkitarm?
<br/>
<br/>
Thanks for your help</span></td> </tr></table><span class="postbody">
<br/>
<br/>
libgba should be installed in the devkitPro folder containing the other libraries and toolchains.
<br/>
<br/>
See <a href="http://www.devkitpro.org/setup.shtml" target="_blank">http://www.devkitpro.org/setup.shtml</a> for details of the recommended layout.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145712 - anox - Tue Nov 20, 2007 8:57 pm</h4>
    <div class="postbody"><span class="postbody">Hey thanks a lot Wintermute. It worked.
<br/>
<br/>
I guess I will be analysing the whole lot the next couple of days to somewhat understand what happens there.
<br/>
<br/>
Cheers!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145843 - anox - Fri Nov 23, 2007 6:41 pm</h4>
    <div class="postbody"><span class="postbody">Now I only wonder why VisualBoyAdvance gives me a plain white screen when I tried to run the created .gba file...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145859 - tepples - Sat Nov 24, 2007 12:18 am</h4>
    <div class="postbody"><span class="postbody">If you compiled it with gba_mb.specs, does it work in VBA if you rename it from .gba to .mb? Does hello world (.../devkitPro/examples/gba/template) have the same problem? If so, this is a known bug in devkitARM R21's gba_mb linker script that I have told wintermute about.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145879 - anox - Sat Nov 24, 2007 3:20 pm</h4>
    <div class="postbody"><span class="postbody">Renamed it to .mb and it worked. Hmmm, haven't read this anywhere yet that you have to do that... Ow well, worked on painting stuff pixel by pixel all morning and its getting fun :P</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
