<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Questions about backgrounds - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Questions about backgrounds</h2>
<div id="posts">
<div class="post">
    <h4>#26996 - saBADensetsu - Fri Oct 01, 2004 11:02 am</h4>
    <div class="postbody"><span class="postbody">I have a few questions about "tiled-backgrounds", as described on gbajunkie.co.uk...
<br/>
<br/>
First of all - is the rom supposed to be ~8 seconds to load in VBA? How to reduce this time?
<br/>
<br/>
Then about larger maps... How is this done? I know it's something about reloading the map when moving, but not much more than this.
<br/>
<br/>
Thanks in advance.<br/>_________________<br/>"The Faith of Destruction, is also the Joy of Rebirth"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27006 - yaustar - Fri Oct 01, 2004 2:56 pm</h4>
    <div class="postbody"><span class="postbody">hmm. I think that is due to the program making a sin/cos lookup table as it starts up..  If you do use rotation then have a pre calculated sin/cos table and use that instead.
<br/>
<br/>
You may want to look at one of my 'tutorials' (using that term very loosely here) on my site:
<br/>
<a href="http://yauster.com/main.php?body=dev/gba.html&amp;head=dev/intro.html" target="_blank">http://yauster.com/main.php?body=dev/gba.html&amp;head=dev/intro.html</a><br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27015 - DiscoStew - Fri Oct 01, 2004 4:15 pm</h4>
    <div class="postbody"><span class="postbody">Is there a blank white screen for 8 seconds or is it black? If it is black, then VBA is loading the ROM. The time it takes depends on your computer, and how much resources are available to use. I know it takes a few seconds to load a ROM of only a few hundred KBytes on a Celeron 1.8GHz with 128MB of RAM. Good thing that is not my computer. he he.
<br/>
<br/>
If the screen is white, then you've got something loading that is taking a lot of time to do, such as what yaustar mentioned.
<br/>
<br/>
If I had more time right now, I'd talk about larger maps. Search the forums. I know there was a discussion about it, because I was involved in it.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27017 - saBADensetsu - Fri Oct 01, 2004 4:46 pm</h4>
    <div class="postbody"><span class="postbody">It was a white screen, and I can see that after i removed the rotating, it loads in &lt; 2 secs...
<br/>
<br/>
Thanks alot!
<br/>
<br/>
Now, I've searched about larger maps, but I can't seem to find anything. Maybe I'm just a little bit blind...<br/>_________________<br/>"The Faith of Destruction, is also the Joy of Rebirth"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27039 - tepples - Sat Oct 02, 2004 12:43 am</h4>
    <div class="postbody"><span class="postbody">I haven't looked at the code, but perhaps it's building a sine table. This takes a long time on the GBA, which doesn't have an FPU. Unless you're entering a 4K competition, building a sine table at runtime is a bad idea. Instead, store an appropriately sized sine table in ROM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Sat Oct 02, 2004 1:16 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#27043 - yaustar - Sat Oct 02, 2004 1:05 am</h4>
    <div class="postbody"><span class="postbody">If you can look at a rom that does this and use vba to look at the backgrounds as you move around.. if you still have trouble then see if one of us can explain it properly...<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27059 - DiscoStew - Sat Oct 02, 2004 8:50 am</h4>
    <div class="postbody"><span class="postbody">Lets see if I can explain about large maps...
<br/>
<br/>
I imagine you know how text backgrounds work, as that is what I will use for explaining. They automatically wrap-around, which is what makes large maps possible by the method I will describe. As an example and not to over-fill this thread with a single post, imagine the text background is 32x32 pixels (4x4 tiles) big, and only 16x16 pixels (2x2 tiles) are visible, leaving the rest to be offscreen. We will also use a 6x6 tile map on this background, where tiles are filled with a simple algorithm Element = Col + (Row * 6). With Layer position at (8x8), the background would look like this, with the mid-section as the visible area...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">-------------
<br/>
| 0  1  2  3|
<br/>
|   -----   |
<br/>
| 6| 7  8| 9|
<br/>
|  |     |  |
<br/>
|12|13 14|15|
<br/>
|   -----   |
<br/>
|18 19 20 21|
<br/>
-------------
<br/>
</td> </tr></table><span class="postbody">If you were to scroll the layer 8 pixels to the right from point (8x8), you'd see the areas to the right in these 2 interpretations.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">GBA Interpretation    Our Interpretation
<br/>
-------------         -------------
<br/>
| 0  1  2  3|         | 1  2  3  0|
<br/>
|      -----|         |   -----   |
<br/>
| 6  7| 8  9|         | 7| 8  9| 6|
<br/>
|     |     |         |  |     |  |
<br/>
|12 13|14 15|         |13|14 15|12|
<br/>
|      -----|         |   -----   |
<br/>
|18 19 20 21|         |19 20 21 18|
<br/>
-------------         -------------
<br/>
</td> </tr></table><span class="postbody">Now, after looking at the 2 interpretations, you can see if we were to scroll more than the 8 pixels, you'd begin to see what was on the left side appear on the right side, yet we'd want to see what was meant to be the next column of tiles. How do we fix this? Simple, just update the next column with the next column of map tiles. If that column is past the very edge of the background, you would switch over to the other side to update the tiles. Therefore, after the updating, the background in both interpretations would look like these...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">GBA Interpretation    Our Interpretation
<br/>
-------------         -------------
<br/>
| 4  1  2  3|         | 1  2  3  4|
<br/>
|      -----|         |   -----   |
<br/>
|10  7| 8  9|         | 7| 8  9|10|
<br/>
|     |     |         |  |     |  |
<br/>
|16 13|14 15|         |13|14 15|16|
<br/>
|      -----|         |   -----   |
<br/>
|22 19 20 21|         |19 20 21 21|
<br/>
-------------         -------------
<br/>
</td> </tr></table><span class="postbody">After this update, you'd be able to scroll another 8 pixels to the right again. If you want to go more, just go through the steps again. This method can also be used for going left, up, and down also. If you want to scroll more than 8 pixels in a single instance, you'd have to update an additional number of sections depending on how much you scroll. Also once you begin to go past the edge of the actual map, you'd need to wrap-around to the opposite end of the map, and update from there. I'd recommend you store an h/v pixel offset which either increases or decreases by the amount you scroll per frame, depending on which direction you scroll, so that when you go to update, you can see how much to update, and on which sides. Once the update is complete, decrease or increase the h/v pixel offset opposite to how you increased or decreases it before. This will also help if you were to scroll, say 8 pixels one way (or one complete tile requiring an update), then scrolling back the other way.
<br/>
<br/>
I hope this explanation helps, though I may have missed some things. If you don't understand something, I'll try to explain that area if I can.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
