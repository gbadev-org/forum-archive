<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>keyLeft issue - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > keyLeft issue</h2>
<div id="posts">
<div class="post">
    <h4>#53707 - QuantumDoja - Sat Sep 10, 2005 9:20 pm</h4>
    <div class="postbody"><span class="postbody">Im having a problem with moving my sprite just off the screen left, the problem is, i have a sprite 64 by 64, and the sprite doesnt acctually start until 10 pixels in....so i want the sprite to move an extra 10 pixels left when the sprite bounding box hits left edge of the screen....so
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if (keyDown(KEY_LEFT)) {
<br/>
   if (PlayerSprite.x &gt; 501 &amp;&amp; PlayerSprite.x &lt; 511) {
<br/>
                    //sprite should be perfectly alligned left
<br/>
   } else {
<br/>
      PlayerSprite.x--;
<br/>
   }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
the problem is the line "if (PlayerSprite.x &gt; 501 &amp;&amp; PlayerSprite.x &lt; 511) {" - it never evaluates to true, so the else keeps on getting fired.<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53710 - sajiimori - Sat Sep 10, 2005 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Print the value of x each tick so you can see what's happening.  Off the top of my head, maybe x is signed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53711 - Touchstone - Sat Sep 10, 2005 11:11 pm</h4>
    <div class="postbody"><span class="postbody">Edit: Removed my reply. Not only did I misunderstand the question, I managed to formulate my answer completely wrong. :)<br/>_________________<br/>You can't beat our meat</span><span class="gensmall"><br/><br/>Last edited by Touchstone on Sun Sep 11, 2005 12:47 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#53713 - DekuTree64 - Sun Sep 11, 2005 12:19 am</h4>
    <div class="postbody"><span class="postbody">What you want is called a hotspot. It's sort of a reference point for your sprite's position.
<br/>
<br/>
First you'll want to add a couple new variables to your sprite structure for the hotspot x/y. For this case set hotspotX to 10, and hotspotY to 0. 
<br/>
<br/>
Then when you go to position the actual OAM for the sprite, subtract the hotspot offset from the actual position:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">oam.attr1 = ((PlayerSprite.x - PlayerSprite.hotspotX) &amp; 511);
<br/>
oam.attr0 = ((PlayerSprite.y - PlayerSprite.hotspotY) &amp; 255);</td> </tr></table><span class="postbody">
<br/>
<br/>
The idea is to make your PlayerSprite.x and y refer to the hotspot position, rather than the top left corner. That way you can just make sure PlayerSprite.x doesn't go below 0 to get the effect you described.
<br/>
<br/>
You can set the hotspot to anything you want, like where the character's feet are, or on the handle of a sword for easy positioning at a hand. Just make sure you also take the hotspot into account when doing collision detection and stuff.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53730 - tepples - Sun Sep 11, 2005 7:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">You can set the hotspot to anything you want, like where the character's feet are, or on the handle of a sword for easy positioning at a hand.</td> </tr></table><span class="postbody">
<br/>
The hotspot can vary over time, so you may want to associate the hotspot to each cel.
<br/>
<br/>
And you might actually want to associate two hotspots to each sprite cel. If you're familiar with Clickteam products (Klik n Play, The Games Factory, Multimedia Fusion), these are called "hot spot" (used for positioning the sprite itself) and "action point" (generally used for positioning another sprite connected to a sprite).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53744 - QuantumDoja - Sun Sep 11, 2005 12:49 pm</h4>
    <div class="postbody"><span class="postbody">Thanks :-)<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
