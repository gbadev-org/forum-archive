<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>A simple code to make a character jump. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > A simple code to make a character jump.</h2>
<div id="posts">
<div class="post">
    <h4>#67425 - deltree - Tue Jan 17, 2006 11:07 pm</h4>
    <div class="postbody"><span class="postbody">Here's a simple code and very smooth to make a character jump:
<br/>
<br/>
if (Key.isDown(key.CONTROL) &amp;&amp; !jumping) 
<br/>
{ 
<br/>
        jumping=true;
<br/>
	jump=15;
<br/>
}
<br/>
if (jumping)
<br/>
{
<br/>
	character._y -= jump;
<br/>
	jump -= 1.5;
<br/>
	if (jump&lt;-15) jump = -15; //maximum velocity
<br/>
}
<br/>
<br/>
This is actionscript, from flash, it' easy to translate to C. It's simple, it work very well, and doesn't involve complex operation. It make the character jump and fall properly, with the good acceleration feeling.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67825 - Palamon - Fri Jan 20, 2006 6:54 pm</h4>
    <div class="postbody"><span class="postbody">I'm about to implement jumping for the first time (right after I put in the floors and how to detect them) and I was going to take a slightly different approach to jumping.
<br/>
<br/>
You forgot to mention that you must check to see if the character has landed on solid ground.
<br/>
<br/>
Otherwise, you would jump up, the jump would peak, then fall back down, and continue right through the floor and off the bottom of the screen !
<br/>
<br/>
The simplest solution, like for a game where you always jump and fall down to the same y coordinate (no jumping to ledges, just dodging things)
<br/>
is to add a few lines:
<br/>
<br/>
<br/>
if (Key.isDown(key.CONTROL) &amp;&amp; !jumping) 
<br/>
{ 
<br/>
initial_y = character._y;
<br/>
jumping=true; 
<br/>
jump=15; 
<br/>
} 
<br/>
<br/>
<br/>
if (jumping) 
<br/>
{ 
<br/>
character._y -= jump; 
<br/>
jump -= 1.5; 
<br/>
if (jump&lt;-15) jump = -15; //maximum velocity 
<br/>
<br/>
if (character._y =&lt; initial_y)
<br/>
{
<br/>
jumping = false;            //turn off falling
<br/>
character._y = initial_y; //correct so you fall to the exact y as before
<br/>
jump = 0;                     //don't really need since you redefine it when you jump again, but I feel better putting it there
<br/>
}
<br/>
} 
<br/>
<br/>
<br/>
<br/>
<br/>
I was planning on making a floor check function to handle if the character is standing on something or is falling or walked off a cliff. This function will increase the downward velocity up to a maxium, or set y velocity to 0 and place y flushly on the floor when hit.
<br/>
<br/>
In order to make my character jump, all I would have to do is set the y_veloity to a positive number and let the regular Y = Y + Y_velocity formula and falling function handle the rest.
<br/>
<br/>
Jumping graphics would be handled by looking at the sign of the y_velocity variable.
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
it also might be easier to just incorperate a "character._y_velocity" variable into your structure, instead of the global jump variable (which does the same thing)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67923 - tepples - Sat Jan 21, 2006 8:37 am</h4>
    <div class="postbody"><span class="postbody">To get good results in jumping physics, you'll need to use fixed-point arithmetic to hold displacements (x, y) and velocities (what you call the "jump" variable).
<br/>
<br/>
Yes, you'll need to make a "floor check" function. This will involve reading your collision map structure, which your map editor should have generated, under each of your character's feet.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68555 - deltree - Wed Jan 25, 2006 5:58 pm</h4>
    <div class="postbody"><span class="postbody">I didn't mention the collision with the ground, because it depends on the way you want it to work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68582 - Palamon - Wed Jan 25, 2006 9:38 pm</h4>
    <div class="postbody"><span class="postbody">Besides using collision with the ground or a fixed ending jump height like what I discribed earlier,
<br/>
What are some other ways to make it work?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#70940 - deltree - Thu Feb 09, 2006 4:41 pm</h4>
    <div class="postbody"><span class="postbody">the character could enter in collision with a wall, or a roof, or a plateform at a different height, or even another character.that's what I meant.
<br/>
the only thing I wanted to put at light was the code for the global move of the jump. I must add this feature: the smoothiness is far less good on the GBA than the flash version, that's weird.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#70978 - yuriks - Thu Feb 09, 2006 9:13 pm</h4>
    <div class="postbody"><span class="postbody">Maybe because flash has antialiasing? ;)<br/>_________________<br/>---yuriks---</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#70990 - deltree - Thu Feb 09, 2006 9:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yuriks wrote:</b></span></td> </tr> <tr> <td class="quote">Maybe because flash has antialiasing? ;)</td> </tr></table><span class="postbody">
<br/>
actually , i'm not talking about "graphics" smoothness, but <span style="text-decoration: underline">movement</span> smoothness.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#70993 - yuriks - Thu Feb 09, 2006 10:13 pm</h4>
    <div class="postbody"><span class="postbody">And the two can be linked, if the graphics are jerky, so will be the movement.
<br/>
<br/>
The code uses floating point, the gba doesn't do antialiasing.
<br/>
<br/>
Look at the following:
<br/>
<br/>
In the GBA:
<br/>
X is 0, displayed X is 0
<br/>
Add 1.5
<br/>
X is 1.5, displayed X is 1
<br/>
Add 1.5
<br/>
X is 3, displayed X is 3
<br/>
<br/>
<br/>
In Flash:
<br/>
X is 0, displayed X is 0
<br/>
Add 1.5
<br/>
X is 1.5, displayed X is 1, but it is antialiased to 1.5, so it looks smoother.
<br/>
Add 1.5
<br/>
X is 3, displayed X is 3.
<br/>
<br/>
<br/>
As you can see graphics smoothness has everything to do with apparent movement smoothness.
<br/>
<br/>
In the GBA the X coord jumps from 1 to 3, in Flash the transition is smoothed out by antialiasing.<br/>_________________<br/>---yuriks---</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
