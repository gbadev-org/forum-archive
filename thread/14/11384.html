<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Page Flipping and Sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Page Flipping and Sprites</h2>
<div id="posts">
<div class="post">
    <h4>#105384 - strat - Sun Oct 08, 2006 9:43 am</h4>
    <div class="postbody"><span class="postbody">Whulp, here I yam.
<br/>
<br/>
Now, when page flipping in mode 4, how would you get the sprite onto the offscreen buffer?  OAM doesn't seem to have any bits for that, and of course writing pixels directly would defeat the purpose of OAM.
<br/>
<br/>
A couple of page flipping experiments told me the sprite is automatically on the screen buffer no matter what page is flipped.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105405 - gmiller - Sun Oct 08, 2006 2:28 pm</h4>
    <div class="postbody"><span class="postbody">Are you rying to hide the sprite on one buffer and show it on another and are you doing this on a GBA?
<br/>
<br/>
The rest of this is for the GBA, the DS is similar in some ways but not exactly the same.
<br/>
<br/>
Assuming GBA then the sprotes are not associated with a buffer so hiding them is just a global things not a buffer assciated thing.  There are ways to hide sprites that differ based on whether the sprite is rotational/non-rotational or just using the x/y coordinates.
<br/>
<br/>
Since the x coordinate in OAM is 9 bits wide you get a value from 0 to 511.  The y coordinate is OAM is 8 bits wide so the values are 0 to 255.  You can position the sprite off the screen by setting the x/y coordinate out of the Display area of 240x160. The location of the coordinates is the upper left had corner for non-rotational sprites and the center for for rotational.  
<br/>
<br/>
Hopes this helps for GBA, if you wanted DS some of this might apply but I am not that familar with the DS flavor of this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105425 - poslundc - Sun Oct 08, 2006 5:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>strat wrote:</b></span></td> </tr> <tr> <td class="quote">A couple of page flipping experiments told me the sprite is automatically on the screen buffer no matter what page is flipped.</td> </tr></table><span class="postbody">
<br/>
<br/>
As gmiller said, sprites are on a different plane than backgrounds. If you choose to use a double-buffered mode for your backgrounds, that doesn't affect sprites.
<br/>
<br/>
For sprites, you just need to make sure to make changes to them during the VBlank period at the end of every draw cycle, so that you don't get any tearing or other artifacts by making changes while the screen is updating.
<br/>
<br/>
To turn a sprite entry off, set its "double" flag (bit 9 of attribute 0) and clear its "rotation/scale" flag (bit 8 of attribute 0). This is the "official" way to mark an OAM entry as unused.
<br/>
<br/>
(Putting it offscreen works, but if it's done horizontally instead of vertically it will hurt the number of sprite rendering cycles you have on the scanlines it occupies, and if it's done vertically it won't work for large sprites.)
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105499 - tepples - Mon Oct 09, 2006 12:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">To turn a sprite entry off, set its "double" flag (bit 9 of attribute 0) and clear its "rotation/scale" flag (bit 8 of attribute 0). This is the "official" way to mark an OAM entry as unused.</td> </tr></table><span class="postbody">
<br/>
Translation: just set the attribute 0 to a value of 512 (0x0200).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105510 - poslundc - Mon Oct 09, 2006 2:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Translation: just set the attribute 0 to a value of 512 (0x0200).</td> </tr></table><span class="postbody">
<br/>
<br/>
Er, yeah. :D
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105660 - thegamefreak0134 - Tue Oct 10, 2006 5:34 pm</h4>
    <div class="postbody"><span class="postbody">Well, wouldnt he walt to actually preserve the rest of the attribute, in which case he would need to first mask out that bit and <span style="font-style: italic">or</span> 512 to it? Perhaps not though.
<br/>
<br/>
On your thought, you would simply need to keep a second OAM array to store your sprite info, assuming you want different screens on the different buffers. Then, simply copy the OAM array you are going to use for the buffer you want to display. The GBA cant directly draw sprites to the buffers that I am aware of, it draws them as it draws the actual screen, so you must tell it what to do every frame. 
<br/>
<br/>
If you want to actually use them as a buffer, you shouldnt really need to worry about the sprites untill you are ready to flip anyway. Your question leaves a lot to be asked. Could you clarify a little?
<br/>
<br/>
-gamefreak<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105751 - strat - Wed Oct 11, 2006 6:38 pm</h4>
    <div class="postbody"><span class="postbody">Basically, a moving sprite should look as clear as when it's still.  But the sprites in my program blur so I'm trying to figure out why that is.  Last night though, after playing around with the VBA settings I realized part of it is the emulator.  Now I understand why you need to test on real hardware.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105782 - thegamefreak0134 - Wed Oct 11, 2006 9:51 pm</h4>
    <div class="postbody"><span class="postbody">If you test with the screen at x2 or x3 (how you can test at x1 is beyond me) then you should enable simple2x (filter options), which forces the screen to look all pixely regardless of what the windows API wants it to look like. The normal setting blurs based on a windows setting, and that tends to vary from computer to computer in my experience.<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105787 - tepples - Wed Oct 11, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>strat wrote:</b></span></td> </tr> <tr> <td class="quote">Basically, a moving sprite should look as clear as when it's still.  But the sprites in my program blur so I'm trying to figure out why that is.  Last night though, after playing around with the VBA settings I realized part of it is the emulator.  Now I understand why you need to test on real hardware.</td> </tr></table><span class="postbody">
<br/>
Game Boy Player blurs things too on a composite monitor, and so does a real GBA when things are in motion.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
