<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Artifact in top left corner - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Artifact in top left corner</h2>
<div id="posts">
<div class="post">
    <h4>#73883 - CyberSlag5k - Tue Feb 28, 2006 7:29 pm</h4>
    <div class="postbody"><span class="postbody">Supposedly if you don't set the positions of all 128 sprites, you get this little artifact in the top left corner. I do exactly that, however:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void initializeSprites()
<br/>
{
<br/>
   for(u16 i = 0; i &lt; 128; i++)
<br/>
   {
<br/>
      sprites[i].attribute0 = 160;
<br/>
      sprites[i].attribute1 = 240;
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
and I still get the little guy up there. That function is called before I really do anything with sprites:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int main()
<br/>
{
<br/>
   SetMode(MODE_1 | OBJ_ENABLE | OBJ_MAP_1D);
<br/>
   s16 x = 100;
<br/>
   s16 y = 40;
<br/>
   
<br/>
   initializeSprites();
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
So I think I've met that little requirement. The rest of my code is pretty simple. I'll post it if necessary, but it lines up almost exactly with code from jbajunkie and dovoto's tutorials.
<br/>
<br/>
Any ideas on what else can cause the little artifact up there?<br/>_________________<br/><span style="font-style: italic">When you find yourself in the company of a halfling and an ill-tempered Dragon, remember, you do not have to outrun the Dragon... </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#73896 - Quirky - Tue Feb 28, 2006 8:35 pm</h4>
    <div class="postbody"><span class="postbody">Do you copy your sprites array to OAM (sprite video ram) later? Also, the best way to disable sprites is to set the sprite double size flag without the rotation flag in attribute 0.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#73897 - CyberSlag5k - Tue Feb 28, 2006 8:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quirky wrote:</b></span></td> </tr> <tr> <td class="quote">Do you copy your sprites array to OAM (sprite video ram) later?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yup.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Also, the best way to disable sprites is to set the sprite double size flag without the rotation flag in attribute 0.</td> </tr></table><span class="postbody">
<br/>
<br/>
Not entirely sure I understand that, but I believe Dovoto's day 3 can elaborate.
<br/>
<br/>
THanks, Quirky!<br/>_________________<br/><span style="font-style: italic">When you find yourself in the company of a halfling and an ill-tempered Dragon, remember, you do not have to outrun the Dragon... </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#73952 - nmain - Wed Mar 01, 2006 3:06 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quirky wrote:</b></span></td> </tr> <tr> <td class="quote">Do you copy your sprites array to OAM (sprite video ram) later? Also, the best way to disable sprites is to set the sprite double size flag without the rotation flag in attribute 0.</td> </tr></table><span class="postbody">
<br/>
<br/>
I've heard that many times and still haven't gotten a straight answer as to why it is in any way "better" than moving them to y=160.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#73957 - tepples - Wed Mar 01, 2006 3:24 am</h4>
    <div class="postbody"><span class="postbody">For one thing, sprites that are 64 pixels tall and double-size might wrap around to the top. For another, some methods of sprite allocation might want to distinguish between "not allocated" and "offscreen" (attribute 0 == 512 means deallocated).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#73964 - CyberSlag5k - Wed Mar 01, 2006 4:28 am</h4>
    <div class="postbody"><span class="postbody">AHh, that's much nicer. I didn't know that. Thanks, Tepples :).<br/>_________________<br/><span style="font-style: italic">When you find yourself in the company of a halfling and an ill-tempered Dragon, remember, you do not have to outrun the Dragon... </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74126 - nmain - Thu Mar 02, 2006 5:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">For one thing, sprites that are 64 pixels tall and double-size might wrap around to the top. For another, some methods of sprite allocation might want to distinguish between "not allocated" and "offscreen" (attribute 0 == 512 means deallocated).</td> </tr></table><span class="postbody">
<br/>
<br/>
Then you make it not 64 pixel tall double size?  A single 16 bit write to attr0 will do that.  Of course, a single 16 bit write to attr 0 can set y = 160, turn off affine, and turn on doublesize at the same time, for an ultimate hidden sprite ^__^.  Still really can't see what makes one method of hiding any better than another.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74499 - Ultima2876 - Sun Mar 05, 2006 1:58 pm</h4>
    <div class="postbody"><span class="postbody">As with everything, it depends how you do it. If you want to take advantage of tepples' second point, it makes sense to set the DOUBLE SIZE thing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77342 - ion - Thu Mar 30, 2006 2:11 pm</h4>
    <div class="postbody"><span class="postbody">HI all,
<br/>
<br/>
Want to reopen this thread as I'm having the same trouble.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void initialise_sprites(void)
<br/>
{
<br/>
   int ii;
<br/>
   
<br/>
   for(ii = 0; ii &lt; 128; ii++)
<br/>
   {
<br/>
      oam_buffer[ii].attribute0 = (160 | OAM_HIDE);
<br/>
      oam_buffer[ii].attribute1 = 240;
<br/>
   }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
So basically I make this call first, then update_oam() function.  This is all called before anything else.  I still seem to be getting artifacts in the top left corner of the screen.  The artifact is actually part of oam_entry[1] i.e. second.  this is odd.. can anyone enlighten me as to why this is still occuring.
<br/>
<br/>
ION</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77345 - ion - Thu Mar 30, 2006 3:07 pm</h4>
    <div class="postbody"><span class="postbody">ok ok so I found the problem.. my update oam function was coded incorrectly.. here's the final and it works...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
static inline void update_oam()
<br/>
{
<br/>
   int ii;
<br/>
   
<br/>
   for(ii = 0; ii &lt; 128 * sizeof(OAMEntry) / 4 ; ii++)
<br/>
   {
<br/>
      ((u32*)OAMMemory)[ii] = ((u32*)oam_buffer)[ii];
<br/>
   }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I was copying wrong sized chunks... oops...
<br/>
<br/>
ION</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
