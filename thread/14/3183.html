<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>check out my game so far - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > check out my game so far</h2>
<div id="posts">
<div class="post">
    <h4>#18840 - s00p - Wed Apr 07, 2004 12:00 am</h4>
    <div class="postbody"><span class="postbody">oo it's playable now :D
<br/>
You don't advance to the next level yet, but you can trap the aliens in boxes and die if they hit your line or you go back over it.
<br/>
updated: <a href="http://www.skateflint.com/fillit.gba" target="_blank">http://www.skateflint.com/fillit.gba</a>
<br/>
<br/>
Original java game I'm trying to recreate:
<br/>
<a href="http://www.skateflint.com/fill-it.html" target="_blank">http://www.skateflint.com/fill-it.html</a>
<br/>
<br/>
Done:
<br/>
Player sprite that follows your cursor and draws lines
<br/>
Randomly generate alien sprites
<br/>
Collision of the aliens with the pink line you draw
<br/>
Collision when you hit your pink line
<br/>
Die script
<br/>
Display lives / level onscreen.
<br/>
Aliens bounce off any blue lines (corners are buggy)
<br/>
To do:
<br/>
Fix palettes (aliens use the ship palette)
<br/>
Fill boxes and display percent filled onscreen.</span><span class="gensmall"><br/><br/>Last edited by s00p on Thu Apr 08, 2004 11:50 pm; edited 9 times in total</span></div>    
</div>
<div class="post">
    <h4>#18844 - dagamer34 - Wed Apr 07, 2004 12:33 am</h4>
    <div class="postbody"><span class="postbody">That's really nice. Keep up the good work.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18866 - Lupin - Wed Apr 07, 2004 12:32 pm</h4>
    <div class="postbody"><span class="postbody">Good work! I played it five minutes with speed toggle activated and that's the result: <a href="http://home.arcor.de/lupin003/blah.gif" target="_blank">http://home.arcor.de/lupin003/blah.gif</a>
<br/>
<br/>
You seem to move the cursor by 6 pixels :)
<br/>
<br/>
For collision detection i would just check the pixels on the buffer.<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18890 - s00p - Wed Apr 07, 2004 7:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">Good work! I played it five minutes with speed toggle activated and that's the result: <a href="http://home.arcor.de/lupin003/blah.gif" target="_blank">http://home.arcor.de/lupin003/blah.gif</a>
<br/>
<br/>
You seem to move the cursor by 6 pixels :)
<br/>
<br/>
For collision detection i would just check the pixels on the buffer.</td> </tr></table><span class="postbody">
<br/>
<br/>
yeah I did that too, on normal speed. I set it to move the cursor by that much so I can split the board into squares, the plan was/is to make it easier to do collision by splitting the playing field into a grid. Checking the pixels in the buffer would be useful, so I could detect whether an alien touched the line, (any pink pixels only) can you go into more detail on how I would do that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18891 - Lupin - Wed Apr 07, 2004 8:12 pm</h4>
    <div class="postbody"><span class="postbody">Well, it's kinda easy. You just have to check the current pixel the monster is at and check if it is pink (but you can only move your monsters by 1 because you'd skip pixels if you move more). The tricky part is to change the velocity of your monster but you already do that on the boarder of your game-map (you just have to find out if the pixel you colided with is part of an horizontal or vertical wall).
<br/>
<br/>
I have tried to write the same thing now, but i am currently thinking about how to fill the areas...<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18894 - s00p - Wed Apr 07, 2004 8:25 pm</h4>
    <div class="postbody"><span class="postbody">Actually:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (vbl_count &gt; 3){
<br/>
query_buttons();
<br/>
vbl_count = 0;
<br/>
}
<br/>
<br/>
<br/>
void query_buttons()
<br/>
{
<br/>
int c;
<br/>
for(c=0;c&lt;6;c++){</td> </tr></table><span class="postbody">
<br/>
<br/>
it moves the cursor 6 spaces every 3 vbl's, so having the aliens skip over them is not an issue because I would use the same method for those.
<br/>
<br/>
ok I have collision working with the aliens.. so easy!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18897 - s00p - Wed Apr 07, 2004 9:22 pm</h4>
    <div class="postbody"><span class="postbody">It would be pretty easy to make the boxes if I could check the color of every pixel quickly.
<br/>
<br/>
ie </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (videoBuffer[posy * 240 + posx] == blue){
<br/>
for(x=0;x&lt;240;x++){
<br/>
for(y=0;y&lt;160;y++){
<br/>
if (videoBuffer[y * 240 + x] == pink){
<br/>
videoBuffer[y * 240 + x] = blue;
<br/>
}
<br/>
}
<br/>
}
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
but this is way too slow, so that wouldn't work.
<br/>
<br/>
ship animation is done.
<br/>
Collision with your own line is done.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18902 - dagamer34 - Wed Apr 07, 2004 11:08 pm</h4>
    <div class="postbody"><span class="postbody">One thing, you are able to move the cursor before you officially start the game. Try moving it around without pressing start. Or is that supposed to happen?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18904 - s00p - Wed Apr 07, 2004 11:21 pm</h4>
    <div class="postbody"><span class="postbody">hah, I knew about that but I forgot to fix it. It's fixed now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18975 - tepples - Fri Apr 09, 2004 12:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>s00p wrote:</b></span></td> </tr> <tr> <td class="quote">Collision when you hit your pink line</td> </tr></table><span class="postbody">
<br/>
The way that's implemented in the Java applet is annoying. Play Taito's original <span style="font-style: italic">Qix</span> for Game Boy to see how to do it right: 1. Ignore presses that directly oppose the cursor's current direction (the Java applet has killed me several times when I've held left then quickly pushed up right, ignoring the up press), and 2. Kill cursor only when it has started a spiral. In addition, <span style="font-style: italic">Qix</span> seems to move the enemy a bit slower when it's inside a smaller box.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18976 - s00p - Fri Apr 09, 2004 2:21 am</h4>
    <div class="postbody"><span class="postbody">Ok I fixed that. It annoyed me too!
<br/>
<br/>
Can anyone think of a good way to fill in the boxes? I have it log your path as you draw it, so maybe I could use values from that and then loop it to fll in each pixel from there to the path value on the other side, or is there a better way? Also, how do I load two seperate palettes (or combine them into one)? Because the aliens are using the ship's palette right now..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18984 - tepples - Fri Apr 09, 2004 4:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>s00p wrote:</b></span></td> </tr> <tr> <td class="quote">Can anyone think of a good way to fill in the boxes? I have it log your path as you draw it</td> </tr></table><span class="postbody">
<br/>
In Qix and its clones, a polygon is guaranteed not complex because you can't run into your own line. So you need only consider scan-converting potentially concave polygons. Find the boundaries of the potentially concave polygon that the path makes with the surroundings. In general, you set a pixel at (x, y) iff a line from (-Inf, y) to (x, y) crosses an odd number of edges. Sort edges by starting Y location. Scan from left to right across the polygon; if you hit a vertical edge, start drawing, and if you hit another vertical edge, stop drawing.
<br/>
<br/>
<a class="postlink" href="http://www.cs.rit.edu/~icss571/filling/" target="_blank">Here's an explanation of polygon filling</a>.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Also, how do I load two seperate palettes (or combine them into one)? Because the aliens are using the ship's palette right now..</td> </tr></table><span class="postbody">
<br/>
First of all, you should be using 16-color graphics. Then to load the palettes, just load them at different indices into palette memory (e.g. PALRAM[256..271] and PALRAM[272..287], and set the colors in each sprite's attribute 2.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18991 - Lupin - Fri Apr 09, 2004 2:15 pm</h4>
    <div class="postbody"><span class="postbody">i tried to do as you said, but it's more than just scanning each scanline. Look at my 1337 illustration of my problem: <a href="http://home.arcor.de/lupin003/blah.gif" target="_blank">http://home.arcor.de/lupin003/blah.gif</a>
<br/>
<br/>
As you see this is badly drawn, but you also see that the blue lines represent the very left extent on the X axis (i have an array that saves the extent of my line to left/right on each scanline). But the extent to the left is in wrong place because it should be at the boarder of the image. The light blue line represents the extent how it should be.
<br/>
For this case i could just start scanning each scanline from x=0, but i wouldn't take the bottom part of the polygon into account.
<br/>
<br/>
I hope you got what i mean... it's driving me nuts that i am not able to implement something that simple! :/<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18992 - tepples - Fri Apr 09, 2004 2:51 pm</h4>
    <div class="postbody"><span class="postbody">Right. You have to determine a second path from the start of the drawn path to the end of the drawn path along the edge of the player's claim or the edge of the screen. Thus, most of your black line would be within this second path. To do this, you may have to log the border of the player's claim as a concave polygon as well.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18993 - s00p - Fri Apr 09, 2004 3:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">First of all, you should be using 16-color graphics. Then to load the palettes, just load them at different indices into palette memory (e.g. PALRAM[256..271] and PALRAM[272..287], and set the colors in each sprite's attribute 2.</td> </tr></table><span class="postbody">
<br/>
<br/>
Can you elaberate? I don't know how to use the sprite attributes, or set them up.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18994 - tepples - Fri Apr 09, 2004 3:40 pm</h4>
    <div class="postbody"><span class="postbody">Please read the following sections of the CowBite spec:
<br/>
<a href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Palette" target="_blank">http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Palette</a>
<br/>
<a href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Attribute%202" target="_blank">http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Attribute%202</a>
<br/>
and then tell us what you fail to understand.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18995 - s00p - Fri Apr 09, 2004 3:54 pm</h4>
    <div class="postbody"><span class="postbody">I don't know how you set it up so you can do sprite.attribute2 = ?. Is there a header I should get that has the definitions or whatever?
<br/>
<br/>
<a href="http://www.thepernproject.com/English/tutorial_3.html" target="_blank">http://www.thepernproject.com/English/tutorial_3.html</a> reading..
<br/>
<br/>
meh, I got it to work but didn't use the attribute value. Just combined the palettes and that worked.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18996 - tepples - Fri Apr 09, 2004 4:11 pm</h4>
    <div class="postbody"><span class="postbody">How are you setting the tile number for the existing sprites? The palette number is the upper four bits of that.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18997 - s00p - Fri Apr 09, 2004 5:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define ANIM_UP 0
<br/>
#define ANIM_RIGHT 1
<br/>
#define ANIM_DOWN 2
<br/>
#define ANIM_LEFT 3
<br/>
<br/>
---
<br/>
<br/>
ham_LoadObjPal((void*)master_Palette, 256);
<br/>
ship = ham_CreateObj((void*)ship_Bitmap,OBJ_SIZE_8X8,OBJ_MODE_NORMAL,1,0,0,0,0,0,0,116,154);
<br/>
ham_CopyObjToOAM();
<br/>
<br/>
---
<br/>
<br/>
ham_UpdateObjGfx(ship,(void*)&amp;ship_Bitmap[64*dir_ship]);
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19016 - tepples - Sat Apr 10, 2004 2:49 am</h4>
    <div class="postbody"><span class="postbody">I don't use HAMlib. You'll need to look at the HAMlib manual to learn how to set a sprite's palette.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19018 - s00p - Sat Apr 10, 2004 3:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I don't use HAMlib. You'll need to look at the HAMlib manual to learn how to set a sprite's palette.</td> </tr></table><span class="postbody">
<br/>
<br/>
I said I got it to work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19110 - Lupin - Sun Apr 11, 2004 1:55 pm</h4>
    <div class="postbody"><span class="postbody">the filling is impossible... i tried a lot, but it simply doesn't work.<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19140 - s00p - Sun Apr 11, 2004 10:40 pm</h4>
    <div class="postbody"><span class="postbody">Well what did you try? If I spent a little bit more time on this I'd have it filling simple boxes, so I'm sure it's possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19148 - Lupin - Mon Apr 12, 2004 1:49 am</h4>
    <div class="postbody"><span class="postbody">well, it is possible, just not by using the scanline method. You have to use a floodfill algo on a low resolution version of the map (you can call this something like a BSP map). This way you will also be able to check on what side the enemy is or what side is larger. I am going to implement it like this, i just need to find an fast floodfill algo :/
<br/>
<br/>
The problem with the scanline method is that...
<br/>
<br/>
-you can not clearly specify the actual parts of your rectangular shape because the walls are a part of it, but not all walls (therefor you have to render it in 2 parts as tepples answered to my question)
<br/>
<br/>
-you have to take care of vertical lines (only horizontal lines can make drawing stop/start)
<br/>
<br/>
Actually it sounds quite simple but i was not able to get it work :(<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19152 - s00p - Mon Apr 12, 2004 4:14 am</h4>
    <div class="postbody"><span class="postbody">source
<br/>
<a href="http://www.skateflint.com/fillit.zip" target="_blank">http://www.skateflint.com/fillit.zip</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24794 - gotenks06 - Wed Aug 11, 2004 5:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>s00p wrote:</b></span></td> </tr> <tr> <td class="quote">I don't know how you set it up so you can do sprite.attribute2 = ?. Is there a header I should get that has the definitions or whatever?
<br/>
<br/>
<a href="http://www.thepernproject.com/English/tutorial_3.html" target="_blank">http://www.thepernproject.com/English/tutorial_3.html</a> reading..
<br/>
<br/>
meh, I got it to work but didn't use the attribute value. Just combined the palettes and that worked.</td> </tr></table><span class="postbody">
<br/>
Make sure to #include "sprite.h" and use the OAMEntry struct.  After you have set it up, DMA transfer it to OAM with count set to 16 | DMA_ENABLE.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
