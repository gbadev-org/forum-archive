<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Desperate Background Help!!!!!!!! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Desperate Background Help!!!!!!!!</h2>
<div id="posts">
<div class="post">
    <h4>#107116 - JJGamer123456 - Thu Oct 26, 2006 8:21 pm</h4>
    <div class="postbody"><span class="postbody">I JUST DON'T GET IT!!!!!!!!!!!!!
<br/>
Every time I put an image in pcx2sprite, it will give me a header with 0xXXXX with 4 numbers, but when I make a map with a map editor like GBA Map Editor, Mappy, or the map editor from HAM, I get a header with 0xXXX with 3 numbers or 0xXX with 2 numbers. It looks different. And when I try to look at it on an emulater, the map is right ,but the tile place ment is all wrong. I don't know if it was me or if it's the map editors, but I need one of you people to show me how you make Backgroud maps. If you can teach me through e-mail or this messageboard, that would be great, though I like to talk using chatrooms. In short, I need a tutor or teacher who can teach me the way of making backgrounds. HELP!!!!!!!!!!!   [/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107230 - tepples - Fri Oct 27, 2006 9:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>JJGamer123456 wrote:</b></span></td> </tr> <tr> <td class="quote">I JUST DON'T GET IT!!!!!!!!!!!!!
<br/>
Every time I put an image in pcx2sprite, it will give me a header with 0xXXXX with 4 numbers, but when I make a map with a map editor like GBA Map Editor, Mappy, or the map editor from HAM, I get a header with 0xXXX with 3 numbers or 0xXX with 2 numbers. It looks different. And when I try to look at it on an emulater, the map is right ,but the tile place ment is all wrong.</td> </tr></table><span class="postbody">
<br/>
What do you mean by "all wrong"? Please find web space, post pictures of the incorrect result to your web space, and link them here. Otherwise, it is likely that nobody knows how to help you.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107235 - JJGamer123456 - Fri Oct 27, 2006 10:13 pm</h4>
    <div class="postbody"><span class="postbody">how do you make a web space</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107242 - tepples - Fri Oct 27, 2006 11:05 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://imageshack.us/" target="_blank">http://imageshack.us/</a> provides web space for images<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107923 - JJGamer123456 - Fri Nov 03, 2006 5:22 am</h4>
    <div class="postbody"><span class="postbody">Here is the map I want to make:
<br/>
<br/>
<a href="http://img154.imageshack.us/img154/6751/landscrnqt6.png" target="_blank">http://img154.imageshack.us/img154/6751/landscrnqt6.png</a>
<br/>
<br/>
Here is what I have now (I take this image in Virtual boy):
<br/>
<br/>
<a href="http://img246.imageshack.us/img246/544/maptk5.png" target="_blank">http://img246.imageshack.us/img246/544/maptk5.png</a>
<br/>
<br/>
Here is the Tileset picture:
<br/>
<br/>
<a href="http://img99.imageshack.us/img99/8342/landep5.png" target="_blank">http://img99.imageshack.us/img99/8342/landep5.png</a>
<br/>
<br/>
Here is the main code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">//////////////////////////////////////////////////////////////////////////
<br/>
// File:    ch6a.cpp                                               //
<br/>
// Description: A program that displays a 128x128 background map   //
<br/>
// Author:   gbajunkie                     //
<br/>
// Date:    24th April 2002                                         //
<br/>
//////////////////////////////////////////////////////////////////////////
<br/>
#include&lt;math.h&gt;    //sign and cos stuff
<br/>
#include"gba.h"         //GBA register definitions
<br/>
#include"dispcnt.h"     //REG_DISPCNT register #defines
<br/>
#include"keypad.h"      //button registers
<br/>
#include"bg.h"          //background definitions
<br/>
<br/>
//my graphics data produced by pcx2sprite program
<br/>
#include"tiles.h"
<br/>
<br/>
//data produced by map editor
<br/>
#include"Land2.h"
<br/>
<br/>
<br/>
<br/>
//Rotation variables (don't worry about them here) done in later chapter
<br/>
/**********************************************************************************/
<br/>
FIXED angle = 0;
<br/>
FIXED zoom = 1&lt;&lt;8;  //zoom is a fixed point number
<br/>
<br/>
FIXED SIN[360];       //Look-Up Tabless for sign and cosign
<br/>
FIXED COS[360];
<br/>
<br/>
char RotIndexCounter = 0;  //global to keep track of rotation indexes used
<br/>
/**********************************************************************************/
<br/>
<br/>
//declare an instance of the background structure
<br/>
Bg bg3;
<br/>
<br/>
//wait for the screen to stop drawing
<br/>
void WaitForVsync()
<br/>
{
<br/>
   while((volatile u16)REG_VCOUNT != 160){}
<br/>
}
<br/>
<br/>
///Test for key presses
<br/>
void GetInput()
<br/>
{
<br/>
   if(!(*KEYS &amp; KEY_UP))
<br/>
   {
<br/>
      bg3.y_scroll++;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_DOWN))
<br/>
   {
<br/>
      bg3.y_scroll--;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_LEFT))
<br/>
   {
<br/>
      bg3.x_scroll++;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_RIGHT))
<br/>
   {
<br/>
      bg3.x_scroll--;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_L))
<br/>
   {
<br/>
       angle--;
<br/>
      if(angle&lt;0)
<br/>
         angle = 359;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_R))
<br/>
   {
<br/>
       angle++;
<br/>
      if(angle &gt; 359)
<br/>
         angle = 0;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_A))
<br/>
   {
<br/>
       zoom--;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_B))
<br/>
   {
<br/>
       zoom++;
<br/>
   }
<br/>
}
<br/>
<br/>
///main entry point from the boot.asm startup file
<br/>
int main()
<br/>
{
<br/>
   int index = 0;  //generic loop variables
<br/>
   u16 loop;
<br/>
   u16* temp;      //temporary storage pointer
<br/>
<br/>
   //compute my Look up tables (Rotation stuff again)
<br/>
   for(loop = 0; loop &lt; 360; loop++)
<br/>
   {
<br/>
      SIN[loop] = (FIXED)(sin(RADIAN(loop)) * 256);  //sin and cos are computed and cast to fixed                     //fixed
<br/>
      COS[loop] = (FIXED)(cos(RADIAN(loop)) * 256);
<br/>
   }
<br/>
<br/>
   //set mode 2 and enable sprites and 1d mapping
<br/>
   SetMode(MODE_1 | OBJ_ENABLE | OBJ_MAP_1D);
<br/>
<br/>
   //Let us set up the backgroud two structure and enable the background
<br/>
<br/>
   bg3.number = 3;            //background number 0-3
<br/>
   bg3.charBaseBlock = 0;                  //tile data position (right at the start of the available memory on 16Kb boundary)
<br/>
   bg3.screenBaseBlock = 28;      //map data position on 2Kb boundary
<br/>
   bg3.colorMode = BG_COLOR_256;           //256-colour background
<br/>
   bg3.size = ROTBG_SIZE_256x256;          //size of map
<br/>
   bg3.mosaic = 0;                         //not enabled
<br/>
   bg3.x_scroll = 120;         //scrolling variables
<br/>
   bg3.y_scroll = 80;
<br/>
<br/>
   //Point to correct tile and map data, update the Background and Display registers accordingly
<br/>
        EnableBackground(&amp;bg3);
<br/>
<br/>
<br/>
<br/>
   for(loop = 0; loop &lt; 256; loop++)
<br/>
      BGPaletteMem[loop] = tilesPalette[loop];     //load the background palette into memory
<br/>
<br/>
   for(loop = 0; loop &lt; tiles_WIDTH * tiles_HEIGHT /2; loop++)  //load tile image data
<br/>
      bg3.tileData[loop] = tilesData[loop];
<br/>
<br/>
   //load the map image data
<br/>
   temp = (u16*)Land2Data;
<br/>
   for(loop = 0; loop &lt; 32*32/2; loop++) //16x16 tiles /2 because 16 bit copy
<br/>
      bg3.mapData[loop] = temp[loop];
<br/>
<br/>
   //Main Game loop
<br/>
   while(1)
<br/>
   {
<br/>
      GetInput();    //check for input
<br/>
      RotateBackground(&amp;bg3,angle,119,79,zoom);    //rotates background if required (don't worry about this)
<br/>
        WaitForVsync();               //waits for the screen to stop drawing
<br/>
      UpdateBackground(&amp;bg3); //make sure registers are updated if anything changes e.g. scrolling
<br/>
   }
<br/>
   return(0);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
The tile data and pallet:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/**********************************************\
<br/>
*       tiles.h                                   *
<br/>
*          by dovotos pcx-&gt;gba program         *
<br/>
/**********************************************/
<br/>
#define  tiles_WIDTH   480
<br/>
#define  tiles_HEIGHT  256
<br/>
<br/>
<br/>
const u16 tilesData[] = {
<br/>
                    0xFBF9, 0xFBFB, 0xFBF8, 0xF8FB, 0xFBFB, 0xF8F8, 0xFBF9, 0xC8F8, 0xF8FB, 0xC8C8,
<br/>
                    0xF9C8, 0xC8C8, 0xC8FB, 0xCBC8, 0xC8CA, 0xEDCB, 0xC8F9, 0xE9ED, 0xE9ED, 0xE9E9,
<br/>
                    0xCAFB, 0xE9ED, 0xE9E9, 0xE9E9, 0xF9FB, 0xEBED, 0xE9E9, 0xE9E9, 0xF9F9, 0xE9E9,
<br/>
                    0xEBEB, 0xEBEB, 0xFBF8, 0xF9F9, 0xFBFB, 0xF9F9, 0xF9C8, 0xC8C8, 0xF8F9, 0xFBFB,
<br/>
                    0xC8CB, 0xC8CA, 0xC8C8, 0xFBF8, 0xE9ED, 0xEDED, 0xC8CA, 0xFBC8, 0xEDED, 0xEBE9,
<br/>
                    0xEDE9, 0xFBC8, 0xE9E9, 0xEBE9, 0xEDE9, 0xF9CA, 0xEBE9, 0xEBEB, 0xEDEB, 0xFBF9,
<br/>
                    0xE9EB, 0xEBE9, 0xEBED, 0xFBFB, 0xFBF9, 0xFBFB, 0xFBF8, 0xF8FB, 0xFBFB, 0xF8F8,
<br/>
//...................................................................
<br/>
0x0C43, 0x0000, 0x0000, 0x00A1, 0x0101, 0x0141, 0x0181, 0x01A2, 0x01E4, 0x0205,
<br/>
                    0x0646, 0x0668, 0x06AA, 0x0ACB, 0x0B0D, 0x459F,};</td> </tr></table><span class="postbody">
<br/>
<br/>
And here is the map code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">//======================================================================
<br/>
//   Land2, a 32x32 regular map, in map-block layout
<br/>
//
<br/>
//   Exported by Cearn's Mirach v0.3a
<br/>
//   (comments, kudos, flames to "daytshen@hotmail.com")
<br/>
//======================================================================
<br/>
<br/>
#include "Land2.h"
<br/>
<br/>
const int Land2Width= 32;
<br/>
const int Land2Height= 32;
<br/>
const int Land2Size= 512;
<br/>
<br/>
const unsigned int Land2Data[512]= 
<br/>
{
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01870186,0x01890188,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01c301c2,0x01c501c4,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01ff01fe,0x02010200,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x023b023a,0x023d023c,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,
<br/>
   0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1,0x01b101b1
<br/>
};
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
*btw the is a header that talks about the functions
<br/>
<br/>
I hope you can see that the tile data code and the map code is very different.
<br/>
<br/>
Is that enough infomation to help me? If there is something you need, the please respond. How in the world did you learn how to make backgrounds?  what map editors did you use?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107975 - thegamefreak0134 - Fri Nov 03, 2006 6:36 pm</h4>
    <div class="postbody"><span class="postbody">I see your problem. Mainly, you are only copying half of the map in your for loop. Try opening both images you provided (the expected map and the one youre getting) and flipping back and forth between them to see what I mean. You need to double the amount that your map copying routine copies to make this work. 
<br/>
<br/>
Also, it appears that for some reason your tiles are off a bit somewhere. Perhaps (and I cannot remember the addresses of the top of my head so I cannot check the code) you are copying the tileset to the wrong place, or your map is being exported with values starting at one instead of zero, or something to that effect. I can see that you are using Mirach, which is Cearns program, so perhaps you should ask him.
<br/>
<br/>
Dont lose heart, you are doing a lot right, I can see. You just need to work out one or two bugs. Mapping is tricky business, especially with this kind of hardware.
<br/>
<br/>
-gamefreak
<br/>
<br/>
EDIT: I just saw that when you load your map data, you for loop only goes until \"32x32 /2\". Take the /2 out and it should fix your map not loading all the way.<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107992 - JJGamer123456 - Fri Nov 03, 2006 9:27 pm</h4>
    <div class="postbody"><span class="postbody">I think I messed up my entire map.
<br/>
First I try to delete the the /2 on the loop and when I tried to run it on VBA, The whole thing is green(I think it is the grass tile).When I try to copy and paste the code above back to Visual HAM, the same thing happen. Should I try making another map all together?
<br/>
<br/>
And what do you mean about the flipping back and forth and about the tiles being in the wrong place?
<br/>
<br/>
btw the code was from gbajunkie</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108005 - Cearn - Sat Nov 04, 2006 12:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The whole thing is green(I think it is the grass tile).When I try to copy and paste the code above back to Visual HAM, the same thing happen</td> </tr></table><span class="postbody">
<br/>
That's funny, because the whole thing should be magenta. You're using bg 3 in video mode 1. Mode 1 has no bg 3. And even if it had, the map itself is a <a class="postlink" href="http://www.coranac.com/tonc/text/regbg.htm" target="_blank">regular</a> background, while the code was originally intended for an <a class="postlink" href="http://www.coranac.com/tonc/text/affbg.htm" target="_blank">affine</a> bg, which never works well.
<br/>
<br/>
Try this :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;string.h&gt;     // for memcpy
<br/>
<br/>
#include &lt;mydefines.h&gt;
<br/>
<br/>
#include "tiles.h"
<br/>
#include "land2.h"
<br/>
<br/>
#define BG_MOSAIC       0x0040  //!&lt; Enable Mosaic
<br/>
#define _BG_4BPP             0  //!&lt; 4bpp (16 color) bg (no effect on affine bg)
<br/>
#define BG_8BPP         0x0080  //!&lt; 8bpp (256 color) bg (no effect on affine bg)
<br/>
#define BG_WRAP         0x2000  //!&lt; Wrap around edges of affine bgs
<br/>
#define _BG_REG_32x32        0  //!&lt; reg bg, 32x32 (256x256 px)
<br/>
#define BG_REG_64x32    0x4000  //!&lt; reg bg, 64x32 (512x256 px)
<br/>
#define BG_REG_32x64    0x8000  //!&lt; reg bg, 32x64 (256x512 px)
<br/>
#define BG_REG_64x64    0xC000  //!&lt; reg bg, 64x64 (512x512 px)
<br/>
#define _BG_AFF_16x16        0  //!&lt; affine bg, 16x16 (128x128 px)
<br/>
#define BG_AFF_32x32    0x4000  //!&lt; affine bg, 32x32 (256x256 px)
<br/>
#define BG_AFF_64x64    0x8000  //!&lt; affine bg, 64x64 (512x512 px)
<br/>
#define BG_AFF_128x128  0xC000  //!&lt; affine bg, 128x128 (1024x1024 px)
<br/>
<br/>
#define BG_PRIO(n)      ((n)&lt;&lt;0)
<br/>
#define BG_CBB(n)       ((n)&lt;&lt;2)
<br/>
#define BG_SBB(n)       ((n)&lt;&lt;8)
<br/>
<br/>
<br/>
#define CharMem(cbb, chr) ((u16*)(0x06000000+(cbb)*0x4000+(chr)*32))
<br/>
#define ScreenMem(sbb, n) ((u16*)(0x06000000+(sbb)*0x0800+(  n)* 2))
<br/>
<br/>
<br/>
int main()
<br/>
{
<br/>
    // Load palette
<br/>
    memcpy(BGPalettMem, tilesPalette, 256*2);
<br/>
<br/>
    // Load tiles into CBB 0
<br/>
    memcpy(CharMem(0,0), tilesData, tiles_WIDTH * tiles_HEIGHT);
<br/>
<br/>
    // Load map into SBB 31 (Land2Size == number of words, ergo *4)
<br/>
    memcpy(ScreenMem(31,0), Land2Data, Land2Size*4);
<br/>
<br/>
    // set up BG0 for a 8bpp 32x32t map, using using charblock 0 and screenblock 31
<br/>
    REG_BG0CNT= BG_CBB(0) | BG_SBB(31) | BG_8BPP | _BG_REG_32x32;
<br/>
    REG_DISPCNT= MODE_0 | BG0_ENABLE;
<br/>
<br/>
    while(1);
<br/>
    return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
This is essentially all you need to do; the rest of the code you had was just extra for affine bgs, which you're not working with. This should produce a green field with one headstone (the map only has one headstone apparently, not four).
<br/>
<br/>
Two other points:
<br/>
The tile data is too big. 480x256 means 1920 tiles, which is too much to be accessed by any one background. It's actually worse than that, you have 1920 8bpp tiles for 0x1E000 bytes, which fills almost the whole of VRAM. Take out the tiles you don't need first.
<br/>
When trying something new, do not use uniform data, because it makes it impossible to see what is happening. Likewise, do not use too complex data, because it's too hard to read. Easily recognizable (but asymmetric) patterns work best. Always have something on the edges, as that's where things will are likely to go wrong first.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108879 - JJGamer123456 - Sun Nov 12, 2006 5:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">When trying something new, do not use uniform data, because it makes it impossible to see what is happening. Likewise, do not use too complex data, because it's too hard to read. Easily recognizable (but asymmetric) patterns work best. Always have something on the edges, as that's where things will are likely to go wrong first.</td> </tr></table><span class="postbody">
<br/>
<br/>
What does all that mean? And should I use a different map editor,I mean, what map editor did you all used in your games. Should I still use pcx2sprite to convert grapics into tiles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108882 - JJGamer123456 - Sun Nov 12, 2006 5:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">When trying something new, do not use uniform data, because it makes it impossible to see what is happening. Likewise, do not use too complex data, because it's too hard to read. Easily recognizable (but asymmetric) patterns work best. Always have something on the edges, as that's where things will are likely to go wrong first.</td> </tr></table><span class="postbody">
<br/>
<br/>
What does all that mean? And should I use a different map editor,I mean, what map editor did you all used in your games. Should I still use pcx2sprite to convert grapics into tiles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109284 - JJGamer123456 - Thu Nov 16, 2006 9:57 pm</h4>
    <div class="postbody"><span class="postbody">THANK YOU, THANK YOU!
<br/>
Your code really works. 
<br/>
<br/>
You were right about my tileset being to big.  I think that was my problem.
<br/>
<br/>
so thanks.
<br/>
<br/>
I hope we can get together,Cearn , so you can help me with other things.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
