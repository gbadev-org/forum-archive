<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprites and OAMEntry - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Sprites and OAMEntry</h2>
<div id="posts">
<div class="post">
    <h4>#14502 - LOst? - Wed Jan 07, 2004 5:58 pm</h4>
    <div class="postbody"><span class="postbody">I don't know how many sources I've downloaded, everyone gives the same result. You copy all OAMEntry's at a time, and set all X and Y positions to 240+, 160+ just to hide them. Have you ever looked into a commercial game like Mario Advance? Open OAM viewer in VisualBoyAdvance and you will see you're doing wrong :(
<br/>
<br/>
Why do you have to hide your sprites when real commercial games don't need to?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14503 - tepples - Wed Jan 07, 2004 6:07 pm</h4>
    <div class="postbody"><span class="postbody">Real commercial games seem to write 0x0200 (double-size, 1:1 pixel mapping) to a sprite's Y attribute to hide it. The GBA video hardware treats double-size without rot/scale as a request not to process the sprite.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14505 - Miked0801 - Wed Jan 07, 2004 6:18 pm</h4>
    <div class="postbody"><span class="postbody">Which is how the Nintendo doc suggest doing it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14506 - LOst? - Wed Jan 07, 2004 6:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Real commercial games seem to write 0x0200 (double-size, 1:1 pixel mapping) to a sprite's Y attribute to hide it. The GBA video hardware treats double-size without rot/scale as a request not to process the sprite.</td> </tr></table><span class="postbody">
<br/>
<br/>
And why doesn't most of you do that aswell?
<br/>
<br/>
I would die for a open source game that treats things like a commercial game</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14507 - poslundc - Wed Jan 07, 2004 6:38 pm</h4>
    <div class="postbody"><span class="postbody">And now that we know, we can go about doing that! :)
<br/>
<br/>
Not to seem ungrateful, as they were extremely helpful getting started, but it's hard to get through those tutorials without picking up some nasty habits along the way, even if you are an experienced coder.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14508 - DiscoStew - Wed Jan 07, 2004 7:32 pm</h4>
    <div class="postbody"><span class="postbody">This is just my opinion, but I guess the reason why everyone here started doing the +240 +160 to hide a sprite could be because of the hardware sprite rotation/scaling. They figured that they will <span style="font-weight: bold">probably</span> use rotation/scaling, so by doing the +240 +160 would keep the sprite from displaying no matter what happen. If you were using rotation/scaling, you'd have to remove the ROTATION_FLAG from Attribute0 along with adding DOUBLE_SIZE to Attribute1. You'd <span style="font-weight: bold">usually</span> have to call 2 lines of code to do this, but using the +240 +160 can be done with 2 lines of code also. So in this case scenario, doing either one wouldn't make any difference, would it? I understand when not using rotation/scaling that using DOUBLE_SIZE would be more effective.
<br/>
<br/>
Perhaps if you were to make an array overlapping the OAMData memory using u32 to combine attribute0 and attribute1 (much like the array used for rotation/scaling from ThePernProject, perhaps just fix up the current array being used), you could set each unused sprite with one line of code, though using either method could be done this way also.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14510 - tepples - Wed Jan 07, 2004 7:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Real commercial games seem to write 0x0200 (double-size, 1:1 pixel mapping) to a sprite's Y attribute to hide it.</td> </tr></table><span class="postbody">
<br/>
And why doesn't most of you do that aswell?</span></td> </tr></table><span class="postbody">
<br/>
Probably because some of us have built up habits on older systems whose sprite systems didn't have a "hidden" attribute. On the NES, it was common practice to hide a sprite by putting it at (0, 240).
<br/>
<br/>
In pin8gba.h (my GBA header, which consistently spells register names differently from how the purported official docs spell them because I find my names clearer and less "tainted" by trade secrets), I have the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define OAM_AFFINE      0x0100
<br/>
#define OAM_HIDDEN      0x0200
<br/>
#define OAM_AFFINE2X    0x0300
<br/>
</td> </tr></table><span class="postbody">
<br/>
each of which is ORed into the Y attribute when placing each sprite. For sprites that aren't in use, my code just sets their Y attribute to OAM_HIDDEN and leaves it at that.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I would die for a open source game that treats things like a commercial game</td> </tr></table><span class="postbody">
<br/>
Free software developers do not have access to trade-secret official docs.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14511 - LOst? - Wed Jan 07, 2004 7:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Real commercial games seem to write 0x0200 (double-size, 1:1 pixel mapping) to a sprite's Y attribute to hide it.</td> </tr></table><span class="postbody">
<br/>
And why doesn't most of you do that aswell?</span></td> </tr></table><span class="postbody">
<br/>
Probably because some of us have built up habits on older systems whose sprite systems didn't have a "hidden" attribute. On the NES, it was common practice to hide a sprite by putting it at (0, 240).
<br/>
<br/>
In pin8gba.h (my GBA header, which consistently spells register names differently from how the purported official docs spell them because I find my names clearer and less "tainted" by trade secrets), I have the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define OAM_AFFINE      0x0100
<br/>
#define OAM_HIDDEN      0x0200
<br/>
#define OAM_AFFINE2X    0x0300
<br/>
</td> </tr></table><span class="postbody">
<br/>
each of which is ORed into the Y attribute when placing each sprite. For sprites that aren't in use, my code just sets their Y attribute to OAM_HIDDEN and leaves it at that.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I would die for a open source game that treats things like a commercial game</td> </tr></table><span class="postbody">
<br/>
Free software developers do not have access to trade-secret official docs.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Maybe you can give me your source? It would be helpful if you wrote a little sprite test program for me ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14513 - DiscoStew - Wed Jan 07, 2004 9:35 pm</h4>
    <div class="postbody"><span class="postbody">I take that back on what I said. Perhaps I should refer to documentation before posting anything anymore. I always seem to mix things up. Both flags are in attribute0, which makes using DOUBLE_SIZE very reasonable to hide a sprite. My bad.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14525 - tepples - Thu Jan 08, 2004 12:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Maybe you can give me your source? It would be helpful if you wrote a little sprite test program for me ;)</td> </tr></table><span class="postbody">
<br/>
Oh shoot. I just realized that none of the demos I already have on pineight.com use sprites significantly; they use backgrounds for almost everything. What do you want to see done?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14527 - dagamer34 - Thu Jan 08, 2004 1:14 am</h4>
    <div class="postbody"><span class="postbody">One reason is because you have to manage the state of sprites when they are in rotation/scaling mode.
<br/>
<br/>
If you have a sprite and don't know whether it uses a rotation set or not, you have to keep a temporary copy of the rotation flag globally, then turn on the SIZE_DOUBLE flag, and then turn off the rotation flag. And the exact opposite is for showing a sprite.
<br/>
<br/>
We are lazy. I have seen few games worthy of commercial quality. Most of them are demos that show off a feature or effect, so it doesn't matter to them. 
<br/>
<br/>
Good point anyway. I hide my sprites the official way!!
<br/>
<br/>
*wonders how a person like you got their hands on official docs... looks for Nintendo's phone number...*<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14535 - sajiimori - Thu Jan 08, 2004 2:15 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If you have a sprite and don't know whether it uses a rotation set or not, you have to keep a temporary copy of the rotation flag globally, then turn on the SIZE_DOUBLE flag, and then turn off the rotation flag. And the exact opposite is for showing a sprite.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Yet another reason that it's a bad idea to use OAM entries as a storage area for information about your game's actors.  Keep your permanent information in seperate data structures, and use OAM to tell the hardware what you want for the current frame.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14543 - LOst? - Thu Jan 08, 2004 4:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If you have a sprite and don't know whether it uses a rotation set or not, you have to keep a temporary copy of the rotation flag globally, then turn on the SIZE_DOUBLE flag, and then turn off the rotation flag. And the exact opposite is for showing a sprite.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Yet another reason that it's a bad idea to use OAM entries as a storage area for information about your game's actors.  Keep your permanent information in seperate data structures, and use OAM to tell the hardware what you want for the current frame.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yea, I really want sprites to work like the commercial games' ones
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Oh shoot. I just realized that none of the demos I already have on pineight.com use sprites significantly; they use backgrounds for almost everything. What do you want to see done?</td> </tr></table><span class="postbody">
<br/>
<br/>
I have a little problem with DMA in the game loop for the moment, but when that's fixed, I want to be able to have 128 sprites whenever I want the game too, not all the time like in the pern project samples</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14654 - LOst? - Sat Jan 10, 2004 6:56 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Real commercial games seem to write 0x0200 (double-size, 1:1 pixel mapping) to a sprite's Y attribute to hide it.</td> </tr></table><span class="postbody">
<br/>
And why doesn't most of you do that aswell?</span></td> </tr></table><span class="postbody">
<br/>
Probably because some of us have built up habits on older systems whose sprite systems didn't have a "hidden" attribute. On the NES, it was common practice to hide a sprite by putting it at (0, 240).
<br/>
<br/>
In pin8gba.h (my GBA header, which consistently spells register names differently from how the purported official docs spell them because I find my names clearer and less "tainted" by trade secrets), I have the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define OAM_AFFINE      0x0100
<br/>
#define OAM_HIDDEN      0x0200
<br/>
#define OAM_AFFINE2X    0x0300
<br/>
</td> </tr></table><span class="postbody">
<br/>
each of which is ORed into the Y attribute when placing each sprite. For sprites that aren't in use, my code just sets their Y attribute to OAM_HIDDEN and leaves it at that.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I would die for a open source game that treats things like a commercial game</td> </tr></table><span class="postbody">
<br/>
Free software developers do not have access to trade-secret official docs.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for the info tepples! It really helped. All my sprites work now. I jst spent a few hours making a sprite library, and it's great!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14658 - CcSoccer881 - Sat Jan 10, 2004 9:24 am</h4>
    <div class="postbody"><span class="postbody">GG Lost.. took me a few days to get mine working but I finally got the sprite management working... lets me add/remove/replace sprites.. if you wanna help each other out, my aim is signetofthetrinity<br/>_________________<br/><a href="http://www.rsstudios.net" target="_blank">www.rsstudios.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14693 - LOst? - Sun Jan 11, 2004 5:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>CcSoccer881 wrote:</b></span></td> </tr> <tr> <td class="quote">GG Lost.. took me a few days to get mine working but I finally got the sprite management working... lets me add/remove/replace sprites.. if you wanna help each other out, my aim is signetofthetrinity</td> </tr></table><span class="postbody">
<br/>
<br/>
We have to see about that :P</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
