<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Converting data - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Converting data</h2>
<div id="posts">
<div class="post">
    <h4>#12975 - twillinx - Tue Dec 02, 2003 10:35 pm</h4>
    <div class="postbody"><span class="postbody">Ok, I'm currently doing a little test were I control a sprite with a sinuscurve, the more I press A button the higher the sinus gets. When I release a button the sprite should move along the same tangent (Don't know if thats the english word for it though. :)) I'll try to explain a little better; when I'm not touching either the A nor the B button the sprite should move along in a straight line from where the sinus ends.
<br/>
<br/>
But when the value is between 0 and 1 the sprite doesnt move in the Y-axis, how should I fix this? My guess is that it doesnt work all that good when the value is between 2 and 3 ... and so on either. :D
<br/>
<br/>
ship.y-=(int)Momentum;
<br/>
<br/>
<br/>
This works great when I use the (int)blahblah-command during the sinuscalculations and with a 2nd degree-calculation but when its a fixed value; like momentum=0.8 then it doesn't work all of a sudden.
<br/>
<br/>
I hope somebody gets through all my ranting and can help me with this problem. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12981 - sajiimori - Tue Dec 02, 2003 11:26 pm</h4>
    <div class="postbody"><span class="postbody">Well, you didn't provide any code, so we can only guess what you're actually doing.  I suppose Momentum is some sort of floating point value.  When you cast a float or double to an int, it just drops the fractional portion, so obviously a value of 0.8 will round down to 0.
<br/>
<br/>
Anyway, you shouldn't be using floating point values on GBA because the CPU doesn't support them (so they have to be emulated).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13003 - twillinx - Wed Dec 03, 2003 10:38 am</h4>
    <div class="postbody"><span class="postbody">I'm just testing it out right now, I'll probably put it in an array when I know exactly how everything will work out and with what values.
<br/>
<br/>
I didn't wanna embaress myself with the code but you leave me no choice;
<br/>
<br/>
                value+=0.15;
<br/>
                konvert=xstart-(sin(1)*value);
<br/>
                sinus=(int)konvert;
<br/>
                ship.y=sinus;
<br/>
<br/>
Here I use the (int) and it looks exactly as I want it to.
<br/>
<br/>
If I wan't the ship to continue on in a straight line (according to the current value) when releasing the buttons,  how will I solve that? The only idea I got right now is another curve, one that never tops, but there should be a simpler and better solution, I hope.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13005 - yaustar - Wed Dec 03, 2003 12:59 pm</h4>
    <div class="postbody"><span class="postbody">Try using fix point maths instead. It is highly recommended not to use float numbers as it is very slow<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13006 - evil saltine - Wed Dec 03, 2003 1:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If I wan't the ship to continue on in a straight line (according to the current value) when releasing the buttons, how will I solve that? The only idea I got right now is another curve, one that never tops, but there should be a simpler and better solution, I hope.</td> </tr></table><span class="postbody">
<br/>
<br/>
What path is the sprite making on the screen? Is it moving up and down or in a sinusoidal path?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">konvert=xstart-(sin(1)*value);</td> </tr></table><span class="postbody">
<br/>
I don't understand this line, it looks like you're multiplying 'value' by a constant, but if it works it's probably what you wanted.. I dunno.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13011 - tepples - Wed Dec 03, 2003 2:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>twillinx wrote:</b></span></td> </tr> <tr> <td class="quote">If I wan't the ship to continue on in a straight line (according to the current value) when releasing the buttons, how will I solve that?</td> </tr></table><span class="postbody">
<br/>
First read up on fixed-point arithmetic. Then take the current position, in fixed-point, and subtract the previous position, also in fixed-point. This gives you a velocity in fixed-point; add it every frame to the position of the sprite in question.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
