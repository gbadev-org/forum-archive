<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Move Sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Move Sprites</h2>
<div id="posts">
<div class="post">
    <h4>#9422 - iuiz - Mon Aug 04, 2003 2:33 pm</h4>
    <div class="postbody"><span class="postbody">Hiho,
<br/>
<br/>
i found the following Code, for moving Sprites:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void moveSprite(OAMEntry* sp, int x, int y){
<br/>
                                    //moving the sprite
<br/>
   sp-&gt;attribute1 = sp-&gt;attribute1 &amp; 0xFE00;   //clear the old x value
<br/>
   sp-&gt;attribute1 = sp-&gt;attribute1 | x;      //new value
<br/>
<br/>
   sp-&gt;attribute0 = sp-&gt;attribute0 &amp; 0xFF00;   //clear the old y value
<br/>
   sp-&gt;attribute0 = sp-&gt;attribute0 | y;      //new value
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I think it is realy Popular. But isn't it faster to move a Sprite this way:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void GetInput()
<br/>
{
<br/>
   if(!(*KEYS &amp; KEY_UP))
<br/>
   {
<br/>
      pacman.y--;
<br/>
      sprites[pacman.OAMSpriteNum].attribute0 = COLOR_256 | SQUARE | pacman.y;
<br/>
   }
<br/>
   if(!(*KEYS &amp; KEY_LEFT))
<br/>
   {
<br/>
      pacman.x--;
<br/>
      sprites[pacman.OAMSpriteNum].attribute1 = SIZE_16 | pacman.x;
<br/>
<br/>
[...and so on]
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The first one is from GbaJunkie, the other uses code from the tutorial, too, so I hope that there is no problem in understanding the Code.
<br/>
<br/>
<br/>
<br/>
Cu,
<br/>
iuiz</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9424 - niltsair - Mon Aug 04, 2003 4:02 pm</h4>
    <div class="postbody"><span class="postbody">Yes, but it implies that you already know the sprites attributes and that it stays the same. If you had many sprites to move, with different properties you couldn't use the second method.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9425 - iuiz - Mon Aug 04, 2003 4:09 pm</h4>
    <div class="postbody"><span class="postbody">hmmm, and if a define some global vars to hold the Other Infos (I mean "COLOR_256 | SQUARE ")?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9426 - niltsair - Mon Aug 04, 2003 4:20 pm</h4>
    <div class="postbody"><span class="postbody">Then you save on 1 read will need to write those 4 lines of codes for every type of sprites instead of calling 1 function.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9427 - Sweex - Mon Aug 04, 2003 4:27 pm</h4>
    <div class="postbody"><span class="postbody">Besides the above mentioned reason, it is also a lot more maintainable. With the top function, you don't need to worry about the exact functioning of the GBA.<br/>_________________<br/>If everything fails, read the manual: If even that fails, post on forum!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9430 - tepples - Mon Aug 04, 2003 4:58 pm</h4>
    <div class="postbody"><span class="postbody">You can gain readability <span style="font-style: italic">and</span> speed by using a function and then making it inline.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9431 - iuiz - Mon Aug 04, 2003 5:19 pm</h4>
    <div class="postbody"><span class="postbody">Ok thank you ;) I think I will use the first Version in future.
<br/>
<br/>
<br/>
Thx,
<br/>
iuiz</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9432 - col - Mon Aug 04, 2003 6:11 pm</h4>
    <div class="postbody"><span class="postbody">Just thought i'd add my tuppence worth :)
<br/>
<br/>
<br/>
A good rule of thumb to help you work out the right way to go in these situations:
<br/>
<br/>
the name of the function should describe what the function does.
<br/>
<br/>
moveSprite(...) should move a sprite
<br/>
getInput(...) should get input
<br/>
<br/>
reason: if someone(or you) is reading some code that uses the function, and that person reads:  getInput(...); , they will assume that input has been got - not that a sprite has been moved :)
<br/>
<br/>
this general rule can be useful in other ways:
<br/>
say you have a fuction that reads input and moves a sprite - what do you call it?
<br/>
you could call it: getInputAndMoveSprite(...);.  Hmm, that seems overly long, it also highlights the fact that the two routines are not closely related... these issues are a very good indication that the two routines belong in seperate functions :)
<br/>
<br/>
there is a school of thought that says a function should only ever do one thing.
<br/>
Personally i think that that is a little inflexible, but it does enforce good coding style.
<br/>
<br/>
...
<br/>
<br/>
ok enough :)
<br/>
<br/>
cheers
<br/>
<br/>
Col</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9434 - iuiz - Mon Aug 04, 2003 6:31 pm</h4>
    <div class="postbody"><span class="postbody">hmm, somehow you are right ;)
<br/>
<br/>
I came to my mehthode, as I had only done the first tutorials for displaying a Sprite. When I added my GetInput Function I had not read the other tut, but when I saw it I asked myself why it is done this way.
<br/>
<br/>
<br/>
I optimized my code now ;). I hope that other Peole will be able to read it now *g*.
<br/>
<br/>
<br/>
Cu,
<br/>
iuiz</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
