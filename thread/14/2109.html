<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>problems with maps - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > problems with maps</h2>
<div id="posts">
<div class="post">
    <h4>#10931 - mandarin - Sat Sep 20, 2003 9:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi everyone,
<br/>
<br/>
I'm really having trouble with maps, I just can't get any maps to work properly I have tried 3 seperate sets of code to draw a map on screen from downtou.cjb.net 's tutorials and gbajunkie's tutorials but for some reason it doesn't work i have a really good hunch it is the map editor or tile converter or some other prob, beacause when I use the converted .h files from gbajunkies tutorial in all the code I have used above for my mapand it worked fine, but it might be the tiles to I was just wondering I have been testing it out with gif2sprites,gfx2gba,pcx2sprites,pcx2gba,bmp2sprites and so far no luck with any of their .h files.
<br/>
My map editors I have tried is tume,time,map editor beta v4.
<br/>
<br/>
I just want to highlight if this is some use...my tiles are 16x16 pixels and the full tileset is 256x96 pixels.
<br/>
<br/>
Anyone know whats wrong plz help.
<br/>
<br/>
Yours truly,
<br/>
<br/>
Mandarin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10932 - yaustar - Sat Sep 20, 2003 9:52 pm</h4>
    <div class="postbody"><span class="postbody">have you just tried using gbajunkie's code and just change the tilesets and map headers to see it works?
<br/>
<br/>
He uses mapedit beta by warder1 and pcx-&gt;sprite/pcx-&gt;gba
<br/>
<br/>
also are you in the right mode? and using the right background
<br/>
<br/>
If Possible, post some code up<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10933 - mandarin - Sat Sep 20, 2003 9:56 pm</h4>
    <div class="postbody"><span class="postbody">i used my headers in the exact same code of his that comes out of the tutorials except I changed the dimensions in the loops to suite the tiles needs and the maps needs and yeah I use the same map editor as he does.
<br/>
<br/>
any idea what the prob could be?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10934 - yaustar - Sat Sep 20, 2003 9:59 pm</h4>
    <div class="postbody"><span class="postbody">what is the output screen?
<br/>
I remeber I had a similar problem as well because I was working out the difference the backgrounds.
<br/>
<br/>
btw it's pcx-&gt;sprite<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10935 - mandarin - Sat Sep 20, 2003 10:03 pm</h4>
    <div class="postbody"><span class="postbody">i have many different results, first with downtou's code i get half of the map kind jumbled up in gbajunkie's code i get a mixture of tiles which i didn't even have in the original map and I tried changing his code but all i got was a screen filled with one particualar color.so i'm kinda confused by the whole thing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10936 - yaustar - Sat Sep 20, 2003 10:05 pm</h4>
    <div class="postbody"><span class="postbody">again code would be nice pref the 
<br/>
<br/>
int main (){}
<br/>
<br/>
I think it could be due to the modes that you are using.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10937 - mandarin - Sat Sep 20, 2003 10:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main()
<br/>
{
<br/>
   int index = 0;  //generic loop variables
<br/>
   u16 loop;
<br/>
   u16* temp;      //temporary storage pointer
<br/>
<br/>
   //compute my Look up tables (Rotation stuff again)
<br/>
   for(loop = 0; loop &lt; 360; loop++)
<br/>
   {
<br/>
      SIN[loop] = (FIXED)(sin(RADIAN(loop)) * 256);  //sin and cos are computed and cast to fixed                     //fixed
<br/>
      COS[loop] = (FIXED)(cos(RADIAN(loop)) * 256);
<br/>
   }
<br/>
<br/>
   //set mode 2 and enable sprites and 1d mapping
<br/>
   SetMode(MODE_1 | OBJ_ENABLE | OBJ_MAP_1D);
<br/>
<br/>
   //Let us set up the backgroud two structure and enable the background
<br/>
<br/>
   bg2.number = 2;            //background number 0-3
<br/>
   bg2.charBaseBlock = 0;                  //tile data position (right at the start of the available memory on 16Kb boundary)
<br/>
   bg2.screenBaseBlock = 28;      //map data position on 2Kb boundary
<br/>
   bg2.colorMode = BG_COLOR_256;           //256-colour background
<br/>
   bg2.size = ROTBG_SIZE_128x128;          //size of map
<br/>
   bg2.mosaic = 0;                         //not enabled
<br/>
   bg2.x_scroll = 120;         //scrolling variables
<br/>
   bg2.y_scroll = 80;
<br/>
<br/>
   //Point to correct tile and map data, update the Background and Display registers accordingly
<br/>
        EnableBackground(&amp;bg2);
<br/>
<br/>
<br/>
<br/>
   for(loop = 0; loop &lt; 256; loop++)
<br/>
      BGPaletteMem[loop] = TILESPalette[loop];     //load the background palette into memory
<br/>
<br/>
   for(loop = 0; loop &lt; exptiles_WIDTH * exptiles_HEIGHT /2; loop++)  //load tile image data
<br/>
      bg2.tileData[loop] = TILESData[loop];
<br/>
<br/>
   //load the map image data
<br/>
   temp = (u16*)map;
<br/>
   for(loop = 0; loop &lt; 16*16/2; loop++) //16x16 tiles /2 because 16 bit copy
<br/>
      bg2.mapData[loop] = temp[loop];
<br/>
<br/>
   //Main Game loop
<br/>
   while(1)
<br/>
   {
<br/>
      GetInput();    //check for input
<br/>
      RotateBackground(&amp;bg2,angle,119,79,zoom);    //rotates background if required (don't worry about this)
<br/>
      WaitForVsync();               //waits for the screen to stop drawing
<br/>
      UpdateBackground(&amp;bg2); //make sure registers are updated if anything changes e.g. scrolling
<br/>
   }
<br/>
   return(0);
<br/>
}
<br/>
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
thats gbajunie's
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void MakeBKG()
<br/>
{
<br/>
u16 loop,x,y;
<br/>
for(loop = 0; loop &lt; 256; loop++)
<br/>
BGPaletteMem[loop] = TILESPalette[loop];
<br/>
for(loop = 0; loop &lt; TILES_WIDTH*TILES_HEIGHT/2; loop++)
<br/>
BGTileMem[loop] = TILESData[loop];
<br/>
for(loop = 0; loop &lt; 64*64; loop++)
<br/>
VideoBuffer[loop] = map[loop];
<br/>
}
<br/>
<br/>
<br/>
<br/>
int main()
<br/>
{
<br/>
REG_BG0CNT = CHAR_BASE(1) | BG_MOSAIC_ENABLE | BG_COLOR_256;
<br/>
SetMode(MODE_1 | OBJ_ENABLE | BG0_ENABLE | OBJ_MAP_1D);
<br/>
<br/>
<br/>
MakeBKG();
<br/>
while (1)
<br/>
{GetInput();
<br/>
REG_BG0HOFS = x;
<br/>
REG_BG0VOFS = y;
<br/>
WaitForVsync();
<br/>
<br/>
}
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
thats what i got from downtou
<br/>
<br/>
any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10938 - yaustar - Sat Sep 20, 2003 10:15 pm</h4>
    <div class="postbody"><span class="postbody">what is the size of the map?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10939 - mandarin - Sat Sep 20, 2003 10:19 pm</h4>
    <div class="postbody"><span class="postbody">i have tried many different dimensions for the map i have tried the following
<br/>
<br/>
128x128
<br/>
256x256
<br/>
512x512</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10940 - yaustar - Sat Sep 20, 2003 10:19 pm</h4>
    <div class="postbody"><span class="postbody">second thought, e-mail the entire gbajunkie's based code to me <a href="mailto:yaustar_8p@NOSPAMyahoo.co.uk">yaustar_8p@NOSPAMyahoo.co.uk</a> (remove NOSPAM)<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10941 - mandarin - Sat Sep 20, 2003 10:21 pm</h4>
    <div class="postbody"><span class="postbody">yeah sure,but do u think you have an idea of what could be wrong?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10942 - yaustar - Sat Sep 20, 2003 10:23 pm</h4>
    <div class="postbody"><span class="postbody">I have a minor idea, but this I dont have to keep asking questions about the code and just give a solution.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10943 - mandarin - Sat Sep 20, 2003 10:39 pm</h4>
    <div class="postbody"><span class="postbody">listen i'm gonna upload it to my site then u can download it from there coz my email server is down at the moment is that ok?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10944 - yaustar - Sat Sep 20, 2003 10:41 pm</h4>
    <div class="postbody"><span class="postbody">sure, no problem..<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10945 - mandarin - Sat Sep 20, 2003 10:48 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://galileo.spaceports.com/~mandarin/project.zip" target="_blank">http://galileo.spaceports.com/~mandarin/project.zip</a>
<br/>
<br/>
<br/>
thats the url....plz respond in this topic once you found out whats wrong</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10947 - yaustar - Sat Sep 20, 2003 11:06 pm</h4>
    <div class="postbody"><span class="postbody">At the moment I acnt get the thing compling, it doesnt radian..<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10948 - yaustar - Sat Sep 20, 2003 11:34 pm</h4>
    <div class="postbody"><span class="postbody">found the problem map.c should be
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const u8 map[ 16 * 16 ] = {
<br/>
0x06,0x07,0x08,0x09,0x0A,0x0B,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
<br/>
0x12,0x13,0x14,0x15,0x16,0x17,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
<br/>
0x1E,0x1F,0x20,0x21,0x22,0x23,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
<br/>
0x2A,0x2B,0x2C,0x2D,0x2E,0x2F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
<br/>
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x07,0x08,0x09,0x0A,0x0B,0x00,0x00,
<br/>
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x12,0x13,0x14,0x15,0x16,0x17,0x00,0x00,
<br/>
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x1F,0x20,0x21,0x22,0x23,0x00,0x00,
<br/>
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x2A,0x2B,0x2C,0x2D,0x2E,0x2F,0x00,0x00,
<br/>
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
<br/>
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
<br/>
0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,
<br/>
0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,
<br/>
0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,
<br/>
0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,
<br/>
0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,0x04,0x05,
<br/>
0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,0x10,0x11,
<br/>
<br/>
};</td> </tr></table><span class="postbody">
<br/>
<br/>
Using MapEditBetav4, you need to export TWICE to get the full array. (falut in progam) It was mention in gbajunkies tutorial<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10968 - goro - Mon Sep 22, 2003 7:37 am</h4>
    <div class="postbody"><span class="postbody">That program is buggy.
<br/>
<br/>
You should use MapEd096 by Nessie.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10971 - yaustar - Mon Sep 22, 2003 11:39 am</h4>
    <div class="postbody"><span class="postbody">maped took some time getting use to, but yes, it's better then mapeditbeta IMO.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
