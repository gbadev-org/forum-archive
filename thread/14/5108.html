<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>gfx2gba output right? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > gfx2gba output right?</h2>
<div id="posts">
<div class="post">
    <h4>#36880 - ymalik - Wed Mar 02, 2005 8:47 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
I am using <a class="postlink" href="http://www.ohnehirn.de/tools/readme.txt" target="_blank">gfx2gba v0.14</a> to convert my bitmaps into tile arrays.  The pictures I am dealing with are 256x256 8 BPP.  Here is a an image that I converted:
<br/>
<br/>
Number of tiles before optimization: 1024
<br/>
Number of tiles after  optimization: 0435
<br/>
Saving tiled bitmap data to: images\32_33.raw.c ... ok
<br/>
Saving map data to: images\32_33.map.c ... ok
<br/>
<br/>
and the tile image array looks like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const unsigned char 32_33_Tiles[27840] = {
<br/>
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
<br/>
0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 
<br/>
...
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Unfortunately, this is more than 256 tiles and cannot fit into a char block.  I converted the image into a 4 BPP image so I could have 512 tiles in a char block, and I get the following output from gfx2gba:
<br/>
<br/>
Reading: 32_33_2.bmp              (256x256 pixel,  16 colors)
<br/>
Number of tiles before optimization: 1024
<br/>
Number of tiles after  optimization: 0435
<br/>
Saving tiled bitmap data to: 32_33_2.raw.c ... ok
<br/>
Saving map data to: 32_33_2.map.c ... ok
<br/>
<br/>
Ok, no problem.  But the tile array looks like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const unsigned char 32_33_2_Tiles[27840] = {
<br/>
0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 
<br/>
0x00, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x00, 0x00, 0x09, 0x09, 0x09, 0x09, 0x09, 
<br/>
...
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But isn't that taking the same amout of memory as tiles that 8 BPP?  Shouldn't it be something like 0x99, ..., making it half the size of the 8 BPP array?
<br/>
<br/>
Thanks,
<br/>
Yasir</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36885 - tepples - Wed Mar 02, 2005 9:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ymalik wrote:</b></span></td> </tr> <tr> <td class="quote">I am using <a class="postlink" href="http://www.ohnehirn.de/tools/readme.txt" target="_blank">gfx2gba v0.14</a> to convert my bitmaps into tile arrays.  The pictures I am dealing with are 256x256 8 BPP.  Here is a an image that I converted:
<br/>
<br/>
Number of tiles before optimization: 1024
<br/>
Number of tiles after  optimization: 0435
<br/>
[...]
<br/>
Unfortunately, this is more than 256 tiles and cannot fit into a char block.</td> </tr></table><span class="postbody">
<br/>
The tiles of a tiled background without rot/scale (mode 0 BG0 through BG3 or mode 1 BG0 or BG1) are allowed to span multiple 16 KB banks of tile memory. A single 16-color background can access two 16 KB banks (each of 512 tiles), while a 256-color background can access all four (each of 256 tiles). For instance, the background tile data in <a class="postlink" href="http://www.pineight.com/gba/#tod" target="_blank">Tetanus On Drugs</a> roughly spans 0x0600B000-0x0600FFFF, tiles 384-1023 of bank 2.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I converted the image into a 4 BPP image so I could have 512 tiles in a char block, and I get the following output from gfx2gba:
<br/>
<br/>
Reading: 32_33_2.bmp              (256x256 pixel,  16 colors)
<br/>
Number of tiles before optimization: 1024
<br/>
Number of tiles after  optimization: 0435
<br/>
Saving tiled bitmap data to: 32_33_2.raw.c ... ok
<br/>
Saving map data to: 32_33_2.map.c ... ok
<br/>
<br/>
Ok, no problem.  But the tile array looks like:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const unsigned char 32_33_2_Tiles[27840] = {
<br/>
0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 
<br/>
0x00, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x00, 0x00, 0x09, 0x09, 0x09, 0x09, 0x09, 
<br/>
...
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
Even if the input image is 16-color indexed, you may have to pass the -c16 flag to get it to output 16-color tile data.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36911 - Celeryface - Thu Mar 03, 2005 12:06 pm</h4>
    <div class="postbody"><span class="postbody">Yeah you need to pass -c16 to gfx2gba to output 16-colour mode data, even if the image was created with 4bpp. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36913 - ymalik - Thu Mar 03, 2005 2:31 pm</h4>
    <div class="postbody"><span class="postbody">Much thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36914 - ymalik - Thu Mar 03, 2005 3:18 pm</h4>
    <div class="postbody"><span class="postbody">Is there a way to have an offset to a screen block of where to look for the map data?  I want to maximize the number of tiles stored in char block, but minimize the amount of map data, as per how I am going to do scrolling in my <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=5077" target="_blank">Scrolling massive image</a> topic.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
