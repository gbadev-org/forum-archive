<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>displaying available memory - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > displaying available memory</h2>
<div id="posts">
<div class="post">
    <h4>#16257 - Dan_attacker - Wed Feb 11, 2004 8:41 am</h4>
    <div class="postbody"><span class="postbody">How do i make it show how much free ram I have left?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16277 - poslundc - Wed Feb 11, 2004 3:24 pm</h4>
    <div class="postbody"><span class="postbody">Well, you can call the nm utility on your .elf file to give a readout of where everything is being placed in memory. Use the -n switch to order everything in terms of memory location, and you'll be able to easily tell where your various memory sections start and end.
<br/>
<br/>
That's:
<br/>
<br/>
nm -n file.elf
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16294 - Dan_attacker - Wed Feb 11, 2004 10:22 pm</h4>
    <div class="postbody"><span class="postbody">Well, that worked, but it shows so much stuff that it scrolls off the screen. Actually, this is my problem... there are lines of code in this program i'm modifying that break the program. Here is one of those lines...
<br/>
<br/>
bs_mpg.bits = (unsigned char *) mem_alloc ((long) 13824, "MPG Bits");
<br/>
<br/>
If I change the number 13824 to something like 10 then it works... but the way it is now freezes the program. Did I run out of memory?
<br/>
<br/>
PS: I have no idea how this program works but it compiled and I wanna make it work. lol</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16298 - poslundc - Wed Feb 11, 2004 11:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dan_attacker wrote:</b></span></td> </tr> <tr> <td class="quote">bs_mpg.bits = (unsigned char *) mem_alloc ((long) 13824, "MPG Bits");
<br/>
<br/>
If I change the number 13824 to something like 10 then it works... but the way it is now freezes the program. Did I run out of memory?</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, probably. If the mem_alloc function uses EWRAM then I'd say no, but since you're crashing it probably use IWRAM, and if it's doing some kind of MPEG decompression it would probably need to use IWRAM for the speed.
<br/>
<br/>
You've only got 32K of IWRAM, and your buffer is 13.5K. That still leaves over half of the IWRAM left, so I'm guessing your app is pretty IWRAM-heavy?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">PS: I have no idea how this program works but it compiled and I wanna make it work. lol</td> </tr></table><span class="postbody">
<br/>
<br/>
Unfortunately, compilation in no way guarantees that the code you're using works or is correctly written. :P Have you tried reading the documentation of the program you're using?
<br/>
<br/>
As for everything scrolling by on your screen too quickly, does your terminal program not have a scrollback feature? (ie. scrollbars?) You can always try piping it through more (nm -n file.elf | more) which works on Unix and I think works on Win/DOS as well.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16354 - Dan_attacker - Fri Feb 13, 2004 3:33 am</h4>
    <div class="postbody"><span class="postbody">How would I move that reserved buffer space over to the EWRAM? I'm not too concerned with speed right now. Anyways, I'm just playing around. I don't have the knowledge to work on a program this complicated. I'm still a C++ newbie.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16358 - poslundc - Fri Feb 13, 2004 4:25 am</h4>
    <div class="postbody"><span class="postbody">Well, if you don't know what the program is doing it's probably not a good idea to mess with how it works. You can get a pointer to EWRAM just by changing your line to a fixed address located in EWRAM, such as:
<br/>
<br/>
bs_mpg.bits = (unsigned char *)0x02000000;
<br/>
<br/>
... but if the program uses EWRAM for anything else (or if it is a multiboot program) this will cause problems. You could also be inviting any number of errors with the speed issue - more than just slowdown, depending on how the program is designed and if it relies on having the fast RAM.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
