<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>compiler setup, building gcc cross-compiler - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > compiler setup, building gcc cross-compiler</h2>
<div id="posts">
<div class="post">
    <h4>#162553 - moonlightcheese - Thu Sep 04, 2008 8:54 pm</h4>
    <div class="postbody"><span class="postbody">i've tried following tonc's guide for using the template libraries to make things compile and it just doesn't make any sense.  besides, i'm very much a do-it-yourselfer.
<br/>
<br/>
so i'm trying to build gcc to cross-compile for arm targets using the guides i've found here:
<br/>
<a href="http://nihilisme.ca:8080/arm/" target="_blank">http://nihilisme.ca:8080/arm/</a>
<br/>
<br/>
my question is... once i get a cross-compiler that spits out raw (non-elf) arm binaries, can i make it work for building gba specific code and how?
<br/>
<br/>
edit: i also understand that the mainline kernel has all the support necessary for arm archs so i should just be able to download the latest stable kernel (2.6.x) and use those headers to build gcc right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162603 - tepples - Fri Sep 05, 2008 8:47 pm</h4>
    <div class="postbody"><span class="postbody">The first thing you should know about the linker script is that code starts at 0x08000000 for ROM programs or 0x02000000 for RAM programs.
<br/>
<br/>
The first thing you should know about crt0 is that code must start with a header of 228 bytes[1] whose first instruction is a jump past the header. GBATEK describes the layout of this header.
<br/>
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">[1] In ROM, the header is only 192 bytes, but GBA BIOS MultiBoot uses more of the header to indicate the player number.</span><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162905 - moonlightcheese - Tue Sep 16, 2008 12:16 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The first thing you should know about the linker script is that code starts at 0x08000000 for ROM programs or 0x02000000 for RAM programs.
<br/>
<br/>
The first thing you should know about crt0 is that code must start with a header of 228 bytes[1] whose first instruction is a jump past the header. GBATEK describes the layout of this header.
<br/>
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">[1] In ROM, the header is only 192 bytes, but GBA BIOS MultiBoot uses more of the header to indicate the player number.</span></td> </tr></table><span class="postbody">
<br/>
awesome.  none of that makes any sense to me at all...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162925 - moonlightcheese - Tue Sep 16, 2008 3:06 pm</h4>
    <div class="postbody"><span class="postbody">so i got a compiler that builds for arm targets but i can't find the necessary header files to use.  when i try to compile the template.c file from the devkitarm collection, i get several missing header errors (obviously, since i haven't placed them yet) and when i search for the headers that the template.c file references, they are nowhere to be found in devkitARM or in libgba directory.  where do i get these headers?
<br/>
<br/>
gba_console.h
<br/>
gba_video.h
<br/>
gba_interrupt.h
<br/>
gba_systemcalls.h
<br/>
gba_input.h
<br/>
<br/>
edit: nevermind... i'm an idiot.  found them.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162931 - moonlightcheese - Tue Sep 16, 2008 5:09 pm</h4>
    <div class="postbody"><span class="postbody">ok, now i think i've gotten far enough to understand what i need to do next but i'm not sure how...
<br/>
<br/>
i have the headers in the appropriate places and the sample code still isn't compiling.  the first error in the list is:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">warning: cannot find entry symbol _start: defaulting to 00008000</td> </tr></table><span class="postbody">
<br/>
which i assume has to do with the entry points not being correct, as tepples alludes to in the above post.  i found crtls in the devkitadv set.  i can't get it to compile for some reason...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162940 - Dwedit - Tue Sep 16, 2008 8:31 pm</h4>
    <div class="postbody"><span class="postbody">Devkitadv is widely considered to be old and outdated.
<br/>
Have you tried using the specifications, linkscripts and ctr0's from devkitarm?  Will your build of the compiler build any of the Devkitarm example projects?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163034 - moonlightcheese - Fri Sep 19, 2008 5:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">Devkitadv is widely considered to be old and outdated.
<br/>
Have you tried using the specifications, linkscripts and ctr0's from devkitarm?  Will your build of the compiler build any of the Devkitarm example projects?</td> </tr></table><span class="postbody">
<br/>
i know it's outdated but i just don't have time for anything else.  this will get me started with gba coding and i absolutely must get this project completed in a timely manner.  i'm already going well above and beyond the project spec.
<br/>
<br/>
the students are supposed to be building an OS in Java and emulate a hardware CPU with code, basically chopping up hex programs into opcodes according to the hardware spec of the project.  i asked the professor if i could code my OS for an actual machine, converting the hex programs he wrote into ARM compatible programs and he was fine with that because he knows i'm taking the opportunity to learn as much as possible about embedded systems.
<br/>
<br/>
when i have the time, i can revisit the compiler i'm working on in FreeBSD but for right now, i just need something that works so i can familiarize myself with coding for low level systems and risc embedded systems in particular.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163048 - Ruben - Sat Sep 20, 2008 1:00 pm</h4>
    <div class="postbody"><span class="postbody">Well, it doesn't take too long to download devKitARM, but anyway...
<br/>
<br/>
If you're only coding in C/C++, and not using any compiler specific things, then you should be fine in using devKitAdv for now but I still highly recommend devKitARM for everything.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
