<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>different modes - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > different modes</h2>
<div id="posts">
<div class="post">
    <h4>#60408 - ghost Leinad - Thu Nov 10, 2005 1:54 am</h4>
    <div class="postbody"><span class="postbody">Im trying to use a mode change when running my game; the intro is in mode 0 and the game in mode 4, this is because when i learn to do blending, I learned using mode 0...but, when I change the mode a very annoying line cross all over the screen, how can I avoid that when changing modes???
<br/>
<br/>
<br/>
the other question is, can I use blending the same way as in mode 0????
<br/>
if this is possible...how do i achieve it???
<br/>
<br/>
the pic is here:
<br/>
h<span style="font-weight: bold"></span>ttp://www.angelfire.com/music6/leinad/1.PNG<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"><br/><br/>Last edited by ghost Leinad on Thu Nov 10, 2005 3:49 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#60412 - tepples - Thu Nov 10, 2005 2:11 am</h4>
    <div class="postbody"><span class="postbody">Please ask separate questions in separate topics or at least in separate posts. I can split whole posts from a topic into a new topic, but I can't split individual posts.
<br/>
<br/>
Why, specifically, do you want to do a mode change halfway down the screen? What will you eventually show on top, and what will you eventually show on bottom?
<br/>
<br/>
If you really want to do a mode change halfway down the screen, then you should keep background 2 turned on always and hide it using windows if necessary. This has been tested for modes 0 and 1 (which <span style="font-style: italic">Mario Kart</span> uses) but not for modes 0 and 4.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60425 - ghost Leinad - Thu Nov 10, 2005 3:55 am</h4>
    <div class="postbody"><span class="postbody">oh..no you missundertood me :S:S:S
<br/>
<br/>
what im trying to do is make a mode change between frames...for instance...frame 4 is in mode 0, and frame 5 is now in mode 4...
<br/>
<br/>
why??? because im trying to use blending for my intro, but i don't know how to make bleding in mode 4 :$
<br/>
<br/>
after the intro i want to switch modes, cause mi whole game is made (because is one of my first) in mode 4 :D
<br/>
<br/>
the line in the pic, is the a line crossing the whole display! is not divided.
<br/>
<br/>
so my question is..how do i make a mode change between frames??? 
<br/>
and how do i make blending in mode 4...
<br/>
<br/>
anyway, i will try to fix the problem by miself<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60433 - poslundc - Thu Nov 10, 2005 5:45 am</h4>
    <div class="postbody"><span class="postbody">Make sure you change modes during VBlank and you won't get any screen artifacts.
<br/>
<br/>
If it takes longer than a single VBlank period for you to load your various assets into VRAM, you'll probably want to engineer a transition phase. Fade your original screen down to black over the course of several frames, make whatever changes you need to in VRAM over however many frames it takes, switch modes, then fade back up over the course of several frames.
<br/>
<br/>
In modes 3-5 the canvas is BG2, which can be used with the blend register like in modes 0-2. But since you only get the single layer, you can only blend it with sprites and the backdrop.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60594 - SittingDuck - Sat Nov 12, 2005 10:56 am</h4>
    <div class="postbody"><span class="postbody">That's what I was going to say. Do it in VBlank. If you are already synchronising with VBlank, maybe you're taking too long to do calculations before drawing.
<br/>
<br/>
Also, are you using a VBlank interrupt or waiting for it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60660 - sgeos - Sun Nov 13, 2005 1:47 pm</h4>
    <div class="postbody"><span class="postbody">Blend to black, change modes.  Fade in.  Happy.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#61345 - ghost Leinad - Sat Nov 19, 2005 2:13 am</h4>
    <div class="postbody"><span class="postbody">Well, well. I finally managed to get rid of the annoying line. the problem was that I was changing the mode before uploading the video buffer for mode 4. So, my program was showing garbage.
<br/>
<br/>
my function is more or less like this
<br/>
<br/>
intro()
<br/>
{
<br/>
     mode0;
<br/>
     uploadbg2;
<br/>
     uploadbg3;
<br/>
     fadeinbackground(); //using blending for bg2 and bg3
<br/>
     fadeoutbackground();//black screen, little wait
<br/>
     uploadbg2 (video buffer);
<br/>
     mode4;
<br/>
}
<br/>
<br/>
My problem now is that when I change modes skips the litle wait and the bg2 is showed suddenly, I don't want this, I want the bg2 on mode 4 to fade in little by little. I guess is because I'm not blending it with the backdrop. So, my question is, how do I make a blend with the backdrop? I was trying but it doesn't seem to work.<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#61375 - Cearn - Sat Nov 19, 2005 1:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">My problem now is that when I change modes skips the litle wait and the bg2 is showed suddenly, I don't want this, I want the bg2 on mode 4 to fade in little by little. I guess is because I'm not blending it with the backdrop. So, my question is, how do I make a blend with the backdrop? I was trying but it doesn't seem to work.</td> </tr></table><span class="postbody">
<br/>
You don't need to blend with the backdrop for a fade to black (or white for that matter), they have their own blend modes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define LAYER_BG2   0x0004
<br/>
#define BLD_BLACK   0x00C0
<br/>
<br/>
REG_BLDCNT= LAYER_BG2 | BLD_BLACK;
<br/>
<br/>
// fade out in 0x100/4 frames
<br/>
for(ii=0; ii&lt;0x100; ii += 4)
<br/>
{
<br/>
    vid_vsync();
<br/>
    REG_COLEY= ii&gt;&gt;4;
<br/>
}
<br/>
REG_COLEY=0x10;
<br/>
<br/>
// wait a bit
<br/>
for(ii=0; ii&lt;60; ii++)
<br/>
    vid_vsync();
<br/>
<br/>
// fade in in 0x100/3 frames
<br/>
for(ii=0x100; ii&gt;=0; ii -= 3)
<br/>
{
<br/>
    vid_vsync();
<br/>
    REG_COLEY= ii&gt;&gt;4;
<br/>
}</td> </tr></table><span class="postbody">The number for REG_COLEY goes from 0 (no blend) to 0x10 (full blend, in this case to black). Using fixed point math you can easily set how long you want each of the blends to take.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
