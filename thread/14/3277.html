<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Wierd Looking sprites, Please help! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Wierd Looking sprites, Please help!</h2>
<div id="posts">
<div class="post">
    <h4>#19595 - telamon - Thu Apr 22, 2004 4:39 pm</h4>
    <div class="postbody"><span class="postbody">Hello i'm a newcomer to this forum and the gbadev scene. I've been following the tutorials over at <a href="http://gbajunkie.co.uk" target="_blank">http://gbajunkie.co.uk</a> and I have now begun to write my own code. Everything seems to work fine except for my sprite :(
<br/>
<br/>
I've searched the forum for people with similiar problems and did find a couple of post actually. But the only clue to the solution was a binarie called "spritestripper.exe" wich is nolonger accessible at it's former host due to an outdated post .
<br/>
<br/>
So to better understand my problem i made a debug image so that i maybe could understand wich pixels had went astray. 
<br/>
<a href="http://molested.ath.cx/debugsprite.gif">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
It's originally a 16x16 sprite. It's a bit resized so that you can see it better.
<br/>
As you can see it seems like no pixels are missing, but most of them are wierdly dislocated. The dislocation pattern seems quite symmetrical so it could be fixed with a function i suppose, maybe that is what spritestripper.exe was supposed to do.  Also, the palette loads just fine so i can exclude that from the list of suspects.
<br/>
<br/>
Now over to my loading functions.
<br/>
I've tried swapping my debug sprite with the original  tutorial sprite in the original tutorial code, It gave me the same error. 
<br/>
So i put it aside and continued to write other stuff on my own project.  Yesterday i included VBFS into my project as it seemed to be quite a nice solution. And thus i've changed my loading function.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
The original Tutorial sprite loader using data in header files
<br/>
<br/>
          for(loop = 0; loop &lt; 384; loop++)       //load 1st sprite image data
<br/>
   {
<br/>
      OAMData[loop] = pacanimData[loop];
<br/>
   }
<br/>
<br/>
+------------------------------------------------------------+
<br/>
 my current loading function using data stored VBFS
<br/>
   gbfs_copy_obj(OAMData , dat , "cursor2.raw");     //load 1st sprite image data
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Whatever loading routine i tried i got the same result wheter my image was stored in a header or  a raw binarie file. So i drew the conclusion that my loading  wasn't errorneous. 
<br/>
<br/>
the sprite attributes setup looks like this, it's unchanged from the original tutorial:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   sprites[0].attribute0 = COLOR_256 | SQUARE | cursor.y; //setup sprite info, 256 colour, shape and y-coord
<br/>
   sprites[0].attribute1 = SIZE_16 | cursor.x;            //size 16x16 and x-coord
<br/>
   sprites[0].attribute2 = 0;                             //pointer to tile where sprite starts
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've tried converting my picture to either header or raw with following 3 programs:
<br/>
gfx2gba
<br/>
gifs2sprites
<br/>
pcx2gba
<br/>
<br/>
everyone of them gave me the same result. 
<br/>
I've tried recreating the image and saving it with Photoshop, Paint Shop Pro and Graphics Gale to formats of PCX, BMP and GIF.
<br/>
And then converting them. But alas still the same result. 
<br/>
So i'm about to exclude my ways of creation/conversion too.
<br/>
<br/>
Please help me solve this, thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19601 - sajiimori - Thu Apr 22, 2004 7:05 pm</h4>
    <div class="postbody"><span class="postbody">Use VisualBoyAdvance's tools to look at the sprite data, and verify that it looks the same as the screenshot (keeping in mind that it will be divided into 8x8 characters).  View it as a 16 color and 256 color image.
<br/>
<br/>
Output your data in a human-readable format and see for yourself if the data is right.
<br/>
<br/>
If you see incorrect data in VBA's sprite RAM viewer, and you can tell the converted file is correct, then post a complete program.  Try to make it as short and simple as possible.  Use only a single 16x16 image, no background, no unused code, etc.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19604 - telamon - Thu Apr 22, 2004 7:14 pm</h4>
    <div class="postbody"><span class="postbody">ok thanx. i'll trie that. I had the same result when my code was in cryo stage and only had 1 sprite and nothing else.
<br/>
Heh forgot vba had that kind of tools, they are indeed handy in my current situation. 
<br/>
Forgot to mention that using gfx2gba to convert graphics works just fine for me doing backgrounddata but sprites somehow get messed up. Maybe i've done some miscalculations on where i should load my first sprite.<br/>_________________<br/><a href="http://manifested.ath.cx" target="_blank">http://manifested.ath.cx</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19607 - telamon - Thu Apr 22, 2004 8:33 pm</h4>
    <div class="postbody"><span class="postbody">OK , i did a new debug sprite, this time it was far easier to see what was wrong. 
<br/>
not that it's solved -_- , just wrong. take a look for yourselves.
<br/>
<a href="http://molested.ath.cx/debugsprite2.gif">[Images not permitted - Click here to view it]</a>
<br/>
ed: Fig1: The way it supposed to be.   Fig2: saved image via VBA OAM browser
<br/>
<br/>
It seems like it draws the horizontal row until it reaches the middle and then it continues drawing the data on the next row.  What's more confuseing is that when it reaches the vertical middle it jumps over to the upper right section and continues to draw that block, It's as if it's drawing 4 small pictures 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
some ascii art: 
<br/>
| 1:1 | 1:2 |
<br/>
| 2:1 | 2:2 |
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
First it draws the 1:1 block then 1:2 and continues with 2:1 . 
<br/>
<br/>
Can this problem be somehow related to the doublebuffering? Since all my problems can be divided by 2.
<br/>
<br/>
I apologize if i misunderstood your directions sajimori. I'm a bit afraid of rewriteing the code as i don't have a clue of how to make an alternate way of accomplishing this.<br/>_________________<br/><a href="http://manifested.ath.cx" target="_blank">http://manifested.ath.cx</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19608 - niltsair - Thu Apr 22, 2004 8:58 pm</h4>
    <div class="postbody"><span class="postbody">The problem is that you're not using the right ouput parameters with your tool. It currently output the sprite as a simple bitmap (whole line by line). But  they should actually be stored differently. Your image should be subdivided in 8x8pixels blocks. Check the correct parameters for this, since I don't know them offhand, with your sprite converter.
<br/>
<br/>
Here's an example of how it get sub divided</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">[b]From[/b]
<br/>
0123456789ABCDEF
<br/>
1111111111111111
<br/>
2222222222222222
<br/>
3333333333333333
<br/>
4444444444444444
<br/>
5555555555555555
<br/>
6666666666666666
<br/>
7777777777777777
<br/>
8888888888888888
<br/>
9999999999999999
<br/>
AAAAAAAAAAAAAAAA
<br/>
BBBBBBBBBBBBBBBB
<br/>
CCCCCCCCCCCCCCCC
<br/>
DDDDDDDDDDDDDDDD
<br/>
EEEEEEEEEEEEEEEE
<br/>
FFFFFFFFFFFFFFFF
<br/>
[b]To[/b]
<br/>
<br/>
01234567 | 89ABCDEF
<br/>
11111111 | 11111111
<br/>
22222222 | 22222222
<br/>
33333333 | 33333333
<br/>
44444444 | 44444444
<br/>
55555555 |55555555
<br/>
66666666 |66666666
<br/>
77777777 |77777777
<br/>
----------------
<br/>
88888888 | 88888888
<br/>
99999999 | 99999999
<br/>
AAAAAAAA | AAAAAAAA
<br/>
BBBBBBBB | BBBBBBBB
<br/>
CCCCCCCC | CCCCCCCC
<br/>
DDDDDDDD | DDDDDDDD
<br/>
EEEEEEEE | EEEEEEEE
<br/>
FFFFFFFF | FFFFFFFF
<br/>
<br/>
In Memory:
<br/>
01234567 
<br/>
11111111
<br/>
22222222
<br/>
33333333
<br/>
44444444
<br/>
55555555
<br/>
66666666
<br/>
77777777
<br/>
89ABCDEF
<br/>
11111111
<br/>
22222222
<br/>
33333333
<br/>
44444444
<br/>
55555555
<br/>
66666666
<br/>
77777777
<br/>
88888888 
<br/>
99999999 
<br/>
AAAAAAAA 
<br/>
BBBBBBBB
<br/>
CCCCCCCC 
<br/>
DDDDDDDD 
<br/>
EEEEEEEE 
<br/>
FFFFFFFF </td> </tr></table><span class="postbody"><br/>_________________<br/>-Inside every large program is a small program struggling to get out. (Hoare's Law of Large Programs)
<br/>
-The man who can smile when things go wrong has thought of someone he can blame it on. (Nixon's Theorem)</span><span class="gensmall"><br/><br/>Last edited by niltsair on Thu Apr 22, 2004 9:07 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#19609 - telamon - Thu Apr 22, 2004 9:03 pm</h4>
    <div class="postbody"><span class="postbody">Wow thanks alot! now i have a clue about where to look! =)<br/>_________________<br/><a href="http://manifested.ath.cx" target="_blank">http://manifested.ath.cx</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19612 - telamon - Thu Apr 22, 2004 9:41 pm</h4>
    <div class="postbody"><span class="postbody">Yep it worked =) with a little assistance from LordGraga. 
<br/>
the gfx2gba faq does actually mention this. 
<br/>
<a href="http://www.ohnehirn.de/tools/readme.txt" target="_blank">http://www.ohnehirn.de/tools/readme.txt</a>
<br/>
it's the -t flag<br/>_________________<br/><a href="http://manifested.ath.cx" target="_blank">http://manifested.ath.cx</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20700 - ThePhoenix - Sat May 15, 2004 12:14 pm</h4>
    <div class="postbody"><span class="postbody">I was just wondering how you DO transparency :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20706 - yaustar - Sat May 15, 2004 1:32 pm</h4>
    <div class="postbody"><span class="postbody">depends on the tool. With gif2sprite, as you convert it to a gif, just set the colour you want to be transpereant to be transparent as a gif. Most often then not it be the first colour in the palette<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20708 - telamon - Sat May 15, 2004 1:39 pm</h4>
    <div class="postbody"><span class="postbody">The transparency depends on the first color in your palette. If you're not converting from gif , then just fire the pic up in paintshop pro or some other software that lets you edit your palette manually. I usually set my first color to #FF00FF , that eyehurting pink color i suppose. And ofcourse if you did't set the first color to pink before you begun makeing your pic you will probably have some pink pixels. You better get rid of those :)<br/>_________________<br/><a href="http://manifested.ath.cx" target="_blank">http://manifested.ath.cx</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
