<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>class func multiple definition - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > class func multiple definition</h2>
<div id="posts">
<div class="post">
    <h4>#172374 - jamaozero - Wed Feb 03, 2010 11:46 am</h4>
    <div class="postbody"><span class="postbody">I've cut down my proj to isolate the 'multiple definition of' error I'm having. Strange thing is, this error results when the function definition in a .cpp file, but when I inline it in the .h, it disappears.
<br/>
<br/>
error text: 
<br/>
1&gt;linking multiboot
<br/>
1&gt;xero.o: In function `xeroActor::Update()':
<br/>
1&gt;c:/multidef/multidef/source/game/actors/xero.cpp:4: multiple definition of `xeroActor::Update()'
<br/>
1&gt;xero.o:c:/multidef/multidef/source/game/actors/xero.cpp:4: first defined here
<br/>
1&gt;xero.o:(.rodata+0x0): multiple definition of `vtable for xeroActor'
<br/>
1&gt;xero.o:(.rodata+0x0): first defined here
<br/>
1&gt;collect2: ld returned 1 exit status
<br/>
1&gt;make[1]: *** [/c/multidef/multidef/multidef_mb.elf] Error 1
<br/>
<br/>
<br/>
Here is a readout of my 8 files (avg 15 lines), the filepaths, and the source:
<br/>
<br/>
file hierarchy:
<br/>
\source\
<br/>
 actor.h
<br/>
 actor.cpp
<br/>
 main.cpp
<br/>
  \source\game\
<br/>
   game_actors.h
<br/>
   game_main.h
<br/>
   game_main.cpp
<br/>
     \source\game\actors\
<br/>
      xero.h
<br/>
      xero.cpp
<br/>
<br/>
main.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
/* Include the game main */
<br/>
#include "game/game_main.h"
<br/>
<br/>
int main() {
<br/>
<br/>
   game_main();
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
actor.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef ACTOR_H
<br/>
#define ACTOR_H
<br/>
<br/>
#include &lt;gba_types.h&gt;
<br/>
#include &lt;gba_sprites.h&gt;
<br/>
#include &lt;gba_input.h&gt;
<br/>
<br/>
<br/>
class actorBase {
<br/>
protected:
<br/>
   u8 id;
<br/>
   u8 x, y;            
<br/>
   u8 bndw, bndh;
<br/>
   u8 bndxOfst, bndyOfst;
<br/>
   u8 state;
<br/>
   u8 allowInput;
<br/>
   bool changed;
<br/>
   SpriteEntry* sprite;
<br/>
<br/>
public://private:
<br/>
   //actor();
<br/>
   ~actorBase();
<br/>
public:
<br/>
   actorBase(u8 aid);
<br/>
   actorBase(u8 aid, u8 ax, u8 ay, u8 abndw, u8 abndh, u8 abndxOfst, u8 abndyOfst);
<br/>
<br/>
   virtual void Update() = 0; 
<br/>
} ALIGN(4);
<br/>
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
actor.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include "actor.h"
<br/>
<br/>
actorBase::actorBase(u8 aid) : id(aid), x(0), y(0), bndw(0), bndh(0), bndxOfst(0), bndyOfst(0) {
<br/>
<br/>
}
<br/>
<br/>
actorBase::actorBase(u8 aid, u8 ax, u8 ay, u8 abndw, u8 abndh, u8 abndxOfst, u8 abndyOfst) : id(aid), x(ax), y(ay), bndw(abndw), bndh(abndh), bndxOfst(abndxOfst), bndyOfst(abndyOfst) {
<br/>
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
game_actors.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef GAME_ACTORS_H
<br/>
#define GAME_ACTORS_H
<br/>
<br/>
#include "actors\xero.h"
<br/>
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
game_main.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef GAME_MAIN_H
<br/>
#define GAME_MAIN_H
<br/>
<br/>
#include "game_actors.h" // need to break this later
<br/>
<br/>
int game_main();
<br/>
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
game_main.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include "game_main.h"
<br/>
<br/>
int game_main() {
<br/>
<br/>
   xeroActor xero(0);// = new xeroActor(0);
<br/>
   
<br/>
   while(1) {
<br/>
      
<br/>
      scanKeys(); // required by gba_input.h
<br/>
<br/>
      xero.Update();//HandleInput();
<br/>
<br/>
   }
<br/>
<br/>
   return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
xero.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef XERO_H
<br/>
#define XERO_H
<br/>
<br/>
#include "..\..\actor.h"
<br/>
<br/>
class xeroActor : public actorBase {
<br/>
   friend class actorBase;
<br/>
<br/>
public:
<br/>
   xeroActor(u8 aid) : actorBase(aid) { }
<br/>
   
<br/>
public:
<br/>
   void Update();//HandleInput();
<br/>
<br/>
};
<br/>
<br/>
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
xero.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include "xero.h"
<br/>
<br/>
void xeroActor::Update() { }
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
