<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compile Problem (First Timer) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Compile Problem (First Timer)</h2>
<div id="posts">
<div class="post">
    <h4>#44462 - xyuri - Thu Jun 02, 2005 1:50 am</h4>
    <div class="postbody"><span class="postbody">not new to programming, but trying to get started with GBA developement at the moment.
<br/>
<br/>
Started from one of the tutorials on this site but dont seem to be able to get it to compile ... I managed to get it to compile with a warning using different parameters but the result was incorrect (just showed a blank screen instead of blank with a different pixel)
<br/>
<br/>
The batch I'm using to compile is as follows:
<br/>
<br/>
<span style="font-weight: bold">C:\Documents and Settings\XyuRi\Desktop&gt;cd C:\devkitadv\bin\
<br/>
<br/>
C:\devkitadv\bin&gt;gcc -o "c:\test.elf" "c:\test.c"
<br/>
<br/>
C:\devkitadv\bin&gt;objcopy -O "c:\test.bin" "c:\test.elf"
<br/>
objcopy: st003808: Invalid bfd target
<br/>
<br/>
C:\devkitadv\bin&gt;pause
<br/>
Press any key to continue . . .</span>
<br/>
<br/>
I have tried goooooogling that objcopy error and all I seem to find is that I'm trying to copy to a format that cannot be done... (or something like that)
<br/>
<br/>
Does anyone know what I could be doing wrong?
<br/>
<br/>
I appreciate any input on this. Thank you :-)
<br/>
<br/>
EDIT:
<br/>
<br/>
oh, and I have devkitadv installed. I've tried version 4 and version 5 alpha. there was no different between them in relation to this error ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44473 - tepples - Thu Jun 02, 2005 3:15 am</h4>
    <div class="postbody"><span class="postbody">For one thing, use the newer <a class="postlink" href="http://www.devkit.tk/" target="_blank">devkitARM</a>, not DevKit Advance r5 beta whatever.
<br/>
<br/>
For another, objcopy has a different syntax using the same argument order as MS-DOS copy or *n?x cp, but with -O specifying the output <span style="font-style: italic">format</span> (not the output file):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">objcopy   -O binary   "c:\test.elf" "c:\test.bin"</td> </tr></table><span class="postbody">
<br/>
<br/>
Finally, use the filename suffix .gba for your final GBA file. Skip the more .bin unless you're going to append a filesystem (GBFS, PogoFS, TAR, etc); many people have .bin associated to a Sega Genesis emulator.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44495 - xyuri - Thu Jun 02, 2005 8:12 am</h4>
    <div class="postbody"><span class="postbody">Thank you very much  tepples :-) got that working great.
<br/>
<br/>
There still arent any visuals for the little demo I'm trying ...
<br/>
<br/>
This is the code I'm using: (sorry, all in one file)
<br/>
<br/>
<span style="font-weight: bold">#include&lt;stdio.h&gt;
<br/>
#ifndef GBA_HEADER
<br/>
#define GBA_HEADER
<br/>
<br/>
typedef unsigned char u8;
<br/>
typedef unsigned short u16;
<br/>
typedef unsigned long u32;
<br/>
<br/>
typedef signed char s8;
<br/>
typedef signed short s16;
<br/>
typedef signed long s32;
<br/>
<br/>
typedef unsigned char byte;
<br/>
typedef unsigned short hword;
<br/>
typedef unsigned long word;
<br/>
<br/>
#define OAMmem 		((volatile u32*)0x7000000)
<br/>
#define VideoBuffer 	((volatile u16*)0x6000000)
<br/>
#define BackBuffer	((volatile u16*)0x600A000)
<br/>
#define OAMdata 	((volatile u16*)0x6100000)
<br/>
#define BGPaletteMem 	((volatile u16*)0x5000000)
<br/>
#define OBJPaletteMem 	((volatile u16*)0x5000200)
<br/>
<br/>
#define REG_INTERUPT   	(*(volatile u32*)0x3007FFC)
<br/>
#define REG_DISPCNT    	(*(volatile u32*)0x4000000)
<br/>
#define REG_DISPCNT_L  	(*(volatile u16*)0x4000000)
<br/>
#define REG_DISPCNT_H  	(*(volatile u16*)0x4000002)
<br/>
#define REG_DISPSTAT   	(*(volatile u16*)0x4000004)
<br/>
#define REG_VCOUNT     	(*(volatile u16*)0x4000006)
<br/>
#define REG_BG0CNT     	(*(volatile u16*)0x4000008)
<br/>
#define REG_BG1CNT     	(*(volatile u16*)0x400000A)
<br/>
#define REG_BG2CNT     	(*(volatile u16*)0x400000C)
<br/>
#define REG_BG3CNT     	(*(volatile u16*)0x400000E)
<br/>
#define REG_BG0HOFS    	(*(volatile u16*)0x4000010)
<br/>
#define REG_BG0VOFS    	(*(volatile u16*)0x4000012)
<br/>
#define REG_BG1HOFS    	(*(volatile u16*)0x4000014)
<br/>
#define REG_BG1VOFS    	(*(volatile u16*)0x4000016)
<br/>
#define REG_BG2HOFS    	(*(volatile u16*)0x4000018)
<br/>
#define REG_BG2VOFS    	(*(volatile u16*)0x400001A)
<br/>
#define REG_BG3HOFS    	(*(volatile u16*)0x400001C)
<br/>
#define REG_BG3VOFS    	(*(volatile u16*)0x400001E)
<br/>
#define REG_BG2PA      	(*(volatile u16*)0x4000020)
<br/>
#define REG_BG2PB      	(*(volatile u16*)0x4000022)
<br/>
#define REG_BG2PC      	(*(volatile u16*)0x4000024)
<br/>
#define REG_BG2PD      	(*(volatile u16*)0x4000026)
<br/>
#define REG_BG2X       	(*(volatile u32*)0x4000028)
<br/>
#define REG_BG2X_L     	(*(volatile u16*)0x4000028)
<br/>
#define REG_BG2X_H     	(*(volatile u16*)0x400002A)
<br/>
#define REG_BG2Y       	(*(volatile u32*)0x400002C)
<br/>
#define REG_BG2Y_L     	(*(volatile u16*)0x400002C)
<br/>
#define REG_BG2Y_H     	(*(volatile u16*)0x400002E)
<br/>
#define REG_BG3PA      	(*(volatile u16*)0x4000030)
<br/>
#define REG_BG3PB      	(*(volatile u16*)0x4000032)
<br/>
#define REG_BG3PC      	(*(volatile u16*)0x4000034)
<br/>
#define REG_BG3PD      	(*(volatile u16*)0x4000036)
<br/>
#define REG_BG3X       	(*(volatile u32*)0x4000038)
<br/>
#define REG_BG3X_L     	(*(volatile u16*)0x4000038)
<br/>
#define REG_BG3X_H     	(*(volatile u16*)0x400003A)
<br/>
#define REG_BG3Y       	(*(volatile u32*)0x400003C)
<br/>
#define REG_BG3Y_L     	(*(volatile u16*)0x400003C)
<br/>
#define REG_BG3Y_H     	(*(volatile u16*)0x400003E)
<br/>
#define REG_WIN0H      	(*(volatile u16*)0x4000040)
<br/>
#define REG_WIN1H      	(*(volatile u16*)0x4000042)
<br/>
#define REG_WIN0V      	(*(volatile u16*)0x4000044)
<br/>
#define REG_WIN1V      	(*(volatile u16*)0x4000046)
<br/>
#define REG_WININ      	(*(volatile u16*)0x4000048)
<br/>
#define REG_WINOUT     	(*(volatile u16*)0x400004A)
<br/>
#define REG_MOSAIC     	(*(volatile u32*)0x400004C)
<br/>
#define REG_MOSAIC_L   	(*(volatile u32*)0x400004C)
<br/>
#define REG_MOSAIC_H   	(*(volatile u32*)0x400004E)
<br/>
#define REG_BLDMOD     	(*(volatile u16*)0x4000050)
<br/>
#define REG_COLEV      	(*(volatile u16*)0x4000052)
<br/>
#define REG_COLEY      	(*(volatile u16*)0x4000054)
<br/>
#define REG_SG10       	(*(volatile u32*)0x4000060)
<br/>
#define REG_SG10_L     	(*(volatile u16*)0x4000060)
<br/>
#define REG_SG10_H     	(*(volatile u16*)0x4000062)
<br/>
#define REG_SG11       	(*(volatile u16*)0x4000064)
<br/>
#define REG_SG20       	(*(volatile u16*)0x4000068)
<br/>
#define REG_SG21       	(*(volatile u16*)0x400006C)
<br/>
#define REG_SG30       	(*(volatile u32*)0x4000070)
<br/>
#define REG_SG30_L     	(*(volatile u16*)0x4000070)
<br/>
#define REG_SG30_H     	(*(volatile u16*)0x4000072)
<br/>
#define REG_SG31       	(*(volatile u16*)0x4000074)
<br/>
#define REG_SG40       	(*(volatile u16*)0x4000078)
<br/>
#define REG_SG41       	(*(volatile u16*)0x400007C)
<br/>
#define REG_SGCNT0     	(*(volatile u32*)0x4000080)
<br/>
#define REG_SGCNT0_L   	(*(volatile u16*)0x4000080)
<br/>
#define REG_SGCNT0_H   	(*(volatile u16*)0x4000082)
<br/>
#define REG_SGCNT1     	(*(volatile u16*)0x4000084)
<br/>
#define REG_SGBIAS     	(*(volatile u16*)0x4000088)
<br/>
#define REG_SGWR0      	(*(volatile u32*)0x4000090)
<br/>
#define REG_SGWR0_L    	(*(volatile u16*)0x4000090)
<br/>
#define REG_SGWR0_H    	(*(volatile u16*)0x4000092)
<br/>
#define REG_SGWR1      	(*(volatile u32*)0x4000094)
<br/>
#define REG_SGWR1_L    	(*(volatile u16*)0x4000094)
<br/>
#define REG_SGWR1_H    	(*(volatile u16*)0x4000096)
<br/>
#define REG_SGWR2      	(*(volatile u32*)0x4000098)
<br/>
#define REG_SGWR2_L    	(*(volatile u16*)0x4000098)
<br/>
#define REG_SGWR2_H    	(*(volatile u16*)0x400009A)
<br/>
#define REG_SGWR3      	(*(volatile u32*)0x400009C)
<br/>
#define REG_SGWR3_L    	(*(volatile u16*)0x400009C)
<br/>
#define REG_SGWR3_H    	(*(volatile u16*)0x400009E)
<br/>
#define REG_SGFIF0A    	(*(volatile u32*)0x40000A0)
<br/>
#define REG_SGFIFOA_L  	(*(volatile u16*)0x40000A0)
<br/>
#define REG_SGFIFOA_H  	(*(volatile u16*)0x40000A2)
<br/>
#define REG_SGFIFOB    	(*(volatile u32*)0x40000A4)
<br/>
#define REG_SGFIFOB_L  	(*(volatile u16*)0x40000A4)
<br/>
#define REG_SGFIFOB_H  	(*(volatile u16*)0x40000A6)
<br/>
#define REG_DM0SAD     	(*(volatile u32*)0x40000B0)
<br/>
#define REG_DM0SAD_L   	(*(volatile u16*)0x40000B0)
<br/>
#define REG_DM0SAD_H   	(*(volatile u16*)0x40000B2)
<br/>
#define REG_DM0DAD     	(*(volatile u32*)0x40000B4)
<br/>
#define REG_DM0DAD_L   	(*(volatile u16*)0x40000B4)
<br/>
#define REG_DM0DAD_H   	(*(volatile u16*)0x40000B6)
<br/>
#define REG_DM0CNT     	(*(volatile u32*)0x40000B8)
<br/>
#define REG_DM0CNT_L   	(*(volatile u16*)0x40000B8)
<br/>
#define REG_DM0CNT_H   	(*(volatile u16*)0x40000BA)
<br/>
#define REG_DM1SAD     	(*(volatile u32*)0x40000BC)
<br/>
#define REG_DM1SAD_L   	(*(volatile u16*)0x40000BC)
<br/>
#define REG_DM1SAD_H   	(*(volatile u16*)0x40000BE)
<br/>
#define REG_DM1DAD     	(*(volatile u32*)0x40000C0)
<br/>
#define REG_DM1DAD_L   	(*(volatile u16*)0x40000C0)
<br/>
#define REG_DM1DAD_H   	(*(volatile u16*)0x40000C2)
<br/>
#define REG_DM1CNT     	(*(volatile u32*)0x40000C4)
<br/>
#define REG_DM1CNT_L   	(*(volatile u16*)0x40000C4)
<br/>
#define REG_DM1CNT_H   	(*(volatile u16*)0x40000C6)
<br/>
#define REG_DM2SAD     	(*(volatile u32*)0x40000C8)
<br/>
#define REG_DM2SAD_L   	(*(volatile u16*)0x40000C8)
<br/>
#define REG_DM2SAD_H   	(*(volatile u16*)0x40000CA)
<br/>
#define REG_DM2DAD     	(*(volatile u32*)0x40000CC)
<br/>
#define REG_DM2DAD_L   	(*(volatile u16*)0x40000CC)
<br/>
#define REG_DM2DAD_H   	(*(volatile u16*)0x40000CE)
<br/>
#define REG_DM2CNT     	(*(volatile u32*)0x40000D0)
<br/>
#define REG_DM2CNT_L   	(*(volatile u16*)0x40000D0)
<br/>
#define REG_DM2CNT_H   	(*(volatile u16*)0x40000D2)
<br/>
#define REG_DM3SAD     	(*(volatile u32*)0x40000D4)
<br/>
#define REG_DM3SAD_L   	(*(volatile u16*)0x40000D4)
<br/>
#define REG_DM3SAD_H   	(*(volatile u16*)0x40000D6)
<br/>
#define REG_DM3DAD     	(*(volatile u32*)0x40000D8)
<br/>
#define REG_DM3DAD_L   	(*(volatile u16*)0x40000D8)
<br/>
#define REG_DM3DAD_H   	(*(volatile u16*)0x40000DA)
<br/>
#define REG_DM3CNT     	(*(volatile u32*)0x40000DC)
<br/>
#define REG_DM3CNT_L   	(*(volatile u16*)0x40000DC)
<br/>
#define REG_DM3CNT_H   	(*(volatile u16*)0x40000DE)
<br/>
#define REG_TM0D       	(*(volatile u16*)0x4000100)
<br/>
#define REG_TM0CNT     	(*(volatile u16*)0x4000102)
<br/>
#define REG_TM1D       	(*(volatile u16*)0x4000104)
<br/>
#define REG_TM1CNT     	(*(volatile u16*)0x4000106)
<br/>
#define REG_TM2D       	(*(volatile u16*)0x4000108)
<br/>
#define REG_TM2CNT     	(*(volatile u16*)0x400010A)
<br/>
#define REG_TM3D       	(*(volatile u16*)0x400010C)
<br/>
#define REG_TM3CNT     	(*(volatile u16*)0x400010E)
<br/>
#define REG_SCD0       	(*(volatile u16*)0x4000120)
<br/>
#define REG_SCD1       	(*(volatile u16*)0x4000122)
<br/>
#define REG_SCD2       	(*(volatile u16*)0x4000124)
<br/>
#define REG_SCD3       	(*(volatile u16*)0x4000126)
<br/>
#define REG_SCCNT      	(*(volatile u32*)0x4000128)
<br/>
#define REG_SCCNT_L    	(*(volatile u16*)0x4000128)
<br/>
#define REG_SCCNT_H    	(*(volatile u16*)0x400012A)
<br/>
#define REG_P1         	(*(volatile u16*)0x4000130)
<br/>
#define REG_P1CNT      	(*(volatile u16*)0x4000132)
<br/>
#define REG_R          	(*(volatile u16*)0x4000134)
<br/>
#define REG_HS_CTRL    	(*(volatile u16*)0x4000140)
<br/>
#define REG_JOYRE      	(*(volatile u32*)0x4000150)
<br/>
#define REG_JOYRE_L    	(*(volatile u16*)0x4000150)
<br/>
#define REG_JOYRE_H    	(*(volatile u16*)0x4000152)
<br/>
#define REG_JOYTR      	(*(volatile u32*)0x4000154)
<br/>
#define REG_JOYTR_L    	(*(volatile u16*)0x4000154)
<br/>
#define REG_JOYTR_H    	(*(volatile u16*)0x4000156)
<br/>
#define REG_JSTAT      	(*(volatile u32*)0x4000158)
<br/>
#define REG_JSTAT_L    	(*(volatile u16*)0x4000158)
<br/>
#define REG_JSTAT_H    	(*(volatile u16*)0x400015A)
<br/>
#define REG_IE         	(*(volatile u16*)0x4000200)
<br/>
#define REG_IF         	(*(volatile u16*)0x4000202)
<br/>
#define REG_WSCNT      	(*(volatile u16*)0x4000204)
<br/>
#define REG_IME        	(*(volatile u16*)0x4000208)
<br/>
#define REG_PAUSE      	(*(volatile u16*)0x4000300)
<br/>
#endif
<br/>
<br/>
#ifndef __SCREENMODES__
<br/>
#define __SCREENMODES__
<br/>
#define SCREENMODE0    0x0                  //Enable screen mode 0
<br/>
#define SCREENMODE1    0x1                  //Enable screen mode 1
<br/>
#define SCREENMODE2    0x2                  //Enable screen mode 2
<br/>
#define SCREENMODE3    0x3                  //Enable screen mode 3
<br/>
#define SCREENMODE4    0x4                  //Enable screen mode 4
<br/>
#define SCREENMODE5    0x5                  //Enable screen mode 5
<br/>
#define BACKBUFFER     0x10                 //Determine backbuffer
<br/>
#define HBLANKOAM      0x20                 //Update OAM during HBlank?
<br/>
#define OBJMAP2D       0x0                  //2D object (sprite) mapping
<br/>
#define OBJMAP1D       0x40                 //1D object(sprite) mapping
<br/>
#define FORCEBLANK     0x80                 //Force a blank
<br/>
#define BG0ENABLE      0x100                //Enable background 0
<br/>
#define BG1ENABLE      0x200                //Enable background 1
<br/>
#define BG2ENABLE      0x400                //Enable background 2
<br/>
#define BG3ENABLE      0x800                //Enable background 3
<br/>
#define OBJENABLE      0x1000               //Enable sprites
<br/>
#define WIN1ENABLE     0x2000               //Enable window 1
<br/>
#define WIN2ENABLE     0x4000               //Enable window 2
<br/>
#define WINOBJENABLE   0x8000               //Enable object window
<br/>
#define SetMode(mode)        (REG_DISPCNT = mode)
<br/>
#endif
<br/>
<br/>
u16* theVideoBuffer = (u16*)VideoBuffer;
<br/>
#define RGB(r,g,b) (r+(g&lt;&lt;5)+(b&lt;&lt;10))
<br/>
<br/>
int main()
<br/>
<br/>
{
<br/>
<br/>
	SetMode( SCREENMODE3 | BG2ENABLE );      //Set screen mode
<br/>
<br/>
	//int x = 10, y = 10;                                                       //Pixel location
<br/>
	//theVideoBuffer[ x + y * 240 ] = RGB( 31, 31, 31 ); //Plot our pixel
<br/>
	theVideoBuffer[10 + 10 * 240 ] = RGB( 21, 1, 21 ); //Plot our pixel
<br/>
	theVideoBuffer[10 + 11 * 240 ] = RGB( 21, 1, 1 ); //Plot our pixel
<br/>
	theVideoBuffer[11 + 10 * 240 ] = RGB( 21, 1, 21 ); //Plot our pixel
<br/>
	theVideoBuffer[11 + 11 * 240 ] = RGB( 21, 1, 1 ); //Plot our pixel
<br/>
<br/>
	return 0;
<br/>
<br/>
}
<br/>
</span>
<br/>
<br/>
I dont really understand the RGB function (how it works) and if its the best way to go about this. .. also why is it just a blank white screen?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44497 - xyuri - Thu Jun 02, 2005 8:26 am</h4>
    <div class="postbody"><span class="postbody">aaaah ... finally .... I got a pixel ! *w000000000t* Its a start right ;-)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
