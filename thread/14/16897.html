<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>[SOLVED] Can't remote debug elf target with GDB and VBA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > [SOLVED] Can't remote debug elf target with GDB and VBA</h2>
<div id="posts">
<div class="post">
    <h4>#170567 - session13 - Fri Oct 02, 2009 5:08 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to remote debug example file <span style="font-style: italic">ansi_console</span> from devkitpro examples using <span style="font-style: italic">arm-eabi-gdb</span> (devkitARM_r26/bin/arm-eabi-gdb) and <span style="font-style: italic">VisualBoy Advance-1.7-SDL-linux-glibc22</span>. My OS is Linux Ubuntu 9.04.
<br/>
<br/>
<span style="font-style: italic">$ ./VisualBoyAdvance -Gtcp ansi_console.elf</span>
<br/>
<br/>
output:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">VisualBoyAdvance-SDL version 1.7
<br/>
Linux version
<br/>
Seaching for file VisualBoyAdvance.cfg
<br/>
Searching current dir: /opt/devkitpro/VisualBoyAdvance-1.7-SDL-linux-glibc22
<br/>
Reading configuration file.
<br/>
Parsing debug info
<br/>
Unknown block TAG 05
<br/>
Unknown block TAG 05
<br/>
Unknown block TAG 05
<br/>
Seaching for file vba-over.ini
<br/>
Searching current dir: /opt/devkitpro/VisualBoyAdvance-1.7-SDL-linux-glibc22
<br/>
Seaching home directory: /home/special
<br/>
Searching executable directory
<br/>
vba-over.ini NOT FOUND (using emulator settings)
<br/>
Listening for a connection at port 55555</td> </tr></table><span class="postbody">
<br/>
<br/>
<span style="font-style: italic">$ /devkitpro/devkitARM/bin$ ./arm-eabi-gdb</span>
<br/>
<br/>
output:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">GNU gdb 6.8
<br/>
Copyright (C) 2008 Free Software Foundation, Inc.
<br/>
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
<br/>
This is free software: you are free to change and redistribute it.
<br/>
There is NO WARRANTY, to the extent permitted by law.Â  Type "show copying"
<br/>
and "show warranty" for details.
<br/>
This GDB was configured as "--host=i586-pc-linux-gnu --target=arm-eabi".
<br/>
(gdb) </td> </tr></table><span class="postbody">
<br/>
<br/>
<span style="font-style: italic">$ target remote localhost:55555</span>
<br/>
<br/>
output:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Remote communication error: Connection reset by peer.</td> </tr></table><span class="postbody">
<br/>
<br/>
output on VisualBoy Advance terminal:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Got a connection from 127.0.0.1 43239
<br/>
ACK not received</td> </tr></table><span class="postbody">
<br/>
<br/>
Any help would be appreciated.</span><span class="gensmall"><br/><br/>Last edited by session13 on Wed Oct 21, 2009 5:34 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#170820 - session13 - Wed Oct 21, 2009 5:33 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold"><span style="font-style: italic">gdb-7.0</span> compiled as <span style="font-style: italic">--target=arm-elf</span> work with <span style="font-style: italic">VisualBoyAdvance-1.7-SDL-linux-glibc22</span></span>.
<br/>
<br/>
Source
<br/>
gdb-7.0 <a href="http://ftp.gnu.org/gnu/gdb/" target="_blank">http://ftp.gnu.org/gnu/gdb/</a>
<br/>
VisualBoyAdvance-1.7-SDL-linux-glibc22 <a href="http://vba.ngemu.com/downloads.shtml" target="_blank">http://vba.ngemu.com/downloads.shtml</a>
<br/>
ham-271-linux-full <a href="http://www.aaronrogers.com/ham/downloads.php" target="_blank">http://www.aaronrogers.com/ham/downloads.php</a>
<br/>
arm-elf-gdb compiled from gdb-7.0 <a href="http://rapidshare.com/files/369117227/arm-elf-gdb.tar.gz" target="_blank">http://rapidshare.com/files/369117227/arm-elf-gdb.tar.gz</a>
<br/>
arm-elf-gdbtui compiled from gdb-7.0 <a href="http://rapidshare.com/files/369114531/arm-elf-gdbtui" target="_blank">http://rapidshare.com/files/369114531/arm-elf-gdbtui</a>
<br/>
<br/>
Dependencies for compiling gdb can be found in gdb deb package
<br/>
<span style="font-style: italic">$ wget apt-get source gdb
<br/>
$ nano gdb-6.8/debian/control</span>
<br/>
<br/>
Dependencies for compiling GDB/Insight can be found in Insight deb package
<br/>
<span style="font-style: italic">$ wget apt-get source insight
<br/>
$ nano insight--6.7.1.dfsg.1/debian/control</span>
<br/>
<br/>
<span style="font-weight: bold">How to use <span style="font-style: italic">arm-elf-gdbtui</span> with vba through pipe</span>
<br/>
<span style="font-style: italic">$ arm-elf-gdbtui
<br/>
target remote | &lt;path&gt;/VisualBoyAdvance -Gpipe</span>
<br/>
<span style="font-style: italic">file &lt;file.elf&gt;</span> // load file to debug
<br/>
<span style="font-style: italic">load</span> // upload program to vba
<br/>
<br/>
gdb options:
<br/>
<span style="font-weight: bold">l</span> // show source code
<br/>
<span style="font-weight: bold">break</span> <span style="font-style: italic">&lt;line_number&gt;</span> // set breakpoint
<br/>
<span style="font-weight: bold">c</span> // continue until breakpoint
<br/>
<span style="font-weight: bold">n</span> // next (step over)
<br/>
<span style="font-weight: bold">s</span> // step (step into)
<br/>
<span style="font-weight: bold">quit</span> // quit program
<br/>
<br/>
gdb, Stopping and Continuing <a href="http://sourceware.org/gdb/current/onlinedocs/gdb_6.html#SEC32" target="_blank">http://sourceware.org/gdb/current/onlinedocs/gdb_6.html#SEC32</a>
<br/>
gdb, Examining Data <a href="http://sourceware.org/gdb/current/onlinedocs/gdb_11.html#SEC66" target="_blank">http://sourceware.org/gdb/current/onlinedocs/gdb_11.html#SEC66</a>
<br/>
<br/>
<span style="font-weight: bold">How to use <span style="font-style: italic">arm-elf-gdb</span> with <span style="font-style: italic">Data Display Debugger 3.3.11</span> (ddd)</span>
<br/>
<span style="font-style: italic">$ ddd --debugger &lt;path&gt;/arm-elf-gdb</span>
<br/>
In ddd/gdb console:
<br/>
<span style="font-style: italic">target remote | &lt;path&gt;VisualBoyAdvance -Gpipe
<br/>
file &lt;file.elf&gt;
<br/>
load</span>
<br/>
<br/>
When vba window is active, press Esc to close remote connection or F11 to return to gdb command line.
<br/>
Source: <a href="http://vba.ngemu.com/faq.shtml" target="_blank">http://vba.ngemu.com/faq.shtml</a>
<br/>
<br/>
<span style="font-weight: bold">How to use <span style="font-style: italic">gdb/vba</span> over tcp with <span style="font-style: italic">Eclipse</span></span>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=5271" target="_blank">http://forum.gbadev.org/viewtopic.php?t=5271</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
