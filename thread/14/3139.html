<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Reset of GBA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Reset of GBA</h2>
<div id="posts">
<div class="post">
    <h4>#18522 - punchy - Sun Mar 28, 2004 12:26 pm</h4>
    <div class="postbody"><span class="postbody">Hi, 
<br/>
   i want to add a menu option in my program to exit back to menu so users don't have to reset the gba to access other things on the flashcard. I thought it would be really simple, just set the PC to 0x8000000, but i guess i'm missing something. I tried the BIOS reset functions too, but they just seem to lock up the machine. 
<br/>
<br/>
Any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18545 - tepples - Sun Mar 28, 2004 7:49 pm</h4>
    <div class="postbody"><span class="postbody">To reset the GBA and the flash cart, do the following in code loaded into EWRAM:<ul><li>Reset the cart's bankswitch register to 0. This is different on Visoly, F2A Ultra, EZF, and EFA type carts. (F2A classic has the same bankswitch register as Visoly.)</li><li>Clear the registers and video RAM by calling BIOS RegisterRamReset(0xfc).</li><li>Jump to 0x08000000 in ARM mode.</li></ul>
<br/>
This has to be done in code loaded into EWRAM because if you write to bankswitching registers from ROM, your code will disappear out from under the program counter.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18552 - Lupin - Sun Mar 28, 2004 9:46 pm</h4>
    <div class="postbody"><span class="postbody">Do we really need to reset Bankswitch? I thought it's only necesarry when using carts that are &gt;256 mbit. How can i set the bankswitch?
<br/>
<br/>
An reset function sounds quite interesting...<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18554 - tepples - Sun Mar 28, 2004 10:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">Do we really need to reset Bankswitch? I thought it's only necesarry when using carts that are &gt;256 mbit.</td> </tr></table><span class="postbody">
<br/>
Each commercial game is compiled to assume that it starts at 0x08000000, so flash carts have to bankswitch them. If you're just running a RAM based (__gba_multiboot) program, you don't need to bankswitch because those are copied to 0x02000000 before being run.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">How can i set the bankswitch?</td> </tr></table><span class="postbody">
<br/>
Ask the PogoShell maintainer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18557 - punchy - Sun Mar 28, 2004 10:17 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the reply. I had tried searching for previous topics before, but "bankswitching" turned out to be the magic word. I found your old post complete with reset code and it works beautifully. 
<br/>
<br/>
Thanks again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18566 - dagamer34 - Mon Mar 29, 2004 12:52 am</h4>
    <div class="postbody"><span class="postbody">Could you post a link to which topic that was. I can't seem to find it.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18589 - punchy - Mon Mar 29, 2004 9:56 am</h4>
    <div class="postbody"><span class="postbody"><a href="http://forum.gbadev.org/viewtopic.php?t=352" target="_blank">http://forum.gbadev.org/viewtopic.php?t=352</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18616 - dagamer34 - Mon Mar 29, 2004 11:24 pm</h4>
    <div class="postbody"><span class="postbody">That code doesn't really help me since I use an EZFA, but it already has an exit-hacking option.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
