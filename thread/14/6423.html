<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Which modulus being used - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Which modulus being used</h2>
<div id="posts">
<div class="post">
    <h4>#49273 - ymalik - Thu Jul 28, 2005 12:26 am</h4>
    <div class="postbody"><span class="postbody">When I use the % operator, is swi 6 called?  If not, how is it being done, and is it slower than using the bios function?
<br/>
<br/>
Thanks,
<br/>
Yasir</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49274 - poslundc - Thu Jul 28, 2005 12:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ymalik wrote:</b></span></td> </tr> <tr> <td class="quote">When I use the % operator, is swi 6 called?</td> </tr></table><span class="postbody">
<br/>
<br/>
No.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If not, how is it being done</td> </tr></table><span class="postbody">
<br/>
<br/>
Using the GCC division algorithm.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">and is it slower than using the bios function?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes. But be aware that:
<br/>
<br/>
1. You can beat the BIOS with your own routine.
<br/>
<br/>
2. You can get something very near to modulus with the bitwise-AND operator where the divisor is an even power of two. Eg. (x &amp; 31) == (x % 32) for all positive values of x (negative values will "wrap around", which they don't do with modulus, but is actually a useful functionality).
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49275 - tepples - Thu Jul 28, 2005 12:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ymalik wrote:</b></span></td> </tr> <tr> <td class="quote">When I use the % operator, is swi 6 called?</td> </tr></table><span class="postbody">
<br/>
<br/>
No.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If not, how is it being done</td> </tr></table><span class="postbody">
<br/>
<br/>
Using the GCC division algorithm.</span></td> </tr></table><span class="postbody">
<br/>
Doesn't the latest version of devkitARM's libgba route the / and % operators through the BIOS in many cases?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49286 - poslundc - Thu Jul 28, 2005 6:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Doesn't the latest version of devkitARM's libgba route the / and % operators through the BIOS in many cases?</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know... I just know that my pathetically outdated version of Devkit Advance does not. It's cool if they do, though.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49513 - ymalik - Sat Jul 30, 2005 7:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
1. You can beat the BIOS with your own routine.
<br/>
</td> </tr></table><span class="postbody">
<br/>
How does the BIOS do it?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
2. You can get something very near to modulus with the bitwise-AND operator where the divisor is an even power of two. Eg. (x &amp; 31) == (x % 32) for all positive values of x (negative values will "wrap around", which they don't do with modulus, but is actually a useful functionality).</td> </tr></table><span class="postbody">
<br/>
I never thought about that.  My divisor is 16.
<br/>
<br/>
Much thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49516 - poslundc - Sat Jul 30, 2005 7:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ymalik wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
1. You can beat the BIOS with your own routine.
<br/>
</td> </tr></table><span class="postbody">
<br/>
How does the BIOS do it?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know the exact routine it uses, but <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3692" target="_blank">this thread</a> does some speed profiling.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
