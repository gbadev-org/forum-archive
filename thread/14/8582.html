<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Displaying problem in MODE4 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Displaying problem in MODE4</h2>
<div id="posts">
<div class="post">
    <h4>#71814 - Miles_wy_1 - Tue Feb 14, 2006 5:46 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://www.dodoq.cn/cgdn/upload/forum6_f_930.jpg">[Images not permitted - Click here to view it]</a>
<br/>
I want to diplay the picture above.But it turned out like this:
<br/>
<a href="http://www.dodoq.cn/cgdn/upload/forum6_f_930_1139929963.jpg">[Images not permitted - Click here to view it]</a>
<br/>
I dont know Y.
<br/>
this is my source code:
<br/>
<br/>
#include "gba.h"
<br/>
#include "dragon.h"
<br/>
int main()
<br/>
{
<br/>
int y,x;
<br/>
SetMode(MODE_4|BG2_ENABLE);
<br/>
    for (x=0;x&lt;256 ;x++ )
<br/>
    {	
<br/>
		BG_PaletteMem[x]=dragonPalette[x];
<br/>
    }
<br/>
	for (y=0;y&lt;160 ;y++ )
<br/>
	{
<br/>
		for (x=0;x&lt;120; x++)
<br/>
		{
<br/>
		               FrontBuffer[(y)*120+(x)]=dragonData[(y)*120+(x)];
<br/>
		}		
<br/>
	}
<br/>
    return 0;
<br/>
}
<br/>
I know it's a very simple program,but it troubled me a lot.
<br/>
all the pointers are type of U16,is there any significant aspect that i ignored?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71827 - kusma - Tue Feb 14, 2006 7:11 pm</h4>
    <div class="postbody"><span class="postbody">it looks to me like you're trying to display a tiled image in a linear framebuffer. how did you convert the bitmap?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71877 - tonkinfash - Wed Feb 15, 2006 1:34 am</h4>
    <div class="postbody"><span class="postbody">I'm presuming that the dragon image is also an array of unisgned shorts...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71899 - Miles_wy_1 - Wed Feb 15, 2006 6:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">it looks to me like you're trying to display a tiled image in a linear framebuffer. how did you convert the bitmap?</td> </tr></table><span class="postbody">
<br/>
<br/>
I use a tool named Bmp2head to convert the bitmap.It's downloaded from GBAdev.org.
<br/>
The "dragon.h" has two arrays like this:
<br/>
const u16 dragonData[] = {
<br/>
                    0x3a3a,0x3a3a,0x3a3a,0x3a3a,...
<br/>
}
<br/>
const u16 dragonPalette[] = {
<br/>
                    0x7fff,0x67ff,0x4bff,0x7f3f,...
<br/>
}
<br/>
<br/>
Wow,wait~
<br/>
I just read the README file of BMP2HEAD.It says"The program splits the image into 8x8 tiles when it saves it as a Header file, so it can be loaded into the GBA in a simple way."I think that's the solution....
<br/>
BTW,like your suggestion,how can I display a picture in a linear framebuffer.Is there any tools that help?It seems that all the converters change pictures into tiled image...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71904 - gauauu - Wed Feb 15, 2006 6:53 am</h4>
    <div class="postbody"><span class="postbody">Cearn's <a class="postlink" href="http://user.chem.tue.nl/jakvijn/downloads.htm#wingit" target="_blank">Wingit and Usenti</a> have very configurable exporters.  You can export to just about anything you want.
<br/>
<br/>
Also, you might want to read up in the faq or do a search here about why it's bad to put graphics data in header files.  If your tool spits out C code, it's best to at least turn them into .c files and compile/link them separately.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71912 - Miles_wy_1 - Wed Feb 15, 2006 8:39 am</h4>
    <div class="postbody"><span class="postbody">Problem Soluted!~Thanks in advance!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
