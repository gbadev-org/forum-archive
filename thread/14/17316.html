<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Having trouble with Visual HAM...(troubleshhoting) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Having trouble with Visual HAM...(troubleshhoting)</h2>
<div id="posts">
<div class="post">
    <h4>#174694 - ericd3742 - Fri Jul 09, 2010 1:43 am</h4>
    <div class="postbody"><span class="postbody">i am learning how to use HAM, and i have been trying to build the program on page 29 of [http://www.aaronrogers.com/ham/Books/PTGBA/GBA_05.pdf] and i cant find what i have done wrong! the HAM error thing at the bottom of the window says i have multiple errors. it says this: 
<br/>
<br/>
/gcc-arm/bin/arm-thumb-elf-gcc.exe  -I /gcc-arm/include -I /gcc-arm/arm-thumb-elf/include -I /include -I /system  -c -DHAM_HAM  -DHAM_MULTIBOOT  -DHAM_ENABLE_MBV2LIB -O2 -DHAM_WITH_LIBHAM  -mthumb-interwork -mlong-calls -Wall -save-temps -fverbose-asm -nostartfiles main.c -o main.o
<br/>
main.c: In function `main':
<br/>
main.c:24: error: `REG_DISPCNT' undeclared (first use in this function)
<br/>
main.c:24: error: (Each undeclared identifier is reported only once
<br/>
main.c:24: error: for each function it appears in.)
<br/>
main.c:28: error: `X' undeclared (first use in this function)
<br/>
main.c:29: error: `mode3_Bitmap' undeclared (first use in this function)
<br/>
make: *** [main.o] Error 1
<br/>
<br/>
my code looks like this:
<br/>
<br/>
#define MULTIBOOT int __gba_multiboot;
<br/>
MULTIBOOT
<br/>
<br/>
//include files
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include "mode3.raw.c"
<br/>
<br/>
void DrawPixel3(int, int, unsigned short);
<br/>
<br/>
#define RED_DISPCNT *(unsigned long*)0x4000000
<br/>
#define MODE_3 0x3
<br/>
#define BG2_ENABLE 0x400
<br/>
<br/>
#define SetMode(mode) REG_DISPCNT = (mode)
<br/>
<br/>
unsigned short* videoBuffer = (unsigned short*)0x6000000;
<br/>
<br/>
//function: main()
<br/>
<br/>
int main(void)
<br/>
{
<br/>
    int x, y;
<br/>
<br/>
    SetMode(MODE_3 | BG2_ENABLE);
<br/>
<br/>
    //display the bitmap
<br/>
    for(y = 0; y &lt; 160; y++)
<br/>
        for(x = 0; X &lt; 240; x++)
<br/>
            DrawPixel3(x, y, mode3_Bitmap[y * 240 + x]);
<br/>
<br/>
    //loop
<br/>
    while(1)
<br/>
    {
<br/>
    }
<br/>
    return 0;
<br/>
}
<br/>
<br/>
<br/>
if anybody can tell me what ive done wrong it would be greatly appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174695 - headspin - Fri Jul 09, 2010 2:29 am</h4>
    <div class="postbody"><span class="postbody">Check the spelling of RED_DISPCNT (G not D) and remember that variables in C are case sensitive (you have an uppercase X &lt; 240)<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174696 - ericd3742 - Fri Jul 09, 2010 3:02 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>headspin wrote:</b></span></td> </tr> <tr> <td class="quote">Check the spelling of RED_DISPCNT (G not D) and remember that variables in C are case sensitive (you have an uppercase X &lt; 240)</td> </tr></table><span class="postbody">
<br/>
<br/>
thanks, i guess my eyes dont notice spelling errors like yours do.
<br/>
<br/>
but, i still have errors:
<br/>
<br/>
/gcc-arm/bin/arm-thumb-elf-gcc.exe  -I /gcc-arm/include -I /gcc-arm/arm-thumb-elf/include -I /include -I /system  -c -DHAM_HAM  -DHAM_MULTIBOOT  -DHAM_ENABLE_MBV2LIB -O2 -DHAM_WITH_LIBHAM  -mthumb-interwork -mlong-calls -Wall -save-temps -fverbose-asm -nostartfiles main.c -o main.o
<br/>
main.c: In function `main':
<br/>
main.c:29: error: `mode3_Bitmap' undeclared (first use in this function)
<br/>
main.c:29: error: (Each undeclared identifier is reported only once
<br/>
main.c:29: error: for each function it appears in.)
<br/>
make: *** [main.o] Error 1
<br/>
<br/>
my code now looks like this:
<br/>
<br/>
#define MULTIBOOT int __gba_multiboot;
<br/>
MULTIBOOT
<br/>
<br/>
//include files
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include "mode3.raw.c"
<br/>
<br/>
void DrawPixel3(int, int, unsigned short);
<br/>
<br/>
#define REG_DISPCNT *(unsigned long*)0x4000000
<br/>
#define MODE_3 0x3
<br/>
#define BG2_ENABLE 0x400
<br/>
<br/>
#define SetMode(mode) REG_DISPCNT = (mode)
<br/>
<br/>
unsigned short* videoBuffer = (unsigned short*)0x6000000;
<br/>
<br/>
//function: main()
<br/>
<br/>
int main(void)
<br/>
{
<br/>
    int x, y;
<br/>
<br/>
    SetMode(MODE_3 | BG2_ENABLE);
<br/>
<br/>
    //display the bitmap
<br/>
    for(y = 0; y &lt; 160; y++)
<br/>
        for(x = 0; x &lt; 240; x++)
<br/>
            DrawPixel3(x, y, mode3_Bitmap[y * 240 + x]);
<br/>
<br/>
    //loop
<br/>
    while(1)
<br/>
    {
<br/>
    }
<br/>
    return 0;
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174720 - KayH - Sat Jul 10, 2010 10:34 am</h4>
    <div class="postbody"><span class="postbody">In:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DrawPixel3(x, y, mode3_Bitmap[y * 240 + x]); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
the mode3_Bitmap[] is an array representing your bitmap. This is (or have to) defined in the "mode3.raw.c" which you include some lines above.
<br/>
Please have a look inside this generated file and check for the correct name of the array.
<br/>
<br/>
Please have also a look about good programming style, especially about including c-files.
<br/>
<br/>
hth
<br/>
Kay</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
