<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Setting a Background To Use a Specified 16-Colour Palette - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Setting a Background To Use a Specified 16-Colour Palette</h2>
<div id="posts">
<div class="post">
    <h4>#32862 - Celeryface - Tue Dec 28, 2004 9:36 pm</h4>
    <div class="postbody"><span class="postbody">Hi there,
<br/>
<br/>
When loading/setting up your background how to do set the 16-colour palette number, as I've read you can use 16 16-colour palettes. 
<br/>
<br/>
I have 2 256-colour backgrounds, and 1 background set to 16-colours so that I can use it for text support.
<br/>
<br/>
I want to use another palette for my text that uses palette index 0,1. I'm the using AGBTTY library and my palette for my backgrounds doesn't take up all 256 colours of the palette. Is it possible to tell the hardware to use a specific palette set just for the text?
<br/>
<br/>
Thanks in advance. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32864 - tepples - Tue Dec 28, 2004 9:41 pm</h4>
    <div class="postbody"><span class="postbody">Provided you have loaded an appropriate font into VRAM:
<br/>
agbtty_textattr(0x0000) will use colors 1 through 15
<br/>
agbtty_textattr(0x1000) will use colors 17 through 31
<br/>
agbtty_textattr(0x2000) will use colors 33 through 47
<br/>
...
<br/>
agbtty_textattr(0xF000) will use colors 241 through 255<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Tue Dec 28, 2004 9:51 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#32868 - Celeryface - Tue Dec 28, 2004 9:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Provided you have loaded an appropriate font into VRAM:
<br/>
agbtty_textattr(0x0000) will use colors 1 through 15
<br/>
agbtty_textattr(0x1000) will use colors 17 through 31</td> </tr></table><span class="postbody">
<br/>
<br/>
Nice!
<br/>
Is there one to use colours above 31? Specifically I'm looking to use 32 and 33.
<br/>
<br/>
Edit: agbtty_textattr(0x2000);
<br/>
<br/>
Thanks! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32869 - tepples - Tue Dec 28, 2004 9:53 pm</h4>
    <div class="postbody"><span class="postbody">Caught me in mid-edit.
<br/>
<br/>
You can't use colors 32 and 33, as color 32 is transparent in 16 color mode, but you can use 33 and 34. Are you trying to use two colors together in one glyph, or are you trying to make a glyph of one color and the same glyph of another color?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32870 - Celeryface - Tue Dec 28, 2004 9:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Caught me in mid-edit.
<br/>
<br/>
You can't use colors 32 and 33, as color 32 is transparent in 16 color mode, but you can use 33 and 34. Are you trying to use two colors together in one glyph, or are you trying to make a glyph of one color and the same glyph of another color?</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm using 32 for the transparent (black) colour, and 33 for the actual colour of the font. Is it possible to get an outline colour on the text?
<br/>
<br/>
What's a glyph? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32875 - tepples - Tue Dec 28, 2004 10:40 pm</h4>
    <div class="postbody"><span class="postbody">A <a class="postlink" href="http://store.adobe.com/type/topics/glossary.html#glyph" target="_blank">glyph</a> is an image, either vector or raster, that represents a character. For instance, there is only one character 'Latin capital letter A', but <a class="postlink" href="http://pinocchio.jk0.org/nes/8x8s.png" target="_blank">each font</a> has its own distinct glyph for it. A <a class="postlink" href="http://en.wikipedia.org/wiki/Relation_%28mathematics%29" target="_blank">relation</a> from a set of characters to a set of glyphs is called a "font" over those characters, and a set of fonts with similar design characteristics is called a "typeface".
<br/>
<br/>
You can get an outline or a drop shadow by drawing a different font in a tile editor and then copying agbtty_init() and making it load your font, replacing   the call to upcvt_4bit() with a DMA memcpy() or a call to whatever conversion or decompression function you prefer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32877 - Celeryface - Tue Dec 28, 2004 10:46 pm</h4>
    <div class="postbody"><span class="postbody">Cool. Thanks for the info :)
<br/>
<br/>
What's the easiest way to import new fonts? I'm using the one from AGBTTY  "text.chr" then I convert it to chr.h using the tool provided. I want to use the original NES font found in that link you provided.
<br/>
<br/>
Thanks :)
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">A <a class="postlink" href="http://store.adobe.com/type/topics/glossary.html#glyph" target="_blank">glyph</a> is an image, either vector or raster, that represents a character. For instance, there is only one character 'Latin capital letter A', but <a class="postlink" href="http://pinocchio.jk0.org/nes/8x8s.png" target="_blank">each font</a> has its own distinct glyph for it. A <a class="postlink" href="http://en.wikipedia.org/wiki/Relation_%28mathematics%29" target="_blank">relation</a> from a set of characters to a set of glyphs is called a "font" over those characters, and a set of fonts with similar design characteristics is called a "typeface".
<br/>
<br/>
You can get an outline or a drop shadow by drawing a different font in a tile editor and then copying agbtty_init() and making it load your font, replacing   the call to upcvt_4bit() with a DMA memcpy() or a call to whatever conversion or decompression function you prefer.</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by Celeryface on Tue Dec 28, 2004 11:10 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#32879 - tepples - Tue Dec 28, 2004 10:52 pm</h4>
    <div class="postbody"><span class="postbody">Any bitmap to tile converter from gbadev.org will spit out tiles in various formats.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32880 - Celeryface - Tue Dec 28, 2004 10:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Any bitmap to tile converter from gbadev.org will spit out tiles in various formats.</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm pretty new at editing font bitmaps. What format does the bitmaps have to be in? Do I need to save it as a .chr file?
<br/>
<br/>
Thanks again :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32886 - tepples - Tue Dec 28, 2004 11:48 pm</h4>
    <div class="postbody"><span class="postbody">Which image converter are you using? Perhaps it can output 16-color tiles as well.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32888 - Celeryface - Tue Dec 28, 2004 11:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Which image converter are you using? Perhaps it can output 16-color tiles as well.</td> </tr></table><span class="postbody">
<br/>
<br/>
For backgrounds I use gfx2gba. For sprites I use pcx2sprite.
<br/>
<br/>
I'm unsure of how to create the actual bitmap and save it as a .chr file :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32901 - tepples - Wed Dec 29, 2004 2:36 am</h4>
    <div class="postbody"><span class="postbody">Make sure that the bitmap has one glyph in each 8x8 space and that the glyphs are arranged in ASCII order, left to right and top to bottom. For example, you could cut a 128x32 or 128x48 pixel block out of any of the NES fonts I posted. Then convert the bitmap to indexed color and make sure the bitmap uses color 0 for transparency and any or all of colors 1 through 15 for everything else. Then use gfx2gba to convert it to a .chr file, but use a straight CPU or DMA memcpy() to put it in VRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32928 - Celeryface - Wed Dec 29, 2004 8:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Make sure that the bitmap has one glyph in each 8x8 space and that the glyphs are arranged in ASCII order, left to right and top to bottom. For example, you could cut a 128x32 or 128x48 pixel block out of any of the NES fonts I posted. Then convert the bitmap to indexed color and make sure the bitmap uses color 0 for transparency and any or all of colors 1 through 15 for everything else. Then use gfx2gba to convert it to a .chr file, but use a straight CPU or DMA memcpy() to put it in VRAM.</td> </tr></table><span class="postbody">
<br/>
<br/>
Okay, cool. I'll give that a try. :)
<br/>
<br/>
I didn't know gfx2gba could output .chr files.
<br/>
<br/>
Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#32961 - tepples - Wed Dec 29, 2004 6:20 pm</h4>
    <div class="postbody"><span class="postbody">.chr files are just a generic term for raw tile data.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33067 - Celeryface - Thu Dec 30, 2004 5:22 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.celeryface.com/img/chr.bmp" target="_blank">Image</a>
<br/>
<br/>
Is this bitmap in the correct format/layout to use in AGBTTY?
<br/>
<br/>
Also, what parameters should I use in gfx2gba for this?
<br/>
<br/>
Thanks again. :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
