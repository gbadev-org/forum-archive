<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mode4 and sprites problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Mode4 and sprites problem</h2>
<div id="posts">
<div class="post">
    <h4>#26229 - isildur - Thu Sep 09, 2004 9:22 pm</h4>
    <div class="postbody"><span class="postbody">I searched this forum and read gbatek and cowbite but now I am stumped.
<br/>
<br/>
I am using mode 4 and I want to use sprites for displaying text. I don't know if it's a good approach but I already have some raster fonts for this but I thought I could try with sprites instead.
<br/>
<br/>
So I managed to load my sprite data at the correct place in vram. (By the way I use double buffering in mode 4).
<br/>
<br/>
The problem is that the sprites are displayed behind the bit blitting. I need those sprites at the very topmost. Is it possible? How?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26230 - DiscoStew - Thu Sep 09, 2004 9:32 pm</h4>
    <div class="postbody"><span class="postbody">I know with Mode 5 people have been able to rotate the frame buffer by using control registers and affine matrix register related to either background 2 of 3 (Please correct me on this, I've never tried that, only heard). If that is true, couldn't you use a control register of either background 2 or 3 to change it's priority? Or maybe you can change the priority on the sprites? Someone else might explain better than I can on the subject, or know exactly how to do it. I'm just putting in my 2 cents.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26237 - tepples - Fri Sep 10, 2004 12:55 am</h4>
    <div class="postbody"><span class="postbody">The order in OAM determines priority against other sprites. Attribute 2 bits 11-10 determines priority against the background.
<br/>
<br/>
If sprites are showing up behind the mode 4 background, then make sure the sprites are first in the OAM display list and drawn at priority 0.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26249 - isildur - Fri Sep 10, 2004 4:59 am</h4>
    <div class="postbody"><span class="postbody">I did try setting the oam priority but the sprite is always behind my raster drawing.
<br/>
<br/>
:(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26272 - isildur - Sat Sep 11, 2004 12:11 am</h4>
    <div class="postbody"><span class="postbody">Sorry to push but, no replies since yesterday...
<br/>
<br/>
Does anybody have an example of sprites in mode 4 when also doing raster operations in vram. Using mode 4 with sprites/tiles only does work. 
<br/>
<br/>
The problem is when I use sprites and draw stuff like polygons or raster bitmaps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26277 - opcode - Sat Sep 11, 2004 2:52 am</h4>
    <div class="postbody"><span class="postbody">I am using mode 4 double buffered. All my sprites are showing up on top of the background. I'm not doing anything special either. So, at the very least I can tell you it's possible, but you probably already knew that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26279 - isildur - Sat Sep 11, 2004 4:32 am</h4>
    <div class="postbody"><span class="postbody">Then what could I be doing wrong?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26280 - DekuTree64 - Sat Sep 11, 2004 4:45 am</h4>
    <div class="postbody"><span class="postbody">I think we need a screenshot and/or some code to figure out what's happening. Just to be sure, you're using sprite chars 512+, aren't you? They shouldn't display at all if you use below that, but it's a common 'gotcha' of the GBA hardware.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26285 - isildur - Sat Sep 11, 2004 1:39 pm</h4>
    <div class="postbody"><span class="postbody">The sprites display indeed but behind any drawing I do. To show you screenshots, I have to prepare something else because I don't think I can show stuff that will be submitted to the compo.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26295 - sajiimori - Sat Sep 11, 2004 5:36 pm</h4>
    <div class="postbody"><span class="postbody">If I'm not mistaken, it's impossible for sprites to show up behind any backgrounds if the sprites are set to priority 0.  Double and triple check that you are setting them to priority 0 -- decode the OAM by hand if you have to.  There is simply no other setting that could cause them to be drawn behind the background -- not even if the background's priority is 0.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26344 - FluBBa - Mon Sep 13, 2004 2:46 pm</h4>
    <div class="postbody"><span class="postbody">This is a long shot, you don't happen to be using RascalBoy?
<br/>
I just saw this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Corretto errore priorit?, per gli sprites nella modalit? di disegno 4.</td> </tr></table><span class="postbody">
<br/>
Corrected sprite priority for mode4, Aug 1.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26348 - isildur - Mon Sep 13, 2004 4:14 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, I found my bug. I was overwriting the oam priority bits when setting other bits later on. Everything works fine now :)
<br/>
<br/>
Sajiimori, thanks for making me double check those bits.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
