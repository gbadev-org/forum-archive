<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How is actual sprite data converted? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > How is actual sprite data converted?</h2>
<div id="posts">
<div class="post">
    <h4>#12165 - yaustar - Sat Nov 01, 2003 8:07 pm</h4>
    <div class="postbody"><span class="postbody">at the moment I am trying to write a function to edit the colour an pixel in a particular sprite along the lines of
<br/>
<br/>
editSprite(x,y, colour){}
<br/>
<br/>
but am unsure of how the data in sprites is stored. 
<br/>
<br/>
Using 256 colour sprites the data is stored as a 16 bit number
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">BBBB BBBB AAAA AAAA</td> </tr></table><span class="postbody">
<br/>
<br/>
I am guessing that each half of the data represents a pixel with a colour index according to the palette.
<br/>
<br/>
My problem is which pixels is it referring to?
<br/>
<br/>
imagine an 8x8 sprite in pixels
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
01234567
<br/>
ABCDEFGH
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
does the data represent the pixels 0 and A as:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0000 0000 AAAA AAAA</td> </tr></table><span class="postbody">
<br/>
or 0 and 1
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">1111 1111 0000 0000</td> </tr></table><span class="postbody">
<br/>
and then what does the next data in the array represent? The X and X below it or 1 and B next to it across or 2 and 3/A and B.
<br/>
<br/>
If you are still reading at this point then thanks and any help clarifing this would be appreciated.
<br/>
<br/>
Side note. I understand that larger sprites and divided into 8x8 squares left to right then the next row down.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12166 - tepples - Sat Nov 01, 2003 8:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yaustar wrote:</b></span></td> </tr> <tr> <td class="quote">but am unsure of how the data in sprites is stored. 
<br/>
<br/>
Using 256 colour sprites the data is stored as a 16 bit number
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">BBBB BBBB AAAA AAAA</td> </tr></table><span class="postbody">
<br/>
<br/>
I am guessing that each half of the data represents a pixel with a colour index according to the palette.
<br/>
<br/>
My problem is which pixels is it referring to?
<br/>
<br/>
imagine an 8x8 sprite in pixels
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
01234567
<br/>
ABCDEFGH
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
XXXXXXXX
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
Pseudocode for how it's stored:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">unsigned short sprite[8][4] =
<br/>
{
<br/>
  {0x1100,0x3322,0x5544,0x7766},
<br/>
  {0xBBAA,0xDDCC,0xFFEE,0xHHGG},  /* before you complain, this is PSEUDO code */
<br/>
  {0xXXXX,0xXXXX,0xXXXX,0xXXXX},
<br/>
  {0xXXXX,0xXXXX,0xXXXX,0xXXXX},
<br/>
  {0xXXXX,0xXXXX,0xXXXX,0xXXXX},
<br/>
  {0xXXXX,0xXXXX,0xXXXX,0xXXXX},
<br/>
  {0xXXXX,0xXXXX,0xXXXX,0xXXXX},
<br/>
  {0xXXXX,0xXXXX,0xXXXX,0xXXXX}
<br/>
};</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12167 - yaustar - Sat Nov 01, 2003 8:52 pm</h4>
    <div class="postbody"><span class="postbody">well, that supports my thoery but unfortunely screws my code over.
<br/>
 why couldnt the gba be a nice gba :(
<br/>
<br/>
Thanks tepples for the clear up and whenever would i complain :p
<br/>
<br/>
might as well post the bad code while I try to fix it :\
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//---Edit Radar sprite 64x64---//
<br/>
void func_drawBitRadar(u8 var_y, u8 var_x, u16 var_colour)
<br/>
{
<br/>
    bool even_odd;//false is even, true is odd
<br/>
    u8 var_newX, var_newY, var_diffY, var_diffX;//temp variables
<br/>
    
<br/>
    if(((var_x &gt;&gt; 1)&lt;&lt; 1) == var_x)
<br/>
    {even_odd = false;}
<br/>
    else
<br/>
    {even_odd = true;}
<br/>
    
<br/>
    var_newX = (var_x &gt;&gt; 3);//divide by eight 
<br/>
    var_newY = (var_y &gt;&gt; 3);//divide by eight
<br/>
    var_diffX = var_x - var_newX;//obtain the reminder
<br/>
    var_diffY = var_y - var_newY;//obtain the reminder
<br/>
    
<br/>
    if(even_odd==false)
<br/>
    {
<br/>
        radar[(var_newY &lt;&lt; 8)+(var_diffY &lt;&lt; 2) + 
<br/>
            (var_newX &lt;&lt; 5) + (var_diffX &gt;&gt; 1)] |= var_colour;
<br/>
    }
<br/>
    else
<br/>
    {
<br/>
        radar[(var_newY &lt;&lt; 8)+(var_diffY &lt;&lt; 2) + 
<br/>
            (var_newX &lt;&lt; 5) + (var_diffX &gt;&gt; 1)] |= var_colour &lt;&lt; 8;
<br/>
    }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
Basically it is suppose to be able to edit any pixel in a 64x64 sprite but it isn't working during its tests...if anyone can give me a hint what might be wring then I be very grateful.
<br/>
<br/>
edit: It's now fixed, minor error in the precalculation<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
