<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Warning Message I don't get - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Warning Message I don't get</h2>
<div id="posts">
<div class="post">
    <h4>#42815 - Impatient - Sun May 15, 2005 6:53 am</h4>
    <div class="postbody"><span class="postbody">warning: large integer implicitly truncated to unsigned type
<br/>
WHY??
<br/>
<br/>
in this code:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define RGB16(r,g,b) ((r)&lt;&lt;PLTT_RED_SHIFT|((g)&lt;&lt;PLTT_GREEN_SHIFT)|((b)&lt;&lt;PLTT_BLUE_SHIFT))
<br/>
<br/>
{
<br/>
    unsigned char x;
<br/>
    unsigned char y;
<br/>
    unsigned short int *ptr_vram = (unsigned short int*)VRAM;
<br/>
<br/>
    *(volatile unsigned short int *)REG_DISPCNT = DISP_MODE_3 | DISP_BG2_ON;
<br/>
<br/>
    for(x = 0; x &lt; LCD_WIDTH-1; x++)
<br/>
        for(y = 0; y &lt; LCD_HEIGHT-1; y++)
<br/>
            ptr_vram [x+ y * LCD_WIDTH] = RGB16(0xff,0xff,0xff);
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42816 - sajiimori - Sun May 15, 2005 7:02 am</h4>
    <div class="postbody"><span class="postbody">The value you are creating with the RGB macro is greater than what can fit in a 16 bit value.  The color components are 5 bits each, so the blue component (which is in the highest bits) is shifted left 10 bits.  If you shift 0xff left 10 bits, then you have an 18 bit value because 0xff is 8 ones.  Use 5 ones: 0x1f.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42820 - Impatient - Sun May 15, 2005 7:14 am</h4>
    <div class="postbody"><span class="postbody">but 0x1f,0x1f,0x1f is not true white color is it??? I thought that was 0xff,0xff,0xff which is the same as 255,255,255 ..
<br/>
<br/>
me confused even more :-(
<br/>
<br/>
PS but you were right ... replacing 0xff with 0x1f got rid of the warning ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42821 - sajiimori - Sun May 15, 2005 7:18 am</h4>
    <div class="postbody"><span class="postbody">GBA uses 15 bit color, not 24 bit.  The maximum value for a color channel is 31.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42827 - Kyoufu Kawa - Sun May 15, 2005 10:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">GBA uses 15 bit color, not 24 bit.  The maximum value for a color channel is 31.</td> </tr></table><span class="postbody">...aka 0x1f in case you don't see it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42855 - poslundc - Sun May 15, 2005 7:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Impatient wrote:</b></span></td> </tr> <tr> <td class="quote">but 0x1f,0x1f,0x1f is not true white color is it??? I thought that was 0xff,0xff,0xff which is the same as 255,255,255 ..
<br/>
<br/>
me confused even more :-(</td> </tr></table><span class="postbody">
<br/>
<br/>
You really <span style="font-style: italic">are</span> impatient.
<br/>
<br/>
Work through some of the beginner tutorials already.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42857 - sajiimori - Sun May 15, 2005 7:40 pm</h4>
    <div class="postbody"><span class="postbody">I guess somebody had to say it eventually. :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42859 - Impatient - Sun May 15, 2005 7:54 pm</h4>
    <div class="postbody"><span class="postbody">point taken. I will seek advise elsewhere.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42903 - Lupin - Mon May 16, 2005 3:24 pm</h4>
    <div class="postbody"><span class="postbody">The GBA color components go only from 0-31. So each color can only be in a range from 0-31 (because each color channel has 5 bits, 2^5-1 = 31) 
<br/>
<br/>
On a PC a 32 bit or 24 bit color each channel would have a range from 0-255 
<br/>
<br/>
You got your question answered by sajimori already, too bad you don't understand binary :( 
<br/>
<br/>
Btw, this is the correct macro to define a 16 bit color on the GBA (i dont know if yours is correct): 
<br/>
<br/>
#define RGB16(r,g,b) (((b)&lt;&lt;10)+((g)&lt;&lt;5)+(r))<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42949 - sgeos - Tue May 17, 2005 10:56 am</h4>
    <div class="postbody"><span class="postbody">You should be using int for general purpose variables.  Don't bother with unsigned chars, signed longs, etc until you have a real reason to use them.  The ram you are saving is not a big deal, and ints will run faster.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42993 - strager - Tue May 17, 2005 10:01 pm</h4>
    <div class="postbody"><span class="postbody">Try this, to prevent confusion:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
/* If you don't have this already... */
<br/>
typedef unsigned long int u32;
<br/>
typedef unsigned short int u16;
<br/>
<br/>
/* Define variables */
<br/>
#define RS 0
<br/>
#define GS 5
<br/>
#define BS 10
<br/>
#define B32TO16S 4
<br/>
<br/>
/* Bit maskers */
<br/>
#define COLV16(c) ( (c) &amp; 31 )
<br/>
#define COLV32(c) ( (c) &amp; 255 )
<br/>
<br/>
/* Color converters */
<br/>
#define COL32TO16(c) ( COLV16(COLV32(c) &gt;&gt; B32TO16S) )
<br/>
#define RGB16(r,g,b) ( (u16)( (COLV16(r) &lt;&lt; RS) | (COLV16(g) &lt;&lt; GS) | (COLV16(b) &lt;&lt; BS)) )
<br/>
#define RGB32(r,g,b) ( RGB16(COL32TO16(r), COL32TO16(g), COL32TO16(b) )
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You may need to increase the B32TO16S value 1, or maybe decrease.  That number is just off the top of my head.
<br/>
<br/>
Greets.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43116 - Ultima2876 - Thu May 19, 2005 7:15 am</h4>
    <div class="postbody"><span class="postbody">Why do ints run faster?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43117 - tepples - Thu May 19, 2005 7:26 am</h4>
    <div class="postbody"><span class="postbody">The size of an int is implementation defined. The standard encourages implementations of C (i.e. compilers) to make int the fastest integer data type, meaning it's usually the same size as a machine register. Smaller types stored in registers usually have to be sign-extended or zero-extended every time they're assigned to.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
