<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Static Compiling - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Static Compiling</h2>
<div id="posts">
<div class="post">
    <h4>#166164 - semihce - Sat Jan 31, 2009 11:18 pm</h4>
    <div class="postbody"><span class="postbody">Hello there,
<br/>
<br/>
I am developing a GBA project in Visual Studio and i need to compile this project statically so that i can use this project in other projects. A GBA developer told me that you must change the "makefile" in order to do this. Other options such as win32 project creation in Visual Studio doesnt work. 
<br/>
<br/>
How can i build this project statically. please help me.. this is a bachelor thesis..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166176 - silent_code - Sun Feb 01, 2009 1:09 pm</h4>
    <div class="postbody"><span class="postbody">You want to build a static library, is that right?
<br/>
There is at least one makefile for libraries in the examples. I think in the templates sub-folder.
<br/>
<br/>
Otherwise, you could download libgba or libnds and take a look at their makefiles.
<br/>
<br/>
Good luck and have a nice Sunday!<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166183 - semihce - Sun Feb 01, 2009 3:49 pm</h4>
    <div class="postbody"><span class="postbody">Yes, definitely i want to build a static library, you are right.
<br/>
<br/>
But i didnt understand which templates sub-folder?.. Please help me to find this kind of makefiles.
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">You want to build a static library, is that right?
<br/>
There is at least one makefile for libraries in the examples. I think in the templates sub-folder.
<br/>
<br/>
Otherwise, you could download libgba or libnds and take a look at their makefiles.
<br/>
<br/>
Good luck and have a nice Sunday!</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166186 - kusma - Sun Feb 01, 2009 4:23 pm</h4>
    <div class="postbody"><span class="postbody">You are using more than just visual studio, right? 'Cause visual studio doesn't support GBA development out of the box.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166189 - semihce - Sun Feb 01, 2009 5:14 pm</h4>
    <div class="postbody"><span class="postbody">I entegrated GBA into Visual Studio. But i am using only visual studio. This link tells how to entegrate GBA into visual studio. 
<br/>
<a class="postlink" href="http://www.brandorf.com/?p=315" target="_blank">http://www.brandorf.com/?p=315</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166191 - kusma - Sun Feb 01, 2009 5:36 pm</h4>
    <div class="postbody"><span class="postbody">GBAAppWizard does not seem to include static library projects, so you'll either have to learn to use makefiles, or just include the same source-files in multiple projects.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166198 - semihce - Sun Feb 01, 2009 7:52 pm</h4>
    <div class="postbody"><span class="postbody">User silent_code has written that there are such makefiles, please send me if you find one of them.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166203 - silent_code - Sun Feb 01, 2009 10:29 pm</h4>
    <div class="postbody"><span class="postbody">Well, download the libNDS examples provided by devkitPro, then go to templates and check out arm9lib's makefile. It should include all the settings needed to convince gcc to build a static library.
<br/>
<br/>
Good luck. :^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166209 - semihce - Sun Feb 01, 2009 11:41 pm</h4>
    <div class="postbody"><span class="postbody">Thanks silent_code</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167844 - semihce - Tue Mar 31, 2009 2:40 am</h4>
    <div class="postbody"><span class="postbody">Below i am giving the makefile i use in my project. Can someone help me with static building of this project? Which changes should i make to this makefile?
<br/>
<br/>
Here is the makefile:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#---------------------------------------------------------------------------------
<br/>
# Clear the implicit built in rules
<br/>
#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM)
<br/>
endif
<br/>
<br/>
-include $(DEVKITARM)/gba_rules
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output, if this ends with _mb a multiboot image is generated
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# DATA is a list of directories containing data files
<br/>
# INCLUDES is a list of directories containing header files
<br/>
#---------------------------------------------------------------------------------
<br/>
# HAM Stuff no longer used ....
<br/>
#
<br/>
#PROGNAME =unused
<br/>
#OFILES+= unused
<br/>
#ADD_LIBS+= unused   
<br/>
<br/>
# .................
<br/>
#
<br/>
<br/>
TARGET      :=   $(shell basename $(CURDIR))
<br/>
BUILD      :=   build
<br/>
SOURCES      :=   source
<br/>
DATA      :=   
<br/>
INCLUDES   :=   $(DEVKITARM)
<br/>
GDB_DIRS   =    $cdir:$cwd:$(ADD_GDB_SOURCE_DIRS)
<br/>
<br/>
ifeq ($(MAKECMDGOALS),gdb)
<br/>
DEBUG_SET   :=   gdb
<br/>
endif
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# options for code generation
<br/>
#---------------------------------------------------------------------------------
<br/>
#ARCH   :=   -mthumb -mthumb-interwork
<br/>
ARCH   :=
<br/>
<br/>
ifneq ($(DEBUG_SET),gdb)
<br/>
THIS_BUILD   :=   "Release Build"
<br/>
CFLAGS   :=   -Wall -O3 -save-temps \
<br/>
         -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
          -fomit-frame-pointer\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
ASFLAGS   :=   $(ARCH)
<br/>
else
<br/>
THIS_BUILD   :=   "Debug Build"
<br/>
CFLAGS   :=   -g -Wall -O0 -save-temps \
<br/>
         -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
ASFLAGS   :=   $(ARCH) -g
<br/>
endif
<br/>
CFLAGS   +=   $(INCLUDE)
<br/>
<br/>
<br/>
<br/>
ifneq ($(DEBUG_SET),gdb)
<br/>
LDFLAGS   =   $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
else
<br/>
LDFLAGS   =   -g $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
endif
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# path to tools - this can be deleted if you set the path to the toolchain in windows
<br/>
#---------------------------------------------------------------------------------
<br/>
export PATH      :=   $(DEVKITARM)/bin:$(DEVKITPRO)/msys/bin:$(PATH)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBS   :=
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBGBA)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# no real need to edit anything past this point unless you need to add additional
<br/>
# rules for different file extensions
<br/>
#---------------------------------------------------------------------------------
<br/>
ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OUTPUT   :=   $(CURDIR)/$(TARGET)
<br/>
export VPATH   :=   $(foreach dir,$(SOURCES),$(CURDIR)/$(dir)) \
<br/>
               $(foreach dir,$(DATA),$(CURDIR)/$(dir))
<br/>
<br/>
export DEPSDIR   :=   $(CURDIR)/$(BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# automatically build a list of object files for our project
<br/>
#---------------------------------------------------------------------------------
<br/>
CFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.c)))
<br/>
CPPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
SFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.s)))
<br/>
BINFILES   :=   $(foreach dir,$(DATA),$(notdir $(wildcard $(dir)/*.*)))
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# use CXX for linking C++ projects, CC for standard C
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(CPPFILES)),)
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CC)
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CXX)
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OFILES   := $(addsuffix .o,$(BINFILES)) $(CPPFILES:.cpp=.o) $(CFILES:.c=.o) $(SFILES:.s=.o)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of include paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export INCLUDE   :=   $(foreach dir,$(INCLUDES),-I$(dir)/include) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
               $(foreach dir,$(CURDIR), -I$(dir)/include) \
<br/>
               -I$(CURDIR)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of library paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
<br/>
.PHONY: $(BUILD) clean
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
   @[ -d $@ ] || mkdir -p $@
<br/>
   make "DEBUG_SET=$(DEBUG_SET)" --no-print-directory -C $(BUILD) -f $(CURDIR)/Makefile
<br/>
<br/>
all   : buildtype $(BUILD)
<br/>
<br/>
buildtype:
<br/>
   @echo "Build type: " $(THIS_BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...
<br/>
   rm -fr $(BUILD) $(TARGET).elf $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
vbawin:   clean all
<br/>
   $(DEVKITPRO)/tools/win32/vbawin.exe $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
runvbawin:
<br/>
   $(DEVKITPRO)/tools/win32/vbawin.exe $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
vba:   clean all
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
runvba:
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
startsdl:
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 -Gtcp:44444 &amp;
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
makeini:
<br/>
   echo "File $(TARGET).elf" &gt; insight.ini
<br/>
   echo "target remote 127.0.0.1:44444" &gt;&gt;insight.ini
<br/>
   echo "load $(TARGET).elf" &gt;&gt;insight.ini
<br/>
   echo "b main" &gt;&gt;insight.ini
<br/>
   echo "directory $(GDB_DIRS)"&gt;&gt;insight.ini
<br/>
   echo "c" &gt;&gt;insight.ini
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
startinsight:
<br/>
   $(DEVKITPRO)/insight-6.4.50/bin/arm-elf-insight.exe --command=insight.ini $(TARGET).elf
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
gdb:   clean
<br/>
   rm -f gdbtk.ini
<br/>
   rm -f /c/gdbtk.ini
<br/>
   @make "DEBUG_SET=$(DEBUG_SET)" all 
<br/>
   make startsdl makeini startinsight
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
rungdb: startsdl makeini startinsight
<br/>
<br/>
testinsight: makeini startinsight
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
<br/>
DEPENDS   :=   $(OFILES:.o=.d)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# main targets
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
$(OUTPUT).gba   :   $(OUTPUT).elf
<br/>
<br/>
$(OUTPUT).elf   :   $(OFILES)
<br/>
<br/>
%.o   :   %.pcx
<br/>
   echo $(notdir $&lt;)
<br/>
   $(bin2o)
<br/>
<br/>
-include $(DEPENDS)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#--------------------------------------------------------------------------------</td> </tr></table><span class="postbody">[/code]</span><span class="gensmall"><br/><br/>Last edited by semihce on Fri Apr 03, 2009 3:41 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#167860 - elyk1212 - Wed Apr 01, 2009 1:29 am</h4>
    <div class="postbody"><span class="postbody">All you need is something like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
# Keep the names of all cpp source files, and change their extension to .o
<br/>
LIBOFILES      = $(LIB_FILES:%.cpp=%.o)       
<br/>
<br/>
# all is the default rule
<br/>
all   : libraryname.a
<br/>
<br/>
# remove the old library and recreate the lib file
<br/>
libraryname.a:   $(LIBOFILES)
<br/>
   rm -f $@
<br/>
   ar crs $@ $(LIBOFILES)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Granted it's a bit simple, I halfway stole it from <a href="http://www.cs.duke.edu/~ola/courses/programming/libraries.html" target="_blank">http://www.cs.duke.edu/~ola/courses/programming/libraries.html</a> changing a few things
<br/>
<br/>
Anyhow, it pays to understand what it does.  Do a man on ar to get details on the archiver and read a few tutorials on GNU Makefiles.
<br/>
<br/>
The first line takes all the names of your cpp files and changes the extension to .o and saves them in LIB_FILES
<br/>
<br/>
So, if you are building this library to be used in a project, I'd have a separate folder for the library and make your own customized makefile for the library that contains these details (make it more of a modular file tree that way).
<br/>
<br/>
Be sure you have a rule to compile the libraries cpp files though!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
# Put something  like this in your library Makefile
<br/>
#     (Assuming you have your flags to g++ contained in a CFLAGS variable)
<br/>
%.o: %.cpp 
<br/>
   $(CXX) $(CFLAGS) -c $*.cpp
<br/>
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167873 - semihce - Wed Apr 01, 2009 4:25 pm</h4>
    <div class="postbody"><span class="postbody">I will try to understand what is told in the link you gave elyk1212. 
<br/>
But it is very difficult for me now. I'll return here after studying a little bit more.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167874 - elyk1212 - Wed Apr 01, 2009 5:12 pm</h4>
    <div class="postbody"><span class="postbody">Ask away, my friend.  I will do my best to answer any questions.
<br/>
<br/>
Also, you may want to start with a generic Makefile tutorial to get a grasp on what all the symbols actually mean, syntax etc:
<br/>
<br/>
Exhaustive docs:  
<br/>
(Start here in the Introduction links, to understand terms etc)
<br/>
<a href="http://sunsite.ualberta.ca/Documentation/Gnu/make-3.79/html_chapter/make_toc.html" target="_blank">http://sunsite.ualberta.ca/Documentation/Gnu/make-3.79/html_chapter/make_toc.html</a>
<br/>
<br/>
Learn by Examples:
<br/>
<a href="http://mrbook.org/blog/tutorials/make/" target="_blank">http://mrbook.org/blog/tutorials/make/</a>
<br/>
<br/>
The main thing is..
<br/>
<br/>
-- That target with <span style="font-weight: bold">ar</span> makes a static library from your already compiled object files.
<br/>
<br/>
I always say, try some thing new with something trivialy simple before using it on a big 'ol project.  
<br/>
<br/>
Just try this static library Makefile with a simple program.. say ... with a cpp file containing an empty function.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// Within test.cpp
<br/>
void doNothing()
<br/>
{
<br/>
<br/>
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Have your make file be something even more simple if the wild cards are throwing you off (the % symbols and such):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# Set your library file name here
<br/>
LIBNAME = libraryname.a
<br/>
<br/>
# Keep the names of all cpp source files, and change their extension to .o
<br/>
LIBOFILES      =  test.o    
<br/>
<br/>
# all is the default rule
<br/>
all   : $(LIBNAME)
<br/>
<br/>
# remove the old library and recreate the lib file
<br/>
$(LIBNAME):   $(LIBOFILES)
<br/>
   rm -f $(LIBNAME)
<br/>
   ar crs $@ $(LIBOFILES) 
<br/>
<br/>
# Compile your small,  test.cpp file
<br/>
#     (Assuming you have your flags to g++ contained in a CFLAGS variable)
<br/>
test.o: test.cpp
<br/>
   $(CXX) $(CFLAGS) -c test.cpp 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then add more complex stuff as you understand them.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167877 - semihce - Wed Apr 01, 2009 9:24 pm</h4>
    <div class="postbody"><span class="postbody">How can i try a simple makefile for a simple project. I have a big project and one makefile regarding that project. 
<br/>
This project and its makefile work on Visual Studio. It means I embedded GBA into Visual Studio and worked with this so far. 
<br/>
How can I compile an application with a makefile? Now i am installing Cygwin, i hope it works..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167878 - kusma - Wed Apr 01, 2009 10:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>semihce wrote:</b></span></td> </tr> <tr> <td class="quote">Now i am installing Cygwin, i hope it works..</td> </tr></table><span class="postbody">
<br/>
Don't. Cygwin is only known to cause trouble with devkitARM. Why do you  think installing it will help you?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167880 - semihce - Wed Apr 01, 2009 10:27 pm</h4>
    <div class="postbody"><span class="postbody">Then what do you advice me? How can i compile a file without installing Cygwin?
<br/>
<br/>
HEY EVERYBODY, I AM EDITING THIS CODE...
<br/>
<br/>
I want to stress that i am NEW in makefiles. I need to build my project statically but since i dont know anything about makefiles I want to study makefiles. So i think i need something like gcc compiler. If you say that there is no need for gcc compiler and Visual Studio is enough for this, how?
<br/>
<br/>
Namely, I only need a compiler to try my makefiles in simple(such as hello.cpp) applications.</span><span class="gensmall"><br/><br/>Last edited by semihce on Wed Apr 01, 2009 11:49 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#167881 - elyk1212 - Wed Apr 01, 2009 11:08 pm</h4>
    <div class="postbody"><span class="postbody">VisualStudio integration, Cygwin?... good night.  I just use the Linux console and use vim.. no need to integrate or lose sleep that way :P
<br/>
<br/>
I am sure though that Visual Studio has an option to use a particular Makefile that you have hand crafted.  If your current method of integration works, it probably is best to stick with that.  
<br/>
<br/>
If your question is on more than one make file, you can call a make file from within another make file, no problemo :)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
all: makelib... # Make sure your target below is a dependency within your first target
<br/>
     #Where you're making your GBA elf and all that
<br/>
<br/>
makelib:
<br/>
     # within yourlibdir/, you need to have a Make file called Makefile :)
<br/>
     make -C yourlibdir
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Or if your library is peppered in with your other non library source (unorganized and I don't recommend this directory structure :P)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
all: makelib... # Make sure your target below is a dependency within your first target
<br/>
     #Where you're making your GBA elf and all that
<br/>
<br/>
makelib:
<br/>
     make -C libMakefile
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then just use the method you were using before, and add some stuff to your current makefile.  
<br/>
<br/>
But, I recommend doing that trivial example I showed you first and playing to get an understanding on what's going on before attempting to integrate the changes in the big project.
<br/>
<br/>
<br/>
Warning Opinionated message:
<br/>
So.. I hope other on lookers can see the issue with using IDE's as they obscure many details.. and then when we really need something done, that is more than a trivially compile customization, it can become a huge pain.  And this pain is multiplied on each new IDE release that "does things a little differently".   Oh well, each method has its pits I suppose.
<br/>
<br/>
This doesn't sound necessary, since you already have a custom Makefile working with Visual Studio, but if not:
<br/>
I would say to start by reading the Visual Studio documentation on custom/manual Makefiles.  I am sure just pointing to the file and auto running a few shell commands should not be a big deal.
<br/>
<br/>
But anyhow, to test, you can use what ever Windows-&gt;Linux/GNU environment emulator's console that works with DevkitArm (no idea what it is, MinGW console?) and just type 'make', once you have created that trivial example I've shown you.
<br/>
<br/>
Then, when you understand it, integrate it into your larger project.
<br/>
<br/>
Believe me, you don't want to start complex... you want to start simple and add to it to get things working.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167882 - Kath - Wed Apr 01, 2009 11:33 pm</h4>
    <div class="postbody"><span class="postbody">I've been using the VS wizard from <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=14788" target="_blank">this thread</a>. It's useful when you want to start a project to test something or make a small app. It seems to support VS Express C++ 2008 fine and everything works such as Intellisense, compile output window, pressing F7 to build etc. You can also change the makefile in VS and recompile nice and quickly.
<br/>
<br/>
It gives you the options for:
<br/>
<br/>
- ARM9 project. libnds ARM7 binary.
<br/>
- ARM9/ARM7 project.
<br/>
- DS Library Project.
<br/>
<br/>
It uses the templates from libnds I think. The "Library" project probably makes a .lib but I haven't used it before. If you set no$gba as the debugger you can just press F5 to compile then run right away in Windows which is 10x better than writing it to a sd card and turning on your DS :p</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167884 - kusma - Thu Apr 02, 2009 12:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>semihce wrote:</b></span></td> </tr> <tr> <td class="quote">Then what do you advice me?</td> </tr></table><span class="postbody">
<br/>
The same as I advised you earlier: Sit down and learn how to write Makefiles. You can do this without Cygwin - devkitARM has everything you need for that task.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167889 - semihce - Thu Apr 02, 2009 2:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">You can do this without Cygwin - devkitARM has everything you need for that task.</td> </tr></table><span class="postbody">
<br/>
<br/>
How can i do this with devkitARM, can you a bit describe this? I have searched the web but couldn't find anything :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167892 - elyk1212 - Thu Apr 02, 2009 6:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
How can i do this with devkitARM, can you a bit describe this? I have searched the web but couldn't find anything :(
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
To use DevkitArm?..., you already were doing this.. from what I can gather on your previous postings.  Devkitarm is just a collection of tools, gcc/g++, c/c++ headers and standard libraries ...etc (prob more on windows versions).
<br/>
<br/>
Just do what you were doing before, since it was working (using Visual studio with the template makefile).    Then make some edits to the template and "see what happens".  
<br/>
<br/>
This can be your testing grounds if you will not try something small as I was suggesting.  
<br/>
<br/>
<span style="font-weight: bold">But I really do recommend reading the basics of the Makefile docs</span> in the links I gave you, and try out a few concepts, as you go, to get a hold on what they mean, and I recommend doing this on a small project that would take just a few minutes to produce.  
<br/>
<br/>
Start with one source file, then move to multiples, when you learn how to glob files with make. .. or just add them explicitly by name.   
<br/>
<br/>
Unimportant side note:
<br/>
<span style="font-style: italic">
<br/>
This seems to be an OK method, as even Autotools (not used by Devkitarm so don't worry if you don't know what it is) expects this style [explicit adding], and it reminds me to add to Subversion repositories on projects, when I have to add the file explicitly somewhere.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167907 - semihce - Fri Apr 03, 2009 2:40 am</h4>
    <div class="postbody"><span class="postbody">Hello eveyone,
<br/>
<br/>
I've studied makefiles using MinGW and i know something about makefiles now.
<br/>
I've even generated a static library for hello.cpp using this makefile below:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">NAME=hello
<br/>
CPP=g++
<br/>
<br/>
all: libraryname.a after-lib
<br/>
<br/>
clean:
<br/>
   rm ${NAME}.exe *.o *.a
<br/>
<br/>
after-lib:
<br/>
   rm *.o
<br/>
<br/>
LIBOFILES = ${NAME}.o
<br/>
<br/>
libraryname.a: $(LIBOFILES)
<br/>
   rm -f $@
<br/>
   ar cq $@ $(LIBOFILES)
<br/>
   
<br/>
${NAME}.o: ${NAME}.cpp ${NAME}.h
<br/>
   ${CPP} -g -c ${NAME}.cpp -o ${NAME}.o</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
My OLD MAKEFILE(which I gave in previous page) already generates object files of each .cpp files. 
<br/>
So, I thought that there is no need to generate object files of each cpp files and i just used them to generate a static library. 
<br/>
Then, i used this makefile to generate a static library of existing object files:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">all: libstatic.a
<br/>
<br/>
LIBOFILES = *.o
<br/>
<br/>
StaticLib.a: $(LIBOFILES)
<br/>
   rm -f $@
<br/>
   ar cq $@ $(LIBOFILES)</td> </tr></table><span class="postbody">
<br/>
<br/>
It generated a static library as i wanted. I included this libstatic.a and corresponding header files in my project but when I run the project, it gave me errors. 
<br/>
Below I am giving one of these errors:
<br/>
<br/>
<span style="font-weight: bold">undefined reference to</span> `theFunctionIHaveUsed()'
<br/>
<br/>
<span style="font-weight: bold">WHY DO I GOT THIS ERROR, DO YOU HAVE ANY IDEA?</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167916 - nanou - Fri Apr 03, 2009 12:25 pm</h4>
    <div class="postbody"><span class="postbody">Is it in the link step or the compile step?
<br/>
<br/>
Ensure that you've included all the needed headers (with the function prototypes) in your source files and that it's actually being linked.<br/>_________________<br/>- nanou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167919 - semihce - Fri Apr 03, 2009 2:21 pm</h4>
    <div class="postbody"><span class="postbody">As I said,</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-weight: bold">I included libstatic.a and corresponding header files</span></td> </tr></table><span class="postbody">
<br/>
What is more, I learned that I must include the static library like this,
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">g++ -o main main.cpp -lstatic</td> </tr></table><span class="postbody">
<br/>
Now I am trying to do this..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167923 - elyk1212 - Fri Apr 03, 2009 3:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>semihce wrote:</b></span></td> </tr> <tr> <td class="quote">As I said,<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-weight: bold">I included libstatic.a and corresponding header files</span></td> </tr></table><span class="postbody">
<br/>
What is more, I learned that I must include the static library like this,
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">g++ -o main main.cpp -lstatic</td> </tr></table><span class="postbody">
<br/>
Now I am trying to do this..</span></td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
undefined reference to `theFunctionIHaveUsed()' 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Typically this error means that you forgot to do a #include header.h within the file you are compiling, both main.cpp and hello.cpp should both contain this.  
<br/>
<br/>
By assumption, looking at your makefile, this should be hello.h... but I don't know by just looking.   You need to grep for the function name theFunctionIHaveUsed, and see where it is defined (which header).
<br/>
<br/>
Yes, and you do ALSO need to link against the library, in whatever program that will use the library.  But you won't run into this until you fix the name resolution (headers all included in correct areas).  You would have gotten obj link errors (from not including your static lib), if if got past the name resolution compilation step.
<br/>
<br/>
Additionally, you need to make sure gcc is actually looking in the correct directory for your lib!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
#The path to your library.  This can be a relative path if it is in a 
<br/>
#  subdirectory of the project you're using the library in
<br/>
# e.g. 
<br/>
# LIBPATH = -Lsubdir_to_libraryname.a/
<br/>
LIBPATH += -L/your_lib_/
<br/>
<br/>
# Needs to be your library name 
<br/>
LIBS =  -llibraryname
<br/>
<br/>
# Your old command looked off, the -o should be before 
<br/>
#     the name of the executable you wish to produce
<br/>
#     and there is no need to recompile main.cpp to main.o again, you should 
<br/>
#    have done that before the linking stage
<br/>
$(CPP) $(LIBPATH) main.o $(LIBS) -o  main
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by elyk1212 on Fri Apr 03, 2009 4:13 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#167925 - elhobbs - Fri Apr 03, 2009 3:55 pm</h4>
    <div class="postbody"><span class="postbody">make sure you do not have any warnings about undeclared functions in the compiling stage.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167928 - elyk1212 - Fri Apr 03, 2009 4:49 pm</h4>
    <div class="postbody"><span class="postbody">Oh, BTW, you know to do this in header files right? (Notice ifndef... etc)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef YOUR_HEADER_H_
<br/>
#define YOUR_HEADER_H_
<br/>
<br/>
class SuperCoolClass
<br/>
{
<br/>
   // Blah blah blah
<br/>
};
<br/>
<br/>
<br/>
#endif  /*  YOUR_HEADER_H_ */
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This avoids multiple definition errors.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167953 - semihce - Sat Apr 04, 2009 4:54 pm</h4>
    <div class="postbody"><span class="postbody">I included the static library like this,
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#------------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#------------------------------------------------------------------------------------
<br/>
LIBS   := -L libstatic.a
<br/>
<br/>
#------------------------------------------------------------------------------------
<br/>
# $(CURDIR)/source ==&gt;&gt; This is the directory that keeps libstatic.a and all .h files
<br/>
#------------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBGBA) -L$(CURDIR)/source</td> </tr></table><span class="postbody">
<br/>
<br/>
But i get the same(<span style="font-style: italic">undefined reference to `theFunctionIHaveUsed()'</span> ) errors..
<br/>
<br/>
How should i include this static library?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167954 - Ruben - Sat Apr 04, 2009 5:05 pm</h4>
    <div class="postbody"><span class="postbody">It's not capital L, so it'd be
<br/>
<br/>
-lstatic
<br/>
<br/>
When using -L, it specifies library *directories*, using -l means that it has to load, from those directories, a file called libfoo.a where foo is the name of the library after the l</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167956 - semihce - Sat Apr 04, 2009 5:28 pm</h4>
    <div class="postbody"><span class="postbody">I have already tried this
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">LIBS   := -lstatic </td> </tr></table><span class="postbody">
<br/>
But i got this error now,
<br/>
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-eabi/4.3.2/../../../../arm-eabi/bin/ld.exe: <span style="font-weight: bold">cannot find -lstatic</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167957 - Ruben - Sat Apr 04, 2009 5:30 pm</h4>
    <div class="postbody"><span class="postbody">Are you sure that you've specified the library directories in LIBDIRS?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167958 - semihce - Sat Apr 04, 2009 5:33 pm</h4>
    <div class="postbody"><span class="postbody">I dont know how can i specify it? Can you please tell it to me..
<br/>
<br/>
$(CURDIR)/source
<br/>
<br/>
This code must give the directory that libstatic.a exist.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167959 - Ruben - Sat Apr 04, 2009 5:35 pm</h4>
    <div class="postbody"><span class="postbody">Then you can specify these flags..
<br/>
<br/>
-L$(CURDIR)/source -lstatic
<br/>
<br/>
Though I don't know why you'd place the library in the source folder.. why not place it in a "lib" folder?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167960 - semihce - Sat Apr 04, 2009 5:41 pm</h4>
    <div class="postbody"><span class="postbody">I've just tried it, i get the same <span style="font-weight: bold">cannot find -lstatic</span> error. :(
<br/>
<br/>
You are right, i should include it to a lib folder, but this is just for try. I just want to see something working</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167961 - Ruben - Sat Apr 04, 2009 5:44 pm</h4>
    <div class="postbody"><span class="postbody">Another thing I can think of since that didn't work either, is that at link time, you're not in the right directory (like, you could be in directory build, for example) so it's looking for build/source/libstatic.a instead of just source/libstatic.a. To avoid this, make another variable like this..
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">TOPDIR    :=    $(CURDIR)
<br/>
<br/>
# Rest of your makefile..
<br/>
# And when you go to link, use $(TOPDIR)/source rather than $(CURDIR)/source</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167964 - semihce - Sat Apr 04, 2009 5:51 pm</h4>
    <div class="postbody"><span class="postbody">Still the same error.. Do you know any method to print the $(CURDIR) to the command line?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167965 - Ruben - Sat Apr 04, 2009 5:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"># Not sure if it'll work, but it may be...
<br/>
echo $(CURDIR)</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167966 - semihce - Sat Apr 04, 2009 5:54 pm</h4>
    <div class="postbody"><span class="postbody">I've tried it before asking you:). It didnt work..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167967 - Ruben - Sat Apr 04, 2009 5:57 pm</h4>
    <div class="postbody"><span class="postbody">Well, the only other things that comes to my mind is that you compiled C++ source and its name mangling was different to the one you're using with the other one. If you compiled C code, then make sure you're using extern "C" with the prototypes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167969 - semihce - Sat Apr 04, 2009 6:51 pm</h4>
    <div class="postbody"><span class="postbody">Ok guys, I have solved the problem :).. Finally..
<br/>
<br/>
THANKS FOR ALL YOUR HELP
<br/>
<br/>
This is the change I've done..
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib) -L$(MYSTATICLIBDIR)/source/lib</td> </tr></table><span class="postbody">
<br/>
<br/>
As you see, instead of writing the path to the LIBDIRS, I wrote it to the LIBPATHS.. So, it is working now..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167972 - elyk1212 - Sat Apr 04, 2009 7:30 pm</h4>
    <div class="postbody"><span class="postbody">Congrats!  Hope you have learned a lot from your struggles, I always seem to when I have to work a bit.  
<br/>
<br/>
Well, I looked at that Makefile you emailed me and yeah, you had a variable named LIBPATHS and LIBDIRS.  Appears you can eliminate the LIBDIRS variable.
<br/>
<br/>
EDIT: LOL, no don't eliminate LIBDIRS. It's used in LIBPATHS definition. :O
<br/>
<br/>
It seems you were combining many Makefiles together etc.  Make sure you know which variable is being used.  If you follow all makefiles included, down to the granularity of actually calling the linker, you'll find that LIBPATHS is the only variable used (at least in modern DevkitARM, cannot say about previous ones).
<br/>
<br/>
EDIT: Wrong: It's not the only one used, but still following it down helps.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# Where the LIBPATHS is used in the linking step
<br/>
<br/>
-include $(DEVKITARM)/gba_rules
<br/>
<br/>
#          Compile step is done in $(DEVKITARM)/base_rules
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
From $(DEVKITARM)/gba_rules
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
%_mb.elf:
<br/>
   @echo linking multiboot
<br/>
   @$(LD) -specs=gba_mb.specs $(LDFLAGS) $(OFILES) $(LIBPATHS) $(LIBS) -o $@
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
%.elf:
<br/>
   @echo linking cartridge
<br/>
   @$(LD)  $(LDFLAGS) -specs=gba.specs $(OFILES) $(LIBPATHS) $(LIBS) -o $@
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
So, when in doubt just try to follow down further till you actually can see what is being used, and you'll be set.</span><span class="gensmall"><br/><br/>Last edited by elyk1212 on Tue Apr 07, 2009 12:43 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#167975 - semihce - Sat Apr 04, 2009 8:36 pm</h4>
    <div class="postbody"><span class="postbody">Thanks especially to you "elyk1212". You helped me a lot....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168021 - elyk1212 - Tue Apr 07, 2009 12:40 am</h4>
    <div class="postbody"><span class="postbody">No problem semihce.
<br/>
<br/>
Hey, I was overzealous in my last statement, don't eliminate the LIBDIRS variable.   If you're using the default devkitARM makefile, you should be able to add your directory to LIBDIRS and it should work, unless you're redefining it again somewhere.   
<br/>
<br/>
I think you're using some variant of the default makefile, just make sure LIBDIRS is defined before LIBPATHS. 
<br/>
<br/>
To keep with convention, you should probably do something like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(MYSTATICLIBDIR)/source/lib
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
# MUST Be after you define LIBDIRS
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of library paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That way the LIBPATHS construction does what you'd expect, hopefully.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
