<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Maximum Beep Frequency with Built-In Speaker - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Maximum Beep Frequency with Built-In Speaker</h2>
<div id="posts">
<div class="post">
    <h4>#101804 - biolizard89 - Fri Sep 08, 2006 4:23 am</h4>
    <div class="postbody"><span class="postbody">According to The Audio Advance at <a href="http://belogic.com/gba/," target="_blank">http://belogic.com/gba/,</a> the maximum frequency for sound channels 1 and 2 is 131kHz.  I'm wondering whether beeps with such a high frequency can actually be played over the built-in GBA speaker.  Specifically, I would like to play a 40kHz beep over the built-in speaker; is this possible?  Does it matter whether I use a GBA, GBASP, GB Micro, DS, or DS Lite (I don't care if I have to use a specific one, but if it requires a DS, it would have to work in GBA mode, since I don't have DS libraries for my project)?
<br/>
<br/>
In case anyone's wondering why the heck I would want to play a 40kHz beep when it's inaudible to humans, I'm using a Charmed Labs Xport Botball Controller (robotics controller which uses the GBA for processing purposes) along with an SRF04 sonar sensor (which uses 40kHz sound pings).  I would like the GBA speaker to be able to trigger the sonar's listening circuitry by emitting a beep at the same frequency that the sonar is listening for (40kHz).  I don't know for a fact that it will work, but I'm just wondering if the GBA's built-in speaker makes it impossible to use such high frequencies.
<br/>
<br/>
Sorry if this is a stupid question; I couldn't find any such information anywhere.
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101808 - tepples - Fri Sep 08, 2006 4:54 am</h4>
    <div class="postbody"><span class="postbody">There is a band-pass filter on the GBA's output. I know that the speaker itself acts as such a filter; one might be present on the headphones as well. I also seem to remember the DAC running at 32.7 kHz by default, so any attempt to produce tones higher than <a class="postlink" href="http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem" target="_blank">half that</a> will just make aliasing. The trick here is to set the DAC to 6-bit using the <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#soundcontrolregisters" target="_blank">SOUNDBIAS register</a>, so that the DAC runs at 262 kHz.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101852 - keldon - Fri Sep 08, 2006 11:52 am</h4>
    <div class="postbody"><span class="postbody">You have to consider the frequency response of the speakers you are trying this with.
<br/>
<br/>
Don't look at the 20hz-40k figure, get the frequncy response curve and see how much of the sound it picks up.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
