<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Frame Rate - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Frame Rate</h2>
<div id="posts">
<div class="post">
    <h4>#23267 - ProblemBaby - Fri Jul 09, 2004 1:06 am</h4>
    <div class="postbody"><span class="postbody">Is it somehow possible to find out what Frame Rate I got?
<br/>
my Game runs to slow but I want to need what the actual Frame Rate is</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23271 - tepples - Fri Jul 09, 2004 2:45 am</h4>
    <div class="postbody"><span class="postbody">Pre-requisites:
<br/>
1. displaying text, and
<br/>
2. using vblank interrupts.
<br/>
Do you know how to do both of these? If so, I'll explain how to make a frame rate display.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23273 - dagamer34 - Fri Jul 09, 2004 3:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Pre-requisites:
<br/>
1. displaying text, and
<br/>
2. using vblank interrupts.
<br/>
Do you know how to do both of these? If so, I'll explain how to make a frame rate display.</td> </tr></table><span class="postbody">
<br/>
<br/>
He should use swi 0xff in vba (VBA logging) so it's a lot easier to debug and doesn't take up any real resources on an actual GBA.
<br/>
<br/>
Check out jharbours GBA tutorials, I think he has one over how to calculate the frame rate and such.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23274 - poslundc - Fri Jul 09, 2004 3:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Pre-requisites:
<br/>
1. displaying text, and
<br/>
2. using vblank interrupts.
<br/>
Do you know how to do both of these? If so, I'll explain how to make a frame rate display.</td> </tr></table><span class="postbody">
<br/>
<br/>
Alternatively, if you are only testing the framerate in VBA (which will usually be higher than what you get on actual hardware, but still) you can skirt the first requirement by putting the framerate in an easy-to-find area of memory and checking there.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23275 - tepples - Fri Jul 09, 2004 3:37 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">He should use swi 0xff in vba (VBA logging) so it's a lot easier to debug and doesn't take up any real resources on an actual GBA.</td> </tr></table><span class="postbody">
<br/>
A frame rate measure taken with an emulator may prove useful for relative profiling (does this function take longer than that function to do the same thing?), but it's useless for absolute measurements unless it tells you how many frames per second you get on a Game Boy Advance system. Because VBA, the most popular publicly available GBA emulator, doesn't emulate wait states, running on VBA may increase the emulated frame rate. Because VBA makes 'mul' take too long (I've seen this problem in audio mixers and especially in GSM Player), running on VBA may decrease the emulated frame rate.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23285 - ProblemBaby - Fri Jul 09, 2004 11:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Pre-requisites:
<br/>
1. displaying text, and
<br/>
2. using vblank interrupts.
<br/>
Do you know how to do both of these? If so, I'll explain how to make a frame rate display.</td> </tr></table><span class="postbody">
<br/>
<br/>
1. Yes
<br/>
2. Yes</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23293 - tepples - Fri Jul 09, 2004 2:57 pm</h4>
    <div class="postbody"><span class="postbody">Both the ISR and the main thread will touch three global variables, so you'll have to declare them volatile.
<br/>
<br/>
At the start of your program, zero out fps_vbl_counter, fps_frames_drawn, and fps_rate. Set up your vblank ISR.
<br/>
Every time you draw a frame, add 1 to fps_frames_drawn and draw fps_rate.
<br/>
Every vblank, in your vblank ISR, add 1 to fps_vbl_counter. If fps_frames_counter equals 60, then set fps_rate to equal fps_frames_drawn and then zero out fps_vbl_counter and fps_frames_drawn.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23358 - ProblemBaby - Sat Jul 10, 2004 2:35 pm</h4>
    <div class="postbody"><span class="postbody">are they u8, u16, 32?
<br/>
and what is ISR, Interrupt?
<br/>
<br/>
should it look something like this....
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
while (1) // Game loop
<br/>
{
<br/>
 PrintNumber(fps_rate);
<br/>
 // do stuff
<br/>
 while (REG_VCOUNT != 160);
<br/>
 fps_frames_drawn++;
<br/>
}
<br/>
<br/>
VBlank_Interrupt()
<br/>
{
<br/>
fps_vbl_counter++;
<br/>
if (fps_frames_counter == 60) // fps_frames_counter?? do you mean vbl_counter?
<br/>
{
<br/>
 fps_rate = fps_frames_drawn
<br/>
 fps_vbl_counter = 0;
<br/>
 fps_frames_drawn = 0;
<br/>
}
<br/>
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23367 - ProblemBaby - Sun Jul 11, 2004 2:20 am</h4>
    <div class="postbody"><span class="postbody">Okey i found it out!
<br/>
I have one question more...
<br/>
<br/>
should I copyOAM and run the kramworker
<br/>
before this line
<br/>
while (REG_VCOUNT != 160); 
<br/>
or after?
<br/>
<br/>
and should increment framecounterbefore or after</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#23410 - keldon - Mon Jul 12, 2004 9:15 am</h4>
    <div class="postbody"><span class="postbody">1: don't forget to set fps_frame_counter to 0
<br/>
2: increment before ( although it only makes a difference on the first reading )
<br/>
3: if you do your OAM before waiting for VBL, you are actually doing it directly after, as you loop immediately goes back to the top after incrementing fps_drawn
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while (1) // Game loop 
<br/>
{ 
<br/>
 PrintNumber(fps_rate); 
<br/>
 // do stuff 
<br/>
 while (REG_VCOUNT != 160); 
<br/>
 fps_frames_drawn++; 
<br/>
} </td> </tr></table><span class="postbody">
<br/>
What actually happens:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 PrintNumber(fps_rate); 
<br/>
 // do stuff 
<br/>
 while (REG_VCOUNT != 160); 
<br/>
<br/>
<br/>
 // VBL Occurs
<br/>
 fps_frames_drawn++; 
<br/>
 // While loop
<br/>
PrintNumber(fps_rate); 
<br/>
 // do stuff 
<br/>
 while (REG_VCOUNT != 160); 
<br/>
<br/>
<br/>
 // VBL Occurs
<br/>
 fps_frames_drawn++; 
<br/>
 // While loop
<br/>
PrintNumber(fps_rate); 
<br/>
 // do stuff 
<br/>
 while (REG_VCOUNT != 160); </td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
