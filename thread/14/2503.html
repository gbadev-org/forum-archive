<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>HAM Compiling problems - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > HAM Compiling problems</h2>
<div id="posts">
<div class="post">
    <h4>#13575 - yaustar - Wed Dec 17, 2003 4:07 am</h4>
    <div class="postbody"><span class="postbody">At the moment I have the lights out program i made which complies fine under DevKitAdv but using HAM it doesnt accept the KEY input. I remember reading something about making them volatile but not 100% sure.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13641 - dagamer34 - Fri Dec 19, 2003 12:27 am</h4>
    <div class="postbody"><span class="postbody">HAM optimizes code with the -O2 flag so you are going to have to declare the registers volatile just like you said.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13642 - yaustar - Fri Dec 19, 2003 2:27 am</h4>
    <div class="postbody"><span class="postbody">All registers or just the keyboarad/pad?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13643 - poslundc - Fri Dec 19, 2003 3:15 am</h4>
    <div class="postbody"><span class="postbody">Generally if you are checking or altering the same variable/register/memory location multiple times (either in a loop or in a single block of code) and that variable is not used between those statements, you should declare it volatile if you have optimizations turned on.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13646 - yaustar - Fri Dec 19, 2003 11:30 am</h4>
    <div class="postbody"><span class="postbody">With HAM can I turn it off?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13648 - sajiimori - Fri Dec 19, 2003 6:24 pm</h4>
    <div class="postbody"><span class="postbody">Why don't you try reading the documentation?
<br/>
<br/>
<a href="http://www.ngine.de/site/hamdoc/faq.html" target="_blank">http://www.ngine.de/site/hamdoc/faq.html</a>
<br/>
<br/>
At first glance, HAM seems to use a master makefile (system/master.mak) that's shared between all projects.  Edit that to change optimization flags.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14647 - yaustar - Sat Jan 10, 2004 3:46 am</h4>
    <div class="postbody"><span class="postbody">sorry, but I am not too big on mak files.
<br/>
I am guessing to change
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# Enable GDB symbol support, optional. This will also reduce 
<br/>
# optimization levels to allow correct in-source debugging
<br/>
ifeq ($(HAMLIBCOMPILE),1)
<br/>
else
<br/>
ifeq ($(MAKECMDGOALS),gdb)
<br/>
HAM_CFLAGS += -O0 -g
<br/>
else
<br/>
HAM_CFLAGS += -O2
<br/>
endif
<br/>
endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
to
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# Enable GDB symbol support, optional. This will also reduce 
<br/>
# optimization levels to allow correct in-source debugging
<br/>
ifeq ($(HAMLIBCOMPILE),1)
<br/>
else
<br/>
ifeq ($(MAKECMDGOALS),gdb)
<br/>
HAM_CFLAGS += -o -g
<br/>
else
<br/>
HAM_CFLAGS += -O2
<br/>
endif
<br/>
endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
it also seems to say something about a switch to to go from one optimisation but I cant see it in the mak file...
<br/>
<br/>
here is the output from the compiling if it helps
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
C:/HamDevKit/gcc-arm/bin/arm-thumb-elf-gcc.exe  -I C:/HamDevKit/gcc-arm/include -I C:/HamDevKit/gcc-arm/arm-thumb-elf/include -I C:/HamDevKit/include -I C:/HamDevKit/system  -c -DHAM_HAM  -DHAM_MULTIBOOT  -DHAM_ENABLE_MBV2LIB -O2 -DHAM_WITH_LIBHAM  -mthumb-interwork -mlong-calls -Wall -save-temps -fverbose-asm -nostartfiles main.cpp -o main.o
<br/>
C:/HamDevKit/gcc-arm/bin/arm-thumb-elf-gcc.exe  -I C:/HamDevKit/gcc-arm/include -I C:/HamDevKit/gcc-arm/arm-thumb-elf/include -I C:/HamDevKit/include -I C:/HamDevKit/system  -c -DHAM_HAM  -DHAM_MULTIBOOT  -DHAM_ENABLE_MBV2LIB -O2 -DHAM_WITH_LIBHAM  -mthumb-interwork -mlong-calls -Wall -save-temps -fverbose-asm -nostartfiles bg.cpp -o bg.o
<br/>
C:/HamDevKit/gcc-arm/bin/arm-thumb-elf-ld.exe    -L C:/HamDevKit/gcc-arm/lib/gcc-lib/arm-thumb-elf/3.3.2/interwork -L C:/HamDevKit/gcc-arm/lib/gcc-lib/arm-thumb-elf/3.3.2 -L C:/HamDevKit/gcc-arm/arm-thumb-elf/lib/interwork -L C:/HamDevKit/gcc-arm/arm-thumb-elf/lib -L C:/HamDevKit/gcc-arm/lib  --script C:/HamDevKit/system/lnkscript-afm -o LightsOut.elf crt0.o main.o bg.o    -lafm -lham -lm -lstdc++ -lsupc++ -lgcc -lc -lgcc
<br/>
C:/HamDevKit/gcc-arm/bin/arm-thumb-elf-objcopy.exe  -v -O binary LightsOut.elf LightsOut.gba  
<br/>
copy from LightsOut.elf(elf32-littlearm) to LightsOut.gba(binary)
<br/>
------------------------------------------------------------------
<br/>
 HAM Win32 installation information:
<br/>
 
<br/>
 HAM version:        2.8 in C:/HamDevKit
<br/>
 GCC/GDB version:    3.3.2 / 6.0
<br/>
 Newlib/Binutils:    1.11.0 / 2.14
<br/>
 Krawall ena/regged: no / no
<br/>
------------------------------------------------------------------
<br/>
C:/HamDevKit/tools/win32/rm -f *.o *.i *.ii</td> </tr></table><span class="postbody"><br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
