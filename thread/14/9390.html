<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Multi-Player Packet transfers - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Multi-Player Packet transfers</h2>
<div id="posts">
<div class="post">
    <h4>#81327 - bitswiper - Fri Apr 28, 2006 12:31 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
I managed to setup a connection between GBAs, but I have some problems in packet exchange between them. This is the code I use to try send data and confirm that the connection have been done. But for some reason, the data is wrong. Could anyone help me please?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define REG_SIOCNT    *(vu16*) 0x04000128
<br/>
#define REG_SIODATA   *(vu16*) 0x0400012A
<br/>
#define REG_SIOMULTI  ((vu16*) 0x04000120)
<br/>
<br/>
// Multiplayer sets
<br/>
#define SIO_SI          0x0004
<br/>
#define SIO_SD          0x0008
<br/>
#define SIO_START       0x0080
<br/>
<br/>
#define TEST_PACKET     0xDEAD
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
  REG_SIODATA = TEST_PACKET;
<br/>
<br/>
  if( REG_SIOCNT &amp; SIO_SI )
<br/>
    REG_SIOCNT |= SIO_START;
<br/>
<br/>
  while( !( REG_SIOCNT &amp; SIO_SD ) ) ;
<br/>
<br/>
  if( REG_SIOMULTI[ 1 ] == TEST_PACKET ) // &lt;- This doesn't work
<br/>
    g_nNbrPlayers = 2;
<br/>
<br/>
  g_nPlayerID = ( REG_SIOCNT &gt;&gt; 4 ) &amp; 3;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I followed the gbatek document, but the code doesn't work for some reason. What have I forgotten?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
