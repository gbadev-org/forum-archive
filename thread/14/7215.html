<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>CHAR or INT - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > CHAR or INT</h2>
<div id="posts">
<div class="post">
    <h4>#57930 - Tomik - Wed Oct 19, 2005 11:07 am</h4>
    <div class="postbody"><span class="postbody">Hi, I just want to know if a char value is faster than an INT ?
<br/>
I just need 0-127 ! I think CHAR is better, because less memeory, much faster !! is that correct ??
<br/>
<br/>
Thomas</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57935 - wintermute - Wed Oct 19, 2005 11:38 am</h4>
    <div class="postbody"><span class="postbody">That's a common beginners misconception.
<br/>
<br/>
On most modern systems an int is the fastest type, especially when programming in C/C++ where the compiler inserts code to sign extend smaller types.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57950 - Palamon - Wed Oct 19, 2005 2:29 pm</h4>
    <div class="postbody"><span class="postbody">So which would be best overall to use in the GBA code? for something that only takes 0-127, INT or CHAR ?
<br/>
<br/>
Does it matter which type if you are sending that variable over a game link during a multiplayer mode?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57953 - NoMis - Wed Oct 19, 2005 2:33 pm</h4>
    <div class="postbody"><span class="postbody">Int will take more space but its much faster because memory reads are done as integer.
<br/>
When the memory bus is 16 bit wide for example, then always 16 bits are read and if you want a 8bit value you have to extract it from that 16bits after the read is done. 
<br/>
Even more costly is writing back to memory because you have to read the 16bit and put your value in and write back the whole 16bit.
<br/>
<br/>
NoMis<br/>_________________<br/><span style="font-style: italic"><a class="postlink" href="http://www.gamedev.at/" target="_blank">www.gamedev.at</a></span> - The austrian gamedev site
<br/>
<span style="font-style: italic"><a class="postlink" href="http://hde.gamedev.at/" target="_blank">hde.gamedev.at</a></span> - The Handheld Dev Env plugins for Eclipse</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57969 - poslundc - Wed Oct 19, 2005 5:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Palamon wrote:</b></span></td> </tr> <tr> <td class="quote">So which would be best overall to use in the GBA code? for something that only takes 0-127, INT or CHAR ?</td> </tr></table><span class="postbody">
<br/>
<br/>
You will get differing opinions on this.
<br/>
<br/>
Mine is that you should use the common typedefs u8, s16, u32, etc. when it's important that the variable in question be specified as having that data width. On the GBA, this mostly means things like the IO registers, data packed either in an array or in a struct that I intend to make an array out of, etc.
<br/>
<br/>
In all other cases - and I mean ALL other cases - I use int, which is recognized universally as the "fast generic integer number" data type. I never specify the width of the data type as a means of establishing a minimum/maximum value the variable can hold; that should be checked for using ASSERTs.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Does it matter which type if you are sending that variable over a game link during a multiplayer mode?</td> </tr></table><span class="postbody">
<br/>
<br/>
Any data you send over multiplayer will have to be packed as tightly as you can cram it, and you will probably be using variables of specified width to do it. You should not design your generic data model based on how the information will be look like when it's packed to be sent over multiplayer, though.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58037 - sgeos - Thu Oct 20, 2005 11:39 am</h4>
    <div class="postbody"><span class="postbody">int is fast, char is small.  Are you having space or speed problems?  If the answer is neither, I'd use int.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58038 - Tomik - Thu Oct 20, 2005 11:45 am</h4>
    <div class="postbody"><span class="postbody">I thought less memory = more speed ...but i think that s wrong !
<br/>
<br/>
I will have more speed !!! So I use INT, because a 16Bit Processor and it makes CHAR to INT !! Is that correct ??
<br/>
<br/>
Thomas</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58050 - Cearn - Thu Oct 20, 2005 1:46 pm</h4>
    <div class="postbody"><span class="postbody">ARM CPUs are 32 bit, not 16. ints are generally the same size as the processor, meaning that on the GBA ints are 32bit (that's why the typedefs s32 and u32 use ints). The CPU size is also referred to as the 'word' size, and is the preferred size for variables. For bigger variables (if any), you'd have to do things in multiple instructions (like 64bit arithmetic here, or 16bit arithmetic for the 8bit NES). For smaller variables (bytes (8bit) or halfwords (16bit)) you often also need multiple instructions, because you have to ensure that the end result is also still of the right size.
<br/>
<br/>
For example, adding two numbers <span style="font-style: italic">z</span>= <span style="font-style: italic">x</span>+<span style="font-style: italic">y</span>. 
<br/>
What happens is that the values for x and y are loaded into CPU registers (32bit), then added, and put back into <span style="font-style: italic">z</span>. That's the general idea for adding, and indeed most data instructions (subtract, multiply, but also bit operations).
<br/>
Now, <span style="font-style: italic">x</span>=255 and <span style="font-style: italic">y</span>=5 leads to <span style="font-style: italic">z</span>=260 (= 0x104). Easy. When you're dealing with ints, this works fine, because 260 fits inside 32bit. However, it does <span style="font-weight: bold">not</span> fit inside 8bits! For byte-size variables, the result <span style="font-style: italic">should</span> actually be the byte of <span style="font-style: italic">z</span>, which is just 4. As the register that holds the result has the full 260 in it, 2 extra instructions have to be added to zero out the upper bytes of the word. Two instructions may not sound like much, but if you could have been done in a single one, it now takes three times as long.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">load  x, 255
<br/>
load  y, 5
<br/>
add   z, x, y
<br/>
// these will be extra for bytes to account for byte-overflow 
<br/>
// (this is effectively z&amp;255)
<br/>
lshift z, z, 24
<br/>
rshift z, z, 24
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Another example, copying data. 
<br/>
The basic idea here is load data from source address to register, write data from register to destination. Simple. You can do this with byte copies, which means <span style="font-style: italic">n</span> loads and stores. However, you can also copy in words (32bit). This time, you only need <span style="font-style: italic">n</span>/4 loads and stores, because you cover 4 bytes in one go. That's roughly 4 times faster.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// copy 4 bytes, via bytes
<br/>
loadbyte  x, [src]
<br/>
storebyte x, [dst]
<br/>
loadbyte  x, [src+1]
<br/>
storebyte x, [dst+1]
<br/>
loadbyte  x, [src+2]
<br/>
storebyte x, [dst+2]
<br/>
loadbyte  x, [src+3]
<br/>
storebyte x, [dst+3]
<br/>
<br/>
// copy 4 bytes, via words
<br/>
loadword  x, [src]
<br/>
storeword x, [dst]
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This is why ints are faster than chars (and shorts). The actual times may vary a bit and there are some really nasty snares when it comes to copying, but the general idea stands: if you can, stick to the bit-width of the CPU.
<br/>
<br/>
Having said that, there is no reason you can't have global data in bytes, but local variables in ints. Something like:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u8 array[256];
<br/>
<br/>
void function()
<br/>
{
<br/>
    int ii;
<br/>
    u32 var;
<br/>
<br/>
    for(ii=0; ii&lt;256; ii++) // or whatever
<br/>
    {
<br/>
        var = array[0];
<br/>
        // do stuff with var
<br/>
        array[0]= (u8)var;
<br/>
    }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
or something like that; it depends very much on what you want to do. For the actual work, you can use the word-sized <span style="font-style: italic">var</span>, then cast back when you need to store it again.
<br/>
<br/>
Oh, and on pain of death: don't <span style="font-style: italic">ever</span> use non-word variables for loop variables.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
