<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>trouble using mode 2 tiles, [solved] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > trouble using mode 2 tiles, [solved]</h2>
<div id="posts">
<div class="post">
    <h4>#21784 - tornadokick - Sat Jun 05, 2004 2:11 am</h4>
    <div class="postbody"><span class="postbody">I'm having some more trouble trying to start with programming the GBA.  This time I'm trying mode 2.  When I try getting my file to work, It just throws tiles (and sometimes partial tiles) around the screen (or, with some variations of the options, just displays nothing).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Bg bg1;
<br/>
<br/>
int main(void)
<br/>
{
<br/>
   u16 loop, x_loop, y_loop;
<br/>
   SetMode( MODE_2 | OBJ_MAP_2D | OBJ_ENABLE ); //set mode
<br/>
<br/>
   ... // code dealing with sprites, not relavent 'cause sprites are working fine
<br/>
<br/>
   bg1.number = 1;                       // set up and give information about the background
<br/>
   bg1.size = TEXTBG_SIZE_256x256;
<br/>
   bg1.charBaseBlock = 0;
<br/>
   bg1.screenBaseBlock = 24;
<br/>
   bg1.colorMode = BG_COLOR_256;
<br/>
   bg1.x_scroll = 120;
<br/>
   bg1.y_scroll = 80;
<br/>
   EnableBackground(&amp;bg1);
<br/>
<br/>
   for(loop = 0; loop &lt; 256; loop++) // load the palette of the tiles
<br/>
      BGPaletteMem[loop] = roadtilesPalette[loop];
<br/>
   for(loop = 0; loop &lt; ROADTILES_WIDTH * ROADTILES_HEIGHT /2 ; loop++)         
<br/>
<br/>
   bg1.tileData[loop] = roadtilesData[loop];      //  load the tiles into the Char Base Blocks
<br/>
<br/>
   u16* temp = (u16*)frogmap;  
<br/>
   for(loop = 0; loop &lt; 64*64 /2 ; loop++) 
<br/>
      bg1.mapData[loop] = temp[loop];  // load the map into the screen base blocks
<br/>
<br/>
// Program loop
<br/>
   while(1) // don't end
<br/>
   {
<br/>
      ....
<br/>
      UpdateBackground(&amp;bg1);
<br/>
      ....
<br/>
   }
<br/>
<br/>
   return(0);
<br/>
} 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Everything compiles fine.  frogmap (I'm recreating frogger) is the product of 5 tiles of 16x16 when run through GBAMapEditor.  I ran the five tiles (a 16x80 256 color .bmp) through bmp2sprite.exe and exported roadtiles, giving me "roadtilesData" and "roadtilesPalette."  The tutorial I'm using is the Pern Project.  I've done extensive checking and experimenting to understand what is wrong.  I'm now assuming that my mistake is due to my inexperience, and I am turning to better, more experienced sources.
<br/>
Any help, suggestions, and comments are greatly appreciated.  Thank you for your time.</span><span class="gensmall"><br/><br/>Last edited by tornadokick on Wed Jun 09, 2004 9:38 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#21785 - DiscoStew - Sat Jun 05, 2004 3:48 am</h4>
    <div class="postbody"><span class="postbody">In mode 2, only backgrounds 2 and 3 are used, and they are both affine transformable (or in other words, rotational and scalable), so text backgrounds won't work. To use text backgrounds, you need to use either Mode 0 (for 4 text backgrounds, bgs 0-3), or Mode 1 (2 text, bgs 0-1; 1 affine, bg 2). Or perhaps you meant to use a text background (since your code is set up that way), so a simple change to Mode_0 or Mode_1 in the SetMode parameter would do it.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21791 - tornadokick - Sat Jun 05, 2004 7:12 pm</h4>
    <div class="postbody"><span class="postbody">I made the changes and it seems to have helped a bit.  The display is a bit more jumbled but it's a change.  
<br/>
<br/>
<a href="http://www.geocities.com/bincaster/runMe_01.bmp" target="_blank">http://www.geocities.com/bincaster/runMe_01.bmp</a> &lt;- Copy and paste into your address bar.  It doesn't work otherwise.
<br/>
<br/>
This is an example of what I see when I run that code.  Ignore the frog that's there, that part runs fine.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21825 - tornadokick - Mon Jun 07, 2004 3:44 am</h4>
    <div class="postbody"><span class="postbody">ok, I finally found a solution.  A special thanks to DiscoStew for leading me in the right direction.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
