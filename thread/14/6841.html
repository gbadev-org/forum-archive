<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem including large bin data - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Problem including large bin data</h2>
<div id="posts">
<div class="post">
    <h4>#53927 - falvarez - Tue Sep 13, 2005 2:59 pm</h4>
    <div class="postbody"><span class="postbody">Hello.
<br/>
<br/>
I'm trying to play some sound on the GBA.I've exported PCM data to an array and put into a C file.
<br/>
<br/>
Player is working well while the array is little. But when I try to play a bigger file, I get this error linking:
<br/>
<br/>
/c/devkitPro/devkitARM/bin/arm-elf-gcc sounds.c -I. -I/c/devkitPro/devkitARM/arm-elf/include -I/c/devkitPro/devkitARM/include -I./inc -c -g -O2 -Wall -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork
<br/>
/c/devkitPro/devkitARM/bin/arm-elf-gcc -o player.elf player.o graficos.o irq_handler.o irq.o keyboard.o sprites.o mapper.o rooms.o sounds.o -mthumb -mthumb-interwork -specs=/c/devkitPro/devkitARM/arm-elf/lib/gba_mb.specs -L/c/devkitPro/devkitARM/arm-elf/lib/interwork -L/c/devkitPro/devkitARM/lib 
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: region ewram is full (player.elf section .rodata)
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: section .ctors [02000000 -&gt; 02000007] overlaps section .init [02000000 -&gt; 02000233]
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: section .dtors [02000008 -&gt; 0200000f] overlaps section .init [02000000 -&gt; 02000233]
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: section .jcr [02000010 -&gt; 02000013] overlaps section .init [02000000 -&gt; 02000233]
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: section .eh_frame [02000014 -&gt; 02000017] overlaps section .init [02000000 -&gt; 02000233]
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: section .iwram [02000018 -&gt; 02000127] overlaps section .init [02000000 -&gt; 02000233]
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: section .data [02000128 -&gt; 02000b37] overlaps section .init [02000000 -&gt; 02000233]
<br/>
<br/>
I've defined the array like this:
<br/>
<br/>
const u8 pcmdata[65536] = { ..... };
<br/>
<br/>
How can I manage to store this "raw" data in the ROM or another region with more free space?
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53951 - tepples - Tue Sep 13, 2005 8:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>falvarez wrote:</b></span></td> </tr> <tr> <td class="quote">I'm trying to play some sound on the GBA.I've exported PCM data to an array and put into a C file.
<br/>
<br/>
Player is working well while the array is little. But when I try to play a bigger file, I get this error linking:
<br/>
<br/>
arm-elf-gcc -specs=/c/devkitPro/devkitARM/arm-elf/lib/<span style="font-weight: bold">gba_mb.specs</span> [...]
<br/>
/c/devkitPro/devkitARM/bin/../lib/gcc/arm-elf/3.4.4/../../../../arm-elf/bin/ld: <span style="font-weight: bold">region ewram is full</span> (player.elf section .rodata)
<br/>
</td> </tr></table><span class="postbody">
<br/>
If you use <span style="font-weight: bold">-specs=gba_mb.specs</span> then everything must fit into EWRAM, which is only 0.25 MiB. In order to make use of ROM space (for a GBA flash card or a PC-based GBA emulator), use <span style="font-weight: bold">-specs=gba.specs</span> instead.
<br/>
<br/>
If you want to have the code in EWRAM but the data in ROM, you'll need to use <a class="postlink" href="http://www.pineight.com/gba/#gbfs" target="_blank">GBFS</a>. (I use this technique in Luminesweeper to help save energy and to help simplify making both multiboot and ROM based builds of a single program.)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53956 - falvarez - Tue Sep 13, 2005 10:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If you use <span style="font-weight: bold">-specs=gba_mb.specs</span> then everything must fit into EWRAM, which is only 0.25 MiB. In order to make use of ROM space (for a GBA flash card or a PC-based GBA emulator), use <span style="font-weight: bold">-specs=gba.specs</span> instead.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you very much, you have made my day! :-)
<br/>
<br/>
I didn't notice that option, guess I copied from elsewhere.
<br/>
<br/>
Best regards.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
