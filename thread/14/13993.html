<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Makefile Help - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Makefile Help</h2>
<div id="posts">
<div class="post">
    <h4>#138443 - Kiz - Fri Aug 24, 2007 5:28 am</h4>
    <div class="postbody"><span class="postbody">Hi guys,
<br/>
<br/>
I've been reading some example code, and now I'm looking to try and port some of my OpenGL work to my DS (just for the sake of it). However, instead of editing my existing makefile and butchering the hell out of it with all the various devkitPro stuff that I've got no clue about, I figured I'd just build a new one around one of the example makefiles.
<br/>
<br/>
The thing is, I'm not that great with the advanced side of makefiles, so I got a bit lost trying to follow the logic in one of the example makefiles (eg: the one found at <a href="http://devkitpro.cvs.sourceforge.net/devkitpro/examples/nds/Graphics/3D/nehe/lesson05/" target="_blank">http://devkitpro.cvs.sourceforge.net/devkitpro/examples/nds/Graphics/3D/nehe/lesson05/</a> ). From what I can gather reading through it, it ignores .h files that are in the source directory. What exactly would I need to change so that it would recompile a respective .o file if the .h file has changed?
<br/>
<br/>
I *think* that I'd just have to add something like
<br/>
HFILES := $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.h))) at line 71, then change the export OFILES (line 86) to also include $(HFILES:.h=.o)
<br/>
<br/>
Am I on the right track?
<br/>
<br/>
Also, the export VPATH (line 62) line makes it compile all source in subdirectories (and their subdirectories etc.) of the source directory, right?
<br/>
<br/>
Thanks in advance for the help, just trying to understand everything as well as I can before I start coding.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138446 - wintermute - Fri Aug 24, 2007 6:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Kiz wrote:</b></span></td> </tr> <tr> <td class="quote">Hi guys,
<br/>
<br/>
The thing is, I'm not that great with the advanced side of makefiles, so I got a bit lost trying to follow the logic in one of the example makefiles (eg: the one found at <a href="http://devkitpro.cvs.sourceforge.net/devkitpro/examples/nds/Graphics/3D/nehe/lesson05/" target="_blank">http://devkitpro.cvs.sourceforge.net/devkitpro/examples/nds/Graphics/3D/nehe/lesson05/</a> ). From what I can gather reading through it, it ignores .h files that are in the source directory. What exactly would I need to change so that it would recompile a respective .o file if the .h file has changed?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Absolutely nothing.
<br/>
<br/>
The devkitPro build system is designed to find all C/C++ files in the specified directories and link them into your project. The build rules use gcc's auto dependency generation features which parse the source files for headers and add makefile rules.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138447 - Kiz - Fri Aug 24, 2007 7:22 am</h4>
    <div class="postbody"><span class="postbody">Ah, thanks for clearing that up for me.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
