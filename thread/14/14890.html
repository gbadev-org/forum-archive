<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ds_arm9_crt0.s:(.init+0x2b8): undefined reference to `main' - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > ds_arm9_crt0.s:(.init+0x2b8): undefined reference to `main'</h2>
<div id="posts">
<div class="post">
    <h4>#149540 - Cave Johnson - Mon Jan 21, 2008 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Why do i keep getting this error? It seems be saying that im missing a main() function in my code, but unless im totally not understanding a major aspect of programming, dont i have one? Heres the first snippet of my main.cpp file: 
<br/>
#include &lt;nds.h&gt;
<br/>
#include "colors_slot1.h"
<br/>
<br/>
init main() {
<br/>
    iriqInit();
<br/>
    iriqSet (IRQ_VBLANK, 0);
<br/>
<br/>
    lcdMainOnBottom();
<br/>
    initVideo();
<br/>
    initBackgrounds();
<br/>
<br/>
    displaycolors_slot1();
<br/>
<br/>
    return 0;
<br/>
}
<br/>
What am i doing wrong? Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149544 - DiscoStew - Mon Jan 21, 2008 10:02 pm</h4>
    <div class="postbody"><span class="postbody">change "init main() {" to "int main() {"
<br/>
<br/>
EDIT:
<br/>
<br/>
Also, you should make sure that other functions match the correct names. The "Iriq" stuff is most likely "Irq" unless you've made your own functions that do the same thing.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149549 - Cave Johnson - Mon Jan 21, 2008 10:18 pm</h4>
    <div class="postbody"><span class="postbody">Thank you that fixed that code, but in this code to make a grit file of a png image, i get the same error, why here? Thanks.
<br/>
<br/>
#include &lt;nds.h&gt; 
<br/>
#include &lt;stdio.h&gt; 
<br/>
<br/>
#include "colors_slot1.h" 
<br/>
<br/>
int getSize(uint8 *source, uint16 *dest, uint32 arg) { 
<br/>
return *(uint32*)source; 
<br/>
} 
<br/>
<br/>
uint8 readByte(uint8 *source) { 
<br/>
return *source; 
<br/>
} 
<br/>
TDecompressionStream colors_slot1_decomp = { 
<br/>
getSize, 
<br/>
NULL, 
<br/>
readByte 
<br/>
}; 
<br/>
<br/>
int main(void) { 
<br/>
irqInit(); 
<br/>
irqEnable(IRQ_VBLANK); 
<br/>
<br/>
videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE); 
<br/>
<br/>
videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE); 
<br/>
<br/>
vramSetMainBanks( VRAM_A_MAIN_BG_0x06000000, VRAM_B_LCD, 
<br/>
VRAM_C_SUB_BG , VRAM_D_LCD); 
<br/>
<br/>
SUB_BG0_CR = BG_MAP_BASE(31); 
<br/>
<br/>
BG_PALETTE_SUB[255] = RGB15(31,31,31); 
<br/>
<br/>
consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16); 
<br/>
<br/>
iprintf("\n\n\tWelcome To\n"); 
<br/>
iprintf("\tProject Satan\n"); 
<br/>
iprintf("\t(Yes Its a Futurama Reference)"); 
<br/>
<br/>
BG3_CR = BG_BMP16_256x256; 
<br/>
<br/>
BG3_XDX = 1 &lt;&lt; 8; 
<br/>
BG3_XDY = 0; 
<br/>
BG3_YDX = 0; 
<br/>
BG3_YDY = 1 &lt;&lt; 8; 
<br/>
<br/>
BG3_CX = 0; 
<br/>
BG3_CY = 0; 
<br/>
<br/>
swiDecompressLZSSVram((void*)colors_slot1Bitmap, BG_GFX, 0, &amp;colors_slot1_decomp); 
<br/>
while(1) swiWaitForVBlank(); 
<br/>
<br/>
return 0; 
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149552 - DiscoStew - Mon Jan 21, 2008 10:45 pm</h4>
    <div class="postbody"><span class="postbody">I can't spot the problem myself, but what you probably should do is start with that small example you had, and build it up slowly from there. Perhaps the problem will pop up when something gets added.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149554 - Cave Johnson - Mon Jan 21, 2008 10:54 pm</h4>
    <div class="postbody"><span class="postbody">Hmmmm, i guess il have to do that, but do you know any good .grit tutorials or examples i can follow and work with, or is their an easier way to get a background and sprite into a game? Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149555 - DiscoStew - Mon Jan 21, 2008 11:01 pm</h4>
    <div class="postbody"><span class="postbody">I've honestly never touched anything involving .grit files.  :(<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149560 - Cave Johnson - Mon Jan 21, 2008 11:20 pm</h4>
    <div class="postbody"><span class="postbody">they are going to be the death of me! is their anyway to put  pictures and sprites in there without using grit files, but something easier and less confusing?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149563 - Cave Johnson - Mon Jan 21, 2008 11:57 pm</h4>
    <div class="postbody"><span class="postbody">Ok now im getting the same error with a basic hello world, so what is wrong with this code? Thanks.
<br/>
<br/>
#include &lt;nds.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
int main(void)
<br/>
{
<br/>
  videoSetMode(0);
<br/>
  videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
  vramSetBankC(VRAM_C_SUB_BG);
<br/>
  SUB_BG0_CR = BG_MAP_BASE(31);
<br/>
<br/>
  BG_PALETTE_SUB[255] = RGB15(31,31,31);
<br/>
<br/>
  consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
<br/>
  printf("\n\n\tHello World!\n");
<br/>
  while(1) {
<br/>
    touchPosition touchXY = touchReadXY();
<br/>
    printf("\x1b[10;0H");
<br/>
    printf("Touch x = %d   \n", touchXY.px);
<br/>
    printf("Touch y = %d   \n", touchXY.py);
<br/>
  }
<br/>
  return 0;
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149569 - Cearn - Tue Jan 22, 2008 1:23 am</h4>
    <div class="postbody"><span class="postbody">It's not the grit part that's the problem. For some reason, your sources just aren't compiled. If they were, you'd have seen compiler errors for "init main" and such instead of linker errors. Check the SOURCES variable in the makefile. In all likelihood the folder with your sources isn't in it. It might help if you posted the makefile.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149571 - Cave Johnson - Tue Jan 22, 2008 1:48 am</h4>
    <div class="postbody"><span class="postbody">Thanks so much to everyone for putting up with my nooby problems, and hizzah its fixed! Cearn your right it was in my makefile!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
