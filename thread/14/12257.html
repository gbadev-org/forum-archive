<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>makefile noob - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > makefile noob</h2>
<div id="posts">
<div class="post">
    <h4>#116498 - wiz - Fri Jan 26, 2007 11:31 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
(post edited)
<br/>
<br/>
In a makefile can you change the directory to make files in subfolders?</span><span class="gensmall"><br/><br/>Last edited by wiz on Fri Jan 26, 2007 1:00 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#116500 - keldon - Fri Jan 26, 2007 11:52 am</h4>
    <div class="postbody"><span class="postbody">A bat file is not a makefile. Here is a <a class="postlink" href="http://www.eng.hawaii.edu/Tutor/Make/" target="_blank">makefile tutorial</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116501 - wiz - Fri Jan 26, 2007 11:56 am</h4>
    <div class="postbody"><span class="postbody">((inital post edited))</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116509 - keldon - Fri Jan 26, 2007 1:48 pm</h4>
    <div class="postbody"><span class="postbody">Sometimes editing a post in that nature is unnecessary and far less helpful to yourself. Edit changes, not the entire content!
<br/>
<br/>
Do you mean to run a makefile from within a makefile? What are you trying to achieve first?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116517 - kusma - Fri Jan 26, 2007 3:18 pm</h4>
    <div class="postbody"><span class="postbody">GNU Make can call "make -C some_dir" to enter some_dir and make there. Or, if you simply want it to look for source-files in multiple folders, try the VPATH-directive. 
<br/>
<br/>
<a href="http://www.gnu.org/software/make/manual/make.html" target="_blank">http://www.gnu.org/software/make/manual/make.html</a> is your friend.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116584 - wiz - Sat Jan 27, 2007 3:26 am</h4>
    <div class="postbody"><span class="postbody">Hi and thanks for your replies, sorry I wasnt very clear in what I am trying to acheive.  I hope this will make more sense.
<br/>
<br/>
I have a subfolder, called GFX in my project folder.  Inside GFX I have a simple BMP file that when I update it I would like my makefile to process it.
<br/>
<br/>
To manually update the BMP file I would normally use a command line command GFX2GBA.EXE with flags
<br/>
<br/>
Below is some of my makefile contents:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
gfx/IMAGE.raw.c : gfx/IMAGE.bmp
<br/>
   gfx/gfx2gba -fsrc -x -t8 gfx/IMAGE.BMP
<br/>
</td> </tr></table><span class="postbody">
<br/>
This works but the problem I have is the output from "GFX2GBA" is put in to my project folder, and I would like it to be in my GFX folder with the actual BMP file.
<br/>
<br/>
Also doing it this way requires me to add the path <span style="font-weight: bold">gfx/ </span>to everything - even the command parameters.
<br/>
<br/>
I have read quite a few tutorials but I can't figure this out.
<br/>
<br/>
I appreciate the help I get from you guys. thank you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116593 - tepples - Sat Jan 27, 2007 5:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wiz wrote:</b></span></td> </tr> <tr> <td class="quote">I have a subfolder, called GFX in my project folder.  Inside GFX I have a simple BMP file that when I update it I would like my makefile to process it.
<br/>
<br/>
To manually update the BMP file I would normally use a command line command GFX2GBA.EXE with flags
<br/>
<br/>
Below is some of my makefile contents:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
gfx/IMAGE.raw.c : gfx/IMAGE.bmp
<br/>
   gfx/gfx2gba -fsrc -x -t8 gfx/IMAGE.BMP
<br/>
</td> </tr></table><span class="postbody">
<br/>
This works but the problem I have is the output from "GFX2GBA" is put in to my project folder, and I would like it to be in my GFX folder with the actual BMP file.</span></td> </tr></table><span class="postbody">
<br/>
Have you considered the -o option of gfx2gba to put the output in a given folder?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Also doing it this way requires me to add the path <span style="font-weight: bold">gfx/ </span>to everything - even the command parameters.</td> </tr></table><span class="postbody">
<br/>
Make provides a shortcut $@ meaning the output file, a shortcut $^ meaning the input files, and a shortcut $&lt; meaning the first input file. This should reduce the typing somewhat.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116662 - wiz - Sun Jan 28, 2007 12:44 am</h4>
    <div class="postbody"><span class="postbody">Cheers I will try that :)
<br/>
<br/>
I didnt even think to look at gfx2gba options!  The shortcuts will come in very handy too.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116664 - tepples - Sun Jan 28, 2007 1:02 am</h4>
    <div class="postbody"><span class="postbody">There are also <a class="postlink" href="http://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html#Pattern-Rules" target="_blank">pattern rules</a> using the % character, which make <a class="postlink" href="http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#Automatic-Variables" target="_blank">the shortcuts</a> even more powerful:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">%.raw.c : %.bmp
<br/>
   gfx/gfx2gba -fsrc -x -t8 $&lt; -o$(&lt;D)</td> </tr></table><span class="postbody">
<br/>
where $(&lt;D) refers to the folder containing the .bmp file.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
