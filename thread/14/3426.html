<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>HDMA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > HDMA</h2>
<div id="posts">
<div class="post">
    <h4>#20899 - LOst? - Wed May 19, 2004 2:21 pm</h4>
    <div class="postbody"><span class="postbody">Okay, HDMA sounds really interesting. Mostly because it's something that was built into GBA to handle raster effects automatically.
<br/>
<br/>
Still with mode 7 tutorials and Cowbit documention, I don't get what I want.
<br/>
<br/>
I don't want to do mode 7. I want to do horizontal raster scrolling.
<br/>
<br/>
I set off the HDMA durring VBlank. I set it to repeat itself, and to do all these things that other "commercial" games do. Yes I had to debug the games to find the flags since no tutorial take them up.
<br/>
<br/>
Interesting how it turned out to be. First of all, I hate the first scanline! I just hate how it is drawn the last frame instead of the current. How much I try to fix this, I fail. I rearrange the whole code but still that stupid mother ****** is drawn the last frame.
<br/>
<br/>
And not only that. The game isn't running at 60 fps. WTF! In one emulator it runs correctly, in another (VisualBoy Advance) it just speeds away giving tearings and other funny effects that helps me with my future development of 2d games for GBA.
<br/>
<br/>
Yea, and now the GBA is dying. The DS is on its way, And I have still not completed one singe GBA game because of the unsychronized hardware &gt;.&lt;
<br/>
<br/>
Is this the end? Why is hardware always in the way of my projects &gt;.&lt;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20909 - Miked0801 - Wed May 19, 2004 7:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Why is hardware always in the way of my projects &gt;.&lt;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Because if it wasn't, any PC programmer could do a GBA game and they would be no challenge :)
<br/>
<br/>
I'll let others handle the HDMA question as my experience here isn't enough to safely help you :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20928 - tepples - Thu May 20, 2004 3:48 am</h4>
    <div class="postbody"><span class="postbody">I've done rot/scale HDMA just fine. I'll help:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">First of all, I hate the first scanline! I just hate how it is drawn the last frame instead of the current. How much I try to fix this, I fail. I rearrange the whole code but still that stupid mother ****** is drawn the last frame.</td> </tr></table><span class="postbody">
<br/>
Here's what you do: Set the registers for scanline 1 manually during vblank, and then set the HDMA start pointer to the data for scanline 1.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And not only that. The game isn't running at 60 fps. WTF! In one emulator it runs correctly, in another (VisualBoy Advance) it just speeds away giving tearings and other funny effects that helps me with my future development of 2d games for GBA.</td> </tr></table><span class="postbody">
<br/>
How does it go on hardware, if you have any? Are you making sure to wait for the start of vblank before changing things? And are you making sure to turn OFF the channel before rewriting the source address register?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/* It should look roughly like this: */
<br/>
DMA[0].control = 0;
<br/>
DMA[0].src = whatever;
<br/>
DMA[0].dst = &amp;(BGSCROLL[0].x);
<br/>
DMA[0].count = 1;
<br/>
DMA[0].control = whatever;</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
