<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Setting up devkitarm, osx Makefile - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Setting up devkitarm, osx Makefile</h2>
<div id="posts">
<div class="post">
    <h4>#48396 - justinGBA - Tue Jul 19, 2005 7:57 pm</h4>
    <div class="postbody"><span class="postbody">I am stuck and i do not understand the layout of the makefile..
<br/>
<br/>
For reference, this one looks nice...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# === Project details (add your own stuff here) === 
<br/>
PROJ? ? := foo 
<br/>
<br/>
INCLUDE? := 
<br/>
LIBPATHS := 
<br/>
<br/>
LIBS? ? := 
<br/>
COBJS? ?:= $(PROJ).o 
<br/>
SOBJS? ?:= 
<br/>
OBJS? ? := $(COBJS) $(SOBJS) 
<br/>
<br/>
# --- boot type --- 
<br/>
MB = 0 
<br/>
ifeq ($(MB),1) 
<br/>
EXT? ? ?:= mb.gba 
<br/>
SPECS? ?:= -specs=gba_mb.specs 
<br/>
else 
<br/>
EXT? ? ?:= gba 
<br/>
SPECS? ?:= -specs=gba.specs 
<br/>
endif 
<br/>
<br/>
# --- Compiling --- 
<br/>
CROSS:= arm-elf- 
<br/>
AS= $(CROSS)as 
<br/>
CC= $(CROSS)gcc 
<br/>
LD= $(CROSS)gcc 
<br/>
OBJCOPY= $(CROSS)objcopy 
<br/>
<br/>
MODEL? ?:= -mthumb-interwork -mthumb 
<br/>
CBASE? ?:= $(INCLUDE) -O2 -Wall -mthumb-interwork 
<br/>
<br/>
ASFLAGS := -mthumb-interwork 
<br/>
CFLAGS? := $(CBASE) -mthumb 
<br/>
LDFLAGS := $(SPECS) $(MODEL) $(LIBPATHS) $(LIBS)? -Wl,-Map,$(PROJ).map 
<br/>
<br/>
# === Building steps === 
<br/>
build: $(PROJ).$(EXT) 
<br/>
<br/>
# --- convert to binary --- 
<br/>
$(PROJ).$(EXT) : $(PROJ).elf 
<br/>
? ?@$(OBJCOPY) -v -O binary $&lt; $@ 
<br/>
? ?-@gbafix $@ 
<br/>
<br/>
# --- link --- 
<br/>
$(PROJ).elf : $(OBJS) 
<br/>
? ?$(LD) $(OBJS) $(LDFLAGS) -o $@ 
<br/>
<br/>
# --- compile --- 
<br/>
$(COBJS) : %.o : %.c 
<br/>
? ?$(CC) $(CFLAGS) -c $&lt; -o $@ 
<br/>
<br/>
# === Clean === 
<br/>
.PHONY : clean 
<br/>
clean : 
<br/>
? ?@rm -fv $(OBJS) 
<br/>
? ?@rm -fv $(PROJ).$(EXT) 
<br/>
? ?@rm -fv $(PROJ).elf 
<br/>
<br/>
#EOF
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
now all my devkit arm stuff is in...
<br/>
<br/>
/Developer/GameBoy\ Advance/devkitARM
<br/>
/Developer/GameBoy\ Advance/libgba
<br/>
<br/>
how do i let the make file know where the tools are so it builds?
<br/>
<br/>
sorry im new to unix style programming
<br/>
<br/>
TIA</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51051 - pizzach - Mon Aug 15, 2005 10:29 pm</h4>
    <div class="postbody"><span class="postbody">Hoookay.  I'm going to do some guesses here.  Hopefully the gba gods don't get mad at me.  But maybe they'll supply a bit if help if I'm wrong.
<br/>
<br/>
I'm not seeing any thing for path.  So I would try putting it in before the "arm-elf-" in the "CROSS:= arm-elf-".
<br/>
<br/>
So it would turn into
<br/>
CROSS:= /Developer/GameBoy\ Advance/devkitARM/bin/arm-elf-
<br/>
<br/>
Notice that I added the bin directory.
<br/>
<br/>
Basically anytime you see $(CROSS) it is replaced with whater the closs variable is when the make file in run. (Don't know how obvious that was or if I phrased it right.)
<br/>
<br/>
<br/>
<span style="text-decoration: underline">as is the gba assembler aka arm-elf-as</span>
<br/>
Um...haven't used it yet.
<br/>
<span style="text-decoration: underline">
<br/>
gcc is the gba compiler aka arm-elf-gcc</span>
<br/>
File conversion thingies it does:
<br/>
filename.c---&gt;filename.o
<br/>
filename.o and other files---&gt;filename.elf
<br/>
<br/>
<span style="text-decoration: underline">objcopy um....pulls the stuff together into the final product. aka arm-elf-objcopy</span>
<br/>
file conversion thingies it does:
<br/>
filename.elf---&gt;filename.gba which is useable in an emulator.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51065 - tepples - Tue Aug 16, 2005 12:56 am</h4>
    <div class="postbody"><span class="postbody">'as' is the assembler; it turns .s files into .o files. But in general, it's better to call 'gcc' directly even for .s files unless you have a good reason not to. For one thing, 'gcc' can run the C preprocessor on input files, letting you use #define style macros within assembly language files.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
