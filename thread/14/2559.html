<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Blending/Fading - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Blending/Fading</h2>
<div id="posts">
<div class="post">
    <h4>#14022 - dagamer34 - Sat Dec 27, 2003 6:21 pm</h4>
    <div class="postbody"><span class="postbody">Let me just get straight to the point...
<br/>
<br/>
Where to start? Source? Examples? etc...
<br/>
<br/>
Thanks<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14034 - poslundc - Sun Dec 28, 2003 12:06 am</h4>
    <div class="postbody"><span class="postbody">The <a class="postlink" href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm" target="_blank">Cowbite Spec</a> describes exactly how the registers work. It's pretty straightforward: you specify which elements (backgrounds, sprites, etc.) you want to be the source of the blend, which you want to be in the target, then specify an amount.
<br/>
<br/>
You can only blend one set of screen elements against another set of screen elements. Fading to black or white just involves using a different register to specify the amount and you only need to specify the source (since the target will either be the colour black or white).
<br/>
<br/>
You can also do fading using palette manipulation. This is simply a matter of interpolating the palette's members from their start value to their end value.
<br/>
<br/>
I'm think the standard tutorials (<a class="postlink" href="http://www.thepernproject.com" target="_blank">http://www.thepernproject.com</a>, <a class="postlink" href="http://www.gbajunkie.co.uk" target="_blank">http://www.gbajunkie.co.uk</a>) also cover this topic. They may have demo code you can download.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14037 - dagamer34 - Sun Dec 28, 2003 12:42 am</h4>
    <div class="postbody"><span class="postbody">I have already looked at both <a href="http://www.pernproject.com" target="_blank">www.pernproject.com</a> and <a href="http://www.gbajunki.co.uk/" target="_blank">www.gbajunki.co.uk/</a>
<br/>
<br/>
The Pern Project talks about it BRIEFLY but with no example for me to look at, i am between a rock and another rock with no where to go.
<br/>
<br/>
And looking at the CowBite spec does shed some light. I mean, i know what to do, alpha-blending just doesn't want to work for me. Basically, i would like an example/demo, using it.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14038 - poslundc - Sun Dec 28, 2003 1:36 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://thepernproject.com/Examples/tutoralpha.zip" target="_blank">http://thepernproject.com/Examples/tutoralpha.zip</a>
<br/>
<br/>
It took me about 30 seconds to find it on the Examples page. Did you even look?
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14057 - jma - Sun Dec 28, 2003 5:31 pm</h4>
    <div class="postbody"><span class="postbody">In Dragon BASIC there are the API functions FADEIN and FADEOUT. You probably are interested in C, that's fine. Go to <a href="http://www.jm-basic.com/dragon/download.php" target="_blank">http://www.jm-basic.com/dragon/download.php</a> and get the Special Effects library. 
<br/>
<br/>
Take a look at "EFFECTS.F" and it will give the assembly code for these functions, which isn't very difficult to follow (assuming you know ARM assembly).
<br/>
<br/>
If that isn't descriptive enough, I can try and post equivelant C code for you.
<br/>
<br/>
Jeff<br/>_________________<br/><a href="mailto:massung@gmail.com">massung@gmail.com</a>
<br/>
<a href="http://www.retrobyte.org" target="_blank">http://www.retrobyte.org</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14075 - dagamer34 - Mon Dec 29, 2003 1:42 am</h4>
    <div class="postbody"><span class="postbody">Okay, i got it to work. Now my library is just about finished. I think maybe I'll post a link up here so newbies won't have to go through what I did.
<br/>
<br/>
Next up, windows. Besides CowBite, anybody know where i can get some info on them? And what can they be used for?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14085 - jenswa - Mon Dec 29, 2003 2:24 pm</h4>
    <div class="postbody"><span class="postbody">GBATEK is just another list as Cowbite for the gba.
<br/>
<br/>
There was an example of windows posted a few days ago on gbadev,
<br/>
or was it fixed with scanlines? I can't remember exactly.<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14091 - dagamer34 - Mon Dec 29, 2003 7:08 pm</h4>
    <div class="postbody"><span class="postbody">I think i am better off solving my own problems... Seems its always one thing that makes things go wrong.
<br/>
<br/>
But my LAST problem is not a syntax error. I need to know how to link in the standard C library. I am using the GBA Appwizard makefile so if you could just give me some directions, it would help make my day.
<br/>
<br/>
When this is all done, i think I'll make a tutorial over all this stuff, especially windowing and alpha-blending, the things not clearly said in the Pern Project or GBAJunkie tutorials.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14100 - sajiimori - Mon Dec 29, 2003 8:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
When this is all done, i think I'll make a tutorial over all this stuff...
<br/>
</td> </tr></table><span class="postbody">
<br/>
Would you consider posting it here for feedback first?  As you've probably discovered, many of the tutorials out there have serious errors, and I'm sure you wouldn't want to inadvertantly cause confusion due to a typo somewhere.  =)
<br/>
<br/>
Anyway, if you want to know how to link things, you can read the manual, or listen to what tepples and I have already said.  If it isn't working with your makefile, try a different one, or try linking something by hand to see if you're getting the basic idea (recommended).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14101 - jenswa - Mon Dec 29, 2003 9:17 pm</h4>
    <div class="postbody"><span class="postbody">Or just use batch file, like i always do.
<br/>
<br/>
Well i don't get into interrupts and other difficult stuff,
<br/>
because i can't set them up properly.
<br/>
<br/>
If it doesn't run with my make.bat i don't run it at all.<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14102 - dagamer34 - Mon Dec 29, 2003 9:47 pm</h4>
    <div class="postbody"><span class="postbody">Tried the batch file, jenswa and i get the SAME errors. By the way, i am using v4 of DevKitAdvance. Is v5 beta 3 stable?
<br/>
<br/>
EDIT: I download v5-beta3 and it still doesn't work.
<br/>
<br/>
Here is my makefile:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
# ------------------------------------------
<br/>
# Title:      Default Makefile for use in VC++
<br/>
# File:          GBALibTest.mak
<br/>
# Revision:     01/06/2002
<br/>
# 
<br/>
# Author:      Benjamin D. Hale
<br/>
# Orignally by:         Jaap Suter
<br/>
# Contributed to by:    Christer Andersson
<br/>
# 
<br/>
# Info:              This file is contains the make-instructions
<br/>
#         for the project. Replace DEVDIR with the appropriate
<br/>
#                       base directory for devkitadv. After you make the 
<br/>
#                       needed modifications here rename this file to
<br/>
#                       &lt;project_name&gt;.mak so Visual C++ does not get
<br/>
#                       confused.
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Project name definition makes this whole thing 
<br/>
# a lot easier to use. Only two total modifications
<br/>
# (other than what .o files will be needed)
<br/>
# should be needed to get this working with your
<br/>
# compiler and Visual C++. Replace "Default" with
<br/>
# your project's name.
<br/>
# -------------------------------------------
<br/>
<br/>
PROJECT = GBALibTest
<br/>
<br/>
# -------------------------------------------
<br/>
# Define some directories;
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Base Directory for gcc arm-agb-elf replace with 
<br/>
# wherever you put your gba devkitadv files.
<br/>
# -------------------------------------------
<br/>
<br/>
DEVDIR  = C:\Consoles\GBA\DevKits\DevKitAdv\v5
<br/>
<br/>
# -------------------------------------------
<br/>
# Source directory (where your project's source files are located.)
<br/>
# -------------------------------------------
<br/>
<br/>
SRCDIR  = C:\Consoles\GBA\Projects\DevKitAdv\GBALibTest\
<br/>
<br/>
# -------------------------------------------
<br/>
# Compiler Directories for binaries, includes and libs.
<br/>
# -------------------------------------------
<br/>
<br/>
CMPDIR  = $(DEVDIR)\bin
<br/>
LIBDIR  = $(DEVDIR)\lib\gcc-lib\arm-agb-elf\3.0.2\interwork
<br/>
LIBDIR2 = $(DEVDIR)\arm-agb-elf\lib\interwork
<br/>
INCDIR  = $(DEVDIR)\lib\gcc-lib\arm-agb-elf\3.0.2\include
<br/>
INCDIR2 = $(DEVDIR)\arm-agb-elf\include
<br/>
<br/>
# -------------------------------------------
<br/>
# END of directory defines
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define what extensions we use;
<br/>
# -------------------------------------------
<br/>
.SUFFIXES : .cpp .c .s
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the flags for the compilers;
<br/>
# -------------------------------------------
<br/>
CFLAGS  = -I $(INCDIR2) -I $(INCDIR) -I $(SRCDIR) -mthumb-interwork -c -g -O2 -Wall -fverbose-asm
<br/>
SFLAGS  = -I $(INCDIR2) -I $(INCDIR) -mthumb-interwork 
<br/>
LDFLAGS = -L $(LIBDIR) -L $(LIBDIR2) -T LinkScript 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the list of all O files;
<br/>
# Just follow the syntax shown to add any 
<br/>
# other objects your project may need to
<br/>
# compile properly. You will need to add 
<br/>
# files to this part to make it work with 
<br/>
# your project add a \ to the end of all o
<br/>
# files except the last one. Like below.
<br/>
# -------------------------------------------
<br/>
<br/>
O_FILES          = \
<br/>
                   crt0.o       \
<br/>
                   crtbegin.o   \
<br/>
                   crtend.o     \
<br/>
               funct.o      \
<br/>
               GBALibTest.o
<br/>
<br/>
# -------------------------------------------
<br/>
# There should be no need to modify anything
<br/>
# below here.
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the final dependecy;
<br/>
# -------------------------------------------
<br/>
all : $(PROJECT).gba
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the copy from .elf to .bin file
<br/>
# -------------------------------------------
<br/>
$(PROJECT).gba : $(PROJECT).elf
<br/>
   $(CMPDIR)\objcopy -v -O binary $(PROJECT).elf $(PROJECT).gba
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo Done 
<br/>
   -@echo ------------------------------------------ 
<br/>
   
<br/>
# -------------------------------------------
<br/>
# Define the linker instruction;
<br/>
# -------------------------------------------
<br/>
$(PROJECT).elf : $(O_FILES)
<br/>
   $(CMPDIR)\ld $(LDFLAGS) -o $(PROJECT).elf $(O_FILES) -lm -lc -lgcc -lstdc++
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo Linking Done
<br/>
   -@echo ------------------------------------------ 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define each compile;
<br/>
# -------------------------------------------
<br/>
{$(SRCDIR)}.cpp.o::
<br/>
   $(CMPDIR)\gcc  $(CFLAGS) $&lt; 
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo CPP-Sources Compiled 
<br/>
   -@echo ------------------------------------------ 
<br/>
<br/>
{$(SRCDIR)}.c.o::
<br/>
   $(CMPDIR)\gcc  $(CFLAGS) $&lt;
<br/>
   -@echo ------------------------------------------
<br/>
   -@echo C-sources Compiled
<br/>
   -@echo ------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define each assemble;
<br/>
# -------------------------------------------
<br/>
{$(SRCDIR)}.s.o:
<br/>
   $(CMPDIR)\as $(SFLAGS) $(SRCDIR)\$*.s -o$@
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo ASM-Sources Compiled 
<br/>
   -@echo ------------------------------------------ 
<br/>
   
<br/>
# -------------------------------------------
<br/>
# Any problems with getting this working email
<br/>
# questions to <a href="mailto:whatzdat_pimp@hotmail.com">whatzdat_pimp@hotmail.com</a> .
<br/>
# This was tested on devkitadv r4 and Visual C++ 6
<br/>
# on a p3 450/512mb/Windows XP Pro.
<br/>
# -------------------------------------------
<br/>
# EOF;
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I just don't get it. I am about to pull out my hair!!<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14104 - crossraleigh - Tue Dec 30, 2003 12:40 am</h4>
    <div class="postbody"><span class="postbody">That makefile is fancy (or at least bloated), but its no way to learn. Here is a simpler one:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">TARGET = foo
<br/>
OBJ    = foo.o bar.o
<br/>
LIB    = -L/path/to/library/files -lfoolib -Tlnkscript
<br/>
CFLAGS = -I. -I/path/to/include/files -g -mthumb-interwork
<br/>
CC     = /path/to/arm-agb-gcc
<br/>
<br/>
$(TARGET): $(OBJ)
<br/>
   $(CC) -o $(TARGET).elf $(OBJ) $(LIB) # Make will compile each object individually then link them with LIB.
<br/>
   /path/to/arm-agb-objcopy -v -O binary $(TARGET).elf $(TARGET).gba
<br/>
<br/>
clean:
<br/>
   rm -f $(TARGET) (OBJ) # Use the DEL command if you are on DOS.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Make will exand that into something like:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/path/to/arm-agb-gcc -I. -I/path/to/include/files -g -mthumb-interwork -c foo.o foo.c
<br/>
/path/to/arm-agb-gcc -I. -I/path/to/include/files -g -mthumb-interwork -c bar.o bar.c
<br/>
/path/to/arm-agb-gcc -o foo.elf foo.o bar.o -L/path/to/library/files -lfoolib -Tlnkscript
<br/>
/path/to/arm-agb-objcopy -v -O binary foo.elf foo.gba
<br/>
</td> </tr></table><span class="postbody">
<br/>
There is no need to remake crt0.S each time, you could just prepend crt0.o (or any other other crt* files) to LIB. To link with a library (e.g., foolib.a) put -lfoolib in LIB.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14106 - dagamer34 - Tue Dec 30, 2003 1:52 am</h4>
    <div class="postbody"><span class="postbody">Since I don't think I am going to find that problem, i have decided to upload my project for those who feel like helping me and fixing it.
<br/>
<br/>
There's a readme for the project too. Thanks for all your help you guys.
<br/>
<br/>
And, yea, before I "officially" release the tutorials I'm making, I'll have someone proofread them for errors.
<br/>
<br/>
The site:
<br/>
<a href="http://www.geocities.com/dagamer34/index.html" target="_blank">http://www.geocities.com/dagamer34/index.html</a>
<br/>
Its the first link.
<br/>
<br/>
This is a cheap site i put together in about 3 minutes, so don't critisize me!<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14117 - dagamer34 - Tue Dec 30, 2003 4:32 pm</h4>
    <div class="postbody"><span class="postbody">I fixed my OWN problem. Unfortunately, there is yet another bug in DKA v5beta3(then again, it IS a beta).
<br/>
<br/>
In my project i got it to work with v4 and these link options: -lstdc++ -lm -lgcc -lc -lgcc 
<br/>
<br/>
Any word on when v5 will be released?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
