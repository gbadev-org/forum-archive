<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>tile mode 0, sprite not displaying properly - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > tile mode 0, sprite not displaying properly</h2>
<div id="posts">
<div class="post">
    <h4>#20390 - tethered - Mon May 10, 2004 5:59 am</h4>
    <div class="postbody"><span class="postbody">hello,
<br/>
<br/>
i've got a solid understanding of tile mode 0 and the text backgrounds and have decided to move on to sprites. i'm able to get a sprite to display on the screen but it doesn't appear as expected. i was hoping someone here could clarify why.
<br/>
<br/>
here's the source:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "includes\gba.h"
<br/>
#include "graphics\sprites.pal.c"
<br/>
#include "graphics\ship.raw.c"
<br/>
<br/>
<br/>
OAMEntry sprites[128];
<br/>
<br/>
<br/>
int main(void)
<br/>
{
<br/>
    u16 i;
<br/>
    u16* temp;
<br/>
    s16 x = 104, y = 64; // center of screen
<br/>
    
<br/>
    SetMode(MODE_0 | OBJ_ENABLE | OBJ_MAP_1D);
<br/>
    
<br/>
    // clear any sprite data from the screen
<br/>
    for (i = 0; i &lt; 128; i++)
<br/>
    {
<br/>
        sprites[i].attribute0 = 160;
<br/>
        sprites[i].attribute1 = 240;
<br/>
        sprites[i].attribute2 = 0;
<br/>
    }
<br/>
    
<br/>
    // set sprite oam data
<br/>
    sprites[0].attribute0 = COLOR_256 | SQUARE | y;
<br/>
    sprites[0].attribute1 = SIZE_32 | x;
<br/>
    sprites[0].attribute2 = 0;
<br/>
    
<br/>
    // load palette
<br/>
    for (i = 0; i &lt; 256; i++)
<br/>
        OBJ_PaletteMem[i] = sprite_Palette[i];
<br/>
        
<br/>
    // load sprite data
<br/>
    for (i = 0; i &lt; 512; i++)
<br/>
        OBJ_Data[i] = ((u16*)ship_Tiles)[i];
<br/>
        
<br/>
    // game loop
<br/>
    while(1)
<br/>
    {
<br/>
        vsync();
<br/>
        
<br/>
        // load oam data
<br/>
        temp = (u16*)sprites;
<br/>
        for (i = 0; i &lt; 512; i++)
<br/>
            OAM_Mem[i] = temp[i];
<br/>
    }
<br/>
    
<br/>
    return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
here's the array definition for the sprite:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const unsigned char ship_Tiles[1024] = {
<br/>
. . .
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
any ideas?
<br/>
<br/>
thanks,
<br/>
<br/>
<br/>
chuck</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20391 - tepples - Mon May 10, 2004 6:05 am</h4>
    <div class="postbody"><span class="postbody">In general, we need more than "doesn't appear as expected" to help you. Do you have a screenshot or a more detailed description?
<br/>
<br/>
Have you made sure to align ship_Tiles[] to a 16-bit boundary? It appears not.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20392 - tethered - Mon May 10, 2004 6:11 am</h4>
    <div class="postbody"><span class="postbody">screenshot:
<br/>
<br/>
<a href="http://cemmel.com/gbadev/ss3.gif">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
and i'm not sure what you mean when you ask if i've aligned it to a 16 bit boundary. as you can see by the declaration, its an unsigned char, so each pixel is 8 bits...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20394 - tepples - Mon May 10, 2004 6:15 am</h4>
    <div class="postbody"><span class="postbody">Looks like a data conversion error. You seem to have converted your bitmap in linear mode, whereas sprite cels require tile mode. Which graphics conversion program did you use, with which command line?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20395 - tethered - Mon May 10, 2004 6:18 am</h4>
    <div class="postbody"><span class="postbody">i'm using gfx2gba, and the command was gfx2gba -fsrc -t8 *.bmp ... i noticed some tiles were dropped during the conversion and i made a mental note of it but with all the other things i'm grappling w/ it escaped me...
<br/>
<br/>
should i convert it again w/o the -t8 switch?
<br/>
<br/>
[edit: same result w/o the -t8 switch]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20396 - sajiimori - Mon May 10, 2004 8:09 am</h4>
    <div class="postbody"><span class="postbody">Try using a simple image, like a circle or a checkerboard, then convert that and visually inspect the emitted source code to see if it's what you expected.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
