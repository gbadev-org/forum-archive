<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Multiplayer emulation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Multiplayer emulation</h2>
<div id="posts">
<div class="post">
    <h4>#60192 - wiz - Mon Nov 07, 2005 11:35 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I am actually looking for a good way to test multiplayer functionality. Looking through example code, which I downloaded Scott Lininger's website, the player ID seem to be set up like so:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Player = EWRAM[0xc5]</td> </tr></table><span class="postbody">
<br/>
<br/>
Im guessing the link cable sets an ID for each cable somehow??  Am I guessing correctly?
<br/>
<br/>
but when in emulation mode, all players are "player 0" therefore the demo doesnt actually work..  
<br/>
<br/>
Can it be tested this way through an emu?  if not - I cant seem to understand how one can be a "master" when they are both running the same code?
<br/>
<br/>
Im not interested in all the multiboot stuff yet, just thought I should mention that..
<br/>
<br/>
Thanks for your time reading :)  any suggestions I would love to hear</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60240 - wintermute - Tue Nov 08, 2005 10:20 am</h4>
    <div class="postbody"><span class="postbody">No$gba emulates multiplayer quite well.
<br/>
<br/>
<a href="http://nocash.emubase.de/gba.htm" target="_blank">http://nocash.emubase.de/gba.htm</a>
<br/>
<br/>
The debug version is well worth the registration fee although hobbyists will find it hard to justify the price of the full blown source debugger. The standard home version is more than adequate for most homebrew purposes.
<br/>
<br/>
<a href="http://nocash.emubase.de/gba-dev.htm" target="_blank">http://nocash.emubase.de/gba-dev.htm</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60245 - wiz - Tue Nov 08, 2005 11:06 am</h4>
    <div class="postbody"><span class="postbody">Hi wintermute,
<br/>
<br/>
thanks for the reply, no$gba is the emulator I am currently trying with mutiplayer testing it looks very promising and I am very tempted to register the cheaper home dev version but Im not really sure I would understand the features ;)
<br/>
<br/>
This is what is puzzling me at the moment,
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Player = EWRAM[0xc5]</td> </tr></table><span class="postbody">
<br/>
I am assuming this memory address is to return the "player id"? the emulators set both players id to "player 0" so I can not distinguish one player from the other.  Which GBA is the 'master'?
<br/>
<br/>
I have tried this with NO$GBA and VBA-LINK.  Perhaps Im looking at this all the wrong way?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60268 - tepples - Tue Nov 08, 2005 3:09 pm</h4>
    <div class="postbody"><span class="postbody">The byte in EWRAM is there only if you start player 1 from a cart and players 2-4 from the BIOS screen and then you use <a class="postlink" href="http://www.work.de/nocash/gbatek.htm#biosmultibootsinglegamepak" target="_blank">SWI 0x25</a> to start players 2-4. But there's still a <span style="font-style: italic">hardware</span> register that tells you what number your GBA is in the chain. <a class="postlink" href="http://www.work.de/nocash/gbatek.htm#siomultiplayermode" target="_blank">Look for "Multiplayer ID" in SIOCNT</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60401 - wiz - Thu Nov 10, 2005 12:51 am</h4>
    <div class="postbody"><span class="postbody">ah right, that works.. or atleast it does in no$gba, my player id code doesnt work in vba-link.
<br/>
<br/>
seems I can transfer around 32 bits a frame in my game without noticable slowdown (as I can tell from the emulator) using scott's techniqes.
<br/>
<br/>
well thanks yet again.. here is my code if anyone else is in my learning phase  :)
<br/>
<br/>
If anyone can see a problem why this wouldnt work or if I am doing anything wrong please let me know as there is no way for me to test it on hardware
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int MultiplayerGetIDs()
<br/>
{
<br/>
   SIOCNT = 0;
<br/>
<br/>
   // enable multiplayer
<br/>
   SIOCNT |= (1 &lt;&lt; 13);
<br/>
<br/>
   // set mode multiplayer mode
<br/>
   REG_RCNT = 0;
<br/>
   REG_RCNT |= (1 &lt;&lt; 14);
<br/>
<br/>
   int ready = 0;
<br/>
<br/>
   // find out if all GBA's are ready
<br/>
   if (SIOCNT &amp; (1&lt;&lt;3)) ready = 1;
<br/>
<br/>
   // keep calling this function until 'ready' is equal to 1
<br/>
   if (ready == 0)
<br/>
   {
<br/>
      return -1;
<br/>
   }
<br/>
<br/>
   // get *this* player id
<br/>
   PID = (SIOCNT &gt;&gt; 4) &amp; 3;
<br/>
<br/>
   char buf[255];
<br/>
   sprintf(buf, "THIS IS GBA %d ", PID);
<br/>
        printscreen(buf, 1, 1);
<br/>
<br/>
        // clean up
<br/>
   REG_RCNT = 0;
<br/>
   SIOCNT = 0;
<br/>
<br/>
   return 0;
<br/>
}
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
thanks!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
