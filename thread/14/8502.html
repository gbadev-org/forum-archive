<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Simple DS code problems - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Simple DS code problems</h2>
<div id="posts">
<div class="post">
    <h4>#70982 - Red XIII - Thu Feb 09, 2006 9:26 pm</h4>
    <div class="postbody"><span class="postbody">So...I'm only experimenting,but what's wrong with this code?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;PA9.h&gt;
<br/>
<br/>
int main()
<br/>
<br/>
{
<br/>
<br/>
        int i = 0; 
<br/>
<br/>
     PA_Init();
<br/>
     PA_InitVBL();
<br/>
<br/>
      PA_InitText(0,2);
<br/>
<br/>
   while (!Stylus.Held)
<br/>
       {
<br/>
         PA_OutputSimpleText(0, 6,10, "Touch the screen...");
<br/>
         
<br/>
         while (i &lt; 120)  
<br/>
             {
<br/>
              PA_WaitForVBL();
<br/>
              i++;
<br/>
             }
<br/>
<br/>
         PA_OutputSimpleText(0, 4, 12, "...to see something...");
<br/>
     
<br/>
         i=0;
<br/>
         while (i &lt; 120)  
<br/>
             {
<br/>
              PA_WaitForVBL();
<br/>
              i++;
<br/>
             }
<br/>
      
<br/>
         PA_OutputSimpleText(0, 7, 14, "...really good!!");
<br/>
<br/>
         PA_WaitForVBL();
<br/>
      }
<br/>
<br/>
           PA_InitText(1,2);
<br/>
           PA_OutputSimpleText(1,1,1,"This is supposed to be the really good thing");
<br/>
   
<br/>
   while(1)
<br/>
   {}   
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody"> I can't get it to show the "This is supposed to be the really good thing" message at the upper screen,unless I erase the 2 PA_WaitForVBL(); inside both 2" delays. I'm trying stuff but nothing good comes out.Anyone?</span><span class="gensmall"><br/><br/>Last edited by Red XIII on Sat Feb 11, 2006 12:36 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#71021 - SeanMon - Fri Feb 10, 2006 12:58 am</h4>
    <div class="postbody"><span class="postbody">Can you see any text?
<br/>
<br/>
(BTW, you should move the int i=0; into main() because you aren't using it anywhere else.  This has no effect on the text.)<br/>_________________<br/>null</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71113 - Red XIII - Fri Feb 10, 2006 12:34 pm</h4>
    <div class="postbody"><span class="postbody">int i=0; moved into main.
<br/>
<br/>
What I see with the above code,are the 3 lines with 2" delay each,but the touch screen doesn't respond.
<br/>
<br/>
And what I see if I delete the 2 PA_WaitForVBL(); inside both 2" delays,is that the touch screen works,but of course the delays don't work (the 3 lines on the lower screen show up all together)
<br/>
<br/>
I know the code is very silly,but I'm learning,mind that! :D
<br/>
<br/>
P.S. Hmm, geocities won't let me upload my .nds files...?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71126 - tepples - Fri Feb 10, 2006 2:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Red XIII wrote:</b></span></td> </tr> <tr> <td class="quote">P.S. Hmm, geocities won't let me upload my .nds 
<br/>
files...?</td> </tr></table><span class="postbody">
<br/>
Free hosting only allows a few file types. Use .zip for any other file type.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71132 - SeanMon - Fri Feb 10, 2006 4:01 pm</h4>
    <div class="postbody"><span class="postbody">I'm not sure how PA_lib works, but it seems that the touch-screen will only detect once about every 4 secs, so if your stylus isn't down then, it won't display the last text.
<br/>
<br/>
Try holding the stylus on the screen for 5 seconds and see if the last string displays.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71133 - SeanMon - Fri Feb 10, 2006 4:04 pm</h4>
    <div class="postbody"><span class="postbody">tepples(or any admin): shouldn't this topic be moved to DS Development?<br/>_________________<br/>null</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71180 - tepples - Fri Feb 10, 2006 9:04 pm</h4>
    <div class="postbody"><span class="postbody">The admins appear to have left it wide open as to whether "Beginners" means "GBA Beginners" or "GBA/DS Beginners". Have them clarify it, and I'll move topics.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71209 - Red XIII - Sat Feb 11, 2006 12:35 am</h4>
    <div class="postbody"><span class="postbody">Indeed, SeanMon, you're almost right. With the code at the top of the page(edited),the 3 lines appear correctly,and finally the "This is supposed to be the really good thing" message appears,but only if I hold the stylus for about 1 second.
<br/>
<br/>
Strange,ain't?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71612 - psycorpse - Mon Feb 13, 2006 7:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Red XIII wrote:</b></span></td> </tr> <tr> <td class="quote">So...I'm only experimenting,but what's wrong with this code?
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;PA9.h&gt;
<br/>
<br/>
int main()
<br/>
<br/>
{
<br/>
<br/>
        int i = 0; 
<br/>
<br/>
     PA_Init();
<br/>
     PA_InitVBL();
<br/>
<br/>
      PA_InitText(0,2);
<br/>
<br/>
   while (!Stylus.Held)
<br/>
       {
<br/>
         PA_OutputSimpleText(0, 6,10, "Touch the screen...");
<br/>
         
<br/>
         while (i &lt; 120)  
<br/>
             {
<br/>
              PA_WaitForVBL();
<br/>
              i++;
<br/>
             }
<br/>
<br/>
         PA_OutputSimpleText(0, 4, 12, "...to see something...");
<br/>
     
<br/>
         i=0;
<br/>
         while (i &lt; 120)  
<br/>
             {
<br/>
              PA_WaitForVBL();
<br/>
              i++;
<br/>
             }
<br/>
      
<br/>
         PA_OutputSimpleText(0, 7, 14, "...really good!!");
<br/>
<br/>
         PA_WaitForVBL();
<br/>
      }
<br/>
<br/>
           PA_InitText(1,2);
<br/>
           PA_OutputSimpleText(1,1,1,"This is supposed to be the really good thing");
<br/>
   
<br/>
   while(1)
<br/>
   {}   
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody"> I can't get it to show the "This is supposed to be the really good thing" message at the upper screen,unless I erase the 2 PA_WaitForVBL(); inside both 2" delays. I'm trying stuff but nothing good comes out.Anyone?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Dont you need another PA_WaitForVBL(); after the PA_OutputSimpleText();? I am not 100% sure that this is correct but it seems that you have it after the others and those seem to work.  Just my 2 cents/</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71687 - SeanMon - Tue Feb 14, 2006 12:35 am</h4>
    <div class="postbody"><span class="postbody">Here's a fixed up version (untested, I haven't ever used PA_Lib!)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include &lt;PA9.h&gt; 
<br/>
<br/>
int main()
<br/>
{
<br/>
   int i = 0; 
<br/>
   bool touched=false;
<br/>
<br/>
   PA_Init(); 
<br/>
   PA_InitVBL(); 
<br/>
   PA_InitText(0,2); 
<br/>
<br/>
   PA_OutputSimpleText(0, 6,10, "Touch the screen..."); 
<br/>
<br/>
   while(i &lt; 120)  
<br/>
   {   if(Stylus.Held)
<br/>
         touched=true;
<br/>
      PA_WaitForVBL();
<br/>
      i++;
<br/>
   }
<br/>
<br/>
   PA_OutputSimpleText(0, 4, 12, "...to see something...");
<br/>
<br/>
   i=0;
<br/>
   while(i &lt; 120)
<br/>
   {   if(Stylus.Held)
<br/>
         touched=true;
<br/>
      PA_WaitForVBL();
<br/>
      i++;
<br/>
   }
<br/>
<br/>
   PA_OutputSimpleText(0, 7, 14, "...really good!!");
<br/>
<br/>
   while(!touched)
<br/>
   {   if(Stylus.Held)
<br/>
         touched=true;
<br/>
      PA_WaitForVBL();
<br/>
   }
<br/>
<br/>
   PA_InitText(1,2);
<br/>
   PA_OutputSimpleText(1,1,1,"This is supposed to be the really good thing");
<br/>
<br/>
   while(1) 
<br/>
   {}
<br/>
   return 0; 
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm not sure if you want to wait until after you have output the first three strings to check for touchscreen input, but tell me if it works.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71799 - Red XIII - Tue Feb 14, 2006 4:18 pm</h4>
    <div class="postbody"><span class="postbody">Yup,this works alright.
<br/>
<br/>
It would be better if it could wait for the output of the first three strings before it checks for touchscreen input,but I'll figure it out myself,hopefully.
<br/>
<br/>
What do you use if you don't use PA_Lib? Does a 3rd library exist,except the official one and the PA_Lib? Or maybe you mean you are not in in DS yet,still coding for GBA?
<br/>
<br/>
<br/>
Man,DS developing is the best thing ever.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71874 - SeanMon - Wed Feb 15, 2006 1:24 am</h4>
    <div class="postbody"><span class="postbody">Comment out the </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if(Stylus.Held) touched=true;</td> </tr></table><span class="postbody"> inside the two while(i&lt;120) loops to wait until the first three strings have been output.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Red XIII wrote:</b></span></td> </tr> <tr> <td class="quote">What do you use if you don't use PA_Lib? Does a 3rd library exist, except the official one and the PA_Lib?</td> </tr></table><span class="postbody">
<br/>
I use libnds, on which PA_lib is based (I think, unless it is based on the older ndslib).  This isn't the same as the official library (which is illegal to use and/or distribute without a license from Nintendo).
<br/>
<br/>
PA_lib hides much of the ugly direct-hardware access which libnds requires you to use.  It allows you to get straight to the programming.  But I have enjoyed the challenge of using libnds so for.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
