<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Yep, I'm hopeless (more makefile trouble) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Yep, I'm hopeless (more makefile trouble)</h2>
<div id="posts">
<div class="post">
    <h4>#65643 - Linkiboy - Wed Jan 04, 2006 7:07 pm</h4>
    <div class="postbody"><span class="postbody">I'm still having makefile trouble, whenever I try to make my simple one script text program, it igves me the error..
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
makefile:1: *** missing separator.  Stop.
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
And my makefile is this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
gcc -c -mthumb -mthumb-interwork -o test.elf main.c
<br/>
objcopy -O binary test.elf test.gba
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
What am I doing wrong?? -_-</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65644 - DekuTree64 - Wed Jan 04, 2006 7:21 pm</h4>
    <div class="postbody"><span class="postbody">You need to put the dependencies for the files above the rules. Try something like
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">all: test.gba
<br/>
<br/>
test.gba: test.elf
<br/>
   objcopy -O binary test.elf test.gba
<br/>
<br/>
test.elf: main.c
<br/>
   gcc -c -mthumb -mthumb-interwork -o test.elf main.c</td> </tr></table><span class="postbody">
<br/>
<br/>
Basically that says you need to build test.gba, and test.gba depends on test.elf, and test.elf depends on main.c, so all the rules cascade down and everything gets built.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65647 - Linkiboy - Wed Jan 04, 2006 7:26 pm</h4>
    <div class="postbody"><span class="postbody">Now I get
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
makefile:4: *** missing separator.  Stop.
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:00
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Hey, at least I'm getting somewhere.
<br/>
<br/>
I think is has to do something with my C file not being programmed correctly...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65648 - keldon - Wed Jan 04, 2006 7:26 pm</h4>
    <div class="postbody"><span class="postbody">You must preceed with tabs and not spaces for commands.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65649 - Linkiboy - Wed Jan 04, 2006 7:38 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">You must preceed with tabs and not spaces for commands.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, I did that, now I get
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&gt; "make" 
<br/>
gcc   -c   -mthumb   -mthumb   -interwork   -o test.elf main.c
<br/>
"make": gcc: Command not found
<br/>
"make": *** [test.elf] Error 127
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:00
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm really sorry to bother you all with something that is really simple, but everyone was a newb once, too...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65650 - DekuTree64 - Wed Jan 04, 2006 7:48 pm</h4>
    <div class="postbody"><span class="postbody">Darn forum, converting my tabs to spaces :P
<br/>
<br/>
Anyway, looks like you don't have your path set up properly. Before you call make from the command line, do something like
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">SET PATH=c:\devkitpro\msys\bin;c:\devkitpro\devkitarm\bin</td> </tr></table><span class="postbody">
<br/>
Assuming that's where your devkit is installed to, and it should be able to find all the tools.
<br/>
<br/>
I usually just make a batch file like this so I can run it from VStudio (or windows explorer):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">SET PATH=c:\devkitpro\msys\bin;c:\devkitpro\devkitarm\bin
<br/>
make
<br/>
pause</td> </tr></table><span class="postbody"><br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65653 - Linkiboy - Wed Jan 04, 2006 7:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">Darn forum, converting my tabs to spaces :P
<br/>
<br/>
Anyway, looks like you don't have your path set up properly. Before you call make from the command line, do something like
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">SET PATH=c:\devkitpro\msys\bin;c:\devkitpro\devkitarm\bin</td> </tr></table><span class="postbody">
<br/>
Assuming that's where your devkit is installed to, and it should be able to find all the tools.
<br/>
<br/>
I usually just make a batch file like this so I can run it from VStudio (or windows explorer):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">SET PATH=c:\devkitpro\msys\bin;c:\devkitpro\devkitarm\bin
<br/>
make
<br/>
pause</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
I'm not fully understanding that... oh and I'm using Programmer's Notepad, and I can't find a way to put that before executing the make command.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65661 - Linkiboy - Wed Jan 04, 2006 9:36 pm</h4>
    <div class="postbody"><span class="postbody">Well, I put the PATH= C:\devkitPro\devkitARM\bin infront of everything in the makefile, but I still get the same error....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65671 - DekuTree64 - Wed Jan 04, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">Make a text file in the same folder as your makefile, and name it something like build.bat. Then paste those 3 lines from the bottom of my last post into it, and double click it from windows explorer and see if that works.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65673 - Cearn - Wed Jan 04, 2006 10:47 pm</h4>
    <div class="postbody"><span class="postbody">There's no such tool as <span style="font-style: italic">gcc</span> in devkitARM, it's <span style="font-style: italic">arm-elf-gcc</span>. Also, <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/setup.htm" target="_blank">tonc:setup</a> for more on getting compiling with devkitARM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65687 - Linkiboy - Thu Jan 05, 2006 12:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">Make a text file in the same folder as your makefile, and name it something like build.bat. Then paste those 3 lines from the bottom of my last post into it, and double click it from windows explorer and see if that works.</td> </tr></table><span class="postbody">The results of doing that are disasterous... As soon as a open the BAT file, it keeps looping and doesn't stop. Here is what it says:
<br/>
<br/>
(my directory)&gt; SET PATH= (my path)
<br/>
(my directory)&gt;make
<br/>
<br/>
and it keeps repeating.
<br/>
<br/>
and yes I do have the pause in there.
<br/>
<br/>
and i've repleaced gcc with arm-elf-gcc, and I still get
<br/>
<br/>
&gt; "make" 
<br/>
arm-elf-gcc	-c -mthumb	-mthumb	-interwork	-o test.elf main.c
<br/>
"make": arm-elf-gcc: Command not found
<br/>
"make": *** [test.elf] Error 127
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:00</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65688 - Linkiboy - Thu Jan 05, 2006 12:09 am</h4>
    <div class="postbody"><span class="postbody">Reading the tutorial Cearn gave me, I changed SET PATH just to PATH. it now recognizes arm-elf-cgg, but doesn't recognize "-interwork"
<br/>
<br/>
&gt; "make" 
<br/>
arm-elf-gcc	-c -mthumb	-mthumb	-interwork	-o test.elf main.c
<br/>
cc1.exe: error: unrecognized command line option "-interwork"
<br/>
"make": *** [test.elf] Error 1
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65689 - poslundc - Thu Jan 05, 2006 12:11 am</h4>
    <div class="postbody"><span class="postbody">The options are -mthumb and -mthumb-interwork.
<br/>
<br/>
Not -mthumb twice, followed by -interwork.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65690 - Linkiboy - Thu Jan 05, 2006 12:15 am</h4>
    <div class="postbody"><span class="postbody">YES!! The makefile works! Now I need to program my main.c correctly. :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65691 - Cearn - Thu Jan 05, 2006 12:16 am</h4>
    <div class="postbody"><span class="postbody">If your batch file is called <span style="font-style: italic">make.bat</span>, it might run that recursively. Or did you use <span style="font-style: italic">build.bat</span> like DekuTree64 suggested? In that case, nevermind.
<br/>
<br/>
Here's another trick you might try: more recent devkitARMs have a set of build rules which you can include to your makefile and save you some hassle. Try adding 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">include $(DEVKITARM)/gba_rules
<br/>
</td> </tr></table><span class="postbody">to your makefile. Note that it does rely on the DEVKITARM system variable being set, which should happen automatically when you installed devkitPro/ARM. And you can also set the variable or path via <span style="font-style: italic">My Computer/System Properties/Advanced/Environment Variables</span>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65693 - Linkiboy - Thu Jan 05, 2006 12:41 am</h4>
    <div class="postbody"><span class="postbody">I did both make and build.bat
<br/>
<br/>
And I have the most recent DevKit, too.
<br/>
<br/>
Anyways the problem is solved now thanks for all your help everyone.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
