<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>changinf only a few tiles in a bg - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > changinf only a few tiles in a bg</h2>
<div id="posts">
<div class="post">
    <h4>#8980 - immortalninjak - Fri Jul 25, 2003 2:11 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
experimenting with tiles with the help of the gbajunkie tutorial and wanted to know how to change only a few tiles in the bg.
<br/>
In my prog I have only two tiles on a 128*128 bg.
<br/>
Instead of the tutorial loop:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
                temp = (u16*)map;
<br/>
   for(loop = 0; loop &lt; 16*16/2; loop++)
<br/>
                     bg2.mapData[loop] = temp[loop];
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I use:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
                for(loop = 0; loop &lt; 16*16/2; loop++)
<br/>
                     bg2.mapData[loop] = 0x00;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
and then in the getinput i have:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
                      bg2.mapData[count] = 0x08;
<br/>
                      count++
<br/>
</td> </tr></table><span class="postbody">
<br/>
which should on succesive button pushes gradually change the bg from one tile to the other.
<br/>
<br/>
However it seem to be alternating between the two tile resulting in alternaitng stripes of the two tiles.
<br/>
Can anyone tell me what I'm doing wrong?
<br/>
I suspect I have some numbers wrong somewhere, but changin them seems to have little effect.
<br/>
thank you for your time and help.
<br/>
KK</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8983 - mtg101 - Fri Jul 25, 2003 3:30 pm</h4>
    <div class="postbody"><span class="postbody">OK - given the 128x128 map size, I assume we're talking rotation backgrounds.
<br/>
<br/>
Each tile in rotation backgrounds is 1 byte in size, but remember that you can only write to VRAM in 16bit chunks, 16bit aligned.
<br/>
<br/>
So when you do:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
bg2.mapData[count] = 0x08; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You're setting the mapData[count], which is a16bitvalue, to 0x0008.  So that means you've set tile[count*2] to 0x08, and tile[(count*2)+1] to 0x00 (assuming I've got my endians right).
<br/>
<br/>
If you want to set just a single tile, you need to take acount of the 16bit writing.
<br/>
<br/>
Let's say count is the tile index to set.  You could do something like:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int temp = 0;
<br/>
if(count%2)
<br/>
{
<br/>
   temp = bg2.mapData[(count/2)] &amp; 0x00ff;
<br/>
   temp |= 0x08&lt;&lt;8;
<br/>
}
<br/>
else
<br/>
{
<br/>
   temp = bg2.mapData[(count/2)] &amp; 0xff00;
<br/>
   temp |= 0x08;
<br/>
}
<br/>
<br/>
bg2.mapData[(count/2)] = temp;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Now of course I may have got my endians wrong, in which case you'll need to swap the if / else cases around.
<br/>
<br/>
<br/>
Cheers
<br/>
Russell<br/>_________________<br/>---
<br/>
Speaker for the Dead</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8996 - immortalninjak - Sat Jul 26, 2003 12:13 am</h4>
    <div class="postbody"><span class="postbody">ahhh,
<br/>
I think I get it now, so basically:
<br/>
If A B C D are the first four blocks of the Bg grid.
<br/>
bg2.mapData[0] would cover both blocks A and B, and bg2mapdata[1] corresponds to C and D.
<br/>
Thanks that helped alot!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
