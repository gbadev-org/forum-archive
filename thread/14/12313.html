<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Help coding shooting - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Help coding shooting</h2>
<div id="posts">
<div class="post">
    <h4>#116975 - Sabr3wulf - Wed Jan 31, 2007 1:49 pm</h4>
    <div class="postbody"><span class="postbody">Such a noob question I know, but I'm working on my first project making a GBA game and can't work out how to get the ship to shoot properly. At the moment I've got: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   if(keyDown(KEY_A) &amp;&amp; ylaser &lt; yMin)
<br/>
   {
<br/>
   ylaser = 121;
<br/>
   xlaser = 240;
<br/>
   }
<br/>
   else if (keyDown(KEY_A))
<br/>
   {
<br/>
   sprites[1].attribute0 = COLOR_256 | SQUARE | ylaser;
<br/>
   sprites[1].attribute1 = SIZE_8 | xship + 4;
<br/>
   ylaser--;ylaser--;
<br/>
   }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
which is probably terrible code. Obviously, with the code above, the player has to hold down the A to 'shoot' and keep it held down for the shot to move, how would I go about making it move by it's own after a key press.
<br/>
<br/>
There's probably a really easy way and I'll kick myself, cheers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116981 - QuantumDoja - Wed Jan 31, 2007 3:18 pm</h4>
    <div class="postbody"><span class="postbody">Hi...just so I can understand a bit more...
<br/>
<br/>
There is a weapon that shoots a laser at a ship right?
<br/>
<br/>
The user presses "A" to shoot a laser...
<br/>
<br/>
If this is the case, make it so you could spawn a "laser" object when the user presses the button, then in your game loop, you could move the laser object(sprite) - or make it carry on in the direction it was fired in....<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116983 - Sabr3wulf - Wed Jan 31, 2007 3:25 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, you control a ship and press A to fire a laser.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116992 - ScottLininger - Wed Jan 31, 2007 5:16 pm</h4>
    <div class="postbody"><span class="postbody">So here's a bit that should work with your existing code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if(keyDown(KEY_A) &amp;&amp; ylaser &lt;= yMin) {
<br/>
  ylaser = 121;
<br/>
  xlaser = xship+4;
<br/>
}
<br/>
   
<br/>
if (ylaser &gt; yMin) {
<br/>
<br/>
  if (laserHitsEnemy()) {
<br/>
    xlaser = 240; // this moves the sprite off screen, hiding it
<br/>
    ylaser = yMin;
<br/>
  } else { 
<br/>
    ylaser--;ylaser--;
<br/>
  }
<br/>
<br/>
} else { // ylaser &lt;= ymin
<br/>
  xlaser = 240; // this moves the sprite off screen, hiding it
<br/>
}
<br/>
<br/>
sprites[1].attribute0 = COLOR_256 | SQUARE | ylaser;
<br/>
sprites[1].attribute1 = SIZE_8 | xlaser;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
See, the A press simply sets the yLaser to 121, then the second IF loop will move the laser to the top of the screen until it reaches the top or hits an enemy. (laserHitsEnemy() is a function that  returns 0 or 1 after checking for collision and destroying bad guys.)
<br/>
<br/>
-Scott</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116994 - Sabr3wulf - Wed Jan 31, 2007 5:42 pm</h4>
    <div class="postbody"><span class="postbody">That's perfect, thankyou very much.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116999 - sgeos - Wed Jan 31, 2007 6:39 pm</h4>
    <div class="postbody"><span class="postbody">My advice, your code should look something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (pressA())
<br/>
   fireLaser();</td> </tr></table><span class="postbody">
<br/>
You should make a laser or projectile module that handles such things.  Enemies should be able to use it as well.  Give each shot a team or owner.  If the shot hits something other than its owner, it does damage.
<br/>
<br/>
-Brendan</span><span class="gensmall"><br/><br/>Last edited by sgeos on Wed Jan 31, 2007 8:53 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#117020 - Miked0801 - Wed Jan 31, 2007 8:25 pm</h4>
    <div class="postbody"><span class="postbody">Lol - let him figure out why your version is better sgeos.   Every programmer has to get burned by this a few times before they get why encapsulation and such is a 'good thing' :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117025 - sgeos - Wed Jan 31, 2007 8:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">Lol - let him figure out why your version is better sgeos.</td> </tr></table><span class="postbody">
<br/>
In theory he might not know about refactoring and encapsulation yet.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">Every programmer has to get burned by this a few times before they get why encapsulation and such is a 'good thing' :)</td> </tr></table><span class="postbody">
<br/>
Fair enough.  =)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117052 - Sabr3wulf - Wed Jan 31, 2007 11:26 pm</h4>
    <div class="postbody"><span class="postbody">Oh dear, I'm scared now.
<br/>
<br/>
Thanks for the help guys!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117074 - sgeos - Thu Feb 01, 2007 1:25 am</h4>
    <div class="postbody"><span class="postbody">No problem.  Good luck!
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
