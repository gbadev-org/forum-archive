<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>PCX2GBA - How does it work - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > PCX2GBA - How does it work</h2>
<div id="posts">
<div class="post">
    <h4>#31400 - QuantumDoja - Fri Dec 10, 2004 8:18 pm</h4>
    <div class="postbody"><span class="postbody">Hi, How does pcx2gba work, i understand that it takes to pixels and puts them into a hexadecimal value (how??)<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31420 - tepples - Fri Dec 10, 2004 10:08 pm</h4>
    <div class="postbody"><span class="postbody">What an image conversion program does, at the highest level: <ol type="1"><li>Decode the image file, based on format specs from wotsit.org </li><li>Reorder the pixels in a GBA format, according to GBATEK </li><li>Write the pixels to a file </li></ol> Which step do you need explained further?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31427 - QuantumDoja - Fri Dec 10, 2004 10:55 pm</h4>
    <div class="postbody"><span class="postbody">Well, you have to hex values of 2 pixels, then what, how do they get converted into one?<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31429 - Lupin - Fri Dec 10, 2004 11:01 pm</h4>
    <div class="postbody"><span class="postbody">no need to convert them into one.
<br/>
<br/>
Just copy 2 pixels at the same time - will also be faster.
<br/>
<br/>
If you really feel like you would need to access 1 pixel at a time:
<br/>
<br/>
firstpixel = pixeldata[y*WidthOfImage+(x&gt;&gt;1)] &gt;&gt; 8;
<br/>
secondpixel = pixeldata[y*WidthOfImage+(x&gt;&gt;1)+1] &amp; 0xFF;
<br/>
<br/>
WidthOfImage needs to be the half of the actual width because the array stores 2 pixels in 1 array-element. Don't you read tutorials about GBA programming? <a href="http://www.thepernproject.com" target="_blank">www.thepernproject.com</a> is very good and it should give you informations about things like this i think<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31442 - QuantumDoja - Sat Dec 11, 2004 12:18 am</h4>
    <div class="postbody"><span class="postbody">Hi, Dovoto's program puts tile data like so..
<br/>
<br/>
const u16 TileData[] = {
<br/>
                    0xFEFE, 0xFEFE,...
<br/>
<br/>
Each hex value is 2 pixels, I was wondering how, for instance, if you had two color codes:
<br/>
<br/>
#002299 and #ff00ff you combine them to squaeeze them into the 16 bit int. What would the value be?
<br/>
<br/>
please help.
<br/>
<br/>
Thanks<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31453 - tepples - Sat Dec 11, 2004 12:44 am</h4>
    <div class="postbody"><span class="postbody">You can read GBATEK or the CowBite spec to see how to format a 15-bit color. What did you not understand after reading those documents?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31454 - Lupin - Sat Dec 11, 2004 12:46 am</h4>
    <div class="postbody"><span class="postbody">oh... well, these color codes are 24 bit color.
<br/>
<br/>
In 24/32 bit color mode Red, Green and Blue have 8 bits (each channel = 8 bits/1 byte) so you can have red/green/blue values from 0 to 255
<br/>
<br/>
In 16 bit (actually 15 bit) color mode Red, Green and Blue only have 5 bits (5*3 = 15) so you can have red/green/blue values from 0 to 31
<br/>
<br/>
Understanding binary/hex system helps a lot for understanding this kind of calculation.
<br/>
<br/>
When you convert a 24 bit color to 15 bit color you divide the Red/Green/Blue value by 8 and combine the result into one 16 bit half word - voila you have your 15 bit color!
<br/>
<br/>
Some systems may use different order of R/G/B values...<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31520 - QuantumDoja - Sat Dec 11, 2004 9:21 pm</h4>
    <div class="postbody"><span class="postbody">Ok. what i want to do is from these two hex values make the single value:
<br/>
<br/>
We already know what the pixel colors will be, as below
<br/>
<br/>
ok:
<br/>
<br/>
pixel1: #00ff00
<br/>
pixel2: #ffff00
<br/>
<br/>
Output: 1 hex value.
<br/>
<br/>
just need to put them into one. Does it matter im using web hex codes?<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31523 - tepples - Sat Dec 11, 2004 9:33 pm</h4>
    <div class="postbody"><span class="postbody">Converted from hex to decimal:
<br/>
Pixel 1: R=0, G=255, B=0
<br/>
Pixel 2: R=255, G=255, B=0
<br/>
<br/>
The components of a web color range from 0 to 255, while the components of a GBA color range from about 8 to 31. To convert each web color component x to a GBA color component x', do x' = x / 11 + 8.
<br/>
<br/>
This gives the GBA colors:
<br/>
Pixel 1: R=8, G=31, B=8
<br/>
Pixel 2: R=31, G=31, B=8
<br/>
<br/>
Given these, each GBA pixel value is R + 32*G + 1024*B.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31527 - Lupin - Sat Dec 11, 2004 9:51 pm</h4>
    <div class="postbody"><span class="postbody">Why do you think they Colors for a GBA pixel reach from 8 to 31? I am quite sure that they reach from 0 to 31 =/
<br/>
<br/>
The equalation should just be  x' = x / 8
<br/>
As example take web color component 255 for x this will give us x' = 255/8 = 31,875 (don't round this up)<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31531 - QuantumDoja - Sat Dec 11, 2004 10:48 pm</h4>
    <div class="postbody"><span class="postbody">So, with that said, in this case, what is the answer?<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31532 - Lupin - Sat Dec 11, 2004 11:12 pm</h4>
    <div class="postbody"><span class="postbody">I don't know what you expect as an answer to this... but if you still don't have enough info, here is a simple VB function that takes a normal 24 bit color and converts it to a GBA 15 bit color, i use this function in my converters:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Private Function C24toC15(c As Long) As Integer
<br/>
Dim cr As Long, cg As Long, cb As Long
<br/>
cr = ((c And &amp;HFF) \ 8) * 1024
<br/>
cg = (((c \ &amp;H100) And &amp;HFF) \ 8) * 32
<br/>
cb = ((c \ &amp;H10000) And &amp;HFF) \ 8
<br/>
C24toC15 = cr Or cg Or cb
<br/>
End Function
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The return type is Integer (16 bit), the input type is Long (32 bit). In C you would do the * and \ with shift operators but VB doesn't support them =/<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#31538 - keldon - Sun Dec 12, 2004 1:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">Why do you think they Colors for a GBA pixel reach from 8 to 31? I am quite sure that they reach from 0 to 31 =/
<br/>
<br/>
The equalation should just be  x' = x / 8
<br/>
As example take web color component 255 for x this will give us x' = 255/8 = 31,875 (don't round this up)</td> </tr></table><span class="postbody">
<br/>
<br/>
Because 0-7 are pretty much the same shades of pitch black.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
