<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>OAMSpriteNum >= 33 problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > OAMSpriteNum >= 33 problem</h2>
<div id="posts">
<div class="post">
    <h4>#9925 - hnager - Fri Aug 22, 2003 12:05 am</h4>
    <div class="postbody"><span class="postbody">I have an array of pointers to sprites (reflectors[]) which are placed on stage by moving a cursor and hitting the A-button...first i check to see if a sprite has already been placed in the cursor's position and then (if not) increment a variable (currOAM) which I'm using for OAMSpriteNum, it all works great until that variable &gt;= 33... I should mention the attributes:
<br/>
<br/>
sprites[currOAM].attribute0 = COLOR_256 | SQUARE | ROTATION_FLAG | reflectors[curr]-&gt;getY();
<br/>
sprites[currOAM].attribute1 = SIZE_16 | ROTDATA(currOAM) | reflectors[curr]-&gt;getX();
<br/>
sprites[currOAM].attribute2 = 0;
<br/>
<br/>
When it gets to that point the sprites show up as a solid colored block and anything after is shown in the same way...why would that happen? I can post more of the source if it would help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9927 - yaustar - Fri Aug 22, 2003 1:11 am</h4>
    <div class="postbody"><span class="postbody">Have you checked eithier with Visual BOy Advance 1.6 or Mappy if the sprites from 33 onwards have been loaded into Memory?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9931 - hnager - Fri Aug 22, 2003 3:01 am</h4>
    <div class="postbody"><span class="postbody">If you don't mind  - explain more about how to do that...how/why would that happen?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9933 - tepples - Fri Aug 22, 2003 3:14 am</h4>
    <div class="postbody"><span class="postbody">There are only 32 rotation data registers in OAM. You'll have to either use fewer rotated sprites or quantize your sprites to one of 32 rotations. If your game design does not allow fewer rotated sprites, use the classic NES/Genesis/Super NES trick of pre-rotated sprite cels.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Fri Aug 22, 2003 3:25 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#9934 - hnager - Fri Aug 22, 2003 3:19 am</h4>
    <div class="postbody"><span class="postbody">aha - that explains it. I could bring in the pre-rotated sprites as I really only need them in 4 possible rotations...but would it also be possible to utilize 4 rotation datas for each of the positions as dynamically point them to th e correct data when I change their state?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9936 - tepples - Fri Aug 22, 2003 3:28 am</h4>
    <div class="postbody"><span class="postbody">If their rotations are quantized to four positions, you can definitely use only four rotation data registers and point each sprite to one of those registers.
<br/>
<br/>
But if you only have four positions, you might as well pre-rotate them because you can only fit about 300 pixels' worth of rotated sprites on one line, as opposed to about 1000 pixels of unrotated sprites. Pre-rotated sprites have additional flexibility in lighting.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9943 - hnager - Fri Aug 22, 2003 12:45 pm</h4>
    <div class="postbody"><span class="postbody">Thanks again tepples - I'm not sure i understand what you mean by pixels-per-line though...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9950 - tepples - Fri Aug 22, 2003 7:42 pm</h4>
    <div class="postbody"><span class="postbody">Every sprite has a width. If the widths of the sprites on a scanline total more than the maximum total width that the hardware supports, the hardware begins to disable sprites on that scanline. This is why players often saw sprite flicker on the NES, as the NES supported only 64 sprite pixels per scanline.
<br/>
<br/>
The point is that you'll be able to fit more sprites and larger sprites on the screen without flicker if you use non-rotated sprites.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
