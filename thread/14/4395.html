<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem with "&" operator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Problem with "&" operator</h2>
<div id="posts">
<div class="post">
    <h4>#29199 - identitycrisisuk - Sat Nov 13, 2004 4:42 pm</h4>
    <div class="postbody"><span class="postbody">I've read a few things before about using &amp; (n-1) instead of % n but this is the first time I've had to use it. AFAIK these two code segments should be equivalent:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if(Moving())
<br/>
{
<br/>
   if(++m_animCount &gt; 8)
<br/>
   {
<br/>
      ++m_walkFrame;
<br/>
      m_animCount = 0;
<br/>
   }
<br/>
   if(m_walkFrame &gt; 2) m_walkFrame = 0;
<br/>
   m_nextLower = WALK0+m_walkFrame;
<br/>
}
<br/>
<br/>
if(Moving())
<br/>
{
<br/>
   if((++m_animCount) &amp; (8-1))
<br/>
   {
<br/>
      ++m_walkFrame;
<br/>
   }
<br/>
   if(m_walkFrame &gt; 2) m_walkFrame = 0;
<br/>
   m_nextLower = WALK0+m_walkFrame;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
However, only the first example results in a decrease in speed of the animation that I'm trying to do. The second just makes the character move in Benny Hill vision with the frame of animation appearing to change every frame. There's excessive brackets as I was trying to make sure I knew exactly what I was doing. At least the first way works but I'd like to know why the second isn't as it's nicer and I will probably need it in future.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29200 - poslundc - Sat Nov 13, 2004 5:11 pm</h4>
    <div class="postbody"><span class="postbody">&amp; (n-1) is equivalent to % for even powers of two, but that's not your problem. The two code segments are fundamentally different: the first code segment evaluates to <span style="font-weight: bold">true</span> whenever m_animCount turns 9 (once every nine frames). The second code segment evaluates to <span style="font-weight: bold">false</span> whenever m_animCount is an even multiple of 8 (once every eight frames).
<br/>
<br/>
So, you're not counting on the same interval, and you're evaluating opposite conditions.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29201 - sajiimori - Sat Nov 13, 2004 6:00 pm</h4>
    <div class="postbody"><span class="postbody">Also, don't worry about using n&amp;(m-1) because the compiler will automatically do the conversion when it's possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29202 - identitycrisisuk - Sat Nov 13, 2004 6:00 pm</h4>
    <div class="postbody"><span class="postbody">*slaps forehead*
<br/>
<br/>
Thank you, I feel such a moron now, should have thought some more before posting...
<br/>
<br/>
*goes away feeling sheepish*</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
