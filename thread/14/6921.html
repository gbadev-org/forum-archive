<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Running game from GBAMP (Multiboot?) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Running game from GBAMP (Multiboot?)</h2>
<div id="posts">
<div class="post">
    <h4>#54645 - mycatfreddy - Wed Sep 21, 2005 4:23 am</h4>
    <div class="postbody"><span class="postbody">Hi - I have been working on a small game and I want to try it out on my GBA using movie player.
<br/>
<br/>
I know this is possible because a couple of GREAT games written by Damian Yerrick work on my GBA with Movie Player!
<br/>
<br/>
I suspect "multiboot" is the key or could be his GBAFS, but not sure - I have tried to implement multiboot  but this results in a nice white screen (yay - no dead pixels on my new Micro!).  I also tried Damians MultiBoot Menu - but still no luck.
<br/>
<br/>
My game works great on Visual Boy Advance - compiled using DevKitAdvance...
<br/>
Any suggestions?
<br/>
Thanks!<br/>_________________<br/>ok, but only if it's fun.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54646 - tepples - Wed Sep 21, 2005 4:35 am</h4>
    <div class="postbody"><span class="postbody">Yes, the key is multiboot, usually denoted by the .mb suffix. With GBA Movie Player, you need to take the .mb files and rename them to .mb.gba. Tetanus On Drugs is actually a .mb file but it's called "tod.gba" because so many people were confused by the .mb extension.
<br/>
<br/>
GBFS is just a way of embedding data in a .mb or .gba file.
<br/>
<br/>
The key to making multiboot work lies in the link stage: -specs=gba_mb.specs
<br/>
Then if the resulting ROM is (about) 200 KB or smaller after objcopy, it should work.
<br/>
<br/>
Also note: if you use GBFS, you can't use the .sbss section.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54681 - mycatfreddy - Wed Sep 21, 2005 4:49 pm</h4>
    <div class="postbody"><span class="postbody">Hi - Thanks for the speedy reply!
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The key to making multiboot work lies in the link stage: -specs=gba_mb.specs </td> </tr></table><span class="postbody">
<br/>
<br/>
 I am using a simple batch to make my gba file 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">gcc -c -O3 -mthumb -mthumb-interwork main.cpp
<br/>
gcc -c -O3 -mthumb -mthumb-interwork Utility.cpp
<br/>
gcc -c -O3 -mthumb -mthumb-interwork Startup.cpp
<br/>
gcc -c -O3 -mthumb -mthumb-interwork Menu.cpp
<br/>
gcc -c -O3 -mthumb -mthumb-interwork Engine.cpp
<br/>
gcc -c -O3 -mthumb -mthumb-interwork Text.cpp
<br/>
gcc -c -03 -mthumb -mthumb-interwork Gamesave.cpp
<br/>
<br/>
gcc -mthumb -mthumb-interwork -o gamename.elf main.o Utility.o Startup.o Menu.o Engine.o Text.o Gamesave.O
<br/>
<br/>
objcopy -O binary gamename.elf gamename.gba</td> </tr></table><span class="postbody">
<br/>
<br/>
So when change my last link line to:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">gcc -specs=gba_mb.specs -mthumb -mthumb-interwork -o gamename.elf main.o Utility.o Startup.o Menu.o Engine.o Text.o Gamesave.O</td> </tr></table><span class="postbody">
<br/>
<br/>
I get a "file not found error" on gba_mb.specs.  I am using the DevKitAdvanc (r5 beta3) from sourceforge...  Is this file missing or am I doing something else wrong?
<br/>
[/url]<br/>_________________<br/>ok, but only if it's fun.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54739 - mycatfreddy - Thu Sep 22, 2005 3:06 am</h4>
    <div class="postbody"><span class="postbody">So, I did some searching/reading and I guess that devKitAdv and <b style="color:#FFA34F">DevKitPro</b> are different packages for building GBA games.  DevkitARM (in Pro) seems to have the gba_mb.specs file
<br/>
<br/>
I started out following a <span style="font-weight: bold">really good</span> tutorial by gbajunkie and don't know much about DevkitARM.  Should I be learning more about devkitARM or should I be able to do everything (ie. like create a multiboot) with devKitAdv?
<br/>
<br/>
Thanks again!<br/>_________________<br/>ok, but only if it's fun.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54789 - tepples - Thu Sep 22, 2005 4:03 pm</h4>
    <div class="postbody"><span class="postbody">DevKit Advance is no longer maintained. While you work on migrating your future projects to devkitARM, use this line in <span style="font-style: italic">one</span> of your source code files:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int __gba_multiboot;</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54827 - vb_master - Thu Sep 22, 2005 9:52 pm</h4>
    <div class="postbody"><span class="postbody">Sorry for hijacking this post, but what are some good Multiboot games?<br/>_________________<br/>Back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54864 - mycatfreddy - Fri Sep 23, 2005 5:30 am</h4>
    <div class="postbody"><span class="postbody">Ok, I tried </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int __gba_multiboot;</td> </tr></table><span class="postbody"> but still not luck.
<br/>
<br/>
My file is 180k and although it works well in Visual Boy -I can't seem to get it to run of GBAMP - white screen....
<br/>
<br/>
I guess I will try moving over to devkitARM and then start troubleshooting if I still have problems.... unless you have any other suggestions!!
<br/>
<br/>
Thanks again!<br/>_________________<br/>ok, but only if it's fun.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#54867 - mycatfreddy - Fri Sep 23, 2005 5:35 am</h4>
    <div class="postbody"><span class="postbody">Scrap that last post it is working now...when I put that line in my source code  outside of main{}.
<br/>
<br/>
Thanks very much for your help - it is very satisfying to see all my hard work on my gba!!<br/>_________________<br/>ok, but only if it's fun.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
