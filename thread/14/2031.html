<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>problem displaying text backgrounds - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > problem displaying text backgrounds</h2>
<div id="posts">
<div class="post">
    <h4>#10525 - cooky - Sun Sep 07, 2003 11:29 am</h4>
    <div class="postbody"><span class="postbody">I'm using the gbajunkie tutorial 6 as a base for a mode 0 game. I'm trying to display a 256 x 256 background and I carn't see a problem with the code out of GBA junkie for putting the data in memory although when it appears on screen there are tiles missing and the others that are there are out of place. I carn't help thinking there is a difference between how you input a text backgrounds data and how you do a rotation background data (as the gbajunkie tutorial focuses on rotation backgrounds) . Hear is the code where I think the problem is:
<br/>
<br/>
temp = (u16*)fireworld1;
<br/>
for(loop = 0; loop &lt; 32*32/2; loop++)
<br/>
      bg1.mapData[loop] = temp[loop];
<br/>
<br/>
fireworld1 is a u8 constant array coppied into a u16 temp hense the divide by 2. (If it makes a difference)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10526 - tepples - Sun Sep 07, 2003 3:00 pm</h4>
    <div class="postbody"><span class="postbody">You are correct that the two kinds of maps have different data formats. Rotation map data is 8 bits per tile while "text" background map data is 16 bits per tile. Please read the CowBite spec for details.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10540 - antysix - Mon Sep 08, 2003 9:18 am</h4>
    <div class="postbody"><span class="postbody">Don't use GbaJunkie's method for displaying text-backgrounds. Do it like this:
<br/>
<br/>
- Set the correct bits directly in REG_BGxCNT.
<br/>
- Load your background palette.
<br/>
- Load your background tiles.
<br/>
- Load your background map.
<br/>
- Make sure the correct background(s) are enabled in REG_DISPCNT.
<br/>
<br/>
If you don't understand fully just say so and I can give you my header file which contains all the needed functions :).<br/>_________________<br/>Currently playing: NGC: Metroid Prime
<br/>
GBA: Golden Sun: The Lost Age
<br/>
<br/>
Currently developping: Project ~ [ Phail ]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10544 - cooky - Mon Sep 08, 2003 11:22 am</h4>
    <div class="postbody"><span class="postbody">I have done 2,3,4 and 5 of your instructions correctly (I think) as the tiles it is desplaying are correct in that they are not corrupted by memory over lap and they are correct colour wise so the palette is correct. I cannot be 100% certain I have done 4 right but I carn't possibly see where I am going wrong Everything shuld work fine (from my point of veiw, remember I am assuming the code is the same for rotation as it is for text). And 5 I'm deffinitely sure I've got right by checking the map viewer in visual boy (Background 0 requested in Mode 0).
<br/>
<br/>
Why set the bits directly to REG_BGxCNT? But from my logic this must be the place I'm going wrong.
<br/>
<br/>
The header would be useful as It would point out where the problem is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10559 - cooky - Mon Sep 08, 2003 7:36 pm</h4>
    <div class="postbody"><span class="postbody">Wow the cowbite tutorial is realy helpful however I have never realy understood how you map to memory. It's just like number alocation isn't it? But surley it's more complicated than that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10580 - antysix - Tue Sep 09, 2003 3:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Why set the bits directly to REG_BGxCNT? </td> </tr></table><span class="postbody">
<br/>
<br/>
Why not? I just think it's a lot easier doing it that way than the GBAJunkie's way with first putting everything into a temporary variable and then calling EnableBackground().
<br/>
An example for a simple 256x256 text background:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
REG_BG0CNT = CHAR_MEM(0) | SCREEN_MEM(31) | BG_COLOR_256 | TEXTBG_SIZE_256x256)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
The header would be useful as It would point out where the problem is.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Please give me your email-adress and I'll send it to you and I don't have to thrash this post with it.<br/>_________________<br/>Currently playing: NGC: Metroid Prime
<br/>
GBA: Golden Sun: The Lost Age
<br/>
<br/>
Currently developping: Project ~ [ Phail ]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10634 - cooky - Thu Sep 11, 2003 9:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>antysix wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
Please give me your email-adress and I'll send it to you and I don't have to thrash this post with it.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks. I'll give you it now.
<br/>
<br/>
REG_BG0CNT = CHAR_MEM(0) | SCREEN_MEM(31) | BG_COLOR_256 | TEXTBG_SIZE_256x256) 
<br/>
<br/>
This makes allot of sence now I've read Cowbite thanks again.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
