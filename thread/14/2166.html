<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Faster C/C++ faq? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Faster C/C++ faq?</h2>
<div id="posts">
<div class="post">
    <h4>#11260 - yaustar - Tue Sep 30, 2003 2:46 pm</h4>
    <div class="postbody"><span class="postbody">Is there an FAQ somewhere that lists the operations that shouldn't be used in c/c++ for speed?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11264 - poslundc - Tue Sep 30, 2003 3:12 pm</h4>
    <div class="postbody"><span class="postbody">The biggest things to avoid are division and modulus. Bitshift and mask where you can; multiply by the reciprocal where you can't. If timing is critical and you must divide/modulus, use the SWI dispatch in the bios (documented in various FAQs floating around) instead of gcc's regular divide. Consider using a look-up table if your value is in a known range.
<br/>
<br/>
Trigonometric functions obviously are terribly expensive to compute. Use look-up tables instead. The GBA even has a couple built in that you can copy out, if you can get to them (I personally don't bother to, since you end up consuming the memory anyway, but there is information on how to do so floating around).
<br/>
<br/>
Don't use floats or doubles, period. These have to be emulated in software and are slow as all heck. Learn how to use fixed-point mathematics. It's easier than it looks, and there's tons of info on the net on how to do it.
<br/>
<br/>
Calling functions creates extra overhead, so be smart about it. Small functions that get called repeatedly can often be replaced with macros.
<br/>
<br/>
These are the main things I would say to <span style="font-style: italic">avoid</span>. There's plenty more you can optimize in your code, but premature optimization is never a good idea. Get it working first, then go from there.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11265 - yaustar - Tue Sep 30, 2003 3:22 pm</h4>
    <div class="postbody"><span class="postbody">I have heard things about avoiding virtual functions, does this diminish the use of classes?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11268 - tepples - Tue Sep 30, 2003 4:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">The biggest things to avoid</td> </tr></table><span class="postbody">
<br/>
Thanks for the tips. I've added explanations of some of these techniques to the Beginners' FAQ.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11371 - poslundc - Fri Oct 03, 2003 5:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks for the tips. I've added explanations of some of these techniques to the Beginners' FAQ.</td> </tr></table><span class="postbody">
<br/>
<br/>
Cool, I've been FAQ'd. Today I am a man.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
