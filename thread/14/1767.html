<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>sprites not working with my mode 2 bg - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > sprites not working with my mode 2 bg</h2>
<div id="posts">
<div class="post">
    <h4>#9010 - immortalninjak - Sat Jul 26, 2003 1:41 pm</h4>
    <div class="postbody"><span class="postbody">Hi all, me again.
<br/>
Working from gbajunkies Tile/map tutorial I'm trying to display a 8*8 sprite.
<br/>
As seperate programs I can draw a sprite, and display a BG. But when I try and put them together it doesnt work.
<br/>
If I set the OAMData to 0x6010000 and sprite attribute 2 to 0, I get artifacts in the top left corner.
<br/>
If I set OAMData to 0x6014000 and attribute 2 to 512 i get nothing but the Bg.
<br/>
<br/>
here's the code that draws the bg
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
SetMode(MODE_1 | OBJ_ENABLE | OBJ_MAP_1D);
<br/>
<br/>
   bg2.number = 2;            //background number 0-3
<br/>
   bg2.charBaseBlock = 0;                  //tile data position 
<br/>
   bg2.screenBaseBlock = 28;      //map data position on 2Kb boundary
<br/>
   bg2.colorMode = BG_COLOR_256;           //256-colour background
<br/>
   bg2.size = ROTBG_SIZE_256x256;          //size of map
<br/>
   bg2.mosaic = 0;                         //not enabled
<br/>
   bg2.x_scroll = 120;         //scrolling variables
<br/>
   bg2.y_scroll = 80;
<br/>
<br/>
   
<br/>
        EnableBackground(&amp;bg2);
<br/>
<br/>
   for(loop = 0; loop &lt; 256; loop++){
<br/>
      BGPaletteMem[loop] = tilesPalette[loop]; 
<br/>
   }
<br/>
   
<br/>
   for(loop = 0; loop &lt; tiles_WIDTH * tiles_HEIGHT /2; loop++)
<br/>
      bg2.tileData[loop] = tilesData[loop];
<br/>
   
<br/>
   temp = (u16*)New;
<br/>
   for(loop = 0; loop &lt; 32*32/2; loop++)
<br/>
      bg2.mapData[loop] = temp[loop];
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
followed by the code that should draw the sprite
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for (loop = 0; loop &lt; 256; loop++)
<br/>
      OBJPaletteMem[loop] = sPalette[loop];
<br/>
   
<br/>
   InitializeSprites();
<br/>
   
<br/>
   sprites[0].attribute0 = COLOR_256 | SQUARE | 80;   
<br/>
        sprites[0].attribute1 = SIZE_8 | 40;            
<br/>
        sprites[0].attribute2 = 0;            
<br/>
   
<br/>
    for(loop = 0; loop &lt; 8*8/2; loop++)              
<br/>
          {
<br/>
             OAMData[loop] = sData[loop];
<br/>
         }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
sorry for being such a noob but any help would be greatly appreciated.
<br/>
Although at this rate, the thing I come up with at the end will be a mix and match of board posts!
<br/>
thanks again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9052 - immortalninjak - Sun Jul 27, 2003 11:28 am</h4>
    <div class="postbody"><span class="postbody">uh duh!
<br/>
Wasnt copying OAM in the main loop!!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
