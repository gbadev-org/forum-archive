<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Collision for beginners.... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Collision for beginners....</h2>
<div id="posts">
<div class="post">
    <h4>#12057 - goro - Tue Oct 28, 2003 12:00 pm</h4>
    <div class="postbody"><span class="postbody">Hi, 
<br/>
<br/>
For learning purposes, I want to re-create 'Pong' but I'm stuck at doing collision. 
<br/>
<br/>
I have no bg to worry about, I can make my bats move up and down, and I have a ball. So I just need the most simple collision technique for this project.
<br/>
Also - I intend to write a very simple tutorial (aimed at absolute beginners like me!!) so please provide very simplistic replies.
<br/>
<br/>
Thanks.
<br/>
<br/>
ps. I checked the tutorials section &amp; did a search on the forum &amp; read a lot of posts but didn't quite find an answer that was simple enough...
<br/>
<br/>
-edit - I know I can just compare the x&amp; y positions of the bat &amp; ball but I wish to start the learning curve for collision...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12058 - marcmccann - Tue Oct 28, 2003 2:09 pm</h4>
    <div class="postbody"><span class="postbody">for a pong type game i reccomend bounding rectangle collision detection, just have the edges of the ball at the edge of the picture. This is done like (pseudo)
<br/>
<br/>
if ball bottom &gt; paddle top then no collision
<br/>
//Do stuff
<br/>
if ball bottom &lt;= paddle top then collision
<br/>
//Do stuff
<br/>
<br/>
same goes for the balls Y position.
<br/>
<br/>
That was a pathetic attempt to explain it, i will email you a proper thing when i get chance.
<br/>
<br/>
Also radius based collision is an option but probably not worth struggling with for a pong type game.<br/>_________________<br/>The GBA is one Lean and Mean machine!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12061 - goro - Tue Oct 28, 2003 4:47 pm</h4>
    <div class="postbody"><span class="postbody">bounding rectangle collision detection and radius based collision?
<br/>
<br/>
Are these the main ways of doing collision?
<br/>
<br/>
Like, what did they use for the snes and megadrive games?
<br/>
<br/>
I wouldn't mind covering some slightly advanced topics like how mario can be blocked by an obstacle (say, a wooden box)and then jump onto it...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12062 - tepples - Tue Oct 28, 2003 5:01 pm</h4>
    <div class="postbody"><span class="postbody">Mario jumps. Mario is falling. The physics engine scans the playfield surrounding Mario at all times and determines that in the next frame, Mario's rectangle will overlap that of a solid playfield object. Then it places Mario on the object and changes Mario's state from "falling" to "standing".
<br/>
<br/>
A more complicated collision method, used in <span style="font-style: italic">Sonic the Hedgehog 2</span>, gives each 16-by-16 pixel map block a collision map consisting of a left extent and a right extent of the solidness of that block.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12095 - goro - Wed Oct 29, 2003 11:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Mario's rectangle will overlap that of a solid playfield object</td> </tr></table><span class="postbody">
<br/>
<br/>
Okay, I'm beginning to understand. For collision to work, we always need a bounding box.
<br/>
<br/>
Q: Can you confirm that the x,y position (attributes 0,1) are for the bottom left corner of the sprites and that our virtual bounding box begins here.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">and changes Mario's state from "falling" to "standing". </td> </tr></table><span class="postbody">
<br/>
<br/>
It seems FSM's played a big part in programming even in days of olde...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">A more complicated collision method, used in Sonic the Hedgehog 2, gives each 16-by-16 pixel map block a collision map consisting of a left extent and a right extent of the solidness of that block.</td> </tr></table><span class="postbody">
<br/>
<br/>
Software like Maped create collision layers. Is this what you speak of, and are most 'commercial' GBA games programmed in this way? 
<br/>
<br/>
Also - how did they do it in Sonic 1 or in the older sms or nes games?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The physics engine scans the playfield surrounding Mario at all times and determines that in the next frame, Mario's rectangle will overlap that of a solid playfield object. </td> </tr></table><span class="postbody">
<br/>
<br/>
At all times? By this you mean it does 1 check per frame?
<br/>
<br/>
So his bounding box has bigger radius and when the first pixels overlap, the engine waits till the next frame to act on the collision?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">a left extent and a right extent of the solidness of that block.</td> </tr></table><span class="postbody">
<br/>
<br/>
Can you clarify how?
<br/>
<br/>
<br/>
Thanks for your responses so far...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12098 - tepples - Wed Oct 29, 2003 4:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>goro wrote:</b></span></td> </tr> <tr> <td class="quote">Can you confirm that the x,y position (attributes 0,1) are for the bottom left corner of the sprites and that our virtual bounding box begins here.</td> </tr></table><span class="postbody">
<br/>
Screen positions of sprites are always the top-left corner.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Software like Maped create collision layers. Is this what you speak of, and are most 'commercial' GBA games programmed in this way?</td> </tr></table><span class="postbody">
<br/>
I don't know how "most" games do it.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The physics engine scans the playfield surrounding Mario at all times and determines that in the next frame, Mario's rectangle will overlap that of a solid playfield object. </td> </tr></table><span class="postbody">
<br/>
<br/>
At all times? By this you mean it does 1 check per frame?</span></td> </tr></table><span class="postbody">
<br/>
I was just using <span style="font-style: italic">SMB</span> as an example of a platform game. I don't know how many sub-tasks <span style="font-style: italic">SMB</span> decomposes its collision tasks into, but yes, it runs collision testing every frame.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">So his bounding box has bigger radius and when the first pixels overlap, the engine waits till the next frame to act on the collision?</td> </tr></table><span class="postbody">
<br/>
During each "current frame", the engine is always computing the "next frame" before sending it to the video chip.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">a left extent and a right extent of the solidness of that block.</td> </tr></table><span class="postbody">
<br/>
Can you clarify how?</span></td> </tr></table><span class="postbody">
<br/>
You'll have to read <a class="postlink" href="http://homepages.ihug.com.au/%7Enemesis2k2/s2rom.html#collision" target="_blank">this</a>. I wouldn't suggest such a sophisticated scheme for your first platformer, though.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12100 - goro - Wed Oct 29, 2003 5:12 pm</h4>
    <div class="postbody"><span class="postbody">Wow, Thanks!!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Screen positions of sprites are always the top-left corner. </td> </tr></table><span class="postbody">
<br/>
<br/>
Even when the horizontal_flip is on?
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Quote: 
<br/>
Software like Maped create collision layers. Is this what you speak of, and are most 'commercial' GBA games programmed in this way? 
<br/>
<br/>
I don't know how "most" games do it. </td> </tr></table><span class="postbody">
<br/>
<br/>
Sorry, I meant to ask : is this was a good way todo it for a platform-type game?
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">During each "current frame", the engine is always computing the "next frame" before sending it to the video chip. </td> </tr></table><span class="postbody">
<br/>
<br/>
Is this the way to do it on a gba (using mode 0, 16-color sprites/tiles etc)?
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Quote: 
<br/>
a left extent and a right extent of the solidness of that block. </td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for that link, I'll check it out asap. Any idea of how they dealt with collision on the old nintendo (NES)?
<br/>
<br/>
Thanks again....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12103 - tepples - Wed Oct 29, 2003 6:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>goro wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Screen positions of sprites are always the top-left corner.</td> </tr></table><span class="postbody">
<br/>
Even when the horizontal_flip is on?</span></td> </tr></table><span class="postbody">
<br/>
Clarification: Top-left corner of the <span style="font-style: italic">bounding rectangle</span>, not top-left corner of the <span style="font-style: italic">image</span>. The flip doesn't affect where the sprite's bounding rectangle is. Rot/scale matrices don't affect where the sprite's bounding rectangle is. There are only five bitfields that have any effect on a sprite's bounding rectangle as seen by the GBA video chip: x position (left side), y position (right side), shape, size, and double-size.
<br/>
<br/>
Note that what I said applies only to what is seen by the video chip. Game engines may have other ideas of the origin of a sprite's local coordinate system. If you're confused, study some analytic geometry.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">is [a collision layer] a good way todo it for a platform-type game?</td> </tr></table><span class="postbody">
<br/>
To save space in ROM, try computing both your display and your collision map in real time from a more abstract representation in ROM. This is how at least <span style="font-style: italic">Super Mario Bros.</span> does it, which is how it managed to squeeze all its map data into 5 kilobytes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">During each "current frame", the engine is always computing the "next frame" before sending it to the video chip. </td> </tr></table><span class="postbody">
<br/>
Is this the way to do it on a gba (using mode 0, 16-color sprites/tiles etc)?</span></td> </tr></table><span class="postbody">
<br/>
On some level, that's how <span style="font-style: italic">any</span> real-time game on <span style="font-style: italic">any</span> platform works. A real-time program is a transformation from the state of the machine in one frame to the state of the machine in the next frame.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
