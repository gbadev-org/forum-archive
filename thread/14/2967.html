<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>linkscript, crt0 and other things that frighten newbies - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > linkscript, crt0 and other things that frighten newbies</h2>
<div id="posts">
<div class="post">
    <h4>#17143 - teezeCrost - Tue Mar 02, 2004 10:07 am</h4>
    <div class="postbody"><span class="postbody">hey  everyone. Just trying to hammer down a few concepts here. I think I'm getting ahead of myself, but can someone give me a brief rundown on what the following mak file snippet does?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# -------------------------------------------
<br/>
# Define the flags for the compilers;
<br/>
# -------------------------------------------
<br/>
CFLAGS  = -I $(INCDIR2) -I $(INCDIR) -I $(SRCDIR) -mthumb-interwork -c -g -O2 -Wall -fverbose-asm
<br/>
SFLAGS  = -I $(INCDIR2) -I $(INCDIR) -mthumb-interwork 
<br/>
LDFLAGS = -L $(LIBDIR) -L $(LIBDIR2) -T LinkScript </td> </tr></table><span class="postbody">
<br/>
<br/>
also, what is linkscript and crt0.o? (in laymen's terms)
<br/>
<br/>
what determines what gets listed with the .o files in the mak file?
<br/>
<br/>
Lastly, what are thumb and arm? I probably don't need to worry about them yet, but it'd be nice to know.
<br/>
<br/>
Thanks to anyone who can toss me a clue!<br/>_________________<br/>If you think you think outside the box, you're trapped in one.
<br/>
-teezeCrost</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17146 - Cearn - Tue Mar 02, 2004 10:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>teezeCrost wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
I'm assuming you are using DevKit advance here. If not plz say so.
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# -------------------------------------------
<br/>
# Define the flags for the compilers;
<br/>
# -------------------------------------------
<br/>
CFLAGS  = -I $(INCDIR2) -I $(INCDIR) -I $(SRCDIR) -mthumb-interwork -c -g -O2 -Wall -fverbose-asm
<br/>
SFLAGS  = -I $(INCDIR2) -I $(INCDIR) -mthumb-interwork 
<br/>
LDFLAGS = -L $(LIBDIR) -L $(LIBDIR2) -T LinkScript </td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
CFLAGS: options for the compiler (gcc)
<br/>
SFLAGS: options for the assembler (as)
<br/>
LDFLAGS: options for the linker (ld)
<br/>
<br/>
You can find out what all the flags mean in the manuals at <a class="postlink" href="http://www.gnu.org" target="_blank">www.gnu.org</a>. Or you could them in CHM format from <a class="postlink" href="http://htmlhelp.berlios.de/books/chm.php" target="_blank">http://htmlhelp.berlios.de/books/chm.php</a>. These should be of great help figuring out what you can do with the different GNU tools. 
<br/>
If you want some info on the flags right now: "-I" sets the search paths for include files; "-c" tells the compiler to compile only; "-L" sets the search paths for libraries (.a files); these should suffice for simple things.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">also, what is linkscript and crt0.o? (in laymen's terms)</td> </tr></table><span class="postbody">
<br/>
See the devrs FAQ <a class="postlink" href="http://www.devrs.com/gba/files/gbadevfaqs.php" target="_blank">http://www.devrs.com/gba/files/gbadevfaqs.php</a>. They concern initialization stuff and where all your code goes. crt0.S (which is assembled to crt0.o) also sets-up the interrupt handler (but you can also write one yourself).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
what determines what gets listed with the .o files in the mak file?</td> </tr></table><span class="postbody">
<br/>
That can be kinda complicated and also depends on which which make you're using (GNU make or MSVC's NMAKE for example). You can find lots of mak file examples on this forum or the gbadev demos. Study them to see how they work. I could give you one of mine and explain how that works if you want. 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Lastly, what are thumb and arm? I probably don't need to worry about them yet, but it'd be nice to know.</td> </tr></table><span class="postbody">
<br/>
Again, see the forum faq or the devrs faq. The ARM CPU has two instruction sets: one with 32bit instructions (arm) and one with 16bit instructions (thumb). There are several topics throughout the forum on this subject.
<br/>
Yes, I know this all a bit brief, but I hope it'll give you some idea of what these things are about.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17183 - teezeCrost - Wed Mar 03, 2004 1:08 am</h4>
    <div class="postbody"><span class="postbody">that gives me a good start. Thanks for taking the time!
<br/>
so are those flags all the flags that exist, or just the ones to be used when you hit build?
<br/>
thanks again.<br/>_________________<br/>If you think you think outside the box, you're trapped in one.
<br/>
-teezeCrost</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17192 - Cearn - Wed Mar 03, 2004 10:14 am</h4>
    <div class="postbody"><span class="postbody">The latter. The total number of flags is huge. For a complete list, check out the documentation links I gave you. You can also get a summary of the available flags by using something like
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
[command] --help &gt; [file]
<br/>
</td> </tr></table><span class="postbody">
<br/>
in the command line. This will dump a list of flags of [command] into [file]. Getting the real docs is better though.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
