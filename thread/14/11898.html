<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Image Conversion Tool Recommendations - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Image Conversion Tool Recommendations</h2>
<div id="posts">
<div class="post">
    <h4>#111587 - blackcoat - Fri Dec 08, 2006 1:22 am</h4>
    <div class="postbody"><span class="postbody">Though the FAQ points to the <a class="postlink" href="http://www.gbadev.org/tools.php?section=Graphics" target="_blank">vast library of tools</a> available for converting images to a format useable by the DS, is there any standard tool (or set of tools) used by people here in the community?
<br/>
<br/>
<br/>
I ask because I am just starting my first homebrew project, and I am a bit stumped with what should be a simple image conversion.  As with a few other people, I too am following <a class="postlink" href="http://www.patatersoft.info/manual.html" target="_blank">Patatersoft's tutorial</a> to help get me started.  The first part of the tutorial teaches you how to display background images in Mode 5.  For the images, Patatersoft suggests using <a class="postlink" href="http://www.gbadev.org/tools.php?showinfo=142" target="_blank">gfx2gba</a> (<a class="postlink" href="http://www.ohnehirn.de/tools/readme.txt" target="_blank">manual</a>)  -- which is different than the identically named <a class="postlink" href="http://www.gbadev.org/tools.php?showinfo=143" target="_blank">gfx2gba</a> -- and then using his <a class="postlink" href="http://www.patatersoft.info/hconvert.html" target="_blank">hConvert</a> tool to set the alpha bit for the DS.  The resulting object file can be run through the `bin2o` rule in devKitARM's "base_rules" makefile and linked.
<br/>
<br/>
Long story short, when I do this, I get a black screen on top and on bottom.  Interestingly enough, my code does work since I can run Patatersoft's pre-generated .bin files through `bin2o`, link them, and the backgrounds show up.  My own images seem to be the problem, and here is what I am doing right now:<ol type="1">
<br/>
<li>Crop the original .gif file using GIMP, and producing two 256x192 .bmp's with indexed color.
<br/>
</li><li>Convert all .bmp's to .raw.c with gba2fx.  From my makefile:
<br/>
</li></ol></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">${DATA}/%.bin: $(ART)/%.bmp
<br/>
   gfx2gba -q -fsrc -o$(BUILD) $&lt;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<li>Run the .raw.c through hConvert to set the alpha bit.
<br/>
<br/>
hConvert only takes a single filename as an argument and has no options, so this should not be a useage issue.  I'm guessing that my problem could be one of the following things:
<br/>
<ul>
<br/>
<li>I am not using gfx2gba correctly.
<br/>
</li><li>hConvert doesn't set the alpha bit correctly, giving me a transparent images (black screen) instead of something opaque.
<br/>
</li><li>I have not properly saved my image with GIMP.  It should be noted that I have not figured out how to adjust color depth in GIMP, but I did opt for a 256-color palette when switching to Indexed color and saving the .bmp's.
<br/>
</li></ul>
<br/>
<br/>
So, what works for you?  How do you get your backgrounds on to the DS?  Any tool suggestions + command line options would be greatly appreciated.</li></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111627 - Sausage Boy - Fri Dec 08, 2006 4:04 pm</h4>
    <div class="postbody"><span class="postbody">You can change the color mode in the gimp using Image-&gt;Mode-&gt;Indexed or something like that. I've found that .pcx files work well for me with gfx2gba, but I recommend you to get <a class="postlink" href="http://user.chem.tue.nl/jakvijn/downloads.htm#git" target="_blank">git</a>.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111630 - blackcoat - Fri Dec 08, 2006 4:48 pm</h4>
    <div class="postbody"><span class="postbody">Sausage Boy,
<br/>
    Thank you for the advice, I really appreciate it.  However, something is still going wrong, and I don't know what it is....
<br/>
<br/>
    As you suggested, I tried using .pcx with gfx2gba, and made sure that the image was using Indexed color (already was since I'm converting from .gif).  The final product had the same result:  two black screens.
<br/>
<br/>
   Then, I tried my hand with git, which definitely looks like a step up (once again, thank you!).  Here's what I'm doing right now in my makefile:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">$(DATA)/%.bin: $(ART)/%.pcx
<br/>
   git $&lt; -gB16 -ftb -fh! -o$(DATA)/.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
From there, I run the resulting .bin through the `bin2o` rule, link the .elf, and build the .nds and .ds.gba executables.   Once again, black screens.
<br/>
<br/>
Just to make sure that I am not insane, I copied Patatersoft's .bin files over my own, touched them, and re-made the project.  Sure enough, those display just fine.
<br/>
<br/>
Am I using the correct options for generating a Mode 5 background?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111888 - headspin - Mon Dec 11, 2006 12:25 pm</h4>
    <div class="postbody"><span class="postbody">You can try using jpeg or my fixbit15 tool on the binary output produced by gfx2gba.
<br/>
<br/>
<a href="http://headkaze.drunkencoders.com/" target="_blank">http://headkaze.drunkencoders.com/</a><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112079 - blackcoat - Wed Dec 13, 2006 1:06 am</h4>
    <div class="postbody"><span class="postbody">!!! Progress !!!
<br/>
<br/>
Thank you, headspin.
<br/>
<br/>
As it turns out, my problem was two-fold:
<br/>
   1) hconvert wasn't working for me
<br/>
   2) My images were unexpectedly using 32-bit color
<br/>
<br/>
I still don't know why 'hconvert' wasn't working for me, but 'fixbit15' did the trick.  As suggested by headspin, I tried using that with the binary output from `gfx2gba`, and that finally produced something on screen (albeit distorted).
<br/>
<br/>
Though still experimental and unsupported, `gfx2gba` does convert images using 32-bit color depth.  My conversion rule in the makefile has now morphed into this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">$(DATA)/%.bin: $(ART)/%.pcx
<br/>
   gfx2gba -q -fraw -c32k -o$(BUILD) $&lt;
<br/>
   fixbit15 $(BUILD)/$(basename $(notdir $&lt;)).raw
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
And that works for me!
<br/>
<br/>
I still have not figured out how to adjust the color depth in GIMP.  My images were already using a 256-color palette, but the colors themselves were still 32-bit.  Anyway, I've got this working now.
<br/>
<br/>
Does everyone here use Photoshop for editing their initial images?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112085 - tepples - Wed Dec 13, 2006 3:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blackcoat wrote:</b></span></td> </tr> <tr> <td class="quote">I still have not figured out how to adjust the color depth in GIMP.</td> </tr></table><span class="postbody">
<br/>
What error do you get when you try Image &gt; Mode &gt; Indexed... and then make sure it's still indexed when you save?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112099 - blackcoat - Wed Dec 13, 2006 6:17 am</h4>
    <div class="postbody"><span class="postbody">tepples, GIMP is not giving me any errors, and I am using version 2.2.13.
<br/>
<br/>
My original artwork files are .gif, so they're already using indexed color.  Just to be sure that nothing strange is going on, I can convert them to RGB, then back to Indexed mode.  The Indexed color dialog appears, and I choose "Generate Optimum Palette" with a maximum of 256 colors.  I then save a copy as a ".pcx".  In the past, I was saving as .bmp without RLE, but .pcx is working for me at the moment, so I'm sticking with it.
<br/>
<br/>
When opening up the resulting .pcx in GIMP, I get the following information from the View -&gt; Info Window:
<br/>
<ul>
<br/>
<li> Pixel dimensions: 256 x 192 pixels
<br/>
</li><li> Print size: 3.556 x 2.667 inches
<br/>
</li><li> Resolution: 72 x 72 dpi
<br/>
</li><li> Scale ratio:  100.00
<br/>
</li><li> Number of layers: 1
<br/>
</li><li> Size in memory:  292 KB
<br/>
</li><li> Display type: Indexed Color (256 colors)
<br/>
</li><li> Visual class:  True Color
<br/>
</li><li> Visual depth: 24
<br/>
</li></ul>
<br/>
<br/>
Notice the last few statistics:  a 256 color palette, but 24-bit True Color depth.  This is what GIMP gives to me, so that's what I end up working with.  Aside from "use Photoshop", are there any suggestions on how to create images with 16-bit color depth ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112123 - oofrab - Wed Dec 13, 2006 1:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blackcoat wrote:</b></span></td> </tr> <tr> <td class="quote">Aside from "use Photoshop", are there any suggestions on how to create images with 16-bit color depth ?</td> </tr></table><span class="postbody">
<br/>
<br/>
You could use the command line program 'convert' from the ImageMagick suite and supply it with the option '-depth 16'.
<br/>
<br/>
<span style="font-style: italic">Edit: Hmm, I believe this is WRONG. I am not able to do this with convert.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112128 - tepples - Wed Dec 13, 2006 3:01 pm</h4>
    <div class="postbody"><span class="postbody">You can truncate your 24/32 bit color images to 15-bit color by doing Image &gt; Colors &gt; Posterize and choosing 32 levels.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112135 - blackcoat - Wed Dec 13, 2006 4:37 pm</h4>
    <div class="postbody"><span class="postbody">Wow, this just keeps getting even more bizarre.
<br/>
<br/>
tepples, I tried posterizing the image as you suggested using 32 levels.  The result:
<br/>
<ul>
<br/>
<li> Pixel dimensions: 256 x 192 pixels
<br/>
</li><li> Print size: 3.556 x 2.667 inches
<br/>
</li><li> Resolution: 72 x 72 dpi
<br/>
</li><li> Scale ratio:  100.00
<br/>
</li><li> Number of layers: 1
<br/>
</li><li> <span style="font-weight: bold">Size in memory:  776 KB</span>
<br/>
</li><li> <span style="font-weight: bold">Display type: Indexed Color (106 colors)</span>
<br/>
</li><li> Visual class:  True Color
<br/>
</li><li> Visual depth: 24
<br/>
</li></ul>
<br/>
<br/>
So, there are now fewer colors being used, the image has mysteriously jumped in size, and still no change in color depth.  Tried making the project again, and same result:  the images do not display properly unless I use gfx2gba with the -c32k option.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112151 - tepples - Wed Dec 13, 2006 7:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blackcoat wrote:</b></span></td> </tr> <tr> <td class="quote">tepples, I tried posterizing the image as you suggested using 32 levels.  The result:
<br/>
<ul>
<br/>
<li> Pixel dimensions: 256 x 192 pixels
<br/>
</li><li> <span style="font-weight: bold">Size in memory:  776 KB</span>
<br/>
</li></ul></td> </tr></table><span class="postbody">
<br/>
I think the size in memory includes the image's undo history. Try clearing the undo history.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
