<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Very Low Framerate - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Very Low Framerate</h2>
<div id="posts">
<div class="post">
    <h4>#71885 - tonkinfash - Wed Feb 15, 2006 2:39 am</h4>
    <div class="postbody"><span class="postbody">I've just gotten to grips with the basics of GBA coding and I then proceeded to create a simple bouncing ball program just to get to grips with double-buffering in mode 4.
<br/>
<br/>
The program works, but the framerate is less than 1/sec!
<br/>
<br/>
I'm not at my PC right now so I can't post code, but the logic goes:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">initialise variables.
<br/>
<br/>
while (1)
<br/>
   blit.
<br/>
   wait for vblank.
<br/>
   flip.
<br/>
   logic for ball/screen edge collisions on y axis.
<br/>
   do the same for the x axis.
<br/>
end</td> </tr></table><span class="postbody">
<br/>
<br/>
The waiting for the V blank is done with a simple while loop.
<br/>
<br/>
Any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71887 - nmain - Wed Feb 15, 2006 3:08 am</h4>
    <div class="postbody"><span class="postbody">make sure, if using C, you're treating vcount as a volatile memory location.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71896 - tonkinfash - Wed Feb 15, 2006 5:32 am</h4>
    <div class="postbody"><span class="postbody">Here's an update:
<br/>
<br/>
The main logic is thus:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while (1)
<br/>
   {
<br/>
      clearBuffer_M4 ();
<br/>
      blit_8x8_M4 (x, y, ball);
<br/>
<br/>
      x += xVel;
<br/>
      y += yVel;
<br/>
<br/>
      if ((xVel &gt; 0) &amp;&amp; (x &gt;= (SCR_WIDTH - 8)))
<br/>
         xVel = -xVel;
<br/>
<br/>
      else if ((xVel &lt; 0) &amp;&amp; (x &lt;= 0))
<br/>
         xVel = -xVel;
<br/>
<br/>
      if ((yVel &gt; 0) &amp;&amp; (y &gt;= (SCR_HEIGHT - 8)))
<br/>
         yVel = -yVel;
<br/>
<br/>
      else if ((yVel &lt; 0) &amp;&amp; (y &lt;= 0))
<br/>
         yVel = -yVel;
<br/>
      
<br/>
      VBlankWait ();
<br/>
      flipBuffers ();
<br/>
   }</td> </tr></table><span class="postbody">
<br/>
<br/>
The blitter code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void blit_8x8_M4 (short x, short y, unsigned char *image)
<br/>
{
<br/>
   short xx, yy;
<br/>
<br/>
   for (yy = 0; yy &lt; 8; yy++)
<br/>
      for (xx = 0; xx &lt; 8; xx++)
<br/>
         setPixelM4 (x + xx, y + yy, image [xx + (yy &lt;&lt; 3)]);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
The buffer clear code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">inline void clearBuffer_M4 (void)
<br/>
{
<br/>
   unsigned short i;
<br/>
   unsigned short *wordAlias = VIDEO_BUFFER;
<br/>
<br/>
   for (i = 0; i &lt; 19200; i++)
<br/>
      *wordAlias++ = 0x0000;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
V blank wait:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">inline void VBlankWait (void)
<br/>
{
<br/>
   while (*SCANLINE_CTR &lt; 160);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Set pixel:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">inline void setPixelM4 (short x, short y, unsigned char col)
<br/>
{
<br/>
   unsigned short *offset = VIDEO_BUFFER + (((y * SCR_WIDTH) + x) &gt;&gt; 1);
<br/>
<br/>
   if (x &amp; 1)
<br/>
   {
<br/>
      *offset &amp;= 0x00ff;
<br/>
      *offset |= (col &lt;&lt; 8);
<br/>
   }
<br/>
      
<br/>
   else
<br/>
   {
<br/>
      *offset &amp;= 0xff00;
<br/>
      *offset |= col;
<br/>
   }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Hope this helps. I optimised a little and the FPS is around 3-5 f/sec. If I comment out the clear function then it runs much faster so I'm guessing that the main bottleneck is there. I don't really know how to make it any more efficient though...
<br/>
<br/>
EDIT: I changed the clear code so that it writes 32 bits at a time and it's now at about 10 f/s. Better, but still unacceptable.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71923 - Cearn - Wed Feb 15, 2006 10:06 am</h4>
    <div class="postbody"><span class="postbody">Use DMA or CpuFastSet for copying or clearing large areas. Should speed things up to about take about 1/3 of a vblank. And don't ever, ever, <span style="font-weight: bold"><span style="font-style: italic">EVER</span></span> use shorts as loop indices. See <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/dma.htm" target="_blank">tonc:dma</a> for an example of how to make a DMA clear routine.
<br/>
<br/>
Is there any particular reason you're not using tiled modes or sprites? If you did that there wouldn't be any need to clear and blit so much, which is where most of your cycles are going now.
<br/>
<br/>
Also, your VBlankWait is wrong. Well, it does wait until the VBlank, but if your VBlank routines are small (which it isn't here, but in case it were), you'd still be inside the VBlank when the next call to VBlankWait happens, which clears immediately. For a proper vsync, first wait till vcount is over, then wait till vcount is 160 again. Or use the VBlankIntrWait interrupt, but learn about interrupts first.
<br/>
<br/>
Depending on the definition of VIDEO_BUFFER, the drawing routines may be off as well: if it's a pointer to the current backbuffer that's fine, but if it's a static pointer to 0x0600:0000, there's no point in flipping pages because the second one is always empty.
<br/>
______
<br/>
<br/>
P.S.
<br/>
The mode 4 rectangle drawer is one of the best ways of showing what you can do in terms of speed by simply changing the algorithm a bit. I did a few tests on this a long time back, and this is what I found:
<br/>
<br/>
Inlining the pixel plotter: <span style="font-weight: bold">3x</span> speedup
<br/>
A using u32 or use fills where possible: <span style="font-weight: bold">8.6x</span>
<br/>
Using an optimized filler: <span style="font-weight: bold">2x</span>
<br/>
<br/>
So that's a 45x increase in speed with a few simple changes. Actually, I think it should even be better because I still used small rectangles for the tests, meaning that the overhead for u16/u32 fills is still high. Depending on your compiler flags --if you're not compiling as thumb code (-mthumb) or have optimizations (-O1, -O2, -O3) off-- you may lose another factor 1.5. Also, using shorts as indices instead of ints costs another 20% or so.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71927 - tonkinfash - Wed Feb 15, 2006 11:39 am</h4>
    <div class="postbody"><span class="postbody">I was building up to sprites (hence being a beginner) but assumed that the hardware would be able to handle simple double-buffered graphics.
<br/>
<br/>
As you can see, all of my small routines are inline.
<br/>
<br/>
Of course the flip function swaps buffers (quicker than the version I found off the Net, too):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">inline void flipBuffers (void)
<br/>
{
<br/>
   // A sneaky trick to swap buffers:
<br/>
     (unsigned int) VIDEO_BUFFER ^= (unsigned int) 0x0000A000;
<br/>
<br/>
   toggleRegisterBit (REG_DC, DC_FLIP);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
And changing the registers to volatile does nothing.
<br/>
<br/>
Thanks for the help - guess I'm forced to learn sprites...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71930 - Cearn - Wed Feb 15, 2006 12:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">I was building up to sprites (hence being a beginner) but assumed that the hardware would be able to handle simple double-buffered graphics.</td> </tr></table><span class="postbody">Fraid not. Not unless you want to heavily optimize things. The GBA is simply too slow to really make much use of bitmap modes. They're nice for introductory purposes, but it's best to learn about tile modes as soon as you can.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">As you can see, all of my small routines are inline.</td> </tr></table><span class="postbody">I know, but things won't actually be inlined unless you have optimizations switched on. The demos in most tutorials do not have that; nor do they mention that it's best to compile with '-mthumb-interwork -mthumb'. Which is why I mentioned it.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">Of course the flip function swaps buffers (quicker than the version I found off the Net, too):
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">inline void flipBuffers (void)
<br/>
{
<br/>
   // A sneaky trick to swap buffers:
<br/>
     (unsigned int) VIDEO_BUFFER ^= (unsigned int) 0x0000A000;
<br/>
<br/>
   toggleRegisterBit (REG_DC, DC_FLIP);
<br/>
}</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">Then you've not been looking in the right places, as I wrote about that <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/bitmaps.htm#ssec-intr-page-gba" target="_blank">trick</a> nearly two years ago :P The thing that threw me was that you were using all-caps for VIDEO_BUFFER, which is usually reserved for #defined constants rather than variables.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">And changing the registers to volatile does nothing.</td> </tr></table><span class="postbody">Yes it does, just not in terms of speed. Your VblankWait() routine waits till the vcount reaches a certain value. But because the vcount is not altered inside the loop (how could it; it's read only after all) the GCC optimizer will perform the check outside of the loop, and your program would lock up. That's the reason for the volatile. You also need volatile if you want to make a function for filling with DMA or CpuFastSet.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">guess I'm forced to learn sprites...</td> </tr></table><span class="postbody">Hardware sprites aren't so bad. In fact, it's probably a lot easier, and definitely  faster, than having to take care of everything by hand.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71960 - poslundc - Wed Feb 15, 2006 5:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">Fraid not. Not unless you want to heavily optimize things. The GBA is simply too slow to really make much use of bitmap modes. They're nice for introductory purposes, but it's best to learn about tile modes as soon as you can.</td> </tr></table><span class="postbody">
<br/>
<br/>
Based on the large number of people that seem to stop reading at the chapters on bitmap modes, convinced that those modes are right for their purposes, I wonder if tutorials wouldn't be better off talking about the tile modes before the bitmap modes, or giving a caveat when explaining the bitmap modes that they are not very useful for most actual game designs. Maybe something could be added to the FAQ about it.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71964 - Cearn - Wed Feb 15, 2006 6:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">Based on the large number of people that seem to stop reading at the chapters on bitmap modes, convinced that those modes are right for their purposes.</td> </tr></table><span class="postbody">It's not just that people stop after reading about bitmap modes, <span style="font-style: italic">tutorials</span> stop after them, or add tile modes as an afterthought. So how are the readers suposed to know?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">I wonder if tutorials wouldn't be better off talking about the tile modes before the bitmap modes, or giving a caveat when explaining the bitmap modes that they are not very useful for most actual game designs. </td> </tr></table><span class="postbody">
<br/>
Not sure if 'before' is preferable as the bitmap modes will be more familiar to new users and helps the transition, but a big fat caveat would be nice. I'll make tonc's bigger, see if that helps. [sigh]But even if I do and tepples adds it to the FAQ, not sure how much that would help: we still have people #including data and doing all sorts of unruly things as well because of tutorials that haven't been updated in ages but still continue to be popular[/sigh]. Maybe resurrecting the <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3390" target="_blank">bad habits</a> thread, or a summary of it? Or a simple, short list of dos and don'ts somewhere, with links to explanations. While the FAQ is great, it's sometimes difficult to find something particular even if you do know what you're looking for. On that note, would it be possible to put
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wishful thinking wrote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-size: 24px; line-height: normal"><span style="font-weight: bold"><a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=418" target="_blank">READ THE FAQ</a></span></span>
<br/>
(yes, the whole thing. It's for your own good.)</td> </tr></table><span class="postbody">
<br/>
in the registration confirmation message in big angry red letters? Or would that be rude :P
<br/>
<span style="font-size: 9px; line-height: normal">sorry for the hijack, tonkinfash, just thinking out loud here.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71967 - ScottLininger - Wed Feb 15, 2006 6:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote"> I wonder if tutorials wouldn't be better off talking about the tile modes before the bitmap modes, or giving a caveat when explaining the bitmap modes that they are not very useful for most actual game designs. </td> </tr></table><span class="postbody">
<br/>
<br/>
Bitmap modes are so much easier to learn. I think they're the natural starting point. It allows beginners to get *something* displaying on their gameboy, which is such a kick that it hooks you for life. (At least that's how it happened for me.)
<br/>
<br/>
A caveat is a nice idea. However, anyone who *tries* to make an action game in bitmap mode will quickly realize the limitations.
<br/>
<br/>
On that subject... there are plenty of turn-based or text-based games where mode 4 (or even 3) is perfectly okay, so we shouldn't make the blanket statement that tile modes are the only ones worth exploring.
<br/>
<br/>
-Scott
<br/>
<br/>
<br/>
-Scott</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71971 - poslundc - Wed Feb 15, 2006 7:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">It's not just that people stop after reading about bitmap modes, tutorials stop after them, or add tile modes as an afterthought. So how are the readers suposed to know?</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm not aware of any popular tutorials that don't give adequate coverage to tile modes. They do tend to treat them as a more "advanced" subject, though. I think it's the kind of discussion that could be well-suited to the overview chapters that first introduce the learners to the different modes available, although who knows if most beginners even read those chapters.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ScottLininger wrote:</b></span></td> </tr> <tr> <td class="quote">Bitmap modes are so much easier to learn. I think they're the natural starting point. It allows beginners to get *something* displaying on their gameboy, which is such a kick that it hooks you for life. (At least that's how it happened for me.)</td> </tr></table><span class="postbody">
<br/>
<br/>
I dunno, for me, I very nearly skipped the sections on bitmap modes entirely when I started with the Pern tutorials. Now I may be exceptional for realizing the obvious benefits to using tiles, but I think the GBA is pretty misleading when it comes to its bitmap capabilities. It is probably difficult for a beginner who is unfamiliar with the specifications and seeing familiar PC features like buffer-swapping to fathom how stark the limitations are of what you can do in those modes, given the limited RAM and processor speed.
<br/>
<br/>
Would it be helpful if tutorials taught sprites before backgrounds? That would give learners early exposure to tile-based drawing, to perhaps ease them into background maps more naturally. Then maybe bitmapped backgrounds could become the afterthought.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ScottLininger wrote:</b></span></td> </tr> <tr> <td class="quote">A caveat is a nice idea. However, anyone who *tries* to make an action game in bitmap mode will quickly realize the limitations.</td> </tr></table><span class="postbody">
<br/>
<br/>
If they were realizing them, the issue wouldn't be manifesting itself in the forums as frequently as they seem to. ;-)
<br/>
<br/>
There seems to be a lot of inertia created in a lot of beginners who get started using bitmap modes, plan out their whole RPG or whatever using them, and then show an awful lot of reluctance to be coaxed over to the tile modes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">On that subject... there are plenty of turn-based or text-based games where mode 4 (or even 3) is perfectly okay, so we shouldn't make the blanket statement that tile modes are the only ones worth exploring.</td> </tr></table><span class="postbody">
<br/>
<br/>
That's true. But we can empirically tell that the overwhelming majority of beginners are interested in creating the kinds of games that are best suited for tile modes. (Either that or full-3D games, which is a whole different problem.)
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#71985 - tepples - Wed Feb 15, 2006 9:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">I wonder if tutorials wouldn't be better off talking about the tile modes before the bitmap modes</td> </tr></table><span class="postbody">
<br/>
That's one reason why I suggest exploring with AGBTTY, because most programmers are likely to be familiar with C's stdout and/or conio or curses, which are similar in principle to the tile mode of an NES, Super NES, Game Boy, GBA, or Nintendo DS.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ScottLininger wrote:</b></span></td> </tr> <tr> <td class="quote">Bitmap modes are so much easier to learn. I think they're the natural starting point. It allows beginners to get *something* displaying on their gameboy</td> </tr></table><span class="postbody">
<br/>
So does AGBTTY's Hello World example.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">there are plenty of turn-based or text-based games where mode 4 (or even 3) is perfectly okay</td> </tr></table><span class="postbody">
<br/>
Yet <span style="font-style: italic">Advance Wars</span> still runs in tile mode.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72180 - tonkinfash - Thu Feb 16, 2006 10:35 pm</h4>
    <div class="postbody"><span class="postbody">Of course I'm not claiming to be the sole inventor of the XOR buffer-flip technique. But I did conceive it for myself - independently of any book or tutorial. ;)
<br/>
<br/>
Beforehand, the SCANLINE_CTR was not set to volatile and ran fine. Changing it seems to have made no difference.
<br/>
<br/>
I'm a fairly decent programmer - I used to write DOS games (back in the day), where bitmap modes are much more practical.
<br/>
<br/>
And I realise that caps are reserved for #define macros - that's how they started off but then I realised it would be more practical to have them as variables (but I didn't bother renaming them).
<br/>
<br/>
How do you turn on the optimisations for GCC?
<br/>
<br/>
I will start to look into tile modes for sure, though.</span><span class="gensmall"><br/><br/>Last edited by tonkinfash on Thu Feb 16, 2006 10:57 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#72184 - Cearn - Thu Feb 16, 2006 10:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">Of course I'm not claiming to be the sole inventor of the XOR buffer-flip technique. But I did conceive it for myself - independently of any book or tutorial. ;)</td> </tr></table><span class="postbody">So did I ^_^. But tonc is pretty much the only place which shows it, so I know where you hadn't been and I'm not above a little occasional advertising.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">I'm a fairly decent programmer - I used to write DOS games (back in the day), where bitmap modes are much more practical.</td> </tr></table><span class="postbody">But for older consoles this isn't the case. AFAIK, there aren't even bitmap modes for the NES, SNES and GB. Probably not for the SMS and Genesis either.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">How do you turn on the optimisations for GCC?</td> </tr></table><span class="postbody"> -O<span style="font-style: italic">x</span>, where <span style="font-style: italic">x</span>=1, 2 or 3. Some other useful flags can be found <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/toncmake.htm#sec-flags" target="_blank">here</a> and in the <a class="postlink" href="http://www.gnu.org/manual/manual.html" target="_blank">manuals</a>. Be sure to compile with '-mthumb-interwork -mthumb' too. And if you're not already using it, start using <a class="postlink" href="http://www.devkitpro.org" target="_blank">devkitPro</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72187 - tonkinfash - Thu Feb 16, 2006 11:04 pm</h4>
    <div class="postbody"><span class="postbody">I changed my makefile (DevKitAdvance) to use the -o3 switch and it just gave me 2 pages of errors claiming multiple definitions of various things.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72188 - poslundc - Thu Feb 16, 2006 11:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">I changed my makefile (DevKitAdvance) to use the -o3 switch and it just gave me 2 pages of errors claiming multiple definitions of various things.</td> </tr></table><span class="postbody">
<br/>
<br/>
Capital "O".
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72189 - tonkinfash - Thu Feb 16, 2006 11:11 pm</h4>
    <div class="postbody"><span class="postbody">It is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72190 - Cearn - Thu Feb 16, 2006 11:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">I changed my makefile (DevKitAdvance) ...</td> </tr></table><span class="postbody">
<br/>
Switch to devkitPro. DKA has been dead for, what, 3 years now? devkitPro/devkitArm is the better toolchain. Depending no your download speed, it shouldn't take very long to make the transition.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tonkinfash wrote:</b></span></td> </tr> <tr> <td class="quote">... to use the -o3 switch and it just gave me 2 pages of errors claiming multiple definitions of various things.</td> </tr></table><span class="postbody">
<br/>
beaten by Dan (again *grumble*), but yes, upper case. If that doesn't help you may have bigger problems. You aren't #including files with code or data are you. The multiple definition this is usually a dead giveaway? (Just making sure. Most non-tonc tutorials do this and even you seem to know a thing or two about proper coding procedures, I still have to ask this)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72191 - tonkinfash - Thu Feb 16, 2006 11:21 pm</h4>
    <div class="postbody"><span class="postbody">Oops, I admit I did put a few essential one-line functions in an h file. It's a bad habit but these were functions that were inline and very short so they may as well have been macros (at least that's my flawed rationale ;) ).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72192 - Cearn - Thu Feb 16, 2006 11:31 pm</h4>
    <div class="postbody"><span class="postbody">For inline functions, use 'static inline' or 'extern inline' instead of just 'inline'. At least if you're using C and not C++. <a class="postlink" href="http://gcc.gnu.org/onlinedocs/gcc-4.0.2/gcc/Inline.html#Inline" target="_blank">GCC man: inline</a>. GCC is quirky that way. Of course, that's the GCC 4.0.2 manual; I don't know what DKA's version is, but it might not even be up to 3.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72196 - poslundc - Thu Feb 16, 2006 11:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">beaten by Dan (again *grumble*)</td> </tr></table><span class="postbody">
<br/>
<br/>
Checking forums at just the right moment + brevity = sweet victory ;-)
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
