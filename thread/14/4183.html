<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Setting sprite offscreen flips it vertically... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Setting sprite offscreen flips it vertically...</h2>
<div id="posts">
<div class="post">
    <h4>#27220 - mr_square - Wed Oct 06, 2004 11:25 pm</h4>
    <div class="postbody"><span class="postbody">Hi all. This:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    sprites[0].attribute0 = COLOR_256 | SQUARE | 50;  
<br/>
    sprites[0].attribute1 = SIZE_64 | 0;
<br/>
    sprites[0].attribute2 = 0;</td> </tr></table><span class="postbody">
<br/>
<br/>
displays my sprite as I'd expect it to, but this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    sprites[0].attribute0 = COLOR_256 | SQUARE | 50;  
<br/>
    sprites[0].attribute1 = SIZE_64 | -1;
<br/>
    sprites[0].attribute2 = 0;
<br/>
</td> </tr></table><span class="postbody">
<br/>
(or any negative number in attribute 1's X slot) displays the sprite at the far left of the screen but flipped vertically. Any idea whats going on?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27224 - sajiimori - Thu Oct 07, 2004 12:09 am</h4>
    <div class="postbody"><span class="postbody">As a 16 bit value, -1 is 0xFFFF, so you're setting all the bits in that attribute to 1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27227 - getch - Thu Oct 07, 2004 12:28 am</h4>
    <div class="postbody"><span class="postbody">Dont have reference data with me, but I'm pretty sure for negative x value you put in (512 + x). So to display a sprite at x coordinate -1 you set it to 511.
<br/>
For y values its (256 + y) I think.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27232 - Abscissa - Thu Oct 07, 2004 2:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>getch wrote:</b></span></td> </tr> <tr> <td class="quote">Dont have reference data with me, but I'm pretty sure for negative x value you put in (512 + x). So to display a sprite at x coordinate -1 you set it to 511.
<br/>
For y values its (256 + y) I think.</td> </tr></table><span class="postbody">
<br/>
That's correct.  What you can also do that might make more sense is to mask out the bits you don't want to be setting instead of adding 512 or 256.  So like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">sprites[0].attribute1 = SIZE_64 | (-1 &amp; 0x01FF);
<br/>
//or
<br/>
sprites[0].attribute1 = SIZE_64 | (X_Value &amp; 0x01FF);</td> </tr></table><span class="postbody">
<br/>
<br/>
And for Y just use 0x00FF instead of 0x01FF.  This is because the x value is the low 9 bits, and the y value is the low 8 bits. When you do -1, that's really 0xFFFF, and you need to chop off those extra bits at the high end since those do other things (like vertical flip).
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">Correction: The mask for the low 9 bits of an integer is 0x01FF, not 0x007F. -- tepples</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27233 - Abscissa - Thu Oct 07, 2004 2:21 am</h4>
    <div class="postbody"><span class="postbody">BTW, if by "setting sprite offscreen" you mean *completely* offscreen, then an x value of -1 won't do it, it'll just be partially offscreen (one column of pixels of it).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27243 - mr_square - Thu Oct 07, 2004 11:43 am</h4>
    <div class="postbody"><span class="postbody">Great - thanks guys, got it sorted.
<br/>
<br/>
The effect I was after was a little intro movie whereby my character runs in from offscreen, pulls a pose, and then runs off again. Looks great now :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
