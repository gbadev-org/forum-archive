<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>.a files? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > .a files?</h2>
<div id="posts">
<div class="post">
    <h4>#170798 - atenzor - Wed Oct 21, 2009 2:57 am</h4>
    <div class="postbody"><span class="postbody">Hi, I saw lot of library files with .a files? How to open/edit them?
<br/>
What are they? 
<br/>
<br/>
Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170799 - Dwedit - Wed Oct 21, 2009 3:00 am</h4>
    <div class="postbody"><span class="postbody">They're basically collections of .o files.  You usually don't look at them yourself, usually just letting the compiler link them with your binary for you.  But with the right combination of tools, you could split them to object files, and disassemble the object files with symbols.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170801 - atenzor - Wed Oct 21, 2009 5:13 am</h4>
    <div class="postbody"><span class="postbody">can you tell me what tools to use to manipulate these files. i want to learn. thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170805 - Kyoufu Kawa - Wed Oct 21, 2009 12:53 pm</h4>
    <div class="postbody"><span class="postbody">Stuff like ar, short for archive, I'd guess.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170807 - Dwedit - Wed Oct 21, 2009 1:25 pm</h4>
    <div class="postbody"><span class="postbody">You could either manipulate the .a files, or just grab the source code.
<br/>
<br/>
But anyway yeah...
<br/>
<br/>
"arm-eabi-ar x libgba.a"  will extract all the .o files out of libgba.
<br/>
"arm-eabi-objdump -d console.o &gt; console.s"   will show you the disassembly of console.o.  And of course, the original source code is available from DevKitPro SVN.
<br/>
<br/>
<br/>
Other useful tricks include looking at the MAP file created in the Build directory, and seeing which library code was brought in.  If your executables get really bloated with library code which is never called (such as __eabi_atexit or something like that), you can create blank functions to stop the extra library code from being brought in.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170811 - ritz - Wed Oct 21, 2009 3:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">you can create blank functions to stop the extra library code from being brought in</td> </tr></table><span class="postbody">
<br/>
This is interesting. How would I go about doing this? Just a blank function with the exact same name? I've always hated the extra big stuff that gets put in that I don't use.
<br/>
<br/>
I'd try figuring it out myself first, but I left my flash drive at home (my code and tool chain are on it).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170817 - Miked0801 - Wed Oct 21, 2009 4:26 pm</h4>
    <div class="postbody"><span class="postbody">The linker is pretty good and dead stripping unused functions.  If you find a function in your map file that is unexpected, it's a better idea to trace why that function is there than to overload its symbol away and pray that your game doesn't crash in new and exciting ways.  Floating Point is a good example for me.  When I find large amounts of floating point code suddenly appearing, I know that someone accidently dropped a decimal point into a number somewhere incorrectly and that it needs to be found before other bugs build off it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170821 - atenzor - Wed Oct 21, 2009 5:58 pm</h4>
    <div class="postbody"><span class="postbody">OK thanks guys, I will try and see what I can do. thanks again! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170829 - atenzor - Wed Oct 21, 2009 10:32 pm</h4>
    <div class="postbody"><span class="postbody">OK, I have extracted the .a files and got bunch of .o files. I assume those are object files. Is there a way to extract those? If so, how/what tool?
<br/>
<br/>
Also, how does someone compile a bunch of .o files into a .a file? Is it with command "arm-eabi-ar.exe -r lib<span style="font-style: italic">name</span>.a file1.o file2.o file3.o"?
<br/>
<br/>
Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170830 - kusma - Wed Oct 21, 2009 10:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>atenzor wrote:</b></span></td> </tr> <tr> <td class="quote">I assume those are object files. Is there a way to extract those? If so, how/what tool?</td> </tr></table><span class="postbody">
<br/>
Do you mean disassemble them? In that case you can use objdump, a tool that comes with devkitARM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170832 - atenzor - Wed Oct 21, 2009 10:59 pm</h4>
    <div class="postbody"><span class="postbody">Yes, I was able to disassemble them, but how does someone create .o (object files) anyway? I think I saw something like "gcc <span style="font-style: italic">file</span>.c -o <span style="font-style: italic">file</span>.o", is that the way? thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170834 - Drovor - Thu Oct 22, 2009 1:25 am</h4>
    <div class="postbody"><span class="postbody">yes</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170844 - atenzor - Thu Oct 22, 2009 6:43 pm</h4>
    <div class="postbody"><span class="postbody">OK, so how is a library created? Like it all starts with some files (.h, .c, etc) and some other files and then they are converted to .o (object files).
<br/>
Finally, all object files are grouped into an archive file (.a)? Is that it? Or is there other ways to create a library?
<br/>
<br/>
Also, how is the .a file used with homebrew development, I mean what do you do with the library, how do you use it`s elements to help you?
<br/>
<br/>
Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170846 - kusma - Thu Oct 22, 2009 9:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>atenzor wrote:</b></span></td> </tr> <tr> <td class="quote">OK, so how is a library created? Like it all starts with some files (.h, .c, etc) and some other files and then they are converted to .o (object files).
<br/>
Finally, all object files are grouped into an archive file (.a)? Is that it? Or is there other ways to create a library?</td> </tr></table><span class="postbody">
<br/>
You are pretty much right. Source files are compiled into object files, which are archived together as a library. Typically something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">$ cc -c file1.c -o file1.o
<br/>
$ cc -c file2.c -o file2.o
<br/>
$ ar -r libfoo.a file1.o file2.o
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Also, how is the .a file used with homebrew development, I mean what do you do with the library, how do you use it`s elements to help you?</td> </tr></table><span class="postbody">
<br/>
When you have a library, you can call functions from it if your application links to it. You link to it by passing the archive filename to the linker, just like you do with an object file. Typically somethig like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">$ cc -c myapp.c -o myapp.o
<br/>
$ ld myapp.o libfoo.a -o myapp.elf
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170847 - atenzor - Thu Oct 22, 2009 9:09 pm</h4>
    <div class="postbody"><span class="postbody">Hmm, OK, thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171138 - Azenris - Mon Nov 02, 2009 10:47 pm</h4>
    <div class="postbody"><span class="postbody">Hi, how exactly do I add a library, I changed my arm9 makefile but get the error
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cannot find -myLib</td> </tr></table><span class="postbody">
<br/>
<br/>
I changed
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">LIBS   := -lfat -lnds9</td> </tr></table><span class="postbody">
<br/>
<br/>
to
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">LIBS   := -myLib -lfat -lnds9</td> </tr></table><span class="postbody">
<br/>
<br/>
and
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">LIBDIRS   :=   $(LIBNDS)</td> </tr></table><span class="postbody">
<br/>
<br/>
to
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">LIBDIRS   :=   $(LIBNDS) data/lib</td> </tr></table><span class="postbody">
<br/>
<br/>
Im guessing thats wrong as it wont work :( The folder is with the makefile and goes
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">data/lib/myLib.a
<br/>
data/lib/include/includefileshere.h</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171139 - vuurrobin - Mon Nov 02, 2009 10:51 pm</h4>
    <div class="postbody"><span class="postbody">you need to change the -myLib to -lmyLib (the -l part tells gcc that you want to add a library) and your myLib.a into libmyLib.a.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171140 - Azenris - Mon Nov 02, 2009 11:01 pm</h4>
    <div class="postbody"><span class="postbody">ill say foo instead of myLib since that has lib in the name
<br/>
<br/>
I tried
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
LIBS   := -lfoo -lfat -lnds9
<br/>
LIBDIRS   :=   $(LIBNDS) data/lib
<br/>
</td> </tr></table><span class="postbody">
<br/>
and
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
LIBS   := -llibfoo -lfat -lnds9
<br/>
LIBDIRS   :=   $(LIBNDS) data/lib
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
both with and without renaming the actual file libfoo.a<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171141 - Dwedit - Mon Nov 02, 2009 11:12 pm</h4>
    <div class="postbody"><span class="postbody">You're not mixing C and C++ symbols by any chance, are you?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171142 - Azenris - Mon Nov 02, 2009 11:15 pm</h4>
    <div class="postbody"><span class="postbody">I've written everything in C++ :/
<br/>
<br/>
EDIT:
<br/>
The problem must be with my directory setting, should it just be data/lib or should more be there.
<br/>
<br/>
The library links fine if I just shove it in devkitPro/libnds/lib<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171153 - vuurrobin - Tue Nov 03, 2009 9:39 am</h4>
    <div class="postbody"><span class="postbody">the libdir should point to the directory with the lib and include directory, so just data in this case, not data/lib. 
<br/>
<br/>
<br/>
also, I'm not sure where the data directory is, but you may want to add that to. for DSOL I use $(DEVKITPRO)/DSOL.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171156 - Dwedit - Tue Nov 03, 2009 4:43 pm</h4>
    <div class="postbody"><span class="postbody">Maybe it's the revenge of the base directory being "build" instead of ".".  Maybe you need a ../ before data/lib<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171205 - doatkiem - Fri Nov 06, 2009 7:09 am</h4>
    <div class="postbody"><span class="postbody">Some one can tell me which is better? VisualHAM or Devkitpro?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171209 - kusma - Fri Nov 06, 2009 11:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doatkiem wrote:</b></span></td> </tr> <tr> <td class="quote">Some one can tell me which is better? VisualHAM or Devkitpro?</td> </tr></table><span class="postbody">
<br/>
Depends on what you mean by "better". I prefer devkitPro, as it's software is much more up to date, and the libraries that comes with it is much more to my liking... But VisualHAM is a more complete IDE than what Programmers Notepad (the editor bundled with devkitPro) is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171214 - doatkiem - Fri Nov 06, 2009 3:50 pm</h4>
    <div class="postbody"><span class="postbody">thanks a lot kusma!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171216 - vuurrobin - Fri Nov 06, 2009 11:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doatkiem wrote:</b></span></td> </tr> <tr> <td class="quote">Some one can tell me which is better? VisualHAM or Devkitpro?</td> </tr></table><span class="postbody">
<br/>
Depends on what you mean by "better". I prefer devkitPro, as it's software is much more up to date, and the libraries that comes with it is much more to my liking... But VisualHAM is a more complete IDE than what Programmers Notepad (the editor bundled with devkitPro) is.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I think that most people will just say that devkitPro is better.
<br/>
<br/>
as for IDE, you don't need to use programmers notepad when using devkitPro. you could use MS visual studio or codeblocks or alot of other IDEs.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
