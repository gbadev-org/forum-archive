<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Linker problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Linker problem</h2>
<div id="posts">
<div class="post">
    <h4>#38484 - serf - Mon Mar 28, 2005 11:45 am</h4>
    <div class="postbody"><span class="postbody">Ok, I'm trying to get started on OS X here using libgba and devkitARM.  I've managed to compile and run a quick little program that writes out a bunch of pixels to the framebuffer and loops -- no problem there.  But now I'm trying to call functions in libgba, and every single time I get the following linker error:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
dynamic-oit-vapornet-c-178:~/Projects/devkitARMtest matt$ make
<br/>
/Users/matt/devkitARM_r11_OSX/bin/arm-elf-gcc -mthumb-interwork -c test.c
<br/>
/Users/matt/devkitARM_r11_OSX/bin/arm-elf-gcc -specs=gba.specs -lgba -mthumb-interwork test.o -o test.elf
<br/>
test.o(.text+0x104): In function `main':
<br/>
: undefined reference to `Div'
<br/>
collect2: ld returned 1 exit status
<br/>
make: *** [build] Error 1
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I know that the header files are found correctly:  gcc complains if Div gets an incorrect number of arguments.  I think ld is finding libgba.a OK:  if I change -lgba to -lfake, it complains about not being able to find the library.
<br/>
<br/>
I'm using the precompiled version of devkitARM r11 for OS X from their Sourceforge site, and libgba 20050313 from the same source.  I've tried both the version of libgba.a in the binary distribution and one that I built from source using devkitARM -- neither worked (same error as above).
<br/>
<br/>
Any thoughts on how I might be able to fix this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38577 - wintermute - Tue Mar 29, 2005 7:08 am</h4>
    <div class="postbody"><span class="postbody">where are you putting libgba?
<br/>
<br/>
It sounds like you have another libgba in your lib path somewhere which doesn't have Div defined.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38585 - serf - Tue Mar 29, 2005 9:50 am</h4>
    <div class="postbody"><span class="postbody">find tells me that I have only two files named libgba.a on my hard drive -- one in the directory where I compiled my copy, and one in gcc's library search path (a copy of the one I compiled -- I put it there).  Also, I've tried a few functions from the header files besides Div -- FadeToGrayscale, InitInterrupt, ObjAffineSet -- and none are found, so I doubt I'm simply finding a different version of the library.
<br/>
<br/>
Am I overlooking something?  Or does my problem most likely lie elsewhere?
<br/>
<br/>
Thanks again ... I'm really stumped here.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38684 - serf - Wed Mar 30, 2005 8:33 am</h4>
    <div class="postbody"><span class="postbody">Well, I'm a moron.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">arm-elf-gcc -g -mthumb -mthumb-interwork -Wl -specs=gba.specs -lgba test.o -o test.elf</td> </tr></table><span class="postbody">
<br/>
is very very bad, but
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">arm-elf-gcc -g -mthumb -mthumb-interwork -Wl -specs=gba.specs test.o -lgba -o test.elf</td> </tr></table><span class="postbody">
<br/>
is just fine.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
