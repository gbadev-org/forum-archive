<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>messed text :S - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > messed text :S</h2>
<div id="posts">
<div class="post">
    <h4>#63751 - ghost Leinad - Fri Dec 16, 2005 2:30 am</h4>
    <div class="postbody"><span class="postbody">I have a problem with text too.
<br/>
<br/>
Id managed to make my own text function. It works fine but it has a little problem.
<br/>
<br/>
when I declare a variable like this: const char *texto="smt,smt"; it works fine but if I add const char *texto="smt,smt???"; the text looks like 
<br/>
<br/>
<a class="postlink" href="http://img513.imageshack.us/img513/9409/error0pr.png" target="_blank">http://img513.imageshack.us/img513/9409/error0pr.png</a> (looks nice eh!! lol)
<br/>
<br/>
well, why my tiles are all messed up???
<br/>
<br/>
this happen only when I used symbols like ??()?!. all those variables are declared as const. But now I have like 30 different texts, with diferrent names (should I use just one variable, and keep it changing it on the road???)
<br/>
<br/>
Ah, and before I forgot, how do I handle the " symbol???
<br/>
<br/>
Tanx in advance, hope you can help me<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63755 - tepples - Fri Dec 16, 2005 2:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">Id managed to make my own text function. It works fine but it has a little problem.
<br/>
<br/>
when I declare a variable like this: const char *texto="smt,smt"; it works fine but if I add const char *texto="smt,smt???"; the text looks like 
<br/>
<br/>
<a class="postlink" href="http://img513.imageshack.us/img513/9409/error0pr.png" target="_blank">http://img513.imageshack.us/img513/9409/error0pr.png</a> (looks nice eh!! lol)
<br/>
<br/>
well, why my tiles are all messed up???
<br/>
<br/>
this happen only when I used symbols like ??()?!.</td> </tr></table><span class="postbody">
<br/>
Are you sure those symbols are in your font?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Ah, and before I forgot, how do I handle the " symbol???</td> </tr></table><span class="postbody">
<br/>
"an \"easy\" problem"<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63758 - ghost Leinad - Fri Dec 16, 2005 3:11 am</h4>
    <div class="postbody"><span class="postbody">yes tiles 183 and 184 :P
<br/>
<br/>
in fact I can use those symbols like 3 or 4 times, but when I overused them the screen shows up like that 
<br/>
<br/>
+++++++
<br/>
<br/>
an easy problem??? what do you mean by that???
<br/>
<br/>
I'll check your agbtty :D, but try it to explain it...
<br/>
<br/>
how do I handle letters with accents???when I try to compile a text like "L?pez" says something like ? is not a single letter character.
<br/>
<br/>
I guess I should use some grammar to handle that, or am I wrong??<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63774 - gauauu - Fri Dec 16, 2005 5:47 am</h4>
    <div class="postbody"><span class="postbody">notice his use of the backslash before the quotes.  So if you want to include a quote mark in your string, just use a backslash to escape it:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const char * myString = "this string has \"quotes\" around the word quotes";</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63791 - Cearn - Fri Dec 16, 2005 9:34 am</h4>
    <div class="postbody"><span class="postbody">It might help if we got to see some of the code your using to produce this.
<br/>
<br/>
On accented characters, '?' is part of the ascii/unicode character set, number 243 (although old dos had it as 162). How you want to use that depends on what your code currently looks like.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64049 - ghost Leinad - Sun Dec 18, 2005 11:00 pm</h4>
    <div class="postbody"><span class="postbody">well, look at my variables
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const char *textojugar01="HOLA, MI NOMBRE ES JUGAR BIENVENIDO AL SISTEMA DE ENSEﾑANZA DEL COCITECH, ESPERO QUE TE DIVIERTAS_";
<br/>
const char *textojugar02="EL CUADRADO MAGICO ELEGIRAS SI TU LOGICA QUIERES MEJORAR. HAZ QUE LOS NUMEROS SUMEN IGUAL_";
<br/>
const char *textojugar03="SI TE SIENTES CREATIVO, PRUEBA USAR EL TANGRAMA. USA TU IMAGINACION PARA CREAR MILES DE FIGURAS DIFERENTES_";
<br/>
const char *textojugar04="TORRES DE HANOI_";
<br/>
const char *textojugar05="ACOMODA LA FIGURA EN SU LUGAR_";
<br/>
const char *textojugar06="SUMA LOS NUMEROS_";
<br/>
const char *textojugar07="APAGA LOS BOTONES_";
<br/>
const char *textojugar08="ｿQUIERES CONOCER EL OBJETIVO DEL JUEGO?_";
<br/>
const char *textojugar09="EL OBJETIVO DEL CUADRADO MAGICO ES HACER QUE TODAS LAS SUMAS SEAN IGUALES A 15, SI LO CONSIGUES, GANAS_";
<br/>
const char *textojugar10="FELICIDADES, GANASTE                                DESEAS JUGAR DE NUEVO_";
<br/>
const char *textojugar11="LO SIENTO, PERDISTE                                 DESEAS JUGAR DE NUEVO_";
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
you call the text funcion like this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
textomargen(textojugar11,0,112,0);
<br/>
</td> </tr></table><span class="postbody">
<br/>
as you asked it, here's my code for my text function
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void textomargen(const char *a, int postextox, int postextoy, int numeropallete)
<br/>
{
<br/>
<br/>
   int j=0;
<br/>
   int k=0;
<br/>
   int m=0;
<br/>
   int filas=4;
<br/>
   int longitud=0;
<br/>
   int cuentaletras=0;
<br/>
   int c=0;
<br/>
   int flagletrasdespacio=0;
<br/>
   int pallete=0x0000;
<br/>
   
<br/>
   j=0;
<br/>
   k=0;
<br/>
   m=0;
<br/>
   filas=4;
<br/>
   longitud=0;
<br/>
   cuentaletras=0;
<br/>
   c=0;
<br/>
   flagletrasdespacio=0;
<br/>
   pallete=0x0000;
<br/>
<br/>
   iniciaTypewriter();
<br/>
      
<br/>
   switch(numeropallete)
<br/>
   {
<br/>
      case 0: pallete=PALLETE00;break;
<br/>
      case 1: pallete=PALLETE01;break;
<br/>
      case 2: pallete=PALLETE02;break;
<br/>
      case 3: pallete=PALLETE03;break;
<br/>
      case 4: pallete=PALLETE04;break;
<br/>
      case 5: pallete=PALLETE05;break;
<br/>
      case 6: pallete=PALLETE06;break;
<br/>
      case 7: pallete=PALLETE07;break;
<br/>
      case 8: pallete=PALLETE08;break;
<br/>
      case 9: pallete=PALLETE09;break;
<br/>
      case 10: pallete=PALLETE10;break;
<br/>
      case 11: pallete=PALLETE11;break;
<br/>
      case 12: pallete=PALLETE12;break;
<br/>
      case 13: pallete=PALLETE13;break;
<br/>
      case 14: pallete=PALLETE14;break;
<br/>
      case 15: pallete=PALLETE15;break;
<br/>
<br/>
   }
<br/>
<br/>
   for(m=1;m&lt;5;m++)
<br/>
   {
<br/>
<br/>
      for(i=2;i&lt;28;i++)
<br/>
      {
<br/>
         vramMap1[i+(m*32)]=97 | pallete;
<br/>
      }
<br/>
   }
<br/>
<br/>
   vramMap1[1]=186 | pallete;
<br/>
   vramMap1[28]=190 | pallete;
<br/>
   vramMap1[1+(5*32)]=188 | pallete;
<br/>
   vramMap1[28+(5*32)]=192 | pallete;
<br/>
   for(i=2;i&lt;28;i++)
<br/>
   {
<br/>
      vramMap1[i]=189 | pallete;
<br/>
      vramMap1[i+(5*32)]=193 | pallete;
<br/>
   }
<br/>
   for(i=1;i&lt;5;i++)
<br/>
   {
<br/>
      vramMap1[1+(i*32)]=187 | pallete;
<br/>
      vramMap1[28+(i*32)]=191 | pallete;
<br/>
   }
<br/>
   
<br/>
<br/>
while(a[j]!='_')
<br/>
{
<br/>
   switch(a[j])
<br/>
   {
<br/>
      case ' ':textback[j]=97;break;
<br/>
      case 'A':textback[j]=98;break;
<br/>
      case 'B':textback[j]=99;break;
<br/>
      case 'C':textback[j]=100;break;
<br/>
      case 'D':textback[j]=101;break;
<br/>
      case 'E':textback[j]=102;break;
<br/>
      case 'F':textback[j]=103;break;
<br/>
      case 'G':textback[j]=104;break;
<br/>
      case 'H':textback[j]=105;break;
<br/>
      case 'I':textback[j]=106;break;
<br/>
      case 'J':textback[j]=107;break;
<br/>
      case 'K':textback[j]=108;break;
<br/>
      case 'L':textback[j]=109;break;
<br/>
      case 'M':textback[j]=110;break;
<br/>
      case 'N':textback[j]=111;break;
<br/>
      case 'ﾑ':textback[j]=112;break;
<br/>
      case 'O':textback[j]=113;break;
<br/>
      case 'P':textback[j]=114;break;
<br/>
      case 'Q':textback[j]=115;break;
<br/>
      case 'R':textback[j]=116;break;
<br/>
      case 'S':textback[j]=117;break;
<br/>
      case 'T':textback[j]=118;break;
<br/>
      case 'U':textback[j]=119;break;
<br/>
      case 'V':textback[j]=120;break;
<br/>
      case 'W':textback[j]=121;break;
<br/>
      case 'X':textback[j]=122;break;
<br/>
      case 'Y':textback[j]=123;break;
<br/>
      case 'Z':textback[j]=124;break;
<br/>
      case 'a':textback[j]=125;break;
<br/>
      case 'b':textback[j]=126;break;
<br/>
      case 'c':textback[j]=127;break;
<br/>
      case 'd':textback[j]=128;break;
<br/>
      case 'e':textback[j]=129;break;
<br/>
      case 'f':textback[j]=130;break;
<br/>
      case 'g':textback[j]=131;break;
<br/>
      case 'h':textback[j]=132;break;
<br/>
      case 'i':textback[j]=133;break;
<br/>
      case 'j':textback[j]=134;break;
<br/>
      case 'k':textback[j]=135;break;
<br/>
      case 'l':textback[j]=136;break;
<br/>
      case 'm':textback[j]=137;break;
<br/>
      case 'n':textback[j]=138;break;
<br/>
      case '・:textback[j]=139;break;
<br/>
      case 'o':textback[j]=140;break;
<br/>
      case 'p':textback[j]=141;break;
<br/>
      case 'q':textback[j]=142;break;
<br/>
      case 'r':textback[j]=143;break;
<br/>
      case 's':textback[j]=144;break;
<br/>
      case 't':textback[j]=145;break;
<br/>
      case 'u':textback[j]=146;break;
<br/>
      case 'v':textback[j]=147;break;
<br/>
      case 'w':textback[j]=148;break;
<br/>
      case 'x':textback[j]=149;break;
<br/>
      case 'y':textback[j]=150;break;
<br/>
      case 'z':textback[j]=151;break;
<br/>
      case '0':textback[j]=152;break;
<br/>
      case '1':textback[j]=153;break;
<br/>
      case '2':textback[j]=154;break;
<br/>
      case '3':textback[j]=155;break;
<br/>
      case '4':textback[j]=156;break;
<br/>
      case '5':textback[j]=157;break;
<br/>
      case '6':textback[j]=158;break;
<br/>
      case '7':textback[j]=159;break;
<br/>
      case '8':textback[j]=160;break;
<br/>
      case '9':textback[j]=161;break;
<br/>
      case '!':textback[j]=162;break;
<br/>
      case '｡':textback[j]=163;break;
<br/>
      case '#':textback[j]=166;break;
<br/>
      case '$':textback[j]=167;break;
<br/>
      case '%':textback[j]=168;break;
<br/>
      case '&amp;':textback[j]=169;break;
<br/>
      case '|':textback[j]=170;break;      //simbolo ' (apostrofe)
<br/>
      case '(':textback[j]=171;break;
<br/>
      case ')':textback[j]=172;break;
<br/>
      case '*':textback[j]=173;break;
<br/>
      case '+':textback[j]=174;break;
<br/>
      case ',':textback[j]=175;break;
<br/>
      case '-':textback[j]=176;break;
<br/>
      case '.':textback[j]=177;break;
<br/>
      case '/':textback[j]=178;break;
<br/>
      case ':':textback[j]=179;break;
<br/>
      case ';':textback[j]=180;break;
<br/>
      case '&lt;':textback[j]=181;break;
<br/>
      case '&gt;':textback[j]=182;break;
<br/>
      case '=':textback[j]=183;break;
<br/>
      case '?':textback[j]=184;break;
<br/>
      case 'ｿ':textback[j]=185;break;
<br/>
      case '{':textback[j]=195;break;
<br/>
      case '}':textback[j]=196;break;
<br/>
      case '[':textback[j]=197;break;
<br/>
      case ']':textback[j]=198;break;
<br/>
      case '~':textback[j]=199;break;
<br/>
      default:break;
<br/>
   }
<br/>
   j++;
<br/>
   longitud++;
<br/>
}
<br/>
<br/>
REG_BG0HOFS=256-postextox;
<br/>
REG_BG0VOFS=256-postextoy;
<br/>
<br/>
flagsinglepress=1;
<br/>
<br/>
      for(k=1;k&lt;=filas;k++)
<br/>
      {
<br/>
         for(i=2;i&lt;28;i++)
<br/>
         {
<br/>
            if(flagletrasdespacio==0)
<br/>
            {
<br/>
               while(m&lt;2)
<br/>
               {
<br/>
                  if(keyDown(KEY_A))
<br/>
                  {
<br/>
                     flagsinglepress++;
<br/>
                     if(flagsinglepress&lt;2)
<br/>
                     {
<br/>
                        flagletrasdespacio=1;
<br/>
                     }
<br/>
                  
<br/>
                  }
<br/>
                  else
<br/>
                  {
<br/>
                     flagsinglepress=0;
<br/>
                     flagletrasdespacio=0;
<br/>
                  }
<br/>
                  if(textback[cuentaletras]==0 || textback[cuentaletras]==97)
<br/>
                  {
<br/>
                     m=3;
<br/>
                  }
<br/>
<br/>
                  m++;
<br/>
                  c++;
<br/>
               }
<br/>
            }
<br/>
         
<br/>
            if(cuentaletras&lt;longitud)
<br/>
            {
<br/>
               switch(numeropallete)
<br/>
               {
<br/>
                  case 0: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE00;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 1: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE01;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 2: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE02;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 3: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE03;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 4: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE04;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 5: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE05;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 6: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE06;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 7: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE07;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 8: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE08;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                     Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 9: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE09;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 10: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE10;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 11: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE11;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 12: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE12;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 13: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE13;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 14: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE14;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 15: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE15;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  default: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE00;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
               }
<br/>
               m=0;
<br/>
            }
<br/>
            c=0;
<br/>
<br/>
            if(cuentaletras&gt;=longitud)
<br/>
            {
<br/>
               break;
<br/>
            }
<br/>
<br/>
         }
<br/>
      }
<br/>
<br/>
   
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
look, at that point everithing is right, my tile map for the text is shown like this:
<br/>
<br/>
<br/>
<br/>
<a href="http://img333.imageshack.us/img333/1737/texttiles2ra.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
and the text looks like this:
<br/>
<br/>
<a href="http://img124.imageshack.us/img124/9459/textright8zl.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
I'm using the textojugar01.
<br/>
<br/>
<br/>
as you can see all the weird spanish symbols are in there :P
<br/>
<br/>
I just can't understand WHY when I add some (?!#) symbols, my tile map (And I mean my actual tile map, not just the text) is all scrambled :'(<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64052 - Cearn - Sun Dec 18, 2005 11:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void textomargen(const char *a, int postextox, int postextoy, int numeropallete)
<br/>
{ 
<br/>
<br/>
&lt;snipped a few hundreds of lines of code&gt;
<br/>
<br/>
}</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
I'll try to find out where things go wrong later.
<br/>
<br/>
For now, let me introduce you to a dear friend of mine, the look-up table. The look-up table (LUT for short) is a technique that's been used since, well, forever I recon. As the name implies, it allows you to look things up. A LUT can be used to store pre-calculated numbers for, say, math table, which would otherwise be costly. 
<br/>
It can <span style="font-style: italic">also</span> be used for mappings. for example, when you have a a variable which needs to get a different, non-sequential value  based on a numerical key, you don't use a switch, you use a LUT. Dump the values in an array and simply look them up when you need to. For example, instead of 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   switch(numeropallete)
<br/>
   {
<br/>
      case 0: pallete=PALLETE00;break;
<br/>
      case 1: pallete=PALLETE01;break;
<br/>
      case 2: pallete=PALLETE02;break;
<br/>
      case 3: pallete=PALLETE03;break;
<br/>
      case 4: pallete=PALLETE04;break;
<br/>
      case 5: pallete=PALLETE05;break;
<br/>
      case 6: pallete=PALLETE06;break;
<br/>
      case 7: pallete=PALLETE07;break;
<br/>
      case 8: pallete=PALLETE08;break;
<br/>
      case 9: pallete=PALLETE09;break;
<br/>
      case 10: pallete=PALLETE10;break;
<br/>
      case 11: pallete=PALLETE11;break;
<br/>
      case 12: pallete=PALLETE12;break;
<br/>
      case 13: pallete=PALLETE13;break;
<br/>
      case 14: pallete=PALLETE14;break;
<br/>
      case 15: pallete=PALLETE15;break;
<br/>
   }</td> </tr></table><span class="postbody">
<br/>
<br/>
you have
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int pal_array[16]= { PALLETE00, ... };
<br/>
<br/>
pallete= pal_array[numeropallete];
<br/>
</td> </tr></table><span class="postbody">
<br/>
Which is shorter, faster, and more maintainable. Do the same with the letter mapping. Please. For your own sanity, <span style="font-style: italic">please</span>!
<br/>
<br/>
I'm working on a text-system page for tonc now, and I think I'm doing what you're trying to do here (it's really hard to tell how my function is functionally different, because of the avalanche of code you have). Only my function isn't 330 lines long, it's only 10.
<br/>
<br/>
Oh, also, it's <span style="font-weight: bold">palette</span>. One 'l', two 't's.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64054 - ghost Leinad - Sun Dec 18, 2005 11:34 pm</h4>
    <div class="postbody"><span class="postbody">yes I know is palette :P in fact I discover that on your TONC tutorial :D:D:D but not when I did that function as you can see.
<br/>
<br/>
I will try the LUT, that's for sure. 
<br/>
<br/>
Also I will like to ask you, May if you lend me some codes and some Images from your TONC???
<br/>
<br/>
I'm making a spanish tutorial for the GBA development and I found some of your explanations very useful :D please! Of course, I will give you credit.
<br/>
<br/>
You can find my tutorial here
<br/>
<br/>
<a class="postlink" href="http://www.gbadevmx.wikispaces.com" target="_blank">www.gbadevmx.wikispaces.com</a><br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64079 - thegamefreak0134 - Mon Dec 19, 2005 6:01 am</h4>
    <div class="postbody"><span class="postbody">Wow, I'm getting practice for Spanish III just trying to decipher your code...
<br/>
<br/>
Well, honestly I can't say where the code seems to be messed up. Did you add anything yourself? (you said you borrowed an engine) Like, did you add some symbols to the map, or add some characters to the code?
<br/>
<br/>
The reason I say this is if you did, and the memory locations stuff is being put is close together, you may be having some overflow of one thing into another, which would rightly explain yur wierd tiles. However, if you didnt, I'm totally baffled.
<br/>
<br/>
If you did add stuff, can you go back and add comments to the previous code post to show us where?
<br/>
<br/>
Also, what Mode are you currently using for graphics?<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64085 - gauauu - Mon Dec 19, 2005 8:17 am</h4>
    <div class="postbody"><span class="postbody">Crazy thought:  I don't know how C officially handles these things, but one thing to check might be the text encoding of your source file.  
<br/>
<br/>
Working in China, we ran into a problem once where somebody's text editor was set up to use some slightly-different-than-normal text encoding.  It was mostly normal except for a few weird characters here and there, which really introduced some hard-to-pin-down bugs in our programs.
<br/>
<br/>
Using a hex editor, we could find the culprit...it might be worth adding the weird characters, opening your source file in a hex editor, and make sure they are producing the ascii values you think they should be.
<br/>
<br/>
Of course, there's a very real chance I'm talking nonsense.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64125 - Cearn - Mon Dec 19, 2005 6:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">I will try the LUT, that's for sure. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
Please do. and watch the code shrink down in size. As a general rule, if you're case&amp;pasting, there's often the oppurtunity to use tables or arithmetic instead of pages of case statements.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">Also I will like to ask you, May if you lend me some codes and some Images from your TONC???</td> </tr></table><span class="postbody">I think something got lost in editing in terms of sentence structure, but I reckon the answer would be along the line of "feel free".
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>thegamefreak0134 wrote:</b></span></td> </tr> <tr> <td class="quote">Also, what Mode are you currently using for graphics?</td> </tr></table><span class="postbody">Tiles + palette swapping = regular backgrounds. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gauauu wrote:</b></span></td> </tr> <tr> <td class="quote">Crazy thought: I don't know how C officially handles these things, but one thing to check might be the text encoding of your source file. 
<br/>
<br/>
Using a hex editor, we could find the culprit...it might be worth adding the weird characters, opening your source file in a hex editor, and make sure they are producing the ascii values you think they should be. 
<br/>
<br/>
Of course, there's a very real chance I'm talking nonsense.</td> </tr></table><span class="postbody">
<br/>
As I'm always a little weary of characters not in the 32-128 range, especially since the special characters in the code appear as Japanese in both IE and Firefox, I'd have to agree here: check the character mapping.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64129 - DekuTree64 - Mon Dec 19, 2005 7:14 pm</h4>
    <div class="postbody"><span class="postbody">Also, use
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">default:
<br/>
    ASSERT(0);</td> </tr></table><span class="postbody">
<br/>
in your switch statements, rather than continuing as if nothing was wrong, and possibly using an uninitialized variable. That will let you catch problems like bad text encoding right away.
<br/>
<br/>
The most basic ASSERT macro would be
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define ASSERT(condition) \
<br/>
    if(!(condition)) \
<br/>
    { \
<br/>
        while(1) {} \
<br/>
    }</td> </tr></table><span class="postbody">
<br/>
but preferrably you would want to print some info to VBA's debug output too, like what line of what file the assert was on. You can use the automatic __FILE__ and __LINE__ macros for that. 
<br/>
<br/>
Or if you don't feel like setting up a nice printing system, just write the filename and line number to some specific address in memory, and use VBA's memory viewer to read them :)<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64140 - Quirky - Mon Dec 19, 2005 8:25 pm</h4>
    <div class="postbody"><span class="postbody">How does gcc handle the spanish 'enye' and tilde-accented letters? Those don't fit in 7 bit ASCII and you may find that your switch statements and signed char indices are messing up. A signed char of 0x80 could turn into -1 when cast (or 0xffffffff in hex/debugger speak). I'd check that after you sort out your tables - it may just require an &amp;0xff to properly conver to unsigned int. These non-ascii issues are tricky.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64164 - ghost Leinad - Mon Dec 19, 2005 10:54 pm</h4>
    <div class="postbody"><span class="postbody">I already used the LUTs :D:D:D, my code is now 1/3 long :O:O:O
<br/>
<br/>
<br/>
I let you know how my code look like later today...
<br/>
<br/>
With the using of LUTs  now I can handle the ? ? , letters with accents ????? and the symbols ?? without problem.
<br/>
<br/>
I found that is not a symbol problem in fact I don't know what can be :S
<br/>
<br/>
look if you declare this variable:  </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const char text01="Hello_"</td> </tr></table><span class="postbody">
<br/>
everything is OK
<br/>
<br/>
but if you change the same variable as
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const char text01="Hello _"</td> </tr></table><span class="postbody">
<br/>
<br/>
I just add ONE space at the end of the string! My text is then messed up.
<br/>
<br/>
This not happens always, its just when I use long string, like 30 letters or so.
<br/>
<br/>
I will add the pics for the tiles and maps later, I have to leave now :D<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64186 - ghost Leinad - Tue Dec 20, 2005 2:00 am</h4>
    <div class="postbody"><span class="postbody">ok, now my text function looks like this 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
LUTs
<br/>
<br/>
int paletaausar[]={PALLETE00, PALLETE01, PALLETE02, PALLETE03, PALLETE04, PALLETE05, PALLETE06,
<br/>
         PALLETE07, PALLETE08, PALLETE09, PALLETE10, PALLETE11, PALLETE12, PALLETE13, 
<br/>
         PALLETE14, PALLETE15};
<br/>
<br/>
      //0   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17  18  19
<br/>
int letraausar[]={0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,  //20
<br/>
        0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,97 ,162,0  ,166,167,168,169,170,  //40
<br/>
        171,172,173,174,175,176,177,178,152,153,154,155,156,157,158,159,160,161,179,180,  //60
<br/>
        181,183,182,184,97 ,98 ,99 ,100,101,102,103,104,105,106,107,108,109,110,111,113,  //80
<br/>
        114,115,116,117,118,119,120,121,122,123,124,0  ,0  ,0  ,0  ,0  ,195,125,126,127,  //100
<br/>
        128,129,130,131,132,133,134,135,136,137,138,140,141,142,143,144,145,146,147,148,  //120
<br/>
        149,150,151,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,  //140
<br/>
        0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,  //160
<br/>
        0  ,163,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,  //180
<br/>
        0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,185,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,  //200
<br/>
        0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,112,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,  //220
<br/>
        0  ,0  ,0  ,0  ,0  ,195,0  ,0  ,0  ,0  ,0  ,0  ,0  ,196,0  ,0  ,0  ,197,0  ,0  ,  //240
<br/>
        0  ,139,0  ,198,0  ,0  ,0  ,0  ,0  ,0  ,199,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,}; //260
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
void textomargen(const char *a, int postextox, int postextoy, int numeropallete)
<br/>
{
<br/>
<br/>
   int j=0;
<br/>
   int k=0;
<br/>
   int m=0;
<br/>
   int filas=4;
<br/>
   int longitud=0;
<br/>
   int cuentaletras=0;
<br/>
   int c=0;
<br/>
   int flagletrasdespacio=0;
<br/>
   int pallete=0x0000;
<br/>
   
<br/>
   j=0;
<br/>
   k=0;
<br/>
   m=0;
<br/>
   filas=4;
<br/>
   longitud=0;
<br/>
   cuentaletras=0;
<br/>
   c=0;
<br/>
   flagletrasdespacio=0;
<br/>
   pallete=0x0000;
<br/>
<br/>
   iniciaTypewriter();
<br/>
<br/>
   pallete=paletaausar[numeropallete];
<br/>
      
<br/>
   for(m=1;m&lt;5;m++)
<br/>
   {
<br/>
<br/>
      for(i=2;i&lt;28;i++)
<br/>
      {
<br/>
         vramMap1[i+(m*32)]=97 | pallete;
<br/>
      }
<br/>
   }
<br/>
<br/>
   vramMap1[1]=186 | pallete;
<br/>
   vramMap1[28]=190 | pallete;
<br/>
   vramMap1[1+(5*32)]=188 | pallete;
<br/>
   vramMap1[28+(5*32)]=192 | pallete;
<br/>
   for(i=2;i&lt;28;i++)
<br/>
   {
<br/>
      vramMap1[i]=189 | pallete;
<br/>
      vramMap1[i+(5*32)]=193 | pallete;
<br/>
   }
<br/>
   for(i=1;i&lt;5;i++)
<br/>
   {
<br/>
      vramMap1[1+(i*32)]=187 | pallete;
<br/>
      vramMap1[28+(i*32)]=191 | pallete;
<br/>
   }
<br/>
<br/>
while(a[j]!='_')
<br/>
{
<br/>
   textback[j]=letraausar[a[j]];
<br/>
   j++;
<br/>
   longitud++;
<br/>
}   
<br/>
<br/>
REG_BG0HOFS=256-postextox;
<br/>
REG_BG0VOFS=256-postextoy;
<br/>
<br/>
flagsinglepress=1;
<br/>
<br/>
      for(k=1;k&lt;=filas;k++)
<br/>
      {
<br/>
         for(i=2;i&lt;28;i++)
<br/>
         {
<br/>
            if(flagletrasdespacio==0)
<br/>
            {
<br/>
               while(m&lt;2)
<br/>
               {
<br/>
                  if(keyDown(KEY_A))
<br/>
                  {
<br/>
                     flagsinglepress++;
<br/>
                     if(flagsinglepress&lt;2)
<br/>
                     {
<br/>
                        flagletrasdespacio=1;
<br/>
                     }
<br/>
                  
<br/>
                  }
<br/>
                  else
<br/>
                  {
<br/>
                     flagsinglepress=0;
<br/>
                     flagletrasdespacio=0;
<br/>
                  }
<br/>
                  if(textback[cuentaletras]==0 || textback[cuentaletras]==97)
<br/>
                  {
<br/>
                     m=3;
<br/>
                  }
<br/>
<br/>
                  m++;
<br/>
                  c++;
<br/>
               }
<br/>
            }
<br/>
         
<br/>
            if(cuentaletras&lt;longitud)
<br/>
            {
<br/>
               switch(numeropallete)
<br/>
               {
<br/>
                  case 0: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE00;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 1: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE01;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 2: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE02;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 3: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE03;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 4: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE04;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 5: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE05;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 6: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE06;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 7: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE07;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 8: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE08;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                     Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 9: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE09;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 10: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE10;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 11: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE11;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 12: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE12;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 13: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE13;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 14: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE14;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  case 15: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE15;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
                  default: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE00;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break;
<br/>
               }
<br/>
               m=0;
<br/>
            }
<br/>
            c=0;
<br/>
<br/>
            if(cuentaletras&gt;=longitud)
<br/>
            {
<br/>
               break;
<br/>
            }
<br/>
<br/>
         }
<br/>
      }
<br/>
<br/>
   
<br/>
}
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
still long, but is better :D ..same functionality.
<br/>
<br/>
well, now...I have declared all this text until now:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
const char *texto9="TORRES DE HANOI!!                                   ACOMODA LA FIGURA!!_";    
<br/>
const char *texto3="    CUADRADO MAGICO!!_:";
<br/>
const char *texto4="    CUADRADO MAGICO!!_";
<br/>
const char *texto5="   CUADRADO MAGICO!!_";
<br/>
const char *texto18="    CUADRADO MAGICO!!                                                                                                              MENU_";
<br/>
const char *texto10="    CUADRADO MAGICO!!                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ___";
<br/>
<br/>
const char *texto11="      INSTRUCCIONES                                 USA LAS TECLAS DE DIRECCI-ON PARA SELECCIONAR LA PO-SICION EN LA QUE QUIERAS  EL NUMERO.                                          DESPUES PRESIONA  LA TECLA Z.                                                 EL OBJETIVO DEL JUEGO ES  HACER QUE LAS SUMAS DE LASFILAS, LAS COLUMNAS Y LOS DIAGONALES SEAN SIEMPRE 15                          SI PRESIONAS LA TECLA RE- TROCESO EL JUEGO SE REINI-CIARA___";
<br/>
const char *texto="T A N G R A M A ! !___";
<br/>
const char *texto1="   T A N G R A M A ! !                                                                                                        MENU                                                                                                                                                                                                                                                                                              PUEDES MOVER LA PIEZA SE- LECCIONADA...         _____";
<br/>
const char *texto2="   T A N G R A M A ! !                                                                                                        MENU                                                                                                                                                                                                                                                                                              SELECCIONA LA FIGURA A    MOVER...              ____";
<br/>
<br/>
const char *texto12="      INSTRUCCIONES                                 USA LAS TECLAS DE DIRECCI-ON IZQUIERDA Y DERECHA PA-RA SELECCIONAR LA PIEZA   QUE QUIERAS MOVER.                                  CUANDO HAYAS DECIDIDO ESTOPRESIONA Z PARA PODER MO- VERLA.                                              LA PIEZA SE MUEVE CON LAS TECLAS DE DIRECCION Y CON LA TECLA X PUEDES ROTARLA PARA ASI PODER CREAR  MAS FIGURAS.                  PRESIONA RETROCESO PARA   REINICIAR EL JUEGO___";
<br/>
const char *texto6="    TORRES DE HANOI!!                               MENU                MOV=                                                                                                                                                                                                                                                                                                                              SELECCIONA EL DISCO _";
<br/>
const char *texto7="    TORRES DE HANOI!!                               MENU                MOV=                                                                                                                                                                                                                                                                                                                            SELECCIONA LA POSICION__";
<br/>
const char *texto8="    TORRES DE HANOI!!_";
<br/>
const char *texto13="      INSTRUCCIONES                                 USA LAS TECLAS DE DIRECCI-ON IZQUIERDA Y DERECHA PA-RA SELECCIONAR LA PIEZA   QUE QUIERAS MOVER.                                  CUANDO HAYAS DECIDIDO ESTOPRESIONA Z PARA PODER ELE-GIR LA TORRE A LA QUE DES-SEES MOVERLA. EL OBJETIVO DEL JUEGO ES PASAR TODOS  LOS DISCOS DE UNA TORRE A OTRA, CON LA CONDICION DE NO PONER UN DISCO MAS GRA-NDE ENCIMA DE UNO MAS CHI-CO. PRESIONA RETROCESO PA-RA REINICIAR EL JUEGO.__";
<br/>
const char *texto14="    COLOCA LA FIGURA!!_";
<br/>
const char *texto15="    COLOCA LA FIGURA!!                                                                                                                                                                TIEMPO                    RESTANTE:                                                                                                                                                   GANASTE!!                                           PRESIONA                  RETROCESO_";
<br/>
const char *texto16="    COLOCA LA FIGURA!!                                                                                                                                                                TIEMPO                    RESTANTE:                                                                                                                                                   PERDISTE!!                                          PRESIONA                  RETROCESO_";
<br/>
const char *texto17="    COLOCA LA FIGURA!!                                                                                                                                                                TIEMPO                    RESTANTE:_";
<br/>
const char *textosdn01="TIEMPO                META                                    SCORE                                                                                                                                                                                                                                                             SUMA ACTUAL_";
<br/>
const char *textojugar01="HOLA, MI NOMBRE ES JUGAR BIENVENIDO AL SISTEMA DE ENSEﾑANZA DEL COCITECH, ESPERO QUE TE DIVIERTAS_";
<br/>
const char *textojugar02="EL CUADRADO MAGICO ELEGIRAS SI TU LOGICA QUIERES MEJORAR. HAZ QUE LOS NUMEROS SUMEN IGUAL_";
<br/>
const char *textojugar03="SI TE SIENTES CREATIVO, PRUEBA USAR EL TANGRAMA. USA TU IMAGINACION PARA CREAR MILES DE FIGURAS DIFERENTES_";
<br/>
const char *textojugar04="TORRES DE HANOI_";
<br/>
const char *textojugar05="ACOMODA LA FIGURA EN SU LUGAR_";
<br/>
const char *textojugar06="SUMA LOS NUMEROS_";
<br/>
const char *textojugar07="APAGA LOS BOTONES_";
<br/>
const char *textojugar08=""QUIERES CONOCER EL OBJETIVO DEL JUEGO?_";
<br/>
const char *textojugar09="EL OBJETIVO DEL CUADRADO MAGICO ES HACER QUE TODAS LAS SUMAS SEAN IGUALES A 15, SI LO CONSIGUES, GANAS_";
<br/>
const char *textojugar10="?GANASTE!                                           ?DESEAS JUGAR DE NUEVO?_"; 
<br/>
const char *textojugar11="PERDISTE                       ?DESEAS JUGAR DE NUEVO?_";</td> </tr></table><span class="postbody">
<br/>
<br/>
everything is fine as it :D, the tiles and the text looks like:
<br/>
<br/>
<a href="http://img502.imageshack.us/img502/5618/tilesgood2fv.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
<a href="http://img502.imageshack.us/img502/1446/textgood0wx.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
BUT when I change the last text  to:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const char *textojugar11="PERDISTE                        ?DESEAS JUGAR DE NUEVO?_";</td> </tr></table><span class="postbody">
<br/>
<br/>
as you can see, I just add ONE space to the text, and now the text looks like this: (I mean ALL the text)
<br/>
<br/>
<a href="http://img508.imageshack.us/img508/9141/tilesbad7cq.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
<a href="http://img508.imageshack.us/img508/8284/textbad1ac.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
I really can tell where's the problem :S<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64198 - tepples - Tue Dec 20, 2005 4:41 am</h4>
    <div class="postbody"><span class="postbody">It looks like it could be an alignment error on your font data. Font data, or any other data to be copied directly into VRAM, should always be aligned to a 4-byte (32-bit) boundary. What happens when you add four spaces instead of one? If that fixes it, then you need to fix your font data's alignment.
<br/>
<br/>
If you store your font in ASCII order, then you can remove a lookup table.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64238 - Cearn - Tue Dec 20, 2005 2:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">             switch(numeropallete)
<br/>
               {
<br/>
                  case 0: vramMap1[i+(k*32)]=textback[cuentaletras] | PALLETE00;
<br/>
                     cuentaletras++;
<br/>
                     if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
                     {
<br/>
                        Sonido_TypeWriter();
<br/>
                     };break; 
<br/>
// etc
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
Also superfluous, you can use the same lut as before. In fact, as you already did that once, you can just use that variable. Like I said, if you find yourself case&amp;pasting, you're probably missing something.
<br/>
<br/>
Re: tepples' data alignment suggestion: if you flick between images, it does look like they're all shifted a bit, plus some extra bogosity thrown in. What is the declaration/definition of the font, and how do you copy it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64298 - ghost Leinad - Wed Dec 21, 2005 2:08 am</h4>
    <div class="postbody"><span class="postbody">well, I will compile the code changing the spaces at the last text
<br/>
<br/>
<br/>
with 0 spaces: good
<br/>
with 1 spaces: bad
<br/>
with 2 spaces: bad
<br/>
with 3 spaces: good
<br/>
with 4 spaces: good
<br/>
with 5 spaces: bad
<br/>
with 6 spaces: bad
<br/>
with 7 spaces: good
<br/>
with 8 spaces: good
<br/>
with 9 spaces: bad
<br/>
with 10 spaces: bad
<br/>
<br/>
at this point, I realized that Tepples is right
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">It looks like it could be an alignment error on your font data. Font data, or any other data to be copied directly into VRAM, should always be aligned to a 4-byte (32-bit) boundary.</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">What is the declaration/definition of the font, and how do you copy it?</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know what do you mean by this, but let me show you the C file where's my font
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const unsigned short alfab1Data[3104]=
<br/>
{
<br/>
   0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
   0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
   0x9900, 0x0009, 0x0090, 0x0090, 0x0090, 0x0090, 0x0090, 0x0090, 
<br/>
   0x9990, 0x0099, 0x0090, 0x0090, 0x0090, 0x0090, 0x0000, 0x0000, 
<br/>
   0x9990, 0x0009, 0x0090, 0x0090, 0x0090, 0x0090, 0x9990, 0x0009, 
<br/>
   0x0090, 0x0090, 0x0090, 0x0090, 0x9990, 0x0009, 0x0000, 0x0000, 
<br/>
   0x9900, 0x0009, 0x0090, 0x0090, 0x0090, 0x0000, 0x0090, 0x0000, 
<br/>
   0x0090, 0x0000, 0x0090, 0x0090, 0x9900, 0x0009, 0x0000, 0x0000, 
<br/>
....
<br/>
...
<br/>
...
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I will try exporting the font as a 32 bits array, let's see what happen.
<br/>
<br/>
PD. I finally learn how to quote :D[/quote]<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64300 - ghost Leinad - Wed Dec 21, 2005 2:32 am</h4>
    <div class="postbody"><span class="postbody">:O:O:O well, it's seems to work fine now...(for now, I let you know if something goes wrong again)
<br/>
<br/>
same test:
<br/>
<br/>
with 0 spaces: good 
<br/>
with 1 spaces: good 
<br/>
with 2 spaces: good 
<br/>
with 3 spaces: good 
<br/>
with 4 spaces: good 
<br/>
with 5 spaces: good
<br/>
with 6 spaces: good
<br/>
with 7 spaces: good 
<br/>
with 8 spaces: good 
<br/>
with 9 spaces: good
<br/>
with 10 spaces: good 
<br/>
<br/>
now, Why the problem??? why it has to be a 32-bit aligned font???
<br/>
<br/>
thank you everybody for the help :D:D
<br/>
<br/>
my new question is...how do I handle the " symbol?<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64315 - tepples - Wed Dec 21, 2005 5:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">now, Why the problem??? why it has to be a 32-bit aligned font???</td> </tr></table><span class="postbody">
<br/>
The GBA memory bus is 32 bits wide. When you do a 32-bit-wide copy using DMA or BIOS CpuFastSet, the CPU reads a 32-bit chunk from ROM or EWRAM and then writes a 32-bit chunk to VRAM. The wrinkle is that you only get the "expected" results on a 32-bit read if the address is aligned to 32 bits; if the read address is not aligned to a 32-bit boundary, then invalid data is read each time. Even if Intel and official MIPS have hardware to handle unaligned reads "properly", ARM doesn't.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64329 - keldon - Wed Dec 21, 2005 10:55 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">my new question is...how do I handle the " symbol?</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">char *c = "And Dr Jake Said, \"I'm afraid I only have 10 seconds in which I can ...\"";</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64330 - Cearn - Wed Dec 21, 2005 11:01 am</h4>
    <div class="postbody"><span class="postbody">It's not a matter of bus size, it's inherent to ARM (and other RISC) systems. Loads always happen in 32 bit chunks, aligned to 4-byte boundaries; the lower 2 bits in the address are simply ignored. The word is then rotated to match the alignment of the source address, and upper bits are cut off for types other than ints. Stores just happen in the alignment of the type: words always on 4byte boundaries (last 2 bits ignored), halfwords on 2byte boundaries (last bit ignored).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Something like this
<br/>
// T is a variable type, Tmask the bitmask for that type, Talign the bitmask to align addresses to.
<br/>
<br/>
// memory loads (unsigned):
<br/>
u32 word= *(u32*)(address&amp;~3);    // load word
<br/>
word= ROR( word, (address&amp;3)*8 ); // rotate for alignment
<br/>
T var= word&amp;Tmask;     // zero out bits for non-word types
<br/>
<br/>
// memory stores
<br/>
T *vardst= (T*)(address&amp;~Talign);
<br/>
*vardst= (T)var;
<br/>
</td> </tr></table><span class="postbody">
<br/>
So in this case, what would happen is that the strings are put before the font in memory, and depending on how long the strings are, the font will be on merely halfword boundaries, or if you're lucky on word boundaries as well. If it's non-word aligned and you try word copies ( (u32*)cast + array copy, CpuFastSet, DMA32, memcpy) you get screwed. And since the compiler trust you know what you are doing, it just assumes that's what you wanted and is more than willing to oblige.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote">my new question is...how do I handle the " symbol?</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote wrote:</b></span></td> </tr> <tr> <td class="quote">"an \"easy\" problem"</td> </tr></table><span class="postbody"> :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64388 - ghost Leinad - Wed Dec 21, 2005 10:16 pm</h4>
    <div class="postbody"><span class="postbody">Ok, there you have, my ultimate supreme text function :D
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void textomargen(const char *a, int postextox, int postextoy, int numeropallete)
<br/>
{
<br/>
   int j=0,k=0,m=0,filas=4,longitud=0,cuentaletras=0,c=0,flagletrasdespacio=0,pallete;
<br/>
   
<br/>
   iniciaTypewriter();
<br/>
<br/>
   pallete=paletaausar[numeropallete];
<br/>
      
<br/>
   marcotexto(pallete);
<br/>
   REG_BG0HOFS=256-postextox;
<br/>
   REG_BG0VOFS=256-postextoy;
<br/>
<br/>
   while(a[j]!='_')
<br/>
   {
<br/>
      textback[j]=letraausar[a[j]];
<br/>
      j++;
<br/>
      longitud++;
<br/>
   }   
<br/>
<br/>
   flagsinglepress=1;
<br/>
<br/>
   for(k=1;k&lt;=filas;k++)
<br/>
   {
<br/>
      for(i=2;i&lt;28;i++)
<br/>
      {
<br/>
         if(cuentaletras&lt;longitud)
<br/>
         {
<br/>
            vramMap1[i+(k*32)]=textback[cuentaletras] | pallete;
<br/>
            cuentaletras++;
<br/>
            if(textback[cuentaletras]!=0 &amp;&amp; textback[cuentaletras]!=97)
<br/>
            {
<br/>
               Sonido_TypeWriter();
<br/>
            }
<br/>
            m=0;
<br/>
         }
<br/>
         if(cuentaletras&gt;=longitud)
<br/>
         {
<br/>
            break;
<br/>
         }
<br/>
      }
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
What do you think of it??? :D<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64389 - Cearn - Wed Dec 21, 2005 10:27 pm</h4>
    <div class="postbody"><span class="postbody">From 300+ lines to 42...
<br/>
<br/>
^_^ 
<br/>
<br/>
And you see that it's actually readable this way? I take it you're going to do something with the unused variables later, huh. A number of variables don't do very much at the moment. 
<br/>
<br/>
Just out of curiosity, what <span style="font-style: italic">did</span> you use to copy the font?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64400 - ghost Leinad - Thu Dec 22, 2005 1:02 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">what did you use to copy the font?</td> </tr></table><span class="postbody">
<br/>
<br/>
:D:D:D:D
<br/>
<br/>
I use the almighty Usenti...thanks Cearn, the tool rocks!!!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">A number of variables don't do very much at the moment.</td> </tr></table><span class="postbody">
<br/>
<br/>
I'll check that :D<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64449 - Cearn - Thu Dec 22, 2005 1:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ghost Leinad wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">what did you use to copy the font?</td> </tr></table><span class="postbody">:D:D:D:D
<br/>
I use the almighty Usenti...thanks Cearn, the tool rocks!!!
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
Well yes, I suppose it does ^_^. But I asked about copying, not exporting. memcpy I presume?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64482 - ghost Leinad - Thu Dec 22, 2005 8:19 pm</h4>
    <div class="postbody"><span class="postbody">oh, yes, memcpy(); is just plain easy :D
<br/>
<br/>
is there a better way???<br/>_________________<br/>All human wisdom is summed up in these two words, - 'Wait and hope"
<br/>
****************************************
<br/>
My site <a href="http://www.myth-world.net" target="_blank">www.myth-world.net</a> and <a href="http://www.bmrpg.com" target="_blank">www.bmrpg.com</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64509 - gauauu - Fri Dec 23, 2005 2:37 am</h4>
    <div class="postbody"><span class="postbody">memcpy() works great. 
<br/>
<br/>
For my projects, I often set up a couple simple and generic DMA transfer functions, which will work like memcpy.  A little bit faster in most cases.  
<br/>
<br/>
Sure, you don't want to spend too much time optimizing too early, but to write the function once (or copy/paste it from my last project) is easy enough to have a working "faster-than-memcpy" function.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64538 - Cearn - Fri Dec 23, 2005 10:34 am</h4>
    <div class="postbody"><span class="postbody">memcpy() does work great, it's easy to work with and fairly quick too. <span style="font-weight: bold">Except</span> when the copy-count is too small or when source or destination are not word aligned. In those cases it'll copy by the byte, and we all know what that means for things like VRAM.
<br/>
<br/>
There are 'better' ways, yes. I have my own memcpy16 and memcpy32 for these things (basically CpuFastSet with some extras for the head/tail end), which are alignment safe and twice as fast too. But usually things like these can be kept for when you're really optimising.
<br/>
<br/>
You could also try to just make sure your data is alignment safe, and there are plenty of ways of doing that. 
<br/>
One method would be to export as u32, which is guaranteed word aligned. 
<br/>
Another would be to add <span style="font-style: italic">__attribute__(( aligned(4) ))</span> to the definition (or declaration? Maybe both, I dunno), that would ensure alignment. 
<br/>
A third method would be to have separate files for all the data, since files are automatically word aligned. Unless you #include them, of course.
<br/>
Finally, you could use assembly or a file system like GBFS, which don't need language extensions to get data aligned. It's easier on compilers too, as you don't actually have to compile them.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
