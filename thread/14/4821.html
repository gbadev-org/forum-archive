<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Levels - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Levels</h2>
<div id="posts">
<div class="post">
    <h4>#34014 - wiz - Wed Jan 12, 2005 7:12 pm</h4>
    <div class="postbody"><span class="postbody">Hi folks,
<br/>
<br/>
Lets say we have levels as source files and its pretty simple:
<br/>
<br/>
level1.c
<br/>
#define LEVEL_TIME 60
<br/>
const u8 LEVEL_TILES[] = { 0, 0, 0, 0, 1, 2, 1, 2, 3 ......
<br/>
<br/>
level2.c
<br/>
.?..
<br/>
<br/>
What would be a good method of this?  It would not be possible to define LEVEL_TIME again for level2, and the array couldnt have the same name in each file.
<br/>
<br/>
Currently I can only think of having:
<br/>
<br/>
#define LEVEL1_TIME 60
<br/>
<br/>
...
<br/>
<br/>
if (LEVEL == LEVEL1) LEVEL_TIME = LEVEL1_TIME;
<br/>
<br/>
but if a game had 100 levels that would be horrid!!
<br/>
<br/>
Suggestions?
<br/>
<br/>
Thank you very much!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34016 - Celeryface - Wed Jan 12, 2005 7:26 pm</h4>
    <div class="postbody"><span class="postbody">Hmm, you could have an array of level times in your source file, ordered sequentially from 0 - last level.
<br/>
<br/>
const int levelTimes[] = { 60, 100, 120, ... };
<br/>
<br/>
:)
<br/>
<br/>
OR 
<br/>
<br/>
If your level times are always increasing you could do it this way, you could have a variable in your game that holds the time and calculates it per level.
<br/>
<br/>
#define LEVEL_TIME 60 (in your level source file)
<br/>
<br/>
LevelTime = LEVEL_TIME + (10*currentLevel); (in your game source file)</span><span class="gensmall"><br/><br/>Last edited by Celeryface on Wed Jan 12, 2005 7:29 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#34017 - wiz - Wed Jan 12, 2005 7:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi thanks for your reply,
<br/>
<br/>
I did think of that but then the same question goes for the const level array:
<br/>
<br/>
const u8 LEVEL1_TILES[] = { 0, 0, 0, 0, 1, 2, 1, 2, 3 ...... 
<br/>
const u8 LEVEL2_TILES[] = { 2, 2, 2, 2, 1, 2, 1, 2, 3 ...... 
<br/>
const u8 LEVEL3_TILES[] = { 3, 3, 3, 3, 1, 2, 1, 2, 3 ...... 
<br/>
.. +100 levels
<br/>
<br/>
How do you access the array you want at runtime? with if statements?  ouch</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34018 - Celeryface - Wed Jan 12, 2005 7:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wiz wrote:</b></span></td> </tr> <tr> <td class="quote">Hi thanks for your reply,
<br/>
<br/>
I did think of that but then the same question goes for the const level array:
<br/>
<br/>
const u8 LEVEL1_TILES[] = { 0, 0, 0, 0, 1, 2, 1, 2, 3 ...... 
<br/>
const u8 LEVEL2_TILES[] = { 2, 2, 2, 2, 1, 2, 1, 2, 3 ...... 
<br/>
const u8 LEVEL3_TILES[] = { 3, 3, 3, 3, 1, 2, 1, 2, 3 ...... 
<br/>
.. +100 levels
<br/>
<br/>
How do you access the array you want at runtime? with if statements?  ouch</td> </tr></table><span class="postbody">
<br/>
<br/>
I edited the post again. Does the other suggestion help? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34019 - wiz - Wed Jan 12, 2005 7:36 pm</h4>
    <div class="postbody"><span class="postbody">Hi again :)
<br/>
<br/>
Not all levels would be increased time.  Lets forget about the level-time, that was because I was thinking of #defines as well.  
<br/>
<br/>
The 'tile array' for each level could be quite large so its the same question with this, how can you access the one you want?  I'm guessing that you DONT name the arrays as their level number:  "const u8 LEVEL1_TILES[] = { ........"  but some other magic way ;)
<br/>
<br/>
Hope you understand what I mean,
<br/>
<br/>
Cheers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34022 - Miked0801 - Wed Jan 12, 2005 8:06 pm</h4>
    <div class="postbody"><span class="postbody">Create an array named per level as you suggest (lvl1array[]={}; lvl2array[]={};...) then create a second table that contains pointers to the first:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const LVL_ARRAY_TYPE *masterTab[] = {lvl1array, lvl2array, ...};
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Access the master tab to get your data.  The advantage of this is that all levels need not be the same size.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34024 - Zhila - Wed Jan 12, 2005 8:12 pm</h4>
    <div class="postbody"><span class="postbody">I'm not much into C++, but, I assume you could always to a 2 dimensional array, instead of 100 single dimensional arrays.  I'm not exactly sure how the syntax works itself, but I'd assume something similar to this would work:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
const u8 LEVEL_TILES[100,] = { { 0, 0, 0, 0, 1, 2, 1, 2, 3, ... },
<br/>
                               {2, 2, 2, 2, 1, 2, 1, 2, 3, ...},
<br/>
                               {3, 3, 3, 3, 1, 2, 1, 2, 3, ...),
<br/>
                               +100 levels
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Current high scores on Super Mario 64 DS:
<br/>
Shell Smash - 50230
<br/>
Wanted - 140</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34030 - ScottLininger - Wed Jan 12, 2005 9:44 pm</h4>
    <div class="postbody"><span class="postbody">Pointers are definitely the answer. I like using structs or organize everything about the level...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// First dump out your variable-length data
<br/>
<br/>
const u8 level0Map[] = { 1, 2, 3 ... };
<br/>
const u8 level1Map[] = { 1, 2, 3 ... };
<br/>
<br/>
<br/>
// then define a struct for your maps
<br/>
<br/>
typedef struct structLevelData {  
<br/>
    u16 tileWidth;
<br/>
    u16 tileHeight;
<br/>
    u16 timeLimit;
<br/>
    u8* mapData;   // the star makes it a pointer
<br/>
} typeLevelData;
<br/>
<br/>
<br/>
// then you can create an array of Levels, and
<br/>
// assign your pointers to the map data above
<br/>
<br/>
const typeLevelData allLevels[2] = {
<br/>
    { 
<br/>
        50,                // tileWidth
<br/>
        80,                // tileHeight
<br/>
        120,                // timeLimit
<br/>
        level0Map    // pointer to your map Data      
<br/>
    } , {    
<br/>
        99,                // tileWidth
<br/>
        52                // tileHeight
<br/>
        60,                // timeLimit
<br/>
        level1Map    // pointer to your map Data
<br/>
    } 
<br/>
}; 
<br/>
<br/>
// now you can get at your data using the following syntax
<br/>
<br/>
// to get at the timeLimit of your first map
<br/>
timeValue = allLevels[0].timeLimit;
<br/>
<br/>
// to get at the 56th element of mapData on your second map
<br/>
tileValue = allLevels[1].mapData[55];
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That's the way many people do it, because it makes the end syntax so clean. It's a little bit of work to set up properly, but once that's out of the way, you're golden.
<br/>
<br/>
This is essentially the same solution that Mike suggested above, but the extra struct allows you to track other stuff about your levels all in one place.
<br/>
<br/>
Cheers,
<br/>
<br/>
-Scott</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34044 - sgeos - Wed Jan 12, 2005 11:02 pm</h4>
    <div class="postbody"><span class="postbody">You might want to write a tool that holds stage data in a custom format and can spit out the C/ASM code for you.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34048 - wiz - Wed Jan 12, 2005 11:41 pm</h4>
    <div class="postbody"><span class="postbody">Thats brilliant!
<br/>
<br/>
Thanks everyone, once again.  I had a feeling it had something to do with pointers.
<br/>
<br/>
:)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34056 - dagamer34 - Thu Jan 13, 2005 3:24 am</h4>
    <div class="postbody"><span class="postbody">Working with 100 levels is a daunting task in the first place! :D<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34060 - sgeos - Thu Jan 13, 2005 3:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">Working with 100 levels is a daunting task in the first place! :D</td> </tr></table><span class="postbody">
<br/>
Hence the tool.  Creating stages in source code is OK if you only need to make a couple, but once you hit the double digits an encoder is called for- even if it is just a simple curses program.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
