<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Background Priorities - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Background Priorities</h2>
<div id="posts">
<div class="post">
    <h4>#9572 - yaustar - Sat Aug 09, 2003 5:15 am</h4>
    <div class="postbody"><span class="postbody">I have an idea how to set them but am new to the whole 'bits' and 'bit shifting'.
<br/>
<br/>
would I define them as:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define BG_PRIORITY(n)  ((n)&lt;&lt;1)
<br/>
</td> </tr></table><span class="postbody">
<br/>
and add it to:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
temp = bg-&gt;size | (bg-&gt;charBaseBlock&lt;&lt;CHAR_SHIFT) | (bg-&gt;screenBaseBlock&lt;&lt;SCREEN_SHIFT)
<br/>
      | bg-&gt;colorMode | bg-&gt;mosaic | bg-&gt;wraparound | bg-&gt;bg_priority;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
While on the topic of backgrounds, do text backgrounds wraparound no matter what?
<br/>
<br/>
Thanks for your time[/code]<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9573 - tepples - Sat Aug 09, 2003 5:32 am</h4>
    <div class="postbody"><span class="postbody">Close.  You're supposed to shift left by the number of the LOWEST order bit in the field.  In the case of BG priority, the lowest order bit is bit 0, so</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define BG_PRIORITY(n) ((n) &lt;&lt; 0)</td> </tr></table><span class="postbody">
<br/>
A non-trivial example might be sprite priority, which occupies bits 11 and 10 of a sprite's attribute 2.</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define OAM_PRIORITY(n) ((n) &lt;&lt; 10)</td> </tr></table><span class="postbody">
<br/>
And yes, text backgrounds always wrap.  You can make a text background not wrap by setting a window and telling the background to draw only within the window.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9588 - yaustar - Sat Aug 09, 2003 3:19 pm</h4>
    <div class="postbody"><span class="postbody">thanks, that explains a lot<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9600 - yaustar - Sun Aug 10, 2003 2:49 am</h4>
    <div class="postbody"><span class="postbody">how would I change the priority on the fly, i.e. after initialisation.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9616 - niltsair - Sun Aug 10, 2003 11:26 pm</h4>
    <div class="postbody"><span class="postbody">You retrieve the old 16bits value with a mask, leaving out the 2 bits concerning priority. You then 'or' this value with your new shifted priority value.
<br/>
<br/>
Say priority are bit 3&amp;4 (I don't remember them offhand)
<br/>
<br/>
*bgRegValX = ( bgRegValX &amp; 0xFFE7) | ( newPrioVal &lt;&lt; 3);
<br/>
<br/>
(1111 1111 1110 0111 = 0xFFE7)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22531 - jhinders - Wed Jun 23, 2004 8:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
And yes, text backgrounds always wrap.  You can make a text background not wrap by setting a window and telling the background to draw only within the window.</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
how exactly would you set a window and tell the background to only draw within it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22535 - Miked0801 - Wed Jun 23, 2004 9:23 pm</h4>
    <div class="postbody"><span class="postbody">No text backgrounds do not always wrap.  There is a bit you set in the BG control register that tells it to wrap or fill 0 color.  I don't have it handy, but could look it up if needed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22536 - poslundc - Wed Jun 23, 2004 9:52 pm</h4>
    <div class="postbody"><span class="postbody">I'm fairly positive that bit only does anything for rotation backgrounds.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22537 - jhinders - Wed Jun 23, 2004 9:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">No text backgrounds do not always wrap.  There is a bit you set in the BG control register that tells it to wrap or fill 0 color.  I don't have it handy, but could look it up if needed.</td> </tr></table><span class="postbody">
<br/>
<br/>
according to the documentation i have you can't set that bit for BG0 and BG1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22538 - Miked0801 - Wed Jun 23, 2004 11:38 pm</h4>
    <div class="postbody"><span class="postbody">Ok, strange - our engine is always playing with that bit.  I'll have to go in and see if it is just being ignored or whatever on our side.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#22541 - tepples - Thu Jun 24, 2004 12:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jhinders wrote:</b></span></td> </tr> <tr> <td class="quote">how exactly would you set a window and tell the background to only draw within it?</td> </tr></table><span class="postbody">
<br/>
Peruse <a class="postlink" href="http://pinocchio.jk0.org/gbatek/#lcdiowindowfeature" target="_blank">this</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
