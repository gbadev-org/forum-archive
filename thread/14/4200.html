<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to get at a background's map contents? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > How to get at a background's map contents?</h2>
<div id="posts">
<div class="post">
    <h4>#27359 - mr_square - Mon Oct 11, 2004 1:36 pm</h4>
    <div class="postbody"><span class="postbody">My knowledge of pointers is a bit shakey, so bear with me :)
<br/>
<br/>
In my bg.h file I have this:
<br/>
<br/>
#define ScreenBaseBlock(n) (((n)*0x800)+0x6000000)
<br/>
<br/>
which is where the map data for the background is stored, right? Say my background 512x512 background is store at screenblock 28 - how do I get the contents of that memory address? Would this work: 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 blah;
<br/>
blah = &amp;ScreenBaseBlock(28);</td> </tr></table><span class="postbody">
<br/>
<br/>
? And how would I get at an offset into that area of memory?
<br/>
<br/>
The reason for all this is that I'm toying around with collision detection at the moment and need to get at the map contents of my background at a particular location.
<br/>
<br/>
thanks :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27363 - yaustar - Mon Oct 11, 2004 4:04 pm</h4>
    <div class="postbody"><span class="postbody">Unless you map data is created during runtime, wouldnt it be easier to get the information from the original map data rather then the memory?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27369 - getch - Mon Oct 11, 2004 6:52 pm</h4>
    <div class="postbody"><span class="postbody">[quote="mr_square"]
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 blah;
<br/>
blah = &amp;ScreenBaseBlock(28);</td> </tr></table><span class="postbody">
<br/>
[quote]
<br/>
<br/>
Almost.
<br/>
Try:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16* blah;
<br/>
blah = ScreenBaseBlock(28);</td> </tr></table><span class="postbody"><br/>_________________<br/>-pb</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27371 - keldon - Mon Oct 11, 2004 7:25 pm</h4>
    <div class="postbody"><span class="postbody">Basically what getch has changed is that blah should be a pointer to store the address ScreenBaseBlock. When you write &amp;value, you are returning the address of value; only ScreenBaseBlock is not a variable - and even if it was a pointer &amp;ScreenBaseBlock would return the address of the pointer, not the address pointed to by the pointer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27376 - sgeos - Mon Oct 11, 2004 9:05 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">The Pointer Story Chapter One- Where does x live?</span>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int x = 7;
<br/>
int y = 12345;</td> </tr></table><span class="postbody">
<br/>
<br/>
x is an integer.  It contains the number 7.  x exists in the physical memory location 0x020000F4.  y is an integer.  It contains the number 12345.  It exists at the physical memory location 0x020000F8.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int *x_ptr = &amp;x;</td> </tr></table><span class="postbody">
<br/>
<br/>
x_ptr is a pointer.  It contains 0x020000F4.  This is the address of x.  x_ptr has an address of 0x020000F8.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">x_ptr = &amp;y;</td> </tr></table><span class="postbody">
<br/>
<br/>
x_ptr now contains 0x020000F8.  This is the address of y.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">*x_ptr = x;</td> </tr></table><span class="postbody">
<br/>
<br/>
*x_ptr is the value stored at the location of x_ptr.  The variable y lives at 0x020000F8.  It has a value of 12345.  We just changed that value to the value of x.  y now equals x.  We used a poorly named pointer to get the job done. =P
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int   x =      /* variable */
<br/>
      7;   /* constant */
<br/>
int *   x_ptr =      /* pointer */
<br/>
      &amp;x;   /* address of variable */
<br/>
*x_ptr =      /* data at address */
<br/>
      12345;   /* constant */</td> </tr></table><span class="postbody">
<br/>
<br/>
All pointers hold memory addresses.  The only difference between a pointer to int and a pointer to float and a pointer to anything else is how they try to interpret the data stored at the address they contain.  A void pointer just contains an address.  There is no way to interpret the data at that address.
<br/>
<br/>
-Brendan</span><span class="gensmall"><br/><br/>Last edited by sgeos on Mon Oct 11, 2004 9:10 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#27377 - sajiimori - Mon Oct 11, 2004 9:07 pm</h4>
    <div class="postbody"><span class="postbody">Hey, don't confuse people. :P  You declared your "pointer" as a regular integer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27378 - sgeos - Mon Oct 11, 2004 9:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Hey, don't confuse people. :P  You declared your "pointer" as a regular integer.</td> </tr></table><span class="postbody">
<br/>
I hate it when I do that.  Once last night, once today... =P  Thanks for catching my mistake.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
