<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mode 4 graphics - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Mode 4 graphics</h2>
<div id="posts">
<div class="post">
    <h4>#29656 - ymalik - Tue Nov 23, 2004 2:40 pm</h4>
    <div class="postbody"><span class="postbody">Can someone explain to me how mode 4 works? I don't understand this thing about packing two pixels into one pixel.
<br/>
<br/>
Thanks,
<br/>
Yasir</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29657 - poslundc - Tue Nov 23, 2004 2:59 pm</h4>
    <div class="postbody"><span class="postbody">It's not packing two pixels into one pixel; it's two pixels into 16 bits. This is because the graphics hardware only writes 16 bits at a time, so if you attempt to access the video buffer with a u8 pointer (which is fine for other areas of memory) you may get the wrong result. Since a pixel in Mode 4 is 8 bits, it's necessary to write two pixels at a time (with a u16 pointer) in order to conform with this restriction.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29658 - ymalik - Tue Nov 23, 2004 3:08 pm</h4>
    <div class="postbody"><span class="postbody">Each pixel in mode 4 is 8 bits, but it takes the same amount of space on the screen as a mode 3 pixel, right?  And where does the palette fit in?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29660 - Wriggler - Tue Nov 23, 2004 3:34 pm</h4>
    <div class="postbody"><span class="postbody">Here's the rundown (as it confused me first of all too!)
<br/>
<br/>
Mode 3 has 16 bits representing one pixel. This is because you specify the colour out of a possible 65000, so you need lots of room to store it.
<br/>
<br/>
Got that? Mode 3=16 bits per pixel.
<br/>
<br/>
Mode 4 is paletted, so you only need to store numbers from 0-256 for each pixel. Therefore you only need 8 bits per pixel.
<br/>
<br/>
Mode 4=8 bits per pixel.
<br/>
<br/>
However, the processor inside the GBA can only write at 16bits at a time. This is fine for mode3, as you can just write one pixel each loop and everyone is happy.
<br/>
<br/>
However, for Mode 4, you can't just write 8 bits (or one pixel) at a time. You've gotta write 16. So therefore, you have to effectively write 2 pixels at a time. Get it?
<br/>
<br/>
Hope this helps,
<br/>
<br/>
Ben</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29662 - poslundc - Tue Nov 23, 2004 3:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ymalik wrote:</b></span></td> </tr> <tr> <td class="quote">Each pixel in mode 4 is 8 bits, but it takes the same amount of space on the screen as a mode 3 pixel, right?</td> </tr></table><span class="postbody">
<br/>
<br/>
Right. Both modes operate in 240 pixels horizontal by 160 pixels vertical.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And where does the palette fit in?</td> </tr></table><span class="postbody">
<br/>
<br/>
The palette matches the pixel value up to what colour to display. 8 bits = 256 possible values; for each of those values you can tell the GBA what 15-bit colour to display when it encounters that value. This information must be stored in the palette in order for the GBA to know what the pixel values "5, 43, 200, 87" etc. represent.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29663 - ymalik - Tue Nov 23, 2004 3:48 pm</h4>
    <div class="postbody"><span class="postbody">Ok, that helped a lot.  Thanks.  But why isn't there a palettle in mode 3?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29664 - ymalik - Tue Nov 23, 2004 3:58 pm</h4>
    <div class="postbody"><span class="postbody">Thanks Dan and Ben for your help.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
The palette matches the pixel value up to what colour to display. 8 bits = 256 possible values; for each of those values you can tell the GBA what 15-bit colour to display when it encounters that value. This information must be stored in the palette in order for the GBA to know what the pixel values "5, 43, 200, 87" etc. represent.
<br/>
<br/>
Dan.</td> </tr></table><span class="postbody">
<br/>
<br/>
So each value in the 256 array can hold a 16 bit color value?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29667 - poslundc - Tue Nov 23, 2004 4:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ymalik wrote:</b></span></td> </tr> <tr> <td class="quote">Ok, that helped a lot.  Thanks.  But why isn't there a palettle in mode 3?</td> </tr></table><span class="postbody">
<br/>
<br/>
Because each pixel takes 16 bits instead of 8, which is enough to store the red, green and blue colour components. Unless you think it's sensible to set up and keep track of a palette of over 30,000 colours.
<br/>
<br/>
(The Mode 3 technique is known as <span style="font-style: italic">direct</span> colour, because the pixel values directly contain the description of the colour to be displayed. Mode 4 is <span style="font-style: italic">indexed</span> colour, because the pixel values contain an index into a table (aka palette) that must be used to determine what colour is displayed.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">So each value in the 256 array can hold a 16 bit color value?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes. (It's technically 15-bit, with an extra wasted bit to keep things even.)
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29669 - ymalik - Tue Nov 23, 2004 4:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">Yes. (It's technically 15-bit, with an extra wasted bit to keep things even.)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for all your help, but I'm still kind of confused.  Since each pixel in mode 3 is 8 bits, why would the palette store 16 bit values?
<br/>
<br/>
Thanks,
<br/>
Yasir</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29670 - poslundc - Tue Nov 23, 2004 4:51 pm</h4>
    <div class="postbody"><span class="postbody">Colours are 16 bits.
<br/>
<br/>
In order to know what colour to display in a pixel on the screen, the GBA needs a 16-bit number telling it how much red, green and blue to use.
<br/>
<br/>
In Mode 3 these numbers are stored, one 16-bit number per pixel, in a 240x160 array that covers the entire screen.
<br/>
<br/>
In Mode 4 these 16-bit numbers are stored in a palette that is 256 entries long, and the screen is then represented by a 240x160 array of numbers (ranging from 0 to 255) that index into this palette.
<br/>
<br/>
I don't know how to make it any simpler than that.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29671 - ymalik - Tue Nov 23, 2004 4:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">In Mode 4 these 16-bit numbers are stored in a palette that is 256 entries long, and the screen is then represented by a 240x160 array of numbers (ranging from 0 to 255) that index into this palette.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Ohhhh.  Now that cleared everything up.  Thank you very much.
<br/>
<br/>
Yasir</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
