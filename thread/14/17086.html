<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Achievements - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Achievements</h2>
<div id="posts">
<div class="post">
    <h4>#172299 - Azenris - Fri Jan 29, 2010 4:36 pm</h4>
    <div class="postbody"><span class="postbody">I wanted to create an achievement system and wondering whats a good way to go
<br/>
about it. I was thinking of something like
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class CMedal
<br/>
{
<br/>
   // func: Virtual Update(const CEvent &amp;event) = 0;
<br/>
<br/>
   // var: name
<br/>
   // var: description
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class CMedal_1 : public CMedal
<br/>
{
<br/>
   CMedal_1 () : CMedal("Shopoholic", "Visit the shop 5 times") { }
<br/>
<br/>
   // func: Update(const CEvent &amp;event)
<br/>
       // check for 5 entires into the shop
<br/>
<br/>
   // vars: any specific counters to this medal
<br/>
   // eg:    count events EVNT_ENTERED_SHOP
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class CMedal_2 : public CMedal
<br/>
{
<br/>
   CMedal_2 () : CMedal("Bruised", "Take a total of 1000 damage in a game") { }
<br/>
<br/>
   // func: Update(const CEvent &amp;event)
<br/>
       // check for 1000 damage total taken
<br/>
       // check for end of game (EVNT_GAME_FINISHED), clear damage var 
<br/>
<br/>
   // vars: any specific counters to this medal
<br/>
   // eg:    count damage taken
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void Init_Medals(void)
<br/>
{
<br/>
   medalList.push_back(new CMedal_1);
<br/>
   medalList.push_back(new CMedal_2);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
and then within the event system whenever an event is called
<br/>
loop the medals passing the event as an arguement. 
<br/>
<br/>
Also I was thinking of having a seperate list of actively watched medals, only those would be called.
<br/>
For example have a medal type MEDAL_TYPE_OUTOFBATTLE, all those types of medals would be
<br/>
loaded when out of battle and the rest ignored. This would also allow me to not bother calling
<br/>
already completed medals.
<br/>
<br/>
I dunno does this sound OK, what other possibilies could I explore for an achievement system?<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172302 - Drovor - Fri Jan 29, 2010 5:19 pm</h4>
    <div class="postbody"><span class="postbody">Your approach looks like it would work fine to me, it implies your already keeping a bunch of statistics.  If you are it makes sense to use them.
<br/>
<br/>
Another method that might fit nicely is the Observer pattern.  Have each medal observe whatever is in charge of what the medal is for (i.e. Medal1 observes the shop class, Medal2 observes the player)
<br/>
<br/>
Then each medal can keep tabs of its specific criteria, such as Medal2 resetting at the beginning of a level and being unlocked at the end.
<br/>
<br/>
This might allow for more granularity, like if you wanted to have a medal for killing 10 enemies in 10 seconds, you might not want to add timer handling to the stats class but it would be trivial to add to a medal class that receives combat events.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172311 - sgeos - Sat Jan 30, 2010 7:50 am</h4>
    <div class="postbody"><span class="postbody">I'd have a statistical tracking container that takes care of the updates, and have the medals poll that as necessary.  This is neither here nor there.
<br/>
<br/>
FYI, you can do neat things with dynamic names and descriptions.  For example, you could have a "Pacifist" medal morph as you kill enemies.
<br/>
In pseudocode (there are better ways to do this):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">message name()
<br/>
{
<br/>
  int kills = statistics.getKills();
<br/>
<br/>
  if (kills == 0)
<br/>
    return MSG_PACIFIST;
<br/>
  else if (kills == 1)
<br/>
    return MSG_FIRST_KILL;
<br/>
  else if (kills &lt; 5)
<br/>
    return MSG_SELF_DEFENDER;
<br/>
  else if (kills &lt; 100)
<br/>
    return MSG_ATTACKER;
<br/>
  // else (100 &lt;= kills)
<br/>
    return MSG_VETERAN;
<br/>
}
<br/>
<br/>
message description()
<br/>
{
<br/>
  // Will read "Killed 45 enemies.", if 45 enemies have been killed.
<br/>
  return MSG_KILLED_X_ENEMIES;
<br/>
}
<br/>
<br/>
// For event scripting
<br/>
bool isPacifist()
<br/>
{
<br/>
  int kills = statistics.getKills();
<br/>
  return (kills == 0);
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172320 - Azenris - Sat Jan 30, 2010 4:16 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the replies :)<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
