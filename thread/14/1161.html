<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mega-Newbie Needs help :) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Mega-Newbie Needs help :)</h2>
<div id="posts">
<div class="post">
    <h4>#5692 - vb_recruit - Tue May 06, 2003 7:27 am</h4>
    <div class="postbody"><span class="postbody">hey all, I am trying to compile a C++ prog into GBA format.
<br/>
I can do C, but for some reason, whenever I try C++,and include
<br/>
the iostream header, it gives some error: 
<br/>
Undefined reference to write and some Paths.
<br/>
<br/>
Here was the C++ file:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include&lt;iostream.h&gt;
<br/>
<br/>
int main(void)
<br/>
 {
<br/>
   cout &lt;&lt; "TEsT\n";
<br/>
   
<br/>
  return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Any advice?
<br/>
<br/>
Thanks a lot,
<br/>
<br/>
-Chris</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5703 - niltsair - Tue May 06, 2003 2:20 pm</h4>
    <div class="postbody"><span class="postbody">The Gba got no standard output.
<br/>
<br/>
You should try the turorials first (you can find some under the beginer forum faq, or under <a href="http://www.gbadeb.org" target="_blank">www.gbadeb.org</a> -&gt;Doc) this would help you a lot since GBA programming is very hardware oriented.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5734 - vb_recruit - Wed May 07, 2003 7:54 am</h4>
    <div class="postbody"><span class="postbody">Thanks a lot :)
<br/>
<br/>
-Chris</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6892 - hzx - Wed Jun 04, 2003 8:45 am</h4>
    <div class="postbody"><span class="postbody">hello
<br/>
<br/>
i feel myself as a mega-newbie, because i totally stucked with a code. It wants to be a mode3 double buffer, in which you always draw into the background buffer and then copy it to VideoBuffer on VBlank. Here it is:
<br/>
<br/>
u16 *DrawBuffer = (u16 *)0x02000000;
<br/>
<br/>
// Backbuffer in EWRAM, because it is bigger than 32K 
<br/>
<br/>
void Wkey() {
<br/>
    while ((*KEYS) &amp; 1) {
<br/>
    };
<br/>
}
<br/>
<br/>
// just for debugging purposes
<br/>
<br/>
void CopyDrawBuffer() {
<br/>
<br/>
     REG_DMA3SAD = (u32)DrawBuffer;
<br/>
     REG_DMA3DAD = 0x06000000;
<br/>
     REG_DMA3CNT = 38400 | DMA_ENABLE;
<br/>
<br/>
}
<br/>
<br/>
// use DMA to copy the backbuffer to VideoBuffer
<br/>
<br/>
void DMAClearDrawBuffer() {
<br/>
<br/>
     REG_DMA3SAD = 0x05000000;
<br/>
     REG_DMA3DAD = (u32)DrawBuffer;
<br/>
     REG_DMA3CNT = 38400 | DMA_ENABLE | DMA_SOURCE_FIXED;
<br/>
}
<br/>
<br/>
// this one clears the backbuffer. Takes the zero value from the Palette[0]
<br/>
<br/>
void StupidClear() {
<br/>
<br/>
     int i;
<br/>
     for (i = 0; i &lt; 38400; i++) {
<br/>
       DrawBuffer[i] = 0;
<br/>
     }
<br/>
}
<br/>
<br/>
// a debug clearscreen, filling background buffer with zeros
<br/>
<br/>
int main() {
<br/>
<br/>
    int i;
<br/>
<br/>
    SetMode(MODE_3 | BG2_ENABLE);
<br/>
<br/>
    i = 1000;  // for a little demonstration
<br/>
<br/>
    while(1) {
<br/>
      DrawBuffer[i] = RGB16(31,31,31);
<br/>
      WaitForVSync();
<br/>
      CopyDrawBuffer();
<br/>
      Wkey();
<br/>
      i++;
<br/>
      DMAClearDrawBuffer();
<br/>
//      StupidClear();
<br/>
    }
<br/>
<br/>
So, when i run the code, the screen remains blank until the first keypress, which is strange, because the CopyDrawBuffer should display the white pixel in the 1000th position of VideoBuffer. After the first keypress, the code works as it is expected, BUT! only with the stupid clear routine - the DMA version clears the screen though, the program doesnt work at all. Maybe i am missing some oblivious, but i cannot see it. Somebody can help me?<br/>_________________<br/>.hzx</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6896 - djei-dot - Wed Jun 04, 2003 10:40 am</h4>
    <div class="postbody"><span class="postbody">Mode 3 doesn't have a backbuffer. You have to use mode 4.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6902 - hzx - Wed Jun 04, 2003 11:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>djei-dot wrote:</b></span></td> </tr> <tr> <td class="quote">Mode 3 doesn't have a backbuffer. You have to use mode 4.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, true. That is why I defined the DrawBuffer array into the EWRAM. A software backbuffer. :)<br/>_________________<br/>.hzx</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
