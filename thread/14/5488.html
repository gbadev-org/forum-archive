<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>adding sound +how to? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > adding sound +how to?</h2>
<div id="posts">
<div class="post">
    <h4>#40531 - ghost Leinad - Tue Apr 19, 2005 11:33 pm</h4>
    <div class="postbody"><span class="postbody">how can i add some sound to my project? (a not very difficult one please )
<br/>
<br/>
anybody can tell me a good conversion tool for sound?
<br/>
<br/>
i almost done with my tamagotchi lol... i just want to add some sound lol
<br/>
<br/>
thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40532 - tepples - Wed Apr 20, 2005 12:07 am</h4>
    <div class="postbody"><span class="postbody">Bleeps and bloops are easiest with the GB tone generators. <a class="postlink" href="http://belogic.com/gba/" target="_blank">Learn more here</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40808 - Quirky - Fri Apr 22, 2005 8:58 pm</h4>
    <div class="postbody"><span class="postbody">Bleeps and bloops are a fairly underused feature - everyone seems to use Direct Sound.
<br/>
<br/>
The tricky step is: How would one go about designing the correct input to the 'GBC' sound regs that output something similar to, say, a Mario jump sound? 
<br/>
<br/>
Often recording sounds on your PC in .wav form, converting with Sox, then shoving those through the direct sound fifos gives faster (time-to-design-and-code) results. But bigger rom size, of course.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40814 - Kyoufu Kawa - Fri Apr 22, 2005 9:39 pm</h4>
    <div class="postbody"><span class="postbody">Hey, Captain Quirk, even though I'd personally rather not try it at all, one could always run Super Mario Land through a debugger and find the exact sound register values, right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40816 - Quirky - Fri Apr 22, 2005 10:13 pm</h4>
    <div class="postbody"><span class="postbody">Well, yes :-) but I meant "a sound like it" - i.e. built from scratch. The GBA might well use DS in Mario Advance anyway? Course in the older Mario Worlds you'd get the proper values, though I don't know if the equivalent register bits have exactly the same meaning on the older GB models, requiring a bit of parsing, not too much hassle. (I've done similar stuff to "capture" GBC-like sound effects from other systems and reuse them)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40832 - tepples - Sat Apr 23, 2005 2:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quirky wrote:</b></span></td> </tr> <tr> <td class="quote">Well, yes :-) but I meant "a sound like it" - i.e. built from scratch.</td> </tr></table><span class="postbody">
<br/>
Try the BeLogic sound 1 test ROM and play around. Hint: sweep shifts 7, sweep direction add, sweep time 7, sound length 0, wave duty cycle 1, env step time 4, env step dir down, env init vol 0x000F, freq 0x0630, loop mode loop.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The GBA might well use DS in Mario Advance anyway?</td> </tr></table><span class="postbody">
<br/>
"DS" is ambiguous. It could stand for the Dual Screen Developer System, or it could stand for DirectSound (Windows PCM playback API), or it could stand for Direct Sound (GBA PCM playback hardware). I prefer to call the GBA PCM "PCM". But yes, Super Mario Advance does use PCM.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I don't know if the equivalent register bits have exactly the same meaning on the older GB models</td> </tr></table><span class="postbody">
<br/>
The sound models are so similar that you wouldn't notice much of a difference.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42102 - ghost Leinad - Thu May 05, 2005 11:20 pm</h4>
    <div class="postbody"><span class="postbody">well now you lost me :( ...im just thinking in how to add a simple bleep at my tamagotchy and now i have to learn 32 pages of sound registers and stuff jajaja...well is not that bad... i hope i can learn before the next tuesday...
<br/>
<br/>
tanx for your help..im starting to study now
<br/>
<br/>
<br/>
****
<br/>
studiyng
<br/>
<br/>
****</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42135 - Quirky - Fri May 06, 2005 3:08 pm</h4>
    <div class="postbody"><span class="postbody">If you just want a beep, then this should work:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define   SOUND_LENGTH(n)               n
<br/>
#define   ENVELOPE_START_VALUE(n)       (n&lt;&lt;12)
<br/>
#define DUTY_CYCLE(n)           (n&lt;&lt;6)
<br/>
<br/>
void init_sound() {
<br/>
  REG_SGCNT1 = 0x80; // sound master on
<br/>
  REG_SGCNT0_H = 2;
<br/>
  REG_SGCNT0_L = 0xff77;  // full sound
<br/>
<br/>
  REG_SG10_L = 0x8;    //;square0 sweep off
<br/>
  REG_SG10_H = SOUND_LENGTH(0x1f) | DUTY_CYCLE(3) |
<br/>
    ENVELOPE_START_VALUE(ENVELOPE_VOL_S1);
<br/>
}
<br/>
void play_annoying_beep(int forever) {
<br/>
  if (forever)
<br/>
    REG_SG11 = 0x8778;  // sound on for ever
<br/>
  else
<br/>
    REG_SG11 = 0xC778;  // sound stops after a short while
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
There are lots of magic numbers there, but it might get you started.
<br/>
<br/>
The 11 lowest bits in SG11 are the sound frequency, which you can calculate as:
<br/>
<br/>
Real F(hz)=4194304/(32*(2048- 11 bit reg value))
<br/>
<br/>
And the top 2 bits contol sound reset and whether it should stop after SOUND_LENGTH(n) or not (if not, you need some way to stop it using interrupts).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42151 - ghost Leinad - Fri May 06, 2005 9:22 pm</h4>
    <div class="postbody"><span class="postbody">mmm...i will try that today...thank you very much
<br/>
<br/>
ok...now my next question...about the background music...is harder to put some background music in your game than just a simple beep???
<br/>
<br/>
a game could be very boring without music!!! lol
<br/>
<br/>
thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42153 - tepples - Fri May 06, 2005 9:31 pm</h4>
    <div class="postbody"><span class="postbody">Background music is just a script of beeps played at various pitches at various times. Writing the player is easy enough, but writing the script (called a "musical work") is <a class="postlink" href="http://slashdot.org/~yerricde/journal/36125" target="_blank">a legal minefield</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42155 - ghost Leinad - Fri May 06, 2005 9:50 pm</h4>
    <div class="postbody"><span class="postbody">mmm...very big deal right???
<br/>
<br/>
well...creating a new song from ground up will be a real big problem...but can i use some examples meantime???
<br/>
<br/>
and by this time i have to study sound registers, sound channels, fixed-point arithmetic, music copyrights :S
<br/>
<br/>
thank teppes...(is because of alucard or dracula???)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42157 - ghost Leinad - Fri May 06, 2005 9:58 pm</h4>
    <div class="postbody"><span class="postbody">upppsss it's tepples no teppes</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42411 - ghost Leinad - Wed May 11, 2005 1:10 am</h4>
    <div class="postbody"><span class="postbody">ok thank you very much to all
<br/>
<br/>
i found that learning the basics of sound was not that hard...
<br/>
sound channel one was very easy, and sound channel 3 seems very fun. 
<br/>
<br/>
what's the difference between a demo and a game???</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
