<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>switching backgrounds w/button press - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > switching backgrounds w/button press</h2>
<div id="posts">
<div class="post">
    <h4>#16182 - darknet - Tue Feb 10, 2004 8:15 am</h4>
    <div class="postbody"><span class="postbody">Hey everyone, 
<br/>
<br/>
 I want to display a bitmap in mode 3 (for its high quality) and then go to another bitmap when the start button is pressed. Basically, I want what would become a splash screen that leads to a menu screen. 
<br/>
<br/>
Here's what i have so far and all it does is display the first image (because i'm using the same buffer? how'd i clear it? should i use a different mode??):
<br/>
<br/>
<br/>
int main()
<br/>
{
<br/>
    SetMode(MODE_3 | BG2_ENABLE);
<br/>
<br/>
   while(1) {
<br/>
<br/>
   if( ((*BUTTONS) &amp; START_BUTTON)) {
<br/>
<br/>
     for(int y = 0; y&lt;160; y++)
<br/>
        for(int x = 0; x&lt; 240; x++)
<br/>
           DrawPixel3(x,y, intro_Bitmap[y * 240 + x]);
<br/>
   }
<br/>
<br/>
   else{
<br/>
        for(int z = 0; z&lt;160; z++)
<br/>
            for(int w = 0; w&lt;240; w++)
<br/>
              DrawPixel3(w,z, blueback2_Bitmap[z*240 + w]);
<br/>
  }
<br/>
<br/>
}
<br/>
   return 0;
<br/>
}
<br/>
<br/>
<br/>
and i obviously have a drawpixel function and the right defines for the buttons. I want to transition between the two when start is pressed.
<br/>
<br/>
Thanks for any help and sorry for such a long post,
<br/>
-Mike</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16186 - FluBBa - Tue Feb 10, 2004 10:28 am</h4>
    <div class="postbody"><span class="postbody">It might not be a problem but it only checks the start button exactly when it has drawn the background, depending on how long this takes you have to hold the start button for some time.
<br/>
The other obvious thing to ask is if you have declared BUTTONS as volatile?<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16187 - darknet - Tue Feb 10, 2004 11:56 am</h4>
    <div class="postbody"><span class="postbody">First of all thanks for the quick reply,
<br/>
<br/>
Secondly, I did declare the buttons volatile. Also, I included the first bitmap drawing method outside of the while loop and all that did was display the second bitmap.
<br/>
<br/>
What i am looking for is a basic mechanism for switching between screens via button presses. More specifically, how does the memory get cleared up if i want to have 2 back to back screens in mode 3 (for example)? I assume I have to manage that memory, but how?
<br/>
<br/>
Any details on any of that is greatly appreciated.
<br/>
<br/>
Thanks,
<br/>
-Mike</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16211 - AndOrAFK - Tue Feb 10, 2004 5:54 pm</h4>
    <div class="postbody"><span class="postbody">Using what little knowledge I have, I'd suggest using DMA to copy the new screen in when you press start.
<br/>
<br/>
If you can get your bitmap down to 255 colors (I'd be happy to give it a try if you can provide me with the source image), I would suggest using mode 0 and simply tiling the bitmap across the screen.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16232 - dagamer34 - Wed Feb 11, 2004 1:19 am</h4>
    <div class="postbody"><span class="postbody">Right now your code will only display the first bitmap if the start button is pressed. Is that right? Or do you want it to alternate?
<br/>
<br/>
If you want it to alternate, its better to use a bool. Do something like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main ()
<br/>
{
<br/>
   // Setup the video mode
<br/>
   SetMode (MODE3 | BG2_ENABLE);
<br/>
<br/>
  bool showFirst = false;
<br/>
  // Loop
<br/>
  while (1)
<br/>
  {
<br/>
      // If the start button is pressed, flip the state of the bool
<br/>
      if (KeyDown (KEY_START))
<br/>
          showFirst != showFirst;
<br/>
<br/>
      // Depending on the state of the bool, show a certain pic
<br/>
      if (showFirst)
<br/>
      {
<br/>
           // Draw the first pic here....
<br/>
      }
<br/>
      else
<br/>
      {
<br/>
          // Draw the second pic here...
<br/>
      }
<br/>
      return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
If you need any more help, just PM me and I'll see what i can do.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
