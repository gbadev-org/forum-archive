<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DevKit Pro - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > DevKit Pro</h2>
<div id="posts">
<div class="post">
    <h4>#79993 - thegamefreak0134 - Tue Apr 18, 2006 12:03 am</h4>
    <div class="postbody"><span class="postbody">To be frank, I'm growing extremely weary of all of you who tell all of the folk here that DevKitAdv is out of date and not any good. As such, before I go off and tell you that it has never given me any problems (which it hasn't) I'd like to go ahead and try the new-fangled thingy.
<br/>
<br/>
If I have a folder containing my project and a makefile that I use to compile the project using DevKitAdv, what changes do I need  to make to get it working in the new devkit?
<br/>
<br/>
Remember that I know very little of compilers, and I live my programming life assumig that they all do a fine job. As long as they work, that is.
<br/>
<br/>
Thanks!
<br/>
<br/>
-thegamefreak0134<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79996 - Cearn - Tue Apr 18, 2006 12:23 am</h4>
    <div class="postbody"><span class="postbody">First, you need to add the paths to the bin directories of msys (for make.exe), and of devkitArm (for the actual tool chain). You had to do this for devkitAdv too, so you should know how to do this.
<br/>
<br/>
Then devkitARM uses another prefix: instead of  (gawd, what was it again) "arm-agb-elf-", you need "arm-elf-". So that's "arm-elf-gcc" and so forth. 
<br/>
<br/>
Lastly, you need to a '-specs' flag for your linker. "-specs=gba_mb.specs" or "-specs=gba.specs" for multiboot and cart builds, respectively. Oh, and maybe an "-mthumb-interwork" for your compiler and linker flags. But this was recommended procedure anyway.
<br/>
<br/>
That's it.
<br/>
<br/>
Example (assuming the base dir is e:\dev\):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// DKAdv steps:
<br/>
PATH= e:\dev\devkitadvance\tools;e:\dev\devkitadvance\bin;
<br/>
<br/>
arm-agb-elf-gcc -mthumb -mthumb-interwork -c first.c
<br/>
arm-agb-elf-gcc -mthumb -mthumb-interwork first.o -o first.elf
<br/>
arm-agb-elf-objcopy -O binary first.elf first.gba
<br/>
# gbafix first.gba # if you have it, doesn't come standard with DKAdv
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// devkitPro steps
<br/>
PATH= e:\dev\devkitPro\msys\bin;e:\dev\devkitPro\devkitARM\bin;
<br/>
<br/>
arm-elf-gcc -mthumb -mthumb-interwork -c first.c
<br/>
arm-elf-gcc -specs=gba_mb.specs -mthumb -mthumb-interwork first.o -o first.elf
<br/>
arm-elf-objcopy -O binary first.elf first.gba
<br/>
gbafix first.gba
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Just look at the simularities and differences between both versions, and modify for your current directories and flags.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80109 - tepples - Tue Apr 18, 2006 9:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">First, you need to add the paths to the bin directories of msys (for make.exe), and of devkitArm (for the actual tool chain). You had to do this for devkitAdv too, so you should know how to do this.</td> </tr></table><span class="postbody">
<br/>
I used my own makefile back in devkitARM R11, but when I upgraded to R16, wintermute told me that using my own makefile was deprecated in favor of using the makefile that comes with devkitARM, in the same way that using my own link script was deprecated when moving from the earliest GBA tools to DevKit Advance. (Is this in fact the case?) Otherwise, your description of the issues is largely accurate, aside from the changes to (unspecified) C semantics in new versions of GCC.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Example (assuming the base dir is e:\dev\):</td> </tr></table><span class="postbody">
<br/>
I would recommend against placing anything in a folder called "dev", as it has a special meaning on another platform that programs ported from that platform might assume. I know that at least the C library from DJGPP (PC DOS port of GCC with partial POSIX implementation) has special case handling for C:\dev, D:\dev, etc.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80166 - thegamefreak0134 - Wed Apr 19, 2006 1:38 pm</h4>
    <div class="postbody"><span class="postbody">OK, now that I'm away from the publib library, here is my makefile: (It' a batch file.) 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">path=C:\devkitadv\bin
<br/>
gcc -o main.elf main.c -lm
<br/>
objcopy -O binary main.elf smash.bin
<br/>
tools\gbafix smash.bin -tSSB_ADVANCE
<br/>
pause</td> </tr></table><span class="postbody">
<br/>
<br/>
If I understand correctly, do I basically just stick "arm-agb-elf-" in front of the "gcc"? (And likewise with objcopy)
<br/>
<br/>
-thegamefreak0134<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80170 - tepples - Wed Apr 19, 2006 2:09 pm</h4>
    <div class="postbody"><span class="postbody">It was "arm-agb-elf-" under DevKit Advance. Now it's "arm-elf-". Please look in the devkitpro\devkitarm\bin folder to see the correct executable names.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80181 - thegamefreak0134 - Wed Apr 19, 2006 6:19 pm</h4>
    <div class="postbody"><span class="postbody">I see. (I read the wrong box for the example. Oops.) Thanks a bunch. Once I find this kit, I will try to go ahead and port the project and see how it goes. 
<br/>
<br/>
-thegamefreak0134<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
