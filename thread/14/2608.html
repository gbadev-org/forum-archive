<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Transparency and Alpha channels - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Transparency and Alpha channels</h2>
<div id="posts">
<div class="post">
    <h4>#14407 - WillyWonka - Tue Jan 06, 2004 1:55 am</h4>
    <div class="postbody"><span class="postbody">I've been trying to figure out how to program the GBA for a couple of days now and I've read through the 7 GBA junkie tutorials and a number of other ones...
<br/>
<br/>
Anyways, I was taking a look at how Sonic Advance is put together in Visual Boy Advance and a couple of things poped up which I can't figure out.
<br/>
<br/>
1. When the Sonic Team and Sega logos appear, they have 2 different slide in effects, yet when I look in the background buffer, the final frame is there on background 2, even though it's animating on the screen.  How are they doing that? (Mode 0)
<br/>
<br/>
2. While introducing the characters they use various background layers as masks.  They have a white background with a cutout of sonic and below it they have a blue gradient.  How do you punch out that hole in your image?  Is there some way to set a specific colour to be 100% transparent? (Mode 0)
<br/>
<br/>
3. In the intro Dr. Eggman has a green gem in his hand and there are rays of light rotating around.  Now as far as I can make out that's an alpha channel but viewing the top background layer in visual boy's tools just displays what appears to be random garbage.  (And it's not a sprite)
<br/>
<br/>
They do something similar on the player select screen to fade the characters out by layering white blocks over the characters.  Would this just be a background with 100% transparency somewhere and then they set some sort of fade variable?
<br/>
<br/>
The GBAJunkie tutorials don't cover this (At least I don't remember reading about these)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14408 - yaustar - Tue Jan 06, 2004 2:16 am</h4>
    <div class="postbody"><span class="postbody">I think I can answer 1 and 2 correctly but I am still a newbie ;)
<br/>
<br/>
1. I think they are just skewing the horizontal lines on the display similar to the way a mode 7 effect works. Probably something like a HBlank
<br/>
<br/>
2. The 'Black' cutout is just a transperent colour on the tiles
<br/>
<br/>
3. Complete lost, a long shot would be that they are using REG_BLDMOD register with another layer but again: stumped..
<br/>
<br/>
Watch as someone corrects me....:(<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14411 - Miked0801 - Tue Jan 06, 2004 2:37 am</h4>
    <div class="postbody"><span class="postbody">#3 sounds like a cheapo palette cycle effect - check to see if the palettes are changing :)
<br/>
<br/>
Mike</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14412 - DekuTree64 - Tue Jan 06, 2004 2:44 am</h4>
    <div class="postbody"><span class="postbody">Haven't played it in a while so I don't remember what the slide in effects look like, but yeah, they are probably done by setting the BG0HOFS reg on HBlank. 
<br/>
And yes, the mask thing is easy to do. Color 0 is always transparent, so if you just draw what you want to show the gradient as color 0, then you can change the backdrop color (palette entry 0) on HBlank to fade the color down the screen.
<br/>
And the spotlights are probably done by taking that scrambled mess background and making it partially transparent with REG_BLDMOD, and then using windows to only show part of that background on the screen, and changing the window left/right edges on (you guesed it) HBlank. That's going by my slightly guessing memory that the spotlights kind of have a glittery effect to them, which would be done by scrolling the scramblyness around each frame. That's some pretty advanced stuff though, so don't worry about learning how to do it until you've got a good grasp of the system.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14426 - WillyWonka - Tue Jan 06, 2004 2:12 pm</h4>
    <div class="postbody"><span class="postbody">Here are some screengrabs of the effects:
<br/>
<br/>
<a href="http://www.eightlines.com/neil/temp/sonic1.png" target="_blank">http://www.eightlines.com/neil/temp/sonic1.png</a>
<br/>
<a href="http://www.eightlines.com/neil/temp/sonic2.png" target="_blank">http://www.eightlines.com/neil/temp/sonic2.png</a>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">#3 sounds like a cheapo palette cycle effect</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't think it is because the rays of light overlap from frame to frame and I don't see any palette shifts.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Color 0 is always transparent, so if you just draw what you want to show the gradient as color 0, then you can change the backdrop color (palette entry 0) on HBlank to fade the color down the screen. </td> </tr></table><span class="postbody">
<br/>
<br/>
Are there any tutorials on the net that you could point me to that demonstrate this?
<br/>
<br/>
[<span style="font-weight: bold">mod</span>: feel free to provide a link to images so people can choose if they want to view/load them. thanks]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14434 - tepples - Tue Jan 06, 2004 5:11 pm</h4>
    <div class="postbody"><span class="postbody">sonic1.png is hblank writes to BG#HOFS.
<br/>
<br/>
sonic2.png is hblank writes to WIN0H and WIN1H.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14441 - yaustar - Tue Jan 06, 2004 7:22 pm</h4>
    <div class="postbody"><span class="postbody">How are the windows registers used to create the effect?<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14446 - tepples - Tue Jan 06, 2004 8:07 pm</h4>
    <div class="postbody"><span class="postbody">Game sets up the blend mode to darken the area outside the windows. Then it fills a buffer with the shape of each window, defined as the horizontal extents of the window on each scanline, and schedules an HDMA to write it to the window registers.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14449 - yaustar - Tue Jan 06, 2004 10:04 pm</h4>
    <div class="postbody"><span class="postbody">ahhh, very clever but perhaps a little to advanced for me....;)<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
