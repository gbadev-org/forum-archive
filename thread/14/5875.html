<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>palette vs videobuffer - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > palette vs videobuffer</h2>
<div id="posts">
<div class="post">
    <h4>#44145 - christosterone - Mon May 30, 2005 6:03 pm</h4>
    <div class="postbody"><span class="postbody">I am royally confused. I can understand how to load images from arrays in header files, but as far as writing my own graphics as i go, I am having trouble. 
<br/>
<br/>
if i write straight to teh videobuffer, it flickers. is the palettemem holding colors ( RGB ) and the videobuffer just holds indexes of those colors in the palettemem array?
<br/>
<br/>
any help would be greatly appreciated
<br/>
<br/>
Chris</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44148 - tepples - Mon May 30, 2005 6:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>christosterone wrote:</b></span></td> </tr> <tr> <td class="quote">if i write straight to teh videobuffer, it flickers.</td> </tr></table><span class="postbody">
<br/>
Yes, you might get flicker if you draw to the page of video memory that's currently being displayed. There's a bit in DISPCNT that controls whether the display circuitry will start at 0x06000000 or 0x0600A000.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">is the palettemem holding colors ( RGB ) and the videobuffer just holds indexes of those colors in the palettemem array?</td> </tr></table><span class="postbody">
<br/>
Correct.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44151 - christosterone - Mon May 30, 2005 6:31 pm</h4>
    <div class="postbody"><span class="postbody">so this is safe to assume:
<br/>
<br/>
(assuming RGB macro was defined )
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
paletteMem[0] = RGB( 31,0,0 );
<br/>
paletteMem[1] = RGB( 0,31,0 );
<br/>
paletteMem[2] = RGB( 0,0,31 );
<br/>
<br/>
videoBuffer[50 + (240*50) ] = 0 // this will draw a red pixel at 50,50?
<br/>
videoBuffer[60 + (240*60) ] = 1 // this will draw a green pixel at 60,60?
<br/>
videoBuffer[70 + (240*70) ] = 2 // this will draw a blue pixel at 70,70?
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
when i tried that, it seemed that when i drew the pixel, it would draw every color in the paletteMem before it ( ex if the videobuffer had a value of 1, it would draw red AND green sidebyside )
<br/>
<br/>
thanks
<br/>
<br/>
Chris</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44153 - tepples - Mon May 30, 2005 6:40 pm</h4>
    <div class="postbody"><span class="postbody">The video buffer is an array of 16-bit units. In mode 4, each unit represents two pixels. When you write to a pixel, you also write to the pixel next to it. Therefore, to modify one pixel in isolation, you have to read-modify-write.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44158 - christosterone - Mon May 30, 2005 7:02 pm</h4>
    <div class="postbody"><span class="postbody">if each element in the videoBuffer array contains 2 pixels, how can i define different colors in the paletteMem?
<br/>
<br/>
if i wanted the first 2 pixels on the screen to be red then green, would i code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
paletteMem[0] = RGB(31,0,0);
<br/>
paletteMem[1] = RGB(0,31,0);
<br/>
<br/>
//now would it be
<br/>
videoBuffer[0] = 0 | 1;
<br/>
<br/>
//or would it be
<br/>
videoBuffer[0] = 0 + 1;
<br/>
<br/>
// or some other contraption?
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
thanks again for all your help
<br/>
<br/>
Christosterone</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44160 - tepples - Mon May 30, 2005 7:12 pm</h4>
    <div class="postbody"><span class="postbody">Each 16-bit unit corresponds to two pixels. The one on the left uses the lower 8 bits; the one on the right uses the upper 8 bits:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">videoBuffer[0] = 0 | 1&lt;&lt;8;</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44162 - christosterone - Mon May 30, 2005 7:18 pm</h4>
    <div class="postbody"><span class="postbody">thank you so much ; )
<br/>
<br/>
uve been a life saver
<br/>
<br/>
chris</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
