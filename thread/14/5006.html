<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>using mbv2lib with c++? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > using mbv2lib with c++?</h2>
<div id="posts">
<div class="post">
    <h4>#35656 - KonVex - Wed Feb 09, 2005 2:00 am</h4>
    <div class="postbody"><span class="postbody">I wanted to use the mbv2lib for debugging purposes, but if I try to compile a small c++ test program, g++ will abort with a list of errors. What confuses me is that the same program works if treated as c code!
<br/>
(btw I use devkitARM R8)
<br/>
<br/>
The errors:
<br/>
arm-elf-g++ -c -o output\system_debug.o System_Debug.cpp
<br/>
System_Debug.cpp: In function `void GBA_Print()':
<br/>
System_Debug.cpp(9): error: invalid conversion from `unsigned char*' to `char*'
<br/>
System_Debug.cpp(9): error:   initializing argument 1 of `int dsprintf(char*, const char*, ...)'
<br/>
System_Debug.cpp(9): error: invalid conversion from `unsigned char*' to `char*'
<br/>
System_Debug.cpp(9): error:   initializing argument 1 of `void __PrintStr(char*)'</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35669 - MumblyJoe - Wed Feb 09, 2005 8:11 am</h4>
    <div class="postbody"><span class="postbody">Those errors won't come up with C code because C lets you get away will all sorts of things, while C++ is more type-safe. Basically it appears that at some point you have declared an array (or string if you please) of unsigned chars and thats not what the function wants, it wants signed chars.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35802 - wintermute - Fri Feb 11, 2005 12:48 am</h4>
    <div class="postbody"><span class="postbody">you could always use libgba &amp; the included mbv2 functions :)
<br/>
<br/>
<a href="http://cvs.sourceforge.net/viewcvs.py/devkitpro/libgba/include/mbv2.h?rev=1.2&amp;view=markup" target="_blank">http://cvs.sourceforge.net/viewcvs.py/devkitpro/libgba/include/mbv2.h?rev=1.2&amp;view=markup</a>
<br/>
<br/>
<br/>
<br/>
grab it here - <a href="http://sourceforge.net/project/showfiles.php?group_id=114505&amp;package_id=124007&amp;release_id=260441" target="_blank">http://sourceforge.net/project/showfiles.php?group_id=114505&amp;package_id=124007&amp;release_id=260441</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35925 - KonVex - Sun Feb 13, 2005 1:37 am</h4>
    <div class="postbody"><span class="postbody">Thanks, I found the problem. :)
<br/>
The input/output buffers were declared as unsigned char, so I had to change them to chars.
<br/>
Also I try to minimize the usage of external libs, they tend to add a hefty amount to the ROM size. Hamlib e.g. took almost 64KB and the mbv2lib takes ~6KB.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
