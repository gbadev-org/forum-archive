<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Devkit pro wont accept my for loop - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Devkit pro wont accept my for loop</h2>
<div id="posts">
<div class="post">
    <h4>#176806 - blessingta@hotmail.co.uk - Fri Oct 14, 2011 5:22 pm</h4>
    <div class="postbody"><span class="postbody">hi
<br/>
<br/>
I'm trying to create a for loop in order to create some programmer font art but it wont work. because devkit pro has some "C99" mode issue. Bellow is my programmer art fonts (in the for loop) and after that is the error.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   //Where our characters are located
<br/>
    unsigned int *CharPtr = CHAR_BASE_ADR(0);
<br/>
   
<br/>
    int Random_Colour = 0;
<br/>
    int Random_Colour2 = 0;
<br/>
   
<br/>
   void btafonts_init()
<br/>
   {
<br/>
   //90 is the amount of ascii characters I'm creating
<br/>
   for ( int i = 0; i &lt; 90; i++)
<br/>
   {
<br/>
   
<br/>
   //Create Place holders for my characters (programmer art)
<br/>
   //the combination of 4 abitary colours are used to differentiate what will be differnt fonts.
<br/>
   //these fonts will be a random combination of four, of the 16 colours in any pallete  
<br/>
   
<br/>
   //Random colour chooses any 1 of the 16 colours 
<br/>
   //(this if statement stops it from writing a number greater than 15)
<br/>
   if ((Random_Colour = i % 16) &gt; 12) Random_Colour -= 12;//thus cycling back to 0 
<br/>
   
<br/>
   Random_Colour2 = i % 10;// other random colours being added
<br/>
   CharPtr[(65*8+0)] = ((Random_Colour&lt;&lt;28)|(Random_Colour&lt;&lt;24)|(Random_Colour&lt;&lt;20)| (Random_Colour&lt;&lt;06) | (Random_Colour&lt;&lt;02) | (Random_Colour&lt;&lt;8) | (Random_Colour&lt;&lt;4)| (Random_Colour&lt;&lt;0));
<br/>
   CharPtr[(65*8+1)] = ((Random_Colour&lt;&lt;28)|(Random_Colour&lt;&lt;24)|(Random_Colour&lt;&lt;20)| (Random_Colour&lt;&lt;06) | (Random_Colour&lt;&lt;02) | (Random_Colour&lt;&lt;8) | (Random_Colour&lt;&lt;4)| (Random_Colour&lt;&lt;0));
<br/>
   CharPtr[(65*8+2)] = (((Random_Colour+1)&lt;&lt;28)|((Random_Colour+1)&lt;&lt;24)|((Random_Colour+1)&lt;&lt;20)| ((Random_Colour+1)&lt;&lt;06) | ((Random_Colour+1)&lt;&lt;02) | ((Random_Colour+1)&lt;&lt;8) | ((Random_Colour+1)&lt;&lt;4)| ((Random_Colour+1)&lt;&lt;0));
<br/>
   CharPtr[(65*8+3)] = (((Random_Colour+1)&lt;&lt;28)|((Random_Colour+1)&lt;&lt;24)|((Random_Colour+1)&lt;&lt;20)| ((Random_Colour+1)&lt;&lt;06) | ((Random_Colour+1)&lt;&lt;02) | ((Random_Colour+1)&lt;&lt;8) | ((Random_Colour+1)&lt;&lt;4)| ((Random_Colour+1)&lt;&lt;0));
<br/>
   CharPtr[(65*8+4)] = (((Random_Colour+2)&lt;&lt;28)|((Random_Colour+2)&lt;&lt;24)|((Random_Colour+2)&lt;&lt;20)| ((Random_Colour+2)&lt;&lt;06) | ((Random_Colour+2)&lt;&lt;02) | ((Random_Colour+2)&lt;&lt;8) | ((Random_Colour+2)&lt;&lt;4)| ((Random_Colour+2)&lt;&lt;0));
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Whats the meaning of this error?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">&gt; "make" 
<br/>
main.c
<br/>
arm-eabi-gcc -MMD -MP -MF /c/users/portsmouthuni/my_gba/build/main.d -g -Wall -O3 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/c/users/portsmouthuni/my_gba/include -I/c/devkitPro/libgba/include -I/c/users/portsmouthuni/my_gba/build -c /c/users/portsmouthuni/my_gba/source/main.c -o main.o 
<br/>
In file included from c:/users/portsmouthuni/my_gba/source/main.c:10:0:
<br/>
c:/users/portsmouthuni/my_gba/include/btafonts.h: In function 'btafonts_init':
<br/>
c:/users/portsmouthuni/my_gba/include/btafonts.h:33:2: error: 'for' loop initial declarations are only allowed in C99 mode
<br/>
c:/users/portsmouthuni/my_gba/include/btafonts.h:33:2: note: use option -std=c99 or -std=gnu99 to compile your code
<br/>
c:/users/portsmouthuni/my_gba/source/main.c: In function 'main':
<br/>
c:/users/portsmouthuni/my_gba/source/main.c:82:2: error: 'for' loop initial declarations are only allowed in C99 mode
<br/>
make[1]: *** [main.o] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:01</td> </tr></table><span class="postbody">[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176807 - Dwedit - Fri Oct 14, 2011 5:26 pm</h4>
    <div class="postbody"><span class="postbody">I guess you can add "-std=c99" to your CFLAGS in the makefile.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176824 - vuurrobin - Fri Oct 14, 2011 9:21 pm</h4>
    <div class="postbody"><span class="postbody">putting variable declaration in for loops, like "for ( int i = ", isn't allowed in c89 (which is the default, I think)
<br/>
<br/>
to fix it, do as Dwedit says and use c99.
<br/>
<br/>
and DevkitPro is a toolchain vendor. you are talking about either DevkitARM, DevkitPPC or DevkitPSP.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176906 - sverx - Mon Oct 17, 2011 9:02 am</h4>
    <div class="postbody"><span class="postbody">this will work:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int i;
<br/>
for (i = 0; i &lt; 90; i++)</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176925 - Cearn - Sun Oct 23, 2011 9:05 pm</h4>
    <div class="postbody"><span class="postbody">I know this isn't directly related to your original question, but ...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blessingta@hotmail.co.uk wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
...
<br/>
   CharPtr[(65*8+0)] = ((Random_Colour&lt;&lt;28)|(Random_Colour&lt;&lt;24)|(Random_Colour&lt;&lt;20)| (Random_Colour&lt;&lt;06) | (Random_Colour&lt;&lt;02) | (Random_Colour&lt;&lt;8) | (Random_Colour&lt;&lt;4)| (Random_Colour&lt;&lt;0));
<br/>
...
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody"><ol type="1"><li>Don't you mean "... (Random_Colour&lt;&lt;<span style="font-weight: bold">1</span>6) | (Random_Colour&lt;&lt;<span style="font-weight: bold">1</span>2) ..." here?
<br/>
</li><li>If so, you can get the same result (assuming Random_Colour is between 0 and 16) using "Random_Colour*0x11111111". Easier to write and easier to read.</li></ol></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176927 - kusma - Mon Oct 24, 2011 11:31 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">I know this isn't directly related to your original question, but ...
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blessingta@hotmail.co.uk wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
...
<br/>
   CharPtr[(65*8+0)] = ((Random_Colour&lt;&lt;28)|(Random_Colour&lt;&lt;24)|(Random_Colour&lt;&lt;20)| (Random_Colour&lt;&lt;06) | (Random_Colour&lt;&lt;02) | (Random_Colour&lt;&lt;8) | (Random_Colour&lt;&lt;4)| (Random_Colour&lt;&lt;0));
<br/>
...
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody"><ol type="1"><li>Don't you mean "... (Random_Colour&lt;&lt;<span style="font-weight: bold">1</span>6) | (Random_Colour&lt;&lt;<span style="font-weight: bold">1</span>2) ..." here?
<br/>
</li></ol></span></td> </tr></table><span class="postbody">
<br/>
It's also worth noting that numbers prefixed with a zero are octal numbers (as opposed to decimal numbers). It's not a bug in this case as the numbers are below 8, but it's something to be aware of. In general, I'd say writing numbers that aren't "naturally octal" in octal form is bad practice.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176929 - sverx - Tue Oct 25, 2011 9:47 am</h4>
    <div class="postbody"><span class="postbody">I really didn't know that! 8| 8| Thanks! Now I just hope I never wrote any leading zero to my decimals...<br/>_________________<br/><a class="postlink" href="http://bit.ly/yiQrz9" target="_blank">libXM7</a>|<a class="postlink" href="http://bit.ly/yJwcOo" target="_blank">NDS programming tutorial (Italiano)</a>|<a class="postlink" href="http://disjointedstudio.blogspot.com/" target="_blank">Waimanu DS / GBA</a>|<a class="postlink" href="http://adshomebrewersdiary.blogspot.com" target="_blank">A DS Homebrewer's Diary</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176930 - blessingta@hotmail.co.uk - Wed Oct 26, 2011 4:34 pm</h4>
    <div class="postbody"><span class="postbody">its ok the problem has been fixed;
<br/>
<br/>
thanks for the "int outside for loop advice"</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
