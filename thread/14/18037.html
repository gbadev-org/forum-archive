<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>gfx2gba question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > gfx2gba question</h2>
<div id="posts">
<div class="post">
    <h4>#178366 - punchki - Tue Apr 07, 2015 8:12 pm</h4>
    <div class="postbody"><span class="postbody">I've been following tonc tutorials for quite a bit now, and I've gotten to the point where I want to make some of my own programs.
<br/>
<br/>
I made a circuit that uses a sensor to get the heart rate of a person, and outputs either a high or low signal.  I want to use the GBA to display information on the heartrate and have a little heart flickering at the beat of the heart.  Once I get my program working, I will put the two together.
<br/>
<br/>
But first...
<br/>
<br/>
The issue that I'm getting to is when using gfx2gba I want to take an image and turn it into a mode 4 .c  However, using this: 
<br/>
<br/>
gfx2gba -fsrc -c256 heart.bmp
<br/>
<br/>
I end up getting an output of a .raw.c and a master pallete, but the pallete doesn't seem to be in the format I want it.  
<br/>
<br/>
How can I use gfx2gba to output me a pallete in the format: 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// THIS IS NOT THE ACTUAL PAL
<br/>
<br/>
const unsigned int heartPal[8]=
<br/>
{
<br/>
   0x00100000,0x7FE00300,0x00007C18,0xFFFF1111,0x00000000,0x00000000,0x00000000,0x00000000,
<br/>
};
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Sorry if I'm not very clear... please let me know if it is unclear!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178370 - Edward_Stryfe - Thu Apr 09, 2015 2:43 am</h4>
    <div class="postbody"><span class="postbody">Hey man I'm afraid I can't help you but I'd just like to say welcome aboard. In all honesty this is probably for myself more than anything bcause I didn't actually think anyone would start using the GB/C/A for any type of application. Something that might help though is you say you've been to tonc[a place I need to go] and I've been to this place called loirak[dot]com the tutorials are for the newbiest of newbs but they have some nice resources that might help.
<br/>
<br/>
Good luck on your venture man with this whole deal and if you don't mind maybe if you finish the product post  it at the end of the thread so we can see the output.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178371 - DekuTree64 - Thu Apr 09, 2015 3:30 am</h4>
    <div class="postbody"><span class="postbody">What format is it outputting? Just an unsigned short array rather than int? You can always just cast the pointer to whatever type you want when you go to copy it into palette RAM or whatever.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178377 - punchki - Thu Apr 09, 2015 11:56 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the reply guys :)
<br/>
<br/>
I was actually able to figure it out.  I was opening the wrong file that had only one letter differently...  But like you guys said it wrote just fine, no matter the data type.
<br/>
<br/>
I will submit some of my WIP soon :) the project is going great!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178378 - punchki - Fri Apr 10, 2015 12:19 am</h4>
    <div class="postbody"><span class="postbody">Here is a quick video I made of my wip :)
<br/>
<br/>
<a class="postlink" href="https://youtu.be/FFI7yanMn9Y" target="_blank">https://youtu.be/FFI7yanMn9Y</a>
<br/>
<br/>
Let me know what you guys think!  I'm really new to this, but I find when I come up with my own projects that I learn the fastest.  
<br/>
<br/>
Any suggestions on the best way to get text in Mode 4?
<br/>
<br/>
Thanks,
<br/>
Punchki
<br/>
<br/>
PS: 
<br/>
Things still to do~~
<br/>
<br/>
* Error checking for outliers
<br/>
* Add text output to display heartrate
<br/>
* clean up code!!!!!
<br/>
* Sound of a heartbeat?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#178380 - gauauu - Fri Apr 10, 2015 3:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>punchki wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Any suggestions on the best way to get text in Mode 4?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
There's not any magic bullet to make text simple in mode 4. You basically need to be able to render each character into your bitmap at runtime. I'd have a big array of each character's graphic data, and do a traditional blit calculation to copy the graphic data for each character into the right place in the bitmap.
<br/>
<br/>
Unfortunately for you, most of the time most games spend their time in modes 0-2, so most example code will be for those modes.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
