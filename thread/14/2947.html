<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>REG_BGxHOFS and REG_BGxVOFS - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > REG_BGxHOFS and REG_BGxVOFS</h2>
<div id="posts">
<div class="post">
    <h4>#17012 - ender7771 - Sat Feb 28, 2004 8:53 pm</h4>
    <div class="postbody"><span class="postbody">Can somebody please paste the memory locatation these two registers should be at?  My mode0 program will only scroll right and left, but not up and down.  I think I have the wrong values for them.  Thank you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17013 - poslundc - Sat Feb 28, 2004 9:48 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Background%20Registers" target="_blank">http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Background%20Registers</a>
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17024 - ender7771 - Sun Feb 29, 2004 5:15 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the link, it has lots of useful information.
<br/>
<br/>
But, alas, I must ask for additional help.  My mode0 scrolling program doesn't work completely. As mentioned, when fired up my image will only scroll left and right, but not up and down.  I have copied word for word the source file from the demo (the Gba book in pdf that never went into print).  The compiled example from the book supports both directions of scrolling, but because i don't have a paypal account I cannot aquire the direct source code.  I have posted the code that I think is relevant to the problem, so could somebody please help me out? Thanks.  I know the emulator is not the problem, as it can scroll up and down in the book's example, but not in mine.  If you think other code is at fault, post and I will add to this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define REG_BG0HOFS *(volatile unsigned int*)0x4000010
<br/>
#define REG_BG0VOFS *(volatile unsigned int*)0x4000012
<br/>
<br/>
#define BUTTON_RIGHT 16
<br/>
#define BUTTON_LEFT 32
<br/>
#define BUTTON_UP 64
<br/>
#define BUTTON_DOWN 128
<br/>
#define BUTTONS (*(volatile unsigned int*)0x04000130)
<br/>
<br/>
        if(!(BUTTONS &amp; BUTTON_UP)){
<br/>
            y--;
<br/>
        }//end if
<br/>
<br/>
        if(!(BUTTONS &amp; BUTTON_DOWN)){
<br/>
            y++;
<br/>
        }//end if
<br/>
<br/>
        if(!(BUTTONS &amp; BUTTON_LEFT)){
<br/>
            x--;
<br/>
        }//end if
<br/>
<br/>
        if(!(BUTTONS &amp; BUTTON_RIGHT)){
<br/>
            x++;
<br/>
        }//end if
<br/>
        
<br/>
        REG_BG0VOFS = y;
<br/>
        REG_BG0HOFS = x;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17026 - poslundc - Sun Feb 29, 2004 5:53 am</h4>
    <div class="postbody"><span class="postbody">REG_BG0HOFS and REG_BG0VOFS should both be declared as volatile unsigned <span style="font-weight: bold">short</span> int pointers, not just volatile unsigned int pointers.
<br/>
<br/>
This type of error in the code is very agreeable with the symptoms you've described, so I imagine it is the cause of your problem.
<br/>
<br/>
(If I'm right and this is the cause of the error, see if you can figure out why it caused the error and what your code was, in fact, doing. This is a very good example and a good exercise for anyone starting out in GBA programming, as it deals with important programming issues that are neglected by many tutorials.)
<br/>
<br/>
For the record, BUTTONS should also be a short, but like REG_BG0HOFS will still work in spite of the error.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17078 - dagamer34 - Sun Feb 29, 2004 6:57 pm</h4>
    <div class="postbody"><span class="postbody">Learn to use the new IO viewer in VBA. It tells you the current state of the I/O registers and allows you to change them if you want.
<br/>
<br/>
Amazing piece of software, huh?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17092 - ender7771 - Sun Feb 29, 2004 11:18 pm</h4>
    <div class="postbody"><span class="postbody">Thanks a lot for your help.  The changes fixed my problem.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
