<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Newbie needs help w/ Visual Studio 2k3.NET makefiles - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Newbie needs help w/ Visual Studio 2k3.NET makefiles</h2>
<div id="posts">
<div class="post">
    <h4>#27333 - hisshouburaiken - Sun Oct 10, 2004 4:23 pm</h4>
    <div class="postbody"><span class="postbody">Hi all, I've just recently gotten into GBA development, i'm still just messing with pixels and stuff at this point (my pride and joy is an etch-a-sketch).  I've been working with HAM but I recent got Visual Studio .NET 2K3 and want to start using it as the IDE.  I've followed the popular setup tutorials but I'm having trouble getting VS to compile them.  Unless I'm on crack or my brain is subconsciously fixing a subtle error, this is a proper makefile (it's copied directly from GBAdev's makefile tutorial): 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">CC = gcc
<br/>
CFLAGS = -c
<br/>
THUMBMODEL = -mthumb -mthumb-interwork
<br/>
<br/>
all: movepixel.gba
<br/>
<br/>
movepixel.gba: movepixel.elf
<br/>
   objcopy -O binary movepixel.elf movepixel.gba
<br/>
<br/>
movepixel.elf: main.o
<br/>
   $(CC) -o movepixel.elf main.o
<br/>
<br/>
main.o: main.c basic.h
<br/>
   $(CC) $(CFLAGS) $(THUMBMODEL) main.c
<br/>
   
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
VS gives me this error, whether I use nmake or gnu:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">movepixel fatal error U1073: don't know how to make 'main.c'</td> </tr></table><span class="postbody">
<br/>
<br/>
What's wrong?  My main target should work fine here, right?
<br/>
<br/>
Any help is appreciated.  Once I get it compiling you have my word my next newbie question will at least have some substance to it :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27336 - sajiimori - Sun Oct 10, 2004 7:33 pm</h4>
    <div class="postbody"><span class="postbody">My guesses: either VS.NET is not compatible with Unix-style makefiles, or main.c doesn't exist in the current directory when the makefile is executed.  If the makefile and main.c are in the same directory, be sure the make utility is being executed from that directory.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27338 - dist0rted - Sun Oct 10, 2004 9:06 pm</h4>
    <div class="postbody"><span class="postbody">See the line where it says:
<br/>
<br/>
main.o: main.c basic.h
<br/>
<br/>
You don't have a line that says:
<br/>
<br/>
main.c:
<br/>
<br/>
or 
<br/>
<br/>
basic.h:
<br/>
<br/>
so it won't be able to do that step since you have no declaration. (Get what I'm saying?)
<br/>
<br/>
Change that line to just:
<br/>
<br/>
main.o:
<br/>
     $(CC) $(CFLAGS) $(THUMBMODEL) main.c
<br/>
<br/>
Tell me if that works<br/>_________________<br/>All knowledge is good; only the way it is put to use is good or evil.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27339 - sajiimori - Sun Oct 10, 2004 9:27 pm</h4>
    <div class="postbody"><span class="postbody">dist0rted, that's not really how make rules work.  The things on the left of the colon are targets, and on the right are prerequisites.
<br/>
<br/>
If a prerequisite doesn't exist, make will look for a rule to build it, and in this case it won't find such a rule.  If the prerequisite already exists, make won't look for the rule.
<br/>
<br/>
If a prerequisite is newer than a target, then the target gets rebuilt.  That's the purpose of having main.o depend on main.c.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27346 - hisshouburaiken - Mon Oct 11, 2004 2:17 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the replies, it turned out to be a typical bonehead thing where I had changed the name of a source file without updating it in VS...all the googling in the world doesn't seem to tell you "check your filenames".  I'm all set w/VS now, after a few more issues figuring out where to slap the thumb include options.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
