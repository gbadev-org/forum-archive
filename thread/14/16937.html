<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>how to manage a scoreboard and a level selection - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > how to manage a scoreboard and a level selection</h2>
<div id="posts">
<div class="post">
    <h4>#170941 - genecyst - Tue Oct 27, 2009 9:41 am</h4>
    <div class="postbody"><span class="postbody">hi, i've got two questions: 
<br/>
<br/>
1 - i need to create a simple scoreboard for my game, and i want to find the easier way to do it, suggestion?
<br/>
<br/>
2 - i whish to create a level selection screen at the beginning of the game, givin' the player the possibility of starting from the last level cleared.
<br/>
<br/>
how can i save these infos ("last level clear" and "scoreboard data")in the easier way? 
<br/>
thanks a lot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170954 - sgeos - Tue Oct 27, 2009 5:42 pm</h4>
    <div class="postbody"><span class="postbody">You will need some sort of global game data struct.  To save the data, put it in the struct and and save the struct to the cart.  Your levels should be numbered, and scores are just integers.  They eye candy should be more work than making the data persist after the power is turned off.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171003 - genecyst - Wed Oct 28, 2009 10:45 am</h4>
    <div class="postbody"><span class="postbody">that's the way i had in mind, but where i can find some references about saving data in gba cart? searching the forum give me 15000 results but without a real connection with this issue. maybe i'm searching for wrong words...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171011 - gauauu - Wed Oct 28, 2009 3:04 pm</h4>
    <div class="postbody"><span class="postbody">Assuming it's a normal GBA flash cart, it probably uses SRAM.  Writing to SRAM is really easy -- you just write the data to a particular region of memory, which is SRAM.  
<br/>
<br/>
I've read somewhere that some carts only support writing 8 bits at a time, this may or may not be true, but to be safe, that's what I've done (Somebody smarter may chime and on the validity of that statement?).
<br/>
<br/>
The SRAM address is defined in libgba in gba_base.h.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//this should be automatically done in gba_base.h from libgba
<br/>
#define SRAM (0x0E000000)
<br/>
<br/>
void writeSaveGameToCart(SaveGameData * data)
<br/>
{
<br/>
   u8 * save = (u8*)SRAM;
<br/>
   int slotSize = sizeof(SaveGameData);
<br/>
<br/>
   //use a slow u8 copy loop because supposedly save data 
<br/>
        //can only be written 8 bits at a time?  
<br/>
<br/>
   u8 * saveData = (u8*)data;
<br/>
<br/>
   int i = 0;
<br/>
   for (i = 0; i &lt; slotSize; i++)
<br/>
   {
<br/>
      *save++ = *saveData++;
<br/>
   }
<br/>
   
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Loading data is just as easy...you just read the data directly from that memory, the same way.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171015 - genecyst - Wed Oct 28, 2009 3:17 pm</h4>
    <div class="postbody"><span class="postbody">i can't believe that i've never ask myself what gba_base.h were... 
<br/>
<br/>
really really thanks a lot to both of you!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174616 - genecyst - Thu Jul 01, 2010 2:04 pm</h4>
    <div class="postbody"><span class="postbody">hi, i dig up this old topic couse i'm having issues related to saving data. 
<br/>
i've done my saving function and tested over any emulator i can... and all work well.
<br/>
when i put my rom on a firelinker 128 it doesn't save anything at all...
<br/>
i haven't any other type of flash card to try it out on hardware... someone has already had this sort of problems?
<br/>
thanks a lot!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174617 - Dwedit - Thu Jul 01, 2010 8:30 pm</h4>
    <div class="postbody"><span class="postbody">Flash cartridges use mysterious voodoo magic to divide save games up between roms.  Some look for a string like "SRAM_V113" before they will decide that a rom gets a save game.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174622 - genecyst - Fri Jul 02, 2010 9:45 am</h4>
    <div class="postbody"><span class="postbody">i've found this simply declaration searching around the forum, 
<br/>
<br/>
const char* saveType = "SRAM_V113";
<br/>
<br/>
do you mean it's enough to declare it somewhere? 
<br/>
thanks a lot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174627 - genecyst - Fri Jul 02, 2010 3:36 pm</h4>
    <div class="postbody"><span class="postbody">it works. 
<br/>
<br/>
thanks so much!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
