<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Completely new to gbadev. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > Completely new to gbadev.</h2>
<div id="posts">
<div class="post">
    <h4>#116796 - mog123 - Mon Jan 29, 2007 8:19 pm</h4>
    <div class="postbody"><span class="postbody">Hi, i have tried to learn nesdev. although i failed, it was just too much for me.
<br/>
<br/>
tepples told me that gba dev is simpler, so i wanted to try. although i'm having problems right from the start. I downloaded devkitarm and msys.
<br/>
Installed them.
<br/>
they are on
<br/>
D:\dev\devkitarm
<br/>
D:\dev\msys
<br/>
<br/>
I have a source file from tonc's tutorial. and i don't know how to compile it.
<br/>
<br/>
when i was compiling some nes asm code. i just drag dropped my *.asm file on the nesasm.exe and there it was.
<br/>
But this is more complicated on this step.
<br/>
<br/>
Any help please?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116798 - tepples - Mon Jan 29, 2007 8:37 pm</h4>
    <div class="postbody"><span class="postbody">Put the following in hello.c:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/*
<br/>
   Turn the screen green!
<br/>
   Platform: GBA
<br/>
   Author: Damian Yerrick
<br/>
   Copyright: All rights released
<br/>
*/
<br/>
<br/>
typedef unsigned int u16;
<br/>
#define BG_COLORS ((u16 *)0x05000000)
<br/>
#define REG_DISPCNT (*(u16 *)0x04000000)
<br/>
#define RGB5(r,g,b)   ((r)|((g)&lt;&lt;5)|((b)&lt;&lt;10))
<br/>
<br/>
int main(void) {
<br/>
  REG_DISPCNT = 0;  // mode 0, no backgrounds or sprites
<br/>
  BG_COLORS[0] = RGB5(0, 31, 0);
<br/>
  while (1) {}
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Put the following in mk.bat:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">set Path=(ORIGINAL POST WAS IN ERROR; SEE BELOW)
<br/>
arm-eabi-gcc -Wall -mthumb -mthumb-interwork hello.c -o hello.elf -specs=gba_mb.specs
<br/>
arm-eabi-objcopy -O binary hello.elf hello.gba
<br/>
gbafix hello.gba
<br/>
pause
<br/>
</td> </tr></table><span class="postbody">
<br/>
Run mk.bat and then run hello.gba, and if the screen turns green, then devkitARM is installed correctly. If you get an error, please copy the text of the error message from the window and paste it here, or we won't be able to help you.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Thu Feb 01, 2007 1:38 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#116800 - mog123 - Mon Jan 29, 2007 8:48 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://img363.imageshack.us/img363/5797/qweqwewp4.jpg" target="_blank">http://img363.imageshack.us/img363/5797/qweqwewp4.jpg</a>
<br/>
<br/>
i made the mk.bat file, and the hello.c(both in the root folder of devkit arm)
<br/>
<br/>
and i got that screen when trying to run mk.bat
<br/>
<br/>
EDIT: lol, i placed them in the bin folder. and i got an elf file and a gba file, lolz xd
<br/>
<br/>
EDIT2: i played the gba through visualboyadvance and i got a very bright green.
<br/>
<br/>
Ok, i think it's installed good.
<br/>
So how do i make the elf and gba file into one gba file?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116801 - keldon - Mon Jan 29, 2007 9:04 pm</h4>
    <div class="postbody"><span class="postbody">I believe you are supposed to run that from within the MinGW/MSys shell provided with devkit arm. Although I think that you should learn a bit of c/c++ first before you jump head first into console dev. All depends on your previous knowledge, but if you know nothing about programming, or very little then I would suggest to learn to program.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116803 - tepples - Mon Jan 29, 2007 9:25 pm</h4>
    <div class="postbody"><span class="postbody">What do you mean by "lol, i placed them in the bin folder." To what files does the word "them" refer?
<br/>
<br/>
I can't read RandomSlavicTongue, but it looks like "Bad command or file name". If there is a file named D:\dev\devkitarm\bin\arm-elf-gcc, then change the first line of mk.bat to
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">set Path=D:\dev\devkitarm\bin;%Path%
<br/>
</td> </tr></table><span class="postbody">
<br/>
and see if anything clears up. Then you can place hello.c and mk.bat anywhere.
<br/>
<br/>
Hint: You can copy text from the command prompt window to the Clipboard. Click the system menu (click the C:\&gt; icon at the top left of the window), choose Edit &gt; Mark (or localized counterpart), drag a box around what you want to copy, and press Enter. Then paste into your reply.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116804 - mog123 - Mon Jan 29, 2007 9:31 pm</h4>
    <div class="postbody"><span class="postbody">i got it compiled tepples, see my "EDIT'S"
<br/>
<br/>
now I'm good to go with programming? i'll try to do some tonc now.
<br/>
<br/>
by them i mean the two files:
<br/>
<br/>
hello.c
<br/>
and mk.bat
<br/>
<br/>
ok, i changed the mk.bat file just like you said, and it compiles from anywhere, thanks a bunch!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117012 - Yooser Naim - Wed Jan 31, 2007 7:59 pm</h4>
    <div class="postbody"><span class="postbody">I'm in nearly the same position as Mog123, only difference being that the 'green screen test' tepples posted did not work for me. I used the devkitPro Installer, and I <span style="font-style: italic">think</span> I have the correct paths set, but maybe not. When I ran your batchfile the following errors appeared:
<br/>
<br/>
' arm-eabi-gcc' is not recognized as an internal or external command,
<br/>
operable program or batch file.
<br/>
<br/>
And then continued on to say the same thing about ' arm-eabi-objcopy' and ' gbafix'. Would you have any idea what I could have done wrong?[/i]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117035 - gmiller - Wed Jan 31, 2007 10:07 pm</h4>
    <div class="postbody"><span class="postbody">Thoses messages are telling you that it could not find the programs to compile, link, and create a GBA executable.  Depending on how your system is set up it could be that your PATH environment variable does not have correct setup or some other issue.  You could try adding this to your batch file and see if the batch file works:
<br/>
<br/>
set PATH=c:\where\devkitpro\devkitarm\bin;c:\where\mysys\bin;%PATH%
<br/>
<br/>
There may be others that are needed as well but this should work for the compiler/linker.  The DEVKITPRO, DEVKITARM and others are generally needed along with the location of the msys/bin folder.  Also make sure that the relative path name to your files to compile do not contain spaces and the absolute path to the devkitpro stuff has no spaces in the folder names.</span><span class="gensmall"><br/><br/>Last edited by gmiller on Wed Jan 31, 2007 10:09 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#117036 - tepples - Wed Jan 31, 2007 10:07 pm</h4>
    <div class="postbody"><span class="postbody">Does it really have a space between the opening quote and the executable name?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117068 - Yooser Naim - Thu Feb 01, 2007 1:04 am</h4>
    <div class="postbody"><span class="postbody">No tepples, there were no spaces. Sorry. Here's an exact copy of the output:
<br/>
<br/>
C:\&gt;set Path=/c/devkitPro/devkitARM\bin;c:\devkitPro\msys\bin;C:\WINDOWS\system3
<br/>
2;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\QuickTime\QTSystem\
<br/>
<br/>
C:\&gt;arm-eabi-gcc -Wall -mthumb -mthumb-interwork hello.c -o hello.elf -specs=gba
<br/>
_mb.specs
<br/>
'arm-eabi-gcc' is not recognized as an internal or external command,
<br/>
operable program or batch file.
<br/>
<br/>
C:\&gt;arm-eabi-objcopy -O binary hello.elf hello.gba
<br/>
'arm-eabi-objcopy' is not recognized as an internal or external command,
<br/>
operable program or batch file.
<br/>
<br/>
C:\&gt;gbafix hello.gba
<br/>
'gbafix' is not recognized as an internal or external command,
<br/>
operable program or batch file.
<br/>
<br/>
C:\&gt;pause
<br/>
Press any key to continue . . .
<br/>
<br/>
I also ran the batch file modifications that both of you (tepples and gmiller) have mentioned, but they resulted in similar messages.
<br/>
You mentioned something about placing the hello.c and mk.bat somewhere specific and then running them, could that be a problem? As you can tell from the screen output above, I just have them in my C:\ directory. What else could I have done wrong? 
<br/>
<br/>
Don't rule out anything, not even the strangest of errors; I'm not knowledgeable about development environments and I only know a few things about command line shells. I think I might know enough C to squeeze out some very simple programs, judging from what I've seen in the devkit examples. I just can't seem to get the environment running, and have appreciated your help so far. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117069 - Yooser Naim - Thu Feb 01, 2007 1:10 am</h4>
    <div class="postbody"><span class="postbody">I should also mention that I had devkit Installer place the devkitPro folder in my C:\ drive, so there should be no spaces in the directories.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117071 - gmiller - Thu Feb 01, 2007 1:15 am</h4>
    <div class="postbody"><span class="postbody">the path string should be c:\devkitPro\devkitARM\bin; ...
<br/>
<br/>
The path has to use windows slashes that slant the wrong way ... ;-)  The DEVKITPRO and other environment variables need the unix style variables that slant the right way :D.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117077 - tepples - Thu Feb 01, 2007 1:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Yooser Naim wrote:</b></span></td> </tr> <tr> <td class="quote">Sorry. Here's an exact copy of the output:
<br/>
<br/>
C:\&gt;set Path=/c/devkitPro/devkitARM\bin;c:\devkitPro\msys\bin;C:\WINDOWS\system3
<br/>
2;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\QuickTime\QTSystem\</td> </tr></table><span class="postbody">
<br/>
The use of $DEVKITARM in my original batch file was in error, as I had forgotten that that variable uses MSYS-style path syntax, not Windows-style path syntax. I was used to the MINGDIR and DJDIR syntaxes used by the Allegro library's makefile, which do use a Windows-style path.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I also ran the batch file modifications that both of you (tepples and gmiller) have mentioned, but they resulted in similar messages.</td> </tr></table><span class="postbody">
<br/>
Could you paste the <span style="font-weight: bold">set Path=</span> line of the modified batch file?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">You mentioned something about placing the hello.c and mk.bat somewhere specific and then running them, could that be a problem? As you can tell from the screen output above, I just have them in my C:\ directory. What else could I have done wrong? </td> </tr></table><span class="postbody">
<br/>
Location should not matter if the batch file is correct.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117083 - Yooser Naim - Thu Feb 01, 2007 3:22 am</h4>
    <div class="postbody"><span class="postbody">I reentered all my environment variables and copied and pasted the bin directory into the modified batch file
<br/>
<br/>
Tepples, your modification is below:
<br/>
[quote]"If there is a file named D:\dev\devkitarm\bin\arm-elf-gcc, then change the first line of mk.bat to: [code]set Path=D:\dev\devkitarm\bin;%Path%[/code] [/quote] 
<br/>
<br/>
your code with my directory:
<br/>
set Path=C:devkitPro\devkitARM\bin;%Path%
<br/>
<br/>
It works. It turned out the gba file and it executes properly. I don't know what happened; I must have entered my own directory into the code wrong, or didn't save the changes either to the modified file or to the environment variables...I don't know.
<br/>
<br/>
I might have been able to avoid these problems had I really read thoroughly enough through the posts before trying out your green screen test. I hope I didn't use too much of your time and effort. Thanks to everybody for all your help.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
