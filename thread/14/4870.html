<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Loading 256x512 map data. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Loading 256x512 map data.</h2>
<div id="posts">
<div class="post">
    <h4>#34464 - Celeryface - Wed Jan 19, 2005 11:08 pm</h4>
    <div class="postbody"><span class="postbody">Hi there,
<br/>
<br/>
Awhile back I made a <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=4618&amp;highlight=512x256" target="_blank">post</a> about getting help on loading 512x256 backgrounds. Does anyone have the formula to load 256x512 backgrounds, and also 512x512 backgrounds?
<br/>
<br/>
Thanks in advance. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34472 - tepples - Thu Jan 20, 2005 1:54 am</h4>
    <div class="postbody"><span class="postbody">256x512 pixel text backgrounds are easy; they're just two stacked backgrounds.
<br/>
<br/>
512x512 pixel text backgrounds are like 512x256 pixel text backgrounds, except stacked two on top of one another.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34505 - Celeryface - Thu Jan 20, 2005 5:32 pm</h4>
    <div class="postbody"><span class="postbody">Cool. Thanks for the info. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34518 - Celeryface - Thu Jan 20, 2005 9:00 pm</h4>
    <div class="postbody"><span class="postbody">Hi again,
<br/>
<br/>
I seem to be having a few problems with some of my map data loading. Is this the correct way to load the 256x512 background?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    unsigned short loopY = 0;
<br/>
    unsigned short loopX = 0;
<br/>
<br/>
    // top 32 tiles to first screen block.
<br/>
    for( loopY = 0; loopY &lt; 32; loopY++ )
<br/>
    {
<br/>
<br/>
        for( loopX = 0; loopX &lt; 32; loopX++ )
<br/>
        {
<br/>
<br/>
            dest[loopY*32 + loopX] = source[loopY*32 + loopX];
<br/>
<br/>
        } // end for loopX
<br/>
<br/>
    } // end for loopY
<br/>
<br/>
<br/>
    // bottom 32 tiles to the second screen block.
<br/>
    for( loopY = 32; loopY &lt; 64; loopY++ )
<br/>
    {
<br/>
<br/>
        for( loopX = 0; loopX &lt; 32; loopX++ )
<br/>
        {
<br/>
<br/>
            dest[loopY*32 + loopX] = source[loopY*32 + loopX];
<br/>
<br/>
        } // end for loopX
<br/>
<br/>
    } // end for loopY</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34521 - Mucca - Thu Jan 20, 2005 10:00 pm</h4>
    <div class="postbody"><span class="postbody">Your code should work loading a 256x512 source map to a 256x512 destination map, although there's no need to split it into two 'for' loops, just have one looping to 64. The code will not work for a source map wider than 256.
<br/>
<br/>
If I was loading a complete 256x512 map I'd probably just do this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DmaCopy(3, mapSrc, mapDst, 0x1000, 32);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
or if the source map is wider than 256:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 * mapSrc = whatever;
<br/>
u16 * mapDst = whatever;
<br/>
int x = whatever the x offset is in blocks, (pixels/8)
<br/>
int y = whatever the y offset is in blocks, (pixels/8)
<br/>
//Copy Each line individually
<br/>
for(int i=0; i&lt;64; i++)
<br/>
{
<br/>
    DmaCopy(3, mapSrc + (y*tile_width_of_source) + x, mapDst + (i*32), 64, 32);
<br/>
    y++;
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by Mucca on Fri Jan 21, 2005 3:54 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#34524 - Celeryface - Thu Jan 20, 2005 10:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mucca wrote:</b></span></td> </tr> <tr> <td class="quote">Your code should work loading a 256x512 source map to a 256x512 destination map, although there's no need to split it into two 'for' loops, just have one looping to 64. The code will not work for a source map wider than 256.
<br/>
<br/>
If I was loading a complete 256x512 map I'd probably just do this:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DmaCopy(3, mapSrc, mapDst, 0x1000, 32);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
or if the source map is wider than 256:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u16 * mapSrc = whatever;
<br/>
u16 * mapDst = whatever;
<br/>
int x = whatever the x offset is in blocks, (pixels/8)
<br/>
int y = whatever the y offset is in blocks, (pixels/8)
<br/>
//Copy Each line individually
<br/>
for(int i=0; i&lt;64; i++)
<br/>
{
<br/>
    DmaCopy(3, mapSrc + (y*tile_width_of_source) + x, mapDst + (y*32), 64, 32);
<br/>
    y++;
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Okay. Thanks :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
