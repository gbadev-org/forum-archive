<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprite translucency - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Sprite translucency</h2>
<div id="posts">
<div class="post">
    <h4>#26138 - Wriggler - Wed Sep 08, 2004 1:42 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys,
<br/>
<br/>
How would I go about making a sprite translucent (e.g. semi-transparent) against all background layers?
<br/>
<br/>
I've taken a look at the REG_BLDMOD register, but I don't really understand it. If anybody could lend any simple code, or link to a good tutorial that would be fantastic.
<br/>
<br/>
Thanks in advance,
<br/>
<br/>
Ben</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26147 - poslundc - Wed Sep 08, 2004 2:55 pm</h4>
    <div class="postbody"><span class="postbody">Have a look at <a href="http://www.thepernproject.com/English/tutorial_4.html#4" target="_blank">http://www.thepernproject.com/English/tutorial_4.html#4</a> and let us know if there is a specific part of the explanation that is confusing you.
<br/>
<br/>
Keep in mind that there is only one blend register, which means you can blend only one collection of objects (your sprites, for example) against another collection (BGs 1 and 2, for example).
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26352 - Wriggler - Mon Sep 13, 2004 5:44 pm</h4>
    <div class="postbody"><span class="postbody">I've read the article on The Pern Project and had a look at Tonc's tutorial's as well. I'm just at a bit of loss as exactly what values I should be putting into REG_BLDMOD and REG_COLY. Just a small code sample would probably clear things up quite a lot.
<br/>
<br/>
thanks
<br/>
<br/>
Eaben</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26355 - Ethos - Mon Sep 13, 2004 6:05 pm</h4>
    <div class="postbody"><span class="postbody">For Transparency with regards to sprites, I think its better to set the sprites you want to be semi-transparent by setting the transparency bits (10,11) to 01 in attribute 0 (bytes 1 and 2), as described in the Cowbite Virtual HW specs.
<br/>
<br/>
You still have to set the target/source layers and values with REG_BLDMOD and REG_COLEV.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26439 - cappeca - Wed Sep 15, 2004 5:46 pm</h4>
    <div class="postbody"><span class="postbody">Set the sprites as semi-transparent like Ethos said, and get an emulator where you can play with the registers during game (Mappy or VBA can do it). That will let you get a feeling of what you can do. Once you get the effect you want, put the values on the registers in your code.
<br/>
<br/>
And be careful with sprites priority, because that might mess things up a little. The Pern Project doesn't mention it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26654 - yaustar - Wed Sep 22, 2004 12:49 am</h4>
    <div class="postbody"><span class="postbody">You be better looking at the Cowbite Spec for the details... 
<br/>
<a href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Graphics%20Hardware%20Registers" target="_blank">http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Graphics%20Hardware%20Registers</a>
<br/>
Scroll down a bit to find BLDMOD
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">        //set the transperancy of the first layer
<br/>
        SET_BLENDING(BLEND_BG2, BLEND_BG0 | BLEND_SPRITES | BLEND_BG1 | BLEND_BG3, ALPHA_BLEND);// BG2 is the layer that is being blended
<br/>
        SET_COEFF(5, 10);//set the coefficient for alpha blending</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define SOURCE_SHIFT(n) ((n) &lt;&lt; 0)
<br/>
#define TARGET_SHIFT(n) ((n) &lt;&lt; 8)
<br/>
<br/>
//REG_BLDMOD supplement header file by yaustar 02/10/2003
<br/>
<br/>
#define BLEND_BG0 0x1
<br/>
#define BLEND_BG1 0x2
<br/>
#define BLEND_BG2 0x4
<br/>
#define BLEND_BG3 0x8
<br/>
<br/>
#define BLEND_SPRITES 0x10
<br/>
#define BLEND_BACK 0x20
<br/>
<br/>
#define ALL_OFF 0x0
<br/>
#define ALPHA_BLEND 0x40
<br/>
#define LIGHTEN 0x80
<br/>
#define DARKEN 0xC0
<br/>
<br/>
#define SET_BLENDING(s,t,m) REG_BLDMOD = (SOURCE_SHIFT(s) | TARGET_SHIFT(t) | m)
<br/>
<br/>
//REG_COLEV supplement header file by yaustar 02/10/2003
<br/>
//eg of usage SET_BLENDING(BLEND_BG0, BLEND_BG1, ALPHA_BLEND);
<br/>
<br/>
#define SET_COEFF(s,t) REG_COLEV = (SOURCE_SHIFT(s) | TARGET_SHIFT(t))
<br/>
//s + t MUST equal to 16 or &lt;16 for a darkening effect or &gt;16 for a lighting effect
<br/>
<br/>
//key: s = source, t = target, m = mode</td> </tr></table><span class="postbody"><br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26694 - Miked0801 - Thu Sep 23, 2004 10:10 pm</h4>
    <div class="postbody"><span class="postbody">Of ghost it by turning it off and on each tic.  Poor man's transparency, but it gives you multiple levels :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
