<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Color index conversion - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Color index conversion</h2>
<div id="posts">
<div class="post">
    <h4>#19649 - CyberSlag5k - Fri Apr 23, 2004 3:45 am</h4>
    <div class="postbody"><span class="postbody">I am attempting to add transparency to my sprites. I know that pallete[0] is always transparent. I figure I'll just set that to some obscure color that I will have my artist use as the transparent color. My problem is, however, converting the RGB channels to the 0xXXXX format. What do those 4 X's represent? Analyzing colors in photoshop yeilds 6 of them, so white in photoshop is FFFFF but FFFF is light blue (I'm assuming the missing digits just go to 0). So how can I convert the color I want from RGB to that 0xXXXX format (and also, what's a better name than "that 0xXXXX format?).
<br/>
<br/>
Thanks!<br/>_________________<br/><span style="font-style: italic">When you find yourself in the company of a halfling and an ill-tempered Dragon, remember, you do not have to outrun the Dragon... </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19652 - sajiimori - Fri Apr 23, 2004 4:02 am</h4>
    <div class="postbody"><span class="postbody">Many graphics applications use 24-bit RGB colors, where the red, green, and blue channels each get a byte, in that order.
<br/>
<br/>
GBA uses 15-bit BGR encoding for colors, where blue, green, and red each get 5 bits, in that order.
<br/>
<br/>
The X's you were talking about represent hexidecimal digits.  You need 2 hex digits to represent a byte.  So, 3 bytes for 24-bit color means 6 hex digits.
<br/>
<br/>
GBA colors waste a bit because the 15-bit values are rounded up to an even 16, so we have colors that are 2 bytes long which needs 4 hex digits.
<br/>
<br/>
As you've probably figured out by now, to convert from 24-bit RGB to 15-bit BGR, you drop the low 3 bits of each channel and then reverse the order of the channels.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19655 - CyberSlag5k - Fri Apr 23, 2004 4:29 am</h4>
    <div class="postbody"><span class="postbody">Sounds good. Thank you.
<br/>
<br/>
The only thing is, I set index 0 of my sprite pallete to 0xFFFF, hoping to make the white border around my sprite go away. It, unfortunately, did not. Could it be that I am not drawing anything behind it? I was kind of just hoping that the default black background would just shine through. It simply is not so...<br/>_________________<br/><span style="font-style: italic">When you find yourself in the company of a halfling and an ill-tempered Dragon, remember, you do not have to outrun the Dragon... </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19662 - poslundc - Fri Apr 23, 2004 5:36 am</h4>
    <div class="postbody"><span class="postbody">Changing palette index 0 to 0xFFFF doesn't change all of the occurrences within your bitmap that are white to point to palette index 0. I'm sure if you look at your palette you'll see another occurrence of 0xFFFF (or 0x7FFF) which is the entry that is being used wherever there is white in your bitmap.
<br/>
<br/>
To fix that, you need to change all of the occurrences of that index in the bitmap to 0.
<br/>
<br/>
But this is a hacky way to go about it, and means you must waste a colour in your palette. Find a better way, either using the current conversion tools you are using or by writing your own.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19688 - CyberSlag5k - Fri Apr 23, 2004 3:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Changing palette index 0 to 0xFFFF doesn't change all of the occurrences within your bitmap that are white to point to palette index 0.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Excellent point. Got it.<br/>_________________<br/><span style="font-style: italic">When you find yourself in the company of a halfling and an ill-tempered Dragon, remember, you do not have to outrun the Dragon... </span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
