<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>V-Sync - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > V-Sync</h2>
<div id="posts">
<div class="post">
    <h4>#55501 - nuffer - Wed Sep 28, 2005 10:00 pm</h4>
    <div class="postbody"><span class="postbody">I'm having issues with my sprites.  I have anywhere from none to 70 or so on screen at a time, and every once in a while they all move up one pixel at a time (this is the desired behavior at least).  The problem is sometimes they visibly skip, and half move up before the screen is refreshed and the other half after that.  It looks like I'm not properly syncing with the GBA's drawing routine.  How would I do that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55516 - DiscoStew - Thu Sep 29, 2005 12:18 am</h4>
    <div class="postbody"><span class="postbody">Yes, you hit the spot. Because you have nothing halting your code execution in your main loop, your code continues to do its thing multiple times before the GBA actually gets to the point of drawing, and even during that time, it still continues.
<br/>
<br/>
To fix this, just add a line or 2 that checks for the V-Blank at the beginning of your main loop, or wherever you choose. I'm assuming there are a lot of posts on this subject in the forums, so a little Searching should not be a problem.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55607 - nuffer - Thu Sep 29, 2005 10:45 pm</h4>
    <div class="postbody"><span class="postbody">I'm syncing things up, but I still seem to be having issues when the screen is nearly full.
<br/>
<br/>
I call:
<br/>
<br/>
haltUntilVSync();
<br/>
draw();
<br/>
<br/>
and draw() contains the following code:
<br/>
<br/>
for(deque&lt;vector&lt;BlockSpace*&gt; &gt;::iterator i = mBlockSpaces.begin(); i != mBlockSpaces.end(); ++i)
<br/>
		for(vector&lt;BlockSpace*&gt;::iterator j = i-&gt;begin(); j != i-&gt;end(); ++j)
<br/>
			if((*j)-&gt;isBlock())
<br/>
				(*j)-&gt;block()-&gt;draw();
<br/>
<br/>
	for(vector&lt;Block*&gt;::iterator i = mGreyRow.begin(); i != mGreyRow.end(); ++i)
<br/>
		(*i)-&gt;draw();
<br/>
<br/>
where mBlockSpaces is a deque of size 11, which each vector in it size 6, and mGreyRow is a vector of size 6.  All Block::draw() does is update the y-position on the OAM.  Is this just too much to be updating during one V-Blank?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
