<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>multiboot vs. flashcarts - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > multiboot vs. flashcarts</h2>
<div id="posts">
<div class="post">
    <h4>#11559 - blueskies - Sat Oct 11, 2003 2:38 am</h4>
    <div class="postbody"><span class="postbody">I'm not sure exactly how to ask this, but...when running the same program as a multiboot vs flashing it to a cart (or running it in an emulator), the sprite data looks different.  When running as multiboot, the sprite seems to be more transparent, and shows some background colors through.  I guess i'm wondering if this is due to the memory layout in multiboot mode, or if the palettes/transparency information gets altered, or just coding.  I'm fairly new to gba programming, so i'm just trying to figure out all of these little quirks.  Thanks
<br/>
Jonathan
<br/>
<br/>
//edit - also, another general question about headers.  does devkitadv automatically put a header on when you compile your code, or am i misunderstanding the "fact" that you need to patch a header to get code to work on hardware?  I've never put any extra headers on my compiled programs, and they've all worked fine on multiboot and f2a cards.  thanks again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11564 - tepples - Sat Oct 11, 2003 4:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blueskies wrote:</b></span></td> </tr> <tr> <td class="quote">I'm not sure exactly how to ask this, but...when running the same program as a multiboot vs flashing it to a cart (or running it in an emulator), the sprite data looks different.  When running as multiboot, the sprite seems to be more transparent, and shows some background colors through.</td> </tr></table><span class="postbody">
<br/>
Probably just a bug. Either you accidentally used more than 256 KB of program, or you aren't locating your assets correctly (if using GBFS), or you aren't initializing all of the palette. Yes, the intro writes to the palette.
<br/>
<br/>
Can you provide mock-up screenshots?  To force multiboot execution in VisualBoyAdvance, name the ROM with an extension .mb rather than .gba or .mb.gba.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">//edit - also, another general question about headers.  does devkitadv automatically put a header on when you compile your code</td> </tr></table><span class="postbody">
<br/>
DevKit Advance adds a header containing a zeroed-out logo and "generic" metadata. The logo is zeroed out because while the precedent set in <a class="postlink" href="http://www.eff.org/Legal/Cases/sega_v_accolade_977f2d1510_decision.html" target="_blank"><span style="font-style: italic">Sega v. Accolade</span> (1992)</a> construes use of logo data as fair use, not all countries have a similarly permissive interpretation of copyright and trademark law.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">or am i misunderstanding the "fact" that you need to patch a header to get code to work on hardware?</td> </tr></table><span class="postbody">
<br/>
MB.exe automatically patches the header when transferring a .mb program but not when programming a flash cart. The Visoly, F2A, and PogoShell loaders (added to multi-ROM carts) don't care much about the logo data; they read only the ROM name from the header.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11570 - blueskies - Sat Oct 11, 2003 6:04 am</h4>
    <div class="postbody"><span class="postbody">running it through VBoyAdv didn't display any error using either the .mb or .bin file, but i'll try to explain it a little better. 
<br/>
<a href="http://members.lycos.co.uk/sdhsfbrulez02/main_reg.png">[Images not permitted - Click here to view it]</a>
<br/>
by the way, don't bother mentioning the poor artistic skills...or the blatent copyright infringement :D.  I'm just practicing here.
<br/>
This demo has a small sprite moving on top of a background, mode 4.  Basically the sprite looks lighter in multiboot (by the way again, i'm using the flash2advance usb cable as a multiboot cable, in case that matters), and appears slightly transparent.  i tried different image software (paint shop pro vs photoshop) and both produced the same results after getting the file format correct.  I'm not seriously concerned w/ this event/problem, i was just sort of curious as to why the program would display differently in the two different modes.
<br/>
<br/>
To make sure i wasn't crazy, I did some investigating.  I modified Jenswa's "mode4sprites" demo (on which my demo is <span style="font-weight: bold">completely</span> based (thanks!)) to run in multiboot mode.
<br/>
<a href="http://members.lycos.co.uk/sdhsfbrulez02/mode4sprites.png">[Images not permitted - Click here to view it]</a>
<br/>
I had the exact same results, where the sprite looked slightly transparent in mb mode. (again, vba didn't show this, but it happened on hardware.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11572 - tepples - Sat Oct 11, 2003 4:00 pm</h4>
    <div class="postbody"><span class="postbody">Semitransparent sprite? Looks like you could have a blending mode problem. Try zeroing out the blending mode and seeing if that fixes things.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define BLENDMODE (*(volatile unsigned short *)0x04000050)
<br/>
/* ... */
<br/>
BLENDMODE = 0;</td> </tr></table><span class="postbody">
<br/>
Or is the sprite semitransparent <span style="font-style: italic">and flickering a bit</span>? That could be the result of a different problem.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11578 - blueskies - Sat Oct 11, 2003 6:40 pm</h4>
    <div class="postbody"><span class="postbody">Perfect!  Now both display exactly the same.  So, does the multiboot somehow affect this bit (byte?) during startup?  I'll look into blending modes a little more.  Thanks for the help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11580 - tepples - Sat Oct 11, 2003 6:47 pm</h4>
    <div class="postbody"><span class="postbody">I'm pretty sure the intro screen uses a hardware blend to fade the Nintendo logo  in and out while downloading the program. Recall that the logo does not blink for ROM based programs.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11581 - blueskies - Sat Oct 11, 2003 6:57 pm</h4>
    <div class="postbody"><span class="postbody">true, true...also, the loader for the F2AWriter has some display on the screen while it is operating.  Though I doubt this does anything because it's mainly just a picture...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11586 - jenswa - Sat Oct 11, 2003 8:11 pm</h4>
    <div class="postbody"><span class="postbody">Never know of that problem, since i don't have a flashcard.<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
