<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem looping sound **FIXED** - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Problem looping sound **FIXED**</h2>
<div id="posts">
<div class="post">
    <h4>#112486 - misterDtD - Sat Dec 16, 2006 9:15 pm</h4>
    <div class="postbody"><span class="postbody">I am using timer 1 (along with an interrupt) to loop my sound, in the <a class="postlink" href="http://deku.gbadev.org/program/sound1.html" target="_blank">tutorial I am taking</a>, they have me use "TIMER1 = 65536 - BGM_LENGTH;" to start my timer, but my sound's lenght is 320000 so 65536-320000=-254464, which makes my sound loop in the middle, which I really don't want.
<br/>
<br/>
<a class="postlink" href="http://www.flashkit.com/loops/Techno-Dance/Techno/303_Drea-Square_B-8866/index.php" target="_blank">here</a> is the sound file.
<br/>
<br/>
So, how do I make my timer work with my music being as long as it is (and it isn't very long, only 13 seconds.)
<br/>
<br/>
~DtD
<br/>
NOTE: I did reduce the sound's quality to a 24000 sampiling rate, mono, and an 8 bit-rate</span><span class="gensmall"><br/><br/>Last edited by misterDtD on Sat Dec 16, 2006 11:46 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#112496 - QuantumDoja - Sat Dec 16, 2006 11:42 pm</h4>
    <div class="postbody"><span class="postbody">Im not sure, but I dont think you can play mp3 or wav on the gameboy, your going to have to convert your sound file first.....i think its *.mod???<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112498 - misterDtD - Sat Dec 16, 2006 11:46 pm</h4>
    <div class="postbody"><span class="postbody">You can play converted (to raw data) PCM WAV files.
<br/>
MOD is just another music format, but it still has to be converted to raw data.
<br/>
<br/>
Anyway, I fixed my problem, the stupid timer wasn't big enough for my sound's lenght (well I already knew that), so I made a interupt function for timer 0 (the timer controlling my sound) that incremented a variable every time, then once the variable &gt; sound lenght I looped the sound and restarted the variable.
<br/>
<br/>
~DtD</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#112499 - tepples - Sat Dec 16, 2006 11:50 pm</h4>
    <div class="postbody"><span class="postbody">In order to play waveforms longer than 65536 samples without using a mixer, you'll need to keep track of how many samples are left in a separate variable. Cascade the sample timer into a second timer set to 65536 - 64000 = 1536, and then every time it fires, subtract 64000 from the number of samples left. Once there are fewer than 64000 samples left, set the timer to 64000 minus the actual number of samples left.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
