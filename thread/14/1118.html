<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Sprites</h2>
<div id="posts">
<div class="post">
    <h4>#5509 - Wildginger - Wed Apr 30, 2003 11:10 am</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
Im a complete newbie, and am trying to get sprites to roll in from one side of the screen to the other to form a word.
<br/>
<br/>
I was successful in the first 4 letters/sprites, but then nothing happened. Its as if I cant access sprites 4 onwards in my sprites array. They are 256 colour, 64x64 sprites.
<br/>
<br/>
How many 64x64 sprites can I store and display on the screen at one time?
<br/>
<br/>
Sorry, dont have the code available at the moment.
<br/>
<br/>
Thanks in advance.<br/>_________________<br/>---
<br/>
Wildginger (aka JimTownsend)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5514 - Touchstone - Wed Apr 30, 2003 1:18 pm</h4>
    <div class="postbody"><span class="postbody">The gba most often has 32kb of sprite ram (depending on video mode). That means 8 sprites with 4096 (64*64*1) bytes each. My favorite unofficial GBA hardware referense is at <a class="postlink" href="http://www.work.de/nocash/gbatek.htm" target="_blank">http://www.work.de/nocash/gbatek.htm</a>, use it in good health.<br/>_________________<br/>You can't beat our meat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5519 - niltsair - Wed Apr 30, 2003 2:06 pm</h4>
    <div class="postbody"><span class="postbody">Yes but as a sprite goes offscreen, you can reload new data in it and re-use it to display new text,
<br/>
<br/>
There's 128 useable sprites on the Gba.
<br/>
<br/>
But those sprites object share a common 1024 tiles (in 16 color) or 512 tiles(in 256 colors) that they must use between themselves. Each tile is 8x8pixels.
<br/>
<br/>
And if you're using mode 3,4,5, don't forget that the tiles below 512(in 16colors) and 256(in 256colors) are nto useable.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5526 - Wildginger - Wed Apr 30, 2003 7:57 pm</h4>
    <div class="postbody"><span class="postbody">Hello again,
<br/>
<br/>
Thanks for the info, much appreciated.
<br/>
<br/>
So if I can have 8 times 64x64 256 colour sprites on a screen, I should be able to get p, a, c, m, a, n on the screen without too much trouble right?
<br/>
<br/>
Heres my code, would someone mind telling me where it is Ive gone wrong? It might be my maths, but I thought it looked ok. If its obvious and stupid, well blame it on the fact Im a complete novice!
<br/>
<br/>
Cheers, 
<br/>
<br/>
Jim.
<br/>
<br/>
<br/>
========= My dodgy beginners code ==========
<br/>
<br/>
//----------------//
<br/>
// PAC LETTER 'P' //
<br/>
//----------------//
<br/>
//this is where we define our sprite atributes for the first sprite
<br/>
//256 color 64x64 sprite that starts at character 0.  Character 0 is
<br/>
//the first sprite data memory location.
<br/>
<br/>
sprites[0].attribute0 = COLOR_256 | SQUARE| y;  
<br/>
sprites[0].attribute1 = SIZE_64 | x;
<br/>
sprites[0].attribute2 = char_number + 512;
<br/>
<br/>
// copy in the sprites bitmap
<br/>
for(index = 0; index &lt; 256*8; index++)
<br/>
{
<br/>
   OAMData[index] = PData[index];  
<br/>
}
<br/>
WaitForVsync();						
<br/>
// waits for the screen to stop drawing
<br/>
CopyOAM();						
<br/>
// Copies our sprite array into OAM.
<br/>
<br/>
// now move the P across the screen
<br/>
for( i = 0; i &lt; 176; i++ )
<br/>
{
<br/>
   x--;
<br/>
   MoveSprite( &amp;sprites[0], x, y );
<br/>
   WaitForVsync();					
<br/>
<br/>
   // waits for the screen to stop drawing
<br/>
   CopyOAM();
<br/>
}
<br/>
<br/>
<br/>
//----------------//
<br/>
// PAC LETTER 'A' //
<br/>
//----------------//
<br/>
<br/>
sprites[1].attribute0 = COLOR_256 | SQUARE| y;  
<br/>
sprites[1].attribute1 = SIZE_64 | x;
<br/>
sprites[1].attribute2 = (char_number + 512) + 128;	
<br/>
x = 176;
<br/>
y = 100;
<br/>
<br/>
iOffset = (256 * 8 ); // this is the offset for the second sprite in the array
<br/>
<br/>
// copy in the sprites bitmap
<br/>
for(index = 0; index &lt; 256*8; index++)
<br/>
{
<br/>
   OAMData[index + iOffset] = AData[index];  
<br/>
}
<br/>
WaitForVsync();					
<br/>
<br/>
// waits for the screen to stop drawing
<br/>
CopyOAM();						
<br/>
// Copies our sprite array into OAM.
<br/>
<br/>
// now move the A across the screen
<br/>
for( i = 0; i &lt; 144; i++ )
<br/>
{
<br/>
   x--;
<br/>
   MoveSprite( &amp;sprites[1], x, y );
<br/>
   WaitForVsync();					
<br/>
<br/>
   // waits for the screen to stop drawing
<br/>
   CopyOAM();
<br/>
}
<br/>
<br/>
<br/>
//----------------//
<br/>
// PAC LETTER 'C' //
<br/>
//----------------//
<br/>
sprites[2].attribute0 = COLOR_256 | SQUARE| y;  
<br/>
sprites[2].attribute1 = SIZE_64 | x;
<br/>
sprites[2].attribute2 = (char_number + 512) + 256;	
<br/>
<br/>
x = 176;
<br/>
y = 100;
<br/>
<br/>
iOffset = (256 * 16 ); // this is the offset for the second sprite in the array
<br/>
<br/>
// copy in the sprites bitmap
<br/>
for(index = 0; index &lt; 256*8; index++)
<br/>
{
<br/>
   OAMData[index + iOffset] = CData[index];  
<br/>
}
<br/>
WaitForVsync();					
<br/>
<br/>
// waits for the screen to stop drawing
<br/>
CopyOAM();							
<br/>
// Copies our sprite array into OAM.
<br/>
<br/>
// now move the C across the screen
<br/>
for( i = 0; i &lt; 112; i++ )
<br/>
{
<br/>
   x--;
<br/>
   MoveSprite( &amp;sprites[2], x, y ); 
<br/>
   WaitForVsync();						
<br/>
   // waits for the screen to stop drawing
<br/>
   CopyOAM();
<br/>
}
<br/>
<br/>
<br/>
//----------------//
<br/>
// PAC LETTER 'M' //
<br/>
//----------------//
<br/>
sprites[3].attribute0 = COLOR_256 | SQUARE| y;  
<br/>
sprites[3].attribute1 = SIZE_64 | x;
<br/>
sprites[3].attribute2 = (char_number + 512) + 384;	
<br/>
<br/>
x = 176;
<br/>
y = 100;
<br/>
<br/>
iOffset = (256 * 24 ); 
<br/>
<br/>
// copy in the sprites bitmap
<br/>
for(index = 0; index &lt; 256*8; index++)
<br/>
{
<br/>
   OAMData[index + iOffset] = mData[index];  
<br/>
}
<br/>
<br/>
WaitForVsync();					
<br/>
<br/>
// waits for the screen to stop drawing
<br/>
<br/>
CopyOAM();							
<br/>
// Copies our sprite array into OAM.
<br/>
<br/>
// now move the M across the screen
<br/>
for( i = 0; i &lt; 80; i++ )
<br/>
{
<br/>
   x--;
<br/>
   MoveSprite( &amp;sprites[3], x, y );
<br/>
   WaitForVsync();					  
<br/>
<br/>
   // waits for the screen to stop drawing
<br/>
   CopyOAM();
<br/>
}
<br/>
<br/>
<br/>
//----------------//
<br/>
// PAC LETTER 'A' //
<br/>
//----------------//
<br/>
sprites[4].attribute0 = COLOR_256 | SQUARE| y;  
<br/>
sprites[4].attribute1 = SIZE_64 | x;
<br/>
sprites[4].attribute2 = (char_number + 512) + 512;	
<br/>
<br/>
x = 176;
<br/>
y = 100;
<br/>
<br/>
iOffset = (256 * 32 ); 
<br/>
<br/>
// copy in the sprites bitmap
<br/>
for(index = 0; index &lt; 256*8; index++)
<br/>
{
<br/>
   OAMData[index + iOffset] = A2Data[index];  
<br/>
}
<br/>
<br/>
WaitForVsync();						
<br/>
// waits for the screen to stop drawing
<br/>
CopyOAM();						
<br/>
// Copies our sprite array into OAM.
<br/>
<br/>
// now move the A across the screen
<br/>
for( i = 0; i &lt; 48; i++ )
<br/>
{
<br/>
   x--;
<br/>
   MoveSprite( &amp;sprites[4], x, y );
<br/>
   WaitForVsync();					
<br/>
<br/>
   // waits for the screen to stop drawing
<br/>
   CopyOAM();
<br/>
}
<br/>
<br/>
<br/>
//----------------//
<br/>
// PAC LETTER 'N' //
<br/>
//----------------//
<br/>
sprites[5].attribute0 = COLOR_256 | SQUARE| y;  
<br/>
sprites[5].attribute1 = SIZE_64 | x;
<br/>
sprites[5].attribute2 = (char_number + 512) + 640;	
<br/>
<br/>
x = 176;
<br/>
y = 100;
<br/>
<br/>
iOffset = (256 * 40 ); // this is the offset for the second sprite in the array
<br/>
<br/>
// copy in the sprites bitmap
<br/>
for(index = 0; index &lt; 256*8; index++)
<br/>
{
<br/>
   OAMData[index + iOffset] = nData[index];  
<br/>
}
<br/>
<br/>
WaitForVsync();						
<br/>
// waits for the screen to stop drawing
<br/>
CopyOAM();						
<br/>
// Copies our sprite array into OAM.
<br/>
<br/>
// now move the N across the screen
<br/>
for( i = 0; i &lt; 16; i++ )
<br/>
{
<br/>
   x--;
<br/>
   MoveSprite( &amp;sprites[5], x, y );
<br/>
   WaitForVsync();					     
<br/>
   // waits for the screen to stop drawing
<br/>
   CopyOAM();
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5528 - niltsair - Wed Apr 30, 2003 8:13 pm</h4>
    <div class="postbody"><span class="postbody">Which display mode are you using? One of those (3, 4, 5) or those (0,1,2)
<br/>
<br/>
If the anwser is (3,4,5) then i'm affraid you can only display 4 256colors 64x64 sprites at a time. And it seems to be the case because of the '512' in :
<br/>
<span style="font-weight: bold">sprites[1].attribute2 = (char_number + 512) + 128; </span> Which basicly skip the first 512 tiles because they're not usable in those mode. And this also means you lose the use of half the tiles, thus reducing your 8 sprites to 4.
<br/>
<br/>
So, you could either change your sprite to 16colors mode or (which will be easier if only displaying sprites and no background) use Display mode 0 and remove the <span style="font-weight: bold">+512</span></span><span class="gensmall"><br/><br/>Last edited by niltsair on Wed Apr 30, 2003 9:33 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#5530 - Wildginger - Wed Apr 30, 2003 9:27 pm</h4>
    <div class="postbody"><span class="postbody">That makes perfect sense, thanks very much for the reply.
<br/>
<br/>
Yes, I am using mode 4, and I am displaying a background, so I shall make my sprites 16 colours.
<br/>
<br/>
Stand by for the "Why cant I display my 16 colour sprites properly" question ;)
<br/>
<br/>
Thanks again,
<br/>
<br/>
Jim<br/>_________________<br/>---
<br/>
Wildginger (aka JimTownsend)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5536 - Wildginger - Wed Apr 30, 2003 11:13 pm</h4>
    <div class="postbody"><span class="postbody">OK, one more question, Ive been using pcx2sprite to convert my images, but it only takes 256 colour images.
<br/>
<br/>
I need a tool to convert 16 colour images to data, any ideas / preferences?
<br/>
<br/>
Cheers,<br/>_________________<br/>---
<br/>
Wildginger (aka JimTownsend)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
