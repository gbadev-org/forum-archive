<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mode 0-2 question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Mode 0-2 question</h2>
<div id="posts">
<div class="post">
    <h4>#19805 - JWizard - Sun Apr 25, 2004 9:49 pm</h4>
    <div class="postbody"><span class="postbody">Hey,
<br/>
<br/>
After playing around for a bit with modes 3-5 I decided to start using the tile modes. They seem pretty straightforward conceptually but I'm confused by what exactly the data should be.
<br/>
As I understand it, the palette data contains all the colors used in the tiles as an array of 256 bytes (where each byte represents a different color, right ?).
<br/>
Then, it seems to me that the tile data should be indices into the palette for each pixel and then the map data should be indices into the array of tiles.
<br/>
However, after looking at some examples of C header files it seems to work differently. For instance I noticed some palettes with repeated values which according to my interpretation (where each value is one of the colors used) wouldn't make sense. Also, the tile data doesn't seem to be indices into the palette array.
<br/>
If anyone could shed some light on this issue it would be greatly appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19811 - sajiimori - Sun Apr 25, 2004 11:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
As I understand it, the palette data contains all the colors used in the tiles as an array of 256 bytes (where each byte represents a different color, right ?). 
<br/>
</td> </tr></table><span class="postbody">
<br/>
It's an array of 256 colors, but each color is 2 bytes (because GBA uses 15 bit BGR color encoding, and it rounds up to 16 bits with one wasted bit).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Then, it seems to me that the tile data should be indices into the palette for each pixel and then the map data should be indices into the array of tiles.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Yes, but maps aren't always just arrays of tile indexes.  For "text" backgrounds (i.e. not rot/scale), you can set additional bits for horizontal and vertical flipping, among other things.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
For instance I noticed some palettes with repeated values which according to my interpretation (where each value is one of the colors used) wouldn't make sense.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Palettes can have multiple copies of the same color.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Also, the tile data doesn't seem to be indices into the palette array.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Maybe it just looks funny because of the way the code is formatted.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19843 - Gopher - Mon Apr 26, 2004 5:26 pm</h4>
    <div class="postbody"><span class="postbody">The palette is an array of 256 colors. Each color is a 16-bit value just like is used in the 16b bitmap mode. Tiles and sprites reference these colors. In 256-color modes, each pixel is represented by a one-byte index into the palette. In 16 color modes, each byte represents two 4-bit indices into one of the 16 sixteen-color palettes. (basicly the 256-color palette can be treated as an array of 16 16-color palettes instead)  
<br/>
<br/>
There are several reasons palettes will have repeated entries; first, index 0 is always the "transparency" color in tiles and sprites, so color 0 (for 16 or 256-color data) will not be rendered at all. This color IS used, however, as the color of the "back plane", and will be seen if there is no image information to draw for a pixel. So this color will often be black, and black will be repeated somewhere else in the palette, since most tile or sprite sets will need a non-transparent black.  If you are using 16 color palettes for sprite data, then viewed as a single 256 color palette there may appear to be many repeated colors, but this is because they are not being used as one palette, but as some number of smaller palettes, so the colors aren't really repeated in that sense. 
<br/>
In 16-color tiles, remember that 1 byte is 2 tiles. If the headers are listing in hex (as they should, imo) then for 16-color tiles each hex character will be one index; viewed as whole bytes into a 256-color palette, this probably won't make sense.
<br/>
[/quote]<br/>_________________<br/>"Only two things are infinite: the universe, and human stupidity. The first is debatable." -Albert Einstein</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
