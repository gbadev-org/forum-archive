<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Please help a noob programmer out :> - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Beginners > Please help a noob programmer out :></h2>
<div id="posts">
<div class="post">
    <h4>#153382 - DLightning - Sat Mar 29, 2008 1:51 pm</h4>
    <div class="postbody"><span class="postbody">Hey there, I'm pretty new to DS programming, and I don't know what I've done wrong.
<br/>
<br/>
I've made a button checker program, if e.g. the A button is pressed, it should say:
<br/>
The A button is pressed.
<br/>
<br/>
But when I run the .nds file in DeSmuME, it keeps saying: (e.g.) A button is released when I press it!
<br/>
<br/>
Here's the code:
<br/>
<br/>
<span style="font-style: italic">main.c</span>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
 
<br/>
int main(void)
<br/>
{
<br/>
   consoleDemoInit();
<br/>
 
<br/>
   while(1)
<br/>
   {
<br/>
      scanKeys();
<br/>
      int held = keysHeld();
<br/>
 
<br/>
        if( held &amp; KEY_A)
<br/>
       printf("Key A is pressed\n");
<br/>
   else
<br/>
       printf("Key A is released\n");
<br/>
<br/>
        if( held &amp; KEY_B)
<br/>
            printf("Key B is pressed\n");
<br/>
        else
<br/>
            printf("Key B is released\n");
<br/>
 
<br/>
   if( held &amp; KEY_X)
<br/>
       printf("Key X is pressed\n");
<br/>
   else
<br/>
       printf("Key X is released\n");
<br/>
<br/>
        if( held &amp; KEY_Y)
<br/>
       printf("Key Y is pressed\n");
<br/>
        else    
<br/>
            printf("Key Y is released\n");
<br/>
 
<br/>
   if( held &amp; KEY_TOUCH)
<br/>
       printf("Touch pad is touched\n");
<br/>
   else
<br/>
       printf("Touch pad is not touched\n");
<br/>
<br/>
      swiWaitForVBlank();
<br/>
 
<br/>
      consoleClear();
<br/>
   }
<br/>
 
<br/>
   return 0;
<br/>
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Nds.h from libnds.
<br/>
<br/>
Contents of stdio.h:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
mod note: removed, we all have the same file, not sure what it adds to the thread.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Please help me out!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153401 - eKid - Sat Mar 29, 2008 4:42 pm</h4>
    <div class="postbody"><span class="postbody">What's happening is your program is freezing when it hits the swiWaitForVBlank(). That function waits until a vblank interrupt occurs (thus a new frame) before it returns. You need to add
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">irqInit();
<br/>
irqEnable( IRQ_VBLANK );
<br/>
</td> </tr></table><span class="postbody">
<br/>
to the beginning of your code before using swiWaitForVBlank. Those two lines will initialize/enable libnds's interrupt handler and enable the vblank interrupt.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
