<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Base Pointer to a derived class - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Beginners > Base Pointer to a derived class</h2>
<div id="posts">
<div class="post">
    <h4>#174285 - Azenris - Wed May 26, 2010 8:25 pm</h4>
    <div class="postbody"><span class="postbody">A little confused why I can't have this. Currently I get the error shown below
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">1&gt;c:/Users/Azenris/Desktop/RedTemple/RedTemple/arm9/source/state_titlescreen.cpp(120): error: no matching function for call to 'CState_TitleScreen::MoveToState(CState_NewGame*)'
<br/>
1&gt;../nexlib_dir/include/state.h(74): note: candidates are: void IState::MoveToState(IState*, bool, int)</td> </tr></table><span class="postbody">
<br/>
<br/>
CState_TitleScreen inherits from IState where the MoveToState function exists. I thought I could use a pointer to the base, i did with with all my entities. They become players, enemies, object, special effects and all in a list of the base entity class.
<br/>
<br/>
Is it something to do with the function being apart of the base class? Hmm this is confusing me :(
<br/>
<br/>
EDIT: I changed it slighly moving control from the state to the statemanager but its still the same problem
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">1&gt;c:/Users/Azenris/Desktop/RedTemple/RedTemple/arm9/source/state_splashscreen.cpp: In member function 'virtual void CState_SplashScreen::OnUpdate()':
<br/>
1&gt;c:/Users/Azenris/Desktop/RedTemple/RedTemple/arm9/source/state_splashscreen.cpp(68): error: no matching function for call to 'CStateManager::MoveToState(CState_TitleScreen*, bool, int)'
<br/>
1&gt;../nexlib_dir/include/state_manager.h(41): note: candidates are: void CStateManager::MoveToState(IState*, bool, int)</td> </tr></table><span class="postbody">
<br/>
<br/>
EDIT: here is some more info incase I didnt provide enough
<br/>
<br/>
state_splashscreen.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// =================================================================================
<br/>
// CLASS: CState_SplashScreen
<br/>
class CState_SplashScreen : public IState
<br/>
{
<br/>
    // other stuff
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
state_manager.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// ================================================================================
<br/>
// CLASS: CStateManager
<br/>
class CStateManager : public IManager
<br/>
{
<br/>
    // other stuff
<br/>
    void MoveToState(IState *pNewState, bool fade = true, int speed = 8);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
state_manager.cpp</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// ================================================================================
<br/>
// MoveToState
<br/>
// @ pNewState:      state to go next
<br/>
// @ fade:         whether or not to fade out
<br/>
// @ speed:         speed to fade out
<br/>
void CStateManager::MoveToState(IState *pNewState, bool fade, int speed)
<br/>
{
<br/>
   m_pStateToMove = pNewState;
<br/>
<br/>
   if (fade)
<br/>
   {
<br/>
      m_pCurrentState-&gt;FadeOut(SCREEN_MAIN, FADE_BLACK, speed);
<br/>
      m_pCurrentState-&gt;FadeOut(SCREEN_SUB, FADE_BLACK, speed);
<br/>
   }
<br/>
   else
<br/>
   {
<br/>
      m_pCurrentState-&gt;SetMoveOn();
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
game.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class CState_SplashScreen;
<br/>
<br/>
class CGame
<br/>
{
<br/>
     // other stuff
<br/>
    CState_TitleScreen *GetState_TitleScreen(void) const;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
game.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "state_splashscreen.h"
<br/>
CState_TitleScreen *CGame::GetState_TitleScreen(void) const {return m_pState_TitleScreen;}</td> </tr></table><span class="postbody">
<br/>
<br/>
the error call
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">g_pGame-&gt;GetStateManager()-&gt;MoveToState(g_pGame-&gt;GetState_TitleScreen(), true, 4);</td> </tr></table><span class="postbody"><br/>_________________<br/>&lt;Robert Morley&gt;
<br/>
<a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"><br/><br/>Last edited by Azenris on Wed May 26, 2010 9:14 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#174286 - Miked0801 - Wed May 26, 2010 9:14 pm</h4>
    <div class="postbody"><span class="postbody">Offhand, it looks like you are passing different parameters to each function?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174287 - Azenris - Wed May 26, 2010 9:18 pm</h4>
    <div class="postbody"><span class="postbody">But the states are all
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">&lt;whatever state&gt; : public IState</td> </tr></table><span class="postbody">
<br/>
<br/>
So passing in &lt;whatever state&gt; should be ok for a IState * parameter
<br/>
<br/>
EDIT:
<br/>
<br/>
if I change the </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">CState_TitleScreen *CGame::GetState_TitleScreen(void) const {return m_pState_TitleScreen;}</td> </tr></table><span class="postbody"> to </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">IState *CGame::GetState_TitleScreen(void) const {return m_pState_TitleScreen;}</td> </tr></table><span class="postbody">
<br/>
<br/>
It will work, but I dont want to return the base pointer I want it as the class it is. I don't get why it wouldnt work. Guess im misunderstanding something.
<br/>
<br/>
EDIT: ok I get it now, its because I was using forward declarations, thats the only time they saw the class and so didnt know they inherited from the IState, would be nice if you could forward declare that :(
<br/>
<br/>
anyway just added includes in the files the calls from state-to-state were made and now they 'see' they are infact from IState.
<br/>
<br/>
ty for any help<br/>_________________<br/>&lt;Robert Morley&gt;
<br/>
<a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174305 - Miked0801 - Thu May 27, 2010 7:12 pm</h4>
    <div class="postbody"><span class="postbody">Not to toot another board's horn or anything, but stackoverflow.com is an excellent resource for language specific questions and very quick answers.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
