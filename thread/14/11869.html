<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>STL and building time - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Beginners > STL and building time</h2>
<div id="posts">
<div class="post">
    <h4>#111212 - serratemplar - Mon Dec 04, 2006 10:31 pm</h4>
    <div class="postbody"><span class="postbody">I can build c code that runs on both VisualBoy Advance and real hardware with my current set up.  I'm currently trying to get some STL functionality in my gba programs and that is not going so well...
<br/>
<br/>
Here's my make.bat:
<br/>
<br/>
g++ -c -O3 -mthumb -mthumb-interwork hello.cpp
<br/>
g++ -mthumb -mthumb-interwork -o hello.elf hello.o
<br/>
objcopy -0binary hello.elf hello.bin
<br/>
<br/>
I wrote a gba rom that can print very ASCII characters to the screen at a target location that I'm experimenting with; it compiles, runs, and prints my favorite words anywhere I want.  When I add this line to the top
<br/>
<br/>
#include &lt;vector.h&gt;
<br/>
<br/>
I can compile code (the first line of my bat file goes off okay), along with any std::vector stuff i want, but when I try to link it (the second line of the bat file) I get this
<br/>
<br/>
"stl_algobase.h:180: internal error: unsupported relocation error"
<br/>
<br/>
My only reasonable google hit seemed to suggest this was a bug in the linker (I'm using v3.0.2) but my attempts to upgrade have been unsuccessful (no matter how many times I modifiy my path variables or change directory names, v3.0.2 still seems to be in control).
<br/>
<br/>
Any thoughts?  (Sorry if this is ambiguous, but I honestly don't know where to start looking to solve this issue, so I have little idea what to put in here.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111223 - tepples - Mon Dec 04, 2006 11:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>serratemplar wrote:</b></span></td> </tr> <tr> <td class="quote">I can build c code that runs on both VisualBoy Advance and real hardware with my current set up.  I'm currently trying to get some STL functionality in my gba programs and that is not going so well...
<br/>
<br/>
Here's my make.bat:
<br/>
<br/>
g++ -c -O3 -mthumb -mthumb-interwork hello.cpp
<br/>
g++ -mthumb -mthumb-interwork -o hello.elf hello.o
<br/>
objcopy -0binary hello.elf hello.bin</td> </tr></table><span class="postbody">
<br/>
For one thing, why are you using "g++" and not "arm-eabi-g++"? Which version of devkitARM are you using, or are you using something from before devkitARM?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111240 - serratemplar - Tue Dec 05, 2006 3:47 am</h4>
    <div class="postbody"><span class="postbody">I think I've found the nature of my problems here, which is a sad answer to your question.
<br/>
<br/>
I initially installed a devkitadv that came packed with cygwin (this was devkitadv 3, which I got like a bit over a year ago), which worked alright up until now.  The docs packed with this kit let me to use g++ as I did above, and it worked so I never thought it was weird at all.
<br/>
<br/>
When I tried to use STL, it threw the error I asked about in the first post.  A google hit suggested this was a linker bug, so I downloaded and set up devkitadv 4, uninstalling cygwin and its packed dka.  Now I've got an interesting issue.
<br/>
<br/>
When I enter g++ into my command line (this is in windows cmd.exe), I get this newfangled error:
<br/>
<br/>
Linkstub failed (g++ -&gt; arm-agb-elf-g++) = /cygdrive/c/devkitadv/... no such file or directory.
<br/>
<br/>
The reason there's "no such file or directory" is that I uninstalled cygwin.  However, it seems like cygwin left some sort of lasting shortcut on my system that the uninstall didn't get rid of.  I ran CCleaner to no avail, searched the registry for keys with g++ in them...again no go.  My google searches for "linkstubs" in windows or otherwise have come up empty, except for debugging OpenOffice (which sadly isn't applicable I've determined).  Using gcc on the commandline generates the exact same error.
<br/>
<br/>
I don't suppose anyone's heard of such an error of even wrangled with it before?
<br/>
<br/>
...if I could rename this thread to What is a "Linkstub" (damn you, Cygwin), I certainly would. =)
<br/>
<br/>
Thanks for your time; any other info you need from me, please ask.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111388 - tepples - Wed Dec 06, 2006 4:15 am</h4>
    <div class="postbody"><span class="postbody">Please uninstall devkitadv r3 and devkitadv r4 and install devkitPro Updater from <a href="http://www.devkitpro.org/" target="_blank">http://www.devkitpro.org/</a> .
<br/>
<br/>
You can rename a topic by editing your first post and changing its Subject line.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111544 - serratemplar - Thu Dec 07, 2006 2:44 pm</h4>
    <div class="postbody"><span class="postbody">Ok, I have done as tepples suggested; I no longer see the "linkstub" errors on the dos emu commandline.  Now I've got MySys (?) which looks a lot like cygwin, and no idea how to compile with it =)
<br/>
<br/>
I've been going thru docs left and right and I can't seem to find the doc that would tell me how to get started with the devkitpro environment.  I tried to set it up for VC6++ and Visual Studio, but both of my attempts failed; I'm not quite sure why.  I did my best to follow the instructions outlined on <a href="http://www.devkitpro.org." target="_blank">www.devkitpro.org.</a>
<br/>
<br/>
Anyway, I don't need VC working; I'm quite fine on the commandline.  Could anyone point me in the direction of what docs I should start with?  (Like what program I use to compile, etc)
<br/>
<br/>
Again, thank you all for your time.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111546 - Sausage Boy - Thu Dec 07, 2006 4:00 pm</h4>
    <div class="postbody"><span class="postbody">The easiest way is to copy a template from the devkitpro/examples/gba/ folder. Rename it to the name of your project and drop your .c/.cpp files into the source directory. Using msys, change into that directory and type 'make'.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#111647 - serratemplar - Fri Dec 08, 2006 6:15 pm</h4>
    <div class="postbody"><span class="postbody">ty SausageBoy; I'll give that a go.  Thank you all for helping me to get rolling.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
