<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Hacking the Supercard ... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Flash Equipment > Hacking the Supercard ...</h2>
<div id="posts">
<div class="post">
    <h4>#36163 - Vince - Tue Feb 15, 2005 3:18 pm</h4>
    <div class="postbody"><span class="postbody">Hello guys,
<br/>
<br/>
Here are the SC inner pics (attn 56Kers, big pics)
<br/>
<br/>
<a href="http://if2a.free.fr/Pics/SC_front.jpg" target="_blank">http://if2a.free.fr/Pics/SC_front.jpg</a>
<br/>
<a href="http://if2a.free.fr/Pics/SC_back.jpg" target="_blank">http://if2a.free.fr/Pics/SC_back.jpg</a>
<br/>
<br/>
(destructive opening, as everything is glued together so be prepared to glue back if you want to attempt).
<br/>
<br/>
The part inventory :
<br/>
+ Lattice ispMACH LC4128V : CPLD (Mach4000 family)
<br/>
+ HY57V561620CTP-H (Hynix): 256Mbits SDRAM, 3.3V, PC133-CL3
<br/>
+ M5M5V208AKV (Mitsubishi): 2Mbit CMOS SRAM , 2.7-3.6V, 70ns
<br/>
+ 29LV400TC-90PFTN (Fairchild also avail. from Fujitsu): 4Mbits FLASH, 90ns, 3V
<br/>
<br/>
FLASH mem means the firmware upgrades are permanent (I thought you had to keep the file on the CF). I also looked at the firmware upgrade binary. Does not seems like a GBA ROM (header is missing, probably hardcoded into the CPLD) or maybe compressed.
<br/>
<br/>
My aim is to have a free software SC patching utility and maybe a firmware as well.
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36192 - gb_feedback - Tue Feb 15, 2005 10:52 pm</h4>
    <div class="postbody"><span class="postbody">Nice pix. I just got one of those carts today, so you saved me breaking it open! Thanks.
<br/>
<br/>
(Looks like a 50MHz xtal too)<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36193 - Dwedit - Tue Feb 15, 2005 11:05 pm</h4>
    <div class="postbody"><span class="postbody">How similar to the supercard to the movie player?  Would hacks for one work on the other?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36198 - Lynx - Tue Feb 15, 2005 11:29 pm</h4>
    <div class="postbody"><span class="postbody">Well.. Hardware wise, the GBA Movie Player only has 2 chips.. and 1 has the manufacturer info sanded off..  so you can't even tell what kind of chip it is.
<br/>
<br/>
Edit: what hacks are avaiable for the Movie Player?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36217 - tepples - Wed Feb 16, 2005 4:49 am</h4>
    <div class="postbody"><span class="postbody">There are rumors on the pocket heavens that the GBAMP is just a Supercard without the 32 MiB RAM, that their I/O is similar.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36223 - Lynx - Wed Feb 16, 2005 5:40 am</h4>
    <div class="postbody"><span class="postbody">Ah.. Never thought of it that way.  I figured it was sanded so that it would be harder to reverse engineer..  not cause they copied someone elses design..  :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36235 - Vince - Wed Feb 16, 2005 10:22 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
Thanks for all the info. 
<br/>
Tepples, you surely meant the SC is the same as the GBAMP as the SC is newer than the GBAMP. This would ease hacking to have that info confirmed ...
<br/>
<br/>
As for the quartz, gb_feedback, I'd rather think it's 50Khz than 50Mhz. The latter would require far too much battery power IMHO...
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36243 - gb_feedback - Wed Feb 16, 2005 12:59 pm</h4>
    <div class="postbody"><span class="postbody">Not sure Vince. It would take about 35mA, it's true. Just can't think what use a 50kHz Oscillator could be put to in this application, whereas the SDRAM certainly needs a fast clock.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36245 - Vince - Wed Feb 16, 2005 1:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Not sure Vince. It would take about 35mA, it's true. Just can't think what use a 50kHz Oscillator could be put to in this application, whereas the SDRAM certainly needs a fast clock.</td> </tr></table><span class="postbody">
<br/>
Interesting. You are probably right concerning the SDRAM which surely requires fast refresh cycles (as it's PC133). This would also explain why the battery time is so much decreased when using a Supercard VS a normal flash cart.
<br/>
<br/>
Is there a way to tell whether the XTAL is 50Mhz instead of 50Khz? Quoting from the package, it's not so obvious... 
<br/>
<br/>
Where did you get the 35mA fact? The package seems to indicate something like 0.35 but I'm not usre either.
<br/>
<br/>
Thanks for the answers,
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36249 - gb_feedback - Wed Feb 16, 2005 2:21 pm</h4>
    <div class="postbody"><span class="postbody">I did a search for the top line of the writing on the can but didn't come up with anything. The 35mA was from a catalogue of similar crystal oscillators of similar freqency, so purely a guess. I downloaded the data sheet for the Hynix SDRAM, and it talks about a system clock of, for example, up to 133MHz. 
<br/>
<br/>
You could compare the (possible) 35mA with some <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3880&amp;start=0" target="_blank">measurements </a>I made some time ago.
<br/>
<br/>
If I get time I'll measure how much current this cart takes.
<br/>
<br/>
A couple more things. I could not see any similar looking oscillators in our catalogue with a frequency as low as 50KHz. I guess you'd need either to id the manufacturer or put an oscilloscope on the output pin to be sure.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36265 - Dwedit - Wed Feb 16, 2005 6:33 pm</h4>
    <div class="postbody"><span class="postbody">I was thinking about the possibility of making a multiboot program that would wrap around the arm instructions and log all DMA.  I'm still wondering where I could store such a program in a location that won't get overwritten.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36281 - gb_feedback - Wed Feb 16, 2005 8:48 pm</h4>
    <div class="postbody"><span class="postbody">I made a quick measurement with a Bookreader program on the CF cart, so we could compare it with the last time I did this.
<br/>
<br/>
Bookreader V4.91 (Light Off) F2A cart.........17mA 
<br/>
Bookreader V4.91 (Light On) F2A cart.........41mA 
<br/>
Bookreader V4.91 (Light On) CF  cart.........70mA 
<br/>
<br/>
So the CF cart seems to take 29mA MORE than the F2A under these conditions. You can compare that with the fact that turning on the light takes 22mA. And the GBA SP + F2A takes 17mA.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36326 - Vince - Thu Feb 17, 2005 10:24 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
Thanks for the measurements. I also had a great time reading your interesting findings about power consumption in your other thread.
<br/>
The power consumption from the CF are absolutely HUGE compared to flash carts. This is no suprise the battery time is so much decreased! Isn't there a way to not power the CF while not doing anything so save battery power (just as the CPU can use idle calls)?
<br/>
<br/>
Dwedit : thanks for helping here. I also tried looking at the firmware upgrade with no success. It's probably compressed or is stripped from its header (surely hardcoded found in the CPLD). Having a SC firmware dump would be great.
<br/>
<br/>
I tend to think tepples observations about the SC being a ripoff of the GBAMP HW are correct (quoting from the original GBAMP site, they even took the same picture design and logo!). From what I learnt in the pocket heaven GBAMP thread, there is a mean to flash your own firmware to the cart as this is what they do when GBAMP are dead (you'll need a second GBAMP to do that apparently).
<br/>
The other way around would be to try flashing a fake firmware update by renaming your code rom into firmware.scu. However, I don't know whether there is a protected boot block that acts as a recovery flasher (I don't have a flash burner at hand to recover flash failures) and don't want to end up with a 'dead' SC.
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36332 - MumblyJoe - Thu Feb 17, 2005 3:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gb_feedback wrote:</b></span></td> </tr> <tr> <td class="quote">I made a quick measurement with a Bookreader program on the CF cart, so we could compare it with the last time I did this.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks again for making bookreader more power friendly by the way, but could you test it out with a commercial game (not condoning piracy, rip one of your own etc etc) just out of interest, something power heavy if possible (I hear pokemon is a good power drainer but I havent noticed this myself, would have to be leaf.fire as saphire/ruby use RTC). I mainly request this because the bookreader doesn't exactly represent the average use of the gba.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36336 - gb_feedback - Thu Feb 17, 2005 4:23 pm</h4>
    <div class="postbody"><span class="postbody">If I get the chance I will, but I suspect the answer will be that the SC is around 29mA worse. I can't tell you what a pain these measurements are if you have less than 5 hands.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#36520 - Vince - Wed Feb 23, 2005 11:02 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
Did a little more twiddling with my SC yesterday and upgraded to 1.43. Much better IMHO with long filenames.
<br/>
Concerning the upgrade, it's the name of the file (upgrade.scu) that triggers it. In the header is the version in plaintext.  There is a data check (CRC?) before flashing, meaning that foolling the flasher with a dumb file would probably not work.
<br/>
I am not sure whether there is a read-only bootblock on FLASH that would protect against corrupt/failed flashing so I did not go any further with my dumb file. The percentage growing while flashing the official firmware stopped 3 times (at 33, 66 and 99%) surely maybe there is indeed a bootblock and the 3 others are used for firmware usage (the FLASH chip contains 4 block IIRC).
<br/>
<br/>
That's it for today.
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37246 - Vince - Wed Mar 09, 2005 10:15 am</h4>
    <div class="postbody"><span class="postbody">Hiya,
<br/>
<br/>
Good news today : Dwedit has managed to dump the GBAMP firmware. This opens new possibilities for hacking the SC as the HW is very similar between both.
<br/>
<br/>
More info on the thread : <a href="http://forum.gbadev.org/viewtopic.php?t=5144" target="_blank">http://forum.gbadev.org/viewtopic.php?t=5144</a>
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46989 - look - Sun Jul 03, 2005 3:42 am</h4>
    <div class="postbody"><span class="postbody">As mentioned in several places the supercard wont currently work with passme/wifime.
<br/>
<br/>
Is the problem that the SCs bootmenu overides everything else?
<br/>
<br/>
Can one of you bright sparks do some hacking on the supercard to disable the bootloader as someone did with one of the standard gba EF cards.
<br/>
<br/>
Its not going to be practical to run commercial .NDS roms from the supercard as its so slow but it would be good for homebrew games, emulators and apps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46992 - tepples - Sun Jul 03, 2005 4:40 am</h4>
    <div class="postbody"><span class="postbody">Problem is that the bootloader is designed to run in GBA mode. "Disabling the bootloader" doesn't work because the games are stored on block-oriented flash memory and have to be copied into the cart's RAM to run. The code to do this is also designed to run in GBA mode.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46995 - look - Sun Jul 03, 2005 4:55 am</h4>
    <div class="postbody"><span class="postbody">What does this mean in terms of flashing the DS firmware using either passme or wifime?
<br/>
<br/>
That the SC is not accessible in DS mode because nothing is in loaded?
<br/>
<br/>
people have suggested booting in GBA mode loading the file through the SC menu to get the rom in memory then power off and try again while its still in memory.
<br/>
<br/>
With the supercard if you reboot after loading something it stays in the memory for a short while. Going back into the menu after a reboot shows a cart in the slot.
<br/>
<br/>
I've never been able to go back to a rom after this so I doubt it would work</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47006 - look - Sun Jul 03, 2005 7:36 am</h4>
    <div class="postbody"><span class="postbody">Just had a look on ebay with the intention of selling my supercard in order to get something that does work.
<br/>
<br/>
There is a seller now doing SC + free P&amp;P for ?30 in the UK
<br/>
<br/>
I paid ?60 for mine :(
<br/>
<br/>
At this price surely its worth buying one to hack to pieces</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55576 - pipomolo42 - Thu Sep 29, 2005 4:44 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I've read this thread with interrest, and would really like to know if there is any { 3rd party | homebrew | open source } project for this hardware for now ?
<br/>
<br/>
Thanks to the picture posted by Vince (http://if2a.free.fr/Pics/SC_back.jpg) and the doc available on <a href="http://www.latticesemi.com/products/cpld/4000bc/index.cfm," target="_blank">http://www.latticesemi.com/products/cpld/4000bc/index.cfm,</a> I think that the 6 pins available on the back of the SC are for JATG access to the CPLD. On the pic you can clearly see that one goes to pin 52 (TMS), and that another one goes to pin 74 (TDO) ...
<br/>
<br/>
I, for now, do really know nothing about CPLD and FPGA, but my guess is that they first solder the chip to the PCB, and then use JTAG to program the CPLD and the Flash.
<br/>
<br/>
Of course, I will need to read many docs about these technologies before being able to make "correct assumptions", but here is what I have for now :
<br/>
- maybe we can read and write the content of Flash through JTAG (sounds probable, else the JTAG points would be useless)
<br/>
- maybe we can also read the content of CPLD through JTAG (less probable ?)
<br/>
- maybe we can even write the content of CPLD through JTAG (evel less probable ? but it could allow us to redefine completely the way the GBA or DS sees the SuperCard ! Would be lovely for the dslinux project ;) which would then get 32 MB more RAM)
<br/>
<br/>
- the CPLD is the "main" part, interfacing between the GBA port, the SDRAM, Flash and CompactFlash ... then I don't understand what is the exact role of the CPLD vs Flash...
<br/>
<br/>
<br/>
- solution 1 : Flash contains the "botloader" for the supercard, it is code executed by the GBA, with the CPLD in between which "intercepts" some of the GBA calls and takes actions (read CF card, copy CF to ram ...)
<br/>
<br/>
- solution 2 : part of the CPLD is routed as a microcontroller, and flash contains code for it as well as for the GBA ... this sound much more impossible, improbable and complex, but also much more powerful ...
<br/>
<br/>
<br/>
Now, I wonder : does this post sound completely wrong ? what are your comments, experiences, or impressions ?
<br/>
<br/>
<br/>
Regards,
<br/>
Alex</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55588 - Vince - Thu Sep 29, 2005 6:48 pm</h4>
    <div class="postbody"><span class="postbody">Hello !
<br/>
<br/>
Interesting post here pipomolo. I'll try to add more to the pot here:
<br/>
<br/>
+ AFAIK there is no homebrew stuff available for the SC. I once wrote a PM to chism (the author of the GBAMP hack) to offer him to fund an SC hack and he advised me to simply try his GBAMP routines with the SC (given that SC and GBAMP are more or less rippoffs of each other). Did not have time to do this but may be worth trying
<br/>
<br/>
+ the link you gave to the Lattice site gives a 404. When I did the SC parts inventory, I could not find information either about the particular CPLD used in the SC either. Just hope it's a typo from your part and that docs are really available...
<br/>
<br/>
+ your assumption about how they manufacture the chip seem right to me. However, I think the JTAG interface is only used to burn the VHDL (or whatever) in the CPLD and that's all. This means it would not be possible to read/write anything with JTAG (fuse are burnt to prevent R/W access to the CPLD and I'd tend to think the Flash is not connected to this interface)
<br/>
<br/>
+ as for the CPLD, I think solution #1 is the right one. Keep in mind CF relies on ATA behind the scenes. A CPLD is suited here to handle the protocol implementation. The CPLD can also be used to disallow reads to the flash once the SC has booted (and that everything is in RAM). However, given that you can change game on the fly (IIRC, this is done via one hotkey combination but I may be wrong), this may not be the case (the SC needs the firmware routines to copy the ROM to its internal RAM).
<br/>
<br/>
That's it for now, but I agree it is a very interesting project for homebrew.
<br/>
<br/>
Vinz
<br/>
<br/>
PS: how is your EFA hacking going? Did you successfully RE the protocol?<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55597 - pipomolo42 - Thu Sep 29, 2005 8:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vince wrote:</b></span></td> </tr> <tr> <td class="quote">the link you gave to the Lattice site gives a 404. When I did the SC parts inventory, I could not find information either about the particular CPLD used in the SC either. Just hope it's a typo from your part and that docs are really available...
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Of course, the correct URL is : <a href="http://www.latticesemi.com/products/cpld/4000bc/index.cfm" target="_blank">http://www.latticesemi.com/products/cpld/4000bc/index.cfm</a> and more exactly <a href="http://www.latticesemi.com/products/cpld/4000bc/resources.cfm?ty=32&amp;catid=130" target="_blank">http://www.latticesemi.com/products/cpld/4000bc/resources.cfm?ty=32&amp;catid=130</a> (direct access to the datasheet, but you'll need to fill in a web form to get a (free) account to download them).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">PS: how is your EFA hacking going? Did you successfully RE the protocol?</td> </tr></table><span class="postbody">
<br/>
<br/>
Not really far : I gave up on reading &amp; understanding the firmware assembly dump, maybe it was too hard, or not so fun any longer, or I am just too lazy ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58890 - pipomolo42 - Thu Oct 27, 2005 12:08 am</h4>
    <div class="postbody"><span class="postbody">just to make sure it's not lost, here is a picture of my CF SC, with the JTAG traced : <a href="http://boeglin.org/static/supercard/supercard_cf.jpg" target="_blank">http://boeglin.org/static/supercard/supercard_cf.jpg</a>
<br/>
<br/>
I noted these differences with Vince's picture :
<br/>
<br/>
- RAM is faster (70ns instead of 90ns)
<br/>
- SRAM is bigger (or at least, the supplier website has only references to 4Mb chips) but I haven't check if all is usable yet.
<br/>
<br/>
And JTAG works very well with the BSDL file provided by lattice and the JTAG tool from <a href="http://openwince.sourceforge.net/jtag/" target="_blank">http://openwince.sourceforge.net/jtag/</a> with a cable build from this scheme : <a href="http://evilg.home.t-link.de/jtag-howto/" target="_blank">http://evilg.home.t-link.de/jtag-howto/</a> (with the addition of two AA batteries to power the CPLD)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58924 - Vince - Thu Oct 27, 2005 9:45 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
That's great news ! One question though : what do you mean by "works very well"? I see that the GPLed jtag program for openwince does not have support for Lattice parts so how can you assume it is working? Could you also precise what use has the BSDL file that Lattice provides?
<br/>
<br/>
Thanks for the info,
<br/>
<br/>
Vince<br/>_________________<br/>Reclaim control of your F2A/F2AU with <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=32532" target="_blank">if2a</a> !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58938 - pipomolo42 - Thu Oct 27, 2005 12:55 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
First, I downloaded the cvs version of the jtag tool, which includes support for the lc4032v cpld in the data/lattice directory.
<br/>
<br/>
Then, I downloaded the file for "4128V 100pin" from <a href="http://www.latticesemi.com/" target="_blank">http://www.latticesemi.com/</a> in Downloads/BSDL , added an entry in data/lattice/PARTS like </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0001100000010001  lc4128v-tqfp100        LC4128V-TQFP100</td> </tr></table><span class="postbody"> and added the directory, as a copy of the lc4032v one, and just used the "bsdl2jtag" command provided by jtag-tool to produce a usable file from the BSDL.
<br/>
<br/>
After ./configure, make, make install, I was able to to use the tool, it detected the chip correctly, and I was able to read and write the chip input/output status ...
<br/>
<br/>
Now, there are two things that can be done out of this :
<br/>
<br/>
- trace (on the board) which I/O are used from CPLD to flash, and you can then read and write the flash through the CPLD.
<br/>
<br/>
- modify the file obtained from "bsdl2jtag", add the In System Configuration commandsto it, and if they didn't bother to fry the CPLD fuse, we can read and write the "mapping" of the CPLD (But I have to read a lot more about this, first ;) ).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59828 - darkfader - Fri Nov 04, 2005 11:17 am</h4>
    <div class="postbody"><span class="postbody">Anyone tried to replace the oscillator yet? I've heard Supercards can't run at fastest mode. Perhaps I should confirm this myself.
<br/>
Changing the CPLD contents is going a bit too far imho, but might be required to fix timing.
<br/>
Just in case you didn't know yet: you can rewrite the firmware with the <a class="postlink" href="http://cvs.sourceforge.net/viewcvs.py/devkitpro/projects/nds/bootstrap/flashmp/" target="_blank">flashmp</a> utility.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
