<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Juggling large amounts of sprite data - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Juggling large amounts of sprite data</h2>
<div id="posts">
<div class="post">
    <h4>#10292 - poslundc - Mon Sep 01, 2003 9:21 pm</h4>
    <div class="postbody"><span class="postbody">I was wondering if anyone could give me some insight into this problem...
<br/>
<br/>
A game like Secret of Mana for the SNES uses 32x32 sprites for its characters/enemies. Each character/enemy has about 24 different poses, and there are up to 6 characters/enemies on the screen at any given time.
<br/>
<br/>
Assuming 16-colour mode, this would require 72K of sprite tile data to implement, well over the 32K of character memory available for sprites. And that's not including things like visual effects and status displays!
<br/>
<br/>
I'm hoping to code something on a comparable scale (except with up to eight characters), and my first instinct was not to place all 24 poses in VRAM and only copy in those that I need. The problem is that the characters switch poses extremely frequently, and any of them could be called up at just about any time.
<br/>
<br/>
So here's the question: if I try to code a system where nearly every frame I copy 8 x 32 x 32 pixel's worth of data into character memory (basically 4K), am I trying to bite off more than the hardware will be able to chew? For that matter, am I doing something ludicrous?
<br/>
<br/>
If so, can someone perhaps advise me of a better way to handle this much sprite data?
<br/>
<br/>
Thanks,
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10293 - tepples - Mon Sep 01, 2003 9:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">my first instinct was not to place all 24 poses in VRAM and only copy in those that I need.</td> </tr></table><span class="postbody">
<br/>
Good instinct.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">So here's the question: if I try to code a system where nearly every frame I copy 8 x 32 x 32 pixel's worth of data into character memory (basically 4K), am I trying to bite off more than the hardware will be able to chew?</td> </tr></table><span class="postbody">
<br/>
Heck no; it'll work fine. If you use uncompressed sprite data, you can DMA-copy sprite cel data from EWRAM to VRAM at 4 cycles per 2 bytes. With 68 scanlines in vblank, and 1232 cycles per scanline, this equals over 40 KB copied in one vblank.
<br/>
<br/>
Please read details in <a class="postlink" href="http://www.pineight.com/gba/managing-sprite-vram.txt" target="_blank">my white paper on GBA sprite cels</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10294 - poslundc - Mon Sep 01, 2003 9:45 pm</h4>
    <div class="postbody"><span class="postbody">Sweet, that's just what I was looking for. Thanks.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
