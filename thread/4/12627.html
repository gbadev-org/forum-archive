<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>(CAPTURED!)Hunting for a sed expression for linking errors.. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > (CAPTURED!)Hunting for a sed expression for linking errors..</h2>
<div id="posts">
<div class="post">
    <h4>#120718 - Izhido - Mon Mar 05, 2007 7:53 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys!
<br/>
<br/>
I have the following program:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void Test1();
<br/>
<br/>
void Test2(int a);
<br/>
<br/>
void Test3(float b, char* c);
<br/>
<br/>
int main()
<br/>
{
<br/>
   Test1();
<br/>
   Test2(5);
<br/>
   Test3(8.3f, "hello!");
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This program, though compiles, does not "link" (evidently :D ).
<br/>
<br/>
When compiled by Visual C++ 2005 Express  / Win32 platform, it gives us the following output:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
------ Rebuild All started: Project: LinkingErrorTestWin32, Configuration: Debug Win32 ------
<br/>
Deleting intermediate and output files for project 'LinkingErrorTestWin32', configuration 'Debug|Win32'
<br/>
Compiling...
<br/>
main.cpp
<br/>
Linking...
<br/>
main.obj : error LNK2019: unresolved external symbol "void __cdecl Test3(float,char *)" (?Test3@@YAXMPAD@Z) referenced in function _main
<br/>
main.obj : error LNK2019: unresolved external symbol "void __cdecl Test2(int)" (?Test2@@YAXH@Z) referenced in function _main
<br/>
main.obj : error LNK2019: unresolved external symbol "void __cdecl Test1(void)" (?Test1@@YAXXZ) referenced in function _main
<br/>
C:\PRJ\LinkingErrorTest\Debug\LinkingErrorTestWin32.exe : fatal error LNK1120: 3 unresolved externals
<br/>
Build log was saved at "file://c:\PRJ\LinkingErrorTest\LinkingErrorTestWin32\Debug\BuildLog.htm"
<br/>
LinkingErrorTestWin32 - 4 error(s), 0 warning(s)
<br/>
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Additionally, the "Error List" window shows the 3 linking errors.
<br/>
<br/>
When compiled with devkitPro (also using Visual C++ 2005 Express), this is the output:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
------ Rebuild All started: Project: LinkingErrorTestNDS, Configuration: Debug Win32 ------
<br/>
Performing Makefile project actions
<br/>
clean ...
<br/>
main.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /c/PRJ/LinkingErrorTest/LinkingErrorTestNDS/Debug/main.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/C/PRJ/LinkingErrorTest/LinkingErrorTestNDS -I/C/devkitPro/libnds/include -I/c/PRJ/LinkingErrorTest/LinkingErrorTestNDS/Debug -DARM9 -fno-rtti -fno-exceptions -c /C/PRJ/LinkingErrorTest/LinkingErrorTestNDS/main.cpp -o main.o
<br/>
linking LinkingErrorTestNDS.elf
<br/>
main.o: In function `main':
<br/>
c:/PRJ/LinkingErrorTest/LinkingErrorTestNDS/main.cpp(9): undefined reference to `Test1()'
<br/>
c:/PRJ/LinkingErrorTest/LinkingErrorTestNDS/main.cpp(10): undefined reference to `Test2(int)'
<br/>
c:/PRJ/LinkingErrorTest/LinkingErrorTestNDS/main.cpp(11): undefined reference to `Test3(float, char*)'
<br/>
collect2: ld returned 1 exit status
<br/>
make[1]: *** [/c/PRJ/LinkingErrorTest/LinkingErrorTestNDS/LinkingErrorTestNDS.elf] Error 1
<br/>
make: *** [Debug] Error 2
<br/>
Build log was saved at "file://c:\PRJ\LinkingErrorTest\LinkingErrorTestNDS\Debug\BuildLog.htm"
<br/>
LinkingErrorTestNDS - 0 error(s), 0 warning(s)
<br/>
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ==========
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
However, this time, the Error List window shows no linking errors.
<br/>
<br/>
I've been told this is because of the "regular expression" submitted to the "sed" command line tool during compilation. I must confess I haven't the slightest idea of how to build sed regexp strings.
<br/>
<br/>
Anyone here with sed expertise can provide us with an regexp that let us see linking errors in the Error List tab of Visual C++ 2005 Express? 
<br/>
<br/>
The current, recommended regexp for Visual C++ 2005 Express is:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
's/\(.[a-zA-Z]\+\):\([0-9]\+\):/\1(\2):/'
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Any help will be greatly appreciated!
<br/>
<br/>
- Izhido</span><span class="gensmall"><br/><br/>Last edited by Izhido on Wed Mar 07, 2007 7:37 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#120723 - rodif - Mon Mar 05, 2007 8:17 pm</h4>
    <div class="postbody"><span class="postbody">*must read full comment before posting*</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120745 - gmiller - Mon Mar 05, 2007 10:29 pm</h4>
    <div class="postbody"><span class="postbody">Not sure what rodif is worried about but the regular expression to recognize link error output should be similar to the current one which is targeted at the error messages from the compiler.  I do not know if the ones you are seeing are the generic enough to be used for building a regular expression that will catch just link errors so I will need to do a little looking.  If I can find a definition of the link error format I will post it and if I can a regular expression to find it.  I need the same thing for a project I want to do as well so the effort is helping me as well.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120750 - keldon - Mon Mar 05, 2007 10:44 pm</h4>
    <div class="postbody"><span class="postbody">Do you have a new line at the end of the file? And do you have the function stubs filled out? Why not first try to compile a file with only main. Then go straight for printing "hello world".</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120780 - wintermute - Tue Mar 06, 2007 1:41 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Izhido wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Anyone here with sed expertise can provide us with an regexp that let us see linking errors in the Error List tab of Visual C++ 2005 Express?
<br/>
<br/>
The current, recommended regexp for Visual C++ 2005 Express is:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
's/\(.[a-zA-Z]\+\):\([0-9]\+\):/\1(\2):/'
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Any help will be greatly appreciated!
<br/>
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Took me a bit of fiddling to find what you were actually referring to here but I found it in the end. My msvc++ 2005 Express had the error list switched off and was only showing the output from make.
<br/>
<br/>
Anyway, this should do what you want
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make 2&gt;&amp;1 | sed -e 's/\(.[a-zA-Z]\+\):\([0-9]\+\):/\1(\2):/' -e 's/\(undefined reference\)/error : \1/'
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Keldon: Did you actually read the post, that's a pretty odd reponse.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120857 - rodif - Tue Mar 06, 2007 8:56 pm</h4>
    <div class="postbody"><span class="postbody">I think keldon did the same thing i did; Read the part about funcitons not linking then respond telling him how to properly link the functions in question. Instead of reading the whole post.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120859 - keldon - Tue Mar 06, 2007 9:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>rodif wrote:</b></span></td> </tr> <tr> <td class="quote">I think keldon did the same thing i did; Read the part about funcitons not linking then respond telling him how to properly link the functions in question. Instead of reading the whole post.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, I didn't read the post properly at all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120863 - rodif - Tue Mar 06, 2007 9:32 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://www.xs4all.nl/~borkhuis/vxworks/vxw_pt1.html#1.13" target="_blank">http://www.xs4all.nl/~borkhuis/vxworks/vxw_pt1.html#1.13</a>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Q: When using Visual Studio as development environment and the GNU compiler to compile Visual Studio does not recognise the output of the compiler. 
<br/>
<br/>
A: Using the following program to filter the output of the GNU compiler it is possble to compile the code: gnu2msdev.cpp 
<br/>
The rule to compile using this program is (the name of the comiled executable is gnu2msdev.exe: 
<br/>
<br/>
%.o : %.cpp
<br/>
        -$(CXX) $(C++FLAGS) $(ADD_FLAGS) -c $&lt; -o $(@F) 2&gt; $(TMP)\ccerr.txt
<br/>
        @type $(TMP)\ccerr.txt | gnu2msdev
<br/>
<br/>
(From: <a href="mailto:f.pertin@staubli.com">f.pertin@staubli.com</a>) 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've used this program before. Maybe you can make some changes to it to get what you're looking for?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120960 - Izhido - Wed Mar 07, 2007 7:32 pm</h4>
    <div class="postbody"><span class="postbody">WinterMute: Absolutely wonderful! Works like a charm!
<br/>
<br/>
Thanks!
<br/>
<br/>
PS.: This deserves a change on the devkitPro site FAQ for integration with Visual Studio :D .</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
