<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Depress key interrupt. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Depress key interrupt.</h2>
<div id="posts">
<div class="post">
    <h4>#21552 - mr_schmoe - Mon May 31, 2004 9:12 pm</h4>
    <div class="postbody"><span class="postbody">Can the GBA be set up to fire an interrupt when the player depresses and interrupt?
<br/>
<br/>
I've been trying to learn how to setup the keyboard interrupt, but I've noticed something. My keyboard handler routine doesn't get called when I depress a key, only when I press a key. Does that mean, I can't do what I'm talking about?<br/>_________________<br/>How many boards could the Mongols hoard, if the Mongol Hored got bored</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21554 - bats - Mon May 31, 2004 9:34 pm</h4>
    <div class="postbody"><span class="postbody">Depress means the same thing as press.
<br/>
And no, the interrupt does not fire when you release a key.
<br/>
<br/>
Ben</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21556 - mr_schmoe - Mon May 31, 2004 10:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Depress means the same thing as press.</td> </tr></table><span class="postbody">
<br/>
I new that. ;)<br/>_________________<br/>How many boards could the Mongols hoard, if the Mongol Hored got bored</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21558 - Akolade - Mon May 31, 2004 11:27 pm</h4>
    <div class="postbody"><span class="postbody">Doesn't depress mean release?? Yes, I believe it does.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21561 - keldon - Mon May 31, 2004 11:38 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://dictionary.reference.com/search?q=depress" target="_blank">actually means a bit of both</a> :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21575 - isildur - Tue Jun 01, 2004 3:20 am</h4>
    <div class="postbody"><span class="postbody">Depressing keys need Prozac.
<br/>
:)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21650 - tepples - Wed Jun 02, 2004 5:44 pm</h4>
    <div class="postbody"><span class="postbody">The GBA does not have a known key-release interrupt. I'll need more information about how you plan to use this interrupt in order to tailor a workaround to your needs.
<br/>
<br/>
If you just need an interrupt to happen when the player releases a given button, such as if you want to save power, you might try polling the buttons in a vblank ISR.
<br/>
<br/>
If you want to know with sub-frame precision when the player released the button, then try setting a few vcount interrupts (that is, change the vcount trigger scanline at the end of each vcount ISR) and polling the buttons then, or poll them in an hblank ISR.
<br/>
<br/>
Or do you need something else?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21652 - tepples - Wed Jun 02, 2004 6:38 pm</h4>
    <div class="postbody"><span class="postbody">Dupe<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21656 - expos1994 - Wed Jun 02, 2004 6:54 pm</h4>
    <div class="postbody"><span class="postbody">Here's how I'd try to handle this...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if (THE BUTTON IS PRESSED)    
<br/>
     key_pressed = 1;  //you pressed it
<br/>
else if (key_pressed == 1) //if you previously had it pressed...
<br/>
{
<br/>
     key_depressed = 1; //...then you depressed it.
<br/>
     key_pressed = 0;
<br/>
}
<br/>
<br/>
.
<br/>
.
<br/>
.
<br/>
<br/>
if (key_depressed == 1)
<br/>
{
<br/>
        &lt;&lt;your depressing code here.  I'm depressed just thinking about   what you would put here.&gt;&gt;
<br/>
        .
<br/>
        .
<br/>
        .  
<br/>
        key_depressed = 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
=============================
<br/>
<br/>
That makes sense to me...  It should pick up if you pressed a button and then depressed it.
<br/>
<br/>
Hope that works for you.
<br/>
---Chris</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21660 - isildur - Wed Jun 02, 2004 7:11 pm</h4>
    <div class="postbody"><span class="postbody">Yeah this is how I do it:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if((gba_readpad() &amp; PAD_UP) == 0)
<br/>
{
<br/>
   padUpPressed = 1; // set flag
<br/>
   // do pad pressed stuff
<br/>
}
<br/>
else
<br/>
{
<br/>
   // pad is no pressed
<br/>
   
<br/>
   if(padUpPressed) // if true, then we know it just has been released
<br/>
   {
<br/>
      // pad has been released
<br/>
      // do pad released stuff
<br/>
      padUpPressed = 0; // reset flag
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21669 - sajiimori - Wed Jun 02, 2004 8:17 pm</h4>
    <div class="postbody"><span class="postbody">This is the English police.  Please stop using the word 'depress' when you mean 'release'.  Thank you for your cooperation.
<br/>
<br/>
=)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
