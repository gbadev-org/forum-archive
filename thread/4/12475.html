<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Using variables to define location in a 2D array to write to - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Using variables to define location in a 2D array to write to</h2>
<div id="posts">
<div class="post">
    <h4>#118813 - neilio - Fri Feb 16, 2007 11:56 pm</h4>
    <div class="postbody"><span class="postbody">...or at least, that could be the source of my query
<br/>
<br/>
I'm working on a basic Sudoku program and so far I have a 9 x 9 2D array where each entry describes a cell in the Sudoku grid, which is translated to the screen as sprites. A cursor can be moved around the grid and a number entered into the cell location matching the cursor when the A key is released (at the moment, just a 1).
<br/>
<br/>
This works for most of the cells, except for some odd behaviour... basically:
<br/>
(1) The number entered at grid X 0, grid Y 8 appears at X 1, Y 0 instead
<br/>
(2) A similar thing happens for the other X locations on Y 8, where the number appears in the next column along and the top row instead
<br/>
(3) Number entered at X 8, Y 8 appears as expected
<br/>
(4) If a number is entered at X 8, Y 0 (or X 7, Y 8 with the above bug) then the cursor doesn't respond to the key inputs
<br/>
<br/>
I tested the program by forcing numbers into the cells at cell initialisation, at which point bugs (1) and (2) still occur but not (4). (4) only occurs when the cursor is moved on X 8, Y 0 (or X 7, Y 8) and the number entered.
<br/>
<br/>
I'm using this code to update the number at the cursor location:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      if(key_released(KEY_A))
<br/>
      {
<br/>
         sudokuGrid[gridCursor.x][gridCursor.y].cellEntry = 1;
<br/>
<br/>
         UpdateSprite(&amp;sudokuGrid[gridCursor.x][gridCursor.y]);
<br/>
      }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
...and this is the code that I use to update the cell:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void UpdateSprite(GridEntry* ent)
<br/>
{
<br/>
   ent-&gt;gfxID = ent-&gt;cellEntry * 4;
<br/>
   ent-&gt;oam-&gt;attribute[2] = ent-&gt;gfxID;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
If the problem isn't here, then the rest of the code (and compiled ROM file) can be found here:
<br/>
<a class="postlink" href="http://www.bigupload.com/d=F69FA239" target="_blank">Gbasudoku.Zip by Bigupload.Com</a>
<br/>
<br/>
Thanks for your help in advance!<br/>_________________<br/>I'd like to think this signature is under development, but it isn't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118817 - Cearn - Sat Feb 17, 2007 1:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sudoku.c wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   GridEntry sudokuGrid[8][8];
<br/>
<br/>
   ...
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
This is not a 9x9 grid, it's an 8x8 grid. sudokuGrid[8][x] will be out of bounds.  (Sidenote: Elements varying in the lower index are next to each other in memory, corresponding to horizontal movement through the matrix. Therefore, C matrices are usually ordered [y][x], rather than [x][y]. )</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118853 - neilio - Sat Feb 17, 2007 3:31 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, problem sorted. I wrongly assumed that when declaring the variable the numbering be from 0 to 8 and not 1 to 9.<br/>_________________<br/>I'd like to think this signature is under development, but it isn't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118855 - tepples - Sat Feb 17, 2007 3:44 pm</h4>
    <div class="postbody"><span class="postbody">int x[9][9];
<br/>
makes active cells from x[0][0] to x[8][8]<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118861 - keldon - Sat Feb 17, 2007 5:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>neilio wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks, problem sorted. I wrongly assumed that when declaring the variable the numbering be from 0 to 8 and not 1 to 9.</td> </tr></table><span class="postbody">
<br/>
<br/>
The numbering is from 0-8, but you are declaring that there are 9 elements in the array. The array <span style="text-decoration: underline">int array [2]</span> has two elements: array[0] and array[1].</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
