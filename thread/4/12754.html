<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>looong filenames in g++ error reports - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > looong filenames in g++ error reports</h2>
<div id="posts">
<div class="post">
    <h4>#122306 - PypeBros - Sun Mar 18, 2007 4:50 pm</h4>
    <div class="postbody"><span class="postbody">there's one thing that has been annoying me for ages with DevKitPro: whenever gcc/g++ outputs an error message, it always uses the whole full path rather than the filename, e.g. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
/tux/install/DS/apple-rumble-src/rumble/arm9/source/appleblock.cpp:56: warning:                               
<br/>
enumeration value 'BST_POP' not handled in switch
<br/>
/tux/install/DS/apple-rumble-src/rumble/arm9/source/appleblock.cpp:56: warning:                               
<br/>
enumeration value 'BST_POP2' not handled in switch
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
etc.
<br/>
<br/>
while just "appleblock.cpp: 56: warning : ...." would have been just enough.
<br/>
<br/>
Does anyone have a patch around that ?<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122657 - poslundc - Wed Mar 21, 2007 12:48 am</h4>
    <div class="postbody"><span class="postbody">The file name displayed ought to be the file name that was passed in on the command line to GCC.
<br/>
<br/>
So if you have your makefile CD into the source directory root before processing files (or if your makefile is located in that source directory), you can pass in relative file paths instead of absolute ones, and that's what you'll get.
<br/>
<br/>
That said, however, it's widely considered good practice to treat compiler warnings as errors, and to fix them whenever you find them. Otherwise as your project grows it becomes a jungle of ignored warnings and they lose all meaning, so that when a warning that could indicate an actual error to you appears you wind up not noticing it, and the warnings serve no purpose. If someone on my team checks in work that generates a warning it's considered broken code.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122664 - tepples - Wed Mar 21, 2007 2:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">That said, however, it's widely considered good practice to treat compiler warnings as errors, and to fix them whenever you find them. Otherwise as your project grows it becomes a jungle of ignored warnings and they lose all meaning, so that when a warning that could indicate an actual error to you appears you wind up not noticing it, and the warnings serve no purpose. If someone on my team checks in work that generates a warning it's considered broken code.</td> </tr></table><span class="postbody">
<br/>
I assume that you mean that your projects use <span style="font-weight: bold">-Wall -Wextra -pedantic -Werror</span>. In such an environment, how does the programmer suppress warnings about (currently) unused arguments, (currently) unused static functions, and the like? Does your team accept <a class="postlink" href="http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#Variable-Attributes" target="_blank">GCC-specific attributes</a> such as __attribute__((unused)), or does it insist that all code must compile additionally on compilers that do not understand GNU extensions?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122667 - Miked0801 - Wed Mar 21, 2007 4:00 am</h4>
    <div class="postbody"><span class="postbody">__attribute__((unused)) is used quite a bit on my team to surpress unused param warnings.  Unused statics can usually be commented out quite easily.  What other warnings do you consider not worth fixing immediately?  BTW, I'm of one mind with Poslund on this one.  Warnings are errors.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122671 - sgeos - Wed Mar 21, 2007 4:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">__attribute__((unused)) is used quite a bit on my team to surpress unused param warnings.  Unused statics can usually be commented out quite easily.</td> </tr></table><span class="postbody">
<br/>
What a fantasic way of letting people know that you know what you are doing.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define UNUSED __attribute__((unused))
<br/>
<br/>
int toBeCallByPointer_NullFunction(UNUSED int pX, UNUSED char *pC)
<br/>
{
<br/>
        return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">BTW, I'm of one mind with Poslund on this one.  Warnings are errors.</td> </tr></table><span class="postbody">
<br/>
I agree.  Warnings generally mean I did something stupid and my code won't work.  They need to be fixed.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122686 - HyperHacker - Wed Mar 21, 2007 5:52 am</h4>
    <div class="postbody"><span class="postbody">Usually, yes, but sometimes you get warnings about silly things like no newline at end of file, converting 0xFF to signed, etc. And in some cases you're being warned about doing something you don't usually do (integer math with pointers, comparing/converting between variables of different sizes, etc) but in this case intended to do.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122700 - keldon - Wed Mar 21, 2007 10:39 am</h4>
    <div class="postbody"><span class="postbody">Warnings are warnings for good reasons.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122715 - tepples - Wed Mar 21, 2007 1:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">And in some cases you're being warned about doing something you don't usually do (integer math with pointers, comparing/converting between variables of different sizes, etc) but in this case intended to do.</td> </tr></table><span class="postbody">
<br/>
In these cases, casts show your intention to other people reading your code.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122719 - sgeos - Wed Mar 21, 2007 2:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">And in some cases you're being warned about doing something you don't usually do (integer math with pointers, comparing/converting between variables of different sizes, etc) but in this case intended to do.</td> </tr></table><span class="postbody">
<br/>
In these cases, casts show your intention to other people reading your code.</span></td> </tr></table><span class="postbody">
<br/>
In this case "people" includes the compiler.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122744 - gmiller - Wed Mar 21, 2007 5:22 pm</h4>
    <div class="postbody"><span class="postbody">By explicitly telling the compiler what you want it to do allows the compiler to   make better decisions.  So implicit casting is bad and explicit is good.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122746 - poslundc - Wed Mar 21, 2007 5:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I assume that you mean that your projects use <span style="font-weight: bold">-Wall -Wextra -pedantic -Werror</span>.</td> </tr></table><span class="postbody">
<br/>
<br/>
We aren't using GCC, but yes, pretty much the equivalent of that. We don't force warnings to be treated as errors by the compiler, mainly because it's too easy for a programmer to write code that generates a warning in release builds (which a non-technical producer might be making) but not in the debug builds that the programmer is creating. So while I would ideally like those warnings to throw as errors, it's not worth bottlenecking the production process.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">In such an environment, how does the programmer suppress warnings about (currently) unused arguments, (currently) unused static functions, and the like? Does your team accept <a class="postlink" href="http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#Variable-Attributes" target="_blank">GCC-specific attributes</a> such as __attribute__((unused)), or does it insist that all code must compile additionally on compilers that do not understand GNU extensions?</td> </tr></table><span class="postbody">
<br/>
<br/>
We use compiler-specific notation to indicate unused parameters, which I'm not too happy about. We are also trying to encourage programmers not to apply that band-aid blindly, but to instead evaluate whether the compiler "has a point" and the extraneous parameter should be refactored out.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122751 - tepples - Wed Mar 21, 2007 7:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">We use compiler-specific notation to indicate unused parameters, which I'm not too happy about. We are also trying to encourage programmers not to apply that band-aid blindly, but to instead evaluate whether the compiler "has a point" and the extraneous parameter should be refactored out.</td> </tr></table><span class="postbody">
<br/>
I understand that unused parameters should be refactored out of a <span style="font-style: italic">stand-alone</span> program eventually, but sometimes it's hard to change interfaces that other developers use. In a library or in functions that a library calls back, the parameter still has to be there because taking it out would break existing code. For example, there are quite a few HWNDs passed to the WinAPI that Windows has ignored in all versions after 3.1.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122766 - HyperHacker - Wed Mar 21, 2007 10:59 pm</h4>
    <div class="postbody"><span class="postbody">Alright, I found the specific case I was thinking of when I wrote that post. I have an array of function pointers (32-bit) in a Windoze app, and want to compare the return from StackWalk64() to these pointers. The function gives a 64-bit pointer and I need to iterate through my array, checking if element[x] &lt; pointer &lt; element[x+1]. Since the pointer is 64 bits, but the elements are 32, even if I cast the elements to DWORD64 during the compare it generates a warning "cast from pointer to integer of different size". But since my program is being compiled for Win32, these elements' values will never exceed the 32-bit range, so I don't want to make them 64-bit which would take up twice as much memory for no good reason.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122769 - tepples - Wed Mar 21, 2007 11:29 pm</h4>
    <div class="postbody"><span class="postbody">Isn't there a StackWalk32()?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
