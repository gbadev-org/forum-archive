<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Emu Speed Differences - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Emu Speed Differences</h2>
<div id="posts">
<div class="post">
    <h4>#2862 - darkcloud - Fri Feb 14, 2003 12:41 am</h4>
    <div class="postbody"><span class="postbody">My game seems to run faster in boycott than vba.  What I mean is that when I'm moving the character around and animating him, he moves faster and animates faster in boycott than in vba.  I time animation by having a variable increment every vblank and changing animation frames every few vblanks.  Is there a difference between vblank speed between the two emus? And is there any way I can make sure the game runs at the same speed in both?
<br/>
<br/>
I also thought that it might be running slower because vba wasn't running at top speed, it was running at about 70% or so.  Could this be whats changing the speed?<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2865 - tepples - Fri Feb 14, 2003 2:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darkcloud wrote:</b></span></td> </tr> <tr> <td class="quote">My game seems to run faster in boycott than vba.  What I mean is that when I'm moving the character around and animating him, he moves faster and animates faster in boycott than in vba.  I time animation by having a variable increment every vblank</td> </tr></table><span class="postbody">
<br/>
How are you detecting vblank?  If it's a "while(LY != 160) {}" type loop, your code may actually run so fast on one emu that it runs two frames in one vblank.  The quick fix is "while(LY != 159) {} while(LY != 160) {}"
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Is there a difference between vblank speed between the two emus?</td> </tr></table><span class="postbody">
<br/>
If you have a slow CPU (&lt;900 MHz), VBA may not be running your program at full speed.  If the speed indicated in the title bar is less than 98% then you're going to have to switch from spinning on LY to using VBlankIntrWait() in the BIOS so that VBA can turn off its ARM core for the rest of the frame.  If you're already using VBlankIntrWait(), then you'll have to increase the frame skip value or decrease the complexity of the graphics (e.g. turn off blending) or the program.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I also thought that it might be running slower because vba wasn't running at top speed, it was running at about 70% or so.  Could this be whats changing the speed?</td> </tr></table><span class="postbody">
<br/>
That's exactly the problem.  Here are some things you can do to fix it:  Use VBlankIntrWait() instead of spinning, increase frame skip, run your desktop in 16-bit color mode without filters, or just get a faster computer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2894 - Splam - Fri Feb 14, 2003 9:21 am</h4>
    <div class="postbody"><span class="postbody">Yeah, it's simply that vboy is running at 70% as you said.  try turning on frameskip to get it to ~100%, only problem with that is of course you'll skip frames of animation so it's harder to tell whats going on.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2896 - Quirky - Fri Feb 14, 2003 9:58 am</h4>
    <div class="postbody"><span class="postbody">RE: "Use VBlankIntrWait() instead of spinning" to speed up VBA.
<br/>
<br/>
I found that when I switched from spin waiting for VBlank to the interupt approach, Visualboy actually ran slower (i.e. the % was less). There was, obviously, no difference on a real GBA. Except perhaps the batteries last longer ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2945 - darkcloud - Fri Feb 14, 2003 10:29 pm</h4>
    <div class="postbody"><span class="postbody">Ok thanks you guys.<br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
