<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Thoughts on advance wars 2 menu effect - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Thoughts on advance wars 2 menu effect</h2>
<div id="posts">
<div class="post">
    <h4>#43844 - revengero - Fri May 27, 2005 7:48 am</h4>
    <div class="postbody"><span class="postbody">Hey everyone, 
<br/>
I'm making a menu system at the moment and was looking at advance wars 2, and in particular the character selection screen in the war room.  Check out the animating film strip the characters are on.  Any ideas how they did this?  Harware scrolling seems out of the question so im assuming its frame by frame animation... thoughts??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43939 - strager - Sat May 28, 2005 1:12 pm</h4>
    <div class="postbody"><span class="postbody">I have the game, and I don't know what you are talking about.  If you can, please post pics.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43942 - Quirky - Sat May 28, 2005 2:05 pm</h4>
    <div class="postbody"><span class="postbody">I have the cart in my GBA at the moment. The effect looks like a film-reel that scrolls at ~30 degrees to the horizontal.
<br/>
<br/>
One way to do it would be to increment X for the left-right scroll and DMA to the Y scroll register the correct value on each HBlank. Or it may be even simpler and could be done with a few tiles drawn to look as if on an angle, and then palette swaps for the 'scrolling'.
<br/>
<br/>
The character portraits are probably drawn in another layer (sprites or bg, doesn't matter).
<br/>
<br/>
I'll see if I can dump the rom and what VBA reveals.
<br/>
<br/>
[Edit - seems as if VBA doesn't run it without patching...]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43972 - DekuTree64 - Sat May 28, 2005 8:55 pm</h4>
    <div class="postbody"><span class="postbody">I've never played the game so I don't know what it looks like, but judging by Quirky's description, it sounds like a case of clever-programmer-and-artist. 
<br/>
<br/>
Is the film strip drawn so it runs 4 pixels over, 1 pixel up, 4 over, 1 up, to get the slanted effect? And is each character portrait about 4 chars wide?
<br/>
If so, then it's probably just drawn that way to begin with, and the code says scroll horizontally by x pixels, and vertically by x/4 pixels. 
<br/>
<br/>
Then to get continuous scrolling in one direction, since each 4-char wide portrait would slant up exactly 1 char (32 wide, rising 1 pixel for every 4 horizontal = rise 8 total), you can just swap each portrait into the screen data when it comes on screen, moved up/down 1 char from its neighbor.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43987 - Lord Graga - Sat May 28, 2005 10:51 pm</h4>
    <div class="postbody"><span class="postbody">Googles image-search for <span style="font-style: italic">Advance Wars 2 Menu</span> returned this image:
<br/>
<br/>
<a class="postlink" href="http://www.icculus.org/~zakk/aw212.png" target="_blank">http://www.icculus.org/~zakk/aw212.png</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44011 - Kyoufu Kawa - Sun May 29, 2005 10:09 am</h4>
    <div class="postbody"><span class="postbody">Try the War Room next time.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44077 - strager - Mon May 30, 2005 1:18 am</h4>
    <div class="postbody"><span class="postbody">If you are using text mode, just make a couple of tiles.  Two tiles' width should span one tile's height.  Example:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
  &lt;- Two  tiles -&gt;
<br/>
  1234567812345678
<br/>
1               ..
<br/>
2             ....
<br/>
3           ......
<br/>
4         ........
<br/>
5       ....**....
<br/>
6     ......**....
<br/>
7   ..............
<br/>
8 ................
<br/>
</td> </tr></table><span class="postbody">
<br/>
That's the top; just flip the tile horizontally and vertically for the bottom.  And, of course, add the little dots (*) and the images (darkened?) to make it look more film real.
<br/>
<br/>
The reason I didn't understand is because I didn't read the word 'Warroom.'
<br/>
Silly me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44078 - APL - Mon May 30, 2005 1:30 am</h4>
    <div class="postbody"><span class="postbody"><br/>_________________<br/>-Andy L 
<br/>
<a href="http://www.depthchasers.com" target="_blank">http://www.depthchasers.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44086 - DekuTree64 - Mon May 30, 2005 2:06 am</h4>
    <div class="postbody"><span class="postbody">Haha, all that complicated speculation and it looks like the holes are on a completely different layer than the flim strip itself, just scrolling along to make it look like the dark strip part is moving.
<br/>
I love little visual tricks like that :)<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44091 - APL - Mon May 30, 2005 4:53 am</h4>
    <div class="postbody"><span class="postbody">Perhaps this is a stupid newbie question, but the holes are transparent, if they're on a seperate layer how are they making it so you can see the background un-modifed through the holes?   Wouldn't the holes have to be part of the same layer as the 'dark' areas of the film?<br/>_________________<br/>-Andy L 
<br/>
<a href="http://www.depthchasers.com" target="_blank">http://www.depthchasers.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44096 - DekuTree64 - Mon May 30, 2005 6:59 am</h4>
    <div class="postbody"><span class="postbody">Only half transparent like the film strip, but white instead of black. The way the blending works, if 2 layers are set in the first target selection in BLDMOD, whichever one is on top gets blended with the second BLDMOD target. 
<br/>
It sort of draws all the layers before any blending takes place, so the light holes overwrite parts of the dark strip, and then the result gets blended with the sky layer below.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44782 - Steve++ - Sun Jun 05, 2005 6:50 am</h4>
    <div class="postbody"><span class="postbody">It sounds like everyone is overlooking the simplest explanation: It's likely to be using a rotated background layer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44798 - strager - Sun Jun 05, 2005 2:32 pm</h4>
    <div class="postbody"><span class="postbody">But it isn't.  I explained how it is put together in one of my previous posts.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44867 - Steve++ - Mon Jun 06, 2005 9:50 am</h4>
    <div class="postbody"><span class="postbody">You did? How do you know how it's put together? Did you hack the ROM?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44880 - Kyoufu Kawa - Mon Jun 06, 2005 2:46 pm</h4>
    <div class="postbody"><span class="postbody">VisualBoy Advance, and the truth (and map/tile viewers) shall set you free, my syntaxsugar-enriched friend.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44882 - strager - Mon Jun 06, 2005 2:58 pm</h4>
    <div class="postbody"><span class="postbody">Link to the post: <a href="http://forum.gbadev.org/viewtopic.php?p=44077#44077" target="_blank">http://forum.gbadev.org/viewtopic.php?p=44077#44077</a>
<br/>
<br/>
And yes, KK, I did use VBA's toold :-)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
