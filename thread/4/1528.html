<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Collision in wraparound BG - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Collision in wraparound BG</h2>
<div id="posts">
<div class="post">
    <h4>#7760 - maniac - Tue Jun 24, 2003 8:53 am</h4>
    <div class="postbody"><span class="postbody">I scroll a 1024x1024 map on a 256x256 wraparound bg and check a 32x32 sprite for collisions with the bg.
<br/>
<br/>
The problem occurs only when the bg is wrapping, then the collision check checks one row below the row it is supposed to check (when the bg doesn't wrap it works as it's supposed to). The code I use is this:
<br/>
<br/>
x = (bkg.x+player.x) &gt;&gt; 3;
<br/>
y = (bkg.y+player.y) &gt;&gt; 3;
<br/>
b = (x&amp;31) + ((y-1&amp;31) &lt;&lt; 5);
<br/>
<br/>
if(collision[b] == 1)
<br/>
 return 1;
<br/>
<br/>
Anyone who can see a prob with this code or have some suggestions to solve the wraparound issue?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7763 - Lord Graga - Tue Jun 24, 2003 9:54 am</h4>
    <div class="postbody"><span class="postbody">ehh... what about doing a if(player.x &gt; BGSIZE) player.x = 0;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7767 - maniac - Tue Jun 24, 2003 10:41 am</h4>
    <div class="postbody"><span class="postbody">well, thanks for the answer but i solved it anyway .. (but not by using a crappy if() :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
