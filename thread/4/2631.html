<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Accessing CART with MB code - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Accessing CART with MB code</h2>
<div id="posts">
<div class="post">
    <h4>#14614 - slboytoy - Fri Jan 09, 2004 5:24 pm</h4>
    <div class="postbody"><span class="postbody">Ok I need some help writing some code here.  I have a program that resides in the IWRAM and i want to access the CART bus to light up some LEDs.
<br/>
<br/>
For example.  I have a program that loads in the IWRAM and when you push either button A or button B, it will save a value '1' in two different memory locations.  (ie.  0x8000001, 0x8000002).  And when there is a '1' placed in those locations, corresponding LEDs will light up.  
<br/>
<br/>
I'm pretty sure I know how to hook up SRAM correctly using a latch to latch the address when CS is selected.
<br/>
<br/>
But i have the program, and i hook up a logic analyzer to see if when I do press a button, if any activity happends on the CART bus.  But i'm coming up with nothing.  All the lines are high, and stay high.
<br/>
<br/>
#define CART_SRAM 0xe000000
<br/>
<br/>
*(u16*)(ADDR+0xFFFF) = i;
<br/>
<br/>
That is my sample part of my program.  Can anyone help me out?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14615 - gb_feedback - Fri Jan 09, 2004 6:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">	u8* GamePakRam = (u8*) 0x0e000000;
<br/>
<br/>
	GamePakRam[4] = (u8) m_lineNoTopOfScreen &amp; 0xff;
<br/>
	GamePakRam[5] = (u8) (m_lineNoTopOfScreen &gt;&gt; 8) &amp; 0xff;
<br/>
	GamePakRam[6] = (u8) (m_lineNoTopOfScreen &gt;&gt; 16) &amp; 0xff;
<br/>
	GamePakRam[7] = (u8) (m_lineNoTopOfScreen &gt;&gt; 24) &amp; 0xff;
<br/>
</td> </tr></table><span class="postbody">
<br/>
5 lines from a working program. Notice that access to this address space is 8 bit wide. Otherwise hard to comment as it's not clear what ADDR+0xFFFF evaluates to<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14676 - slboytoy - Sat Jan 10, 2004 10:39 pm</h4>
    <div class="postbody"><span class="postbody">"m_lineNoTopOfScreen &gt;&gt; 8"
<br/>
<br/>
What are you doing by this action?   Is m_lineNoTopOfScreen just a variable "int"?
<br/>
<br/>
Sorry for silly question.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14677 - sajiimori - Sat Jan 10, 2004 11:00 pm</h4>
    <div class="postbody"><span class="postbody">Apparently, it's saving a 32-bit value one byte at a time.  Getting the low byte is as easy as doing a bitwise AND with 0xff.  The others can be reached by shifting the value right by 8, 16, or 24 bits.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14752 - gb_feedback - Mon Jan 12, 2004 10:37 am</h4>
    <div class="postbody"><span class="postbody">Yes that's right. Sorry for the unnecessary part of the example, but I just don't like writing code on the fly without trying it first, so I took this example straight out of Bookreader (which probably explains the variable m_lineNoTopOfScreen  to you). The example just emphasises the 8 bit width of the sram.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#15098 - slboytoy - Sat Jan 17, 2004 2:32 am</h4>
    <div class="postbody"><span class="postbody">Thanks a lot.   I wasn't &amp; FF with the data I was reading.  It works fine now.  Thanks for your help.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
