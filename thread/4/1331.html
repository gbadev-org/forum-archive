<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>memory management - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > memory management</h2>
<div id="posts">
<div class="post">
    <h4>#6655 - Naaga - Sun Jun 01, 2003 3:48 am</h4>
    <div class="postbody"><span class="postbody">I just started with GBA development, and I think I need info on memory management.  It sounds like most people allocate memory directly by address, which I'm not used to doing, since it's a big no-no in PC programming.  So where can I get info on the different areas of memory (IWRAM, VRAM, ROM...), what their address ranges are, and what to use them for?  Am I even on the right track?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6657 - niltsair - Sun Jun 01, 2003 5:55 am</h4>
    <div class="postbody"><span class="postbody">There's are good technical documents out there, such as this one :
<br/>
<a class="postlink" href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm" target="_blank">http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm</a>
<br/>
<br/>
Basicly you have :
<br/>
<span style="font-weight: bold">IWRAM :</span> Internal Work Ram. 32k. Fast, used by default when declaring variables. Used by the stack.
<br/>
<span style="font-weight: bold">EWRAM :</span> External Work Ram 256k, slower of access,.
<br/>
<br/>
And all other display related memory, such as Palette, Video, Object(sprite), Object's palette...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6658 - Naaga - Sun Jun 01, 2003 6:17 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the link.  Am I right about being able to read and write to and from memory freely by address?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6659 - niltsair - Sun Jun 01, 2003 7:12 am</h4>
    <div class="postbody"><span class="postbody">You're better off using variables. 
<br/>
<br/>
You don't know what's in IWRAM, because it's used both for call stack and declared variables.  I think EWRAM coudl be used the way you said, but again for clarity sake, you're better off using variable(that's a personal opinion)
<br/>
<br/>
Where we use address directly, it's for video memory, and this is because we know what's where. Exemple, in mode 3, each pixels takes 2Byte, so we know that at address 0x06000000+440,reside  the pixel 60X 1Y. 
<br/>
X=(440/2)%160
<br/>
Y=(440/2)/160
<br/>
<br/>
Same apply for palette entries, Sprites.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6684 - Naaga - Sun Jun 01, 2003 10:33 pm</h4>
    <div class="postbody"><span class="postbody">Maybe I need to explain myself better.  The document you linked shows a bunch of different address ranges and what they're used for, like ROM, which starts at 0x08000000.  I assume ROM is used for data storage.  Would I be able to write an object that will allocate space in ROM for certain things?
<br/>
<br/>
For instance, maybe I start with a char* that stores the first address, 0x08000000.  Maybe I want to store a bunch of 16x16 bitmaps first.  So I tell the object the amount of memory I want for a certain thing, it puts the data starting at 0x08000000, moves the pointer immediately after the newly used memory, and returns a pointer to the new data (basically a stack.)  Can I access and manage memory at this level, or am I better off using malloc or something else?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6685 - niltsair - Sun Jun 01, 2003 11:00 pm</h4>
    <div class="postbody"><span class="postbody">Rom is read only, so you couldn't do that. This is where your program's code resides.
<br/>
<br/>
If you want to do what you said without problem, do it in EWRAM (given you never declare code/variable to reside there) This memory is never used untill you specificly tell something to use it.
<br/>
<br/>
Another solution (given you don't want to use a too big dynamic area) would be to declare a global array stored in IWRAM. You then manage yourself the content of the array. I'm not certain how much space you could reserve safely. IWRAM only has 32k of space and, depending on how much global variables you're using and the biggest memory amount used inside functions, i'd say 16k would be ok if no other big array is used. 
<br/>
<br/>
Why IWRAM-&gt;Faster. 
<br/>
Why declare an Array-&gt;To be sure you never overwrite important data in IWRAM(stack,  other variables).
<br/>
If you don't use EWRAM for anythign else, you don't have to declare an array like in IWRAM.
<br/>
<br/>
Does that help you?</span><span class="gensmall"><br/><br/>Last edited by niltsair on Sun Jun 01, 2003 11:55 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#6688 - Naaga - Sun Jun 01, 2003 11:17 pm</h4>
    <div class="postbody"><span class="postbody">OK, I think I get it now.  Thanks for the help.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
