<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Streching the screen in mode 5 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Streching the screen in mode 5</h2>
<div id="posts">
<div class="post">
    <h4>#24100 - dagamer34 - Wed Jul 28, 2004 12:52 am</h4>
    <div class="postbody"><span class="postbody">Yes, it's been asked many times. Yes, you are getting tired of these kinds of posts. Yes, I did do a search on the forum to see if it has been asked already. 
<br/>
<br/>
However, it isn't working exactly like I wanted it to. Here's what I'm using:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
*(unsigned short*)0x4000020 = 0;
<br/>
*(unsigned short*)0x4000022 = -256;
<br/>
*(unsigned short*)0x4000024 = 128;
<br/>
*(unsigned short*)0x4000026 = 0;
<br/>
*(unsigned short*)0x4000028 = 319 &lt;&lt; 7;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The outcome is a stretched screen that is rotated 90 degrees counter-clockwise. I know the loading code isn't at fault, so what else could it be?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24111 - tepples - Wed Jul 28, 2004 2:19 am</h4>
    <div class="postbody"><span class="postbody">I had a bit of trouble interpreting what you meant by that. What exactly are you expecting, and what exactly are you getting instead of what you are expecting?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24116 - dagamer34 - Wed Jul 28, 2004 3:39 am</h4>
    <div class="postbody"><span class="postbody">My picture is rotated 90 degrees, then stretched across the screen. I just want the picture stretched across the screen. Am I clear now on what my problem is? 
<br/>
<br/>
I didn't want any rotation. I found this piece of code from an old post on these boards.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24140 - poslundc - Wed Jul 28, 2004 2:11 pm</h4>
    <div class="postbody"><span class="postbody">That's what stretched Mode 5 is. It takes advantage of the fact that Mode 5 is normally 160x128 pixels. Since the width of the mode is the same as the height of the screen, and the height of the mode is just a little more than half the width of the screen, you can rotate it and double the height to obtain a double-buffered mode that completely fills the screen, just stretched to double-pixels on the horizontal, rather than having the ugliness and uneven scaling of trying to stretch out 160x128 to 240x160.
<br/>
<br/>
Because it's a rotated buffer, you write to it in (y,x) notation instead of (x,y). Which shouldn't pose a problem, and can actually be advantageous for speed in applications like raycasters.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24148 - tepples - Wed Jul 28, 2004 3:40 pm</h4>
    <div class="postbody"><span class="postbody">If you just want your picture stretched and not rotated, use stretched mode 3:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">*(unsigned short*)0x4000020 = 128;
<br/>
*(unsigned short*)0x4000022 = 0;
<br/>
*(unsigned short*)0x4000024 = 0;
<br/>
*(unsigned short*)0x4000026 = 256;
<br/>
*(unsigned short*)0x4000028 = 0;
<br/>
*(unsigned short*)0x400002C = 0;
<br/>
</td> </tr></table><span class="postbody">
<br/>
Then write to either the left half or the right half of the buffer, and to switch buffers, do this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">*(unsigned short*)0x4000028 = buffer ? (120 &lt;&lt; 128) : 0;
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24151 - poslundc - Wed Jul 28, 2004 4:04 pm</h4>
    <div class="postbody"><span class="postbody">Hm, interesting. I was under the impression that you could only scale/rotate in Mode 5, which is what the Cowbite spec implies. It seems that GBATEK spec agrees with you, though.
<br/>
<br/>
So, is there a reason to use stretched/rotated Mode 5 other than if you're writing a raycaster and want to blit two pixels in a single instruction?
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24161 - dagamer34 - Wed Jul 28, 2004 6:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">That's what stretched Mode 5 is. It takes advantage of the fact that Mode 5 is normally 160x128 pixels. Since the width of the mode is the same as the height of the screen, and the height of the mode is just a little more than half the width of the screen, you can rotate it and double the height to obtain a double-buffered mode that completely fills the screen, just stretched to double-pixels on the horizontal, rather than having the ugliness and uneven scaling of trying to stretch out 160x128 to 240x160.
<br/>
<br/>
Because it's a rotated buffer, you write to it in (y,x) notation instead of (x,y). Which shouldn't pose a problem, and can actually be advantageous for speed in applications like raycasters.
<br/>
<br/>
Dan.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, I did not know that. Though it makes it a little difficult to DMA copy data to the screen...<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24168 - Miked0801 - Wed Jul 28, 2004 7:54 pm</h4>
    <div class="postbody"><span class="postbody">Actually, most ray casters work with Y stripes so it's even easier...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24170 - dagamer34 - Wed Jul 28, 2004 10:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">Actually, most ray casters work with Y stripes so it's even easier...</td> </tr></table><span class="postbody">
<br/>
<br/>
I was thinking about copying a bitmap to the screen using DMA.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#24172 - poslundc - Wed Jul 28, 2004 10:34 pm</h4>
    <div class="postbody"><span class="postbody">Not a problem if you encode the bitmap at 90 degrees...
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
