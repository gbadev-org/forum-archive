<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBA.H - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > GBA.H</h2>
<div id="posts">
<div class="post">
    <h4>#1658 - AnthC - Tue Jan 21, 2003 4:30 am</h4>
    <div class="postbody"><span class="postbody">Hi
<br/>
Which gba.h/agb.h are you lot using?
<br/>
It would be nice if I had one with most if nto all of the hardware registers in it and maybe some bit equates also?
<br/>
(I tried looking for eloist's but could only find a site with an emulator on it)
<br/>
Any thoughts?
<br/>
Cheers
<br/>
Tony</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1662 - sloat - Tue Jan 21, 2003 4:54 am</h4>
    <div class="postbody"><span class="postbody">i wrote my own for goldroad. i based them off of knoth's gbatek.
<br/>
for c stuff, i used the ones from the pern project, but i fixed the spelling errors.<br/>_________________<br/><a href="http://sloat.bradsoft.net/" target="_blank">http://sloat.bradsoft.net/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1663 - tepples - Tue Jan 21, 2003 5:00 am</h4>
    <div class="postbody"><span class="postbody">I'm using my own custom "pin8gba.h" header.  Its register names are different from the purported "official" names because my names
<br/>
1. make better sense to me and
<br/>
2. won't incur liability for dealing in what may be a Nintendo trade secret.
<br/>
<br/>
I've also done some slick tricks such as declaring several registers as an array or as an array of structs.  For example:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define BGCTRL ((volatile u16 *)0x04000008)
<br/>
#define BGCTRL_PAT(m)    ((m) &lt;&lt; 2)
<br/>
#define BGCTRL_16C       0x0000
<br/>
#define BGCTRL_256C      0X0080
<br/>
#define BGCTRL_NAME(m)   ((m) &lt;&lt; 8)
<br/>
8&lt; 8&lt; 8&lt; more defines here 8&lt; 8&lt; 8&lt;
<br/>
#define BGCTRL_M7_64     0x8000
<br/>
#define BGCTRL_M7_128    0xc000
<br/>
<br/>
<br/>
struct BGPOINT
<br/>
{
<br/>
  u16 x, y;
<br/>
};
<br/>
#define BGSCROLL ((volatile struct BGPOINT *)0x04000010)
<br/>
<br/>
<br/>
struct DMACHN
<br/>
{
<br/>
  const void *src;
<br/>
  void *dst;
<br/>
  u16 count;
<br/>
  u16 control;
<br/>
};
<br/>
#define DMA ((volatile struct DMACHN *)0x040000b0)
<br/>
#define DMA_DSTINC      0x0000
<br/>
#define DMA_DSTDEC      0x0020
<br/>
#define DMA_DSTUNCH     0x0040
<br/>
#define DMA_DSTINCRESET 0x0060
<br/>
8&lt; 8&lt; 8&lt; more defines here 8&lt; 8&lt; 8&lt;
<br/>
#define DMA_IRQ         0x4000
<br/>
#define DMA_ENABLE      0x8000
<br/>
</td> </tr></table><span class="postbody">
<br/>
which can be addressed as BGCTRL[2], BGSCROLL[0].y, DMA[3].dst, etc.
<br/>
<br/>
The header is heavily commented and acts as a reference covering the GBA's registers.  It's not 100 percent complete, but it has most of the subsystems covered, even including the GB tone generators.
<br/>
<br/>
You can find pin8gba.h in any of <a class="postlink" href="http://www.pineight.com/gba/" target="_blank">my projects</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1683 - AnthC - Tue Jan 21, 2003 4:16 pm</h4>
    <div class="postbody"><span class="postbody">Cool thanks for your replies.
<br/>
Took your advice and started writing my own.
<br/>
AnthC</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#1758 - gb_feedback - Wed Jan 22, 2003 5:14 pm</h4>
    <div class="postbody"><span class="postbody"><span style="color: blue">tepples: </span>I was just about to recommend the header I saw in TOD and then I realised that you were using a different handle here and had mentioned it yourself! I came across it a few days ago while I was trying to sort out some problems on my midi player, and I was impressed. The header looks like a lot more thought went into it than usual.
<br/>
<br/>
<span style="text-decoration: underline">OT</span>
<br/>
<br/>
I liked the mixer stuff too. I'd like to ask you some questions sometime if you don't mind. (Just some lame stuff which shows I haven't spent enough time reading your code).
<br/>
<br/>
Anyway, enough sycophancy...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
