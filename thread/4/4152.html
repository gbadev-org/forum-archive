<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Advice on which mode bitmap or tile? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Advice on which mode bitmap or tile?</h2>
<div id="posts">
<div class="post">
    <h4>#27003 - Caswynben - Fri Oct 01, 2004 2:10 pm</h4>
    <div class="postbody"><span class="postbody">The game I am working on requires full screen (Or bigger) images for the player to walk around on. It is a graphic adventure in the vein of Monkey Island and Kings Quest. Which mode should I use? The bitmap modes would be perfect if I could use more than one layer. The tiled modes don't give me enough VRAM to load an entire image in. 
<br/>
Any advice?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27004 - tepples - Fri Oct 01, 2004 2:44 pm</h4>
    <div class="postbody"><span class="postbody">You can store about three 16-color "entire images" in the background part of VRAM at 19.2 KBytes each. Don't let "16-color" fool you; you can assign different 16-color palettes to different parts of the screen.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27005 - poslundc - Fri Oct 01, 2004 2:52 pm</h4>
    <div class="postbody"><span class="postbody">You can easily fit an entire 256-colour image into VRAM in tiled mode if you want... you just can't easily fit a second one. Which means when going from one screen to another you'd have to have some kind of transition effect, such as fading to black, swapping in the new image and fading back up, or scrolling the background and dynamically swapping in the tiles of the new image as you scroll.
<br/>
<br/>
Unless you are planning on animating the kind of effects in the background that really need a direct buffer (such as particle effects, 3D, etc.) I'd recommend sticking to tile mode for the benefit of the additional backgrounds.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27007 - Caswynben - Fri Oct 01, 2004 3:03 pm</h4>
    <div class="postbody"><span class="postbody">Okay, I just got afraid because I noticed that tiled mode only gives me 16K of VRAM to use for tile data and the GBA resolution being 240x160 = more than that. Bitmap mode has a spot for each pixel on screen (Which is what I'd need) and takes up twice as much VRAM (Eating into OAM Data). Perhaps I'm missing something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27009 - sajiimori - Fri Oct 01, 2004 3:53 pm</h4>
    <div class="postbody"><span class="postbody">What you are missing is that the maximum BG tile space is more like 56K (or more if you assign a BG to char block 3 and use the top 512 tiles to overflow into sprite RAM, which I've never tried but I hear it works).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27011 - poslundc - Fri Oct 01, 2004 3:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Caswynben wrote:</b></span></td> </tr> <tr> <td class="quote">Okay, I just got afraid because I noticed that tiled mode only gives me 16K of VRAM to use for tile data and the GBA resolution being 240x160 = more than that. Bitmap mode has a spot for each pixel on screen (Which is what I'd need) and takes up twice as much VRAM (Eating into OAM Data). Perhaps I'm missing something?</td> </tr></table><span class="postbody">
<br/>
<br/>
You've got 64K of VRAM, not 16K, and your tiles can span more than one character-base-block. In 16-colour mode you can reference up to 1024 tiles (two full char-base-blocks worth; you only need 600 to fill the screen).
<br/>
<br/>
256-colour mode is trickier as it takes a little more than 2 char-base-blocks to fill the screen with tiles, and you can only reference 256 of them at a time. You can solve this problem either by using multiple backgrounds (which is a bit wasteful, but you're already using most of your VRAM anyway), or by using an HBlank/VCount interrupt to switch the character-base-block that the background points to at certain points along the screen.
<br/>
<br/>
In sum, tepples' suggestion of using 16-colour mode is probably best; you can use colour-quantization programs (search the forum) to break your image up into the necessary palette/tile combinations.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27013 - DiscoStew - Fri Oct 01, 2004 4:05 pm</h4>
    <div class="postbody"><span class="postbody">Actually there is 96K of VRAM, but as poslundc was meaning to say, only 64K of it is used for backgrounds. Can't background maps/tiles be able to extend into sprite cel VRAM? That would help a little if you don't require a lot of sprite cel VRAM.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27016 - poslundc - Fri Oct 01, 2004 4:36 pm</h4>
    <div class="postbody"><span class="postbody">It would appear that Cearn debunked the myth in <a class="postlink" href="http://forum.gbadev.org/viewtopic.php" target="_blank">this thread</a>.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27021 - DiscoStew - Fri Oct 01, 2004 6:42 pm</h4>
    <div class="postbody"><span class="postbody">poslundc, the link you provided doesn't redirect to that thread, but I found it <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=2891" target="_blank">here</a>. From what they said, it's not possible on hardware.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27023 - poslundc - Fri Oct 01, 2004 6:45 pm</h4>
    <div class="postbody"><span class="postbody">How very odd. I must need more practice with copy and paste.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27028 - ampz - Fri Oct 01, 2004 8:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">Unless you are planning on animating the kind of effects in the background that really need a direct buffer (such as particle effects, 3D, etc.) I'd recommend sticking to tile mode for the benefit of the additional backgrounds.
<br/>
Dan.</td> </tr></table><span class="postbody">
<br/>
Not to mention hardware scrolling!
<br/>
In a bitmap mode you have to rewrite the entire screen pretty much every frame if you do a scrolling game. That eats up a fair chunk of precious Vblank cycles.
<br/>
<br/>
Simply make your map/background so that some tiles are reused. With just some small adaptation of your (photoshop painted?) image, you can easily save a third of the tiles. (ground tiles and sky tiles, same cloud used several times, same tree used several times, and so on...) You really only need to save 40-80 tiles or so to make it fit in a 256 color tilemap, but you can usually save alot more than that, making room for more tilemaps.
<br/>
If you make your map/background image from scratch in a good map editor instead of photoshop, then you will probably get away with like 100 tiles or so total.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27030 - poslundc - Fri Oct 01, 2004 9:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Not to mention hardware scrolling!
<br/>
In a bitmap mode you have to rewrite the entire screen pretty much every frame if you do a scrolling game. That eats up a fair chunk of precious Vblank cycles.</td> </tr></table><span class="postbody">
<br/>
<br/>
According to GBATEK, you can use BG2's scroll registers to rotate/scale the bitmap modes.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27034 - ampz - Fri Oct 01, 2004 9:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Not to mention hardware scrolling!
<br/>
In a bitmap mode you have to rewrite the entire screen pretty much every frame if you do a scrolling game. That eats up a fair chunk of precious Vblank cycles.</td> </tr></table><span class="postbody">
<br/>
<br/>
According to GBATEK, you can use BG2's scroll registers to rotate/scale the bitmap modes.
<br/>
<br/>
Dan.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
rotation/scaling: yes.
<br/>
wrap-around: no.
<br/>
<br/>
Without wrap-around you have to rewrite the entire screen if you want to do scrolling.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27035 - poslundc - Fri Oct 01, 2004 10:03 pm</h4>
    <div class="postbody"><span class="postbody">Hm. Does it make any difference if you set the wrap bit in BG2CNT?
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27036 - ampz - Fri Oct 01, 2004 10:36 pm</h4>
    <div class="postbody"><span class="postbody">Not entirely sure actually. I only remember doing some research two years ago and found that the bitmap modes does not support wraparound.
<br/>
But I might very well be wrong.
<br/>
<br/>
Try it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27042 - tepples - Sat Oct 02, 2004 1:04 am</h4>
    <div class="postbody"><span class="postbody">You <span style="font-style: italic">can</span> make a mode 3-5 bitmap wraparound vertically by using a vcount event to switch the scroll position.
<br/>
<br/>
Horizontal wraparound is a bit tougher. One method involves stretching the screen and then drawing the same thing to the left and right halves of the bitmap. Another method involves using the window to cut a few pixels off the left and right halves of the screen, smooth-scrolling the screen using the BG2 affine registers, and occasionally manually scrolling a jump at a time.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27045 - Caswynben - Sat Oct 02, 2004 1:10 am</h4>
    <div class="postbody"><span class="postbody">Perhaps I need a better primer on tile-based video modes then.
<br/>
My problem so far has been that the documentation I read likes to branch off and go "Here's some random ASM that has nothing to do with what we're doing now!" or start explaining char-base blocks poorly. 
<br/>
Can anybody recommend a good guide for tiled modes? I read Harbour's book but got bogged down in his poor examples and bad structure.
<br/>
<br/>
If I went the bitmap route and used DMA to do the blits, could it be fast enough that I could treat the GBA screen a little more like in OpenGL?
<br/>
<br/>
And another question...Text. My game is going to display lots of text. What is the preferred method of displaying text on the GBA on top of existing graphics. Like a textbox that comes up in Monkey Island.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27048 - Miked0801 - Sat Oct 02, 2004 1:25 am</h4>
    <div class="postbody"><span class="postbody">Tried it a year ago and I believe it didn't work (wrap around.)  Other more recent tests are welcome though :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27052 - poslundc - Sat Oct 02, 2004 3:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Caswynben wrote:</b></span></td> </tr> <tr> <td class="quote">Perhaps I need a better primer on tile-based video modes then.
<br/>
My problem so far has been that the documentation I read likes to branch off and go "Here's some random ASM that has nothing to do with what we're doing now!" or start explaining char-base blocks poorly. 
<br/>
Can anybody recommend a good guide for tiled modes? I read Harbour's book but got bogged down in his poor examples and bad structure.</td> </tr></table><span class="postbody">
<br/>
<br/>
<a href="http://www.gbajunkie.co.uk/" target="_blank">http://www.gbajunkie.co.uk/</a>
<br/>
<a href="http://www.thepernproject.com/" target="_blank">http://www.thepernproject.com/</a>
<br/>
<br/>
Others out there as well... check the docs on the main site.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If I went the bitmap route and used DMA to do the blits, could it be fast enough that I could treat the GBA screen a little more like in OpenGL?</td> </tr></table><span class="postbody">
<br/>
<br/>
That's what Mode 3 is designed for, but it's pretty complicated and rarely used. (There is a special DMA mode for working with it; I imagine it would be challenging to write a game architecture around it.) Modes 4 and 5 are designed to use double-buffering, so you draw into one buffer while the other is being displayed, then flip them.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And another question...Text. My game is going to display lots of text. What is the preferred method of displaying text on the GBA on top of existing graphics. Like a textbox that comes up in Monkey Island.</td> </tr></table><span class="postbody">
<br/>
<br/>
Have a look at <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=1764" target="_blank">this thread</a>.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27062 - ampz - Sat Oct 02, 2004 9:28 am</h4>
    <div class="postbody"><span class="postbody">I agree with poslundc, <a href="http://www.thepernproject.com/" target="_blank">http://www.thepernproject.com/</a> is very good at explaining tile modes.
<br/>
From the sounds of it, the best route for you to go is to make the backgrounds in a map editor and use tilemodes. That's how flat scrollable backgrounds are made in GBA games.
<br/>
<br/>
Forget OpenGL. It has nothing to do with the GBA.
<br/>
<br/>
Text is most easily displayed using a 16 color tile mode background. 8x8 fonts are by far easiest, but variable width fonts look better and let you display more text on the same screen area.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27066 - ampz - Sat Oct 02, 2004 10:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">You <span style="font-style: italic">can</span> make a mode 3-5 bitmap wraparound vertically by using a vcount event to switch the scroll position.
<br/>
<br/>
Horizontal wraparound is a bit tougher. One method involves stretching the screen and then drawing the same thing to the left and right halves of the bitmap. Another method involves using the window to cut a few pixels off the left and right halves of the screen, smooth-scrolling the screen using the BG2 affine registers, and occasionally manually scrolling a jump at a time.</td> </tr></table><span class="postbody">
<br/>
<br/>
Just for the fun of it.. Do you think it is technically possible to set up a timer DMA event to change horizintal scroll position mid scanline?
<br/>
<br/>
The timer must be started with cycle-exact precision.. I imagine setting up a Hblank DMA transfer to set the timer configuration registers might do it..
<br/>
<br/>
EDIT
<br/>
Just realized that there is no easy way to trigger a DMA transfer on a timer event.. Hmm, it must be possible to get around that somehow...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27070 - poslundc - Sat Oct 02, 2004 2:43 pm</h4>
    <div class="postbody"><span class="postbody">Changing stuff during HDraw? Without creating screen artifacts? Good luck with that... all bets are off once the scanline begins rendering.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27072 - ecurtz - Sat Oct 02, 2004 4:35 pm</h4>
    <div class="postbody"><span class="postbody">This guy has already ported the engine needed to play the original Sierra games onto the GBA.
<br/>
<br/>
<a class="postlink" href="http://www.bripro.com/gbagi/index.php" target="_blank">GBAGI Homepage</a>
<br/>
<br/>
Why not just author your game in one of the home brew Sierra editors and use his system to run it on the GBA?
<br/>
<br/>
On the scrolling bitmaps front - it seems like as long as your graphics aren't compressed, which isn't a huge deal for homebrew stuff, you can just blit it up there every frame. Sure it's expensive, but probably less than 20% of your cycles, even at 60fps... I thought it would be fun to do a demo side scroller using full 16 bit painted backgrounds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27074 - ampz - Sat Oct 02, 2004 4:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ecurtz wrote:</b></span></td> </tr> <tr> <td class="quote">This guy has already ported the engine needed to play the original Sierra games onto the GBA.
<br/>
<br/>
<a class="postlink" href="http://www.bripro.com/gbagi/index.php" target="_blank">GBAGI Homepage</a>
<br/>
<br/>
Why not just author your game in one of the home brew Sierra editors and use his system to run it on the GBA?
<br/>
<br/>
On the scrolling bitmaps front - it seems like as long as your graphics aren't compressed, which isn't a huge deal for homebrew stuff, you can just blit it up there every frame. Sure it's expensive, but probably less than 20% of your cycles, even at 60fps... I thought it would be fun to do a demo side scroller using full 16 bit painted backgrounds.</td> </tr></table><span class="postbody">
<br/>
<br/>
240*160=38400pixles (16bits each).
<br/>
ROM timings are 2 cycles per 16bit read, and VRAM timings are 1 cycle per 16bit write, right?
<br/>
38400*3=115200cycles.
<br/>
There are only 83776 Vblank cycles, so your DMA transfer will take 138% of your Vblank cycles.
<br/>
You would have to use most of your Hblank cycles as well to get that frame DMA:ed to VRAM in time.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27076 - ecurtz - Sat Oct 02, 2004 6:00 pm</h4>
    <div class="postbody"><span class="postbody">Why can't we use 32 bit transfers? Does the bus not support that? Obviously I don't know this stuff well, just figuring it out. But it seems like using the cpu and doing ldm/stm of say 8 words at a time.
<br/>
<br/>
One line: 240 16bit pixels = 120 words = 15 ldm/stm @ about 24 cycles per pair = 360 cycles per line or 57600 cycles for the screen.
<br/>
<br/>
I must be missing something about theoretical cpu transfers versus actual hardware.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27077 - tepples - Sat Oct 02, 2004 6:22 pm</h4>
    <div class="postbody"><span class="postbody">The bus to both the cartridge and the VRAM is 16-bit. However, you <span style="font-style: italic">could</span> blit starting in vblank and finishing in draw, as GBA VRAM is dual-ported.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27091 - ampz - Sun Oct 03, 2004 1:47 am</h4>
    <div class="postbody"><span class="postbody">Yes. I imagine pogoshell's built in BMP viewer probably do that.
<br/>
<br/>
The VRAM is supposed to be dual-ported, but I read somewhere that CPU accesses to VRAM can be stalled a few cycles during draw... Does anyone know what that's all about?
<br/>
<br/>
ecurtz: You can do 32 bit accesses if you want, but since both VRAM and cart ROM are 16bits wide, you will not gain anything from it. One 32bit access results in two 16bit hardware accesses.
<br/>
I don't see where you get the 24 cycles per ldm/stf pair numbers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27094 - tepples - Sun Oct 03, 2004 1:57 am</h4>
    <div class="postbody"><span class="postbody">I've tested the speed of DMA to VRAM on GBA hardware, and DMA from EWRAM to VRAM during draw was about 10 percent slower than if VRAM were actually dual-ported. Granted, this was in tile mode rather than bitmap mode, but if you start DMAing your image at the start of vblank, you should be able to stay far ahead of the raster.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27097 - ecurtz - Sun Oct 03, 2004 5:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">ecurtz: You can do 32 bit accesses if you want, but since both VRAM and cart ROM are 16bits wide, you will not gain anything from it. One 32bit access results in two 16bit hardware accesses.
<br/>
I don't see where you get the 24 cycles per ldm/stf pair numbers.</td> </tr></table><span class="postbody">
<br/>
<br/>
I was going off the cycle counts in Robin Watts' "ARM Instruction Formats and Timings". But obviously that doesn't match up to the reality of the GBA hardware. I should spend more time reading the spec before getting into these discussions - maybe somebody will be inspired by the GBAGI link at least...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27099 - ampz - Sun Oct 03, 2004 9:32 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ecurtz wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">ecurtz: You can do 32 bit accesses if you want, but since both VRAM and cart ROM are 16bits wide, you will not gain anything from it. One 32bit access results in two 16bit hardware accesses.
<br/>
I don't see where you get the 24 cycles per ldm/stf pair numbers.</td> </tr></table><span class="postbody">
<br/>
<br/>
I was going off the cycle counts in Robin Watts' "ARM Instruction Formats and Timings". But obviously that doesn't match up to the reality of the GBA hardware. I should spend more time reading the spec before getting into these discussions - maybe somebody will be inspired by the GBAGI link at least...</span></td> </tr></table><span class="postbody">
<br/>
<br/>
ARM instruction timings (cycle counts) depend entirey on the hardware. (The speed of the memory used)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27222 - Caswynben - Wed Oct 06, 2004 11:58 pm</h4>
    <div class="postbody"><span class="postbody">A little update. 
<br/>
My problem now is that I can't get anything to display properly, it just goes nuts now when I try to convert a 256x256 image into a map using gfx2gba.
<br/>
I load all the information in (4,400 for the tiles) and then it's just garbage.
<br/>
Any tips?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27223 - sajiimori - Thu Oct 07, 2004 12:06 am</h4>
    <div class="postbody"><span class="postbody">Use VBA to see what's getting loaded.
<br/>
<br/>
Look at the data that gfx2gba outputs to see if it's what you expect.
<br/>
<br/>
Make a list of the things you have to do to get your graphics on the screen, and double check that you're doing all of them.
<br/>
<br/>
Use simpler graphics so you can recognize the patterns by looking at the raw data.
<br/>
<br/>
Generate some tiles and maps algorithmically (like making a checkerboard pattern) and make sure you know how to display those.
<br/>
<br/>
Whatever you do, don't stare at your code or your brain will go completely blank like mine always does. ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27228 - Caswynben - Thu Oct 07, 2004 12:44 am</h4>
    <div class="postbody"><span class="postbody">Well, I know I can display simple things that actually use tiles, but I think the problem is that the data I need to load into character data is 38400 now.
<br/>
(I did fix the earlier problem). However, apparently I can only load half of that into one character block, and then I assume that the rest gets loaded into the next character block. How would I get 240x160 pixels of graphics into memory? Perhaps someone could point me to how to do that 16-color thing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27230 - sajiimori - Thu Oct 07, 2004 1:06 am</h4>
    <div class="postbody"><span class="postbody">If you want to to 16 color tiles, follow one of the various tutorials on the subject (Pern is the perennial favorite), and let us know where you get stuck.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27238 - ampz - Thu Oct 07, 2004 6:39 am</h4>
    <div class="postbody"><span class="postbody">You can use more than one character block.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27247 - Caswynben - Thu Oct 07, 2004 3:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">You can use more than one character block.</td> </tr></table><span class="postbody">How?
<br/>
And Pern didn't have a tutorial on 16-color tiles. They barely have one on 256 colored ones.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27251 - ampz - Thu Oct 07, 2004 5:23 pm</h4>
    <div class="postbody"><span class="postbody">There is nothing to it... Just do it.
<br/>
You can fill the entire VRAM with tiles for a single background if you want.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27252 - Caswynben - Thu Oct 07, 2004 5:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">There is nothing to it... Just do it.
<br/>
You can fill the entire VRAM with tiles for a single background if you want.</td> </tr></table><span class="postbody">Well, I tried that and grabbed the address for charblock 0 and filled in 38K of stuff. Except only about half of that ends up displaying on the screen. Do I need to switch char blocks for the background halfway through the screen?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27254 - poslundc - Thu Oct 07, 2004 5:52 pm</h4>
    <div class="postbody"><span class="postbody">I answered this question earlier in the thread:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>I wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
You've got 64K of VRAM, not 16K, and your tiles can span more than one character-base-block. In 16-colour mode you can reference up to 1024 tiles (two full char-base-blocks worth; you only need 600 to fill the screen).
<br/>
<br/>
256-colour mode is trickier as it takes a little more than 2 char-base-blocks to fill the screen with tiles, and you can only reference 256 of them at a time. You can solve this problem either by using multiple backgrounds (which is a bit wasteful, but you're already using most of your VRAM anyway), or by using an HBlank/VCount interrupt to switch the character-base-block that the background points to at certain points along the screen.
<br/>
<br/>
In sum, tepples' suggestion of using 16-colour mode is probably best; you can use colour-quantization programs (search the forum) to break your image up into the necessary palette/tile combinations. </td> </tr></table><span class="postbody">
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27258 - sajiimori - Thu Oct 07, 2004 6:38 pm</h4>
    <div class="postbody"><span class="postbody">Dan, don't you mean you can access 512 8-bit tiles, not 256?
<br/>
<br/>
I've always been confused about the screen data for 8-bit text BGs (probably because I only ever use 4-bit).  Shouldn't the GBA shift the char index left 1 bit (and assume a 0 as the low bit) to allow access to all 4 char blocks?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27261 - poslundc - Thu Oct 07, 2004 7:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Dan, don't you mean you can access 512 8-bit tiles, not 256?</td> </tr></table><span class="postbody">
<br/>
<br/>
Um, yes, I was thinking of the difference between rot and text BGs, not the difference between 256 and 16 colour modes. Thanks for clearing that up.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27271 - ampz - Thu Oct 07, 2004 9:42 pm</h4>
    <div class="postbody"><span class="postbody">512 unique tiles is usually more than enough to fill the entire screen, unless all tiles are unique.
<br/>
But your graphics is very poorly designed (as in: not at all suitable for this application) if all background tiles are unique.
<br/>
<br/>
There are 600 tiles on screen.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27272 - sajiimori - Thu Oct 07, 2004 10:05 pm</h4>
    <div class="postbody"><span class="postbody">ampz, don't overgeneralize.  Broken Sword is just one game that used backgrounds with most or all unique chars.  I haven't played that many GBA games -- anybody know of others?
<br/>
<br/>
BTW, there are potentially 651 chars visible on one layer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27285 - ampz - Fri Oct 08, 2004 6:35 am</h4>
    <div class="postbody"><span class="postbody">You are right, there are some special cases where almost all tiles need to be unique. Like in games where you modify the background on a pixel level. (blowing things up, building new things...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27297 - Miked0801 - Fri Oct 08, 2004 6:17 pm</h4>
    <div class="postbody"><span class="postbody">Photoshopping ultra kick @ss graphics :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27322 - Caswynben - Sat Oct 09, 2004 4:25 pm</h4>
    <div class="postbody"><span class="postbody">Okee dokee, I've managed to create an image with 16 16 color palettes in Quither. Now what? What tool should I use to convert this image into a GBA-readable format? GFX2GBA gets upset because it has 256 colors.
<br/>
<br/>
Should I split the image up into 16 pieces? This seems like overkill. How is there not a tool that will go through a 256 color image that has been split palette wise like mine and create a palette and a tileset that I can just put in? It seems like there's a tool for everything else.
<br/>
<br/>
I have been trying to figure this out, but there are certain things that I just don't see written anywhere. I see all kinds of info on how to quantize the image, but not how to go from that to the GBA. I mean, I suppose I could go through and start setting bits in my maps to use the right palettes...But I'm not sure if that would work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27396 - tepples - Tue Oct 12, 2004 5:52 am</h4>
    <div class="postbody"><span class="postbody">Write a program that does each of these steps: <ol type="1"><li>Read a .bmp file based on the spec at wotsit.org, or read a .png file based on the libpng examples. </li><li>Convert it to a 16-color image by stripping off the high bits. </li><li>Write out this 16-color image in a GBA readable tile format, either verbatim or compressed. </li><li>Write out the high bits of the upper-left pixel of each tile in order. </li></ol> Then on the GBA, decompress the tiles into a pattern table, and write out each set of high bits to each successive space in a map, along with the corresponding tile number.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
