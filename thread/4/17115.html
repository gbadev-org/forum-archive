<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>[makefile] changing spaces in macro in underscore - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > [makefile] changing spaces in macro in underscore</h2>
<div id="posts">
<div class="post">
    <h4>#172595 - vuurrobin - Thu Feb 18, 2010 7:19 pm</h4>
    <div class="postbody"><span class="postbody">hello,
<br/>
<br/>
in a makefile I have, I have a macro that may contain spaces and I want to replace those spaces with underscores. I already tried the following:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">$(subst  ,_,$(strip $(NAME))$(strip $(EXTENTION)))
<br/>
<br/>
$(subst \ ,_,$(strip $(NAME))$(strip $(EXTENTION)))
<br/>
<br/>
$(subst " ",_,$(strip $(NAME))$(strip $(EXTENTION)))
<br/>
<br/>
$(subst ' ',_,$(strip $(NAME))$(strip $(EXTENTION)))
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
but none of them works. I also tried it with foreach, but no luck.
<br/>
google is also of little help.
<br/>
<br/>
<br/>
does anybody know how to do this?<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172599 - zelbo - Fri Feb 19, 2010 1:24 am</h4>
    <div class="postbody"><span class="postbody">Can't you just load it in a text editor use the built in search and replace? if you don't want to risk changing anything else in the file, what i would do is copy that macro into a temp file, do the s&amp;r there, then copy it back in.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172601 - vuurrobin - Fri Feb 19, 2010 2:19 am</h4>
    <div class="postbody"><span class="postbody">the value isn't hardcoded into the file, so I can't change it manually, and using a texteditor while compiling the program isn't really an option either.
<br/>
<br/>
<br/>
its not really that big of a deal, but it would be nice to have and it seems something that should be possible in a makefile.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172605 - zelbo - Fri Feb 19, 2010 3:32 am</h4>
    <div class="postbody"><span class="postbody">Over my head. I should have known it wouldn't be that simple.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172609 - Cearn - Fri Feb 19, 2010 1:56 pm</h4>
    <div class="postbody"><span class="postbody">One way to do it is to use sed:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">`echo $(NAME) | sed -e 's/[ ]/_/g'`</td> </tr></table><span class="postbody">
<br/>
You only need to use the backquotes if you intend to create variables from $(NAME). In rule-command, you can leave them out.
<br/>
<br/>
There is a way to make it work using subst, but it's kinda convoluted (see the <a class="postlink" href="http://www.gnu.org/software/make/manual/make.html#Flavors" target="_blank">manual, section 6.2</a> and seach for "nullstring" to see how you can get a space-string).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172610 - vuurrobin - Fri Feb 19, 2010 3:03 pm</h4>
    <div class="postbody"><span class="postbody">thanks!
<br/>
<br/>
I used the subst way because then it wouldn't be dependend of sed and the unix pipe thingy which may or may not work on different environments (?). the subst way was easy enough and will work with pretty much all forms of make.
<br/>
<br/>
this is what it ended up to be:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">NULLSTRING   :=   
<br/>
SPACE      :=   $(NULLSTRING) #don't remove this, or you will mess the space var up.
<br/>
<br/>
OUTPUT   :=   $(subst $(SPACE),_,$(strip $(NAME))$(strip $(EXTENTION)))</td> </tr></table><span class="postbody"><br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
