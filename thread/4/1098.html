<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Some newbie questions - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Some newbie questions</h2>
<div id="posts">
<div class="post">
    <h4>#5389 - bobbin - Sat Apr 26, 2003 3:47 pm</h4>
    <div class="postbody"><span class="postbody">Well, i've been following the great tutorial by GBAJunkie and everything is pretty understandable. But on my first test I get some strange results. Here is what I do (all includes are there):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
01 int x,y;
<br/>
02
<br/>
03 setMode( MODE_3 | BG2_ENABLE );
<br/>
04
<br/>
05 for(y=0;y&lt;160;y++)
<br/>
06  for(x=0;x&lt;120;x++)
<br/>
07   VideoBuffer[y*120+x] = pic[y*120+x];
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The image gets displayed, but only half of it. If I change line 5 to
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(y=0;y&lt;320;y++)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
all of the picture gets displayed. I used the tool gbAmp to convert my 240x160 JPG to a linear image, stored in the array pic. I just don't get it, the GBA only has 160 lines to display, so I wonder what is going wrong.
<br/>
<br/>
Then I got two other questions:
<br/>
<br/>
1. Is there any tool that reliably converts my pictures to image data + palette data headers? pcx2gba crashes on my pc and i'd really like to go for a tool with gui.
<br/>
<br/>
2. I don't understand, why I only have to copy 120 indices of my array into the video buffer each line. I know the GBA copies 2 pixels at once, but in fact i'm only "handing" one pixel at once to it. Does the GBA just fetch the next one on himself depending on the adress given? If that would be case wouldn't I have to write
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 for(x=0;x&lt;240;x+=2)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Well, these ARE beginners questions but I hope you can me help to clear it up a bit. Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5391 - Daikath - Sat Apr 26, 2003 3:51 pm</h4>
    <div class="postbody"><span class="postbody">There is a beginners forum so these kind of questiond dont clud up the coders forum :).
<br/>
<br/>
<a href="http://forum.gbadev.org/viewforum.php?f=14" target="_blank">http://forum.gbadev.org/viewforum.php?f=14</a>
<br/>
<br/>
Can't help you further though.<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5392 - bobbin - Sat Apr 26, 2003 4:33 pm</h4>
    <div class="postbody"><span class="postbody">Oh no, how newbie can one get? Please move to beginners forum mod, thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5393 - Daikath - Sat Apr 26, 2003 4:51 pm</h4>
    <div class="postbody"><span class="postbody">I admit this one is in the grey area though :).<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5397 - pollier - Sat Apr 26, 2003 8:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">for(x=0;x&lt;120;x++) 
<br/>
 VideoBuffer[y*120+x] = pic[y*120+x];</td> </tr></table><span class="postbody">
<br/>
<br/>
Shouldn't the 120's be 240's? If VideoBuffer and pic are declared as 16-bit arrays then you don't need to half your loop size, since you need to load in 16-bit values anyways.
<br/>
<br/>
Also, since your data is a contiguous 1D array, you don't really need to have x and y counters. You could make it this instead, maybe at the expense of some understandability:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int ctr; 
<br/>
setMode( MODE_3 | BG2_ENABLE ); 
<br/>
<br/>
for(ctr=0;ctr&lt;(160*240);ctr++) 
<br/>
  VideoBuffer[ctr] = pic[ctr];
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>(Works for me!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5404 - bobbin - Sat Apr 26, 2003 10:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>pollier wrote:</b></span></td> </tr> <tr> <td class="quote">Shouldn't the 120's be 240's? If VideoBuffer and pic are declared as 16-bit arrays then you don't need to half your loop size, since you need to load in 16-bit values anyways.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, that really helped and that is much closer to what I thought. But gbajunkies also isn't wrong. I still don't get why I need to half stuff when dealing with 8bit data?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5406 - Daikath - Sat Apr 26, 2003 10:50 pm</h4>
    <div class="postbody"><span class="postbody">Because the GBA hardware can only load 16-bit data. So you load up 8-bit data in 16-bit chunks.<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5412 - bobbin - Sun Apr 27, 2003 12:41 am</h4>
    <div class="postbody"><span class="postbody">Seems i'm slowly getting it.
<br/>
<br/>
If I load up 16bit data I can simply transfer it, because it as wide as the GBA needs it. If I load up 8bit data, I combine two data blocks to one, so two pixels are being displayed again. Seems I just should have looked at the array specified in gbajunkies tutorial, which is a u16 for a 256 color picture, that made it much clearer to me.
<br/>
<br/>
The basics are always the hardest, but thanks again. Don't worry, I'll soon bother you with questions again ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5424 - Link - Sun Apr 27, 2003 11:29 am</h4>
    <div class="postbody"><span class="postbody">why using gfx2gba i get always "const <span style="font-weight: bold">u8</span> arrayData[]" instead of <span style="font-weight: bold">u16</span> ?
<br/>
How can i get u16? What are the Dos comand i must give to gfx2gba.bat?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5426 - bobbin - Sun Apr 27, 2003 11:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Link wrote:</b></span></td> </tr> <tr> <td class="quote">why using gfx2gba i get always "const <span style="font-weight: bold">u8</span> arrayData[]" instead of <span style="font-weight: bold">u16</span> ?
<br/>
How can i get u16? What are the Dos comand i must give to gfx2gba.bat?</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm using the tool gbAmp, which is very good when converting non-paletted images.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5427 - Link - Sun Apr 27, 2003 12:35 pm</h4>
    <div class="postbody"><span class="postbody">i'm success to get u16 dataArray and u16 palette using pcx2gba, but using GIMP graphic program to save my drawing (a simple withe image) cin .pcx file, and including the .h file in the project i get a Green screen.
<br/>
Why? What i wrong?
<br/>
<br/>
<br/>
Futhermore the tutorials in pernproject are wronged infact it are used <span style="font-weight: bold">void C_Entry(void)</span> instead of <span style="font-weight: bold">int main()</span>
<br/>
<br/>
the second one is the 
<br/>
/****************************************\
<br/>
/ screenmode.h \
<br/>
/ by Dovoto \
<br/>
<span style="font-weight: bold">\</span>****************************************/
<br/>
<br/>
#ifndef SCREENMODE_H .....
<br/>
<br/>
"\* */" is not a correct comment form!!
<br/>
<br/>
I think in that tutorial and in the others there are others errors, so there i wrong!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5428 - Link - Sun Apr 27, 2003 3:05 pm</h4>
    <div class="postbody"><span class="postbody">i think my wrongs depend by GIMP or others Graphics program i use... infact when i strat GIMP i choose to make 240x160 px image, but what resolution? What i must choose of resolution?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5429 - Link - Sun Apr 27, 2003 3:50 pm</h4>
    <div class="postbody"><span class="postbody">ok i've success</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5437 - Daikath - Sun Apr 27, 2003 6:31 pm</h4>
    <div class="postbody"><span class="postbody">U16 and U8 are different types of integers, u8 cant hold as much information as u16 but u8 takes up less memory.<br/>_________________<br/>?There are no stupid questions but there are a LOT of inquisitive idiots.?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
