<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>how does midi2freq work? and something about frequencies. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > how does midi2freq work? and something about frequencies.</h2>
<div id="posts">
<div class="post">
    <h4>#27488 - Lord Graga - Wed Oct 13, 2004 11:25 pm</h4>
    <div class="postbody"><span class="postbody">After some asking around on IRC and searching for info about the MidiKey2Freq function, I have had no luck.
<br/>
<br/>
I would like to know more about how it works. Is it like <a class="postlink" href="http://www.devrs.com/gb/files/sndtab.html" target="_blank">this</a> table (midi to frequency, i.e, C3 = 44, and so on)?
<br/>
<br/>
Is there a way to generate the above table with a tiny piece of code, instead of including it all in the ROM?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27490 - keldon - Thu Oct 14, 2004 12:23 am</h4>
    <div class="postbody"><span class="postbody">There is an algorithm to do this. 
<br/>
<br/>
you have the notes, where (*) means note has a black note following: C'(*), D'(*), E', F'(*), G'(*), A'(*), B', C''(*)
<br/>
Middle C (C'') = 512hz, or A' = 440, Scientists use C for tuning, and the music association use A for tuning.
<br/>
<br/>
Now the relationship between each note is as follows
<br/>
C 8:9 D
<br/>
D 10: 9 E
<br/>
E 15:16 F
<br/>
F 8:9 G
<br/>
G 10: 9 A
<br/>
A 9:8  B
<br/>
B 15:16 C
<br/>
---
<br/>
C 8:9 D means that D = C(Frequency) / 8 * 9
<br/>
<br/>
There are 3 types of tones, Major 8:9, Minor 9:10 and Semi 15:16.
<br/>
<br/>
Now for the black notes, the ratio is 1:1.0595, or multiply 2 ^ (1 / 12), where the first note to generate the number from is the preceeding white note.
<br/>
---
<br/>
Having answered your question, what's wrong with the table? If you don't want to write it, it's in sound.c in the GB-Z80 SDK</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27508 - Lord Graga - Thu Oct 14, 2004 12:46 pm</h4>
    <div class="postbody"><span class="postbody">Ah, lovely! Now I can create some of the data on the run.
<br/>
<br/>
<br/>
The reason why I do not want to use a table is because I'm doing a 4k demo, which, needless to say, requires me to be really compact :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27510 - keldon - Thu Oct 14, 2004 1:26 pm</h4>
    <div class="postbody"><span class="postbody">a 4k demo, neat</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27526 - Abscissa - Thu Oct 14, 2004 7:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">The reason why I do not want to use a table is because I'm doing a 4k demo, which, needless to say, requires me to be really compact :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Coolness.  Hmm, 4k demo and I notice you're from Denmark.  Do you go to any of those demo parties?  There's only ever been one over here in the US, and it was on the other end of the continent from me, so I've never been able to get to one myself.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27527 - Lord Graga - Thu Oct 14, 2004 7:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Abscissa wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">The reason why I do not want to use a table is because I'm doing a 4k demo, which, needless to say, requires me to be really compact :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Coolness.  Hmm, 4k demo and I notice you're from Denmark.  Do you go to any of those demo parties?  There's only ever been one over here in the US, and it was on the other end of the continent from me, so I've never been able to get to one myself.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah, I go to those parties... Actually, I'm going to one tomorrow. It's mighty fun to meet geeks from strange places, and sometimes you can even meet people from #gbadev. The one I'm going to is my third party, in Denmark. I have been to another one in Denmark, and I have also been in Hungary (that was cool).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
