<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>malloc not using all EWRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > malloc not using all EWRAM</h2>
<div id="posts">
<div class="post">
    <h4>#62084 - cyberg - Sun Nov 27, 2005 8:06 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
My problem is that allocating memory with malloc, it will return null pointers just before reaching address 0x02007000, but it's supposed to go up to 0x02040000. and that's the value specified in my linkscript :
<br/>
__memmap_ewram_end   = 0x02040000;
<br/>
<br/>
I also checked with the memory viewer of Visual Boy Advance and memory between 0x02007000 and 0x02040000 is filled with zeros, so I guest it's not used.
<br/>
<br/>
Someone has an idea for this?
<br/>
<br/>
Thx for your help
<br/>
<br/>
Etienne Houle</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62085 - cyberg - Sun Nov 27, 2005 8:22 am</h4>
    <div class="postbody"><span class="postbody">I did my test at the creation of my application and I can allocate up to 0x02040000... so I think I'm getting some memory corruption somewhere!!<br/>_________________<br/>Etienne Houle</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62090 - keldon - Sun Nov 27, 2005 9:43 am</h4>
    <div class="postbody"><span class="postbody">malloc also has to store data about your allocation. Could it be possible that malloc is beginning to store its data in On-Board WRAM - i.e. it has some storage of its tables in the in-chip which enables it to utilize all On Board WRAM space. If so then you would  benefit by allocating larger chunks of data at once and managing it yourself.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
