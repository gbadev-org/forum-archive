<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Detect no$gba? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Detect no$gba?</h2>
<div id="posts">
<div class="post">
    <h4>#141110 - Dwedit - Sat Sep 22, 2007 6:25 am</h4>
    <div class="postbody"><span class="postbody">How do I detect the presence of no$gba?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141115 - gladius - Sat Sep 22, 2007 8:05 am</h4>
    <div class="postbody"><span class="postbody">Specifically?  Or just emulators in general?
<br/>
<br/>
Emulators in general, you can use the fact that nobody emulates the pipeline correctly, so something like this will work:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
isRealHardware:
<br/>
ldr r1, =tmp
<br/>
mov r0, #0
<br/>
str r0, [r1]
<br/>
tmp:
<br/>
mov r0, #1
<br/>
bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The idea here is that the emulator will replace tmp with a nop, while on the real hardware, the instruction will already be in the pipeline and get executed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141121 - Peter - Sat Sep 22, 2007 9:31 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">How do I detect the presence of no$gba?</td> </tr></table><span class="postbody">
<br/>
In No$gba Setup, under the <span style="font-style: italic">Debug</span> page is an option for emulator identification:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Emulator Identification wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Register R0=CA5h on startup
<br/>
</td> </tr></table><span class="postbody">
<br/>
Since it's only during startup, you probably have to extend your ctr0.s.<br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141157 - tepples - Sat Sep 22, 2007 7:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">How do I detect the presence of no$gba?</td> </tr></table><span class="postbody">
<br/>
dir /s /b no$gba.exe
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>I'll assume Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">How do I write a program that detects whether it is running inside no$gba?</td> </tr></table><span class="postbody">
<br/>
Why? To pull a <a class="postlink" href="http://www.pouet.net/prod.php?which=7175" target="_blank">Demotronic</a> or a <a class="postlink" href="http://en.wikipedia.org/wiki/Windows_Genuine_Advantage" target="_blank">WGA</a> and make your projects not work on emulators? Where possible, <a class="postlink" href="http://developer.apple.com/internet/webcontent/objectdetection.html" target="_blank">sniffing behaviors</a> is more reliable than sniffing brands, so what behavior of NO$GBA do you wish to distinguish from that of Game Boy Advance or Nintendo DS hardware? Or do you just want to put "on NO$GBA" at the bottom of PocketNES's menu, like you do for GBA, DS, or unknown BIOS?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">isRealHardware:</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
Reminds me of those old <a class="postlink" href="http://everything2.com/?node=nesticle" target="_blank">four lines of assembly language to detect Nesticle's buggy vblank handler</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141210 - Dwedit - Sun Sep 23, 2007 5:25 am</h4>
    <div class="postbody"><span class="postbody">Mainly it's to have it run in NO$GBA without having annoying "Write to Read Only Memory" messages popping up when I probe for the presence of a GBAMP.  Also I like to distinguish NO$GBA from other emulators since NO$GBA only provides 32k of SRAM.
<br/>
<br/>
(NO$GBA also fails to emulate sprite blend mode correctly, but that's another story)<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141333 - gladius - Mon Sep 24, 2007 5:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Reminds me of those old <a class="postlink" href="http://everything2.com/?node=nesticle" target="_blank">four lines of assembly language to detect Nesticle's buggy vblank handler</a>.</td> </tr></table><span class="postbody">
<br/>
Actually, we can beat that, using pc-relative addressing:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
isRealHardware: 
<br/>
mov r0, #0 
<br/>
str r0, [pc, #-4]
<br/>
mov r0, #1 
<br/>
bx lr 
<br/>
</td> </tr></table><span class="postbody">
<br/>
Not counting the bx lr, that's only 3 instructions to detect emulators.  Not nearly as serious as firing the vblank handler all the time though :).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141335 - Dwedit - Mon Sep 24, 2007 5:48 am</h4>
    <div class="postbody"><span class="postbody">Do the GBA emulators still fall for such an obvious check if the instructions are prefetched?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141337 - wintermute - Mon Sep 24, 2007 7:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">Do the GBA emulators still fall for such an obvious check if the instructions are prefetched?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, emulating a pipeline is slow and doesn't change accuracy.
<br/>
<br/>
You know you can disable those warning messages in no$gba?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141376 - tepples - Mon Sep 24, 2007 8:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">Mainly it's to have it run in NO$GBA without having annoying "Write to Read Only Memory" messages popping up when I probe for the presence of a GBAMP.</td> </tr></table><span class="postbody">
<br/>
There are a few situations you have to distinguish:
<br/>
<ol type="1"><li>Running from RAM, using appended file system (e.g. MBV2 or XBOO cable, compy builds, or GBAMP version 2 firmware's automatic compilation generator) </li><li>Running from RAM, using CF interface (GBAMP version 2) </li><li>Running from ROM, using appended file system (NOR cards, NAND cards with compilations, or NAND cards using flash card firmware's automatic compilation generator) </li><li>Running from ROM, using CF interface (possibly with GBAMP version 3) </li><li>Running from RAM, using a file in ROM (using emulator under PogoShell) </li></ol>
<br/>
You're using the GBAMP in situation 2 and the PC-based emulator in situation 3, right? You can distinguish 1 and 2 from 3 and 4 by saving the initial program counter before you copy the emulator engine down to EWRAM and IWRAM. Or if the ROM title in the GBA header matches the ROM title in RAM, then you're probably not running on a GBAMP.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Also I like to distinguish NO$GBA from other emulators since NO$GBA only provides 32k of SRAM.</td> </tr></table><span class="postbody">
<br/>
Read 0x0E007FFF and 0x0E00FFFF; if changing one changes the other, you have 32 KiB of SRAM. Some versions of PocketNES, designed for use with an XBOO cable and a GBA Game Pak, have called this situation "SRAM cannibalism mode".<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144647 - HyperHacker - Mon Nov 05, 2007 10:38 am</h4>
    <div class="postbody"><span class="postbody">Mind the bump, but if you want to detect a GBAMP, couldn't you just check if the GBA ROM title is "GBAMP Hack"? (You could check for the non-hacked title too, but I doubt anyone is using a GBAMP for homebrew without hacking it. &lt;_&lt;)<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151034 - PadrinatoR - Sun Feb 17, 2008 4:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote">Specifically?  Or just emulators in general?
<br/>
<br/>
Emulators in general, you can use the fact that nobody emulates the pipeline correctly, so something like this will work:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
isRealHardware:
<br/>
ldr r1, =tmp
<br/>
mov r0, #0
<br/>
str r0, [r1]
<br/>
tmp:
<br/>
mov r0, #1
<br/>
bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The idea here is that the emulator will replace tmp with a nop, while on the real hardware, the instruction will already be in the pipeline and get executed.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Sorry if it's a noob question but... how do I use that?
<br/>
I've created a .s file and pasted that code on it, but now how can I use that code?
<br/>
<br/>
Thank you in advance :)
<br/>
<br/>
Bye!<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151042 - tepples - Sun Feb 17, 2008 5:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">(You could check for the non-hacked title too, but I doubt anyone is using a GBAMP for homebrew without hacking it. &lt;_&lt;)</td> </tr></table><span class="postbody">
<br/>
Why would you hack it if you don't have a Nintendo DS or Nintendo DS Lite? Plenty of people on Lik-Sang forums used GBAMP for movies, music, and etexts on a Game Boy Advance SP, with an occasional round of Luminesweeper or something.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151068 - strager - Mon Feb 18, 2008 2:45 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gladius wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
isRealHardware:
<br/>
ldr r1, =tmp
<br/>
mov r0, #0
<br/>
str r0, [r1]
<br/>
tmp:
<br/>
mov r0, #1
<br/>
bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Sorry if it's a noob question but... how do I use that?
<br/>
I've created a .s file and pasted that code on it, but now how can I use that code?
<br/>
<br/>
Thank you in advance :)
<br/>
<br/>
Bye!</span></td> </tr></table><span class="postbody">
<br/>
<br/>
In a header file:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// isrealhardware.h
<br/>
#ifndef __ISREALHARDWARE_H__
<br/>
#define __ISREALHARDWARE_H__
<br/>
<br/>
#ifdef __cplusplus
<br/>
extern "C" {
<br/>
#endif
<br/>
<br/>
extern int isRealHardware(void);
<br/>
<br/>
#ifndef __cplusplus
<br/>
}
<br/>
#endif
<br/>
<br/>
#endif</td> </tr></table><span class="postbody">
<br/>
<br/>
Usage:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if(isRealHardware())
<br/>
    printf("DS hardware detected\n");</td> </tr></table><span class="postbody">
<br/>
<br/>
That should work.  Be sure the .s is compiled and linked!  Also, add the following lines at the beginning of the .s file:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">.arm
<br/>
.align
<br/>
.global isRealHardware</td> </tr></table><span class="postbody">
<br/>
<br/>
[/untested]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151082 - PadrinatoR - Mon Feb 18, 2008 4:54 pm</h4>
    <div class="postbody"><span class="postbody">Thank you strager, it compiled :D But it always says that I'm using an emulator. I've tested both version (the one I quoted in my last post and the other one) :S
<br/>
<br/>
What's happening? :S<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151097 - wintermute - Mon Feb 18, 2008 10:49 pm</h4>
    <div class="postbody"><span class="postbody">Works fine for me, I modified the code slightly to stop no$ moaning about meaningless opcodes and avoid the entry in the literal pool though.
<br/>
<br/>
The assembly code.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   .text
<br/>
   .arm
<br/>
<br/>
   .global   isHardware
<br/>
isHardware:
<br/>
   adr r1, tmp + 2
<br/>
   mov r0, #0
<br/>
   strh r0, [r1]
<br/>
tmp:
<br/>
   mov r0, #1
<br/>
   bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
C/C+ source
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include &lt;nds.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
<br/>
extern "C" bool isHardware();
<br/>
<br/>
int main() {
<br/>
<br/>
<br/>
   irqInit();
<br/>
   irqEnable(IRQ_VBLANK);
<br/>
<br/>
   consoleDemoInit();
<br/>
   
<br/>
   printf("I'm running on a%s\n", isHardware() ? " real DS!" :"n emulator!" );
<br/>
<br/>
   while(1) swiWaitForVBlank();
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Built project <a href="http://www.devkitpro.org/files/isHardware.zip" target="_blank">http://www.devkitpro.org/files/isHardware.zip</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151098 - PadrinatoR - Mon Feb 18, 2008 11:09 pm</h4>
    <div class="postbody"><span class="postbody">Thank you very much wintermute!
<br/>
<br/>
It seems like I should call this function at the beginning of my application, if I call it later it always returns false.
<br/>
<br/>
Well, it works now, thank you again :D<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151102 - tepples - Tue Feb 19, 2008 12:02 am</h4>
    <div class="postbody"><span class="postbody">Are you sure you want this to go in .text, which on the GBA is likely to be ROM (or at least NOR flash)?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151104 - Fling - Tue Feb 19, 2008 12:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote">It seems like I should call this function at the beginning of my application, if I call it later it always returns false.</td> </tr></table><span class="postbody">
<br/>
<br/>
Seems that this was the key for me as well. Thanks for pointing it out!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151119 - wintermute - Tue Feb 19, 2008 11:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
It seems like I should call this function at the beginning of my application, if I call it later it always returns false.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That's a bit odd, what are you doing in the rest of the app? It might be an interrupt kicking in at just the wrong time. Try this instead.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   .section   .ewram,"ax",%progbits
<br/>
   .arm
<br/>
<br/>
   .global   isHardware
<br/>
@---------------------------------------------------------------------------------
<br/>
isHardware:
<br/>
@---------------------------------------------------------------------------------
<br/>
   mov   r3, #0x4000000      @ REG_BASE
<br/>
   ldr   r2, [r3, #0x208]   @ r2 = IME
<br/>
   str   r3, [r3, #0x208]   @ disable IME
<br/>
   adr r1, tmp + 2
<br/>
   mov r0, #0
<br/>
   strh r0, [r1]
<br/>
   str   r2, [r3, #0x208]   @ restore IME
<br/>
tmp:
<br/>
   mov r0, #1
<br/>
   bx lr
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Failing that try .itcm instead of .ewram in the code above and add a long call attribute to the prototype.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
extern "C" bool isHardware() __attribute__((long_call));
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Are you sure you want this to go in .text, which on the GBA is likely to be ROM (or at least NOR flash)?</td> </tr></table><span class="postbody">
<br/>
<br/>
Well no, on GBA it obviously needs to be in RAM. The above code works fine there too but it needs the long_call attribute if the rest of  the code is in ROM.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151120 - kusma - Tue Feb 19, 2008 12:12 pm</h4>
    <div class="postbody"><span class="postbody">Am I missing something obvious, or is it worth noting that this function should only work the first time you call it, since it modifies the actual code? Perhaps that was the problem PadrinatoR had?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151125 - wintermute - Tue Feb 19, 2008 1:35 pm</h4>
    <div class="postbody"><span class="postbody">good point, I didn't associate what Padrinator said with calling the function more than once.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151127 - PadrinatoR - Tue Feb 19, 2008 2:49 pm</h4>
    <div class="postbody"><span class="postbody">Yep, I called that function everywhere I need to check if it's real hardware or an emulator, I didn't think it could be a problem :S
<br/>
<br/>
Thank you for your help :D 
<br/>
I'm sorry about my English, I'm Spanish and my English is not so good ^_^'<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151316 - gladius - Sat Feb 23, 2008 9:25 am</h4>
    <div class="postbody"><span class="postbody">Hehe, I guess I should have put that caveat with the function.  Also, instead of using the adr it can be done even smaller using pc-relative addressing (I posted this version on page 1).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
isRealHardware: 
<br/>
mov r0, #0 
<br/>
str r0, [pc, #-4] 
<br/>
mov r0, #1 
<br/>
bx lr 
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151321 - Dwedit - Sat Feb 23, 2008 11:16 am</h4>
    <div class="postbody"><span class="postbody">Did VBA ever get around to emulating the prefetch?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151329 - gmiller - Sat Feb 23, 2008 3:05 pm</h4>
    <div class="postbody"><span class="postbody">The 1.8 version did but I had to fix it to get it to work (prefetch was not what I had to fix).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
