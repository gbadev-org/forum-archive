<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBA battery consumption - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > GBA battery consumption</h2>
<div id="posts">
<div class="post">
    <h4>#113942 - doynax - Mon Jan 01, 2007 3:32 pm</h4>
    <div class="postbody"><span class="postbody">I'm working on a small book reader application for the GBA. And, yes, I'm aware of the one from Crowe Workshop, but it's got all sorts of small annoyances and limitations.
<br/>
<br/>
Perhaps not so surprisingly one of my main goals is to conserve as much battery power as much as possible.
<br/>
Optimizing the code and letting the CPU sleep whenever possible as well as shutting down any unused hardware units seems obvious. But beyond that should I be aware of any useful tricks (say, place things in any particular type of memory, display the text in white-on-black rather than black-on-white, or use some odd graphics mode) or is it all diminishing returns after doing the basics?
<br/>
(Note that attempting to measure things empirically won't be much of an option on my three year old SP with an already half dead battery.)
<br/>
<br/>
Anyway, thanks in advance for your input. And in the unlikely event that I actually manage to finish something this time around I promise to publish the source.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113944 - tepples - Mon Jan 01, 2007 6:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doynax wrote:</b></span></td> </tr> <tr> <td class="quote">Perhaps not so surprisingly one of my main goals is to conserve as much battery power as much as possible.
<br/>
Optimizing the code and letting the CPU sleep whenever possible as well as shutting down any unused hardware units seems obvious. But beyond that should I be aware of any useful tricks (say, place things in any particular type of memory</td> </tr></table><span class="postbody">
<br/>
When the CPU isn't sleeping, it should usually be running code in EWRAM rather than ROM (use -specs=gba_mb.specs to force this for all code). Accessing GBA ROM takes more battery power than accessing RAM.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">(Note that attempting to measure things empirically won't be much of an option on my three year old SP with an already half dead battery.)</td> </tr></table><span class="postbody">
<br/>
Do you have a multimeter? If so, you can configure it as an ammeter and stick it between the battery's + terminal and the SP's + terminal.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113950 - doynax - Mon Jan 01, 2007 7:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">When the CPU isn't sleeping, it should usually be running code in EWRAM rather than ROM (use -specs=gba_mb.specs to force this for all code). Accessing GBA ROM takes more battery power than accessing RAM.</td> </tr></table><span class="postbody">I'll keep that in mind. And I suppose IWRAM (filled with ARM code) works just as well, it's not as if there's much risk of filling it up for a simple text reader after all.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Do you have a multimeter? If so, you can configure it as an ammeter and stick it between the battery's + terminal and the SP's + terminal.</td> </tr></table><span class="postbody">Good idea (and obvious in retrospect..)! I'll see if I can borrow one at school or from a less electronically challenged friend ;)
<br/>
If nothing else it'd be interesting to see just how much the back light costs.
<br/>
<br/>
I'm going to assume that a simple 16-color text mode consumes the least power for now, after all it should need the least VRAM I/O.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113993 - gb_feedback - Tue Jan 02, 2007 1:22 pm</h4>
    <div class="postbody"><span class="postbody">You may be interested in some measurements I once did. <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3880&amp;highlight=" target="_blank">http://forum.gbadev.org/viewtopic.php?t=3880&amp;highlight=</a>
<br/>
<br/>
Good luck with your project!<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114002 - Ant6n - Tue Jan 02, 2007 4:57 pm</h4>
    <div class="postbody"><span class="postbody">you could turn off the video hardware for evey second frame or so, or maybe using the blanking bit makes the video hardware use less power.
<br/>
you could set memory waitstaes verry high <a href="http://nocash.emubase.de/gbatek.htm#systemcontrol" target="_blank">http://nocash.emubase.de/gbatek.htm#systemcontrol</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114005 - doynax - Tue Jan 02, 2007 5:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gb_feedback wrote:</b></span></td> </tr> <tr> <td class="quote">You may be interested in some measurements I once did. <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3880&amp;highlight=" target="_blank">http://forum.gbadev.org/viewtopic.php?t=3880&amp;highlight=</a>
<br/>
<br/>
Good luck with your project!</td> </tr></table><span class="postbody">Thank you.
<br/>
So I guess I'll just display a big disclaimer on the splash screen recommending against the use of the backlight.
<br/>
At any rate there seems to be quite a lot of battery time to save compared to a regular game =)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ant6n wrote:</b></span></td> </tr> <tr> <td class="quote">you could turn off the video hardware for evey second frame or so, or maybe using the blanking bit makes the video hardware use less power.
<br/>
you could set memory waitstaes verry high <a href="http://nocash.emubase.de/gbatek.htm#systemcontrol" target="_blank">http://nocash.emubase.de/gbatek.htm#systemcontrol</a></td> </tr></table><span class="postbody">Interesting idea, I wonder if continually powering/shutting down the LCD will have any adverse effects (on the power consumption or otherwise).
<br/>
I doubt increasing the wait-states would make much of a difference since just about everything except the text itself should fit in IWRAM.
<br/>
<br/>
<br/>
Now if I could only get this damned font blitter to work properly.. ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
