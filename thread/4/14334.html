<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>place data at 0x4000 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > place data at 0x4000</h2>
<div id="posts">
<div class="post">
    <h4>#143000 - eKid - Tue Oct 16, 2007 12:28 am</h4>
    <div class="postbody"><span class="postbody">I have some code here that assembles to ~11kb in size, and i have some data that i need assembled at 0x4000, how is this done... (i need the rom padded to 16kb then the data comes), some attempts failed because of other sections being written to the end too</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143062 - silent_code - Tue Oct 16, 2007 1:40 pm</h4>
    <div class="postbody"><span class="postbody">this is interesting. me, i'd like to place executable code to a certain (not yet fixed) address. please post any progress! my stuff is rather low on the priority list, so i don't have time to play very much with it.
<br/>
i guess you could somehow tell the compiler you want a specific amount of bytes (like an array) to be reserved, starting at 0x4000. but how to do that is beyond me.
<br/>
<br/>
good luck and happy coding!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143064 - kusma - Tue Oct 16, 2007 2:07 pm</h4>
    <div class="postbody"><span class="postbody">This is typically what a linker-script is used for.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143067 - silent_code - Tue Oct 16, 2007 2:36 pm</h4>
    <div class="postbody"><span class="postbody">well? any hints, links, whatsoever? come on, i know you have them. ;^p</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143068 - kusma - Tue Oct 16, 2007 3:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">well? any hints, links, whatsoever? come on, i know you have them. ;^p</td> </tr></table><span class="postbody">
<br/>
Yes, stay the f*ck away from it, and look for an alternative to forcing the exact address; writing linker scripts easily gives you brain-cancer. Perhaps getting a different hobby? I heard knitting is less frustrating.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143079 - silent_code - Tue Oct 16, 2007 5:56 pm</h4>
    <div class="postbody"><span class="postbody">by "them" i meant "hints", "links" (to hints) and "whatsoever"... so i found your post quite irritating... mostly this part:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">Perhaps getting a different hobby? I heard knitting is less frustrating.</td> </tr></table><span class="postbody">to make it clear, i don't want you to send me any linkscripts.
<br/>
i know they are a pain to write, that's why this stuff is so low priority (right now) and i'm still "hunting" for information - as much as i can get.
<br/>
<br/>
ps: tepples and me have *something* in common, you know.
<br/>
<br/>
isn't there a possibility that's similar to putting code and data into specific ram? (i guess the answer is link script.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143083 - kusma - Tue Oct 16, 2007 6:38 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">isn't there a possibility that's similar to putting code and data into specific ram? (i guess the answer is link script.)</td> </tr></table><span class="postbody">
<br/>
Yes there is, and yes the link-script is the way to do just that. I won't lecture you on that, simply because I'm not the right person for the task; my experience with writing link-scripts is pretty bad. Lack of proper documentation is the primary reason for that. I'm sure there's people who are better suited for this here on these forums. But sure, I'd love to see some documentation on link-scripts myself, so if someone has some good links, shoot.
<br/>
<br/>
I must say, I can't really find many good reasons to require a specific memory location for a given symbol, so I'm wondering if you're attacking the problem from the wrong side.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143086 - silent_code - Tue Oct 16, 2007 7:06 pm</h4>
    <div class="postbody"><span class="postbody">well, i know ds organize (?) has this plug-in and program extendability, but that seems like overkill to me.
<br/>
<br/>
what i want is to have some interchangable functions that don't need to reside in memory all at once (think of enemy ai - most of the time there won't be a single level with all enemy types, so why wast valuable memory with routines that won't be called around 2/3 of the game?), but can be "swapped". i thought having a specific memory location for that would be easier than relocating everyting.
<br/>
<br/>
i hope you understand what i mean.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143095 - kusma - Tue Oct 16, 2007 8:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">i hope you understand what i mean.</td> </tr></table><span class="postbody">
<br/>
Yes, you mean overlays. The default linkerscript for gba in devkitPro supports iwram overlays, so you don't need to be messing around with your own if gba and iwram is your issue. If not, look at the gba.specs file in devkitpro, and try to extrapolate that code to whatever you need.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143099 - tepples - Tue Oct 16, 2007 9:32 pm</h4>
    <div class="postbody"><span class="postbody">You could try taking a look at the specs, link script, etc. for a DLDI driver.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143118 - eKid - Wed Oct 17, 2007 1:11 am</h4>
    <div class="postbody"><span class="postbody">i ended up just pointing the program to 0x8004000/0x2004000 and padding the rom to 16kb...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
