<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Counting Frames - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Counting Frames</h2>
<div id="posts">
<div class="post">
    <h4>#10342 - RaBBi - Tue Sep 02, 2003 11:23 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
my "today" problem (lol) is about detecting a certain amount of frames as an event to start some operation.
<br/>
<br/>
Each VBlank, I ++ my g_Frames variable.
<br/>
<br/>
And in a function (which scroll a BG), I would like to detect the Xth frame to scroll++ my BG.
<br/>
<br/>
I use the '%' operator in a 'if' sequence like this :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
iCount=2;
<br/>
<br/>
if(g_NewFrame &amp;&amp; g_Frames%iCount)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But the smaller the 'iCount' variable is, the slower the scroll is.
<br/>
<br/>
And of course, the bigger the 'iCount' variable is, the faster the scroll is.
<br/>
<br/>
But in my mind, I thought there would be the inverse.
<br/>
<br/>
What's wrong in mine ? lol<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10343 - tepples - Tue Sep 02, 2003 11:30 pm</h4>
    <div class="postbody"><span class="postbody">For one thing, '%' is a very slow operator on architectures with no hardware divide, such as the ARM7.
<br/>
<br/>
For another, you are describing an equation that's true when the remainder is not zero. If you want to slow it down, make the equation true when the remainder is zero.
<br/>
<br/>
Best option is to have a variable which you increment each vblank. Then when it reaches or surpasses iCount, set it back to zero and load the next animation frame. If you have several animations running simultaneously (such as sprite cels), you'll want to make this a field in the struct that describes each animation.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10349 - RaBBi - Wed Sep 03, 2003 1:06 am</h4>
    <div class="postbody"><span class="postbody">thank you tepples !
<br/>
<br/>
I understand the first part of your answer and I'll use a frame count and test if equal to iCount then reset it ^^
<br/>
<br/>
But I'll use later the trick about sprite animation/struct that you recommended me cause I'm still a newbie and sprite animation in my code is still very simple.
<br/>
<br/>
But as I use struct for my sprite yet, I think I understand what do you mean and what field in my struct I may use.
<br/>
<br/>
I'll post if I encount problem about it, thanx ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
