<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>REG_DISPCNT  16bit or 32bit? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > REG_DISPCNT  16bit or 32bit?</h2>
<div id="posts">
<div class="post">
    <h4>#82504 - E-Coder - Sat May 06, 2006 11:31 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I'm new on this forum, i'm fluence in Dutch so i'll make a lot of spelling mistakes. I'm sorry for that.
<br/>
<br/>
I'm reading a tutorial about GBA programming (GbaJunkies tutorial). Here's a quote:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
REG_DISPCNT 
<br/>
REG_DISPCNT is probably the most important register in GBA programming because it allows 
<br/>
you to do the following: 
<br/>
-  Set the screen mode 
<br/>
-  Enable backgrounds 
<br/>
-  Set the layout of sprites in memory 
<br/>
-  Gives you control over video hardware 
<br/>
<br/>
It is a 16-bit register which is split up to control different areas as outlined above. Below is 
<br/>
a description of what each bit or set of bits does within the register. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But when I look up in gba.h i'll find this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define REG_DISPCNT    *(u32*)0x4000000      //Display Control (Mode)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This is a 32bit register? Right? Or do we only use the lower-part of the register? Or is GbaJunkie using an old header.
<br/>
<br/>
I'm a little bit confused. 
<br/>
<br/>
E-Coder.<br/>_________________<br/>Newbie in GbaDev.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82519 - poslundc - Sun May 07, 2006 1:18 am</h4>
    <div class="postbody"><span class="postbody">It's technically a 32-bit register, although only the bottom 16 bits have any purpose as far as I am aware.
<br/>
<br/>
The IO memory region (addresses beginning with 0x04000000) has a 32-bit bus width (this means it takes the same amount of time to read or write 32 bits as it does 8 or 16) and the ARM computer is natively a 32-bit machine, so it doesn't hurt to access it 32 bits at a time if you don't have a reason to be dealing with it in 16 bit chunks.
<br/>
<br/>
So, in this case you can access it as a 32-bit register (u32 *) or a 16-bit register (u16 *) and it makes no difference, since there is nothing of consequence in the top two bytes of the 32 bits. This is not always the case with every register, though, so you should probably use the correct field-width when you can to be safe.
<br/>
<br/>
Check out the <a class="postlink" href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm" target="_blank">Cowbite Virtual Hardware Spec</a> as a reference sheet for more detailed specifications of each register and their behaviour.
<br/>
<br/>
Also, check out Cearn's <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/toc.htm" target="_blank">Tonc tutorial</a> for more up-to-date and thorough content than other tutorials currently available.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82526 - Lord Graga - Sun May 07, 2006 2:06 am</h4>
    <div class="postbody"><span class="postbody">Actually, the first of the high bits swap the green components in every other pixel.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82558 - E-Coder - Sun May 07, 2006 7:44 am</h4>
    <div class="postbody"><span class="postbody">Thanks :). Very fast response!<br/>_________________<br/>Newbie in GbaDev.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82559 - poslundc - Sun May 07, 2006 7:48 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">Actually, the first of the high bits swap the green components in every other pixel.</td> </tr></table><span class="postbody">
<br/>
<br/>
Really?! Huh! Is that useful for anything...?
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82584 - Lord Graga - Sun May 07, 2006 2:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">Actually, the first of the high bits swap the green components in every other pixel.</td> </tr></table><span class="postbody">
<br/>
<br/>
Really?! Huh! Is that useful for anything...?
<br/>
<br/>
Dan.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Not really. Something about screens with different pixel formations.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
