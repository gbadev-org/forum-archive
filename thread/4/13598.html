<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>16px Movement - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > 16px Movement</h2>
<div id="posts">
<div class="post">
    <h4>#133480 - Ruben - Fri Jul 06, 2007 11:49 am</h4>
    <div class="postbody"><span class="postbody">Hello all. I just thought that I'd post my solution for this type of movement. All it does is instead of moving 1px per frame, it moves 16px at a time and after it's done it checks again. This is the basic breakdown:
<br/>
<br/>
1. You initialize a variable to store how many pixels are left for movement.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int MovementPixelsLeft = 0;</td> </tr></table><span class="postbody">
<br/>
<br/>
2. Then, you create a script which updates the movement and pixels, etc.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//Define Commands
<br/>
#define MOVE_UP 0x00
<br/>
#define MOVE_DOWN 0x01
<br/>
#define MOVE_LEFT 0x02
<br/>
#define MOVE_RIGHT 0x03
<br/>
int CommandQueue[4];
<br/>
int CommandQueueSize = 0;
<br/>
int i;
<br/>
<br/>
//Adds Commands to the Queue
<br/>
void QueueCommand(u8 WhichCommand) {
<br/>
 CommandQueue[CommandQueueSize] = WhichCommand;
<br/>
 CommandQueueSize++;
<br/>
}
<br/>
<br/>
//Update the Variables
<br/>
void UpdateMovement() {
<br/>
  if(MovementPixelsLeft &lt;= 0) {
<br/>
   if(IsKeyPressed(InputPadUp)) {
<br/>
    for(i=0;i&lt;16;i++) QueueCommand(MOVE_UP);
<br/>
    break;
<br/>
   }
<br/>
   if(IsKeyPressed(InputPadDown)) {
<br/>
    for(i=0;i&lt;16;i++) QueueCommand(MOVE_DOWN);
<br/>
    break;
<br/>
   }
<br/>
   if(IsKeyPressed(InputPadLeft)) {
<br/>
    for(i=0;i&lt;16;i++) QueueCommand(MOVE_LEFT);
<br/>
    break;
<br/>
   }
<br/>
   if(IsKeyPressed(InputPadRight)) {
<br/>
    for(i=0;i&lt;16;i++) QueueCommand(MOVE_RIGHT);
<br/>
    break;
<br/>
   }
<br/>
  }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
3. Then insert the update script at the beginning of your loop
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main() {
<br/>
 for(FrameCount=0;;FrameCount++) {
<br/>
  UpdateMovement();
<br/>
  //The Rest of Your Code Goes Here
<br/>
 }
<br/>
 return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
4. Finally, you make a function to handle the commands inserted
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//Execute Commands
<br/>
void ExecuteCommands() {
<br/>
 switch(CommandQueue[CommandQueueSize-1]) {
<br/>
  case MOVE_UP:
<br/>
   SpriteDirection = 0;
<br/>
   SpriteCurrentY--;
<br/>
   break;
<br/>
  case MOVE_DOWN:
<br/>
   SpriteDirection = 1;
<br/>
   SpriteCurrentY++;
<br/>
   break;
<br/>
  case MOVE_LEFT:
<br/>
   SpriteDirection = 2;
<br/>
   SpriteCurrentX--;
<br/>
   break;
<br/>
  case MOVE_RIGHT:
<br/>
   SpriteDirection = 3;
<br/>
   SpriteCurrentX++;
<br/>
   break;
<br/>
 }
<br/>
 CommandQueueSize--;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
5. As a final step, you add this to the bottom of your loop
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main() {
<br/>
 for(FrameCount=0;;FrameCount++) {
<br/>
  UpdateMovement();
<br/>
  //The Rest of Your Code Goes Here
<br/>
  ExecuteCommands();
<br/>
 }
<br/>
 return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That's pretty much it. You just have to define your own function for the 'IsKeyPressed()' and the 'InputPadx'. Hope this helps someone out...
<br/>
<br/>
Ruben.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
