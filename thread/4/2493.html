<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprites from bg/map Tiles (+ other effects) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Sprites from bg/map Tiles (+ other effects)</h2>
<div id="posts">
<div class="post">
    <h4>#13481 - RaBBi - Sun Dec 14, 2003 9:24 pm</h4>
    <div class="postbody"><span class="postbody">Hi all ^^
<br/>
<br/>
Studying Golden Sun with VBA, I saw that text engine was based on bg tiles which are used as sprites.
<br/>
<br/>
I think it's "just" a question of copying the right tiles memory entries to the tiles sprite memory.
<br/>
If anyone has another view of the method, I take it ^^
<br/>
(For know all I didn't figured out is for the color indexes cause the both 16 colors palettes, one for initial tiles, and other for sprites are not similarly arranged)
<br/>
<br/>
But, additionally, the sprites letters have an "italic" aspect.
<br/>
<br/>
So I wanted to know if this effect is possible with tricks or just by register values? (I inspect the oam entries and they're not rotated for example).
<br/>
<br/>
Plus, letters have black shadow under but the sprites use black as transparent color.<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13482 - sajiimori - Sun Dec 14, 2003 9:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
I think it's "just" a question of copying the right tiles memory entries to the tiles sprite memory.
<br/>
</td> </tr></table><span class="postbody">
<br/>
The letters are actually rendered directly into character RAM, which is how the font is not monospace.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
But, additionally, the sprites letters have an "italic" aspect.
<br/>
</td> </tr></table><span class="postbody">
<br/>
They were drawn that way.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Plus, letters have black shadow under but the sprites use black as transparent color.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Sprites do not use "black" as the transparent color.  They use palette index 0.  (This comes up so often that it should be in the FAQ.)  Edit: Nevermind, I see what you mean.  I don't know how that's done, actually.  Edit: Wait, yes I do.  There are two blacks in the palette: color 0 and color 1.  Color 1 is the shadow.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13483 - RaBBi - Sun Dec 14, 2003 10:01 pm</h4>
    <div class="postbody"><span class="postbody">Ok so you think the sprites aren't generated from bg tiles?
<br/>
<br/>
That's could be such an easier way in that case.
<br/>
Even for the palette indexes that's more understandable.
<br/>
<br/>
But why are letters loaded as bg tiles if they'ren't used... ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13484 - sajiimori - Sun Dec 14, 2003 10:20 pm</h4>
    <div class="postbody"><span class="postbody">Remember, the same character RAM is used for both sprites and tiles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13485 - tepples - Sun Dec 14, 2003 10:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Sprites do not use "black" as the transparent color.  They use palette index 0.  (This comes up so often that it should be in the FAQ.)</td> </tr></table><span class="postbody">
<br/>
It's answered now. I just finished adding subsections on transparency and priority to the Graphics section of the Beginners' FAQ.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13486 - RaBBi - Sun Dec 14, 2003 11:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">Remember, the same character RAM is used for both sprites and tiles.</td> </tr></table><span class="postbody">
<br/>
<br/>
I must say that I need some explanations about this...
<br/>
For many days, I try to master the architecture of the GBA, reading cowbyte and GBAtek technical info, but even after that I don't about what RAM you're talk about :/
<br/>
<br/>
"character" means the same memory area of Character Base Bloc?
<br/>
I don't mind, cause it ends before 0x6010000, adress of the sprite tile data.
<br/>
<br/>
So I think I'm too confused by term of "character RAM", since there's still a lot of things about GBA I must learn ^^<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13487 - sajiimori - Sun Dec 14, 2003 11:30 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, I think I was just confusing myself :-P
<br/>
<br/>
Anyway, there seems to be a monospace font in the tile area, along with a few bits of static text like "Time" and "Isaac", apparently used for menus.  The text used in conversations seems to be rendered straight into sprite RAM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13488 - RaBBi - Sun Dec 14, 2003 11:36 pm</h4>
    <div class="postbody"><span class="postbody">character Ram doesn't exists? ^^
<br/>
<br/>
Yep, I agree with the way dialog text is rendered ^^
<br/>
And for tiles used for static text.
<br/>
That's OK :)
<br/>
<br/>
The next thing I'm searching for is how they can place letters near (or straight, I don't know what english term to use) each other with a initially monospace font.
<br/>
<br/>
Is there a simple way to overlap tiles?
<br/>
<br/>
I use Ham, and the function SetMapTile accept x and y as a tile coordonates, not pixels...<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13489 - sgeos - Mon Dec 15, 2003 12:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>RaBBi wrote:</b></span></td> </tr> <tr> <td class="quote">character Ram doesn't exists? ^^</td> </tr></table><span class="postbody">
<br/>
<br/>
A character is a single 8 by 8 pixel block.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>RaBBi wrote:</b></span></td> </tr> <tr> <td class="quote">The next thing I'm searching for is how they can place letters near (or straight, I don't know what english term to use) each other with a initially monospace font.</td> </tr></table><span class="postbody">
<br/>
<br/>
I think you are looking for the english phrase "right next to".
<br/>
"I'm searching for how they place letters right next to each other with an initially monospace font."
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>RaBBi wrote:</b></span></td> </tr> <tr> <td class="quote">Is there a simple way to overlap tiles?</td> </tr></table><span class="postbody">
<br/>
<br/>
You can shift and OR things.  If you start with two characters:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0  ........   ........
<br/>
1  .#......   ........
<br/>
2  .#......   .#......
<br/>
3  .#......   ........
<br/>
4  .###....   .#......
<br/>
5  .#..#...   .#......
<br/>
6  .#..#...   .#......
<br/>
7  ........   ........
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You need to shove the second character onto the first one.  If we want to combine line 5, we need to shift the data in the second character over before we OR the lines together:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">    .#..#...
<br/>
-&gt;  .#......
<br/>
<br/>
<br/>
    .#..#...
<br/>
------&gt;  .#......
<br/>
<br/>
<br/>
    .#..#.#.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Note: Each dot represents a transparnet pixel, and each # a non-transparent pixel.  The dots and # do not represent bits!
<br/>
<br/>
Each line needs to be combined to complete the character.  Five pixels get pushed off the edge in the diagram above.  One will want to shift (some of) those pixels onto the next character if overlapping multiple tiles.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13490 - RaBBi - Mon Dec 15, 2003 12:43 am</h4>
    <div class="postbody"><span class="postbody">Thanks a lot Brendan!
<br/>
<br/>
I don't know yet how exactly I'm going to do that but it's a great highlight ^^
<br/>
<br/>
In fact, as I use Ham, and the memory settings are managed (user don't know exactly at which adresses are loaded tiles and sprites), do you think I have to do this way? :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
(example for 2 letters)
<br/>
- search the two letters in a tile source array,
<br/>
- made 2 arrays from them,
<br/>
- do SHIFT lines of the second,
<br/>
- OR the 2 ones,
<br/>
- finally load the result array to sprites
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It could work for sprites that are directly rendered...but my letters tiles are already loaded.
<br/>
So I need to manage bits in tiles memory, need I?...<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"><br/><br/>Last edited by RaBBi on Mon Dec 15, 2003 12:54 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#13491 - sajiimori - Mon Dec 15, 2003 12:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
The next thing I'm searching for is how they can place letters near (or straight, I don't know what english term to use) each other with a initially monospace font.
<br/>
</td> </tr></table><span class="postbody">
<br/>
The conversation text in Golden Sun does not use the monospace font.  It uses a variable-width font that is apparently not stored in VRAM, but is instead rendered into VRAM dynamically.
<br/>
<br/>
Use VBA to look at the sprite characters with "automatic update" turned on, then talk to an NPC.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#13492 - RaBBi - Mon Dec 15, 2003 12:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
The next thing I'm searching for is how they can place letters near (or straight, I don't know what english term to use) each other with a initially monospace font.
<br/>
</td> </tr></table><span class="postbody">
<br/>
The conversation text in Golden Sun does not use the monospace font.  It uses a variable-width font that is apparently not stored in VRAM, but is instead rendered into VRAM dynamically.
<br/>
<br/>
Use VBA to look at the sprite characters with "automatic update" turned on, then talk to an NPC.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah ^^
<br/>
<br/>
I think you have a delay post ^^
<br/>
This is for sprites letters only.
<br/>
<br/>
But if you look at fixed hero's name , or "Psy", you'll see that is on a BG, so bg tiles with monospaced font are used, but tiles are closed to each other.
<br/>
That's what I discuss with Brendan ^^
<br/>
<br/>
Note: I said "load in sprite mem" but Brendan's trick can work for bg tiles too!
<br/>
I'm a fool :P<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
