<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem with accessing Save data from multiboot HOST - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Problem with accessing Save data from multiboot HOST</h2>
<div id="posts">
<div class="post">
    <h4>#83396 - Natso - Tue May 16, 2006 3:24 am</h4>
    <div class="postbody"><span class="postbody">Ok, I'm working on this game, and before I had multiboot it was able to access the save memory(SRAM i believe) and I could restart the cartridge and the save data would still be there. Once I made it be multiboot, where it totally copies itself to the client(s), it can no longer access the SRAM.
<br/>
<br/>
Is there a known way to fix this, or do I just need to scrap the multiboot(saving is essential to the game)?
<br/>
<br/>
Thanks
<br/>
 - Natso<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83398 - Dwedit - Tue May 16, 2006 3:42 am</h4>
    <div class="postbody"><span class="postbody">If you use multiboot, you have to assume that no cartridge is inserted, otherwise you'll overwrite the SRAM of whatever cartridge is inserted.  If you want to assume a cartridge is inserted, you can still use multiboot, but you need to check that the cartridge is indeed the one you want to write to before writing there.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83420 - tepples - Tue May 16, 2006 5:44 am</h4>
    <div class="postbody"><span class="postbody">"Multiboot" has become an overloaded term.
<br/>
<br/>
In a true Single-Pak Multiplayer configuration (not a GBA Movie Player configuration), clients should send their data back to the server, which stores it on the cart's SRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83438 - Natso - Tue May 16, 2006 12:35 pm</h4>
    <div class="postbody"><span class="postbody">I'm talking about the single-pak multiplayer configuration... but the thing is that the Host can run without the pak, just like the Client can. This was a side-effect of me changing the game to be multiboot, but it also prevents the host from accessing the SRAM.<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83558 - phonymike - Tue May 16, 2006 11:38 pm</h4>
    <div class="postbody"><span class="postbody">if there's a cartridge inserted into the gba, and is a standard sram, then any program running on the gba can access its sram by reading 0xE000000.
<br/>
<br/>
if you want all programs running to be able to save, then you must have each one detect if there's a cartridge inserted, and if not, have the next gba check, and down the line. sram is like a register, all gbas cannot access the sram in one cartridge by accessing the register, you have to incorporate code that makes all gbas send sram data to the gba with a cart plugged in.
<br/>
<br/>
maybe the cart plugged in doesn't have sram, it may have flash or eeprom and shit. in which case you need to know which kind it is so your code can access it with certain protocols.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83568 - tepples - Wed May 17, 2006 12:07 am</h4>
    <div class="postbody"><span class="postbody">Unless the problem is that the emulator doesn't make a .sav file for multiboot programs. In that case, you need to make your program a .mb.gba, which will be loaded as a GBA ROM but is copied to EWRAM upon startup.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83575 - Natso - Wed May 17, 2006 1:39 am</h4>
    <div class="postbody"><span class="postbody">okay; all my multiboot stuff is tested on real GBAs (Actually a GBA and GBA SP), where the host always has the flash cart. I think my problem is that it IS a flash cart, and so the save positioning &amp; such doesn't work like a normal cart.
<br/>
<br/>
Out of curiosity, if I made the host and client connect and replaced the flash cart with my Pokemon Ruby cart(the host and client don't freeze), and try to write tot he save data, will it work properly?(for my program, not pkm ruby)
<br/>
<br/>
<br/>
Thanks
<br/>
 - Natso<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83576 - chishm - Wed May 17, 2006 1:48 am</h4>
    <div class="postbody"><span class="postbody">No, Pokemon Ruby (and Sapphire) use 128KB of Flash ROM for saving, so you cannot write to it in the same way as SRAM.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83644 - thegamefreak0134 - Wed May 17, 2006 5:20 pm</h4>
    <div class="postbody"><span class="postbody">I think I see the problem. Are you making the host a multiboot program as well? (like, doing a multiboot transfer rather than writing to the cart?) I think if the host is multiboot, it won't be able to write to the cart, seeing as how the GBA treats it like a cart isn't there. What you'll need to do then is make a regular gba game (write it to the cart and everything) and have that game act as the host. Then, have it send the multiboot program to the other GBAs, but run a separate part of itself that behaves like the multoboot programs. Then, this "host version" should have saving rights.<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83664 - tepples - Wed May 17, 2006 7:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>thegamefreak0134 wrote:</b></span></td> </tr> <tr> <td class="quote">I think I see the problem. Are you making the host a multiboot program as well? (like, doing a multiboot transfer rather than writing to the cart?) I think if the host is multiboot, it won't be able to write to the cart, seeing as how the GBA treats it like a cart isn't there.</td> </tr></table><span class="postbody">
<br/>
O rly? Does the hardware lock out the ROM and SRAM when running a program that has been loaded into EWRAM? That's not what I have observed, especially given that 1. the Flash2Advance USB linker can read and write the cart inside the GBA, GBA SP, or Game Boy Player, and 2. "SRAM cannibalism" builds of PocketNES worked even before the GBA Movie Player became the most popular method of running mb.gba programs.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83676 - thegamefreak0134 - Wed May 17, 2006 8:33 pm</h4>
    <div class="postbody"><span class="postbody">...I guess you have a valid point. Shutting up now, and cowering in my corner. (Sorry, just seemed logical to me.)<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83710 - phonymike - Thu May 18, 2006 12:02 am</h4>
    <div class="postbody"><span class="postbody">how about you write a program that writes to sram, making sure it works on your cart. then make a client rom that sends data to a server program, in which the server saves the data. I can't believe you're having trouble with sram access yet got gba comms working.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
