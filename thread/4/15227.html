<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compressed IWRAM and EWRAM sections? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Compressed IWRAM and EWRAM sections?</h2>
<div id="posts">
<div class="post">
    <h4>#152743 - Dwedit - Thu Mar 20, 2008 9:40 am</h4>
    <div class="postbody"><span class="postbody">How hard would it be to modify the CRT0, Linkscript, and makefile to apply compression on any code which is loaded into RAM?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152806 - strager - Fri Mar 21, 2008 12:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">How hard would it be to modify the CRT0, Linkscript, and makefile to apply compression on any code which is loaded into RAM?</td> </tr></table><span class="postbody">
<br/>
<br/>
No.  It's certainly possible; it's been done before (though NDA says I cannot say where).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152808 - Miked0801 - Fri Mar 21, 2008 1:14 am</h4>
    <div class="postbody"><span class="postbody">Compressing code is usually a last resort tactic.  Are you really that short on RAM that you need to deal with all the BS that is comp/uncomp code all over the place?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152811 - eKid - Fri Mar 21, 2008 1:52 am</h4>
    <div class="postbody"><span class="postbody">I did it a few times :). What I did was modify the linkscript to put all RAM sections into one big section at the end. Then I objcopy'd that section from the elf, ran gbalzss on it (i used lz77 compression). Then I objcopy'd the other sections, and appended my compressed section. After that i can just use the LZ77 swi to decompress into ram.
<br/>
<br/>
I only did this on small ASM only projects, never C. Also, the LZ77 compression didn't really save much space.. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152815 - tepples - Fri Mar 21, 2008 3:24 am</h4>
    <div class="postbody"><span class="postbody">I wonder how hard it would be to add mb.gba and .nds to <a class="postlink" href="http://upx.sourceforge.net/" target="_blank">UPX</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152817 - eKid - Fri Mar 21, 2008 3:50 am</h4>
    <div class="postbody"><span class="postbody">That would be interesting... But how big is the UPX decompressor itself? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152831 - tepples - Fri Mar 21, 2008 1:06 pm</h4>
    <div class="postbody"><span class="postbody">For x86, the UPX decompressor is less than a kilobyte. I don't know how big it is for Thumb. But I saw on upx.sf.net that it already exists for at least some ARM executable formats, which is why I suggested it.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152844 - Miked0801 - Fri Mar 21, 2008 4:29 pm</h4>
    <div class="postbody"><span class="postbody">PUCrunch is still the best GBA compressor I know of.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
