<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Interrupts: Shutdown GBA? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Interrupts: Shutdown GBA?</h2>
<div id="posts">
<div class="post">
    <h4>#5609 - Rattus - Sat May 03, 2003 3:38 am</h4>
    <div class="postbody"><span class="postbody">How common is the use of hardware interrupts over polling to detect the key states? If the majority of games DIDN'T use REG_KEYCNT, would it be possible to do something like the following?
<br/>
<br/>
1. Load your custom GBA shutdown (or a trainer, or whatever) code into memory
<br/>
<br/>
2. Stick a jump instruction at 0x03007FFC (the address branched to when a hardware interrupt occurs) to point to your custom code
<br/>
<br/>
3. Set the key control register to generate a hardware interrupt when a set of keys (eg start &amp; select &amp; L &amp; R)
<br/>
<br/>
4. Load a game ROM and transfer control to it
<br/>
<br/>
<br/>
So that (assuming the ROM didn't overwrite your function loaded into ram at step 1) during any game, you could hold down the buttons and have a suspend-mode for any game? Hmm, thinking about it, this would only work for a game that didn't hook the 0x03007FFC hardware interrupt vector at all, wouldn't it? :( Can anyone else think of a creative way of making a software gameshark/universal suspend-the-GBA system that could be loaded around existing ROMs on a flash cart?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#5624 - tepples - Sat May 03, 2003 11:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Rattus wrote:</b></span></td> </tr> <tr> <td class="quote">Can anyone else think of a creative way of making a software gameshark/universal suspend-the-GBA system that could be loaded around existing ROMs on a flash cart?</td> </tr></table><span class="postbody">
<br/>
You'd have to hack the game such that any read from the joypad port is replaced with a call to your subroutine.  Though you probably wouldn't be able to automate it 100 percent, running the game in a debugging emulator and placing a trap on READ 0x04000130 would let you find the addresses where each game reads the controller during its pause menu.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
