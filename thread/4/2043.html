<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Garbage Collector in C for GBA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Garbage Collector in C for GBA</h2>
<div id="posts">
<div class="post">
    <h4>#10567 - Gordon - Tue Sep 09, 2003 5:17 am</h4>
    <div class="postbody"><span class="postbody">Any one has written Garbage Collector in C?
<br/>
 I just want to get some ideas from it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10569 - tepples - Tue Sep 09, 2003 5:33 am</h4>
    <div class="postbody"><span class="postbody">The best-known garbage-collecting allocator for C is the <a class="postlink" href="http://www.hpl.hp.com/personal/Hans_Boehm/gc/" target="_blank">Boehm garbage collector for C and C++</a>. I'm not sure if it's well suited for 256 KB arenas though...<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10570 - Gordon - Tue Sep 09, 2003 5:59 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The best-known garbage-collecting allocator for C is the <a class="postlink" href="http://www.hpl.hp.com/personal/Hans_Boehm/gc/" target="_blank">Boehm garbage collector for C and C++</a>. I'm not sure if it's well suited for 256 KB arenas though...</td> </tr></table><span class="postbody">
<br/>
The collector is not completely portable, but the distribution includes ports to most standard PC and UNIX platforms. Win32, win32s, OS/2, and UNIX environments are supported on Intel-based PCs, as are all common UNIX workstations, MacOS, and AmigaDOS. Some ports are more polished than others</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10578 - Lupin - Tue Sep 09, 2003 2:39 pm</h4>
    <div class="postbody"><span class="postbody">why'd I need an garbage collector?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10586 - Cyberman - Tue Sep 09, 2003 9:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">why'd I need an garbage collector?</td> </tr></table><span class="postbody">
<br/>
<br/>
It's pretty simple.. it's called memory management.  When you allocate a lot of objects and you wish to keep them persistant as long as necessary then 'collecting' the ones you don't need at the moment for new objects to be created is needed.  They become garbage and need collected to free space for new objects.
<br/>
<br/>
That's about it :)
<br/>
<br/>
Cyb<br/>_________________<br/>If at first you don't succeed parachuting is NOT for you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10599 - Gordon - Wed Sep 10, 2003 4:32 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cyberman wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">why'd I need an garbage collector?</td> </tr></table><span class="postbody">
<br/>
keep them persistant as long as necessary then 'collecting' the ones you don't need
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
Since a object can be referenced everywhere.  do you have any simple method to indicate which object is free to collect! and How to malloc a new object?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10600 - tepples - Wed Sep 10, 2003 4:48 am</h4>
    <div class="postbody"><span class="postbody">For answers, look up any fundamental reference on memory allocation that includes garbage collecting. PM me if you need help forming a Google query that returns relevant results.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10614 - Lupin - Wed Sep 10, 2003 4:36 pm</h4>
    <div class="postbody"><span class="postbody">Im a little confused, you're talking of objects, but as long as we're talking about C you could just mean arrays or variables...
<br/>
<br/>
Why don't you just manually allocate an region in memory instead of using such an garbage collector? I think this would be faster too though... but I'm just an C n00b :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10620 - sajiimori - Wed Sep 10, 2003 7:33 pm</h4>
    <div class="postbody"><span class="postbody">The word "object" is often used in a generic way to denote anything that uses memory.
<br/>
<br/>
Ever used malloc/free or new/delete?  Then you know how important it is to free memory that you've allocated at the appropriate time, to not lose your last pointer to an allocated block, and to not use a pointer after the block has been freed.
<br/>
<br/>
A garbage collector allows you to forget about these details by freeing blocks automatically when appropriate, at the expense of some speed.  Most new languages (and some old ones) support GC.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10628 - Gordon - Thu Sep 11, 2003 4:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">The word "object" is often used in a generic way to denote anything that uses memory.
<br/>
<br/>
Ever used malloc/free or new/delete?  Then you know how important it is to free memory that you've allocated at the appropriate time, to not lose your last pointer to an allocated block, and to not use a pointer after the block has been freed.
<br/>
<br/>
A garbage collector allows you to forget about these details by freeing blocks automatically when appropriate, at the expense of some speed.  Most new languages (and some old ones) support GC.</td> </tr></table><span class="postbody">
<br/>
Thx for your explaination! Beening a good developer is not that easy! 
<br/>
<br/>
Message for ALL:
<br/>
We only interested "Garbage Collector"(GC) here, We don't care how we are going to use it!, It may be used in VM, OOP in C! Developing a GC in a Platform is easy, but it doesn't imply for GBA.
<br/>
<br/>
Sine, I love to write OO in C, instead of C++! Don't you know how to OOP in C? We may talk about it!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10643 - Lupin - Thu Sep 11, 2003 2:41 pm</h4>
    <div class="postbody"><span class="postbody">I took an look at malloc (oh, I should really learn more C) and I noticed that I missed such an important function! What does Malloc actually do? I mean I know what it's doing in general, but what does it do in code, is it possible to code my own malloc in C or ASM? I know it should of course be possible to do it, but how?
<br/>
<br/>
Sorry for using your thread for my dumb questions, but these questions at least keep the thread up ;P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10649 - tepples - Thu Sep 11, 2003 3:36 pm</h4>
    <div class="postbody"><span class="postbody">Google search: <a class="postlink" href="http://www.google.com/search?q=malloc%20algorithm" target="_blank">malloc algorithm</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10655 - sajiimori - Thu Sep 11, 2003 5:28 pm</h4>
    <div class="postbody"><span class="postbody">It always suprises me how long it takes for many beginning C programmers to discover malloc/free.
<br/>
<br/>
Not to sound like a broken record, but if you want to really understand C, get the C Primer.  It's a pretty easy read, and fun when you're working along with it.  You can also read it out of order.
<br/>
<br/>
If you want to understand how OS internals like memory allocation work, you can grab Lions' Commentary On Unix 6th Edition.  Also, the character RAM allocation class I posted for hnager is very much like a simple malloc/free.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
