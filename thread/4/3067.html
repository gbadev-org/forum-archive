<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Rotate a sprite - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Rotate a sprite</h2>
<div id="posts">
<div class="post">
    <h4>#17925 - ProblemBaby - Wed Mar 17, 2004 4:58 pm</h4>
    <div class="postbody"><span class="postbody">Hi is it possible to rotate a sprite around an another point then the centrum?
<br/>
then how???</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17926 - poslundc - Wed Mar 17, 2004 5:16 pm</h4>
    <div class="postbody"><span class="postbody">If by centrum you mean the major part of the vertebrae in your spinal column, then the answer is no.
<br/>
<br/>
If you mean the centre of a sprite, then just make variables representing the distance from the centre of the sprite to your new origin, then transform those with the same rotation matrix you use for the sprite. Then add the results to your sprite's coordinates.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17928 - ProblemBaby - Wed Mar 17, 2004 5:21 pm</h4>
    <div class="postbody"><span class="postbody">yes, I mean the centre of the sprite.
<br/>
<br/>
I don't understand, can you explain with some code?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17929 - Gopher - Wed Mar 17, 2004 5:34 pm</h4>
    <div class="postbody"><span class="postbody">[ edited : fixed mistake caught by RaBBi ]
<br/>
The rotation data is a 2x2 matrix, as so
<br/>
[ A  B ]
<br/>
[ C  D ]
<br/>
<br/>
any position in a 2d space (like the screen) can be represented by a vector ( x  y )
<br/>
you can multiply the two together like this...
<br/>
<br/>
[ A  B ]  [ x ] = Ax+By
<br/>
[ C  D ]  [ y ] = Cx+Dy
<br/>
<br/>
so the code for that will look something like this...
<br/>
<br/>
rotx = OAMRotData[i].pa * x + OAMRotData[i].pb * y;
<br/>
roty = OAMRotData[i].pc * x + OAMRotData[i].pd * y;
<br/>
<br/>
x and y are the position of your object relative to the the center you want to rotate around. You get this by subtracting the center point from the object's position.
<br/>
<br/>
x = ObjectX - CenterX;
<br/>
y = ObjectY - CenterY;
<br/>
<br/>
rotx and roty are that relative position rotated by the matrix around center. To get the final screen position  you add them back to the center
<br/>
<br/>
finalx =rotx + centerx;
<br/>
finaly = roty + centery;
<br/>
<br/>
Hope that helps.<br/>_________________<br/>"Only two things are infinite: the universe, and human stupidity. The first is debatable." -Albert Einstein</span><span class="gensmall"><br/><br/>Last edited by Gopher on Wed Mar 17, 2004 6:44 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#17932 - RaBBi - Wed Mar 17, 2004 6:28 pm</h4>
    <div class="postbody"><span class="postbody">Shouldn't be :
<br/>
<br/>
finalx =rotx + centerx; 
<br/>
finaly = roty + centery; 
<br/>
<br/>
instead of :
<br/>
<br/>
finalx =x + centerx; 
<br/>
finaly = y + centery; 
<br/>
<br/>
?<br/>_________________<br/>Sorry for my poor english, but it would be worst for you to understand me if I speak in my native language, French ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17933 - Gopher - Wed Mar 17, 2004 6:43 pm</h4>
    <div class="postbody"><span class="postbody">You're right, Rabbi, that was a mistake. I corrected the original post.<br/>_________________<br/>"Only two things are infinite: the universe, and human stupidity. The first is debatable." -Albert Einstein</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17946 - ProblemBaby - Wed Mar 17, 2004 9:58 pm</h4>
    <div class="postbody"><span class="postbody">I can't get it to work=(
<br/>
it just jumps around the screen!
<br/>
<br/>
here is my code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
RotData[0].pa = ((1 &lt;&lt; 8) * COS[a]) &gt;&gt; 8;
<br/>
RotData[0].pb = ((1 &lt;&lt; 8) * SIN[a]) &gt;&gt; 8;
<br/>
RotData[0].pc = ((1 &lt;&lt; 8) * -SIN[a]) &gt;&gt; 8;
<br/>
RotData[0].pd = ((1 &lt;&lt; 8) * COS[a]) &gt;&gt; 8;
<br/>
<br/>
xRel = -16;Â  // is it relative to the center of the sprite
<br/>
yRel = 0; // or x1, y1 of the sprite??
<br/>
xRot = ((RotData[0].pa * xRel) &gt;&gt; 8) + ((RotData[0].pb * yRel) &gt;&gt; 8);
<br/>
yRot = ((RotData[0].pc * xRel) &gt;&gt; 8) + ((RotData[0].pd * yRel) &gt;&gt; 8);
<br/>
<br/>
x = x + xRot; // x and y are fixed
<br/>
y = y + yRot;
<br/>
<br/>
// then i shift back x and y and copy it to my sprite attribute
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17950 - Gopher - Wed Mar 17, 2004 10:29 pm</h4>
    <div class="postbody"><span class="postbody">firstly, by using a constant (-16,0) for your relative position, you're saying that the rotation center moves with the sprite, which would cause very erratic behavior. You have to subtract the center position you want to rotate around from the sprite's current position to get the relative position.
<br/>
Second, you're adding the new position to the old position instead of just setting the actual position to the new one.  Finally, you don't re-add the center back into the sprite's position afterwords. You say you shift x and y back, so maybe that's what you meant.
<br/>
<br/>
[/url]<br/>_________________<br/>"Only two things are infinite: the universe, and human stupidity. The first is debatable." -Albert Einstein</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17952 - ProblemBaby - Wed Mar 17, 2004 10:38 pm</h4>
    <div class="postbody"><span class="postbody">i think it works!
<br/>
thank you very much!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
