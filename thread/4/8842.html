<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Which includes do you guys use? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Which includes do you guys use?</h2>
<div id="posts">
<div class="post">
    <h4>#74923 - xproductions - Wed Mar 08, 2006 10:07 pm</h4>
    <div class="postbody"><span class="postbody">I've noticed that there is no standard set of includes that people use for gbadev. Does this mean that each one of you just grab the header that was with the tutorial you learned gbadev and add stuff to it? Must be hard to use other peoples' code.
<br/>
<br/>
Me personally, I really like tepples pin8gba.h. I use a modified version of it that has the standard names: <a class="postlink" href="http://impeachgod.f2g.net/gba.h" target="_blank">http://impeachgod.f2g.net/gba.h</a>.<br/>_________________<br/>If you would not be forgotten
<br/>
as soon as you are dead and rotten,
<br/>
either write things worth reading
<br/>
or do things worth writing.
<br/>
<br/>
-- Benjamin Franklin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74925 - wintermute - Wed Mar 08, 2006 10:16 pm</h4>
    <div class="postbody"><span class="postbody">libgba provided with devkitARM is one of the most popular where people aren't using their own cobbled together headers. They're reasonably compatible with most sets of headers found in the various tutorials and devkitARM itself is provided as one of the toolchains distributed by the devkitPro project.
<br/>
<br/>
For windows users an all in one installer is provided for the major toolchains currently supported.
<br/>
<br/>
<a href="http://www.devkitpro.org" target="_blank">http://www.devkitpro.org</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74953 - gauauu - Thu Mar 09, 2006 2:07 am</h4>
    <div class="postbody"><span class="postbody">A lot of us do end up using cobbled-together headers though ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74955 - wintermute - Thu Mar 09, 2006 2:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gauauu wrote:</b></span></td> </tr> <tr> <td class="quote">A lot of us do end up using cobbled-together headers though ;-)</td> </tr></table><span class="postbody">
<br/>
<br/>
Sure but in a lot of cases the libgba headers are compatible with your cobbled together headers and where they aren't I'm more than happy to update with things that people find useful.
<br/>
<br/>
It would be fantastic if more people started using libgba as a base and sent me some example code that can be distributed with the rest of the examples. Unfortunately the GBA example code is currently quite paltry in comparison with the DS examples.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#74968 - tepples - Thu Mar 09, 2006 3:15 am</h4>
    <div class="postbody"><span class="postbody">While making the CF Speed Tester, I ended up making p8libgba.h, which contains functionality from pin8gba.h that wasn't kept in libgba headers.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
/* p8libgba.h
<br/>
   stuff that was in pin8gba.h that was left out of libgba
<br/>
<br/>
   Copyright 2005 Damian Yerrick
<br/>
<br/>
   #include &lt;zlib_license.h&gt;
<br/>
*/
<br/>
<br/>
/* Rationale
<br/>
<br/>
In October 2005, I decided to reorganize pin8gba.h around the libgba
<br/>
that everyone else seems to be developing against.  I was willing to
<br/>
give up my well-thought-out names of registers in exchange for the
<br/>
better-known names after it became clear that Nintendo wasn't
<br/>
planning to take legal action against use of the better-known names
<br/>
that some thought were swiped from the official devkit in violation
<br/>
of NDA.  But libgba still didn't use some of the more clever macros
<br/>
that I had developed for pin8gba.h.  This file is an attempt to fill
<br/>
the gaps in libgba's headers, with the macros from pin8gba.h renamed
<br/>
to fit into the libgba naming conventions.
<br/>
*/
<br/>
<br/>
#ifndef _p8libgba_h_
<br/>
#define _p8libgba_h_
<br/>
<br/>
<br/>
/* gba_video.h *****************************************************/
<br/>
#include &lt;gba_video.h&gt;  /* no, nothing to do with majesco */
<br/>
<br/>
/* CHAR_BASE_ADR() is the direct equivalent to old PATRAM(),
<br/>
   giving the base address of a chr bank.
<br/>
   But my macros pinpoint the base address of a single tile.
<br/>
*/
<br/>
#define PATRAM4(x, tn) ((u32 *)(VRAM | (((x) &lt;&lt; 14) + ((tn) &lt;&lt; 5)) ))
<br/>
#define PATRAM8(x, tn) ((u32 *)(VRAM | (((x) &lt;&lt; 14) + ((tn) &lt;&lt; 6)) ))
<br/>
#define SPR_VRAM(tn) ((u32 *)(VRAM | 0x10000 | ((tn) &lt;&lt; 5)))
<br/>
<br/>
<br/>
/* MAP_BASE_ADR() only gives the beginning of a map.
<br/>
   Some people would rawther access each cell of a text map
<br/>
   using 3D array notation:
<br/>
   MAP[page][y][x]
<br/>
*/
<br/>
typedef u16 NAMETABLE[32][32];
<br/>
#define MAP ((NAMETABLE *)0x06000000)
<br/>
<br/>
/* Someone forgot to recognize that width and height of a
<br/>
   GBA text map can (and probably should) be controlled separately.
<br/>
*/
<br/>
#define BG_WID_32 BG_SIZE_0
<br/>
#define BG_WID_64 BG_SIZE_1
<br/>
#define BG_HT_32  BG_SIZE_0
<br/>
#define BG_HT_64  BG_SIZE_2
<br/>
<br/>
/* Symbolic names for the rot/scale map sizes are appreciated as well. */
<br/>
#define ROTBG_SIZE_16  BG_SIZE_0
<br/>
#define ROTBG_SIZE_32  BG_SIZE_1
<br/>
#define ROTBG_SIZE_64  BG_SIZE_2
<br/>
#define ROTBG_SIZE_128 BG_SIZE_3
<br/>
<br/>
<br/>
/* gba_sprites.h ***************************************************/
<br/>
#include &lt;gba_sprites.h&gt;
<br/>
<br/>
#define OBJ_TRANSLUCENT OBJ_MODE(1)
<br/>
#define OBJ_OBJWINDOW   OBJ_MODE(2)
<br/>
#define OBJ_SQUARE      OBJ_SHAPE(0)
<br/>
#define OBJ_WIDE        OBJ_SHAPE(1)
<br/>
#define OBJ_TALL        OBJ_SHAPE(2)
<br/>
<br/>
<br/>
/* gba_sound.h *****************************************************/
<br/>
<br/>
/* Most of the well-known names for the sound registers make 0 sense.
<br/>
   I'll just use the pin8gba names wholesale in a separate header
<br/>
   file to be included instead of gba_sound.h.
<br/>
*/
<br/>
<br/>
<br/>
/* End *************************************************************/
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody">
<br/>
At the time, I was only looking for porting the minimum functionality to get AGBTTY to compile, as I found AGBTTY to be 20 kilobytes smaller than the libgba TTY.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75667 - Dilyias - Wed Mar 15, 2006 1:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gauauu wrote:</b></span></td> </tr> <tr> <td class="quote">A lot of us do end up using cobbled-together headers though ;-)</td> </tr></table><span class="postbody">
<br/>
<br/>
Sure but in a lot of cases the libgba headers are compatible with your cobbled together headers and where they aren't I'm more than happy to update with things that people find useful.
<br/>
<br/>
It would be fantastic if more people started using libgba as a base and sent me some example code that can be distributed with the rest of the examples. Unfortunately the GBA example code is currently quite paltry in comparison with the DS examples.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Well, about a week ago I decided to check into GBA programming and downloaded and installed devkitpro on my winxp box and am using the libgba headers. :-)  
<br/>
<br/>
I downloaded BoyScout too, but couldn't get it to sound right so I wrote my own player (which I found out last night runs on the real GBA hardware perfectly). I wrote a .Net app that converts the big .BSF files to a small header file that my player uses.. Spent a lot of time in the hex editor figuring out the internal BSF format. I'm going to eventually make it output a compressed bin file so I don't have to compile the the header..
<br/>
<br/>
Anyways, I'm using the libgba headers as a base.  They made it real easy to make bios calls for stuff like battery friendly vwaiting.
<br/>
<br/>
When following the tuts, I just looked for the 0xaddresses in the libgba files to figure out which to use. 
<br/>
<br/>
I also really appreciated the VC6 example projects, they helped get me started.
<br/>
<br/>
Eric</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78813 - wintermute - Sun Apr 09, 2006 11:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">While making the CF Speed Tester, I ended up making p8libgba.h, which contains functionality from pin8gba.h that wasn't kept in libgba headers.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've just committed these updates to libgba as well as adding the sound defines from pn8.h to gba_sound.h. There will be a new stable release shortly, I'm just finishing up testing on the latest toolchain so devkitARM release 18 is now imminent. I'll release new stables of the libraries at the same time.
<br/>
<br/>
Thanks for those, all suggestions and especially updated code is greatly appreciated.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
At the time, I was only looking for porting the minimum functionality to get AGBTTY to compile, as I found AGBTTY to be 20 kilobytes smaller than the libgba TTY.</td> </tr></table><span class="postbody">
<br/>
<br/>
The libgba TTY implements hooks into newlibs stdio functions which allow printf and friends to work directly. Unfortunately some parts of newlib are quite heavy so you will see some marked increase in binary size when using these functions. I plan to do some further work in the newlib patches and reduce some of the overhead but it might take a while. Others on the newlib mailing list are also addressing this issue for various embedded systems so hopefully further updates will reduce the newlib overhead.
<br/>
<br/>
Writing your own implementations is a good way to reduce the dependency of newlib and nothing requires you to use the libgba/libnds hooks into newlib.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
