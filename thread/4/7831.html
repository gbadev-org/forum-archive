<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Two Functions at Once? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Two Functions at Once?</h2>
<div id="posts">
<div class="post">
    <h4>#64205 - dexter0 - Tue Dec 20, 2005 6:08 am</h4>
    <div class="postbody"><span class="postbody">Is there anyway to have my code call a function and while that function is running, call another function and have them both run at the same time?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64207 - tepples - Tue Dec 20, 2005 6:16 am</h4>
    <div class="postbody"><span class="postbody">What, specifically, do the two functions do?
<br/>
<br/>
Do you mean <a class="postlink" href="http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html" target="_blank">coroutines</a>, where two functions run, passing data back and forth?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64208 - dexter0 - Tue Dec 20, 2005 6:22 am</h4>
    <div class="postbody"><span class="postbody">The two functions are controlling two different sprites on the screen.  Each function controls one of the two sprites.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64211 - poslundc - Tue Dec 20, 2005 6:47 am</h4>
    <div class="postbody"><span class="postbody">Why would they have to run at the same time?
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64229 - Fatnickc - Tue Dec 20, 2005 12:43 pm</h4>
    <div class="postbody"><span class="postbody">You can have the effect that they are running at the same time quite easily.
<br/>
Simply replace all whiles with ifs and the like, then use this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
while(a&lt;b)
<br/>
{
<br/>
    function1();
<br/>
    function2();
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64264 - sajiimori - Tue Dec 20, 2005 7:19 pm</h4>
    <div class="postbody"><span class="postbody">I use coroutines extensively, allocating a stack for each of them.  That's a pretty high price to pay in terms of memory, but I can always "bake" them into finite state machines if it's getting too expensive.
<br/>
<br/>
Edit: Then again, it was probably more of a beginner question, which would make coroutines a little out of the ballpark...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64307 - tepples - Wed Dec 21, 2005 5:14 am</h4>
    <div class="postbody"><span class="postbody">In that case, Fatnickc's answer is the right one.
<br/>
<br/>
Imagine each game object taking a turn. Each turn it stays still or moves a pixel or two. Then imagine the turns going so fast that each sprite gets a turn 60 times a second. All objects move a bit, and then the program draws them in their new positions, rinse and repeat until Game Over. This is what a typical game loop looks like.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while(game_state != STATE_GAMEOVER)
<br/>
{
<br/>
  move_player();
<br/>
  move_player_out_of_walls();
<br/>
  move_enemies();
<br/>
  move_enemies_out_of_walls();
<br/>
  move_projectiles();
<br/>
  game_state = handle_object_collisions();
<br/>
  draw_all_objects();
<br/>
  VBlankIntrWait();
<br/>
}</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68488 - dusda - Wed Jan 25, 2006 12:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">In that case, Fatnickc's answer is the right one.
<br/>
<br/>
Imagine each game object taking a turn. Each turn it stays still or moves a pixel or two. Then imagine the turns going so fast that each sprite gets a turn 60 times a second. All objects move a bit, and then the program draws them in their new positions, rinse and repeat until Game Over. This is what a typical game loop looks like.
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while(game_state != STATE_GAMEOVER)
<br/>
{
<br/>
  move_player();
<br/>
  move_player_out_of_walls();
<br/>
  move_enemies();
<br/>
  move_enemies_out_of_walls();
<br/>
  move_projectiles();
<br/>
  game_state = handle_object_collisions();
<br/>
  draw_all_objects();
<br/>
  VBlankIntrWait();
<br/>
}</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
That is a very good explanation of how games work :D.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
