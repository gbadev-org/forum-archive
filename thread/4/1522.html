<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Interrupt on KeyUp ? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Interrupt on KeyUp ?</h2>
<div id="posts">
<div class="post">
    <h4>#7674 - Pokemonster - Sun Jun 22, 2003 9:18 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
I'm currently trying out different types of getting keypad input. I'm using interrupts at the moment. The problem is, an interrupt is fired only once when a key is pressed. For continued key pressing, I need a way to figure out if the key has been released. Is there a way to do this ?
<br/>
<br/>
ALex</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7687 - Sweex - Sun Jun 22, 2003 11:57 pm</h4>
    <div class="postbody"><span class="postbody">The button register is inverted... So if a certain bit indicates 1, it means that it is NOT pressed.
<br/>
<br/>
Dunno how this works with interrupts, but what I'd do is copy the button register into a variable each frame and use the variable. As a bonus, you will not have issues when a button is released during a frame. (Imagine checking the register itself and in on part of your code a button is pressed, but in another it isn't anymore...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7690 - tepples - Mon Jun 23, 2003 12:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Pokemonster wrote:</b></span></td> </tr> <tr> <td class="quote">I'm currently trying out different types of getting keypad input. I'm using interrupts at the moment. The problem is, an interrupt is fired only once when a key is pressed.</td> </tr></table><span class="postbody">
<br/>
That's strange; I get somewhere around three to ten rapid-fire interrupts on each keypress because the switches are quite bouncy.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">For continued key pressing, I need a way to figure out if the key has been released. Is there a way to do this ?</td> </tr></table><span class="postbody">
<br/>
Most games seem to get their input by polling. In your main game loop, poll the joypad register until it shows that the button has been released.
<br/>
<br/>
I find the joypad interrupts useful for two things: 1. in joyirqmode=ANY, receiving key-down events at more than 1/60 second precision (useful in <span style="font-style: italic">Street Fighter</span> style fighting games, but polling at y=0, 80, 160 produces nearly the same effect) and 2. in joyirqmode=ALL, waking from sleep mode.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
