<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Emulator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Emulator</h2>
<div id="posts">
<div class="post">
    <h4>#21161 - Mephisto - Tue May 25, 2004 4:41 am</h4>
    <div class="postbody"><span class="postbody">the Program i compiled is 3x slower on a real gba than on Virtualboyadvance ...
<br/>
Some advice ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21164 - tepples - Tue May 25, 2004 5:30 am</h4>
    <div class="postbody"><span class="postbody">VisualBoyAdvance doesn't emulate wait-states. Here are things to do: <ul><li>If you're running code off a flash cart (i.e. not __gba_multiboot or gba_mb.specs), use <a class="postlink" href="http://pinocchio.jk0.org/gbatek/#systemcontrol" target="_blank">the WAITCNT register</a> to set the wait-state to 3n 1s rather than the default 4n 2s. This will give you a bit of a speed boost. </li><li>Put speed-sensitive code in IWRAM. This will give you a bigger boost. Code in IWRAM runs just as fast on hardware as on a GBA. </li><li>Compile speed-sensitive code as ARM instead of Thumb. ARM code is bigger and thus runs slower from 16-bit memory such as ROM or EWRAM. However, from 32-bit memory such as IWRAM, ARM instructions run faster than the equivalent Thumb instructions. </li></ul><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21181 - Mephisto - Tue May 25, 2004 1:53 pm</h4>
    <div class="postbody"><span class="postbody">Can i have som simple code please ? (for the 3N 1S thing)
<br/>
If not i will search for weeks in vain ^^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21194 - tepples - Tue May 25, 2004 5:52 pm</h4>
    <div class="postbody"><span class="postbody">Provided that your flash cart is fast enough (anything but early Visoly carts), you can safely overclock ROM access thus:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define WAITCNT           *(volatile unsigned short *)0x04000204
<br/>
#define WAITCNT_ROM31     0x0014
<br/>
<br/>
int main(void)
<br/>
{
<br/>
  WAITCNT = WAITCNT_ROM31;  /* set ROM wait state to 3n 1s */
<br/>
<br/>
  /* rest of code */
<br/>
}</td> </tr></table><span class="postbody">
<br/>
It's also possible to overclock EWRAM access to 1n 1s (from the default 2n 2s) using an undocumented register, but I wouldn't recommend it because it might fail after the GBA heats up a bit or in hot weather.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21195 - Mephisto - Tue May 25, 2004 6:03 pm</h4>
    <div class="postbody"><span class="postbody">thx a lot i try it now !
<br/>
<br/>
EDIT : Cool it works !! ^^</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
