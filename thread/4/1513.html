<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Linking object files - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Linking object files</h2>
<div id="posts">
<div class="post">
    <h4>#7632 - regularkid - Sat Jun 21, 2003 8:22 pm</h4>
    <div class="postbody"><span class="postbody">Is is possible to compile a bunch of object files (the result of compiling c files) into one single object file? This way I can compile all my engine code into a single object file separately and then link it with the game code object files. This will give me a way to keep engine code and game code separate and be able to use the engine in multiple game projects. 
<br/>
I'm basically looking for something like this to put into my <b style="color:#FFA34F">makefile</b> (I can't seem to get it working):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Engine.o : Code1.o Code2.o Code3.o
<br/>
    gcc Engine.o -o Code1.o Code2.o Code3.o
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks.<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7633 - bomberman - Sat Jun 21, 2003 11:14 pm</h4>
    <div class="postbody"><span class="postbody">Basically, you want to do a <b style="color:#FFA34F">library</b>...
<br/>
I just did that for my recent released Tetris and hopefully numerous future projects :O)
<br/>
<br/>
My <b style="color:#FFA34F">makefile</b> is something like that to create the <b style="color:#FFA34F">library</b>
<br/>
<span style="font-weight: bold">PROGNAME=MyLib
<br/>
LIB_OFILES += Code1.o Code2.o Code3.o
<br/>
<br/>
all : $(PROGNAME).a
<br/>
<br/>
$(PROGNAME).a: $(LIB_OFILES)
<br/>
	$(GCCARM)/arm-thumb-elf/bin/ar.exe rcs lib/$@ $(LIB_OFILES)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7636 - regularkid - Sun Jun 22, 2003 2:28 am</h4>
    <div class="postbody"><span class="postbody">Hmm. I have the <b style="color:#FFA34F">library</b> compiling fine, but now how do I go about linking it with my game code object files into a single elf? Thanks.<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7639 - tepples - Sun Jun 22, 2003 4:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>regularkid wrote:</b></span></td> </tr> <tr> <td class="quote">Hmm. I have the <b style="color:#FFA34F">library</b> compiling fine, but now how do I go about linking it with my game code object files into a single elf? Thanks.</td> </tr></table><span class="postbody">
<br/>
Link it like any object file:
<br/>
gcc -mthumb -mthumb-interwork foo.o bar.o baz.o libengine.a -o game.elf<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7641 - regularkid - Sun Jun 22, 2003 4:53 am</h4>
    <div class="postbody"><span class="postbody">I finally got it working. Thanks for the help, guys!<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
