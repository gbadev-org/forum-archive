<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Debugging with DevKitARM, Insight and VBA... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Debugging with DevKitARM, Insight and VBA...</h2>
<div id="posts">
<div class="post">
    <h4>#65280 - lorbar - Sun Jan 01, 2006 9:31 pm</h4>
    <div class="postbody"><span class="postbody">hi all!
<br/>
<br/>
<br/>
i'v tried the search function and read the instructions on debugging on both, the vba-site and the dka-site. unfortunately it doesn't work yet. :( i'm using gnu/linux. maybe it doesn't work on linux at all? 
<br/>
<br/>
i don't know what version of dka i'm using, but it was the most recent one when i installed it (november, 15.)
<br/>
<br/>
i've tried vba 1.7 and vba 1.7.2 with no luck.
<br/>
<br/>
in the faq on the dka-site it says i should be using the arm-elf-insight binary. but since the insight-win32-version available through the dka-site is useless to me, i installed the regular insight version 6.1.
<br/>
<br/>
<br/>
insight displays my code, connects to the vba with no problem and downloads the elf file to it. but then everything just kinda hangs. the vba-screen remains black and insight remains completely disabled. here's what vba outputs to the console:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">VisualBoyAdvance-SDL version 1.7
<br/>
Linux version
<br/>
Seaching for file VisualBoyAdvance.cfg
<br/>
Searching current dir: /home/lorenz/visboyadv
<br/>
Reading configuration file.
<br/>
Listening for a connection at port 5555
<br/>
Got a connection from 127.0.0.1 58199
<br/>
Color depth: 32
<br/>
Unknown packet vCont?#49
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
any help appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65293 - wintermute - Sun Jan 01, 2006 10:41 pm</h4>
    <div class="postbody"><span class="postbody">You'll need to build Insight from CVS HEAD, I haven't checked the most recent release of gdb ( 6.4) which may work but certainly anything up to and including 6.3 won't work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65305 - lorbar - Sun Jan 01, 2006 11:37 pm</h4>
    <div class="postbody"><span class="postbody">this may sound stupid, but i have no previous experience with gdb/insight + vba at all... do i have to pass a special architecture to the configure script in order to make insight work with vba? what would it be?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65306 - wintermute - Sun Jan 01, 2006 11:46 pm</h4>
    <div class="postbody"><span class="postbody">I usually build in a folder separate to the source, this is recommended for GCC and something I do whenever possible.
<br/>
<br/>
&lt;path/to/insight/source/configure --prefix=/usr/local/devkitPro/insight --target=arm-elf --disable-nls --enable-gdbtk
<br/>
<br/>
I'm not actually sure if the last option is still required
<br/>
<br/>
make &amp;&amp; make install</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65354 - lorbar - Mon Jan 02, 2006 11:07 am</h4>
    <div class="postbody"><span class="postbody">&lt;ignore&gt;
<br/>
thanks for the advice! one last question before i try this: do i have to use "make install"? can't i just run the binaries after "make"  and see if it works?
<br/>
&lt;/ignore&gt;
<br/>
<br/>
<br/>
EDIT: ok, i tried it w/o "make install" and now i can step through my programs. however using STEP (s) gives some funny results. the highlighting for the current code-line jumps back and forth, instead of just walking through my code in a linear fashion. maybe this is due to compiler optimiziations? what would be the easiest way to disable optimizations in DKA? can i do it by editing my makefile or maybe changing the _rules files?
<br/>
<br/>
thanks again for your time and help! using the most recent version of insight and your help on the configure script made it work (allmost there). :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65525 - lorbar - Tue Jan 03, 2006 8:34 pm</h4>
    <div class="postbody"><span class="postbody">now i feel really stupid. :( i used one of the examples Makefile as a template for my own program, but i was to dumb to see the CFLAGS line in it. (however grep was able to find it very quick...)
<br/>
<br/>
ok, turning off O3 makes debugging a very nice and linear thing to do! finally it works as expected.
<br/>
<br/>
so what finally worked for me was:
<br/>
<br/>
- a pretty recent DevkitARM
<br/>
- the latest version of insight (configured like posted above by wintermute)
<br/>
- VisualBoyAdvance 1.7.0
<br/>
<br/>
<br/>
thanks.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
