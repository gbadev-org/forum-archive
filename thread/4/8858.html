<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>VISUAL HAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > VISUAL HAM</h2>
<div id="posts">
<div class="post">
    <h4>#75062 - Lightning-Adnan - Thu Mar 09, 2006 10:01 pm</h4>
    <div class="postbody"><span class="postbody">I have a problem ??
<br/>
I am from Germany  and i dont can speak ( good ) the English language , but my really problem is that  -
<br/>
When i start VISUAL HAM i go to make new file and than i choose [C++] empty ,  and than i delete the main.cpp and copy my source code to this .cpp than i click F7 , but he ( the compiler ) dont want compile .
<br/>
Where is my problem ??
<br/>
<br/>
My code ( i am a n00b )
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include &lt;mygba.h&gt;
<br/>
<br/>
// Startfunktion. Wie in C++
<br/>
int main()
<br/>
{
<br/>
    // Initialisieren von HAM. Wird gebraucht und muss immer die erste       
<br/>
    // Funktion in einem HAM-Programm sein.
<br/>
    ham_Init();
<br/>
<br/>
    // Initialisieren der Textfunktionen. Die 0 gibt die Hintergrund-
<br/>
    // ebene an. Diese Funktion funktioniert nur in den Grafikmodi 0-2!
<br/>
    // Moduswahl je nach Hintergrundebenennummer; m?gliche angaben: 0-3.
<br/>
    ham_InitText(0);
<br/>
<br/>
    // Hier malen wir letzendlich unseren Text auf den Gameboy-Screen.
<br/>
    // Der erste Parameter gibt den x-; der zweite den y-Wert des ersten
<br/>
    // Buchstaben an. M?glich sind horizontal 0-29 und vertikal 0-19
<br/>
    // Am besten etwas mit rumprobieren, dann sieht mans selbst.
<br/>
    ham_DrawText(9,9,"Hallo, Welt!");
<br/>
<br/>
    // Diese Schleife sorgt daf?r, dass das Programm nicht immer Endet
<br/>
    // und dann neustartet. Man „f?ngt“ den GBA quasi in dieser Endlos-
<br/>
    // schleife, damit er sch?n immer unseren Text anzeigt. 
<br/>
    // Interaktivit?t? Kommt alles in diese Hauptschleife. Haben wir nur 
<br/>
    // noch nicht.
<br/>
    while(1) {}
<br/>
<br/>
   // Na, was wohl ? :-)
<br/>
   return 0; 
<br/>
} 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It is a german language from the german tutorial !!  :)
<br/>
<br/>
I go to many german pages , and they say it is a compiler error , but i dont think that. 
<br/>
This forum is a professional forum and i think you can help me .
<br/>
Thanks
<br/>
<br/>
Lightning-Adnan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75069 - sumiguchi - Thu Mar 09, 2006 11:15 pm</h4>
    <div class="postbody"><span class="postbody">I followed your instructions:
<br/>
&gt; created a new C++ project empty
<br/>
&gt; deleted everything and copied your code 
<br/>
&gt; hit F7
<br/>
<br/>
No problem - compiled and VBA started up with your text message.  So, I think you have an environment problem. 
<br/>
<br/>
Take a look in Visual Ham &gt; Advanced &gt; Options &gt; Environment
<br/>
Do you have a setting for HAMDIR and for PATH?
<br/>
Mine are set as follows:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">HAMDIR c:\ham
<br/>
PATH %HAMDIR%\gcc-arm\bin;%HAMDIR%\tools\win32;%VHAM_BIN%;%PATH%
<br/>
</td> </tr></table><span class="postbody">
<br/>
if this looks ok, then maybe you can provide the output of the compiler when you try to compile.
<br/>
<br/>
Hope it helps/sumiguchi</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75121 - Lightning-Adnan - Fri Mar 10, 2006 8:05 am</h4>
    <div class="postbody"><span class="postbody">Yes i have all this exceptions 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
HAMDIR c:\ham 
<br/>
PATH %HAMDIR%\gcc-arm\bin;%HAMDIR%\tools\win32;%VHAM_BIN%;%PATH%
<br/>
</td> </tr></table><span class="postbody">
<br/>
but I have and a thirt ( 3 ) :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
HAMDIR c:\ham 
<br/>
PATH %HAMDIR%\gcc-arm\bin;%HAMDIR%\tools\win32;%VHAM_BIN%;%PATH%
<br/>
MAKE_MODE unix</td> </tr></table><span class="postbody">
<br/>
<br/>
Where is my problem ?
<br/>
Must I delete the third or what ?
<br/>
<br/>
PLEASE HELP ME</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75155 - sumiguchi - Fri Mar 10, 2006 3:51 pm</h4>
    <div class="postbody"><span class="postbody">MAKE_MOD unix should be ok (i have that too.)
<br/>
<br/>
What is the output of the compiler?  
<br/>
<br/>
BTW: there is a forum specifically for HAM here: <a class="postlink" href="http://forums.ngine.de/index.php" target="_blank">http://forums.ngine.de/index.php</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75161 - Lightning-Adnan - Fri Mar 10, 2006 5:15 pm</h4>
    <div class="postbody"><span class="postbody">What is a output file of  a compiler ?
<br/>
<br/>
And ever when i pressed F7 , than comes this :
<br/>
error    make.exe  
<br/>
<br/>
What is that ?
<br/>
PLEASE HELP</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75162 - sumiguchi - Fri Mar 10, 2006 5:41 pm</h4>
    <div class="postbody"><span class="postbody">In Visual HAM, there is a window along the bottom  - which is likely where you see "Error make" - this is the compiler output.
<br/>
<br/>
Since you get Error make -  I still think you have a configuration issue.  The environment you checked - needs to match the paths you have on your system.
<br/>
<br/>
Is there a file called make.exe in c:\ham\tools\win32 on your machine? 
<br/>
<br/>
If not - where is make.exe?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75225 - gmiller - Sat Mar 11, 2006 3:16 am</h4>
    <div class="postbody"><span class="postbody">The visual ham development system ASSUMES that the make.exe is located in the %HAMDIR%/tools/win32 folder.  If this is not the case then the F5 key will not be able to find the make utility to compile the program.  Now I am assuming that you make sure your project has the files in it makes as files to compile or nothing will be compiles by the makefile in the project.  You can check your path variable by trying the command prompt selectin from the external tools area of the IDE.
<br/>
<br/>
I have just converted over to using the devkitPro/DevkitARM tool kit with Visual HAM because I could not get consistant results debugging with the VHAM tool set.  I took the template make file from the devkitPro/exmaples/gba/template folder and modified it to work with VHAM.  I also created a customized msys.bat startup batch stream to allow me to get to the %HAM_CURPROJECT% directory as an external tool.  I found some problems using the insight debugger with VHAM that I could not discover.  But I did find that running from the msys prompt that I could get fairly consistant results.  Should anyone want to see what I did I will post changes I made.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76281 - gmiller - Mon Mar 20, 2006 3:31 am</h4>
    <div class="postbody"><span class="postbody">Here is my current makefile for using the devkitPro stuff for GBA development.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
# Clear the implicit built in rules
<br/>
#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM)
<br/>
endif
<br/>
<br/>
-include $(DEVKITARM)/gba_rules
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output, if this ends with _mb a multiboot image is generated
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# DATA is a list of directories containing data files
<br/>
# INCLUDES is a list of directories containing header files
<br/>
#---------------------------------------------------------------------------------
<br/>
# HAM Stuff no longer used ....
<br/>
#
<br/>
#PROGNAME =unused
<br/>
#OFILES+= unused
<br/>
#ADD_LIBS+= unused   
<br/>
<br/>
# .................
<br/>
#
<br/>
<br/>
TARGET      :=   $(shell basename $(CURDIR))
<br/>
BUILD      :=   build
<br/>
SOURCES      :=   source
<br/>
DATA      :=   
<br/>
INCLUDES   :=   $(DEVKITARM)
<br/>
GDB_DIRS   =    $cdir:$cwd:$(ADD_GDB_SOURCE_DIRS)
<br/>
<br/>
ifeq ($(MAKECMDGOALS),gdb)
<br/>
DEBUG_SET   :=   gdb
<br/>
endif
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# options for code generation
<br/>
#---------------------------------------------------------------------------------
<br/>
#ARCH   :=   -mthumb -mthumb-interwork
<br/>
ARCH   :=   -marm -mthumb-interwork
<br/>
<br/>
ifneq ($(DEBUG_SET),gdb)
<br/>
THIS_BUILD   :=   "Release Build"
<br/>
CFLAGS   :=   -Wall -O3\
<br/>
         -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
          -fomit-frame-pointer\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
else
<br/>
THIS_BUILD   :=   "Debug Build"
<br/>
CFLAGS   :=   -g -Wall -O0\
<br/>
         -mcpu=arm7tdmi -mtune=arm7tdmi\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
endif
<br/>
CFLAGS   +=   $(INCLUDE)
<br/>
<br/>
ASFLAGS   :=   $(ARCH)
<br/>
<br/>
ifneq ($(DEBUG_SET),gdb)
<br/>
LDFLAGS   =   $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
else
<br/>
LDFLAGS   =   -g $(ARCH) -Wl,-Map,$(notdir $@).map
<br/>
endif
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# path to tools - this can be deleted if you set the path to the toolchain in windows
<br/>
#---------------------------------------------------------------------------------
<br/>
export PATH      :=   $(DEVKITARM)/bin:$(DEVKITPRO)/msys/bin:$(PATH)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBS   :=   -lgba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBGBA)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# no real need to edit anything past this point unless you need to add additional
<br/>
# rules for different file extensions
<br/>
#---------------------------------------------------------------------------------
<br/>
ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OUTPUT   :=   $(CURDIR)/$(TARGET)
<br/>
export VPATH   :=   $(foreach dir,$(SOURCES),$(CURDIR)/$(dir)) \
<br/>
               $(foreach dir,$(DATA),$(CURDIR)/$(dir))
<br/>
<br/>
export DEPSDIR   :=   $(CURDIR)/$(BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# automatically build a list of object files for our project
<br/>
#---------------------------------------------------------------------------------
<br/>
CFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.c)))
<br/>
CPPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
SFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.s)))
<br/>
BINFILES   :=   $(foreach dir,$(DATA),$(notdir $(wildcard $(dir)/*.*)))
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# use CXX for linking C++ projects, CC for standard C
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(CPPFILES)),)
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CC)
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CXX)
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OFILES   := $(addsuffix .o,$(BINFILES)) $(CPPFILES:.cpp=.o) $(CFILES:.c=.o) $(SFILES:.s=.o)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of include paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export INCLUDE   :=   $(foreach dir,$(INCLUDES),-I$(dir)/include) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
               $(foreach dir,$(CURDIR), -I$(dir)/include) \
<br/>
               -I$(CURDIR)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# build a list of library paths
<br/>
#---------------------------------------------------------------------------------
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
<br/>
.PHONY: $(BUILD) clean
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
   @[ -d $@ ] || mkdir -p $@
<br/>
   make "DEBUG_SET=$(DEBUG_SET)" --no-print-directory -C $(BUILD) -f $(CURDIR)/Makefile
<br/>
<br/>
all   : buildtype $(BUILD)
<br/>
<br/>
buildtype:
<br/>
   @echo "Build type: " $(THIS_BUILD)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...
<br/>
   rm -fr $(BUILD) $(TARGET).elf $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
vbawin:   clean all
<br/>
   $(DEVKITPRO)/tools/win32/vbawin.exe $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
runvbawin:
<br/>
   $(DEVKITPRO)/tools/win32/vbawin.exe $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
vba:   clean all
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
runvba:
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 $(TARGET).gba
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
startsdl:
<br/>
   $(DEVKITPRO)/tools/win32/vbaSDL/vba.exe -3 -Gtcp:44444 &amp;
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
makeini:
<br/>
   echo "File $(TARGET).elf" &gt; insight.ini
<br/>
   echo "target remote 127.0.0.1:44444" &gt;&gt;insight.ini
<br/>
   echo "load $(TARGET).elf" &gt;&gt;insight.ini
<br/>
   echo "b main" &gt;&gt;insight.ini
<br/>
   echo "directory $(GDB_DIRS)"&gt;&gt;insight.ini
<br/>
   echo "c" &gt;&gt;insight.ini
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
startinsight:
<br/>
   $(DEVKITPRO)/insight/insight-6.4.50/bin/arm-elf-insight.exe --command=insight.ini $(TARGET).elf
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
gdb:   clean
<br/>
   @make "DEBUG_SET=$(DEBUG_SET)" all 
<br/>
   make startsdl makeini startinsight
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
rungdb: startsdl makeini startinsight
<br/>
<br/>
testinsight: makeini startinsight
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
<br/>
DEPENDS   :=   $(OFILES:.o=.d)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# main targets
<br/>
#---------------------------------------------------------------------------------
<br/>
$(OUTPUT).gba   :   $(OUTPUT).elf
<br/>
<br/>
$(OUTPUT).elf   :   $(OFILES)
<br/>
<br/>
%.o   :   %.pcx
<br/>
   echo $(notdir $&lt;)
<br/>
   $(bin2o)
<br/>
<br/>
-include $(DEPENDS)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#--------------------------------------------------------------------------------
<br/>
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
