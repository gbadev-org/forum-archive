<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Updating VRAM on VBLANK INTERRUPT - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Updating VRAM on VBLANK INTERRUPT</h2>
<div id="posts">
<div class="post">
    <h4>#2170 - D3z - Thu Jan 30, 2003 1:11 pm</h4>
    <div class="postbody"><span class="postbody">I've coded a routine that copies tiles from ROM to VRAM using DMA3, 
<br/>
and updates the temp_OAM.
<br/>
After updating VRAM, i can see for a little bit the copied tiles on the previous OAM.
<br/>
After OAM is updated everithing is fine!
<br/>
<br/>
What's wrong ?
<br/>
How can i avoid this little flicker caused by DMA3 copy ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2174 - imikeyi - Thu Jan 30, 2003 1:25 pm</h4>
    <div class="postbody"><span class="postbody">Not quite sure I understand your question, but..
<br/>
If you want a sprite from ROM to come up on screen, all you do is:
<br/>
- set up oam
<br/>
- use dma to copy from rom to address specified by the oam char number
<br/>
<br/>
You don't need to do anything else really.. this also applies to animation.<br/>_________________<br/>microkernel advance</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2175 - D3z - Thu Jan 30, 2003 1:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>imikeyi wrote:</b></span></td> </tr> <tr> <td class="quote">Not quite sure I understand your question, but..
<br/>
If you want a sprite from ROM to come up on screen, all you do is:
<br/>
- set up oam
<br/>
- use dma to copy from rom to address specified by the oam char number
<br/>
<br/>
You don't need to do anything else really.. this also applies to animation.</td> </tr></table><span class="postbody">
<br/>
<br/>
I generate a big sprite composed by smaller ones.
<br/>
<br/>
- I get a spritemap (ex 12*10 blocks 8*8) and set up temp OAM.
<br/>
- I copy blocks 8*8 to VRAM
<br/>
- I update the OAM with the new one.
<br/>
<br/>
when sprites are so big, i see for a really little bit (a flash) the new blocks copied in VRAM using old OAM.
<br/>
I think that the problem appens on the second point.
<br/>
<br/>
There's a way to block the display until updating is done ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2176 - gb_feedback - Thu Jan 30, 2003 2:31 pm</h4>
    <div class="postbody"><span class="postbody">just a guess... are you telling the dma to go during vblank?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2177 - D3z - Thu Jan 30, 2003 2:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gb_feedback wrote:</b></span></td> </tr> <tr> <td class="quote">just a guess... are you telling the dma to go during vblank?</td> </tr></table><span class="postbody">
<br/>
No, dma3 is started immediately.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2178 - gb_feedback - Thu Jan 30, 2003 3:09 pm</h4>
    <div class="postbody"><span class="postbody">that's what I mean - I seem to remember doing it during vblank myself - got to be worth a try</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
