<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Multiboot code help - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Multiboot code help</h2>
<div id="posts">
<div class="post">
    <h4>#9656 - Vortex - Tue Aug 12, 2003 4:20 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I am testing some communication/multiboot routines between two GBA units with no success so far. The first example I am trying to run is Jeff Frohwein's multiboot client demo:
<br/>
<br/>
<a class="postlink" href="http://www.devrs.com/gba/files/mbclient.txt" target="_blank">http://www.devrs.com/gba/files/mbclient.txt</a>
<br/>
<br/>
The example uses BIOS SWI 37 (25h) - MultiBoot to accomplish its goal.
<br/>
<br/>
I don't have a flash card, so using a MBV2 cable I upload the demo to GBA unit 1, disconnect the MBV2 cable, link the GBAs with a standard link cable and try to boot the second GBA unit. I tried many different setting, but it doesn't work.
<br/>
<br/>
I was able to localize the problem in the following portion of code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
   // Wait until slave boy is awake
<br/>
   // and ready to be activated. =P
<br/>
   do
<br/>
      {
<br/>
      DelayCycles(921000); //delay ~18ms
<br/>
<br/>
      i = xfer (0x6202);
<br/>
      }
<br/>
   while (i != 0x7202);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The slave GBA never returns 0x7202. I also tried (0x7204 and 0x7208 with no success). 
<br/>
<br/>
My questions are:
<br/>
<br/>
1. What exactly is wrong with the example
<br/>
2. Is it supposed to be ran only from a flash-card
<br/>
3. Is there any way to execute it with a MBV2
<br/>
4. Are you aware of any relatively easy way to debug multiboot/comm programs
<br/>
<br/>
Any help will be appreciated.
<br/>
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9657 - tepples - Tue Aug 12, 2003 5:36 pm</h4>
    <div class="postbody"><span class="postbody">I have gone MBV2 to GBA to GBA to GBA to GBA with no problems.  If you want the source code I used, PM me.
<br/>
<br/>
Possible things you should do:
<br/>
1. Try turning off and on the slave GBA while it's plugged in.  Sometimes the serial port needs a reset.
<br/>
2. Make sure the GBA link cable is connected tightly at both ends.
<br/>
3. Try writing some simple text code so that you can display connection status info on the master GBA's screen.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
