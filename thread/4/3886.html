<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Tip: Compressing Code - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Tip: Compressing Code</h2>
<div id="posts">
<div class="post">
    <h4>#25005 - Lord Graga - Sun Aug 15, 2004 12:10 am</h4>
    <div class="postbody"><span class="postbody">I decided to post this tip due to the size limits of the current compo. It might be wellknown to everybody, but I really don't see why I should give people a bit of insight in how it's done if they don't know. This will be purely theoretical.
<br/>
<br/>
Okay, imagine that you have compiled a final ROM of your game at around ~300 kbyte. Now you want it all to be compressed, but it needs to be 256 kbyte (at max) to run in EWRAM. So you start crunching a few images, and it's down on 256 kbyte or less in the end. This is something everybody should do to every data in their program.
<br/>
<br/>
Anyway, crush the whole program up, and write a small assembler program. All it shall do is point the decompresion source pointer at the end of the binary (usually 0x8000100 if you pad the program), the decompression pointer at 0x200000, and do your SWI call. Then append your compressed binary to your assembled program, and do a test run. If it doesn't work, then you have done something wrong :)
<br/>
<br/>
<br/>
LG.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25008 - tepples - Sun Aug 15, 2004 12:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lord Graga wrote:</b></span></td> </tr> <tr> <td class="quote">Okay, imagine that you have compiled a final ROM of your game at around ~300 kbyte. Now you want it all to be compressed, but it needs to be 256 kbyte (at max) to run in EWRAM. So you start crunching a few images, and it's down on 256 kbyte or less in the end. This is something everybody should do to every data in their program.</td> </tr></table><span class="postbody">
<br/>
Do GBA programs really have more than 256 KBytes of code, rather than say 64 KB of code and lots more of assets?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">crush the whole program up, and write a small assembler program. All it shall do is point the decompresion source pointer at the end of the binary (usually 0x8000100 if you pad the program), the decompression pointer at 0x200000, and do your SWI call. Then append your compressed binary to your assembled program</td> </tr></table><span class="postbody">
<br/>
Reminds me of UPX.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25020 - torne - Sun Aug 15, 2004 1:32 pm</h4>
    <div class="postbody"><span class="postbody">I have programs with more than 256k of code. Not games, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25025 - sajiimori - Sun Aug 15, 2004 6:24 pm</h4>
    <div class="postbody"><span class="postbody">Code size can definitely become a problem when you have to execute from RAM.  It's not uncommon to load only the routines that are needed, excluding things like AI for characters that aren't present.
<br/>
<br/>
Use a bytecode-compiled scripting language to reduce your code size by perhaps a factor of 6.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
