<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Unable to load more than 8 16x16 sprites at a time - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Unable to load more than 8 16x16 sprites at a time</h2>
<div id="posts">
<div class="post">
    <h4>#59366 - blacksun - Mon Oct 31, 2005 10:10 pm</h4>
    <div class="postbody"><span class="postbody">I am trying to load up a bunch of sprites into my SpriteData 0x6010000.  For some reason I can only load up 8 16x16 sprites at a time.  If I load up any more, it will repeat the data with the first sprites in the strip.  If I load 8 at a time it works perfectly.  Is there a size or  speed limitation to copy over the sprite data?
<br/>
<br/>
Here is what I am currently using:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void InitGameSprites(int mode)
<br/>
{
<br/>
   int i;
<br/>
   int currSize = 0;
<br/>
<br/>
   int primesDim = 16*16*8/2;
<br/>
   int prodDim = 16*16*8/2;
<br/>
   int cursorDim = 16*16*6/2;
<br/>
   //int blankDim = 32*32/2;
<br/>
   numOfSelects = 0;
<br/>
   
<br/>
   for(i = 0; i &lt; 10; i++)
<br/>
   {
<br/>
      select[i].xPos = 0;
<br/>
      select[i].yPos = 0;
<br/>
      select[i].index = 118;
<br/>
      select[i].active = false;
<br/>
   }
<br/>
<br/>
   for(i = 0; i &lt; numOfSprites; i++)
<br/>
   {
<br/>
      spriteArray[i].xPos = 160;
<br/>
      spriteArray[i].yPos = 240;
<br/>
      spriteArray[i].spriteIndex = 0;
<br/>
   }
<br/>
<br/>
   for(i = 0; i &lt; 128; i++)
<br/>
      SpriteData[i] = 0x0000;
<br/>
<br/>
   for(i = 0; i &lt; 128; i++)
<br/>
   {
<br/>
      sprites[i].attribute0 = 160 | COLOR_256;
<br/>
      sprites[i].attribute1 = 240;
<br/>
      sprites[i].attribute2 = 0;
<br/>
      sprites[i].attribute3 = 0;
<br/>
   }
<br/>
<br/>
   numOfSprites = 0;
<br/>
<br/>
   for(i = 0; i &lt; cursorDim; i++)
<br/>
      SpriteData[i] = cursorData[i];
<br/>
   currSize += cursorDim;
<br/>
<br/>
   for(i = currSize; i &lt; primesDim + currSize; i++)
<br/>
      SpriteData[i] = primesData[i - currSize];
<br/>
   currSize += primesDim;
<br/>
<br/>
   for(i = currSize; i &lt; prodDim + currSize; i++)
<br/>
      SpriteData[i] = prods415Data[i - currSize];
<br/>
   currSize += prodDim;
<br/>
<br/>
   for(i = currSize; i &lt; prodDim + currSize; i++)
<br/>
      SpriteData[i] = prods1626Data[i - currSize];
<br/>
   currSize += prodDim;
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I am not running out of memory because I can see it allocating the memory, just not copying over the right ones.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59571 - SittingDuck - Wed Nov 02, 2005 7:06 pm</h4>
    <div class="postbody"><span class="postbody">I don't know.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59624 - strager - Wed Nov 02, 2005 10:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SittingDuck wrote:</b></span></td> </tr> <tr> <td class="quote">I don't know.</td> </tr></table><span class="postbody">
<br/>
That was the most meaningless and pointless (and most all-around stupid) post I have ever seen.
<br/>
<br/>
I assume the following:
<br/>
sprites points to 0x07000000 and defines the OAM attributes.
<br/>
SpriteData points to 0x06010000.
<br/>
<br/>
I do not know what the first two loops do.  Can you briefly explain their purpose?
<br/>
<br/>
I've notice that your code defines cursorDim to be 768, but I'm thinking you mean 1024.  Am I right?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Your Code wrote:</b></span></td> </tr> <tr> <td class="quote">int cursorDim = 16*16*<span style="text-decoration: underline"><span style="font-weight: bold"><span style="font-style: italic">6</span></span></span>/2; </td> </tr></table><span class="postbody">
<br/>
This seems to be the problem; try correcting it and see if it works the way you want it to then.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60210 - blacksun - Tue Nov 08, 2005 2:25 am</h4>
    <div class="postbody"><span class="postbody">Ok ignore the first set of loops, I was just messing around with clearing sprite data.
<br/>
<br/>
you are correct in the address labels.
<br/>
<br/>
Now for the small code snipit
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int cursorDim = 16*16*6/2;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
What I am doing there is specifying how much data I will need to put in.  The cursor sprite has 6 different 16x16 sprites.  My blocksDim has more.  That is what the number is for.
<br/>
<br/>
I am also using bmp2spr to convert these sprite strips.  Is there some weird limitation on the size of the sprites?  Because no matter what number i use for the blocksDim, it will only load up 8 unique sprites.  It will still allocate enough memory for all the sprites, it just repeats the same 8 sprites.
<br/>
<br/>
Sorry this is a little long winded.  Again, if I split up the blocks into 8 16x16 strips it loads fine, but that would take a while to do.
<br/>
<br/>
Thanks[/code]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
