<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>string to seed - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > string to seed</h2>
<div id="posts">
<div class="post">
    <h4>#64765 - sgeos - Mon Dec 26, 2005 2:48 pm</h4>
    <div class="postbody"><span class="postbody">What is a good string to seed function?  I'm currently using something like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u32 stringToSeed(const char *pString, u32 pSeed)
<br/>
{
<br/>
   u32 result = pSeed;
<br/>
   int i;
<br/>
<br/>
   for (i = 0; pString[i]; i++)
<br/>
      result = (result + pString[i]) * 69069;
<br/>
   return result;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
Does anyone have anything better?
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64771 - keldon - Mon Dec 26, 2005 3:13 pm</h4>
    <div class="postbody"><span class="postbody">well considering your string is mostly going to contain letters of the alphabet and numbers I would suggest transposing results to letter 'a' and doing modulo 32 so that 'A' and 'a' have the same value. This can then be scaled from 32 to <span style="font-style: italic">69069 </span>so that you have a more versatile range. You could also use letter frequency in reverse so that strings would yield more balanced results that are not highly distributed around 's' and 'e' if you **really** need to.
<br/>
<br/>
What about some of the error correction calculations such as checksum etc?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64775 - Ultima2876 - Mon Dec 26, 2005 4:40 pm</h4>
    <div class="postbody"><span class="postbody">Out of interest, why 69069?
<br/>
<br/>
EDIT: "The hardcore programers are the ones who were logged in at 3am on Christmas day!!!" -- I'll toast that ;P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64776 - kusma - Mon Dec 26, 2005 5:01 pm</h4>
    <div class="postbody"><span class="postbody">because 69069 is a prime number, multiply-adding with a prime number reduce the statistical properties of the checksum, making less collitions. i guess ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64780 - poslundc - Mon Dec 26, 2005 7:02 pm</h4>
    <div class="postbody"><span class="postbody">69069 is a number frequently used as a multiplier in linear congruential generators for random numbers. It is actually known as the "Super-Duper" LCG. More info can be found at: <a href="http://random.mat.sbg.ac.at/~charly/server/node3.html" target="_blank">http://random.mat.sbg.ac.at/~charly/server/node3.html</a>
<br/>
<br/>
(I've typically favoured the BCPL instead of Super-Duper and been pretty happy with the results.)
<br/>
<br/>
It shouldn't be necessary or relevant to scale your seed value by the multiplier - you'll be doing that anyway in the implementation of the random algorithm, so I don't imagine you'd get better results by involving the multiplier in your seed selection.
<br/>
<br/>
Personally, I would just add the characters... or if I wanted something to prevent collisions from things like having the same string backwards, I'd run sha1 or MD5 or some other hashing algorithm on the string to get something that'll be truly unpredictable for every string.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64835 - sgeos - Tue Dec 27, 2005 8:15 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">well considering your string is mostly going to contain letters of the alphabet and numbers I would suggest transposing results to letter 'a' and doing modulo 32 so that 'A' and 'a' have the same value.</td> </tr></table><span class="postbody">
<br/>
Why assume English?  It's going to contain values between a minimum and a maximum.  What those values are will depend on the language.  If I really want 'A' and 'a' to have the same value I'll write a toUpper() function and pass in an upper case string.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">This can then be scaled from 32 to <span style="font-style: italic">69069 </span>so that you have a more versatile range.</td> </tr></table><span class="postbody">
<br/>
Note the u32 return type.  I want 32 bits.  Scaling belongs in another function.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">You could also use letter frequency in reverse so that strings would yield more balanced results that are not highly distributed around 's' and 'e' if you **really** need to.</td> </tr></table><span class="postbody">
<br/>
Neat idea, but what happens if the player really likes wxyz and q?  I suspect inverse scaling could work really well give another set of requirements (which I probably should have mentioned).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">What about some of the error correction calculations such as checksum etc?</td> </tr></table><span class="postbody">
<br/>
What do you assume I'm going to use this for?  I want 32 bits to seed an RNG.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ultima2876 wrote:</b></span></td> </tr> <tr> <td class="quote">Out of interest, why 69069?</td> </tr></table><span class="postbody">
<br/>
Because it works.  I should have hidden it behind a macro.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">because 69069 is a prime number</td> </tr></table><span class="postbody">
<br/>
69069 is not prime.  By looking at it you can tell that it factors into 69 * 1001.  Its prime factorization is 3 * 7 * 11 * 13 * 23.  In hex it is 0x10DCD.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">Personally, I would just add the characters...</td> </tr></table><span class="postbody">
<br/>
That's basically what I'm doing.  I want a 32 bit return value, and I want different permutations of the same letters to return different results.  I'll look into sha1 and MD5.  Thanks!
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64841 - poslundc - Tue Dec 27, 2005 10:57 am</h4>
    <div class="postbody"><span class="postbody">Between MD5 and sha1 I'd probably favour MD5... it's been a while since I looked, but I think MD5 is a bit less computationally expensive (and a bit less secure, which of course doesn't matter a whit for your purposes) and it generates only 16 bytes as opposed to 20 (seeing as you'll only be needing the first four anyway).
<br/>
<br/>
Since you'll presumably be doing all of this during initialization, computation time won't be a factor for you. Still, I find it's occasionally useful to have these hashing algorithms around... it's surprising how frequently they come up in various parts of game functionality.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
