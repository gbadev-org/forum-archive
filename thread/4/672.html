<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DMA HBlank - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > DMA HBlank</h2>
<div id="posts">
<div class="post">
    <h4>#3477 - Drago - Tue Feb 25, 2003 6:06 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I've been playing around with DMA HBlank transfers, and I've found the following issues:
<br/>
<br/>
GBATEK info says, under 'LCD Dimensions and Timings' section:
<br/>
<span style="font-style: italic">Note that no H-Blank interrupts are generated within V-Blank period.</span>
<br/>
<br/>
Also from GBATEK, in the section explaining the DMA repeat bit:
<br/>
<span style="font-style: italic">The transfer will be repeated forever, until it gets stopped by software.</span>
<br/>
<br/>
VisualBoy (v1.4) behaviour is:
<br/>
H-Blank interrupts are generated within V-Blank period.
<br/>
The DMA HBlank transfer is stopped at VBlank.
<br/>
<br/>
And my tests on the hardware tell me that:
<br/>
H-Blank interrupts ARE generated within V-Blank period (agrees VBoy).
<br/>
The DMA HBlank transfer is NOT stopped at VBlank (agrees GBATEK).
<br/>
<br/>
Can anybody confirm the hardware behaviour?
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3508 - dukope - Wed Feb 26, 2003 9:48 am</h4>
    <div class="postbody"><span class="postbody">hdma occurs only on the visible portion of the screen (0 -160) on both the hardware and, as far as i know, vba.
<br/>
<br/>
to verify, you can test the increment behaviour of the hdma register during a vblank. you'll find that the value of the source address remains unchanged from line 160, through the vblank, and back to line 0.
<br/>
<br/>
edit:
<br/>
note that this says nothing about the actual transfer, only the interrupt generation.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
