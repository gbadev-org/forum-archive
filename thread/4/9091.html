<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>platform game collision test with map - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > platform game collision test with map</h2>
<div id="posts">
<div class="post">
    <h4>#77727 - aik6980 - Sun Apr 02, 2006 6:04 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys, 
<br/>
<br/>
Now, I'm doing my game project. It's a platform game like mario. Here's a question
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
u8 collisionTest_PVMy(){ 
<br/>
   s16 tx=0,ty=0; 
<br/>
   tx=alien.px/8; 
<br/>
   ty=alien.py/8+3; 
<br/>
   if(bgCollision[(tx+(++ty)*32)]==0x0004){ 
<br/>
      return HITDOWN; 
<br/>
   } 
<br/>
   else 
<br/>
      return OK; 
<br/>
<br/>
   return 0; 
<br/>
} 
<br/>
u8 collisionTest_PVMx(){ 
<br/>
   s16 tx=0,ty=0; 
<br/>
   tx=alien.px/8+1; 
<br/>
   ty=alien.py/8; 
<br/>
   if(bgCollision[((++tx)+(ty)*32)]==0x0004){ 
<br/>
      return HITRIGHT; 
<br/>
   } 
<br/>
   return OK; 
<br/>
 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
There are my Collision test code, it's work but is it better to use vector concept rather than check it directly to array?
<br/>
The problem is, it will grow bigger later when my whole stgabe is full of character and monster.
<br/>
<br/>
I use MapEd building map and collision map 
<br/>
any good idea? 
<br/>
<br/>
Thank alot[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77740 - sajiimori - Sun Apr 02, 2006 8:36 pm</h4>
    <div class="postbody"><span class="postbody">Tile collision still works well when you have lots of moving characters.
<br/>
<br/>
If you mean that the function will get long because you plan on making another copy of the collision code for every object in the level, the solution is to reuse the same code by making the object a parameter instead of assuming it's 'alien'.
<br/>
<br/>
If you find yourself writing repetitive code, there is probably something wrong.
<br/>
<br/>
Also: Use ints instead of smaller types normally, initialize your variables once if you can, and factor out the duplicated tile check code into a function like tileIsSolid(x, y).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
