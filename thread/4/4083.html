<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How do you program sprites with 140x140 in size of bigger? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > How do you program sprites with 140x140 in size of bigger?</h2>
<div id="posts">
<div class="post">
    <h4>#26446 - LOst? - Wed Sep 15, 2004 11:49 pm</h4>
    <div class="postbody"><span class="postbody">Do you know how this technique is working? You use a background map like this:
<br/>
<a href="http://www.logotypes.se/tmp/map1.png" target="_blank">http://www.logotypes.se/tmp/map1.png</a>
<br/>
<br/>
To produce this 3D falling doorway:
<br/>
<a href="http://www.logotypes.se/tmp/map1_1.png" target="_blank">http://www.logotypes.se/tmp/map1_1.png</a>
<br/>
<a href="http://www.logotypes.se/tmp/map1_2.png" target="_blank">http://www.logotypes.se/tmp/map1_2.png</a>
<br/>
<br/>
And you'll use a background map to like this:
<br/>
<a href="http://www.logotypes.se/tmp/map2.png" target="_blank">http://www.logotypes.se/tmp/map2.png</a>
<br/>
<br/>
To produce the biggest enamy I have ever seen:
<br/>
<a href="http://www.logotypes.se/tmp/map2_1.png" target="_blank">http://www.logotypes.se/tmp/map2_1.png</a>
<br/>
<br/>
Of course the small parts like the eyes and nose and shoes are in OAM. But how do you make that background map turn into a 3D brick, and a round body?
<br/>
<br/>
And what's this technique called?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26449 - keldon - Thu Sep 16, 2004 12:05 am</h4>
    <div class="postbody"><span class="postbody">By changing the position during in HBlank. It's pretty much the same thing you do in out-run type racing games. Basically of you imaging that circular body as only a set of lines of a certain width, then when drawing each line you adjust the y value of the background layer so that the line with the correct width coloured line is displayed.
<br/>
<br/>
You can see that the same display-lines are used repeatedly by comparing the map of the door where the shadow is pretty square, and when it appears in the level where it is stretched.</span><span class="gensmall"><br/><br/>Last edited by keldon on Thu Sep 16, 2004 12:22 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#26450 - LOst? - Thu Sep 16, 2004 12:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">By changing the position during in HBlank. It's pretty much the same thing you do in out-run type racing games.</td> </tr></table><span class="postbody">
<br/>
<br/>
But isn't it very complex to do a falling 3-D brick like in the screen shot? And why is the map drawn in triangles?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26452 - sajiimori - Thu Sep 16, 2004 12:27 am</h4>
    <div class="postbody"><span class="postbody">It will take some thought, but hblank effects with a rot/scale bg will do the trick.  I guess the art is drawn in that shape to make it scale more gracefully (with less pixelation when scaling up and less dropouts when scaling down).  The math for the big door should be similar to regular "mode 7" style, except compensating for the triangular map.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26453 - LOst? - Thu Sep 16, 2004 12:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">It will take some thought, but hblank effects with a rot/scale bg will do the trick.  I guess the art is drawn in that shape to make it scale more gracefully (with less pixelation when scaling up and less dropouts when scaling down).  The math for the big door should be similar to regular "mode 7" style, except compensating for the triangular map.</td> </tr></table><span class="postbody">
<br/>
<br/>
Okay, thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26454 - keldon - Thu Sep 16, 2004 12:39 am</h4>
    <div class="postbody"><span class="postbody">The falling block shouldn't even be seen as 3d in terms of code. It's just due to the effect of two mapped polygons moving in unison. Again they are not even polygons. It is not that difficult, there are basically 2 variables; top and divider. The divider is what seperates the dark block to the block with lines.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">top = seperator = 80;
<br/>
VBLstep = 1;
<br/>
void VBLHandler (){
<br/>
   // Only do this for 60 VBL's
<br/>
   while ( VBLstep &lt;= 60 ) {
<br/>
      seperator = 80 - (80 * 60 / VBLStep);
<br/>
      top = 80 - (60 * 60 / VBLStep);
<br/>
   }
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
This basically makes the top move more slowly to the bottom than the seperator, giving the illusion of falling over a distance of 80 pixels.
<br/>
<br/>
As for the map being a triangle, as briefly discussed in my previous post (which I <span style="font-weight: bold">edited</span> while you were writing yours). A triangle is used so that every possible line width is available to work with; although some will never be used.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26455 - keldon - Thu Sep 16, 2004 12:44 am</h4>
    <div class="postbody"><span class="postbody">Oh sorry, my understanding of GBA graphics hardware is not even at beginner level. I only read up about mode 0 (I think it was). And I started typing before your posts appeared too =) - but the top and seperator could still be calculated the same way.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26456 - LOst? - Thu Sep 16, 2004 1:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>keldon wrote:</b></span></td> </tr> <tr> <td class="quote">The falling block shouldn't even be seen as 3d in terms of code. It's just due to the effect of two mapped polygons moving in unison. Again they are not even polygons. It is not that difficult, there are basically 2 variables; top and divider. The divider is what seperates the dark block to the block with lines.
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">top = seperator = 80;
<br/>
VBLstep = 1;
<br/>
void VBLHandler (){
<br/>
   // Only do this for 60 VBL's
<br/>
   while ( VBLstep &lt;= 60 ) {
<br/>
      seperator = 80 - (80 * 60 / VBLStep);
<br/>
      top = 80 - (60 * 60 / VBLStep);
<br/>
   }
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
This basically makes the top move more slowly to the bottom than the seperator, giving the illusion of falling over a distance of 80 pixels.
<br/>
<br/>
As for the map being a triangle, as briefly discussed in my previous post (which I <span style="font-weight: bold">edited</span> while you were writing yours). A triangle is used so that every possible line width is available to work with; although some will never be used.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Cool. This is really helpful to see. The falling block is really nicely done because it hasn't any wierd pixels like what you usually see in mode 7 graphics. That's why I like this technique so much.
<br/>
<br/>
And I still believe it's made in mode 0, and because of that, the triangle helps making it appear less or closer.
<br/>
<br/>
Also I want to point out that the palette is animated so it looks more 3-D.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
