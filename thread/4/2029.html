<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DMA Question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > DMA Question</h2>
<div id="posts">
<div class="post">
    <h4>#10506 - sgeos - Sat Sep 06, 2003 7:30 pm</h4>
    <div class="postbody"><span class="postbody">I have a few DMA questions.  Why have a fixed destination?  What specifically does increment/reload do?  What is the game pak DRQ bit used for?
<br/>
<br/>
-Brendan Sechter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10515 - DekuTree64 - Sat Sep 06, 2003 10:11 pm</h4>
    <div class="postbody"><span class="postbody">Fixed dest is useful for stuff like setting new scrolling values on HBlank to make a wavy effect, changing window settings for iris out, etc. where you have an array of register values in memory and DMA them in on HBlank. Then if the increment/reload mode you're talking about is BIT05|BIT06, it's for things like the mode7 effect where you need to copy in more than one value each scanline, so you do need to increment the dest address after each word/halfword copied, but then it resets it back to where it started for the next line.
<br/>
<br/>
And what's a DRQ? Do you mean the gamepak IRQ? That happens when you yank the cart out of the system while it's still turned on, the IRQ is used so you can disable sound so it doesn't make scrambly noise and stuff. I think you can also use it to make like a multi-cart game, where you just pull out one cart, put another in and continue. Or just so if you pull the cart out by accident you can put it back in and not have to reset it.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10517 - sgeos - Sat Sep 06, 2003 10:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">Fixed dest is useful for stuff like setting new scrolling values on HBlank to make a wavy effect, changing window settings for iris out, etc. where you have an array of register values in memory and DMA them in on HBlank.</td> </tr></table><span class="postbody">
<br/>
<br/>
That makes sense.  I was only thinking moving large chuncks of memory, not a member of an array each scanline.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Then if the increment/reload mode you're talking about is BIT05|BIT06, it's for things like the mode7 effect where you need to copy in more than one value each scanline, so you do need to increment the dest address after each word/halfword copied, but then it resets it back to where it started for the next line.</td> </tr></table><span class="postbody">
<br/>
<br/>
That is what I'm talking about.  Without increment/reload set, I'm assuming that the next copy will start where the last one left off?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And what's a DRQ? Do you mean the gamepak IRQ?</td> </tr></table><span class="postbody">
<br/>
<br/>
See bit 11 of DMAxCNT_H (0x040000BA, 0x040000C6, 0x040000D2, 0x040000DE).
<br/>
<a class="postlink" href="http://www.work.de/nocash/gbatek.htm#dmatransfers" target="_blank">http://www.work.de/nocash/gbatek.htm#dmatransfers</a>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">That happens when you yank the cart out of the system while it's still turned on, the IRQ is used so you can disable sound so it doesn't make scrambly noise and stuff. I think you can also use it to make like a multi-cart game, where you just pull out one cart, put another in and continue. Or just so if you pull the cart out by accident you can put it back in and not have to reset it.</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't think that's what bit 11 is used for, but I may be wrong.  It would be kind of neat to see something like this: "Reinsert cart and press start to continue."
<br/>
<br/>
-Brendan Sechter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#10519 - tepples - Sat Sep 06, 2003 11:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">I think you can also use it to make like a multi-cart game, where you just pull out one cart, put another in and continue.</td> </tr></table><span class="postbody">
<br/>
Not likely. The Game Boy Player doesn't allow pak-swapping because it resets the system every time you use the "swap carts" function from its Z-button menu, and if you pak-swap without using "swap carts" function from its Z-button menu, it crashes the GameCube with an error message.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
