<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>SRAM and WRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > SRAM and WRAM</h2>
<div id="posts">
<div class="post">
    <h4>#21203 - johnny_north - Tue May 25, 2004 8:51 pm</h4>
    <div class="postbody"><span class="postbody">According to the gbatek docs:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Reading and Writing
<br/>
Reading from SRAM should be performed by code exectued in WRAM only (but not by code executed in ROM). There is no such restriction for writing.</td> </tr></table><span class="postbody">
<br/>
<br/>
Why?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21206 - ampz - Tue May 25, 2004 9:08 pm</h4>
    <div class="postbody"><span class="postbody">As far as I know, no one knows. I can see no technical reason why you cannot access savegame SRAM from within ROM code.
<br/>
<br/>
I know commercial games do access flash from within ROM code. (flash and SRAM are accessed exactly the same way, so...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21207 - johnny_north - Tue May 25, 2004 9:31 pm</h4>
    <div class="postbody"><span class="postbody">I ran across this accidently after looking at the waitstate tepples pointed out in the "emulation" post. I had one of those "oh crap" / "but wait just a second..." moments.
<br/>
<br/>
the docs go on to say:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Preventing Data Loss
<br/>
The GBA SRAM carts do not include a write-protect function (unlike older 8bit gameboy carts). This seems to be a problem and may cause data loss when a cartridge is removed or inserted while the GBA is still turned on. As far as I understand, this is not so much a hardware problem, but rather a software problem, ie. theoretically you could remove/insert the cartridge as many times as you want, but you should take care that your program does not crash (and write blindly into memory).</td> </tr></table><span class="postbody">
<br/>
<br/>
This seems to mix rationalization for using the cart interrupt and an explanation for corrupted SRAM, but I'm not making the connection.
<br/>
<br/>
I'm wondering if I'll be protecting SRAM by employing a cart interrupt. Is it a commercial cart requirement to include a cart interrupt and are you able to recover gracefully from a cart yank?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21246 - ampz - Wed May 26, 2004 11:41 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>johnny_north wrote:</b></span></td> </tr> <tr> <td class="quote">I'm wondering if I'll be protecting SRAM by employing a cart interrupt.</td> </tr></table><span class="postbody">
<br/>
Under some very unlikely circumstances, maybe...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>johnny_north wrote:</b></span></td> </tr> <tr> <td class="quote">Is it a commercial cart requirement to include a cart interrupt and are you able to recover gracefully from a cart yank?</td> </tr></table><span class="postbody">
<br/>
It is no commercial requirement since most commercial games I know of crashes just fine if you remove the cart :)
<br/>
If you use the cart interrupt properly, yes, is should be very possible to recover fine from a cart yank.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21316 - johnny_north - Thu May 27, 2004 5:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">It is no commercial requirement since most commercial games I know of crashes just fine if you remove the cart :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Good point ;P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21350 - tepples - Fri May 28, 2004 3:22 am</h4>
    <div class="postbody"><span class="postbody">The distinction here is between a crash and a dataloss. It appears that Nintendo wants games to preserve savegame data even if the cart is yanked during gameplay.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
