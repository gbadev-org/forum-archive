<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Weird GDB Error when stepping - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Weird GDB Error when stepping</h2>
<div id="posts">
<div class="post">
    <h4>#76519 - ion - Wed Mar 22, 2006 10:38 am</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I've a setup involving Eclipse as my IDE and I was able to debug in Eclipse using GDB.  Recently I redesign some of my code to make it more modular.  I'm new-ish to C so was learning as I went along.  For some reason when now debugging is not working.  I can connect remotely you to the debugger and VisualBoyAdvance is working (as I said the setup was working fine).  The  GDB server fails with the following message
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Single stepping until exit from function __do_global_dtors_aux, 
<br/>
which has no line number information.
<br/>
Cannot find bounds of current function</td> </tr></table><span class="postbody">
<br/>
<br/>
In the debug box the trace is the following.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
GDB Server (22/03/06 09:35) (Suspended)
<br/>
   Thread [0] (Suspended)
<br/>
      2 __do_global_dtors_aux()  0x02000260
<br/>
      1 &lt;symbol is not available&gt; 0x0200ddc0
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Any idea why this may be happening.  I'm running on windows and have ZERO experience with GDB, Linux, etc...
<br/>
<br/>
ION</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76521 - ion - Wed Mar 22, 2006 11:06 am</h4>
    <div class="postbody"><span class="postbody">I'm just wondering does it have anything to do with where my code is placed.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main(void)
<br/>
{   
<br/>
   // initialise ship system
<br/>
   ship_initialise();
<br/>
   // initialise background system
<br/>
   bg_initialise();
<br/>
<br/>
   //set video mode 0 with background 0
<br/>
   SetMode(MODE_0 | BG0_ENABLE | BG1_ENABLE | OBJ_ENABLE | OBJMAP_1D);
<br/>
   
<br/>
   //main game loop
<br/>
   while(1)
<br/>
   {
<br/>
      // poll for key changes
<br/>
      key_poll();
<br/>
      // update ship movements
<br/>
      ship_update();
<br/>
      // set ship to display
<br/>
      ship_display();
<br/>
      // update the backgrounds
<br/>
      bg_update();
<br/>
      
<br/>
      //wait for vertical refresh
<br/>
      VSync();
<br/>
      
<br/>
      bg_display();
<br/>
      // update all sprites in memory
<br/>
      update_oam();
<br/>
   }
<br/>
   return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Here's my int main.  seems the problem occurs when I hit ship_initialise().  ship.c has some defines, a struct representing my ship and some support functions.  ship.h then has the public interface.
<br/>
<br/>
ION</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76562 - KayH - Wed Mar 22, 2006 7:06 pm</h4>
    <div class="postbody"><span class="postbody">Not sure about that, but the debugger complains about missing symbols. That seems not to be related to source code. I would assume it is related to your build process. Do you use optimization (o)? Can you try it without optimization? I'm not really familiar with that, but for debugging optimization is not so good.
<br/>
<br/>
hth
<br/>
KaY</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76563 - ion - Wed Mar 22, 2006 7:10 pm</h4>
    <div class="postbody"><span class="postbody">hey. how's it going..
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=8999" target="_blank">http://forum.gbadev.org/viewtopic.php?t=8999</a>
<br/>
<br/>
I just posted another question that I ended up explaining my setup.  I was using devkitARM R17 and Insight/GDB 6.4.50.  It was kinda working and then just suddenly stopped.  I tried R12 and R8 and they worked but they're still screwing up.  I ended up reinstalling R17 and the debugging is working but shows same problems as R8 and R12.  Need more info?
<br/>
<br/>
ION</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76753 - gmiller - Fri Mar 24, 2006 6:50 am</h4>
    <div class="postbody"><span class="postbody">If you do not have an -O0 (Letter O followed by number 0) in your compile steps you will have a hard time using a source code debugger.  With GDB there are problems when using vba 1.7.2 or higher and the debugger (gdb not the internal debugger).  The earlyier release of vba has some issues with gdb's Next command but not as many as the newer releases.  Of course you dud not let us know the command line arguments for the compile or what emulator you ar using so I am "guessing".</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77029 - ion - Mon Mar 27, 2006 4:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CFLAGS  := -I./ $(MODEL) -O0 -Wall
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That's my makefile CFLAGS.  Using VBA (various SDL versions).  Haven't been near it in a couple of days so not too sure if the problem is still there. I'll keep you posted.
<br/>
<br/>
Cheers,
<br/>
ION</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
