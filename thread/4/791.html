<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Quick Sprite Question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Quick Sprite Question</h2>
<div id="posts">
<div class="post">
    <h4>#4009 - Ninja - Sat Mar 15, 2003 7:58 pm</h4>
    <div class="postbody"><span class="postbody">Hi all.  I am trying to get a 32x64 sprite (4 bit color) to display properly, but am having a great deal of trouble doing it.  (Probably because I haven't slept in a good 28 hours).  I was wondering if one of you would help me out a little?
<br/>
<br/>
I am using a 1D array, in Mode 4.  I have my array set up like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
InitializeSprites();
<br/>
<br/>
sprites[0].attribute0 = COLOR_16 | TALL | y;
<br/>
sprites[0].attribute1 = SIZE_64 | x;
<br/>
sprites[0].attribute2 = 512;
<br/>
<br/>
int size = 512;
<br/>
<br/>
for(loop = 512*16; loop &lt; size; loop++)
<br/>
{
<br/>
   OAMdata[loop] = obj0[loop];
<br/>
)
<br/>
<br/>
while(1)
<br/>
{
<br/>
   CopyOAM();
<br/>
   WaitForVblank();
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I am right positive I am writing to the wrong array section, but my tired mind is a little too overworked to figure out the correct formula, an dmy inexperience with graphics isn't helping much.
<br/>
<br/>
EDIT:  Sorry, I should probably mention that I am seeing the sprite, and in proper dimensions, but the data is corrupted, as I am seeing large blocks of garbage data colored roughly like my sprite.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4014 - darkcloud - Sat Mar 15, 2003 9:29 pm</h4>
    <div class="postbody"><span class="postbody">Your 'for' loop seems to be the problem.  You are setting the initial value of loop greater than what you are checking it against, thus no data would get loaded in.  512*16 is greater than 512 so the loop won't work.  You should set loop to 0 at first, then during the loop do something like 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">OAMdata[loop+512*16] = obj0[loop];</td> </tr></table><span class="postbody"><br/>_________________<br/>Maybe in order to understand mankind, we have to look at the word itself: "Mankind". Basically, it's made up of two separate words - "mank" and "ind". What do these words mean ? It's a mystery, and that's why so is mankind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4016 - Ninja - Sat Mar 15, 2003 9:46 pm</h4>
    <div class="postbody"><span class="postbody">Let this be a lesson to the rest of you:  When coding, try to stay awake.
<br/>
<br/>
Thanks so much man.  I finally got it working correctly, after a good 12 hours of beating my head against the wall trying to make it work.  :)  Man do I ever feel like the world's biggest tool.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
