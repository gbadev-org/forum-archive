<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Cartridge Startup Behavior - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Cartridge Startup Behavior</h2>
<div id="posts">
<div class="post">
    <h4>#46251 - Digeraticus - Wed Jun 22, 2005 9:02 am</h4>
    <div class="postbody"><span class="postbody">How does the startup sequence work? What is loaded to where at cartridge startup? Is stuff labeled with ?.iwram? and so on loaded into the GBA/DS on startup into their respective locations, or is this just a label that tells the compiler to optimize the code for that environment, and we have to load it manually?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46270 - poslundc - Wed Jun 22, 2005 5:43 pm</h4>
    <div class="postbody"><span class="postbody">The short version:
<br/>
<br/>
After the GBA starts up it begins executing the code at 0x08000000. The code that it executes here can be found in crt0, which is usually a file written in assembly (.s or .S) and custom-tailored to the GBA. This code is responsible for copying any necessary code into RAM, initializing variables, etc.
<br/>
<br/>
The section labels are used by the linker in order to set up the addresses that the code/variables/etc. are found at (and can from there be copied into IWRAM, EWRAM, etc.). When your various .o files are linked together into a .elf file, a linkscript configured for the GBA is used to tell the linker what the various sections are and where the relevant code needs to go.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46292 - Digeraticus - Wed Jun 22, 2005 8:00 pm</h4>
    <div class="postbody"><span class="postbody">So is that to say that the ?.section? directives DO cause that section to be loaded on startup? And if you have more than one of the same section, and it exceeds the memory for that space on the system, what happens?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46318 - tepples - Thu Jun 23, 2005 3:24 am</h4>
    <div class="postbody"><span class="postbody">In a perfect world, the linker would notify you when your code overflows a section boundary, but with the version of the linker script shipped in devkitARM, your program will just crash or otherwise misbehave.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46339 - wintermute - Thu Jun 23, 2005 2:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">In a perfect world, the linker would notify you when your code overflows a section boundary, but with the version of the linker script shipped in devkitARM, your program will just crash or otherwise misbehave.</td> </tr></table><span class="postbody">
<br/>
<br/>
actually, release 12 onwards notifies you :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46389 - Digeraticus - Fri Jun 24, 2005 2:51 am</h4>
    <div class="postbody"><span class="postbody">So it does automatically load the code into their correct sections on startup? Or not?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46393 - wintermute - Fri Jun 24, 2005 2:56 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Digeraticus wrote:</b></span></td> </tr> <tr> <td class="quote">So it does automatically load the code into their correct sections on startup? Or not?</td> </tr></table><span class="postbody">
<br/>
<br/>
if you use devkitARM and the appropriate linker switch then it all happens automatically</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
