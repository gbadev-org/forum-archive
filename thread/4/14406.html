<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Does using the linkscripts keep any relocation information? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Does using the linkscripts keep any relocation information?</h2>
<div id="posts">
<div class="post">
    <h4>#143860 - Dwedit - Fri Oct 26, 2007 9:30 pm</h4>
    <div class="postbody"><span class="postbody">In devkitARM, after the .o files are run through the linker (using one of the GBA or NDS linkscripts) to produce an .elf file, does this elf file contain any relocation information?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143876 - kusma - Sat Oct 27, 2007 12:46 am</h4>
    <div class="postbody"><span class="postbody">only if you supply the -fPIC option (or was it -mPIC?) during compilation
<br/>
<br/>
edit: stupid me, not reading the post fully before posting. i'm dead tired from delayed flights, sorry.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143880 - gmiller - Sat Oct 27, 2007 12:54 am</h4>
    <div class="postbody"><span class="postbody">The ELF specification does include stuff about reloation but it might not be enough.  See:
<br/>
<br/>
<a href="http://www.skyfree.org/linux/references/ELF_Format.pdf" target="_blank">http://www.skyfree.org/linux/references/ELF_Format.pdf</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143883 - tepples - Sat Oct 27, 2007 2:10 am</h4>
    <div class="postbody"><span class="postbody">What do you need relocatable code for? The most easily relocatable code is position-independent code (PIC), which DLDI uses.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143895 - chishm - Sat Oct 27, 2007 4:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">What do you need relocatable code for? The most easily relocatable code is position-independent code (PIC), which DLDI uses.</td> </tr></table><span class="postbody">
<br/>
Compiling as PIC code isn't enough. For example, the glue between ARM and THUMB code, which is added by the linker, is not automatically made position independent. Libraries may also need to be recompiled as PIC. DLDI gets around this by searching for addresses within all parts of the binary.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
