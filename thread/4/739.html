<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Bit setting - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Bit setting</h2>
<div id="posts">
<div class="post">
    <h4>#3779 - Maverick - Sat Mar 08, 2003 7:43 pm</h4>
    <div class="postbody"><span class="postbody">It is easy to set a bit in an address
<br/>
<br/>
ie *(u16 *)VRAM = 0x50;
<br/>
<br/>
for example.
<br/>
<br/>
But how would you go about changing that back to 0 without touching the other bits.
<br/>
<br/>
ie 0010010
<br/>
to 0010000
<br/>
?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3784 - DekuTree64 - Sat Mar 08, 2003 8:56 pm</h4>
    <div class="postbody"><span class="postbody">Do like var = var &amp; ~bit. The ~ (called not) operator changes all 1 bits to 0's, and all 0's to 1's. So then all bits except the ones that you specify before reversing it will stay set, and all the ones you do specify will be cleared. You can also use ^ (xor) to toggle bits on and off (handy for flashing effects and stuff)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3787 - Maverick - Sat Mar 08, 2003 10:00 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, i dont understand, ive used ~ before, it just basically turns 100 into 155.
<br/>
<br/>
255 - x = y
<br/>
<br/>
255 - 100 = 155
<br/>
<br/>
but ive never used ^
<br/>
<br/>
How would this be used?
<br/>
<br/>
how could i use ~?
<br/>
<br/>
eg
<br/>
<br/>
if x = 100
<br/>
~x = 155
<br/>
<br/>
if x = 100
<br/>
^x = ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3788 - Lord Graga - Sat Mar 08, 2003 10:02 pm</h4>
    <div class="postbody"><span class="postbody">Look at this code:
<br/>
<br/>
if(REG_DISPCNT &amp; BACKBUFFER)
<br/>
{
<br/>
	//Switch to front buffer hidden
<br/>
	REG_DISPCNT &amp;= ~BACKBUFFER;
<br/>
	VideoBuffer = BackBuffer;
<br/>
}
<br/>
//Otherwise front buffer is hidden
<br/>
else
<br/>
{
<br/>
	//Switch to back buffer hidden
<br/>
	REG_DISPCNT |= BACKBUFFER;
<br/>
	VideoBuffer = FrontBuffer;
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#4102 - fatgraham - Wed Mar 19, 2003 12:49 am</h4>
    <div class="postbody"><span class="postbody">and, where bit AND bit
<br/>
  10101011
<br/>
&amp; 01110011
<br/>
= 00100011
<br/>
<br/>
or, where bit OR bit
<br/>
  10101011
<br/>
| 01110011
<br/>
= 11111011
<br/>
<br/>
xor, where bit OR bit, but not both
<br/>
  10101011
<br/>
^ 01110011
<br/>
= 11011000
<br/>
<br/>
not, where NOT a bit
<br/>
~ 10101011
<br/>
= 01010100
<br/>
<br/>
now, obviously the &amp;= applies AND to the variable
<br/>
so, if we AND, NOT &amp;=~
<br/>
<br/>
10101011 &amp; 
<br/>
~01110011 (which is 10001100)
<br/>
= 10001000
<br/>
<br/>
which is what you want to do, if you want to remove some bits
<br/>
<br/>
0xff &amp; (0x0f) = 0x0f	//	keep 0x0f
<br/>
0xff &amp; ~(0x0f) = 0xf0	//	keep the opposite of 0x0f
<br/>
<br/>
<br/>
<br/>
<br/>
Ive always found thinking of everything in terms of bits, and memory (a variable isnt a number, its some memory!) has helped me understand everything, ever<br/>_________________<br/><a href="http://www.fatgrah.am/" target="_blank">http://www.fatgrah.am/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
