<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Binary Search - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Binary Search</h2>
<div id="posts">
<div class="post">
    <h4>#11795 - crossraleigh - Sun Oct 19, 2003 2:21 am</h4>
    <div class="postbody"><span class="postbody">In collision detection on sorted data, is it more efficient to use a binary search instead of a normal loop? Or how do you usually narrow down the points?
<br/>
<br/>
A binary search seems particularly suited to tile collisions where there are lots of 'hot tiles' to test against. Would it also be the way to find sprite collisions if you sort them first as <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=1488" target="_blank">tepples describes</a>? I'm just a little confused about how to test the coordinates once they are sorted.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11797 - tepples - Sun Oct 19, 2003 3:11 am</h4>
    <div class="postbody"><span class="postbody">I don't think a binary search would be straightforwardly applicable here.  A binary search is good for finding a single needle in a <a class="postlink" href="http://en.wikipedia.org/wiki/well-order" target="_blank">well-ordered</a> haystack, and any needle matching the needle you hold in your hand will do. Collision detection, on the other hand, is a different sort of search problem, as you're looking for any two needles that touch. You need to find needles matching <span style="font-style: italic">each</span> of the needles already in a haystack, which means you're going to have to loop through all the needles.  The sort guarantees that the needles that match <span style="font-style: italic">x</span> will be close to <span style="font-style: italic">x</span> in the array, and the set will be somewhat dense (<span style="font-style: italic">x</span>'s candidates much smaller than the entire haystack).
<br/>
<br/>
If you have so many objects packed into such a tight space that the sorting method isn't fast enough for your app, investigate the <a class="postlink" href="http://www.google.com/search?q=collision%20detection%20sector%20method" target="_blank">sector method</a>. It's sort of like the sorting method (no pun intended) but can be applied in two or more dimensions.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11799 - Gopher - Sun Oct 19, 2003 3:02 pm</h4>
    <div class="postbody"><span class="postbody">It's probably not the optimal solution, but a binary tree could be applied to improve linear x- or y- sorting. If an x-sorted list is stored in a tree such that each node, not only the leaves, has a min and max x/y value stored in it that is the min and max from it's leaves. The main problem is that the non-leaf nodes would take up more memory, but if you use a static pool of nodes and 16-bit indexing the structure could be only 8 bytes per node
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
typedef struct CollisionTreeNode_tag {
<br/>
    hword MinX, MaxX;
<br/>
    hword LeftIndex, RightIndex;
<br/>
} CollisionTreeNode;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then just define your static tree so that index 0 is the root node and you can use 0 as null to mark the terminal points just as you would with pointers, and you can have up to a 65k node tree and 32k leaf nodes (and therefore collidable objects)
<br/>
<br/>
As I said, probably not an optimal solution, but should be a slight improvement in speed (at the cost of memory) over a testing against a sorted list, especially if you update a node's position and test that new pos for collisions in the same traversal of the tree.
<br/>
<br/>
Thinking about it more, this not be the best idea after all, since you could end up having an added node actually span between seperate branches, requiring those two branches to be lumped together. Nodes would only be able to be seperated into branches where there is a spot with no overlap on the sorted axis. This is a fatal flaw in my initial logic.
<br/>
<br/>
Ah, well.  That's what I get for trying to be clever when I've only been awake for 15 minutes. I guess ultimately I'm back to agreeing with Tepples, probably not a straightford way to apply a binary tree to this problem. I concidered not posting this little thought-journey at all, but I've decided to post it anyway.<br/>_________________<br/>"Only two things are infinite: the universe, and human stupidity. The first is debatable." -Albert Einstein</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#11813 - crossraleigh - Mon Oct 20, 2003 2:46 am</h4>
    <div class="postbody"><span class="postbody">Wow, it's amazing what just a few extra terms can do for an otherwise fruitless search. I found a great article on (2D) collison detection: <a class="postlink" href="http://www.ddj.com/documents/s=983/ddj9513a/" target="_blank">http://www.ddj.com/documents/s=983/ddj9513a/</a>. 
<br/>
<br/>
I almost had collisions down just from reading GBA forum and group posts when I deciding to give it one last Google'ing. Before, searching for collision detection yielded various 3D stuff, no 2D; but when I looked this last time, I found some 2D information.
<br/>
<br/>
I have been looking for something like that article for a while. Thanks guys! I'm pretty happy now :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
