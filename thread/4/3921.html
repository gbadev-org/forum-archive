<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>macro within gba_types.h - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > macro within gba_types.h</h2>
<div id="posts">
<div class="post">
    <h4>#25304 - black - Fri Aug 20, 2004 8:17 am</h4>
    <div class="postbody"><span class="postbody">howdy~
<br/>
<br/>
i can not grasp how RGB(r,g,b) works inside gba_types.h, anyone could explain it in details ? and if possible i'd like to see any example to see how to use it, thanx~
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// gba_types.h
<br/>
// Variable types
<br/>
<br/>
#ifndef GBA_TYPES_H
<br/>
<br/>
#define GBA_TYPES_H
<br/>
<br/>
...
<br/>
<br/>
#define RGB(r,g,b)   ((u16)(r | (g&lt;&lt;5) | (b&lt;&lt;10)))
<br/>
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Never end on learning~</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25308 - cocole - Fri Aug 20, 2004 9:31 am</h4>
    <div class="postbody"><span class="postbody">Well, you should be able to see the answer anywhere in any GBA tutorial or even a C tut.
<br/>
<br/>
It adds (by the | operator)
<br/>
the value r
<br/>
the value g 5 time bitshifted on the left
<br/>
and b 10 time bitshifted
<br/>
<br/>
let me explain in plain maths :
<br/>
if r = 1
<br/>
and g = 1 
<br/>
and b = 1
<br/>
so 
<br/>
<br/>
g &lt;&lt; 5 is 10000
<br/>
b &lt;&lt; 10 is 1000000000
<br/>
<br/>
so r | (g&lt;&lt;5) | (b&lt;&lt;10)) = 1 | 10000 | 1000000000 = 1000100001</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25309 - black - Fri Aug 20, 2004 10:08 am</h4>
    <div class="postbody"><span class="postbody">woh thanx, i'm not well in bits shifting but i know how it works now, i'll scratch some docs for bits and back here later. :) thanx again dude~<br/>_________________<br/>Never end on learning~</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25510 - black - Tue Aug 24, 2004 7:44 am</h4>
    <div class="postbody"><span class="postbody">i read an article about bits shifting and now i know what the code really did, but what havnt be solved is how to calc rgb color like the code below ?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
define RGB(r,g,b)   ((u16)(r | (g&lt;&lt;5) | (b&lt;&lt;10))) 
<br/>
</td> </tr></table><span class="postbody">
<br/>
what color should RGB(1, 1, 1) will be ? and how to make arbitrary color(such as red) with it ?
<br/>
<br/>
i'd appreciate any relative tuto to be suggested, thanx in advance~<br/>_________________<br/>Never end on learning~</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25511 - tepples - Tue Aug 24, 2004 7:54 am</h4>
    <div class="postbody"><span class="postbody">RED is RGB(31, 8, 8)
<br/>
ORANGE is RGB(31,23, 8)
<br/>
YELLOW is RGB(31,31, 8)
<br/>
GREEN is RGB( 8,31, 8)
<br/>
TURQUOISE is RGB( 8, 31, 31)
<br/>
BLUE is RGB( 8, 8,31)
<br/>
MAGENTA aka MAGIC PINK is RGB(31, 8,31)
<br/>
BROWN is RGB(23,17, 8)
<br/>
<br/>
Components range from 0 to 31, but ddon't use component values below 8 because they don't show up bright enough on the LCD. Castlevania broke this rule, using a lot of the darker colors, and reviewers found the game too dark.
<br/>
<br/>
Play around with a paint program's color picker to learn more colors.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25629 - black - Thu Aug 26, 2004 8:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Play around with a paint program's color picker to learn more colors.</td> </tr></table><span class="postbody">
<br/>
<br/>
usually i work with something like Flash which color palette which will show some hex number like 0xffff00 instead of (8, 12, 31), i want to know how to convert those hex numbers into GBA format ?<br/>_________________<br/>Never end on learning~</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25637 - gb_feedback - Thu Aug 26, 2004 1:12 pm</h4>
    <div class="postbody"><span class="postbody">0xffff00 is three hexadecimal RGB values ff, ff, 00
<br/>
<br/>
Converting that to decimal you would get 255, 255, 0
<br/>
<br/>
(Or to binary 11111111, 11111111, 00000000)
<br/>
<br/>
Most system using RGB use values from 0 to 255 for each component of colour, instead of the 0 to 31 on the GBA.
<br/>
<br/>
So to get the gba equivalent you drop the last 3 binary digits...
<br/>
<br/>
(11111, 11111, 00000)
<br/>
<br/>
Which is 31, 31, 0 on the GBA<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25646 - tepples - Thu Aug 26, 2004 3:56 pm</h4>
    <div class="postbody"><span class="postbody">Sure, just lopping off the lower bits works, but not everybody can do binary in his head, and it still doesn't correct for the dark screen. The best balance I've found between correctness and simplicity is the following: To go from PC CRT component values 0-255 to GBA LCD component values 8-31, divide by 11 and add 8.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25647 - gb_feedback - Thu Aug 26, 2004 4:17 pm</h4>
    <div class="postbody"><span class="postbody">I'm sure you're right, tepples, but I was just explaining what 0xffff00 meant for the man, so sticking to the basics.
<br/>
<br/>
By the way, I would have arranged for black to be a special case, if I were going to write this macro. It seems a pity to throw away any possible contrast when for example displaying black text. I suppose you'll say you can't see the difference, but why risk it?<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25681 - tepples - Thu Aug 26, 2004 10:59 pm</h4>
    <div class="postbody"><span class="postbody">Because GIMP 2 uses the darkest color as color 0 when converting an image from RGB to indexed color, some tutorials may recommend using Real Black to represent transparency.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
