<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>3D path - to use 2 bezier curves, or to use something else? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > 3D path - to use 2 bezier curves, or to use something else?</h2>
<div id="posts">
<div class="post">
    <h4>#158842 - DiscoStew - Thu Jun 19, 2008 6:59 am</h4>
    <div class="postbody"><span class="postbody">At first, I was thinking I could get away with using just a 4D Bezier curve for my 3D path, having 1 value for the Zaxis, and the other 3 for positioning, which will in turn calculate the Y and X axis via position differencing and using Arctan, and for the most part, it worked.
<br/>
<br/>
But as I continued, I found that unless I wanted to stay within the limit of that method (to basically be limited to -90? &lt; x &lt; 90?), I'd have to find another method, because when using Arctan, going past those limits can make the angle jump, and even when that is corrected for the most part, the actual orientation is not known (from my perspective).
<br/>
<br/>
My latest idea was to just have 2 3D Bezier curves, one set for positioning, and the other for direction, and just make the direction curve match up with the position curve. Before I go full out on this idea, I'd like to know everyone else's idea about 3D paths, and what you all think might be better to work with. Basically, I want to be able to have a 3D path that an object follows, that rotates along the path whichever way it curves, including being able to go in the opposite direction, and be rotated to match it. 2 3D Bezier curves should do the trick, but I'd like to know what everyone else thinks.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158847 - silent_code - Thu Jun 19, 2008 10:41 am</h4>
    <div class="postbody"><span class="postbody">Did you look into hermite spline curves?
<br/>
And didn't you post that already some time ago? There has been a very similar topic... ;^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158914 - DiscoStew - Fri Jun 20, 2008 8:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">Did you look into hermite spline curves?
<br/>
And didn't you post that already some time ago? There has been a very similar topic... ;^)</td> </tr></table><span class="postbody">
<br/>
<br/>
Heh, I guess you could say the two topics are similar. While the last one was how I could get Bezier curves to act a certain way, this one was for if I should even use Bezier curves in the first place. Of course you gave me the same answer, which is to try hermite spline curves. Considering this is the 2nd time you said this, I should at least try it. Looking around for it, I believe this is the correct formula....
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">p(t) = (2t? - 3t? + 1)p1 + (-2t? + 3t?)p2 + (t? - 2t? + t)m1 + (t? - t?)m2
<br/>
<br/>
where...
<br/>
p1 &amp; p2 = points
<br/>
m1 &amp; m2 = tangents
<br/>
t = time (from 0 to 1)</td> </tr></table><span class="postbody">
<br/>
<br/>
Pretty similar to Bezier curves, except that instead of 2 added points to work off of, it uses 2 tangents for direction and speed of the curve going in and coming out.
<br/>
After a little tweaking, I added it to my code, so that I only need to do coefficient calculations once, and would need to calculate the powers and multiple them by the coefficients at any point on the curve to get to resulting point...
<br/>
<br/>
(pseudo code)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
(coefficients calculated once and saved)
<br/>
coeff[0] = (2 * (p1 - p2)) + m1 + m2;
<br/>
coeff[1] = (3 * (p2 - p1)) - (2 * m1) - m2;
<br/>
coeff[2] = m1;
<br/>
<br/>
(calculation of curve between [and including] 0 and 1)
<br/>
tSquared = t * t;
<br/>
tCubed = t * tSquared;
<br/>
pResult = (coeff[0] * tCubed) + (coeff[1] * tSquared) + (coeff[2] * t) + p1;
<br/>
<br/>
where...
<br/>
tSquared &amp; tCubed = powers of t
<br/>
   
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then there is the inclusion of the number of points on the curve itself, so just divide that number from 1 for the "dt" (and save with the coefficients), and then (with a value between 0 and the number of points on the curve) multiply that value by "dt" for a time between (and including) 0 and 1, and continue from there.
<br/>
<br/>
I believe I have the calculation correct, so I'll give it a try later on today.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158918 - silent_code - Fri Jun 20, 2008 11:32 pm</h4>
    <div class="postbody"><span class="postbody">I wasn't sure if it was really you who make that earlier thread, but for the heck of it I posted it again. ;^)
<br/>
<br/>
That sounds fine. It's been a few years since I last played with curves in uni, so I'm of no big help right now. But I'd really appreciate to read about the results you'll get. :^)
<br/>
<br/>
Happy programming! :^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159035 - DiscoStew - Tue Jun 24, 2008 5:58 pm</h4>
    <div class="postbody"><span class="postbody">Been busy the past couple of days, but I was able to add it into my project, and to see the results. At the moment, it seems to act somewhat like Bezier Curves, but that is only because of how I'm using them for the time being. The code works at least. It is kinda cool though that the only difference between Hermite Curves and Bezier Curves (in my project) is how the coefficients are calculated, so I basically rolled them together into the same function.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
