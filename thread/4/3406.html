<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Odd Startup Issue - Forced Blank Enabled? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Odd Startup Issue - Forced Blank Enabled?</h2>
<div id="posts">
<div class="post">
    <h4>#20756 - ravenq - Mon May 17, 2004 3:25 am</h4>
    <div class="postbody"><span class="postbody">This may sound like an odd problem, but here goes anyway. I've created a header file for a background image, and included it. My mode is set to 0x0404 (Mode 4 + BG2 Enabled). I then loop through the palette and picture and load them in.
<br/>
<br/>
However, the screen is all white, and when I check DISPCNT, the Forced Blank bit (bit 7) is enabled.
<br/>
<br/>
But... if I comment out the header file (and the transfer of the palette/bg data), then it starts up in the correct mode.
<br/>
<br/>
What would be causing this?<br/>_________________<br/>The Game is Nothing.
<br/>
The Playing of it Everything</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20759 - dagamer34 - Mon May 17, 2004 3:53 am</h4>
    <div class="postbody"><span class="postbody">Do you load the data before you set the mode? That might be the problem.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20761 - ravenq - Mon May 17, 2004 4:02 am</h4>
    <div class="postbody"><span class="postbody">No. Here's a very simplified version of my code:
<br/>
<br/>
This works:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int main()
<br/>
{
<br/>
  *REG_DISPCNT = 0x0404;
<br/>
  while(1);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
This doesn't:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "bgpic.h"
<br/>
<br/>
int main()
<br/>
{
<br/>
  *REG_DISPCNT = 0x0404;
<br/>
  while(1);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
As you can see, the only difference is the include statement. After the first block, REG_DISPCNT = 0x0404, after the second block it's 0x0080.<br/>_________________<br/>The Game is Nothing.
<br/>
The Playing of it Everything</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20763 - tepples - Mon May 17, 2004 4:22 am</h4>
    <div class="postbody"><span class="postbody">First of all, 0x0080 is the default value for DISPCNT, set by BIOS. Forced blanking lets programs build their initial screen data in VRAM without things flickering on screen.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ravenq wrote:</b></span></td> </tr> <tr> <td class="quote">This works:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int main()
<br/>
{
<br/>
  *REG_DISPCNT = 0x0404;
<br/>
  while(1);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
This doesn't:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "bgpic.h"</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
What is the content of bgpic.h ?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20764 - ravenq - Mon May 17, 2004 4:29 am</h4>
    <div class="postbody"><span class="postbody">bgpic.h just has two arrays, one with graphic data and the other with pixel data. I've used gfx2gba to create it with these options:
<br/>
<br/>
gbx2gba bgpic.jpg bgpic.h -w 16 -s 2 -k -8 -o
<br/>
<br/>
Once it's generated that file, I haven't modified it at all.<br/>_________________<br/>The Game is Nothing.
<br/>
The Playing of it Everything</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20777 - sajiimori - Mon May 17, 2004 7:03 pm</h4>
    <div class="postbody"><span class="postbody">Did you say it was a "simplified version" of your code?  Did you actually try compiling and running those simplified versions?  I would not expect them to compile because you are not defining REG_DISPCNT.
<br/>
<br/>
Compile and run a complete but minimal version, then post that in its entirety.  Also, post the relevant portions of the header (with array contents removed), and post the commands you are using to compile.
<br/>
<br/>
Lastly, post the portion of your gba header that you use in the program (such as the definition of REG_DISPCNT).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20811 - ravenq - Tue May 18, 2004 5:41 am</h4>
    <div class="postbody"><span class="postbody">Sorry, REG_DISPCNT _is_ defined in the simplied one, I just hadn't bothered listing it, since it was just assumed ^^ Here is my complete code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include "graphics/credits001.h"
<br/>
#include "types.h"
<br/>
#include "registers.h"
<br/>
<br/>
using namespace std;
<br/>
<br/>
int main(int argc, char** argv)
<br/>
{
<br/>
   u16 x, y;
<br/>
<br/>
   // Put the GBA into bitmap mode
<br/>
   *REG_DISPCNT = 0x0403;
<br/>
<br/>
   // Load the palette for the credits screen
<br/>
   //for ( x = 0; x &lt; 256; x++ )
<br/>
   //{
<br/>
   //   BGPaletteMem[x] = credits001Palette[x];
<br/>
   //}
<br/>
<br/>
   for ( y = 0; y &lt; 160; y++ )
<br/>
   {
<br/>
      for ( x = 0; x &lt; 240; x++ )
<br/>
      {
<br/>
         VideoBuffer[y * 240 + x] = credits001[y * 240 + x];
<br/>
      }
<br/>
   }
<br/>
<br/>
   while ( true );
<br/>
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
And my definitions for the registers:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">static u16vp   VideoBuffer      = (u16vp) 0x6000000;
<br/>
static u16vp   BGPaletteMem   = (u16vp) 0x5000000;
<br/>
static u32vp   REG_DISPCNT      = (u32vp) 0x4000000;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've seemed to have gotten this working by placing the picture header before the other two, but now the picture is corrupted when I load it into the video buffer. If I leave it _after_ the other two header files, I get the Forced Blank problem.<br/>_________________<br/>The Game is Nothing.
<br/>
The Playing of it Everything</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20854 - sajiimori - Tue May 18, 2004 6:48 pm</h4>
    <div class="postbody"><span class="postbody">The "assumed" things are where you can expect your problems to be.  It's pretty common for people to post small bits of code and ask where their problem is, when the reason they couldn't find it themselves was because they assumed the rest was perfect.
<br/>
<br/>
The only additional problem I see here is that your math is wrong for displaying your image.  You seem to be trying to write 1 pixel at a time, but VideoBuffer is a u16*, and besides, you have to write 16 bits at a time to VRAM.
<br/>
<br/>
If you still have trouble, post the rest of the things I asked for -- post the relevant portions of the header (with array contents removed), and post the commands you are using to compile.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20856 - ravenq - Tue May 18, 2004 7:15 pm</h4>
    <div class="postbody"><span class="postbody">Heh, I know assumptions can be problems at times. However, I _know_ I've had the rest working before, it works fine in sprite mode, just with this bitmap mode it has issues.
<br/>
<br/>
Anyway, here is the rest of the relavent code:
<br/>
<br/>
Contents of 'types.h'
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">typedef   unsigned char            u8;
<br/>
typedef const unsigned char         u8c;
<br/>
typedef   unsigned char*            u8p;
<br/>
typedef unsigned volatile char*      u8vp;
<br/>
typedef signed char               s8;
<br/>
typedef const signed char         s8c;
<br/>
<br/>
typedef unsigned short            u16;
<br/>
typedef const unsigned short      u16c;
<br/>
typedef unsigned short*            u16p;
<br/>
typedef unsigned volatile short*   u16vp;
<br/>
typedef signed short            s16;
<br/>
typedef const signed short         s16c;
<br/>
<br/>
typedef unsigned long            u32;
<br/>
typedef const unsigned long         u32c;
<br/>
typedef unsigned long*            u32p;
<br/>
typedef unsigned volatile long*      u32vp;
<br/>
typedef signed long               s32;
<br/>
typedef const signed long         s32c;
<br/>
<br/>
typedef unsigned char            byte;
<br/>
typedef unsigned short            hword;
<br/>
typedef unsigned long            word;
<br/>
typedef unsigned long long         dword;</td> </tr></table><span class="postbody">
<br/>
<br/>
Contents of 'register.h'
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">static u16vp   OAMmem         = (u16vp) 0x7000000;
<br/>
static u16vp   VideoBuffer      = (u16vp) 0x6000000;
<br/>
static u16vp   BackBuffer      = (u16vp) 0x600A000;
<br/>
static u16vp   OAMData         = (u16vp) 0x6010000;
<br/>
static u16vp   BGPaletteMem   = (u16vp) 0x5000000;
<br/>
static u16vp   OBJPaletteMem   = (u16vp) 0x5000200;
<br/>
<br/>
static u32vp   REG_INTERUPT   = (u32vp) 0x3007FFC;
<br/>
<br/>
static u32vp   REG_DISPCNT      = (u32vp) 0x4000000;
<br/>
static u16vp   REG_DISPCNT_L   = (u16vp) 0x4000000;
<br/>
static u16vp   REG_DISPCNT_H   = (u16vp) 0x4000002;
<br/>
static u16vp   REG_DISPSTAT   = (u16vp) 0x4000004;
<br/>
<br/>
static u16vp   REG_VCOUNT      = (u16vp) 0x4000006;
<br/>
<br/>
static u16vp   REG_BG0CNT      = (u16vp) 0x4000008;
<br/>
static u16vp   REG_BG1CNT      = (u16vp) 0x400000A;
<br/>
static u16vp   REG_BG2CNT      = (u16vp) 0x400000C;
<br/>
static u16vp   REG_BG3CNT      = (u16vp) 0x400000E;
<br/>
<br/>
static u16vp   REG_BG0HOFS      = (u16vp) 0x4000010;
<br/>
static u16vp   REG_BG0VOFS      = (u16vp) 0x4000012;
<br/>
static u16vp   REG_BG1HOFS      = (u16vp) 0x4000014;
<br/>
static u16vp   REG_BG1VOFS      = (u16vp) 0x4000016;
<br/>
static u16vp   REG_BG2HOFS      = (u16vp) 0x4000018;
<br/>
static u16vp   REG_BG2VOFS      = (u16vp) 0x400001A;
<br/>
static u16vp   REG_BG3HOFS      = (u16vp) 0x400001C;
<br/>
static u16vp   REG_BG3VOFS      = (u16vp) 0x400001E;
<br/>
<br/>
static u16vp   REG_BG2PA      = (u16vp) 0x4000020;
<br/>
static u16vp   REG_BG2PB      = (u16vp) 0x4000022;
<br/>
static u16vp   REG_BG2PC      = (u16vp) 0x4000024;
<br/>
static u16vp   REG_BG2PD      = (u16vp) 0x4000026;
<br/>
<br/>
static u32vp   REG_BG2X      = (u32vp) 0x4000028;
<br/>
static u16vp   REG_BG2X_L      = (u16vp) 0x4000028;
<br/>
static u16vp   REG_BG2X_H      = (u16vp) 0x400002A;
<br/>
<br/>
static u32vp   REG_BG2Y      = (u32vp) 0x400002C;
<br/>
static u16vp   REG_BG2Y_L      = (u16vp) 0x400002C;
<br/>
static u16vp   REG_BG2Y_H      = (u16vp) 0x400002E;
<br/>
<br/>
static u16vp   REG_BG3PA      = (u16vp) 0x4000030;
<br/>
static u16vp   REG_BG3PB      = (u16vp) 0x4000032;
<br/>
static u16vp   REG_BG3PC      = (u16vp) 0x4000034;
<br/>
static u16vp   REG_BG3PD      = (u16vp) 0x4000036;
<br/>
<br/>
static u32vp   REG_BG3X      = (u32vp) 0x4000038;
<br/>
static u16vp   REG_BG3X_L      = (u16vp) 0x4000038;
<br/>
static u16vp   REG_BG3X_H      = (u16vp) 0x400003A;
<br/>
<br/>
static u32vp   REG_BG3Y      = (u32vp) 0x400003C;
<br/>
static u16vp   REG_BG3Y_L      = (u16vp) 0x400003C;
<br/>
static u16vp   REG_BG3Y_H      = (u16vp) 0x400003E;
<br/>
<br/>
static u16vp   REG_WIN0H      = (u16vp) 0x4000040;
<br/>
static u16vp   REG_WIN1H      = (u16vp) 0x4000042;
<br/>
static u16vp   REG_WIN0V      = (u16vp) 0x4000044;
<br/>
static u16vp   REG_WIN1V      = (u16vp) 0x4000046;
<br/>
static u16vp   REG_WININ      = (u16vp) 0x4000048;
<br/>
static u16vp   REG_WINOUT      = (u16vp) 0x400004A;
<br/>
<br/>
static u32vp   REG_MOSAIC      = (u32vp) 0x400004C;
<br/>
static u32vp   REG_MOSAIC_L   = (u32vp) 0x400004C;
<br/>
static u32vp   REG_MOSAIC_H   = (u32vp) 0x400004E;
<br/>
<br/>
static u16vp   REG_BLDMOD      = (u16vp) 0x4000050;
<br/>
<br/>
static u16vp   REG_COLEV      = (u16vp) 0x4000052;
<br/>
static u16vp   REG_COLEY      = (u16vp) 0x4000054;
<br/>
<br/>
static u32vp   REG_SG10      = (u32vp) 0x4000060;
<br/>
static u16vp   REG_SG10_L      = (u16vp) 0x4000060;
<br/>
static u16vp   REG_SG10_H      = (u16vp) 0x4000062;
<br/>
<br/>
static u16vp   REG_SG11      = (u16vp) 0x4000064;
<br/>
static u16vp   REG_SG20      = (u16vp) 0x4000068;
<br/>
static u16vp   REG_SG21      = (u16vp) 0x400006C;
<br/>
<br/>
static u32vp   REG_SG30      = (u32vp) 0x4000070;
<br/>
static u16vp   REG_SG30_L      = (u16vp) 0x4000070;
<br/>
static u16vp   REG_SG30_H      = (u16vp) 0x4000072;
<br/>
<br/>
static u16vp   REG_SG31      = (u16vp) 0x4000074;
<br/>
static u16vp   REG_SG40      = (u16vp) 0x4000078;
<br/>
static u16vp   REG_SG41      = (u16vp) 0x400007C;
<br/>
<br/>
static u32vp   REG_SGCNT0      = (u32vp) 0x4000080;
<br/>
static u16vp   REG_SGCNT0_L   = (u16vp) 0x4000080;
<br/>
static u16vp   REG_SGCNT0_H   = (u16vp) 0x4000082;
<br/>
<br/>
static u16vp   REG_SGCNT1      = (u16vp) 0x4000084;
<br/>
static u16vp   REG_SGBIAS      = (u16vp) 0x4000088;
<br/>
<br/>
static u32vp   REG_SGWR0      = (u32vp) 0x4000090;
<br/>
static u16vp   REG_SGWR0_L      = (u16vp) 0x4000090;
<br/>
static u16vp   REG_SGWR0_H      = (u16vp) 0x4000092;
<br/>
<br/>
static u32vp   REG_SGWR1      = (u32vp) 0x4000094;
<br/>
static u16vp   REG_SGWR1_L      = (u16vp) 0x4000094;
<br/>
static u16vp   REG_SGWR1_H      = (u16vp) 0x4000096;
<br/>
<br/>
static u32vp   REG_SGWR2      = (u32vp) 0x4000098;
<br/>
static u16vp   REG_SGWR2_L      = (u16vp) 0x4000098;
<br/>
static u16vp   REG_SGWR2_H      = (u16vp) 0x400009A;
<br/>
<br/>
static u32vp   REG_SGWR3      = (u32vp) 0x400009C;
<br/>
static u16vp   REG_SGWR3_L      = (u16vp) 0x400009C;
<br/>
static u16vp   REG_SGWR3_H      = (u16vp) 0x400009E;
<br/>
<br/>
static u32vp   REG_SGFIF0A      = (u32vp) 0x40000A0;
<br/>
static u16vp   REG_SGFIFOA_L   = (u16vp) 0x40000A0;
<br/>
static u16vp   REG_SGFIFOA_H   = (u16vp) 0x40000A2;
<br/>
<br/>
static u32vp   REG_SGFIFOB      = (u32vp) 0x40000A4;
<br/>
static u16vp   REG_SGFIFOB_L   = (u16vp) 0x40000A4;
<br/>
static u16vp   REG_SGFIFOB_H   = (u16vp) 0x40000A6;
<br/>
<br/>
static u32vp   REG_DM0SAD      = (u32vp) 0x40000B0;
<br/>
static u16vp   REG_DM0SAD_L   = (u16vp) 0x40000B0;
<br/>
static u16vp   REG_DM0SAD_H   = (u16vp) 0x40000B2;
<br/>
<br/>
static u32vp   REG_DM0DAD      = (u32vp) 0x40000B4;
<br/>
static u16vp   REG_DM0DAD_L   = (u16vp) 0x40000B4;
<br/>
static u16vp   REG_DM0DAD_H   = (u16vp) 0x40000B6;
<br/>
<br/>
static u32vp   REG_DM0CNT      = (u32vp) 0x40000B8;
<br/>
static u16vp   REG_DM0CNT_L   = (u16vp) 0x40000B8;
<br/>
static u16vp   REG_DM0CNT_H   = (u16vp) 0x40000BA;
<br/>
<br/>
static u32vp   REG_DM1SAD      = (u32vp) 0x40000BC;
<br/>
static u16vp   REG_DM1SAD_L   = (u16vp) 0x40000BC;
<br/>
static u16vp   REG_DM1SAD_H   = (u16vp) 0x40000BE;
<br/>
<br/>
static u32vp   REG_DM1DAD      = (u32vp) 0x40000C0;
<br/>
static u16vp   REG_DM1DAD_L   = (u16vp) 0x40000C0;
<br/>
static u16vp   REG_DM1DAD_H   = (u16vp) 0x40000C2;
<br/>
<br/>
static u32vp   REG_DM1CNT      = (u32vp) 0x40000C4;
<br/>
static u16vp   REG_DM1CNT_L   = (u16vp) 0x40000C4;
<br/>
static u16vp   REG_DM1CNT_H   = (u16vp) 0x40000C6;
<br/>
<br/>
static u32vp   REG_DM2SAD      = (u32vp) 0x40000C8;
<br/>
static u16vp   REG_DM2SAD_L   = (u16vp) 0x40000C8;
<br/>
static u16vp   REG_DM2SAD_H   = (u16vp) 0x40000CA;
<br/>
<br/>
static u32vp   REG_DM2DAD      = (u32vp) 0x40000CC;
<br/>
static u16vp   REG_DM2DAD_L   = (u16vp) 0x40000CC;
<br/>
static u16vp   REG_DM2DAD_H   = (u16vp) 0x40000CE;
<br/>
<br/>
static u32vp   REG_DM2CNT      = (u32vp) 0x40000D0;
<br/>
static u16vp   REG_DM2CNT_L   = (u16vp) 0x40000D0;
<br/>
static u16vp   REG_DM2CNT_H   = (u16vp) 0x40000D2;
<br/>
<br/>
static u32vp   REG_DM3SAD      = (u32vp) 0x40000D4;
<br/>
static u16vp   REG_DM3SAD_L   = (u16vp) 0x40000D4;
<br/>
static u16vp   REG_DM3SAD_H   = (u16vp) 0x40000D6;
<br/>
<br/>
static u32vp   REG_DM3DAD      = (u32vp) 0x40000D8;
<br/>
static u16vp   REG_DM3DAD_L   = (u16vp) 0x40000D8;
<br/>
static u16vp   REG_DM3DAD_H   = (u16vp) 0x40000DA;
<br/>
<br/>
static u32vp   REG_DM3CNT      = (u32vp) 0x40000DC;
<br/>
static u16vp   REG_DM3CNT_L   = (u16vp) 0x40000DC;
<br/>
static u16vp   REG_DM3CNT_H   = (u16vp) 0x40000DE;
<br/>
<br/>
static u16vp   REG_TM0D      = (u16vp) 0x4000100;
<br/>
static u16vp   REG_TM0CNT      = (u16vp) 0x4000102;
<br/>
<br/>
static u16vp   REG_TM1D      = (u16vp) 0x4000104;
<br/>
static u16vp   REG_TM1CNT      = (u16vp) 0x4000106;
<br/>
<br/>
static u16vp   REG_TM2D      = (u16vp) 0x4000108;
<br/>
static u16vp   REG_TM2CNT      = (u16vp) 0x400010A;
<br/>
<br/>
static u16vp   REG_TM3D      = (u16vp) 0x400010C;
<br/>
static u16vp   REG_TM3CNT      = (u16vp) 0x400010E;
<br/>
<br/>
static u16vp   REG_SCD0      = (u16vp) 0x4000120;
<br/>
static u16vp   REG_SCD1      = (u16vp) 0x4000122;
<br/>
static u16vp   REG_SCD2      = (u16vp) 0x4000124;
<br/>
static u16vp   REG_SCD3      = (u16vp) 0x4000126;
<br/>
<br/>
static u32vp   REG_SCCNT      = (u32vp) 0x4000128;
<br/>
static u16vp   REG_SCCNT_L      = (u16vp) 0x4000128;
<br/>
static u16vp   REG_SCCNT_H      = (u16vp) 0x400012A;
<br/>
<br/>
static u16vp   REG_P1         = (u16vp) 0x4000130;
<br/>
static u16vp   REG_P1CNT      = (u16vp) 0x4000132;
<br/>
static u16vp   REG_R         = (u16vp) 0x4000134;
<br/>
static u16vp   REG_HS_CTRL      = (u16vp) 0x4000140;
<br/>
<br/>
static u32vp   REG_JOYRE      = (u32vp) 0x4000150;
<br/>
static u16vp   REG_JOYRE_L      = (u16vp) 0x4000150;
<br/>
static u16vp   REG_JOYRE_H      = (u16vp) 0x4000152;
<br/>
<br/>
static u32vp   REG_JOYTR      = (u32vp) 0x4000154;
<br/>
static u16vp   REG_JOYTR_L      = (u16vp) 0x4000154;
<br/>
static u16vp   REG_JOYTR_H      = (u16vp) 0x4000156;
<br/>
<br/>
static u32vp   REG_JSTAT      = (u32vp) 0x4000158;
<br/>
static u16vp   REG_JSTAT_L      = (u16vp) 0x4000158;
<br/>
static u16vp   REG_JSTAT_H      = (u16vp) 0x400015A;
<br/>
<br/>
static u16vp   REG_IE         = (u16vp) 0x4000200;
<br/>
static u16vp   REG_IF         = (u16vp) 0x4000202;
<br/>
<br/>
static u16vp   REG_WSCNT      = (u16vp) 0x4000204;
<br/>
static u16vp   REG_IME         = (u16vp) 0x4000208;
<br/>
static u16vp   REG_PAUSE      = (u16vp) 0x4000300;</td> </tr></table><span class="postbody">
<br/>
<br/>
The contents of credits001.h (less array contents):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">unsigned u16 credits001[] = { ... };</td> </tr></table><span class="postbody">
<br/>
<br/>
And finally, my original picture, and the output on the GBA:
<br/>
Original:
<br/>
<a href="http://homepage.cs.latrobe.edu.au/tgcrockford/credits001.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
GBA:
<br/>
<a href="http://homepage.cs.latrobe.edu.au/tgcrockford/space.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
Sorry everyline doesn't line up, it's just cut and pasted into the window. I can post my makefile as well if it's needed.
<br/>
<br/>
And finally, I know VideoBuffer is a u16*, but in Mode 3, doesn't a single pixel take 16 bits? 5 red, 5 green, 5 blue and one unused? Perhaps I've got this more wrong than I thought. Oh well. In any case, thank you for your input.<br/>_________________<br/>The Game is Nothing.
<br/>
The Playing of it Everything</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20858 - sajiimori - Tue May 18, 2004 8:04 pm</h4>
    <div class="postbody"><span class="postbody">Your image array isn't const, and it's too big for IWRAM.
<br/>
<br/>
Your register vars are taking up a lot of RAM, multiplied by the number of places you include the header.  Make them const and they'll be like #defines (if you compile as C++).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
And finally, I know VideoBuffer is a u16*, but in Mode 3, doesn't a single pixel take 16 bits?
<br/>
</td> </tr></table><span class="postbody">
<br/>
Yup.  And in mode 4, which is what you said you were using, pixels take 8 bits.  Upon closer inspection, your second version actually does set mode 3 (albeit using magic numbers rather than ORing named values).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#20883 - ravenq - Wed May 19, 2004 1:05 am</h4>
    <div class="postbody"><span class="postbody">Ah, yeah, sorry about that *embarrassed look* I changed it to Mode 3 to ensure it wasn't just the way I was handling the palette data.
<br/>
<br/>
In any case, this should fix it, so thank you for your help Sajiimori!<br/>_________________<br/>The Game is Nothing.
<br/>
The Playing of it Everything</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
