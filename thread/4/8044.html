<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mode7 Demo - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Mode7 Demo</h2>
<div id="posts">
<div class="post">
    <h4>#66131 - sgeos - Sun Jan 08, 2006 12:49 pm</h4>
    <div class="postbody"><span class="postbody">I got rotation and scaling to work with surprisingly little effort.  Somehow centerX, centerY, startX, and startY are giving me trouble.
<br/>
<br/>
I think I'm having trouble with center of rotation, but I'm not sure.  What should the values be?  I'm currently calculating these values using something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">baseCenterX = camera.x;
<br/>
baseCenterY = camera.y;
<br/>
offsetX =Â  viewDistance * cos(camera.rotation) / SCANLINES;
<br/>
offsetY = -viewDistance * sin(camera.rotation) / SCANLINES;
<br/>
<br/>
centerX = baseCenterX + scanline * offsetX;
<br/>
centerY = baseCenterY + scanline * offsetY;
<br/>
startX = SCREEN_WIDTH / 2;
<br/>
startY = scanline;</td> </tr></table><span class="postbody">
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66157 - Cearn - Sun Jan 08, 2006 4:18 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/mode7.htm" target="_blank">Mode 7</a> and <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/mode7_ex.htm" target="_blank">More mode 7</a>. I'd like to help out right here, but it's kinda hard when none of the terms are defined, and almost none of the math there makes much sense to me. Anyway, everything you need is in the pages I mentioned.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66271 - sgeos - Mon Jan 09, 2006 11:49 am</h4>
    <div class="postbody"><span class="postbody">I'll have a look at your pages.  I want to write a mode 7 demo that shows all scanlines at 100% scaling when:
<br/>
A) looking straight down, and
<br/>
B) when at some base viewing height
<br/>
<br/>
Changing the pitch should shear the scaling and change the horizon line.  Changing the viewing height should scale the map accordingly.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66275 - Cearn - Mon Jan 09, 2006 12:30 pm</h4>
    <div class="postbody"><span class="postbody">That sounds like what the second page describes (with correct sprite placement thrown in). Check the demo that goes with the text and yoink what you think you can use.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">I want to write a mode 7 demo that shows all scanlines at 100% scaling when:
<br/>
A) looking straight down, and
<br/>
B) when at some base viewing height
<br/>
</td> </tr></table><span class="postbody">
<br/>
By definition, 100% scaling happens at the focal length, or viewing distance. I've used 128 for that because it makes for a nice division and it looks right (~90? POV), but any one should be possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66319 - DekuTree64 - Mon Jan 09, 2006 7:32 pm</h4>
    <div class="postbody"><span class="postbody">Here's another useful <a class="postlink" href="http://www.permadi.com/tutorial/raycast/" target="_blank">tutorial</a>. It's actually for raycasting, but useful to get a clear picture of the projection plane (where your scale will be 1 to 1) and how to define all the projection attributes.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66584 - jake2431 - Thu Jan 12, 2006 4:45 am</h4>
    <div class="postbody"><span class="postbody">Can the GBA handle ray-tracing? Non- Perpendicular walls and such. I have only seen demos with ray-casting type psuedo 3d. For example can the GBA handle displaying a mountain range?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66590 - poslundc - Thu Jan 12, 2006 6:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jake2431 wrote:</b></span></td> </tr> <tr> <td class="quote">Can the GBA handle ray-tracing? Non- Perpendicular walls and such. I have only seen demos with ray-casting type psuedo 3d. For example can the GBA handle displaying a mountain range?</td> </tr></table><span class="postbody">
<br/>
<br/>
You can write a voxel terrain engine that would run at decent speeds. But it will still use raycasting.
<br/>
<br/>
You won't be able to write an actual raytracing engine that achieves a framerate suitable for animation.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66669 - kusma - Thu Jan 12, 2006 8:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
You won't be able to write an actual raytracing engine that achieves a framerate suitable for animation.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
actually, i've written multiple raytracing-based effects on the gba that runs on a decent speed. ofcourse, there's heavy faking involved, but they still use raytracing. one example is the parallax-mapped fd-plane in "Newton never did this, BITCH".</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66681 - poslundc - Thu Jan 12, 2006 9:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
You won't be able to write an actual raytracing engine that achieves a framerate suitable for animation.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
actually, i've written multiple raytracing-based effects on the gba that runs on a decent speed. ofcourse, there's heavy faking involved, but they still use raytracing. one example is the parallax-mapped fd-plane in "Newton never did this, BITCH".</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I don't know the specifics of your project, but I doubt the GBA is capable of realizing practical raytracing without imposing some pretty severe constraints on the engine.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66682 - lorbar - Thu Jan 12, 2006 10:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
You won't be able to write an actual raytracing engine that achieves a framerate suitable for animation.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
actually, i've written multiple raytracing-based effects on the gba that runs on a decent speed. ofcourse, there's heavy faking involved, but they still use raytracing. one example is the parallax-mapped fd-plane in "Newton never did this, BITCH".</span></td> </tr></table><span class="postbody">
<br/>
<br/>
btw, that was an impressive demo!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66731 - tepples - Fri Jan 13, 2006 6:28 am</h4>
    <div class="postbody"><span class="postbody">I couldn't get "Newton" to run in PogoShell on my F2A card. Does it need to be run as the only thing on the cart?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66771 - kusma - Fri Jan 13, 2006 12:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I couldn't get "Newton" to run in PogoShell on my F2A card. Does it need to be run as the only thing on the cart?</td> </tr></table><span class="postbody">
<br/>
<br/>
i'm not sure if it's possible to run it through pogoshell, i've never really even tested pogoshell. what would be required to make it runable through it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66905 - tepples - Sat Jan 14, 2006 7:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I couldn't get "Newton" to run in PogoShell on my F2A card. Does it need to be run as the only thing on the cart?</td> </tr></table><span class="postbody">
<br/>
i'm not sure if it's possible to run it through pogoshell, i've never really even tested pogoshell. what would be required to make it runable through it?</span></td> </tr></table><span class="postbody">
<br/>
I don't know. Just about every other GBA program that I've tested runs fine. Even the commercial GBA games that I've tried work, although that's more a topic for Pocket Heaven. It might be a timing error in your init code.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66918 - kusma - Sat Jan 14, 2006 12:07 pm</h4>
    <div class="postbody"><span class="postbody">Did you try the F2A-fixed version (http://www.demoscene.no/kusma/newton_f2a-fix.zip) or just the regular one? We originally set the lowest wait-states, as my flash-cart supported it. However, some F2As doesn't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66949 - tepples - Sat Jan 14, 2006 5:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">Did you try the F2A-fixed version (http://www.demoscene.no/kusma/newton_f2a-fix.zip)</td> </tr></table><span class="postbody">
<br/>
Thanks. Works.
<br/>
<br/>
And now back to the show...
<br/>
<br/>
Here's <a class="postlink" href="http://pinocchio.jk0.org/halo2/" target="_blank">Halo 2</a>, a simple demo of mode 7. Who wants the source code?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#67631 - jake2431 - Thu Jan 19, 2006 4:54 pm</h4>
    <div class="postbody"><span class="postbody">I would like the source code. I would like to us mode 7 later and any examples would be cool. BTW, you program makes a creepy music video. It's like you are trying to excape those guys that never stop staring at you, but you can't</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
