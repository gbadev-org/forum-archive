<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBA Appwizard causing trouble - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > GBA Appwizard causing trouble</h2>
<div id="posts">
<div class="post">
    <h4>#7567 - DiscoStew - Fri Jun 20, 2003 2:29 am</h4>
    <div class="postbody"><span class="postbody">I've recently tried using the GBA Appwizard so that I can use Visual C++ 6.0 to check for errors (and also cause it's easier for me), but I just can't seem to compile anything (I use the Pern Project stuff).
<br/>
<br/>
Having a small problem with it actually setting the DevKitAdvance directory when making a new project since it never sets it, but I get around that by adding it myself in the MAK file.
<br/>
<br/>
When compiling the newly made project just to see it it runs as is, I get a bunch of errors, all different when something else is done.
<br/>
<br/>
First, it can't seem to find the "stdlib.h" file that it added to the project, so I copy the file from my VC98 folder into my project folder, but then it brings up this...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">In file included from D:/GBAProjects/Test/Test.cpp:4:
<br/>
D:/GBAProjects/Test/stdlib.h:24:2: #error ERROR: Only Mac or Win32 targets supported!
<br/>
In file included from D:/GBAProjects/Test/Test.cpp:4:
<br/>
D:/GBAProjects/Test/stdlib.h:77: redeclaration of C++ built-in type `wchar_t'
<br/>
NMAKE : fatal error U1077: 'C:\devkitadv\bin\gcc.exe' : return code '0x1'</td> </tr></table><span class="postbody">
<br/>
<br/>
...So I decide to remove it from my project, then the error window shows this...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"> C:\devkitadv\bin\gcc  -I C:\devkitadv\arm-agb-elf\include -I C:\devkitadv\lib\gcc-lib\arm-agb-elf\3.0.2\include -I D:\GBAProjects\Test -mthumb-interwork -c -g -O2 -Wall -fverbose-asm D:\GBAProjects\Test\Test.cpp 
<br/>
------------------------------------------
<br/>
CPP-Sources Compiled
<br/>
------------------------------------------
<br/>
 C:\devkitadv\bin\ld -L C:\devkitadv\lib\gcc-lib\arm-agb-elf\3.0.2\interwork -L C:\devkitadv\arm-agb-elf\lib\interwork -T LinkScript -o Test.elf crt0.o        crtbegin.o    crtend.o      interupt.o    Test.o -lstdc++ -lgcc -lc
<br/>
/cygdrive/c/devkitadv/bin/ld: cannot find -lc
<br/>
NMAKE : fatal error U1077: 'C:\devkitadv\bin\ld.exe' : return code '0x1'</td> </tr></table><span class="postbody">
<br/>
<br/>
First thought in my mind...If it cannot find something, then it doesn't exist, so I remove the "-lc" from the MAK file, then an extremely long list of errors pop up, such as...
<br/>
undefined reference to "atexit"
<br/>
undefined reference to "abort"
<br/>
etc, etc, etc...
<br/>
<br/>
All I want to do is use it, and it won't let me. Any suggestions and/or help would be appreciated.
<br/>
<br/>
PS: I've tried making a project under the "C" drive along with the shown "D" drive on my computer, and the same thing happens.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7570 - tepples - Fri Jun 20, 2003 3:23 am</h4>
    <div class="postbody"><span class="postbody">I don't have VC++ right now, so I can't help you more than the following, but from the error message you gave, I can tell that your header paths incorrectly point to VC++'s Win32/Mac tree. They should point to DevKit Advance's tree.
<br/>
<br/>
The "cannot find -lc" means you're not providing the proper library paths either.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7571 - DiscoStew - Fri Jun 20, 2003 4:29 am</h4>
    <div class="postbody"><span class="postbody">The first error involving the "stdlib.h" file is weird because the GBA AppWizard added it to my project, and the only file close to that name was the file that came with Visual Studio. There was no such file in my DevKitAdvance folder.
<br/>
<br/>
Perhaps I should show you the MAK file that the GBA AppWizard made when I create a new project (without any changes)...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# ------------------------------------------
<br/>
# Title:      Default Makefile for use in VC++
<br/>
# File:          Test.mak
<br/>
# Revision:     01/06/2002
<br/>
# 
<br/>
# Author:      Benjamin D. Hale
<br/>
# Orignally by:         Jaap Suter
<br/>
# Contributed to by:    Christer Andersson
<br/>
# 
<br/>
# Info:              This file is contains the make-instructions
<br/>
#         for the project. Replace DEVDIR with the appropriate
<br/>
#                       base directory for devkitadv. After you make the 
<br/>
#                       needed modifications here rename this file to
<br/>
#                       &lt;project_name&gt;.mak so Visual C++ does not get
<br/>
#                       confused.
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Project name definition makes this whole thing 
<br/>
# a lot easier to use. Only two total modifications
<br/>
# (other than what .o files will be needed)
<br/>
# should be needed to get this working with your
<br/>
# compiler and Visual C++. Replace "Default" with
<br/>
# your project's name.
<br/>
# -------------------------------------------
<br/>
<br/>
PROJECT = Test
<br/>
<br/>
# -------------------------------------------
<br/>
# Define some directories;
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Base Directory for gcc arm-agb-elf replace with 
<br/>
# wherever you put your gba devkitadv files.
<br/>
# -------------------------------------------
<br/>
<br/>
DEVDIR  = ?
<br/>
<br/>
# -------------------------------------------
<br/>
# Source directory (where your project's source files are located.)
<br/>
# -------------------------------------------
<br/>
<br/>
SRCDIR  = D:\GBAProjects\Test\
<br/>
<br/>
# -------------------------------------------
<br/>
# Compiler Directories for binaries, includes and libs.
<br/>
# -------------------------------------------
<br/>
<br/>
CMPDIR  = $(DEVDIR)\bin
<br/>
LIBDIR  = $(DEVDIR)\lib\gcc-lib\arm-agb-elf\3.0.2\interwork
<br/>
LIBDIR2 = $(DEVDIR)\arm-agb-elf\lib\interwork
<br/>
INCDIR  = $(DEVDIR)\lib\gcc-lib\arm-agb-elf\3.0.2\include
<br/>
INCDIR2 = $(DEVDIR)\arm-agb-elf\include
<br/>
<br/>
# -------------------------------------------
<br/>
# END of directory defines
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define what extensions we use;
<br/>
# -------------------------------------------
<br/>
.SUFFIXES : .cpp .c .s
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the flags for the compilers;
<br/>
# -------------------------------------------
<br/>
CFLAGS  = -I $(INCDIR2) -I $(INCDIR) -I $(SRCDIR) -mthumb-interwork -c -g -O2 -Wall -fverbose-asm
<br/>
SFLAGS  = -I $(INCDIR2) -I $(INCDIR) -mthumb-interwork 
<br/>
LDFLAGS = -L $(LIBDIR) -L $(LIBDIR2) -T LinkScript 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the list of all O files;
<br/>
# Just follow the syntax shown to add any 
<br/>
# other objects your project may need to
<br/>
# compile properly. You will need to add 
<br/>
# files to this part to make it work with 
<br/>
# your project add a \ to the end of all o
<br/>
# files except the last one. Like below.
<br/>
# -------------------------------------------
<br/>
<br/>
O_FILES          = \
<br/>
                   crt0.o       \
<br/>
                   crtbegin.o   \
<br/>
                   crtend.o     \
<br/>
                   interupt.o   \
<br/>
                   Test.o
<br/>
<br/>
# -------------------------------------------
<br/>
# There should be no need to modify anything
<br/>
# below here.
<br/>
# -------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the final dependecy;
<br/>
# -------------------------------------------
<br/>
all : $(PROJECT).gba
<br/>
<br/>
# -------------------------------------------
<br/>
# Define the copy from .elf to .bin file
<br/>
# -------------------------------------------
<br/>
$(PROJECT).gba : $(PROJECT).elf
<br/>
   $(CMPDIR)\objcopy -v -O binary $(PROJECT).elf $(PROJECT).gba
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo Done 
<br/>
   -@echo ------------------------------------------ 
<br/>
   
<br/>
# -------------------------------------------
<br/>
# Define the linker instruction;
<br/>
# -------------------------------------------
<br/>
$(PROJECT).elf : $(O_FILES)
<br/>
   $(CMPDIR)\ld $(LDFLAGS) -o $(PROJECT).elf $(O_FILES) -lstdc++ -lgcc -lc  
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo Linking Done
<br/>
   -@echo ------------------------------------------ 
<br/>
<br/>
# -------------------------------------------
<br/>
# Define each compile;
<br/>
# -------------------------------------------
<br/>
{$(SRCDIR)}.cpp.o::
<br/>
   $(CMPDIR)\gcc  $(CFLAGS) $&lt; 
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo CPP-Sources Compiled 
<br/>
   -@echo ------------------------------------------ 
<br/>
<br/>
{$(SRCDIR)}.c.o::
<br/>
   $(CMPDIR)\gcc  $(CFLAGS) $&lt;
<br/>
   -@echo ------------------------------------------
<br/>
   -@echo C-sources Compiled
<br/>
   -@echo ------------------------------------------
<br/>
<br/>
# -------------------------------------------
<br/>
# Define each assemble;
<br/>
# -------------------------------------------
<br/>
{$(SRCDIR)}.s.o:
<br/>
   $(CMPDIR)\as $(SFLAGS) $(SRCDIR)\$*.s -o$@
<br/>
   -@echo ------------------------------------------ 
<br/>
   -@echo ASM-Sources Compiled 
<br/>
   -@echo ------------------------------------------ 
<br/>
   
<br/>
# -------------------------------------------
<br/>
# Any problems with getting this working email
<br/>
# questions to <a href="mailto:whatzdat_pimp@hotmail.com">whatzdat_pimp@hotmail.com</a> .
<br/>
# This was tested on devkitadv r4 and Visual C++ 6
<br/>
# on a p3 450/512mb/Windows XP Pro.
<br/>
# -------------------------------------------
<br/>
# EOF;
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Now, I change DEVDIR to my DevKitAdvance folder. Now, I used both the Crtls and Headers from the Pern's Project as optioned in GBA AppWizard, and it added these following files...
<br/>
<br/>
-Source Files
<br/>
--Test.cpp ------&gt; Entry Point
<br/>
--interupt.cpp
<br/>
-Header Files
<br/>
--gba.h
<br/>
--interupt.h
<br/>
--mathluts.h
<br/>
-Resource Files
<br/>
--Test.mak
<br/>
<br/>
...and my Test.cpp file has these includes as shown...
<br/>
#include &lt;gba.h&gt;
<br/>
#include "stdlib.h"
<br/>
#include &lt;mathluts.h&gt;
<br/>
#include &lt;interupts.h&gt;
<br/>
<br/>
Remember, everything I've shown here was not at all changed by me, but was created by the GBA AppWizard. Perhaps this could light up any ideas. I should expect that not everything should work as its supposed to, but why this????? AARRRRGGGHHH!!!! Perhaps I should contact the author of this.
<br/>
<br/>
Just a note, I'm using DevKitAdvance r4, ot the new beta.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7572 - tepples - Fri Jun 20, 2003 5:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">The first error involving the "stdlib.h" file is weird because the GBA AppWizard added it to my project, and the only file close to that name was the file that came with Visual Studio. There was no such file in my DevKitAdvance folder.</td> </tr></table><span class="postbody">
<br/>
My installation of DevKit Advance R4 shows a file called C:\devkitadv\arm-agb-elf\include\stdlib.h
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
# -------------------------------------------
<br/>
# Any problems with getting this working email
<br/>
# questions to <a href="mailto:whatzdat_pimp@hotmail.com">whatzdat_pimp@hotmail.com</a> .
<br/>
# This was tested on devkitadv r4 and Visual C++ 6
<br/>
# on a p3 450/512mb/Windows XP Pro.
<br/>
# -------------------------------------------
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
Does whatzdat_pimp@h... have an account here on gbadev.org?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
...and my Test.cpp file has these includes as shown...
<br/>
#include &lt;gba.h&gt;
<br/>
#include "stdlib.h"
<br/>
#include &lt;mathluts.h&gt;
<br/>
#include &lt;interupts.h&gt;
<br/>
</td> </tr></table><span class="postbody">
<br/>
Perhaps it should be #include &lt;stdlib.h&gt; instead of #include "stdlib.h" ?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Perhaps I should contact the author of this.</td> </tr></table><span class="postbody">
<br/>
That'd be a good idea.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7573 - DiscoStew - Fri Jun 20, 2003 6:42 am</h4>
    <div class="postbody"><span class="postbody">You are a life saver!!!!!!!!!!!
<br/>
<br/>
After reading your post about "stdlib.h", I went and check my own installation for that, and for some reason, I couldn't even find a "include" folder under my "C:\devkitadv\arm-agb-elf\" folder, so I reinstalled all the files of the DevKitAdvance, and now it seems to be working (at least no error right now). Thanks a lot tepples.
<br/>
<br/>
Why that folder wasn't there before was beyond me. I don't know who "whatzdat_pimp" is. That comment was added from the GBA AppWizard.   ?????<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
