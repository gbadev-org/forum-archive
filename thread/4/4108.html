<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GPS to GBA @ 4800 ? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > GPS to GBA @ 4800 ?</h2>
<div id="posts">
<div class="post">
    <h4>#26658 - Hutch - Wed Sep 22, 2004 8:39 am</h4>
    <div class="postbody"><span class="postbody">Hi, 
<br/>
<br/>
I am just starting at programming the GBA, and my first attempt is a moving map display for my Magellan 310 GPS. All the documentation I have seen shows the slowest predefined serial speed is 9600 baud and my GPS outputs at 4800, does this mean I have to monitor pin 3 for activity and decode ascii on the fly ? 
<br/>
<br/>
Has anyone communicated with the GBA at 4800 baud, and if so can they show me how they did it. ?
<br/>
<br/>
I have experience with C but am a little rusty.
<br/>
<br/>
Mark.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26686 - ampz - Thu Sep 23, 2004 4:04 pm</h4>
    <div class="postbody"><span class="postbody">Well, bit banging is probably the only solution.
<br/>
<br/>
Perhaps there is a chance you can trick the gba to recieve the data using multiplayer mode communication? Set it to 9600bit/s and 16bit transfers.
<br/>
You will get two copies of every recieved bit, and you will get alot of missing stop-bit errors, but you can just ignore thoose, the data should be ok.
<br/>
The special multiplayer handshake might be a problem.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26687 - Hutch - Thu Sep 23, 2004 4:14 pm</h4>
    <div class="postbody"><span class="postbody">From what I have seen, bit banging seems to be the only option. Assuming at 9600 the GBA expects 16 bits, won't that mean the start bit and the first 7 bits will be doubled and the final bit and stop bit will either be on the next word or discarded.. 
<br/>
<br/>
Anybody have a code snippit for tracking the bits as they arrive at the serial in pin ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26692 - SmileyDude - Thu Sep 23, 2004 9:21 pm</h4>
    <div class="postbody"><span class="postbody">on a somewhat related topic, I was thinking about writing some library code for bit-banging the serial port at different rates/formats.  This is really something that's crying out for a somewhat standard library implementation... does anyone have any interest/suggestions for such a beast?<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26706 - Hutch - Fri Sep 24, 2004 5:24 am</h4>
    <div class="postbody"><span class="postbody">Yes please, also I wouldn't mind some code examples of bit banging on the GBA, assembler or C.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26722 - ampz - Fri Sep 24, 2004 1:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hutch wrote:</b></span></td> </tr> <tr> <td class="quote">From what I have seen, bit banging seems to be the only option. Assuming at 9600 the GBA expects 16 bits, won't that mean the start bit and the first 7 bits will be doubled and the final bit and stop bit will either be on the next word or discarded..</td> </tr></table><span class="postbody">
<br/>
<br/>
Ah, but you are forgeting that the GBA expects 16bits, one start bit and one stop bit.
<br/>
The first bit recieved efter the startbit will be a copy of the start bit, after that you get 14 bits representing the first 7bits of the byte transfered (two copies of each bit), and the last bit will be the 8th bit of the byte.
<br/>
Now the GBA will expect a stop-bit, but instead it will get a copy of the last bit, so there will be alot of missing stop-bit errors. But other than that, it should work.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
4800bit/s 8bit:    SS0011223344556677PP
<br/>
9600bit/s 16bit:   S0123456789abcdefP
<br/>
<br/>
S=start bit
<br/>
P=stop bit
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26733 - Hutch - Fri Sep 24, 2004 5:19 pm</h4>
    <div class="postbody"><span class="postbody">Then the gameboy gets the 2 stop bits, won't that stuff up the next byte coming in ? The GPS shoves out 10 bits at a time, the GBA receives 20 bits and only expects 18, what happens to the overflow ? won't it be counted as the first 2 bits of the next byte ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26738 - ampz - Fri Sep 24, 2004 8:47 pm</h4>
    <div class="postbody"><span class="postbody">No. Stop bits are the same as "idle".</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
