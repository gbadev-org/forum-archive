<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Divisions using shifts - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Divisions using shifts</h2>
<div id="posts">
<div class="post">
    <h4>#28330 - isildur - Fri Oct 29, 2004 7:50 pm</h4>
    <div class="postbody"><span class="postbody">I know you can avoid multiplication using shifts and adds like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
// 45 * 100 = 4500;
<br/>
<br/>
(45 &lt;&lt;  6) + (45 &lt;&lt;  5) + (45&lt;&lt;2) = 4500;
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That said, is it possible to perform division using a similar method?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28334 - yaustar - Fri Oct 29, 2004 8:22 pm</h4>
    <div class="postbody"><span class="postbody">yes by using bitshift right ( &gt;&gt; ) but te same limitations apply (only divisions of 2, 4 ,8, etc) and and rounds down to the nearest integer:
<br/>
<br/>
eg 9 &gt;&gt; 2 = 2<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28335 - isildur - Fri Oct 29, 2004 8:25 pm</h4>
    <div class="postbody"><span class="postbody">I know that, ;-).
<br/>
<br/>
I am not talking about divisions by powers of 2. In my example above, I avoid a multiply by adding the result of several shifts. I meant dividing any numbers by using successive shifts added and/or substracted to obtain the result, of course losing the decimal part.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28337 - poslundc - Fri Oct 29, 2004 8:50 pm</h4>
    <div class="postbody"><span class="postbody">If you know the binary representation of the reciprocal then you should be able to formulate it through a series of right-shifts and adds.
<br/>
<br/>
In practice, though, that way isn't very feasible, and even if it were it makes more practical sense to represent the reciprocal as a fixed-point constant and multiply by it.
<br/>
<br/>
In either case, if you aren't dividing by a constant amount (and therefore multiplying by a constant reciprocal) you're pretty much screwed.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28340 - isildur - Fri Oct 29, 2004 9:07 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, I will go with the reciprocal in fixed point format approach, since I can precalculate those in advance for what I need.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
