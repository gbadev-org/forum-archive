<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>A simple one. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > A simple one.</h2>
<div id="posts">
<div class="post">
    <h4>#60172 - lewisrevill - Mon Nov 07, 2005 9:22 pm</h4>
    <div class="postbody"><span class="postbody">I know alot of people are guna hate me for asking this cos it seems like no one likes using it (can someone tell me why)  But can some one tell how to use the 'goto' command in  'C' language and give an example.  Thank you!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60177 - DekuTree64 - Mon Nov 07, 2005 9:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void InfiniteLoop()
<br/>
{
<br/>
thisIsALabelThatYouCanGoto:
<br/>
    goto thisIsALabelThatYouCanGoto;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
I don't use it very often just because I don't need it very often. Almost always there's another way you can get the same effect using if statements or breaking up functions, but in the right situation it can make things a lot simpler.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60181 - tepples - Mon Nov 07, 2005 10:02 pm</h4>
    <div class="postbody"><span class="postbody">In general, C's goto is useful where you would use C++'s exceptions.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60182 - Codax - Mon Nov 07, 2005 10:11 pm</h4>
    <div class="postbody"><span class="postbody">I once thought a lot like you when it came to GOTO statements.  I started with a huge BASIC background in which everything good was done with GOTO.  But as any BASIC programmer will tell you.  A million GOTOs got hella confusing.
<br/>
<br/>
When it comes to Object Oriented (read modern) Programming Techniques GOTOs are not only confusing, but hard to maintain.  Everything GOTOs once did have been replaced with better alternatives
<br/>
<br/>
FOR, WHILE, DO-WHILE, and Function calls are much easier to maintain, and reuse.  They also help prevent useless/redundant labeling and naming.  (ie "Where the hell is does 'GOTO a' actually goto?")  By using function calls you can have coding short cuts that were very difficult to do with GOTO
<br/>
<br/>
ie.  Take adding two numbers.....ANY two numbers (even stored in vars)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void int AddTheseNumbers(int a, int b)
<br/>
{  return a+b; }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
While this may seem trivial, try to add a bunch of numbers that are held in variables or structures.  Now try to do it a bunch of times using only GOTO statements.  Hell try it doing it mutliple times in one statement.  I don't want to even imagine all the code that would have to be written.  
<br/>
<br/>
Hope this clears things up a little.<br/>_________________<br/>Codax
<br/>
Dragon's Den Unlimited
<br/>
<a href="http://www.DrgnDen.com" target="_blank">http://www.DrgnDen.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60185 - poslundc - Mon Nov 07, 2005 11:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">In general, C's goto is useful where you would use C++'s exceptions.</td> </tr></table><span class="postbody">
<br/>
<br/>
Is this the try/throw/catch constructs you're referring to?
<br/>
<br/>
I've never really seen an exception-handling pattern implemented with gotos that really justified their use to me. In practice, they almost always bail out of the program anyway, so they might as well be achieved with a function call or ASSERT-style construct rather than a line jump, which obfuscates the code.
<br/>
<br/>
(Not saying that such a thing couldn't exist... only that I've yet to see it.)
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60187 - Miked0801 - Mon Nov 07, 2005 11:09 pm</h4>
    <div class="postbody"><span class="postbody">Agreed - there are only 2 times I've somewhat condoned a goto to live in my code base.  One was in some extremely tight ARM code that needed to match the underlying assembly very closely and the other was in a deep while(){  while() { switch() - if major error has occured, goto to end of function }}}} type contruct - and even here, refactoring would have been a better solution.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60194 - LOst? - Mon Nov 07, 2005 11:53 pm</h4>
    <div class="postbody"><span class="postbody">I often end up using goto when break won't work, like in this situation:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for (int i = 0; i &lt; 16; i++)
<br/>
{
<br/>
<br/>
for (int j = 0; j &lt; 16; j++)
<br/>
{
<br/>
 if (data [j + i] == EOF)
<br/>
  goto found_end;
<br/>
}
<br/>
<br/>
}
<br/>
<br/>
found_end:;
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><span style="font-style: italic">Exceptions are fun</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60203 - gauauu - Tue Nov 08, 2005 1:37 am</h4>
    <div class="postbody"><span class="postbody">Just out of curiosity, thinking more about tepples' idea of using a goto for exception-style handling, can you use a goto to leave the function you are in and jump into the middle of a different function?
<br/>
<br/>
If so, what happens to your stack?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60208 - tepples - Tue Nov 08, 2005 2:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gauauu wrote:</b></span></td> </tr> <tr> <td class="quote">Just out of curiosity, thinking more about tepples' idea of using a goto for exception-style handling</td> </tr></table><span class="postbody">
<br/>
Clarification: I was thinking of using this more for try/catch side than the throw side.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">can you use a goto to leave the function you are in and jump into the middle of a different function?</td> </tr></table><span class="postbody">
<br/>
<a class="postlink" href="http://www.google.com/search?q=setjmp" target="_blank">Look for setjmp()</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60213 - keldon - Tue Nov 08, 2005 2:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">for (int i = 0; i &lt; 16; i++){
<br/>
   for (int j = 0; j &lt; 16; j++) {
<br/>
      if (data [j + i] == EOF)
<br/>
      goto found_end;
<br/>
   }
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
java removes the goto statement, where your code would be replaced with
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">breakLabel: for ( int i = 0; i &lt; 16; i++ ) {
<br/>
   for (int j = 0; j &lt; 16; j++) {
<br/>
      if (data [j + i] == EOF) break breakLabel;
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
which is equivalent to the C code of:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">innerLoop = TRUE;
<br/>
for ( int i = 0; i &lt; 16 &amp;&amp; innerLoop; i++ ) {
<br/>
   for (int j = 0; j &lt; 16; j++) {
<br/>
      if (data [j + i] == EOF) {
<br/>
         innerLoop = FALSE;
<br/>
         break;
<br/>
      }
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60239 - sgeos - Tue Nov 08, 2005 10:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>lewisrevill wrote:</b></span></td> </tr> <tr> <td class="quote">I know alot of people are guna hate me for asking this cos it seems like no one likes using it (can someone tell me why)  But can some one tell how to use the 'goto' command in  'C' language and give an example.  Thank you!</td> </tr></table><span class="postbody">
<br/>
<br/>
This is basic usage:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">someGotoFunction()
<br/>
{
<br/>
   // Code Here
<br/>
   goto myLabel;
<br/>
<br/>
   // More Code Here
<br/>
<br/>
   myLabel:
<br/>
   // Even More Code Here
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
People don't like gotos because there are almost always better alternatives- loops, function calls and such.  (See other posts.)  When abused, you can use gotos to do horrible, horrible things- like jumping through scope:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">someReallyBadFunction()
<br/>
{
<br/>
   // code
<br/>
   if (aCondition)
<br/>
      goto aLabel;
<br/>
<br/>
   // more code
<br/>
   for (...; ...; ...)
<br/>
   {
<br/>
      while (...)
<br/>
      {
<br/>
         for (...; ...; ...)
<br/>
         {
<br/>
            // code
<br/>
            bLabel:
<br/>
            // more code
<br/>
         }
<br/>
         aLabel:
<br/>
         // even more code
<br/>
<br/>
         if (bCondition)
<br/>
            goto bLabel;
<br/>
         // yet even more code
<br/>
      }
<br/>
      // more code
<br/>
      // this function really needs to be refactored =)
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
What in the world am I trying to do?!  When does one ever need to do something like this?  The answer is never.  Nobody will be able to read your code.  If you ever use gotos, don't jump into loops and don't jump backwards.  Ever.
<br/>
<br/>
The only "proper" use of gotos I've heard of is the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">someFunction()
<br/>
{
<br/>
   if (ERROR == aInit())
<br/>
      goto aLabel;
<br/>
   for (;;)
<br/>
   {
<br/>
      if (ERROR == bInit())
<br/>
         goto bLabel;
<br/>
      for (;;)
<br/>
      {
<br/>
         if (ERROR == cInit())
<br/>
            goto cLabel;
<br/>
         for (;;)
<br/>
         {
<br/>
         }
<br/>
      }
<br/>
   }
<br/>
<br/>
   // Do not execut deepFuntion on ERROR
<br/>
   deepFunction();
<br/>
<br/>
   // uninitialize in reverse order
<br/>
   cLabel:
<br/>
      cUnInit();
<br/>
   bLabel:
<br/>
      bUnInit();
<br/>
   aLabel:
<br/>
      aUnInit();
<br/>
}</td> </tr></table><span class="postbody">
<br/>
Breaking out of nested loops.  I've never had to do it.  Anything that can be done with gotos can be done without them (the above can be done with condition flags).  In the end, if gotos simplify things, you might consider using them.  Keep in mind, however, that gotos are considered evil.  Even if you use them in the rare case that actually does simplify things, you might be looking for a new job. =)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60320 - LOst? - Wed Nov 09, 2005 4:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">I often end up using goto when break won't work, like in this situation:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for (int i = 0; i &lt; 16; i++)
<br/>
{
<br/>
<br/>
for (int j = 0; j &lt; 16; j++)
<br/>
{
<br/>
 if (data [j + i] == EOF)
<br/>
  goto found_end;
<br/>
}
<br/>
<br/>
}
<br/>
<br/>
found_end:;
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Question: Is it better for me to use...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 if (data [j + i] == EOF)
<br/>
 {
<br/>
   j = 16;
<br/>
   i = 16;
<br/>
 }
<br/>
</td> </tr></table><span class="postbody">
<br/>
...rather than the goto statement?<br/>_________________<br/><span style="font-style: italic">Exceptions are fun</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60337 - poslundc - Wed Nov 09, 2005 7:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">Question: Is it better for me to use...
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 if (data [j + i] == EOF)
<br/>
 {
<br/>
   j = 16;
<br/>
   i = 16;
<br/>
 }
<br/>
</td> </tr></table><span class="postbody">
<br/>
...rather than the goto statement?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
That would obfuscate your code, and make its termination conditions unclear. If the range of the outer variable ever has to change, or the loop condition changes, or you change it from incrementing to decrementing, etc. you've opened up a hole for bugs to creep in.
<br/>
<br/>
<span style="font-weight: bold">When choosing between similar coding options, always favour the one that more closely represents the idea of the algorithm.</span>
<br/>
<br/>
Assigning the termination value to your outer variable is a backhanded way of breaking out of the loop. Use the method keldon describes above instead, which I typically expand to make even more obvious:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">bool     bReachedEnd = false;
<br/>
<br/>
for (int i = 0; i &lt; 16; i++)
<br/>
{
<br/>
     for (int j = 0; j &lt; 16; j++)
<br/>
     {
<br/>
          if (data[j + i] == EOF)
<br/>
          {
<br/>
               bReachedEnd = true;
<br/>
               break;
<br/>
          }
<br/>
     }
<br/>
<br/>
     if (bReachedEnd)
<br/>
     {
<br/>
          break;
<br/>
     }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
This code is crystal-clear as to what is happening, and won't break if you need to change your outer loop.
<br/>
<br/>
A goto would compile to slightly more efficient code. But you are not going to gain any overall performance by using it here, unless it's for code that needs to be very close to the machine representation, such as code being compiled as ARM code and being placed in fast RAM.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60349 - sgeos - Wed Nov 09, 2005 1:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">A goto would compile to slightly more efficient code.</td> </tr></table><span class="postbody">
<br/>
In the above case.  Keep in mind that compilers usually can't optimize code that contains gotos.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#60355 - LOst? - Wed Nov 09, 2005 3:46 pm</h4>
    <div class="postbody"><span class="postbody">Thank you poslundc. I will use that technique in the future.<br/>_________________<br/><span style="font-style: italic">Exceptions are fun</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
