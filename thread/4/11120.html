<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Coding Vector Paths - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Coding Vector Paths</h2>
<div id="posts">
<div class="post">
    <h4>#102314 - DiscoStew - Tue Sep 12, 2006 10:03 pm</h4>
    <div class="postbody"><span class="postbody">This is one thing that I would like to figure out how to program, because I'd like to make a demo involving objects moving in a scripted manner that is smooth and not clunky or robotic, but I have no knowledge about them, other than perhaps that they need a position (vector), a direction (vector), and a magnitude.
<br/>
<br/>
What I mean by Vector Paths (if you even call them that) is very much like in Adobe products that have Pen Tools, that allow you to make curved lines out of points, such as the image shown below.
<br/>
<br/>
<a href="http://img67.imageshack.us/my.php?image=vectorpathzs9.png" target="_blank">http://img67.imageshack.us/my.php?image=vectorpathzs9.png</a>
<br/>
<br/>
The only other option for something like this is to split up this scripted path into many many points, each with their own set of information to get from one point to another, but in my mind, that seems like a lot of space to use for just one, when I hope to make a path for a lot (at least hundreds) of individual objects.
<br/>
<br/>
If anyone has any information about how to do this, it would be very much appreciated.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102315 - tepples - Tue Sep 12, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">First see [[<a class="postlink" href="http://en.wikipedia.org/wiki/B%C3%A9zier_curve" target="_blank">B?zier curve</a>]].<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102340 - sajiimori - Wed Sep 13, 2006 1:54 am</h4>
    <div class="postbody"><span class="postbody">Second, see <a class="postlink" href="http://en.wikipedia.org/wiki/Catmull-Rom_spline" target="_blank">Catmull-Rom spline</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102349 - poslundc - Wed Sep 13, 2006 3:50 am</h4>
    <div class="postbody"><span class="postbody">Also see <a class="postlink" href="http://www.cse.unsw.edu.au/~lambert/splines/natcubic.html" target="_blank">Natural Cubic splines</a>.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102352 - sajiimori - Wed Sep 13, 2006 4:39 am</h4>
    <div class="postbody"><span class="postbody">Huh, I like those even better.  Just a bit smoother around the control points.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102953 - DiscoStew - Mon Sep 18, 2006 4:47 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the suggestions everyone. I'll take a look at them.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102960 - shen3 - Mon Sep 18, 2006 7:07 am</h4>
    <div class="postbody"><span class="postbody">you could also try an array of points for the flight path.
<br/>
<br/>
If you give each array a name, or have an array of these flight path arrays, each monster could be assigned a path, maybe with an x + y offset.
<br/>
<br/>
In any case, I would be very interested to hear what you come up with, and any free tools you develop to help you create + manage paths for your game.
<br/>
<br/>
I would love to add some predefined movements to my shoot em up, but am too busy to do the coding required to implement any of the ideas I have had.
<br/>
<br/>
Shen</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102962 - DiscoStew - Mon Sep 18, 2006 7:31 am</h4>
    <div class="postbody"><span class="postbody">The whole array-of-points idea was what I was going to do in the first place, until I realized that in order for the path to look smooth, I'd have to have a large array for a single path, and because of the hundreds of paths I plan to make, I could see that getting mighty hefty.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103002 - poslundc - Mon Sep 18, 2006 4:30 pm</h4>
    <div class="postbody"><span class="postbody">The biggest problem with splines on the GBA tend to be in the initialization of them, in the determination of coefficients. You are at your best if your splines are either totally static within a scene/level/map (in which case you can write a tool to pre-calculate them for you), or if you can determine them when your scene/level/map is initializing, and calculate the coefficients during a blackout.
<br/>
<br/>
I sometimes calculate simple splines on the fly, but they are usually only three or four data points large. I wouldn't ever want to try to do more than a couple in a single frame.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103090 - sgeos - Tue Sep 19, 2006 4:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">You are at your best if your splines are either totally static within a scene/level/map (in which case you can write a tool to pre-calculate them for you)</td> </tr></table><span class="postbody">
<br/>
Precalculation is very useful.
<br/>
<br/>
&gt; shen3
<br/>
If you want to do an array of points, I'd use a PC side tool to precalculate a pretty path.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103114 - keldon - Tue Sep 19, 2006 9:59 am</h4>
    <div class="postbody"><span class="postbody">Although your paths may be smooth it doesn't mean that the movement will. You could end up with a lovely path and it still appears robotic because of the changes in speed between each curve, so just be aware of that when you are making them.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103242 - shen3 - Wed Sep 20, 2006 6:19 am</h4>
    <div class="postbody"><span class="postbody">Steos said:
<br/>
Precalculation is very useful. 
<br/>
<br/>
&gt; shen3 
<br/>
If you want to do an array of points, I'd use a PC side tool to precalculate a pretty path. 
<br/>
<br/>
I reply;
<br/>
<br/>
Yeah, I agree. Then you still end up with some arrays of points. I guess if you could do some compression, instead giving a dx,dy and the number of times to apply the movement or something. 
<br/>
<br/>
Then a movement across the whole screen might be (-1,0,260) meaning move 1 to the left, and do it 260 times. Or, if you do as I do and use fixed point math for positioning, and treat each pixel as having 256 segments (-256,0,260). Moving at half a pixel per turn would be (-128,0,520).
<br/>
<br/>
Doing this requires either writing some pc application to draw + record flight paths from mouse movements, or even worse, to draw and record flight paths from vector drawing commands + spline + beizer curves + whatever else.
<br/>
<br/>
Another option I thought about would be to have a starting point for each enemy, and then a bunch of functions for different movement patterns. This might take up less ram space, but is still a pain to write, and making a unique path is a lot of work for little gain. 
<br/>
<br/>
However, that is the method I used for my game "S World 3". The aliens have about 5 or 6 different possible movement patterns (straight line, curvey, move + hover) plus a few special movement patterns for the boss monsters.
<br/>
<br/>
The monsters within a level just get generated randomly, based on some parameters for total monsters per level, start generation rate (monsters / minute) and monster generation accelleration (monsters / minute / minute)
<br/>
<br/>
It would be nice to have some rtype style levels where every monster is placed + given a flight path, but that would require another application on top of the flight path designer, to create levels + place enemies + assign flight path per enemy.
<br/>
<br/>
If someone writes or finds such a thing that can be setup for the gba or ds screen size and is $0, I'm interested in hearing about it.
<br/>
<br/>
link to S World 3 <a href="http://shen.mansell.tripod.com/games/gba/sworld3/sworld3.html" target="_blank">http://shen.mansell.tripod.com/games/gba/sworld3/sworld3.html</a>
<br/>
<br/>
Shen</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103277 - sgeos - Wed Sep 20, 2006 3:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shen3 wrote:</b></span></td> </tr> <tr> <td class="quote">Steos said:</td> </tr></table><span class="postbody">
<br/>
sgeos (lower case, with a 'g'); not very important
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shen3 wrote:</b></span></td> </tr> <tr> <td class="quote">Yeah, I agree. Then you still end up with some arrays of points. I guess if you could do some compression, instead giving a dx,dy and the number of times to apply the movement or something. 
<br/>
<br/>
Then a movement across the whole screen might be (-1,0,260) meaning move 1 to the left, and do it 260 times.</td> </tr></table><span class="postbody">
<br/>
That strikes me as a strange way of doing things.  Although I suppose they are really versions of the same thing if you use fixed point values.  I'd personally do something like this if I wanted to move to absolute points:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const Point myAbsolutePath[] =
<br/>
{
<br/>
  {7, 7},
<br/>
  {14, 11},
<br/>
  {21, 13},
<br/>
  {28, 14},
<br/>
  {-1, -1}  // DONE; this really wants to be a macro (use out of bounds value)
<br/>
};</td> </tr></table><span class="postbody">
<br/>
<br/>
If you want relative movement:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const Point myRelativePath[] =
<br/>
{
<br/>
  {7, 7},
<br/>
  {7, 4},
<br/>
  {7, 2},
<br/>
  {7, 1},
<br/>
  {0, 0}  // DONE; this really wants to be a macro (use meaningless value)
<br/>
};</td> </tr></table><span class="postbody">
<br/>
<br/>
Whether you use absolute or relative movement really depends on what you want to do.  If you really want to use 3 values, I'd use x, y and frames.  If frames == 17, then we reach the control point 17 frames from now.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const TimedPoint myTimedRelativePath[] =
<br/>
{
<br/>
  {7, 7, 60},
<br/>
  {7, 4, 50},
<br/>
  {7, 2, 40},
<br/>
  {7, 1, 30},
<br/>
  {0, 0, 0}  // DONE; this really wants to be a macro (use meaningless value)
<br/>
};</td> </tr></table><span class="postbody">
<br/>
<br/>
Arrays of control points are easy to implement and understand.  That is why I am advocating them.  If your engine handles them, you can write fancy spline tools without having to change your data format, although you might want to.  If you want really smooth paths, your LUTs are going to be large. (For some definitions of large =)
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106697 - Yare - Sun Oct 22, 2006 7:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">because I'd like to make a demo involving objects moving in a scripted manner that is smooth and not clunky or robotic</td> </tr></table><span class="postbody">
<br/>
<br/>
Flocking.
<br/>
<a href="http://www.red3d.com/cwr/boids/" target="_blank">http://www.red3d.com/cwr/boids/</a>
<br/>
<br/>
Steering.
<br/>
<a href="http://www.red3d.com/cwr/steer/" target="_blank">http://www.red3d.com/cwr/steer/</a>
<br/>
<br/>
What you want could be accomplished with a combination of steering behaviors.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
