<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>sprites and screen position problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > sprites and screen position problem</h2>
<div id="posts">
<div class="post">
    <h4>#21378 - dXtr - Fri May 28, 2004 10:55 am</h4>
    <div class="postbody"><span class="postbody">Hi. I got this problem in a game that I together with some classmates are doing. It's a sidescrolling game and the problem occurs when the enemys passes screeen x (and maybe y... haven't test that one yet) coordinate 0 so it's -1 or other minus value. then they sprite just disappears directly instead of disappearing pixel by pixel. How do you fix this?
<br/>
<br/>
Explanation ascii image ;D
<br/>
<br/>
x pos = 0
<br/>
-----------
<br/>
| o
<br/>
|-|-
<br/>
|/ \
<br/>
<br/>
x pos = -1
<br/>
------------
<br/>
|
<br/>
| * sprite gone *
<br/>
|
<br/>
<br/>
<br/>
how I want it to be:
<br/>
x pos = 0
<br/>
-----------
<br/>
| o
<br/>
|-|-
<br/>
|/ \
<br/>
<br/>
x pos = -1
<br/>
-----------
<br/>
|o
<br/>
||-
<br/>
| \
<br/>
<br/>
x pos = -2
<br/>
-----------
<br/>
|
<br/>
|-
<br/>
|\
<br/>
<br/>
and so on..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21379 - DigitalChaos - Fri May 28, 2004 11:06 am</h4>
    <div class="postbody"><span class="postbody">You're gonna have to create different sprites for each position you want to show. And you're gonna want to make a state for each sprite.
<br/>
<br/>
<br/>
<br/>
x pos = 0, state 0
<br/>
-----------
<br/>
| o
<br/>
|-|-
<br/>
|/ \ 
<br/>
<br/>
<br/>
for that one, you'll have full body sprite set at 0 on x axis and it's in it's first state which it will be in the entire time it's on screen until it reaches the edges. 
<br/>
<br/>
x pos = -1, state 1
<br/>
-----------
<br/>
|o
<br/>
||-
<br/>
| \ 
<br/>
<br/>
<br/>
when you are at state 0 and you move left, change the sprite to state 1 sprite and move position to 0. When in this state, if they move left again, go to state 2, or if they move right, go to state 0.
<br/>
<br/>
x pos = -2, state 2
<br/>
-----------
<br/>
|
<br/>
|-
<br/>
|\ 
<br/>
<br/>
This sprite would show when you move left from state 1. 
<br/>
<br/>
<br/>
I'm pretty new to all this myself, but that should work in theory.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21380 - wintermute - Fri May 28, 2004 11:35 am</h4>
    <div class="postbody"><span class="postbody">digitalChaos: don't talk complete and utter nonsense.
<br/>
<br/>
the sprite is probably disappearing because you haven't limited the x co-ordinate to 9 bits when setting the appropriate attribute.
<br/>
<br/>
Sprite[n].attr1 = (Sprite[n].attr1 &amp; 0xfe00) | (x &amp; 0x01ff);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21381 - dXtr - Fri May 28, 2004 11:37 am</h4>
    <div class="postbody"><span class="postbody">yeah that could work.. only problem is that then I need to create
<br/>
32 sprites per animation frame?
<br/>
<br/>
Maybe I could do it all with code.. but wouldn't that steal some cpu?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21382 - dXtr - Fri May 28, 2004 11:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">digitalChaos: don't talk complete and utter nonsense.
<br/>
<br/>
the sprite is probably disappearing because you haven't limited the x co-ordinate to 9 bits when setting the appropriate attribute.
<br/>
<br/>
Sprite[n].attr1 = (Sprite[n].attr1 &amp; 0xfe00) | (x &amp; 0x01ff);</td> </tr></table><span class="postbody">
<br/>
<br/>
yeah I guess thats the reason to and when I hit -1 it all gets f**ed up cuz of the representation of a minus value in binary
<br/>
<br/>
edit:
<br/>
sorry, didn't read through the whole message =/
<br/>
now I have.. and it works now!! thanks! ^_^</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21386 - Akolade - Fri May 28, 2004 3:41 pm</h4>
    <div class="postbody"><span class="postbody">Ya it will do that for X and Y.
<br/>
The pernproject tutorials explain it fairly well.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21389 - DigitalChaos - Fri May 28, 2004 5:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">digitalChaos: don't talk complete and utter nonsense.
<br/>
<br/>
the sprite is probably disappearing because you haven't limited the x co-ordinate to 9 bits when setting the appropriate attribute.
<br/>
<br/>
Sprite[n].attr1 = (Sprite[n].attr1 &amp; 0xfe00) | (x &amp; 0x01ff);</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
oops... :(
<br/>
<br/>
it was 3:45am and it sounded reasonable at the time</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21401 - dagamer34 - Fri May 28, 2004 8:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">digitalChaos: don't talk complete and utter nonsense.
<br/>
<br/>
the sprite is probably disappearing because you haven't limited the x co-ordinate to 9 bits when setting the appropriate attribute.
<br/>
<br/>
Sprite[n].attr1 = (Sprite[n].attr1 &amp; 0xfe00) | (x &amp; 0x01ff);</td> </tr></table><span class="postbody">
<br/>
<br/>
No need to attack people. Just point out their mistakes. You never know, he might have been drunk. :)<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21410 - sajiimori - Fri May 28, 2004 9:56 pm</h4>
    <div class="postbody"><span class="postbody">If somebody is talking nonsense, it's ok to point that out without trying to make it sound nice.  If you carefully read what wm said, you'll notice that he didn't attack dC at all -- he just said stop doing it, and I agree that he should.
<br/>
<br/>
Sometimes I get carried away and think I know something about everything, and end up posting a response to a question that I know nothing about.  If I'm talking such nonsense that somebody has to point it out to me forcefully, that's a failure for me, and that person is doing me a big favor.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21427 - DigitalChaos - Sat May 29, 2004 1:10 am</h4>
    <div class="postbody"><span class="postbody">It's alright, I gotta learn somehow. Might as well learn from people who know what they're talking about :p</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21458 - tepples - Sat May 29, 2004 3:56 pm</h4>
    <div class="postbody"><span class="postbody">When you set a sprite to show at y=-1 or x=-1 without masking off the upper bits of the position, you're screwing up the other bits in the same attribute. This may cause your sprite to disappear.
<br/>
<br/>
To set a sprite to show at x=-1, set it to x=511.
<br/>
<br/>
To set a sprite to show at y=-1, set it to y=255.
<br/>
<br/>
Read the <a class="postlink" href="http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#OAM%20%28sprites%29" target="_blank">CowBite spec's description of OAM</a> for more information.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
