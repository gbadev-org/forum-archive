<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>#FF00FF to gba color. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > #FF00FF to gba color.</h2>
<div id="posts">
<div class="post">
    <h4>#47960 - QuantumDoja - Fri Jul 15, 2005 11:45 am</h4>
    <div class="postbody"><span class="postbody">Hi, I have "Fuchsia" a purpleish color that is:
<br/>
#FF00FF in web colors
<br/>
255 - red
<br/>
0 - green
<br/>
255 - blue
<br/>
16711935 as a microsoft access variable
<br/>
<br/>
I want to convert to a gba color, but end up with: 0x2108, and in the palette it is a dark grey, here is my code:
<br/>
<br/>
its vb.net
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
Public Function GetGBAColor(ByVal strWebSafe) As Integer
<br/>
        Dim r, g, b
<br/>
        Dim i As Integer
<br/>
<br/>
        r = Mid(strWebSafe, 1, 2)
<br/>
        g = Mid(strWebSafe, 3, 2)
<br/>
        b = Mid(strWebSafe, 5, 2)
<br/>
        Dim rc As Integer
<br/>
        Dim gc As Integer
<br/>
        Dim bc As Integer
<br/>
<br/>
        For i = 0 To 255
<br/>
            If Hex$(i) = r Then
<br/>
                rc = i
<br/>
            End If
<br/>
        Next
<br/>
        For i = 0 To 255
<br/>
            If Hex$(i) = g Then
<br/>
                gc = i
<br/>
            End If
<br/>
        Next
<br/>
        For i = 0 To 255
<br/>
            If Hex$(i) = b Then
<br/>
                bc = i
<br/>
            End If
<br/>
        Next
<br/>
<br/>
        rc = rc / 11 + 8
<br/>
        gc = gc / 11 + 8
<br/>
        bc = bc / 11 + 8
<br/>
<br/>
        GetGBAColor = rc + (32 * gc) + (1024 * bc)
<br/>
    End Function
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47961 - QuantumDoja - Fri Jul 15, 2005 11:56 am</h4>
    <div class="postbody"><span class="postbody">I just walked through my code and notieced it want returning the integer value from a hex code, probably why its not working...sorry.<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47963 - QuantumDoja - Fri Jul 15, 2005 12:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Public Function GetGBAColor(ByVal strWebSafe) As Integer
<br/>
        Dim r, g, b
<br/>
        Dim i As Integer
<br/>
<br/>
        r = Mid(strWebSafe, 1, 2)
<br/>
        g = Mid(strWebSafe, 3, 2)
<br/>
        b = Mid(strWebSafe, 5, 2)
<br/>
        Dim rc As Integer
<br/>
        Dim gc As Integer
<br/>
        Dim bc As Integer
<br/>
<br/>
        For i = 0 To 255
<br/>
            If UCase(Hex$(i).ToString) = UCase(r) Then
<br/>
                rc = i
<br/>
            End If
<br/>
        Next
<br/>
        For i = 0 To 255
<br/>
            If UCase(Hex$(i).ToString) = UCase(g) Then
<br/>
                gc = i
<br/>
            End If
<br/>
        Next
<br/>
        For i = 0 To 255
<br/>
            If UCase(Hex$(i).ToString) = UCase(b) Then
<br/>
                bc = i
<br/>
            End If
<br/>
        Next
<br/>
<br/>
        rc = rc / 11 + 8
<br/>
        gc = gc / 11 + 8
<br/>
        bc = bc / 11 + 8
<br/>
<br/>
        GetGBAColor = rc + (32 * gc) + (1024 * bc)
<br/>
    End Function
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47964 - NoMis - Fri Jul 15, 2005 12:04 pm</h4>
    <div class="postbody"><span class="postbody">The GBA uses a different color format as your PC. A color is made up of a 16bit integer that has 5 bits each color plus an unused bit. So every color has a range of 0 to 31 giving you 32,768 as the maximal number of colors 
<br/>
<br/>
Red begins at the lowest order bit, followed by green than comes blue.
<br/>
<br/>
The following macro simplifies the use of colors.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define RGB16(r,g,b)  (((b)&lt;&lt;10)+((g)&lt;&lt;5)+(r))</td> </tr></table><span class="postbody">
<br/>
<br/>
Your color is composed by blue and red colors and with the use of that macro it would look like this.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int colorvalue = RGB16(31,0,31);</td> </tr></table><span class="postbody">
<br/>
<br/>
EDIT:
<br/>
<br/>
With that knowlege you can easily recalculate the range of colors. 
<br/>
A color Value of 255 would be 31 on the GBA so you would have to calculate like this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ColorRGBGBA = 31/255 * ColorRGBPC</td> </tr></table><span class="postbody">
<br/>
<br/>
NoMis<br/>_________________<br/><span style="font-style: italic"><a class="postlink" href="http://www.gamedev.at/" target="_blank">www.gamedev.at</a></span> - The austrian gamedev site
<br/>
<span style="font-style: italic"><a class="postlink" href="http://hde.gamedev.at/" target="_blank">hde.gamedev.at</a></span> - The Handheld Dev Env plugins for Eclipse</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47965 - Mighty Max - Fri Jul 15, 2005 12:13 pm</h4>
    <div class="postbody"><span class="postbody">Hey there,
<br/>
<br/>
I just noticed your way to receive the int values from the hex string. That is a very slow method to, you might want to change it a bit.
<br/>
<br/>
I don't know the keywords for basic (ill use replacements - its too long ago ;) ), but you might change it a bit like
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
value = 0 
<br/>
for charpos = 1 to &lt;maxhexchars&gt; do
<br/>
  if ( CharAt(charpos)&lt;"A") then
<br/>
    value = value * 16 + ASCIICODE(CharAt(charpos)) - ASCIICODE("0")
<br/>
  else
<br/>
    value = value * 16 + ASCIICODE(CharAt(charpos)) - ASCIICODE("A") + 10
<br/>
  endif
<br/>
next
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That removes unneccesary loops.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47966 - tepples - Fri Jul 15, 2005 1:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NoMis wrote:</b></span></td> </tr> <tr> <td class="quote">With that knowlege you can easily recalculate the range of colors. 
<br/>
A color Value of 255 would be 31 on the GBA so you would have to calculate like this.
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ColorRGBGBA = 31/255 * ColorRGBPC</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
That's true on the Game Boy Player and Nintendo DS, but the GBA and GBA SP displays are so dark that anything from 0-7 will appear black in most lighting situations. The first <span style="font-style: italic">Castlevania</span> game for GBA didn't take this into account, which is why it looks so dark on anything but a Game Boy Player or a Nintendo DS. I'm about 99 percent sure that the "rc = rc / 11 + 8" is an attempt to compensate for this.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
