<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>clock() not functioning?!?! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > clock() not functioning?!?!</h2>
<div id="posts">
<div class="post">
    <h4>#12680 - IsmStudios - Sat Nov 22, 2003 2:50 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I'm currently trying to finish up my first starfield for the gameboy advance and I'm trying to write code that forces all the frames to run at the same speed.
<br/>
<br/>
I noticed that stdlib.h &amp; time.h so I decided to use some of the standard libraries till I figured out that clock() wasn't working. It's obviously there because the source file links...
<br/>
<br/>
Can anyone help me? What do the professionals do to regulate their frame-rate?
<br/>
<br/>
Lewis Moronta
<br/>
Interactive Designer
<br/>
<a href="http://www.ismstudios.com" target="_blank">www.ismstudios.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12681 - tepples - Sat Nov 22, 2003 3:14 pm</h4>
    <div class="postbody"><span class="postbody">Professionals wait for the vblank. There are two ways to do this: spinning on VCOUNT or sleeping until the vblank interrupt. Until you learn more, you will want to spin on VCOUNT.
<br/>
<br/>
Is your starfield running at 60fps or faster? The explanation of the technique to limit at less than 60fps is more complicated than the explanation of the technique to limit at more than 60fps.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12690 - IsmStudios - Sat Nov 22, 2003 9:29 pm</h4>
    <div class="postbody"><span class="postbody">Cool--I am now using a waitVSync function and it's working great... are you saying that the resolution on mode 4 runs @ 60 hertz? So if my game is running slower than this, is it possible to wait for two vBlanks (by calling the function twice) to cap it @ 30fps?<br/>_________________<br/>Lewie [m80]
<br/>
Interactive Designer
<br/>
<a href="http://www.ismstudios.com" target="_blank">www.ismstudios.com</a>
<br/>
<a href="http://www.m80produxions.com" target="_blank">www.m80produxions.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12691 - IsmStudios - Sat Nov 22, 2003 9:33 pm</h4>
    <div class="postbody"><span class="postbody">Any word on the clock function? I'm using the latest version of gcc.<br/>_________________<br/>Lewie [m80]
<br/>
Interactive Designer
<br/>
<a href="http://www.ismstudios.com" target="_blank">www.ismstudios.com</a>
<br/>
<a href="http://www.m80produxions.com" target="_blank">www.m80produxions.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#12693 - tepples - Sat Nov 22, 2003 10:11 pm</h4>
    <div class="postbody"><span class="postbody">It's not GCC's responsibility to add clock(). It's the C library's. The GBA port of Newlib doesn't do a lot of the hardware-specific stuff such as clock() that requires calling down to the bare hardware.
<br/>
<br/>
All GBA display modes run at 16777216/280896 Hz, or about 59.73 Hz. The difference is negligible except in communication or sound code.
<br/>
<br/>
In order to lock the speed below 60 Hz, you're going to have to split processing over multiple frames, waiting for vblank after each frame. For example, draw half the stars in one frame and half the stars in the other.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
