<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>hilo :) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > hilo :)</h2>
<div id="posts">
<div class="post">
    <h4>#6062 - wiz - Fri May 16, 2003 12:57 pm</h4>
    <div class="postbody"><span class="postbody">Just a quick message, my 1st message on here with a 1st question.
<br/>
<br/>
Having recently read through a few tutorials I have been playing in mode 4.
<br/>
<br/>
I would like to know how to extract the high and low values from a u16.
<br/>
<br/>
if anyone knows of a good resource for learning binary stuff then please let me see the link :)
<br/>
<br/>
Thanks very kindly</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6065 - gb_feedback - Fri May 16, 2003 1:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I would like to know how to extract the high and low values from a u16. </td> </tr></table><span class="postbody">
<br/>
<br/>
Something like:
<br/>
<br/>
u8 lowValue = (u8) (wordValue &amp; 0xff);
<br/>
u8 highValue = (u8) ((wordValue &gt;&gt; 8) &amp; 0xff)
<br/>
<br/>
You'd probably need the casts to avoid a warning, if lowValue and highValue are actually u8's.<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6100 - wiz - Sat May 17, 2003 3:47 am</h4>
    <div class="postbody"><span class="postbody">Great thanks for that, worked fine, now that leads to my next question.
<br/>
<br/>
what exactly does "&amp; 0xff" do / mean?
<br/>
<br/>
I'll see if I can find some help on working with binary but if anyone does know of a great resource then please let me know :D
<br/>
<br/>
Thank you very much for the reply! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6105 - DracoX5 - Sat May 17, 2003 5:17 am</h4>
    <div class="postbody"><span class="postbody">The &amp; operator ANDs numbers together. In other words, it compares the bits of two numbers and for every bit that is 1 in both numbers, there will be a 1 in the new number. If either one of the two bits is a 0 (or both are), it'll give a 0 for that bit.
<br/>
<br/>
Example:
<br/>
001011010 = 0x5A
<br/>
&amp;
<br/>
001101000 = 0x68
<br/>
_________    ____
<br/>
001001000 = 0x48
<br/>
<br/>
0x5A &amp; 0x68 = 0x48
<br/>
<br/>
All "&amp; 0xff" does is preserve the lower byte and get rid of the higher byte.
<br/>
<br/>
Other operators you should know are |, ^, ~, &lt;&lt;, and &gt;&gt;. You should be able to find these in any respectable C tutorial. I learned from books, so I don't have any links for you. Sorry! Just try Google, and you should find some, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6108 - wiz - Sat May 17, 2003 6:05 am</h4>
    <div class="postbody"><span class="postbody">fantastic!
<br/>
<br/>
Makes perfect sense now, I'll be sure to look at some c tutorials in that area tonight (I know how to make classes, functions etc so Im not that bad.  I have just never had the need to do all the low level stuff before getting in to the gba)
<br/>
<br/>
thanks again, you guys are great :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6109 - niltsair - Sat May 17, 2003 6:32 am</h4>
    <div class="postbody"><span class="postbody">Quickly here's the description :
<br/>
<br/>
val1 &amp; val2 (AND) Keep only the bit that are in both value
<br/>
val1 | val2  (OR)   Keep the bits that are in either value
<br/>
val1 ^ val2 (XOR) Keep the bits that are either in one value or the other. If a bit is present in both, then it'S equl to 0.
<br/>
~val (COMPLEMENT) Invert the value of each bit.
<br/>
val &lt;&lt; X (LSHIFT) Shift every bit to the left by X
<br/>
val &gt;&gt; X (RSHIT) Shift every bit to the right by X
<br/>
<br/>
(OR)
<br/>
0011010
<br/>
1001001
<br/>
-----------
<br/>
1011011
<br/>
<br/>
(XOR)
<br/>
0011010
<br/>
1001001
<br/>
-----------
<br/>
1010011
<br/>
<br/>
(COMPLEMENT)
<br/>
0011010
<br/>
-----------
<br/>
1100101
<br/>
<br/>
(LSHIFT by 3)
<br/>
0011010
<br/>
-----------
<br/>
1010000
<br/>
<br/>
(RSHIFT by 3)
<br/>
0011010
<br/>
-----------
<br/>
0000011</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6141 - wiz - Sun May 18, 2003 5:09 am</h4>
    <div class="postbody"><span class="postbody">Hi again,
<br/>
<br/>
I thought I understood the reply about the "&amp; 0xff" part..
<br/>
<br/>
having thought about it, this wouldnt do anything to a byte?
<br/>
<br/>
Sorry if I missed something, but I guess I dont understand why it is included within:
<br/>
<br/>
u8 lowValue = (u8) (wordValue &amp; 0xff); 
<br/>
u8 highValue = (u8) ((wordValue &gt;&gt; 8) &amp; 0xff) 
<br/>
<br/>
Why not just
<br/>
<br/>
u8 lowValue = (u8) (wordValue); 
<br/>
u8 highValue = (u8) ((wordValue &gt;&gt; 8)) 
<br/>
<br/>
?
<br/>
<br/>
Thanks again</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6144 - niltsair - Sun May 18, 2003 5:41 am</h4>
    <div class="postbody"><span class="postbody">Ok, a Word value is 16bits (2Byte)
<br/>
<br/>
Can want to retrieve the HighWord and LowWord, independantly.
<br/>
<br/>
So if you have this value :
<br/>
<br/>
1111 0000 1010 1100
<br/>
<br/>
1111 0000 (High Value)
<br/>
1010 1100 (Low Value)
<br/>
<br/>
<span style="font-weight: bold">Now, to retrieve the LowWord :</span>
<br/>
1111 0000 1010 1100 ==&gt;(wordValue &amp; 0xFF);
<br/>
0000 0000 1111 1111 
<br/>
-------------------------
<br/>
0000 0000 1010 1100 ==&gt;( (u8) ) (Keeps first 8bits)
<br/>
-------------------------
<br/>
Final Result : 1010 1100 
<br/>
<br/>
<span style="font-weight: bold">Retrieve the HighWord :</span>
<br/>
1111 0000 1010 1100 ==&gt;(wordValue &gt;&gt; 8);
<br/>
-------------------------
<br/>
xxxx xxxx 1111 0000  ==&gt; ( &amp; 0xFF )
<br/>
0000 0000 1111 1111
<br/>
-------------------------
<br/>
0000 0000 1111 0000 ==&gt; ( (u8) ) (Keeps first 8 bits)
<br/>
-------------------------
<br/>
Final Result : 1111 0000
<br/>
<br/>
The x's are because the value is unknown.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6145 - wiz - Sun May 18, 2003 7:23 am</h4>
    <div class="postbody"><span class="postbody">hi again :)
<br/>
<br/>
I still think there is no need for the "&amp; 0xFF"
<br/>
<br/>
lets take this 16bit value again: 
<br/>
<br/>
1111 0000 1010 1100 
<br/>
<br/>
1111 0000 (High)
<br/>
1010 1100 (Low) 
<br/>
<br/>
u8 low = (u8)wordvalue;
<br/>
<br/>
since its only taking 8bits from it wouldnt it just take whats needed?
<br/>
<br/>
1111 0000 <span style="font-weight: bold">[1010 1100]</span>
<br/>
<br/>
then for the high part
<br/>
<br/>
wordvalue &gt;&gt; 8 would do this:
<br/>
<br/>
xxxx xxxx 1111 0000
<br/>
<br/>
and again only taking 8bits..
<br/>
<br/>
u8 high = (u8)wordvalue&gt;&gt;8;
<br/>
<br/>
xxxx xxxx <span style="font-weight: bold">[1111 0000]</span>
<br/>
<br/>
is there definately the need to &amp; 0xFF the word value?
<br/>
<br/>
sorry to drag this out, I really do want to fully understand though
<br/>
<br/>
and thank you again :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6147 - gb_feedback - Sun May 18, 2003 8:19 am</h4>
    <div class="postbody"><span class="postbody">I think you've got a point.
<br/>
<br/>
When I posted the original I didn't try it, but it is coded 'defensively' because I am fed up with getting unnecessary error messages. The problems occur when you daily use different C++ compilers as I have to, and there are lines of code in some compilers which genuinely do something not required if you don't take some of these steps. And as it's so illogical it takes a devil of a time to find the problem. So I usually go to some lengths to make sure the compiler understands.
<br/>
<br/>
However, if you take out the mask and get the same results - that's fine too!<br/>_________________<br/><a class="postlink" href="http://www.bookreader.co.uk/" target="_blank">http://www.bookreader.co.uk/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#6151 - wiz - Sun May 18, 2003 12:09 pm</h4>
    <div class="postbody"><span class="postbody">Great!
<br/>
<br/>
I understand why it is used :)  But I doubted myself when thinking about it.  If it wasnt for you adding that line in to code I wouldnt have had such a learning experience over it all and I feel Im definately getting to grips with it all so much more now.
<br/>
<br/>
Thank you all :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
