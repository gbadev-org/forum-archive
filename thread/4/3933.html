<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Ham problem.... But why? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Ham problem.... But why?</h2>
<div id="posts">
<div class="post">
    <h4>#25371 - Fatnickc - Sat Aug 21, 2004 5:41 pm</h4>
    <div class="postbody"><span class="postbody">Whenever I compile This part of code in Vham, something happens: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">DrawPixel3(x, y, mode3_Bitmap[y * 240 + x]);</td> </tr></table><span class="postbody">
<br/>
When compiling (The whole file, not the line on its own)
<br/>
It outputs this: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/gcc-arm/bin/arm-thumb-elf-as.exe -mthumb-interwork  /system/crt0.s -ocrt0.o
<br/>
/gcc-arm/bin/arm-thumb-elf-gcc.exe  -I /gcc-arm/include -I /gcc-arm/arm-thumb-elf/include -I /include -I /system  -c -DHAM_HAM  -DHAM_MULTIBOOT  -DHAM_ENABLE_MBV2LIB -O2 -DHAM_WITH_LIBHAM  -mthumb-interwork -mlong-calls -Wall -save-temps -fverbose-asm -nostartfiles main.c -o main.o
<br/>
main.c: In function `main':
<br/>
main.c:27: error: `mode3_Bitmap' undeclared (first use in this function)
<br/>
main.c:27: error: (Each undeclared identifier is reported only once
<br/>
main.c:27: error: for each function it appears in.)
<br/>
make: *** [main.o] Error 1</td> </tr></table><span class="postbody">
<br/>
Any ideas what the problem causng it is? 
<br/>
The whole file (From J Harbour's eBook) is: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define MULTIBOOT int __gba_multiboot;
<br/>
MULTIBOOT
<br/>
//include files
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include "C:\vham\gfx\bg.raw.c"
<br/>
//declare the function prototype
<br/>
void DrawPixel3(int, int, unsigned short);
<br/>
//declare some defines for the video mode
<br/>
#define REG_DISPCNT *(unsigned long*)0x4000000
<br/>
#define MODE_3 0x3
<br/>
#define BG2_ENABLE 0x400
<br/>
//changes the video mode
<br/>
#define SetMode(mode) REG_DISPCNT = (mode)
<br/>
//create a pointer to the video buffer
<br/>
unsigned short* videoBuffer = (unsigned short*)0x6000000;
<br/>
/////////////////////////////////////////////////////////////
<br/>
// Function: main()
<br/>
// Entry point for the program
<br/>
/////////////////////////////////////////////////////////////
<br/>
int main(void)
<br/>
{
<br/>
int x, y;
<br/>
SetMode(MODE_3 | BG2_ENABLE);
<br/>
//display the bitmap
<br/>
for(y = 0; y &lt; 160; y++)
<br/>
for(x = 0; x &lt; 240; x++)
<br/>
DrawPixel3(x, y, mode3_Bitmap[y * 240 + x]);
<br/>
//endless loop
<br/>
while(1)
<br/>
{
<br/>
}
<br/>
return 0;
<br/>
}
<br/>
void DrawPixel3(int x, int y, unsigned short c)
<br/>
{
<br/>
videoBuffer[y * 240 + x] = c;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
Thanks in advance,
<br/>
Fatnickc.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25375 - tepples - Sat Aug 21, 2004 5:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Fatnickc wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">main.c: In function `main':
<br/>
main.c:27: error: `mode3_Bitmap' undeclared (first use in this function)
<br/>
main.c:27: error: (Each undeclared identifier is reported only once
<br/>
main.c:27: error: for each function it appears in.)
<br/>
make: *** [main.o] Error 1</td> </tr></table><span class="postbody">
<br/>
Any ideas what the problem causng it is? 
<br/>
The whole file (From J Harbour's eBook) is: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define MULTIBOOT int __gba_multiboot;
<br/>
MULTIBOOT
<br/>
//include files
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include "C:\vham\gfx\bg.raw.c"
<br/>
// SNIP
<br/>
int main(void)
<br/>
{
<br/>
int x, y;
<br/>
SetMode(MODE_3 | BG2_ENABLE);
<br/>
//display the bitmap
<br/>
for(y = 0; y &lt; 160; y++)
<br/>
for(x = 0; x &lt; 240; x++)
<br/>
DrawPixel3(x, y, mode3_Bitmap[y * 240 + x]);
<br/>
//endless loop
<br/>
while(1)
<br/>
{
<br/>
}
<br/>
return 0;
<br/>
}
<br/>
void DrawPixel3(int x, int y, unsigned short c)
<br/>
{
<br/>
videoBuffer[y * 240 + x] = c;
<br/>
}</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
Where in your code do you define mode3_Bitmap[]?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25378 - Fatnickc - Sat Aug 21, 2004 7:01 pm</h4>
    <div class="postbody"><span class="postbody">How exactly would you reccomend I did declare it? Obviously
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define mode3_Bitmap[]</td> </tr></table><span class="postbody"> alone wouldn't do it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25379 - CATS - Sat Aug 21, 2004 7:04 pm</h4>
    <div class="postbody"><span class="postbody">buy a book on C/C++, seriously</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25380 - Fatnickc - Sat Aug 21, 2004 7:06 pm</h4>
    <div class="postbody"><span class="postbody">Jeez... But, i just can't remember how to do this one bit, I mean i can code (nearly..) complete games.
<br/>
Just what to do for the #define.......</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25385 - jenswa - Sat Aug 21, 2004 10:06 pm</h4>
    <div class="postbody"><span class="postbody">mode3_Bitmap[]
<br/>
<br/>
I think it's an arry of data from the bitmap you want to display.
<br/>
And in your case it's missing (or not properly linked).<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25401 - tepples - Sun Aug 22, 2004 1:09 am</h4>
    <div class="postbody"><span class="postbody">What are the first few lines of C:\vham\gfx\bg.raw.c ?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25435 - Fatnickc - Sun Aug 22, 2004 9:35 pm</h4>
    <div class="postbody"><span class="postbody">I'll just give the whole file, it isn't that long (weird?) 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const unsigned short bg_Palette[256]={
<br/>
0x0000, 0x0200, 0x63b9, 0x7b34, 0x7fff, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
<br/>
0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000
<br/>
};
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25440 - dagamer34 - Mon Aug 23, 2004 12:20 am</h4>
    <div class="postbody"><span class="postbody">Why are you using absolute paths to include data? It will become a real headache if you ever have to move your project/resources.
<br/>
<br/>
And you gave us the wrong file. That is bg.pal.c. We need to see bg.raw.c. And I'm also going out on a limb and guessing that you have never opened bg.raw.c, in any case, there really isn't any "mode3_bitmap" because you called it something else. Just open that file and you'll see what I'm talking about.
<br/>
<br/>
Maybe you copy and pasted code from a tutorial and forgot to change the name of the data?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
