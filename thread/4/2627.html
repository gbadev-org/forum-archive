<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Save/load struct in Cart RAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Save/load struct in Cart RAM</h2>
<div id="posts">
<div class="post">
    <h4>#14589 - doudou - Fri Jan 09, 2004 1:07 am</h4>
    <div class="postbody"><span class="postbody">I want to save a struct in the Cart RAM, I thought this would work :
<br/>
<br/>
<br/>
#define GAMEPAK_RAM  ((u8*)0x0E000000)
<br/>
u8* pSaveMem = GAMEPAK_RAM;
<br/>
<br/>
for (i = 0 ; i &lt; sizeof(my_struct) ; i++)
<br/>
     pSaveMem[i] = *((u8*) (&amp;my_struct + i));
<br/>
<br/>
<br/>
but it does not. Why ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14591 - LOst? - Fri Jan 09, 2004 1:17 am</h4>
    <div class="postbody"><span class="postbody">Oh, does this work, just by writing to a memory location?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14592 - ampz - Fri Jan 09, 2004 1:30 am</h4>
    <div class="postbody"><span class="postbody">How about this?
<br/>
<br/>
pSaveMem[i] = *((u8*)my_struct + i);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14594 - dagamer34 - Fri Jan 09, 2004 2:07 am</h4>
    <div class="postbody"><span class="postbody">I posted about this earlier and have a nice, simple solution to it. Just follow this link. (you really should search for stuff before you post)
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=2550" target="_blank">http://forum.gbadev.org/viewtopic.php?t=2550</a>
<br/>
<br/>
Pretty simple to use. Just make sure you don't overwrite your own stuff, might create a big problem. It's kinda slow (SRAM has a 5 wait-state period, so don't do it every frame) but no one complains.
<br/>
<br/>
Your welcome!!<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14597 - doudou - Fri Jan 09, 2004 2:43 am</h4>
    <div class="postbody"><span class="postbody">thank you dagamer. By the way, i searched (maybe not that much) before my post. By another way, i think your code is right and a memcpy could not be used since SRAM is only accessible 8 bits at a time.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14602 - Miked0801 - Fri Jan 09, 2004 3:34 am</h4>
    <div class="postbody"><span class="postbody">What?  You guys don't like working with EEPROM memory?  :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14607 - sajiimori - Fri Jan 09, 2004 7:07 am</h4>
    <div class="postbody"><span class="postbody">Yeah, I made a boo-boo in that thread.  Please disregard.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14622 - dagamer34 - Fri Jan 09, 2004 11:49 pm</h4>
    <div class="postbody"><span class="postbody">Boo-boo?? lol. That's funny!!
<br/>
<br/>
Now, I'm working on sound and multiplayer. I think I can get sound to work, but multiplayer is *insert curse word here*!!!!
<br/>
<br/>
Maybe that's why there are few multiplayer games and even fewer that use 4-players. Why is that?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14631 - tepples - Sat Jan 10, 2004 1:10 am</h4>
    <div class="postbody"><span class="postbody">Few commercial games have multiplayer because few families have $400 to spend on GBA SP systems and $120 to spend on a game.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14648 - dagamer34 - Sat Jan 10, 2004 4:18 am</h4>
    <div class="postbody"><span class="postbody">Well, not really the family in general, more like your friends. I mean, I do have 4 friends who have GBA/GBA-SPs but I haven't met them all at the same time. 
<br/>
<br/>
Besides, I was going to focus more on 2-player gameplay.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14665 - ampz - Sat Jan 10, 2004 12:37 pm</h4>
    <div class="postbody"><span class="postbody">I'd like to see more 4-player multiboot titles.
<br/>
<br/>
dagamer34: For 2-player gameplay you should use the UART mode for communications. Check out my keyboard software, it might help you get started.
<br/>
<a href="http://www.brolinembedded.se/projects/index5.html" target="_blank">http://www.brolinembedded.se/projects/index5.html</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14683 - dagamer34 - Sun Jan 11, 2004 3:38 am</h4>
    <div class="postbody"><span class="postbody">Why should I use UART mode? Why not multiplayer?
<br/>
<br/>
Anyway, I finally found a decent demo that shows something to do with multiplayer. Its a step in the right direction!<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14709 - Miked0801 - Sun Jan 11, 2004 10:09 pm</h4>
    <div class="postbody"><span class="postbody">I'm not sure, but I believe that the UART communications doesn't use the standard cable that Nintendo sells.  Feel free to correct me though...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14716 - dagamer34 - Sun Jan 11, 2004 11:37 pm</h4>
    <div class="postbody"><span class="postbody">Well, I want to use the standard Nintendo cable.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#14727 - yaustar - Mon Jan 12, 2004 1:12 am</h4>
    <div class="postbody"><span class="postbody">Can you show the source of he demo? The only one I found was from Down to You...<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
