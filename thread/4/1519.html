<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>O2/O3 is destroying my memory :( - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > O2/O3 is destroying my memory :(</h2>
<div id="posts">
<div class="post">
    <h4>#7667 - Lupin - Sun Jun 22, 2003 7:20 pm</h4>
    <div class="postbody"><span class="postbody">I tried to turn optimizations on and noticed that by using these compiler options:
<br/>
<br/>
CFLAGS  = -I $(INCDIR2) -I $(INCDIR) -I $(SRCDIR) -mthumb-interwork -mtune=arm7tdmi -c -Wall -fverbose-asm -O3
<br/>
<br/>
....the whole memory gets destroyed, all colors are looking very odd and you could only see the basic shape of the sprites :(
<br/>
<br/>
Did anybody experienced that too?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7684 - tepples - Sun Jun 22, 2003 11:38 pm</h4>
    <div class="postbody"><span class="postbody">Your const data should always be aligned to a 4-byte boundary.  Is it?
<br/>
<br/>
Have you declared your registers volatile?
<br/>
<br/>
Are you using DevKit Advance R5b3 or DevKit Advance R4? There are some known ARM architecture optimizer bugs in the GCC included with DKA R4.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7727 - Lupin - Mon Jun 23, 2003 4:45 pm</h4>
    <div class="postbody"><span class="postbody">A 4-Byte boundary? What do you mean? sorry for my dumbness :)
<br/>
<br/>
I think I declared all registers volatile wich are neccesarry volatile (I'm using pernproject headers and some other stolen ones :))
<br/>
<br/>
I'm using the DKA provided by pern project, should I get the beta release? I don't think beta releases are that good, most times they are very *beta* :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#7732 - tepples - Mon Jun 23, 2003 6:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">A 4-Byte boundary? What do you mean? sorry for my dumbness :)</td> </tr></table><span class="postbody">
<br/>
An ARM processor typically addresses memory in 4-byte chunks, starting at byte addresses that are a multiple of 4. There's an attribute called 'aligned' that aligns a variable to an address at a multiple of however many bytes you specify. See [url=http://www.fnal.gov/docs/products/gcc/v2_95_2/gcc.info,.VariableAttributes.html]GCC docs[/url[.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I'm using the DKA provided by pern project, should I get the beta release? I don't think beta releases are that good, most times they are very *beta* :)</td> </tr></table><span class="postbody">
<br/>
From my limited use, I guess that DKA R5b3 is up to at least where DKA R4 was in stability.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
