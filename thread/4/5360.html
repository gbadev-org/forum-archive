<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Wireless adapter - how it works - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Wireless adapter - how it works</h2>
<div id="posts">
<div class="post">
    <h4>#39046 - denopqrihg - Sun Apr 03, 2005 8:29 pm</h4>
    <div class="postbody"><span class="postbody">I've been playing around with this thing (though I don't have it :D ) for quite a long time now, so I decided to share my investigations:
<br/>
<br/>
Initialization:
<br/>
1) Output SD=low, SO=low
<br/>
2) Output SD=high, SO=low for about 18500 clocks
<br/>
3) Output SD=low, SO=low
<br/>
4) Using Normal mode with external clock, send the following data:
<br/>
	Send		Receive
<br/>
	0xgggg494e	0x494egggg
<br/>
	0xb6b1494e	0x494eb6b1
<br/>
	0xb6b1544e	0x544eb6b1
<br/>
	0xabb1544e	0x544eabb1
<br/>
	0xabb14e45	0x4e45abb1
<br/>
	0xb1ba4e45	0x4e45b1ba
<br/>
	0xb1ba4f44	0x4f44b1ba
<br/>
	0xb0bb4f44	0x4f44b0bb
<br/>
	0xb0bb8001	0x8001b0bb
<br/>
5) Shift to 2Mhz Normal mode with internal clock and send:
<br/>
	Send		Receive
<br/>
	0x9966003d	0x80000000
<br/>
	0x80000000	0x996600bd
<br/>
<br/>
(gggg = garbage)
<br/>
Basically, you send the text "NINTENDO/x01/x80" in the lower halfword 2 bytes at a time in little endian form and 1's complement of the higher halfword received last time.
<br/>
<br/>
Using the adapter:
<br/>
The adapter uses 2Mbps Normal mode for communication with the GBA (select internal clock). 
<br/>
You can send various commands to the adapter (the purpose of most of them is unknown).
<br/>
The format is:
<br/>
Send		Receive
<br/>
0x9966wwcc	0x80000000
<br/>
data...		0x80000000
<br/>
0x80000000	0x9966wwaa
<br/>
0x80000000	data...
<br/>
<br/>
where ww is the number of words (4byte units) following the command, cc is the command, and aa is ackowledged command (cc|0x80).
<br/>
<br/>
Also, each transmission (sending of EVERY 4 bytes) is followed by an ackowledge procedure:
<br/>
Set SO = high, wait until SI = low
<br/>
Then set SO = low, wait until SI = high
<br/>
(can be done in normal mode)
<br/>
<br/>
The meaning of following commands is known (=I have an interpretation for them):
<br/>
Command 0x3d and 0x10:
<br/>
	Last step of the initialization procedure. Difference between 0x3d and 0x10 is unknown.
<br/>
Command 0x16:
<br/>
	Followed by any number of data words (Nintendo games usually use 6 words = 24 bytes).
<br/>
	Send broadcast data. This data will be received by all adapters in range.
<br/>
Command 0x1d:
<br/>
	Receive broadcast data.
<br/>
	The adapter sends broadcast data from all other adapters to the GBA using the following structure:
<br/>
	1 word: ID of the sending adapter (or maybe just the lower halfword)
<br/>
	n words: data
<br/>
	This structure is repeated for each adpater.
<br/>
Command 0x1f:
<br/>
	Select which adapter you want to communicate with (identified by its ID).
<br/>
<br/>
Partly known commands:
<br/>
Command 0x17:
<br/>
	Followed by 1 word of data. Most likely some kind of setup (used once at the beginning).
<br/>
<br/>
Usage of other commands is completely unknown.
<br/>
Commands used by Nintendo include: 0x11, 0x13, 0x19, 0x1a, 0x26 and more, some of which I believe are for direct communication between two adapters.
<br/>
<br/>
This info should be sufficient for making a simple broadcasting game.
<br/>
<br/>
It's in no way complete or confirmed, if you find something that doesn't work or find out some new information, go ahead and post.
<br/>
<br/>
This is a copy of the same topic at vbalink <a class="postlink" href="http://vbalink.wz.cz/phpbb2/viewtopic.php?t=565" target="_blank">http://vbalink.wz.cz/phpbb2/viewtopic.php?t=565</a>
<br/>
<br/>
You can download the document <a class="postlink" href="http://vbalink.wz.cz/adapter.txt" target="_blank">here</a>.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39048 - FluBBa - Sun Apr 03, 2005 8:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>denopqrihg wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Basically, you send the text "NINTENDO/x01/x80" in the lower halfword 2 bytes at a time in little endian form and 1's complement of the higher halfword received last time.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Funny... seems just like how you communicate with the Gameboy Player  =)
<br/>
Didn't someone say something about the DS acting weird when trying to communicate through the coms port?<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39087 - denopqrihg - Mon Apr 04, 2005 11:50 am</h4>
    <div class="postbody"><span class="postbody">why would they make a new interface when they don't have to? :-)
<br/>
<br/>
Do you think that if you plugged in a Gameboy player (what is it anyway?), the games would think it's a wireless adapter?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39115 - FluBBa - Mon Apr 04, 2005 6:08 pm</h4>
    <div class="postbody"><span class="postbody">The Gameboy Player is an adapter for the Gamecube, it's a GBA in a box so you can play it on a TV, plus you can use the rumble function in the GC joypad.
<br/>
<br/>
The GBP sends 0xB0BB8002 instead of 0xB0BB8001.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39117 - denopqrihg - Mon Apr 04, 2005 6:16 pm</h4>
    <div class="postbody"><span class="postbody">is there some documentation about the GBA player somewhere?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39120 - wintermute - Mon Apr 04, 2005 7:33 pm</h4>
    <div class="postbody"><span class="postbody">I was under the impression that the wireless adapter needed no special code in order to work. Certainly the Majesco one doesn't.
<br/>
<br/>
I think you may just be REing a particular game's multiplayer code</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39125 - FluBBa - Mon Apr 04, 2005 9:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>denopqrihg wrote:</b></span></td> </tr> <tr> <td class="quote">is there some documentation about the GBA player somewhere?</td> </tr></table><span class="postbody">
<br/>
If you mean anything other than what Nintendo has public, I'm writing it right now.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39140 - tepples - Tue Apr 05, 2005 2:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">I was under the impression that the wireless adapter needed no special code in order to work. Certainly the Majesco one doesn't.</td> </tr></table><span class="postbody">
<br/>
There are three different wireless adapters: <ul><li>The Majesco GBA wireless adapter tunnels GBA multiplayer link cable signals at the layer 1 level. </li><li>The Nintendo GBA wireless adapter uses the proprietary protocol you speak of. </li><li>The Nintendo DS built-in wireless chip uses Wi-Fi (802.11b) up to layer 2. Games use either Ni-Fi or (in future titles) TCP/IP for layers 3 on up. </li></ul><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39184 - denopqrihg - Tue Apr 05, 2005 7:29 pm</h4>
    <div class="postbody"><span class="postbody">Yes, this is a description of the Nintendo wireless adapter (the one that comes with Pokemon FR/LG)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40579 - John at J&S - Wed Apr 20, 2005 3:21 pm</h4>
    <div class="postbody"><span class="postbody">I picked up a Majesco adapter at the mall last night.  It was only $9.99, so I cut it open for a look.
<br/>
<br/>
They are using a Chipcon 2400 transceiver.  Don't know about the MCU.
<br/>
<br/>
Photos here:  <a href="http://www.jandssafeguard.com/GBAwireless/" target="_blank">http://www.jandssafeguard.com/GBAwireless/</a><br/>_________________<br/>Thinking is hard work</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
