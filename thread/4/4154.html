<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Finding out how full RAM is - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Finding out how full RAM is</h2>
<div id="posts">
<div class="post">
    <h4>#27038 - ScottLininger - Sat Oct 02, 2004 12:33 am</h4>
    <div class="postbody"><span class="postbody">Can anyone tell me a way to tell how much RAM you've used? I know I saw a post on this before, but I couldn't find it...
<br/>
<br/>
Visual Boy Advance is the current emulator I use. Its memory viewer is less than helpful... since it seems that all of ram has unrecognizable data in it, unless I'm just reading it wrong.
<br/>
<br/>
Thanks!
<br/>
<br/>
Scott</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27040 - ampz - Sat Oct 02, 2004 12:51 am</h4>
    <div class="postbody"><span class="postbody">You wanna check this live on the hardware?
<br/>
There are a couple of ways I guess...
<br/>
You could write a small asm loop in the c startup code that fills RAM with a known integer value (like 0x12345678 or something). Run your program for a while, and then chek how much of the RAM has been rewritten.
<br/>
<br/>
If you want to know exatly how much RAM you use at a specific point, then just read the stack pointer. Of course, you must also take the heap into account if you use it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27044 - tepples - Sat Oct 02, 2004 1:05 am</h4>
    <div class="postbody"><span class="postbody">nm -n myprogram.elf
<br/>
<br/>
then look at how closely the addresses approach 0x02400000 and 0x03007c00 (the top of two GBA RAM areas)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27054 - sajiimori - Sat Oct 02, 2004 4:51 am</h4>
    <div class="postbody"><span class="postbody">It totally depends on how your memory is being allocated.  'nm' can tell you all about static allocations, and the stack pointer can be checked pretty easily at runtime, but finding out about heap usage isn't possible with the standard C library so you have to either track it yourself or use your own allocator from the start.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27055 - MumblyJoe - Sat Oct 02, 2004 6:45 am</h4>
    <div class="postbody"><span class="postbody">You could write your own malloc/free or operator new/delete and have them keep count, kinda. It wouldn't be accurate unless you also knew how much room any functions put in ram are using for code and how much stack is bieng used, but I'm sure somebody here knows more than me about that sort of thing and can write something.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27061 - DiscoStew - Sat Oct 02, 2004 9:17 am</h4>
    <div class="postbody"><span class="postbody">Is there a way when using 'nm' to page through all the static allocations and functions, like how in DOS you could go page by page when looking through directories/files? The last time I tried a normal 'nm' with an ELF file, the list went clear past anything shown in RAM, and went past most things in ROM. This is because I've got a lot of stuff in it.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27065 - MumblyJoe - Sat Oct 02, 2004 9:40 am</h4>
    <div class="postbody"><span class="postbody">put "| more" (without the quotes) after your nm thing.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27069 - poslundc - Sat Oct 02, 2004 2:38 pm</h4>
    <div class="postbody"><span class="postbody">Or redirect it into a file ("&gt; myfile") and use a text editor to browse it freely.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
