<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Std Library not working correctly with visual ham - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Std Library not working correctly with visual ham</h2>
<div id="posts">
<div class="post">
    <h4>#28039 - compound - Tue Oct 26, 2004 2:17 pm</h4>
    <div class="postbody"><span class="postbody">ok i used the following function to generate a number between 1 and 5
<br/>
<br/>
int myRandVar = rand() % (5 - 1 +1) + 1;
<br/>
<br/>
this number is then used as a parameter to decide on what type of object im going to create
<br/>
<br/>
bob.CreateShape(myRandVar);
<br/>
<br/>
but for some reason it just produces object 4
<br/>
<br/>
ive tried to debug this by displaying it as text but cant onvert the integer to a string using 
<br/>
<br/>
itoa(myRandVar, bbb, 5 );
<br/>
<br/>
it says itoa is an  unidentified function   when this shows up on cplusplus.coms ref library 
<br/>
<br/>
ive included al these to make sure
<br/>
<br/>
#include &lt;cstdlib&gt;
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include &lt;math.h&gt;
<br/>
<br/>
<br/>
i really havent a clue im sure it shouldnt be this difficult
<br/>
<br/>
thanks alot</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29247 - blinky465 - Mon Nov 15, 2004 12:32 am</h4>
    <div class="postbody"><span class="postbody">I'm fairly new to GBA programming using C/VisualHAM, but have programmed in many different languages over the last ten years or so.
<br/>
In all of the languages I've used, there has been a need to set the random seed in order to see truly random numbers.
<br/>
<br/>
As you probably know, when you ask for a random number, the computer simply returns a number from a predefined list of 'random' numbers.
<br/>
You will need to set the random seed, which basically tells the computer to pick a new starting point in the list before selecting any more numbers.
<br/>
Setting the random seed to the current time/date in milliseconds usually emulates a true random number.
<br/>
<br/>
I don't know what the syntax is for this is in HAM (and it's a while since I did it in C), but should give you a starting point.
<br/>
(this should explain why your random number generator always returns 4, as for the undefined function, I don't know until I get reacquainted with C!!)
<br/>
<br/>
hope this helps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29248 - sajiimori - Mon Nov 15, 2004 12:35 am</h4>
    <div class="postbody"><span class="postbody">itoa() is not part of the standard C library.  Use sprintf or Dan's GBA-friendly posprintf.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29293 - Maxamor - Tue Nov 16, 2004 12:24 am</h4>
    <div class="postbody"><span class="postbody">If you're using Hamlib you don't need to convert it to a string to print it out. Have you tried making a call like this: 
<br/>
<br/>
If you're debugging to VBA:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ham_VBAText("%d\n", myRandVar);</td> </tr></table><span class="postbody">
<br/>
<br/>
If you're using the BG layers:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ham_DrawText(x, y, "%d", myRandVar);</td> </tr></table><span class="postbody">
<br/>
<br/>
?
<br/>
<br/>
Or is there some other detail I'm missing? I believe this would work for debugging purposes, unless you're not using a tiles BG mode, in which case you'll have to use VBAText.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29295 - dagamer34 - Tue Nov 16, 2004 3:00 am</h4>
    <div class="postbody"><span class="postbody">When you add a header, youj also have to add the library along with it.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
