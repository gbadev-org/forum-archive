<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Heh... is there someone that can help me with checksum? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Heh... is there someone that can help me with checksum?</h2>
<div id="posts">
<div class="post">
    <h4>#33977 - LOst? - Tue Jan 11, 2005 9:39 pm</h4>
    <div class="postbody"><span class="postbody">I do understand the concept of CheckSum, but how can I write one. Is there anything I need to think about? Is it just to add each byte and store it in a word or dword?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while (buffer++)
<br/>
{
<br/>
Â checksum += *buffer;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I feel I have missed something important, haven't I?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33979 - tepples - Tue Jan 11, 2005 10:17 pm</h4>
    <div class="postbody"><span class="postbody">Some people use "checksum" to mean only the arithmetic sum of bytes; others use it in a more general sense to refer to any message digest value used for hash table lookup, channel error detection, or authentication. What do you want to use the checksum for? Are you trying to match a particular format's checksum, or are you trying to make a hash table, or are you trying to check the consistency of a savegame or multiplayer comms packet?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33991 - LOst? - Wed Jan 12, 2005 4:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Some people use "checksum" to mean only the arithmetic sum of bytes; others use it in a more general sense to refer to any message digest value used for hash table lookup, channel error detection, or authentication. What do you want to use the checksum for? Are you trying to match a particular format's checksum, or are you trying to make a hash table, or are you trying to check the consistency of a savegame or multiplayer comms packet?</td> </tr></table><span class="postbody">
<br/>
<br/>
Arithmetic sum of bytes for damage protection of data. I guess you can use message digest for that too since the hash will not be the same if there was any change in the data, but that's too advanced.
<br/>
<br/>
So all I need to do is add very byte with eachother and check the sum? What if the sum is bigger than the unsigned word or dword I will be using? Does it really matter in the end if the sum was bigger? Does it matter if I use signed or unsigned dwords?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33992 - tepples - Wed Jan 12, 2005 4:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">So all I need to do is add very byte with eachother and check the sum? What if the sum is bigger than the unsigned word or dword I will be using?</td> </tr></table><span class="postbody">
<br/>
If you're adding less than 256 bytes of data, it'll be smaller than an unsigned short; if you're adding less than 16 MB of data, it'll be smaller than an unsigned long.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Does it really matter in the end if the sum was bigger?</td> </tr></table><span class="postbody">
<br/>
Not really. Just let it overflow.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Does it matter if I use signed or unsigned dwords?</td> </tr></table><span class="postbody">
<br/>
You'll probably want to use unsigned, but it shouldn't matter too much.
<br/>
<br/>
Checksum and XOR aren't exactly the best algorithms for error detection because they don't catch transpositions ("hello world" and "hello wrold" are the same) nor certain modifications to the data ("hello World" vs. "Hello world" vs. "hello worLd"). I'd suggest something that mixes the data up better such as CRC32.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33993 - LOst? - Wed Jan 12, 2005 4:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">So all I need to do is add very byte with eachother and check the sum? What if the sum is bigger than the unsigned word or dword I will be using?</td> </tr></table><span class="postbody">
<br/>
If you're adding less than 256 bytes of data, it'll be smaller than an unsigned short; if you're adding less than 16 MB of data, it'll be smaller than an unsigned long.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Does it really matter in the end if the sum was bigger?</td> </tr></table><span class="postbody">
<br/>
Not really. Just let it overflow.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Does it matter if I use signed or unsigned dwords?</td> </tr></table><span class="postbody">
<br/>
You'll probably want to use unsigned, but it shouldn't matter too much.
<br/>
<br/>
Checksum and XOR aren't exactly the best algorithms for error detection because they don't catch transpositions ("hello world" and "hello wrold" are the same) nor certain modifications to the data ("hello World" vs. "Hello world" vs. "hello worLd"). I'd suggest something that mixes the data up better such as CRC32.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
How do I do CRC32? Is it possible to do it on the GBA? That's what I want to do!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33996 - tepples - Wed Jan 12, 2005 5:18 am</h4>
    <div class="postbody"><span class="postbody">umm... <a class="postlink" href="http://www.google.com/search?q=crc32%20source%20code" target="_blank">Google it?</a><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#33997 - sajiimori - Wed Jan 12, 2005 6:29 am</h4>
    <div class="postbody"><span class="postbody">It's like watching somebody chase quarters through the street.  A sparkly acronym in the periphery...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34020 - Miked0801 - Wed Jan 12, 2005 7:38 pm</h4>
    <div class="postbody"><span class="postbody">Lol.  So I gather we were looking for data integrity then right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34067 - LOst? - Thu Jan 13, 2005 5:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Miked0801 wrote:</b></span></td> </tr> <tr> <td class="quote">Lol.  So I gather we were looking for data integrity then right?</td> </tr></table><span class="postbody">
<br/>
Yea.
<br/>
<br/>
And thank you tepples for guiding me through the world of Google. now I feel like an idiot. But I got the CRC32 working!
<br/>
<br/>
I don't see why MD5 would be any better. It needs like 64 bytes or was it 128? Anyway, I just need to keep hackers away from my precious hi-score data!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#34076 - tepples - Thu Jan 13, 2005 7:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">But I got the CRC32 working!
<br/>
<br/>
I don't see why MD5 would be any better.</td> </tr></table><span class="postbody">
<br/>
CRC is good for detecting accidental tampering such as transmission line noise or storage bit rot, but it falls flat on its face for an intentional attack, as a bit of finite group algebra will allow anybody to forge a document with a given CRC. MD5 is much more resistant to an intentional attack.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">It needs like 64 bytes or was it 128?</td> </tr></table><span class="postbody">
<br/>
MD5 needs 128 bits or 16 bytes, but you can use the first 8 bytes and ignore the rest in a pinch.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Anyway, I just need to keep hackers away from my precious hi-score data!</td> </tr></table><span class="postbody">
<br/>
If hackers really want to hack your high scores, they will hack your high scores. They will patch the game to accept a bogus CRC or MD5 when loading the high scores and then write a valid CRC or MD5 when writing them back to SRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
