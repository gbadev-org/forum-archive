<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>help with collision detection - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > help with collision detection</h2>
<div id="posts">
<div class="post">
    <h4>#18451 - Darmstadium - Fri Mar 26, 2004 6:11 pm</h4>
    <div class="postbody"><span class="postbody">I am having a bit of trouble getting my system of collision detection to work. It works like this: there is a struct called object that stores the x, y, height, and width of all of the stuff you can collide with. All of the objects are pointed to in an array of pointers to objects called objs. Here's my code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct object
<br/>
{
<br/>
   u8 n;
<br/>
   u16 x;
<br/>
   u16 y;
<br/>
   u8 h, w;
<br/>
};
<br/>
<br/>
#define OBJSLEN   1
<br/>
object * objs[OBJSLEN];
<br/>
<br/>
bool MoveOK(object * client, s16 xmove, s16 ymove)
<br/>
{
<br/>
   u8 oks = 0;
<br/>
   u16 loop;
<br/>
   for (loop = 0; loop &lt;= OBJSLEN; loop++)
<br/>
   {
<br/>
      if (objs[loop]-&gt;n != client-&gt;n)
<br/>
      {
<br/>
         if (objs[loop]-&gt;x &gt; client-&gt;x + xmove + client-&gt;w)
<br/>
            oks++;
<br/>
         else if (objs[loop]-&gt;x + objs[loop]-&gt;w &lt; client-&gt;x + xmove)
<br/>
            oks++;
<br/>
         else if (objs[loop]-&gt;y &gt; client-&gt;y + ymove + client-&gt;h)
<br/>
            oks++;
<br/>
         else if (objs[loop]-&gt;y + objs[loop]-&gt;h &lt; client-&gt;y + ymove)
<br/>
            oks++;
<br/>
      }
<br/>
   }
<br/>
   if (oks == OBJSLEN - 1)
<br/>
      return true;
<br/>
   
<br/>
   return false;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
When I test my demo the sprite I'm checking moves right on over all the other objects. I'm not at all sure why this is</span><span class="gensmall"><br/><br/>Last edited by Darmstadium on Sat Mar 27, 2004 3:27 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#18452 - poslundc - Fri Mar 26, 2004 6:22 pm</h4>
    <div class="postbody"><span class="postbody">Well, for one, if OBJSLEN is defined as 1 and you're looping over OBJSLEN objects... that means you're only testing against 1 object.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18475 - Darmstadium - Sat Mar 27, 2004 3:25 am</h4>
    <div class="postbody"><span class="postbody">Heh. That was kind of stuipid... OK, I fixed it, and the very same thing happens. Am I going about this the right way? How might you do it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18477 - poslundc - Sat Mar 27, 2004 4:13 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://forum.gbadev.org/search.php" target="_blank">Search</a> the forums; other people have much better ideas than I do.
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=2539" target="_blank">http://forum.gbadev.org/viewtopic.php?t=2539</a>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=2390" target="_blank">http://forum.gbadev.org/viewtopic.php?t=2390</a>
<br/>
<br/>
... are both good starting places I pulled at first glance from a quick search of collision and detection.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18479 - Darmstadium - Sat Mar 27, 2004 5:25 am</h4>
    <div class="postbody"><span class="postbody">thank you very much for your help</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
