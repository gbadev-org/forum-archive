<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Rotation and flipping - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Rotation and flipping</h2>
<div id="posts">
<div class="post">
    <h4>#26919 - babaloomer - Wed Sep 29, 2004 3:21 am</h4>
    <div class="postbody"><span class="postbody">is there an easy way to do rotation/scaling AND flipping at the same time on one sprite?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26920 - babaloomer - Wed Sep 29, 2004 3:47 am</h4>
    <div class="postbody"><span class="postbody">yup there is... (it's a shame i didn't realized it earlier)
<br/>
<br/>
simply apply a negative scaling factor instead of playing with the horizontal and vertical flip bits...
<br/>
<br/>
there is an example of a rotating function here:
<br/>
<a class="postlink" href="http://www.mdh165.pwp.blueyonder.co.uk/docstuts/Chapter7_SpriteFeaturesPt1.pdf" target="_blank">http://www.mdh165.pwp.blueyonder.co.uk/docstuts/Chapter7_SpriteFeaturesPt1.pdf</a>
<br/>
<br/>
that was easy ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#26937 - pyros - Wed Sep 29, 2004 8:33 pm</h4>
    <div class="postbody"><span class="postbody">Applying a negetive scaling factor will flip both horizontal AND vertical.
<br/>
<br/>
To flip horizontal or vertical, there are (at least) two ways of doing it:
<br/>
<br/>
The Easy Way:
<br/>
<br/>
Horizontal: negate pa, and pb (see below)
<br/>
Vertical: negate pc and pd (also see below)
<br/>
Both: negate pa,pb,pc and pd
<br/>
<br/>
The Maths Way:
<br/>
<br/>
pa,pb,pc,pd form a matrix (see the TONC pages)
<br/>
<br/>
To flip horizontal, vertical or both, simply multiply this matrix by the appropriate transformation matrix, and use the resulting values.
<br/>
This (obviously) will produce the above result.
<br/>
<br/>
In a recent program I found it necessery to both flip and rotate sprites by multiples of 90degrees. Here's how to do each combination:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   a =  + scale * cos(angle);
<br/>
   b =  + scale * sin(angle);
<br/>
   c =  - scale * sin(angle);
<br/>
   d =  + scale * cos(angle); 
<br/>
<br/>
<br/>
   pa = - a;   Flip Horizontal
<br/>
   pb = - b;
<br/>
   pc = + c;
<br/>
   pd = + d;
<br/>
<br/>
   pa = + c;   Rotate Clockwise 90
<br/>
   pb = + d;
<br/>
   pc = - a;
<br/>
   pd = - b;
<br/>
<br/>
   pa = - c;   Rotate Right 90
<br/>
   pb = - d;   and Flip Vertical
<br/>
   pc = - a;
<br/>
   pd = - b;
<br/>
<br/>
   pa = - a;   Flip Horizontal
<br/>
   pb = - b;   and Flip Vertical
<br/>
   pc = - c;   (rotate 180)
<br/>
   pd = - d;
<br/>
<br/>
   pa = + a;   Flip Vertical
<br/>
   pb = + b;
<br/>
   pc = - c;
<br/>
   pd = - d;
<br/>
<br/>
   pa = - c;   Rotate Clockwise 270
<br/>
   pb = - d;   (anti-clockwise 90)
<br/>
   pc = + a;
<br/>
   pd = + b;
<br/>
<br/>
   pa = + c;   Rotate Clockwise 270
<br/>
   pb = + d;   and Flip Vertical
<br/>
   pc = + a;
<br/>
   pd = + b;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#30015 - dj-ceejay - Sat Nov 27, 2004 5:42 pm</h4>
    <div class="postbody"><span class="postbody">The example on:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">there is an example of a rotating function here: 
<br/>
<a href="http://www.mdh165.pwp.blueyonder.co.uk/docstuts/Chapter7_SpriteFeaturesPt1.pdf" target="_blank">http://www.mdh165.pwp.blueyonder.co.uk/docstuts/Chapter7_SpriteFeaturesPt1.pdf</a> </td> </tr></table><span class="postbody">
<br/>
<br/>
uses mode 1. I am using mode 4 for my game, does this matter?
<br/>
Is it possible to scale and rotate in mode 4.
<br/>
<br/>
Thanks
<br/>
<br/>
Chris.<br/>_________________<br/>Fruit Machine Games:
<br/>
<a class="postlink" href="http://www.fmsoftware.info/" target="_blank">http://www.fmsoftware.info/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#30017 - tepples - Sat Nov 27, 2004 5:51 pm</h4>
    <div class="postbody"><span class="postbody">Rot/scale is the same in all modes that support it, except that modes 3, 4, and 5 do not support hardware wrapping of backgrounds.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Sat Nov 27, 2004 10:58 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#30020 - dj-ceejay - Sat Nov 27, 2004 6:34 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your help.
<br/>
I have fixed it now. I was using the sprite before calling RotateSprite() - The sprite is displayed, then it starts rotating. Therefore there was no data in attribute 2.
<br/>
<br/>
Thanks again.<br/>_________________<br/>Fruit Machine Games:
<br/>
<a class="postlink" href="http://www.fmsoftware.info/" target="_blank">http://www.fmsoftware.info/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
