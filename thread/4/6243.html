<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Alignment problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Alignment problem</h2>
<div id="posts">
<div class="post">
    <h4>#47380 - batblaster - Fri Jul 08, 2005 9:07 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I have changed the compiler and from gcc 322 i moved to gcc 344 but now the code have an alignment problem how i can fix ??/ the project is very big is a complete game and i changed the compiler to solve another problem of the gcc 322
<br/>
<br/>
Thanks a lot..<br/>_________________<br/>Batblaster / 7 Raven Studios Co. Ltd
<br/>
------------------------------------------</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47388 - tum_ - Fri Jul 08, 2005 2:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>batblaster wrote:</b></span></td> </tr> <tr> <td class="quote">Hi,
<br/>
<br/>
I have changed the compiler and from gcc 322 i moved to gcc 344 but now the code have an alignment problem how i can fix ??/ the project is very big is a complete game and i changed the compiler to solve another problem of the gcc 322
<br/>
<br/>
Thanks a lot..</td> </tr></table><span class="postbody">
<br/>
<br/>
Do you mind describing the problem? Compiler error/warning?
<br/>
If yes, what does it say? Quote the piece of code that causes it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47393 - batblaster - Fri Jul 08, 2005 3:16 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
the compiler do not give me any error, only with gcc3.2.2 i compile my game and all works fine with gcc 3.4.4 , the last available, when i compile all is done but when i run the game it crash , i haven't changed any part of the coe only changed the compiler version, tested with emu like No$GBA (Registered version) it show me an alignment error in a piece of code who work fine with gcc 3.2.2 ....
<br/>
<br/>
Cu..<br/>_________________<br/>Batblaster / 7 Raven Studios Co. Ltd
<br/>
------------------------------------------</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47396 - tepples - Fri Jul 08, 2005 3:19 pm</h4>
    <div class="postbody"><span class="postbody">Is this alignment error on an opcode fetch, or on a load or store? If the latter, then you may need to declare your arrays with __attribute__((aligned(4))) .<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47405 - tum_ - Fri Jul 08, 2005 4:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>batblaster wrote:</b></span></td> </tr> <tr> <td class="quote">Hi,
<br/>
<br/>
the compiler do not give me any error, only with gcc3.2.2 i compile my game and all works fine with gcc 3.4.4 , the last available, when i compile all is done but when i run the game it crash , i haven't changed any part of the coe only changed the compiler version, tested with emu like No$GBA (Registered version) it show me an alignment error in a piece of code who work fine with gcc 3.2.2 ....
<br/>
<br/>
Cu..</td> </tr></table><span class="postbody">
<br/>
<br/>
You're not giving enough info to help you. If the code is written incorrectly
<br/>
from the alignment issues point of view, it's quite possible to be just lucky with one compiler version (a thing or things happen to be aligned properly - by chance) and get unlucky with another version because the arrays'
<br/>
addresses have changed, etc.
<br/>
Quote the code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47419 - tepples - Fri Jul 08, 2005 6:12 pm</h4>
    <div class="postbody"><span class="postbody">If it freezes at a white screen, and you can't narrow down which code to share, try setting DISPCNT=0 and then writing to the first element of the palette several times during your startup code. This way you can see at least how far along your code gets before it freezes.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47428 - Miked0801 - Fri Jul 08, 2005 7:31 pm</h4>
    <div class="postbody"><span class="postbody">Post the code segment that is causing alignment issues.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47543 - Peter - Sun Jul 10, 2005 6:36 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I think batblaser refers to <a class="postlink" href="http://forums.ngine.de/viewtopic.php?t=1027" target="_blank">this</a> problem. There is a bit more info.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47614 - batblaster - Mon Jul 11, 2005 12:39 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
thanks a lot , strange but true i found the problem, is simple i have 2 SWI Call of the LZ function in asm and both are aligned by 2 , moved to aligned by 4 with the apposit .align 4 all works, i really don't know why is .2 and not .4 all my previous asm code are .4 ....
<br/>
<br/>
Sorry for a disturb but i didn't check it before because i don't think is a problem...
<br/>
<br/>
All my Arrays aren't included like using .h or .c file i'm using a filesystem and incbin...
<br/>
<br/>
Cu...<br/>_________________<br/>Batblaster / 7 Raven Studios Co. Ltd
<br/>
------------------------------------------</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
