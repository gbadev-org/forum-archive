<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Function Call Overhead - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Function Call Overhead</h2>
<div id="posts">
<div class="post">
    <h4>#27018 - ScottLininger - Fri Oct 01, 2004 6:04 pm</h4>
    <div class="postbody"><span class="postbody">I'm working on an RPG engine that fires "events" when certain interactions occur. I'm handling these event calls via function pointers.
<br/>
<br/>
Every "actor" in the game has several events that could potentially be fired, but many of these events will do nothing. For example, there is an OnTick event that fires every frame that the PC is touching a given actor. For 90% of the actors on the map, this event will do nothing.
<br/>
<br/>
So my question is this: Is it more efficient to do an IF/THEN to decide whether to call the event function (saving the function call overhead 90% of the time), or to simply call an empty function that does nothing?
<br/>
<br/>
The functions themselves would at most accept 2 parameters.
<br/>
<br/>
This is definitely a *minor* performance concern, but I'm just curious.
<br/>
<br/>
Thanks!
<br/>
<br/>
-Scott</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27019 - poslundc - Fri Oct 01, 2004 6:11 pm</h4>
    <div class="postbody"><span class="postbody">It will be more efficient. You will be running through two instructions (a compare instruction that takes 1 cycle, and a branch instruction that won't be executed) versus the overhead of calling a function (context switch, branch, context switch, branch back). For 90% of the time, you may as well do the comparison instead.
<br/>
<br/>
But for the record, it almost definitely won't impact the performance of your game in the slightest.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27053 - sajiimori - Sat Oct 02, 2004 4:47 am</h4>
    <div class="postbody"><span class="postbody">Yeah, definitely use the method that results in simpler code.  I personally like using null function pointers to specify "no callback" -- then I can calloc an object and not worry about setting everything to their various defaults.  Fewer opportunities to screw up, you know. =)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27736 - Marill - Wed Oct 20, 2004 6:54 am</h4>
    <div class="postbody"><span class="postbody">there should be not that much overhead with a function call via a function pointer. granted a if else will be more efficient.
<br/>
<br/>
it really depends on how you want to use this.
<br/>
<br/>
with the function pointer calls, it may make it eaiser for you to design your NPC events, and provides you with more flexibility to change thier behaviour by setting these function pointers in a table, thus treating it as data, rather than modifying code directly.
<br/>
<br/>
but again, i am jsut saying this without looking at your code, so who knows, it may be easier/more flexible in branching statements instead.
<br/>
<br/>
anyways, you'll just have to weigh your options. - faster more efficitnet running code, or ability to seperate behavious into data so taht they can be easily modifiable later on, just by editing data and not code.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
