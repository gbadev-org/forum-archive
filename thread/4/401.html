<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mario Kart/F-Zero style graphics. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Mario Kart/F-Zero style graphics.</h2>
<div id="posts">
<div class="post">
    <h4>#2517 - TheGuru - Wed Feb 05, 2003 4:42 pm</h4>
    <div class="postbody"><span class="postbody">I'm looking for an algorithm for rotating background tiles about the z axis such as in Mario Kart or Fzero.  I saw one a while ago but didn't bookmark it and can't think of what this method would be called to look it up.
<br/>
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2518 - Splam - Wed Feb 05, 2003 4:59 pm</h4>
    <div class="postbody"><span class="postbody">It's usually called "mode 7", even though that's not really what it is ;)  Should help with your searches.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2519 - tepples - Wed Feb 05, 2003 5:14 pm</h4>
    <div class="postbody"><span class="postbody">You'll have to know about vector math (use Google).  You'll have to know a bit about fixed point math (use Google).  You'll have to know how to change the affine parameters by scanline, using hblank DMA from an array of structs into the GBA registers.
<br/>
<br/>
First create a 2D unit vector that points in the direction of the camera.  Call this 'out'.
<br/>
<br/>
Multiply the height of the camera by a constant and divide it by y to get z.  Similar triangles help you see the reasoning behind this.
<br/>
<br/>
Now fixed-point multiply this by the 'out' to get a vector 'zout'.  Rotate 'zout' right by 90 degrees (trivial) and shift it right by 8 (divide by 256) to create 'right'.
<br/>
<br/>
For each scanline, set the hardware's per-pixel vector (pa, pc) to 'right' and scanline origin to 'zout' - 120 * 'right'.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#2520 - TheGuru - Wed Feb 05, 2003 5:25 pm</h4>
    <div class="postbody"><span class="postbody">thanks guys/gals, that should help a lot</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
