<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How do you program the Yoshi's Island effect? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > How do you program the Yoshi's Island effect?</h2>
<div id="posts">
<div class="post">
    <h4>#25234 - LOst? - Thu Aug 19, 2004 6:10 am</h4>
    <div class="postbody"><span class="postbody">In Super Mario Advance 3 Yoshi's Island, the title screen is an island rotating. Now that's just the mode 7 effect. I guess they use some z buffer to store the objects in the right order.
<br/>
<br/>
But I have always wondered how the Yoshi's Island logo is working. How do you program a background to do that wave effect? What kind of math do you use since there is limited with CPU time during the HBLANK.
<br/>
<br/>
Turning off the Hblank interrupt will make the logo white instead of "orange with animated green wave effect". Turning off the Vcount will stop the logo from waving.
<br/>
<br/>
So how do you do the wave effect? And how do you do the color wave effect (orange to green)?
<br/>
<br/>
EDIT: The color effect is just the one palette index changing during the Hblank.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25240 - DKL - Thu Aug 19, 2004 9:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">But I have always wondered how the Yoshi's Island logo is working. How do you program a background to do that wave effect? What kind of math do you use since there is limited with CPU time during the HBLANK.</td> </tr></table><span class="postbody">
<br/>
<br/>
Precalculated sine tables.
<br/>
Did't see the effect but if all it does is an horizontal wave effect, simply change the x offset according to your table, after each line.
<br/>
If it does a two dim effect, this is a little more complex. For each pixel in output, get x in the input image by applying a formula with sine values. Do the same for y.
<br/>
<br/>
A little like that :
<br/>
x' = f_sin(x)
<br/>
y' = g_cos(y)
<br/>
<br/>
DKL</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25246 - MumblyJoe - Thu Aug 19, 2004 12:38 pm</h4>
    <div class="postbody"><span class="postbody">I don't have the game so I can't verify that it was done like this for yoshi's island, but I was under the impression that the mosaic effect did something like that...<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25250 - DKL - Thu Aug 19, 2004 1:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MumblyJoe wrote:</b></span></td> </tr> <tr> <td class="quote">I don't have the game so I can't verify that it was done like this for yoshi's island, but I was under the impression that the mosaic effect did something like that...</td> </tr></table><span class="postbody">
<br/>
<br/>
Yep, it can just be a visual trick too.
<br/>
<br/>
DKL</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25260 - DiscoStew - Thu Aug 19, 2004 4:55 pm</h4>
    <div class="postbody"><span class="postbody">I just took a loook at the game, and yes, it does use HBlank while altering the X/Y position. The color alteration seems to just be a simple change from orange, then yellow, then green, then back to orange. I didn't check on an emu, but I'm guessing that the layer with the Title on it is 4-bit, so on the HBlank, just changing the palette appropriately should do that.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
