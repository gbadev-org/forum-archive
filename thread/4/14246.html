<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Storage of large arrays - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Storage of large arrays</h2>
<div id="posts">
<div class="post">
    <h4>#141785 - QuantumDoja - Sat Sep 29, 2007 11:44 pm</h4>
    <div class="postbody"><span class="postbody">Hi, it's been a while since my last post!
<br/>
<br/>
I have some HUGE levels that I store in arrays and have ran into a problem where I can only have one level in the game, as If I add another level, and try to run the first level, it wont load and the screen gets some corruption, so I am assuming I am overwriting some memory.
<br/>
<br/>
Has anyone got an ideas or suggestions on how to get around this?
<br/>
<br/>
My first thoughts are store the arrays in a compressed format and then when its ready to load run a function on it to expand the array into memory big enough for 1 level....but again if I have HUGE levels this may not work...Or have i missed something completely?
<br/>
<br/>
Thanks
<br/>
<br/>
PS...my maps are like 2400 tiles by 600 tiles - super stupidly huge<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141789 - gauauu - Sun Sep 30, 2007 1:07 am</h4>
    <div class="postbody"><span class="postbody">First, make sure that you mark the arrays that hold your level data as const, so they stay on cartridge rom instead of getting loaded into ram.
<br/>
<br/>
Second, is your code specifically loading the level data into ram?  If so, then you should probably figure out some way of streaming the level data in from the cart in smaller chunks instead of all at once.   
<br/>
<br/>
As far as compression, depending on what HUGE means, it's probably not a bad idea, but it's not necessarily the automatic solution.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141804 - Peter - Sun Sep 30, 2007 8:23 am</h4>
    <div class="postbody"><span class="postbody">Maybe you build it as multiboot ROM.<br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141817 - QuantumDoja - Sun Sep 30, 2007 12:01 pm</h4>
    <div class="postbody"><span class="postbody">Hi, thanks for that....How do I compile for multiboot? - or is this default?
<br/>
<br/>
Chris<br/>_________________<br/>Chris Davis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141822 - Peter - Sun Sep 30, 2007 1:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>QuantumDoja wrote:</b></span></td> </tr> <tr> <td class="quote">Hi, thanks for that....How do I compile for multiboot? - or is this default?</td> </tr></table><span class="postbody">
<br/>
<a class="postlink" href="http://www.devrs.com/gba/files/gbadevfaqs.php#MBBoot" target="_blank">How do I build a ROM image that will be multiboot (MBV2,etc) compatible?</a><br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141824 - tepples - Sun Sep 30, 2007 3:45 pm</h4>
    <div class="postbody"><span class="postbody">The <span style="font-weight: bold">int __gba_multiboot;</span> that Peter's link mentions is for the (obsolete) DevKit Advance.
<br/>
<br/>
With devkitARM, you switch between ROM and RAM (multiboot) builds by using a different specs file. If you're using wintermute's GBA project template ($DEVKITPRO/examples/gba/template), change the TARGET from <span style="font-weight: bold">$(shell basename $(CURDIR))</span> to <span style="font-weight: bold">$(shell basename $(CURDIR))_mb</span>, which triggers a specs change in gba_rules. Otherwise, open your project's makefile and change <span style="font-weight: bold">-specs=gba_specs</span> to <span style="font-weight: bold">-specs=gba_mb.specs</span>.
<br/>
<br/>
And yes, it appears that the template is multiboot. If you want to switch from multiboot to a ROM build, remove the _mb.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
