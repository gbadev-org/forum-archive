<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Both keys pressed (REG_P1CNT) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Both keys pressed (REG_P1CNT)</h2>
<div id="posts">
<div class="post">
    <h4>#35869 - bobb - Fri Feb 11, 2005 6:11 pm</h4>
    <div class="postbody"><span class="postbody">Hello, I cant figure out how I can turn of that both keys kan be pressed, like up and right. 
<br/>
<br/>
It is something in the REG_P1CNT register, someone know how to enable this flag?
<br/>
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35870 - tepples - Fri Feb 11, 2005 6:43 pm</h4>
    <div class="postbody"><span class="postbody">What are you talking about? REG_P1CNT refers only to keypad interrupts. There is no way to make it impossible for the player to press diagonally on the controller.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35877 - Fatnickc - Fri Feb 11, 2005 8:43 pm</h4>
    <div class="postbody"><span class="postbody">Maybe you could do something like this :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
....
<br/>
if(keyDown(KeyUp)&amp;&amp;keyDown(KeyLeft)!=True)
<br/>
{..}
<br/>
</td> </tr></table><span class="postbody">
<br/>
etc. 
<br/>
I used a fairly similar setup in a recent tiny minigame made for a friend, but don't have the code on-hand right now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35879 - bobb - Fri Feb 11, 2005 9:28 pm</h4>
    <div class="postbody"><span class="postbody">well I have if loops to check what key is pressed, but if both keys are pressed it will go through both loops, I read this can be prevented by setting 16 of the REG_P1CNT register (Interrupt Condition Specification Flag), if its 1 it will do a logical AND if its 0 it will do an OR, but how do I set it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35881 - sajiimori - Fri Feb 11, 2005 9:30 pm</h4>
    <div class="postbody"><span class="postbody">Do you have a particular reason for using key interrupts?  If not, polling will make things simpler.  To check for 2 keys, you just check if 2 bits are on in the input register.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35888 - bobb - Sat Feb 12, 2005 12:19 am</h4>
    <div class="postbody"><span class="postbody">no but I thought it is faster (optimezed) if I just set bit 16 and dont have to do any other checks...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#35892 - sajiimori - Sat Feb 12, 2005 1:23 am</h4>
    <div class="postbody"><span class="postbody">Are you having performance issues?  If so, input is probably not your bottleneck.  Find out what it really is.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
