<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>rectangular copying - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > rectangular copying</h2>
<div id="posts">
<div class="post">
    <h4>#21854 - ProblemBaby - Tue Jun 08, 2004 12:01 am</h4>
    <div class="postbody"><span class="postbody">does it exist hardware support for rectangular copying?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21859 - sajiimori - Tue Jun 08, 2004 2:24 am</h4>
    <div class="postbody"><span class="postbody">The only hardware copying feature is DMA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21860 - tepples - Tue Jun 08, 2004 2:48 am</h4>
    <div class="postbody"><span class="postbody">If you really need hardware-accelerated copying of rectangular sections of bitmaps, then you probably need to design your engine to use mode 0 and/or sprites.
<br/>
<br/>
What are you trying to do?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21863 - ProblemBaby - Tue Jun 08, 2004 10:19 am</h4>
    <div class="postbody"><span class="postbody">I use mode 0 I want to copy map data (rects)
<br/>
to backgrounds</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#21864 - ampz - Tue Jun 08, 2004 11:25 am</h4>
    <div class="postbody"><span class="postbody">If I understand you correctly, a for loop with a DMA request in it should do the trick.
<br/>
<br/>
Assuming your memcpy implementation use DMA, something like this should work for copying rectangles of data:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(row=start_row; row&lt;=end_row; row++)
<br/>
Â  memcpy(target_base+row*row_length+start_column, source_base+row*row_length+start_column, rect_width);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
start_row == upper row of rectangle.
<br/>
end_row == lower row of rectangle.
<br/>
target_base == target map base address.
<br/>
source_base == source map base address (if there is one).
<br/>
row_length == total map width in bytes.
<br/>
start_column == left column of recangle in bytes.
<br/>
rect_width == rectangle width in bytes.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
