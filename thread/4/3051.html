<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>trouble with timers - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > trouble with timers</h2>
<div id="posts">
<div class="post">
    <h4>#17778 - Darmstadium - Sun Mar 14, 2004 6:26 pm</h4>
    <div class="postbody"><span class="postbody">I'm making a very simple game called konect four, a rip of that game connect four. For those of you who don't know what it is, it's a game where you have a board standing up vertically. It has 7 holes across the top where you can drop pieces down. Now in my game, to select what column the user wants their piece to go in, I have an arrow that they can move across the top of the board. The arrow works like this: there is a variable that keeps track of over what column the arrow is. Then there is a function that takes that info and actually moves the arrow sprite to where it should be on the screen. Every time the user presses left or right, the variable that keeps track of the arrow's position is incremented or decremented. The problem is that the arrow moves impossibly fast and you can't get it over the column you want. I tried using a timer to stop my game from taking further input until the timer gets full, but the timer doesn't seem to be working because the arrow still scrolls at insane speeds, though it does pause for 1 sec every once in a while. I would really really appreciate any help anybody could give me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17780 - poslundc - Sun Mar 14, 2004 6:51 pm</h4>
    <div class="postbody"><span class="postbody">Don't use timers. Instead, either don't accept another button press until the button has been released, or in the case of keypad movement use a variable to track how many frames have passed and only move the arrow after a sizeable delay has passed. (Use an even longer delay when the key is initially pressed before you start repeating for an effect similar to when you hold down a key on a computer keyboard.)
<br/>
<br/>
Read <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=3002" target="_blank">this thread</a> - especially the stuff about finite state machines - for information on how to construct your control loop.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17781 - DekuTree64 - Sun Mar 14, 2004 6:53 pm</h4>
    <div class="postbody"><span class="postbody">Sounds like you're just checking the keypad register and incrementing the pos if the keys are down. That means you'll move once per frame while the key is down, or 60 spaces/second. Chech the key pressing threads that have been going on lately for info on how to do a good input system. I think one was in hardware and the other was in beginners or something.
<br/>
<br/>
EDIT: Dan beat me to it, and was more informative as well. Ignore this post then.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17783 - Lupin - Sun Mar 14, 2004 6:57 pm</h4>
    <div class="postbody"><span class="postbody">i think the threads didn't really come up with a usefull result...
<br/>
<br/>
I am using a timer that i set to freq 64 and just check for key down, i wonder if i waste processing power by checking so often. I would use interrupts if i would know how to let my interrupt fire on button up event...
<br/>
<br/>
edit: woot, this is my 2^8th post!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17787 - poslundc - Sun Mar 14, 2004 7:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">i think the threads didn't really come up with a usefull result...</td> </tr></table><span class="postbody">
<br/>
<br/>
Then you should read them again, because...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I am using a timer that i set to freq 64 and just check for key down, i wonder if i waste processing power by checking so often. I would use interrupts if i would know how to let my interrupt fire on button up event...</td> </tr></table><span class="postbody">
<br/>
<br/>
... this is an extremely wasteful and overcomplicated way to handle user input.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17791 - Lupin - Sun Mar 14, 2004 7:43 pm</h4>
    <div class="postbody"><span class="postbody">well, i took a look at the threads and all the code shown there is put in the mainloop of my game, but because of my game running at different speeds depending on the scene complexity the input may go wrong (eg. moving too fast at high fps and too slow on low fps)<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17792 - Darmstadium - Sun Mar 14, 2004 7:59 pm</h4>
    <div class="postbody"><span class="postbody">Thanks a lot you guys! I'm not sure that I entirely understand the concept of finate state machines but I got my arrow to work how I want it. Again, thank you all!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
