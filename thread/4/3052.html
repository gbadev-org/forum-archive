<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>question about DMA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > question about DMA</h2>
<div id="posts">
<div class="post">
    <h4>#17793 - Darmstadium - Sun Mar 14, 2004 8:41 pm</h4>
    <div class="postbody"><span class="postbody">I use dma channel 3 to transfer a lot of stuff. For example, let's say I want to transfer my palette data for my sprites into object palette memory. I'd usually use this code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
REG_DM3SAD = (u32)spritespalette;
<br/>
REG_DM3DAD = (u32)0x5000200;
<br/>
REG_DM3CNT = 256 | DMA_ENABLE | DMA_TIMEING_IMMEDIATE | DMA_16;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But I tried halving the amount copied and doubling the word size and it worked too:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
REG_DM3SAD = (u32)spritespalette;
<br/>
REG_DM3DAD = (u32)0x5000200;
<br/>
REG_DM3CNT = 128 | DMA_ENABLE | DMA_TIMEING_IMMEDIATE | DMA_32;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
What is the difference between these two ways?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17796 - DekuTree64 - Sun Mar 14, 2004 9:28 pm</h4>
    <div class="postbody"><span class="postbody">This definitely belongs in the beginners section. 
<br/>
The difference is that 2 bytes are copied at a time on the first, and 4 bytes at a time on the second. 4 bytes at a time is faster, but if you need to copy something with a size that's not a multiple of 4, or isn't at an address aligned to 4 bytes, you need to use 2 at a time. Unless it's not a multiple of 2 either, then you're in trouble and will have to use a regular memcpy() or something.
<br/>
<br/>
EDIT: Oh, and yes, the count is the number of transfers to make of the specified size, which means you'll have to transfer twice as many 16-bit values as you would 32-bit ones.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17798 - Lupin - Sun Mar 14, 2004 9:51 pm</h4>
    <div class="postbody"><span class="postbody">hmm, you got 3 threads now... i am sure your threads will fill up a whole page when you're done with the stuff you are currently working on :P
<br/>
<br/>
That definately belongs to the beginners zone...
<br/>
<br/>
In the first code you carry 2 apples in your basket, so you have to walk more often as carring 4 apples in your basket and your grandma will be pleased to have 4 apples every day, but be aware of the evil wolf! :P
<br/>
<br/>
Yes, i am a retard :)<br/>_________________<br/><a class="postlink" href="http://pokeme.shizzle.it/" target="_blank">Team Pokeme</a>
<br/>
<a class="postlink" href="http://lupin.shizzle.it/" target="_blank">My blog and PM ASM tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#17809 - tepples - Mon Mar 15, 2004 4:09 am</h4>
    <div class="postbody"><span class="postbody">Between areas of 16-bit GBA memory (that is, everything but registers, IWRAM, and the savegame), 16-bit DMA and 32-bit DMA run at exactly the same speed. A 16-bit DMA will look like fetch, store, fetch, store, fetch, store, fetch, store, etc., while a 32-bit DMA will look like fetch, fetch, store, store, fetch, fetch, store, store, etc.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
