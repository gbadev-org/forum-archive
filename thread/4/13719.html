<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to profile code on the GBA - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > How to profile code on the GBA</h2>
<div id="posts">
<div class="post">
    <h4>#135009 - gazsp - Thu Jul 19, 2007 10:31 am</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
How exactly do I go about profiling my code for the GBA?
<br/>
<br/>
I know normally you'd just run the (-pg compiled) binary and then run gprof on the binary.
<br/>
<br/>
Not sure exactly how this would work on the GBA because the executable is running on the target platform, not on the host.
<br/>
<br/>
Any help would be much appreciated :-)
<br/>
<br/>
Cheers,
<br/>
Gaz.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135017 - Dwedit - Thu Jul 19, 2007 12:03 pm</h4>
    <div class="postbody"><span class="postbody">You use visualboyadvance-sdl, which supports profiling.  I couldn't get it to work though.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135020 - gazsp - Thu Jul 19, 2007 12:27 pm</h4>
    <div class="postbody"><span class="postbody">Cool, cheers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135049 - gazsp - Thu Jul 19, 2007 7:37 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
After compiling and linking with -g and -pg, I'm getting loads of undefined references to LP0, LP1 etc.
<br/>
<br/>
These appear as labels in the assembled code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">.LM1:
<br/>
   push   {r7, lr}
<br/>
   mov   r7, sp
<br/>
   .data
<br/>
   .align   2
<br/>
.LP0:
<br/>
   .word   0
<br/>
   .text
<br/>
   mov   ip, lr
<br/>
   bl   mcount
<br/>
   .word   LP0
<br/>
.LM2:
<br/>
   ldr   r2, .L2
<br/>
   ldr   r3, .L2+4
<br/>
   str   r3, [r2]</td> </tr></table><span class="postbody">
<br/>
<br/>
Any ideas what I'm doing wrong?
<br/>
<br/>
Cheers,
<br/>
Gaz.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#135050 - gazsp - Thu Jul 19, 2007 7:55 pm</h4>
    <div class="postbody"><span class="postbody">I've found this
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=2431&amp;highlight=gprof" target="_blank">http://forum.gbadev.org/viewtopic.php?t=2431&amp;highlight=gprof</a>
<br/>
<br/>
But it doesn't really explain how to get rid of the undefined references. Any ideas anyone?
<br/>
<br/>
Cheers,
<br/>
Gaz.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
