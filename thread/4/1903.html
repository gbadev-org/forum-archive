<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Random -> real (integer) numbers (not broken) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Random -> real (integer) numbers (not broken)</h2>
<div id="posts">
<div class="post">
    <h4>#9730 - jenswa - Fri Aug 15, 2003 2:25 pm</h4>
    <div class="postbody"><span class="postbody">While searching the forums, i came along
<br/>
this piece of code:
<br/>
<br/>
{ 
<br/>
	seed *= 69069; 
<br/>
	return min + ((max - min + 1) * (seed &gt;&gt; 16)) / 0x10000; 
<br/>
}
<br/>
<br/>
generates real numbers (like 0,1,2,3, etc) or broken numbers also like 5,5?
<br/>
<br/>
Because i need a code which generates a real random number.
<br/>
Or i can just use an array with whole numbers, if i am lazy.
<br/>
<br/>
Thanx
<br/>
<br/>
Jenswa<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9788 - sgeos - Mon Aug 18, 2003 5:48 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jenswa wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
{ 
<br/>
	seed *= 69069; 
<br/>
	return min + ((max - min + 1) * (seed &gt;&gt; 16)) / 0x10000; 
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That looks like code I could have written.  It is used to generate integers between and including min and max.  It will also work with fixed point numbers.  It might even work with negative fixed point numbers numbers.  What are you trying to do?
<br/>
<br/>
Floats are slow.  This code is untested.  Something like this should work:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">float random_real(float min, float max)
<br/>
{
<br/>
  seed *= 69069; 
<br/>
  return min + (float)((max - min + 1.0) * (seed &gt;&gt; 16)) / 0x10000; 
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9794 - jenswa - Mon Aug 18, 2003 10:30 am</h4>
    <div class="postbody"><span class="postbody">Oh i was, quite unclear, i meant number like 1, 2, 3, 4, 5.
<br/>
<br/>
Thanx<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9797 - torne - Mon Aug 18, 2003 12:35 pm</h4>
    <div class="postbody"><span class="postbody">Yes, if you are not using fixedpoint or anything (and you'd know if you were), then it will generate numbers as you want. Give it min=1, max=6 and it will be a reasonable approximation of an ordinary die (except only pseudorandom). =)
<br/>
<br/>
Your use of the term 'real random number' is probably what's confusing; in mathematics a real number is a number which is not an integer, like 5.2153151 or something. What you want is a random integer, and this code will do that fine.
<br/>
<br/>
Torne</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9804 - Lupin - Mon Aug 18, 2003 2:28 pm</h4>
    <div class="postbody"><span class="postbody">Hm, doesnt the / indicate an software floating point operation?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9805 - sgeos - Mon Aug 18, 2003 4:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">Hm, doesnt the / indicate an software floating point operation?</td> </tr></table><span class="postbody">
<br/>
<br/>
Specifically which division?  It depends on the context.  If I recall correctly
<br/>
  int / float = float
<br/>
  float / int = float
<br/>
  int / int = int
<br/>
<br/>
This always works:
<br/>
  (float) anything / anything = float
<br/>
<br/>
There are place where the compiler automatically casts for you.  Without knowing those, the compiler may or may not actually do what you want done.  Being explicit never hurts.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9811 - Lupin - Mon Aug 18, 2003 8:24 pm</h4>
    <div class="postbody"><span class="postbody">yep, but an bios divide would perhaps be better.
<br/>
<br/>
is this divide really neccesary to get the number?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9812 - jenswa - Mon Aug 18, 2003 8:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">yep, but an bios divide would perhaps be better.
<br/>
<br/>
is this divide really neccesary to get the number?</td> </tr></table><span class="postbody">
<br/>
That's a good question, i would like to know that too.
<br/>
But instead of the bios one i could use the one that uses less cycles,
<br/>
or use an integer square root.
<br/>
<br/>
Anywayz, i just casted the random number to u8 or s8,
<br/>
i only need a little number.<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9814 - Lupin - Mon Aug 18, 2003 9:53 pm</h4>
    <div class="postbody"><span class="postbody">the best would be to do an simple 16 bit right shift though, but i still dont understand why this divide is there...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#9816 - sgeos - Mon Aug 18, 2003 11:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupin wrote:</b></span></td> </tr> <tr> <td class="quote">the best would be to do an simple 16 bit right shift though, but i still dont understand why this divide is there...</td> </tr></table><span class="postbody">
<br/>
<br/>
A 16 bit shift right is the same thing as a divide by 0x10000.  Even poor compilers preform simple optimizations like that.  Although GCC isn't the best complier, it's not a poor one by any means.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
