<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>'interrupt' function attribute extension in GCC - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > 'interrupt' function attribute extension in GCC</h2>
<div id="posts">
<div class="post">
    <h4>#28891 - ayqazi - Mon Nov 08, 2004 3:43 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
Just browsing the GCC info file looking at extensions and stuff, and here's what I came across:
<br/>
<br/>
`interrupt'
<br/>
     Use this attribute on the ARM, AVR, C4x, M32R/D and Xstormy16
<br/>
     ports to indicate that the specified function is an interrupt
<br/>
     handler.  The compiler will generate function entry and exit
<br/>
     sequences suitable for use in an interrupt handler when this
<br/>
     attribute is present.
<br/>
<br/>
     Note, interrupt handlers for the m68k, H8/300, H8/300H, H8S, and
<br/>
     SH processors can be specified via the `interrupt_handler'
<br/>
     attribute.
<br/>
<br/>
     Note, on the AVR, interrupts will be enabled inside the function.
<br/>
<br/>
     Note, for the ARM, you can specify the kind of interrupt to be
<br/>
     handled by adding an optional parameter to the interrupt attribute
<br/>
     like this:
<br/>
<br/>
          void f () __attribute__ ((interrupt ("IRQ")));
<br/>
<br/>
     Permissible values for this parameter are: IRQ, FIQ, SWI, ABORT
<br/>
     and UNDEF.
<br/>
<br/>
<br/>
Does anybody know if this works?  You'll excuse me if I am talking gibberish, its been a while since I tried GBA coding.  From what I remember (from doing the famous gba coding tutorials) writing interrupt functions required different techniques than this.
<br/>
<br/>
Thanks,
<br/>
          Asfand Yar<br/>_________________<br/>--
<br/>
<a href="http://www.it-is-truth.org/" target="_blank">http://www.it-is-truth.org/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28900 - tepples - Mon Nov 08, 2004 4:36 pm</h4>
    <div class="postbody"><span class="postbody">The GBA doesn't need interrupt handlers to be declared as ARM interrupt handlers because the BIOS has an internal interrupt handler that just calls yours as a standard procedure.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28920 - ayqazi - Mon Nov 08, 2004 6:36 pm</h4>
    <div class="postbody"><span class="postbody">The devrs faq says some stuff about the stack not being very big by default and of only some of the registers being saved when the interrupt function is called.  I just thought that this was an easy way to avoid these problems.
<br/>
<br/>
I also thought that I could be a bit clever and get everybody to say, "wow! what a clever guy he is, we didn't know that before!"  Oh well, maybe next time :-)<br/>_________________<br/>--
<br/>
<a href="http://www.it-is-truth.org/" target="_blank">http://www.it-is-truth.org/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28936 - Abscissa - Mon Nov 08, 2004 10:08 pm</h4>
    <div class="postbody"><span class="postbody">Wow! What a clever guy ayqazi is, I didn't know that before!
<br/>
<br/>
;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#28966 - ayqazi - Tue Nov 09, 2004 8:16 am</h4>
    <div class="postbody"><span class="postbody">*sob*  You've made me so happy.....<br/>_________________<br/>--
<br/>
<a href="http://www.it-is-truth.org/" target="_blank">http://www.it-is-truth.org/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
