<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Self decompression program works--snip-- - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Self decompression program works--snip--</h2>
<div id="posts">
<div class="post">
    <h4>#79210 - Dwedit - Wed Apr 12, 2006 3:58 am</h4>
    <div class="postbody"><span class="postbody">I'm working on writing a self-decompression program, which would allow a compressed GBA rom to decompress itself to the 32MB of RAM found on an M3, G6, or SuperCard.  I'm completely perplexed that the program doesn't work on the M3, but I've built a special version of VisualBoyAdvance which allows writes to the ROM area, and it works fine in that.
<br/>
<br/>
If you want to try out the stub program, compression tool, or special VBA, let me know.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"><br/><br/>Last edited by Dwedit on Fri Apr 14, 2006 11:38 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#79242 - tepples - Wed Apr 12, 2006 12:58 pm</h4>
    <div class="postbody"><span class="postbody">In what way does it "not work"? Perhaps the RAM unlocking code isn't correct.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79264 - Dwedit - Wed Apr 12, 2006 3:47 pm</h4>
    <div class="postbody"><span class="postbody">The RAM unlocking code seems to work fine.  After doing the unlock, I verify that ram is writable by writing 0xDEADBEEF to address 0x09876540, and that works.  It seems that the M3's loader software tends to behave like <a class="postlink" href="http://www.zophar.net/utilities/corruptutil.html" target="_blank">One of these programs</a>, but now it appears that good old fashioned BUGS (on my part) may be preventing the program from working.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79265 - wintermute - Wed Apr 12, 2006 3:50 pm</h4>
    <div class="postbody"><span class="postbody">You'll need to use VRAM safe compression and decompression. GBA cart space can't be written in 8bit increments either.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79266 - Dwedit - Wed Apr 12, 2006 3:58 pm</h4>
    <div class="postbody"><span class="postbody">I fixed a few bugs in the custom VBA, now it behaves just like the M3.
<br/>
<br/>
Looks like this code to write streaming bytes to vram type memory was probably incorrect:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   tst dest,#1
<br/>
   streqb temp,[dest],#1
<br/>
   ldrneb sbdata,[dest,#-1]!
<br/>
   orrne sbdata,sbdata,temp,lsl#8
<br/>
   strneh sbdata,[dest],#2
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79343 - swimgod - Thu Apr 13, 2006 1:26 am</h4>
    <div class="postbody"><span class="postbody">dwedit,
<br/>
your program at first does not work
<br/>
when i compress it and try it on supercard,
<br/>
then i sent it through their patcher,
<br/>
then i gives me
<br/>
"SuperCard
<br/>
AP32
<br/>
Copying&lt;red screen during this&gt;
<br/>
decompressing&lt;blue screen during&gt;
<br/>
&lt;then black and nothing else and seems to be frozen &gt;.&lt;;&gt;"
<br/>
<br/>
whats wrong?<br/>_________________<br/><span style="font-size: 9px; line-height: normal">
<br/>
1x <span style="font-weight: bold">WII</span> 2x remotes
<br/>
2x NDS/L(FMv7-ORG:v4,FMv7-org:DSL)
<br/>
1x GBAMP
<br/>
2x 1gb (MicroDrive{typeII}&amp;SanDisk{typeI})
<br/>
1x SuperPass2
<br/>
1x Supercard-CF</span>
<br/>
<a class="postlink" href="http://swimgod.com/ms_skins" target="_blank">MoonShell skins</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79357 - Dwedit - Thu Apr 13, 2006 3:53 am</h4>
    <div class="postbody"><span class="postbody">What's wrong is that my program is buggy and broken.  I'll go post the fixed version here once it works.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79359 - swimgod - Thu Apr 13, 2006 4:17 am</h4>
    <div class="postbody"><span class="postbody">thanks dwedit,
<br/>
i hope this project is sucessfull :D
<br/>
maybe it will convince more people to take advantage of the ram avalible :).
<br/>
might as well use the ram in the m3 and supercard,
<br/>
or else the power is just being wasted :P,
<br/>
<br/>
(maybe i should come up with a hard ware hack to turn off sram,
<br/>
so you don't waste power?,
<br/>
that would be nice conserving tool :D)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">
<br/>
1x <span style="font-weight: bold">WII</span> 2x remotes
<br/>
2x NDS/L(FMv7-ORG:v4,FMv7-org:DSL)
<br/>
1x GBAMP
<br/>
2x 1gb (MicroDrive{typeII}&amp;SanDisk{typeI})
<br/>
1x SuperPass2
<br/>
1x Supercard-CF</span>
<br/>
<a class="postlink" href="http://swimgod.com/ms_skins" target="_blank">MoonShell skins</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79645 - Dwedit - Fri Apr 14, 2006 11:40 pm</h4>
    <div class="postbody"><span class="postbody">Fixed the problem, I missed one of the writes and failed to make it VRAM safe like I did with all the rest.  Fixed.
<br/>
<br/>
Here's the self extractor tool!
<br/>
<a href="http://home.comcast.net/~alanweiss3/dwedit/files/decomp_stub.zip" target="_blank">http://home.comcast.net/~alanweiss3/dwedit/files/decomp_stub.zip</a>
<br/>
<br/>
And here's the special version of VBA which supports writing to rom:
<br/>
<a href="http://home.comcast.net/~alanweiss3/dwedit/files/vba_romwrite.7z" target="_blank">http://home.comcast.net/~alanweiss3/dwedit/files/vba_romwrite.7z</a><br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
