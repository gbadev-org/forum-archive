<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Using a pointer to access a u8 as a bool[8] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Using a pointer to access a u8 as a bool[8]</h2>
<div id="posts">
<div class="post">
    <h4>#82787 - Natso - Tue May 09, 2006 10:03 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, its basically explained above, but here is a rundown:
<br/>
<br/>
typedef struct{
<br/>
u8 warp;
<br/>
}test;
<br/>
<br/>
test T;
<br/>
<br/>
//blah blah blah
<br/>
/*
<br/>
T.warp is now the u8. it has been given a random 1 or 0 for each of the eight bits in it. I now need to access each individually as a boolean variable...
<br/>
*/
<br/>
<br/>
I have tried several things with pointers but none have gotten me anywhere so I will not post them online. Basically I would like to create a pointer that points to T.warp and is a bool, not a u8, so that I can work it as planned...
<br/>
Any help is appreciated - Thanks in advance
<br/>
<br/>
 - Zach
<br/>
<br/>
edit: I have tried to do it so the pointer is also an array but I can't get this to work. however it would be just as good if I could get it something like " *(pointer_to_warp+index)"... I've had no luck with that either though.<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82788 - Mighty Max - Tue May 09, 2006 10:16 pm</h4>
    <div class="postbody"><span class="postbody">Set bit n:
<br/>
<br/>
test.warp |= (1&lt;&lt;n) ;
<br/>
<br/>
Clear bit n:
<br/>
<br/>
test.warp &amp;= ~(1&lt;&lt;n) ;
<br/>
<br/>
Swap bit n
<br/>
<br/>
test.warp ^= (1&lt;&lt;n) ;
<br/>
<br/>
<br/>
Test for bit n
<br/>
<br/>
if (test.warp &amp; (1&lt;&lt;n)) { 
<br/>
  ...
<br/>
}
<br/>
<br/>
However, you can not create a pointer of bool to each bit, which you can use as bit[n] = true or such, as boolean is greater then a bit.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82789 - Natso - Tue May 09, 2006 10:18 pm</h4>
    <div class="postbody"><span class="postbody">... I thought that a boolean was true/false, which is in essence one 1/0 space in the data, and also that u8 was 8 of the spaces, and that 8 booleans could be masked over it.
<br/>
<br/>
I will try using your codes though, thanks :D<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82791 - Mighty Max - Tue May 09, 2006 10:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Natso wrote:</b></span></td> </tr> <tr> <td class="quote">... I thought that a boolean was true/false, which is in essence one 1/0 space in the data, and also that u8 was 8 of the spaces, and that 8 booleans could be masked over it.
<br/>
<br/>
I will try using your codes though, thanks :D</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, boolean is only true or false, but in order to be addressable on a machine, it allways had to swallow up at least a complete byte (which is the smallest addressable unit on machines)
<br/>
<br/>
Then a bool is false, if all bits of its assigned byte/word are 0, otherwise its true.
<br/>
<br/>
A non-packed bool should be 4bytes (a word) on ARM gcc toolchain afaik.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82792 - sajiimori - Tue May 09, 2006 11:17 pm</h4>
    <div class="postbody"><span class="postbody">It's important to understand how bitwise operations work, but after you do understand them, use std::bitset to simplify your code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82793 - Natso - Tue May 09, 2006 11:20 pm</h4>
    <div class="postbody"><span class="postbody">Huzzah it worked like a charm, first try! Thanks a bunch! Also with what you say, it seems i have picked the most memory efficient way to deal with this data... I was sooo happy when I saw the warp points appear correctly, not all or none like i've been getting before.<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82804 - Dwedit - Wed May 10, 2006 4:56 am</h4>
    <div class="postbody"><span class="postbody">Note that unless you need to pack to SRAM, or are very tightly constrained for RAM, or use a large array, it may be better to not address bits individually, since the code to address them may take around 4 more instructions than addressing the bytes.  If you do it a lot, the extra instructions may add up to more than the size of the bit array.  As a possible size optimization, try to access bit arrays as few times as possible, maybe wrap access inside a function call.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82806 - ScottLininger - Wed May 10, 2006 5:35 am</h4>
    <div class="postbody"><span class="postbody">Yeah, unless you're hitting memory constraints, an array of ints will work better, even if you're "wasting" a bunch of bits. An int will happily contain 1 or 0 and work in boolean expressions like...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if (warpPoint[0] || warpPoint[1]) {
<br/>
Â  //do something; 
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82863 - Natso - Wed May 10, 2006 10:12 pm</h4>
    <div class="postbody"><span class="postbody">Basically I just needed to have the u8 hold the 8 values, because in a System(solar system) in the game, there can be up to eight warp points in each system, and i noticed I could save SRAM by using a u8, and so I did. I don't need to access them excessively(only when the sector is drawn, and that is only during the player's turn and it isn't exactly often in terms of the speed of the processor.
<br/>
<br/>
Coincidintally, though, I am packing my SRAM (i've got about 800 bytes left for emergency purposes, the rest is full), and my RAM just ran out recently and I had to change my text from u8 arrays to using #define in their place<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82871 - ScottLininger - Wed May 10, 2006 11:12 pm</h4>
    <div class="postbody"><span class="postbody">Ahh... SRAM. Say no more. Yeah, so bit masking is the way to go.
<br/>
<br/>
-Scott</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
