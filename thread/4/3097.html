<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Watchpoints in GDB? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Watchpoints in GDB?</h2>
<div id="posts">
<div class="post">
    <h4>#18174 - regularkid - Mon Mar 22, 2004 9:25 am</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
ok, so I have got GDB to work and am trying to fix a crash bug. Somehow my RAM is getting corrupted, but I'm not sure by what. I know that some debuggers have the ability to put "watchpoints" in where it will break execution when a certain address is written to. Then, once in the break, you can examine the callstack and find out what exactly is changing that memory address. So, I want to do the same type of thing here: put a watchpoint on an address in RAM and just run the game and wait for the break to happen whenever this memory address is written to. Is this possible in GDB? If not, anyone know of a good way to debug something like this? Thanks!<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18179 - bomberman - Mon Mar 22, 2004 10:15 am</h4>
    <div class="postbody"><span class="postbody">I do not think this is possible with Visual Boy Advance... I also think this feature is very useful in debug sessions, unfortunately I never succeeded in having this work :O(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18186 - yaustar - Mon Mar 22, 2004 2:51 pm</h4>
    <div class="postbody"><span class="postbody">It is possible with insight GDB, that is an icon that looks like a pair of glasses.<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18188 - bomberman - Mon Mar 22, 2004 2:59 pm</h4>
    <div class="postbody"><span class="postbody">Insight GDB proposes this as it is a front end to gdb. But I am not sure that Visual Boy Advance provides this feature.
<br/>
Eclipse also proposes that but it won't work...
<br/>
<br/>
Did you actually manage to have this feature work ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18193 - yaustar - Mon Mar 22, 2004 4:05 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://madsims.net/~yaustarc/misc/gdb.png" target="_blank">http://madsims.net/~yaustarc/misc/gdb.png</a> :)<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18201 - regularkid - Mon Mar 22, 2004 4:43 pm</h4>
    <div class="postbody"><span class="postbody">But you can't actually make the program break when the value for a variable you are watching (glasses icon) changes (gets written to). Correct?
<br/>
<br/>
By the way, yaustar: thanks for the help on getting GDB working for me (i didn't thank you in the other post).<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18202 - yaustar - Mon Mar 22, 2004 4:47 pm</h4>
    <div class="postbody"><span class="postbody">Not really, the best thing you can get is to put a breakpoint when it changes and after rereading your initial post I actually understand the question (d'oh).
<br/>
<br/>
whoops.....
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">By the way, yaustar: thanks for the help on getting GDB working for me (i didn't thank you in the other post).</td> </tr></table><span class="postbody">no problem :)<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18206 - bomberman - Mon Mar 22, 2004 5:02 pm</h4>
    <div class="postbody"><span class="postbody">So we can not... This feature is invaluable when you come to debug nasty things !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18209 - yaustar - Mon Mar 22, 2004 5:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Console Output
<br/>
--------------
<br/>
<br/>
There are two forms of console output in this version:
<br/>
<br/>
- Mappy style dprint: use the following code (from Mappy's documentation) to get
<br/>
  output:
<br/>
<br/>
- VBA style: use the following code to get output:
<br/>
  // THUMB code
<br/>
  void print(char *s)
<br/>
  {
<br/>
    asm volatile("mov r0, %0;"
<br/>
                 "swi 0xff;"
<br/>
                 : // no ouput
<br/>
                 : "r" (s)
<br/>
                 : "r0");
<br/>
  }
<br/>
  // ARM code
<br/>
  void print(char *s)
<br/>
  {
<br/>
    asm volatile("mov r0, %0;"
<br/>
                 "swi 0xff0000;"
<br/>
                 : // no ouput
<br/>
                 : "r" (s)
<br/>
                 : "r0");
<br/>
  }
<br/>
<br/>
When using GDB, the output will show up in GDB's console. When using the built-in
<br/>
debugger, output will go to standard out.
<br/>
<br/>
Built-in debugger enhancements
<br/>
------------------------------
<br/>
<br/>
The built-in debugger has the following enhancements (need debug enabled ELF
<br/>
file):
<br/>
- ELF file support: both multiple and regular. Please report any messages or
<br/>
  problems reading ELF files. C++ classes and some miscellaneous features are
<br/>
  not supported yet. Also, method names may be mangled in C++ code.
<br/>
- break command: add a breakpoint on a function, line number of file:line
<br/>
  number
<br/>
- locals command: print the local variables on the current function
<br/>
- print command: prints the value of a given expression. Valid expression
<br/>
  include *this, ptr-&gt;member, var.member, array[0], sizeof(expression), etc...
<br/>
- symbols command: list information known about a symbol (or symbols that start
<br/>
  with the given name)
<br/>
- radix command: sets the output radix to eithe decimal, octal or hex.
<br/>
- file and line number when stopped: the debugger will show the file and line
<br/>
  number (if available) for the current address
<br/>
- fixes to some breakpoint handling problems
<br/>
- fixes to break on write function</td> </tr></table><span class="postbody"> from the readme, it looks like it can be possible...not sure how myself...:/<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18211 - bomberman - Mon Mar 22, 2004 6:05 pm</h4>
    <div class="postbody"><span class="postbody">hmmm.... it mentions breakpoints, not watchpoints !
<br/>
<br/>
Ignore the post... it says breakpoint on write function you're right !
<br/>
But I never succeeded to make it work :O(</span><span class="gensmall"><br/><br/>Last edited by bomberman on Mon Mar 22, 2004 6:22 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#18212 - yaustar - Mon Mar 22, 2004 6:20 pm</h4>
    <div class="postbody"><span class="postbody">hmmm...true
<br/>
The only thing i can think off is using ASSERT but it depends on the level of corruption.
<br/>
<br/>
eg a &gt; 160 then ASSERT<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18214 - regularkid - Mon Mar 22, 2004 6:37 pm</h4>
    <div class="postbody"><span class="postbody">Yeah! It does say that it can break on the write function. Sweet! Now if we can only figure out how to make it work...I'll keep trying and let you guys know if I find anything out.<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18216 - Miked0801 - Mon Mar 22, 2004 6:45 pm</h4>
    <div class="postbody"><span class="postbody">The only emulator that I know that supports breaks on writes to memory (and watches) is No$GBA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18221 - bomberman - Mon Mar 22, 2004 6:58 pm</h4>
    <div class="postbody"><span class="postbody">Yes I know this emulator supports every feature I dream about except its price :O(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18224 - regularkid - Mon Mar 22, 2004 7:09 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, the price sucks.....$5000!! Too much for us small time developers.<br/>_________________<br/>- RegularKid</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18226 - yaustar - Mon Mar 22, 2004 7:57 pm</h4>
    <div class="postbody"><span class="postbody">The freeware one is still laying around some where, but I dont think it supports C/C++ source code :(<br/>_________________<br/>[<a class="postlink" href="http://parabellumgames.no-ip.org" target="_blank">Blog</a>] [<a class="postlink" href="http://yaustar.no-ip.org" target="_blank">Portfolio</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18250 - dagamer34 - Tue Mar 23, 2004 3:48 am</h4>
    <div class="postbody"><span class="postbody">Even if you had that kind of money, Martin only sells his emulator to those who have a licsence from Nintendo, like Miked0801 over here.
<br/>
<br/>
But for now, VBA tries its best, all for a nice price of $0. I'm not complaining.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18251 - Miked0801 - Tue Mar 23, 2004 5:05 am</h4>
    <div class="postbody"><span class="postbody">Truth is, Martin has been MIA for quite some time.  We can't get any questions or bugs fixed for awhile now which is very annoying.  I think that he buried himself in his new pet project, a C64 emulator.  I kinda wish he'd finish his current one...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#18257 - tepples - Tue Mar 23, 2004 5:43 am</h4>
    <div class="postbody"><span class="postbody">VBA is free software. If you can afford a Nintendo license and a No$gba license, then you most likely can afford to hire programmers to add one or more of the necessary features and submit the patch to Forgotten.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
