<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>random numbers + elimination - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > random numbers + elimination</h2>
<div id="posts">
<div class="post">
    <h4>#19914 - darknet - Wed Apr 28, 2004 12:01 am</h4>
    <div class="postbody"><span class="postbody">Well one of the mini-games I am working on goes like so:
<br/>
<br/>
Its basically a classical video gaming quiz (since my project is a collection of classic remakes) that shows the user a screenshot of some famous game that they have to name by selecting from the choices given. I have 25 built in as of now but only require the user to look at 10 and get 10 correct. 
<br/>
<br/>
The entire mini-game seems very trivial to me with the exception of one aspect. I want the sequence of screens to be random and not have the same one appear twice. 
<br/>
<br/>
For example, I want to prevent the folowing sequence: Mortal Kombat II, Dig Dug, Mario Kart, Mortal Kombat II.
<br/>
<br/>
To fight that right now, I have a screenshot structure that has a 'used' flag that is set when the screenshot has been randomly generated. 
<br/>
<br/>
However, the only routine I can think of for generating a random screen  is as follows:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//num_screens is the total amount available.
<br/>
<br/>
Screenshot screens[num_screens];
<br/>
<br/>
.....
<br/>
<br/>
 while(lessThanTenCorrect) {
<br/>
<br/>
   int screenToShow = (rand()%(num_screens-1));
<br/>
<br/>
      if( !screens[screenToShow].used) { 
<br/>
       //go ahead and process and getinput and whatnot, set to used.
<br/>
      }
<br/>
<br/>
       else { 
<br/>
      //pick another random number? 
<br/>
      } 
<br/>
<br/>
    //check if ten have been answered....set lessThanTen to false if true
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Ideally,  I want a function that gets a random number bounded by the amount of screens available, and once a number has been generated, DO NOT use that same generated value again when the random function is recalled within a loop.
<br/>
<br/>
Sorry if this seems trivial, I know what I have will work, but I want to somehow prevent from constantly generating the same random number, thus slowing down the program dramatically.
<br/>
<br/>
Any help is greatly appreciated,
<br/>
-Mike</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19917 - tepples - Wed Apr 28, 2004 12:17 am</h4>
    <div class="postbody"><span class="postbody">So you want to create a random permutation. The easiest way to do this:<ol type="1"><li>Initialize an array to [0, 1, 2, 3, ...] as long as the permutation.</li><li>For each element in the array, swap it with a PRNG-chosen element.</li></ol>
<br/>
Another way borrows from implementation of <a class="postlink" href="http://ciips.ee.uwa.edu.au/~morris/Year2/PLDS210/hash_tables.html" target="_blank">hash tables</a>: if you choose an item that's already in use, jump to another item using probing.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19919 - darknet - Wed Apr 28, 2004 12:26 am</h4>
    <div class="postbody"><span class="postbody">of course! thats a great idea, thanks tepples, I will try that immediately.
<br/>
<br/>
-Mike</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19927 - darknet - Wed Apr 28, 2004 2:41 am</h4>
    <div class="postbody"><span class="postbody">I did exactly what I believe it was you told me to do...however the problem is that it gives me many many repeat values. Here's the function:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void createRandomPermutation(int a[]) {
<br/>
<br/>
  int swapWith, temp;
<br/>
<br/>
  for(int i = 0; i &lt; NUMBER_OF_SCREENSHOTS; i++) {
<br/>
<br/>
     swapWith = (rand()%(NUMBER_OF_SCREENSHOTS-1));
<br/>
<br/>
     temp = a[i];
<br/>
     a[i] = a[swapWith];
<br/>
     a[swapWith] = a[temp];
<br/>
<br/>
  }
<br/>
} 
<br/>
</td> </tr></table><span class="postbody">
<br/>
I did initalize the loop first and then I called that function (i.e. array[0] = 0, array[1] = 1, etc...)
<br/>
<br/>
Even stranger, every time the program is ran I get THE SAME set of random generations....
<br/>
<br/>
hmmm..
<br/>
<br/>
any reply is appreciated, thanks a lot,
<br/>
-Mike</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19929 - sgeos - Wed Apr 28, 2004 3:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darknet wrote:</b></span></td> </tr> <tr> <td class="quote">Even stranger, every time the program is ran I get THE SAME set of random generations....</td> </tr></table><span class="postbody">
<br/>
How are you seeding your RNG?  If you seed it with the same value every time, you will get the same "random" sequence.  If your code looks something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">initialize_timers(REALLY_FAST);
<br/>
setup_code();
<br/>
srand(get_timer_value());</td> </tr></table><span class="postbody">
<br/>
That will run the same way
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">srand(PRESET_VALUE);</td> </tr></table><span class="postbody">
<br/>
does, because the setup code takes a fixed amount of time.  You'll need to seed from SRAM or after the user input to make thing less predictable:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">initialize_timers(REALLY_FAST);
<br/>
setup_code();
<br/>
wait_for_input();
<br/>
srand(get_timer_value());</td> </tr></table><span class="postbody">
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19930 - niltsair - Wed Apr 28, 2004 4:04 am</h4>
    <div class="postbody"><span class="postbody">Also here:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">temp = a[i];
<br/>
     a[i] = a[swapWith];
<br/>
     a[swapWith] = a[temp]; </td> </tr></table><span class="postbody">
<br/>
<br/>
You made an error.  Last line should be : a[swapWith] = temp;
<br/>
Since you're storing the value directly and not the position.
<br/>
<br/>
To get a better random number, search on this forum 'random', there are a couple of post that discuss this in details. Just using the rand() function won't do on the Gba.<br/>_________________<br/>-Inside every large program is a small program struggling to get out. (Hoare's Law of Large Programs)
<br/>
-The man who can smile when things go wrong has thought of someone he can blame it on. (Nixon's Theorem)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#19938 - sgeos - Wed Apr 28, 2004 6:57 am</h4>
    <div class="postbody"><span class="postbody">rand() will work.  It is just not the best RNG out there.
<br/>
<br/>
rand() % VALUE is a horrible way to get a random number.  Read the rand man page for details.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
