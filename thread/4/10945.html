<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problems with arm-eabi-objcopy - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Problems with arm-eabi-objcopy</h2>
<div id="posts">
<div class="post">
    <h4>#100124 - Edelnutte - Sat Aug 26, 2006 12:15 pm</h4>
    <div class="postbody"><span class="postbody">Hi folks,
<br/>
I'm trying to make an English-German Dictionary for the GBA (which was supposed to be for DS, that was before I had a GBMicro :P )
<br/>
<br/>
Anyway, because the Wordlist is 7MByte of data, I want the list to be an object file so that the compilation won't take ages. 
<br/>
<br/>
First I heard of Converting the binary (my wordlist obviously) into an *.s file and then use arm-eabi-gcc to receive an *.o file. 
<br/>
I couldn't get this work and after a little googling around I found out that it should also be possible to convert it via objcopy, but I found out that the arguments have changed and I can't compile my program with the *.o file I get from arm-eabi-objcopy.exe
<br/>
<br/>
This is the command I use for converting with the actual version of arm-eabi-objcopy.exe I think. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">arm-eabi-objcopy -I binary -O elf32-littlearm -g --readonly-text list.txt list.o </td> </tr></table><span class="postbody">
<br/>
<br/>
I would be damn happy If someone could help me getting rid off the compiling errors by letting me know the right options to use.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100134 - wintermute - Sat Aug 26, 2006 1:56 pm</h4>
    <div class="postbody"><span class="postbody">Where are you planning on putting this 7MB of data?
<br/>
<br/>
The DS has 4MB of RAM.
<br/>
<br/>
You'd be much better off using libfat and accessing it as a normal data file.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100158 - poslundc - Sat Aug 26, 2006 4:31 pm</h4>
    <div class="postbody"><span class="postbody">Tip: when asking questions about errors with command-line tools, it's generally a good idea to post the error.
<br/>
<br/>
Try googling up the man page for objcopy and see what the command line options are.
<br/>
<br/>
This should be fine for the GBA so long as the data gets placed into a constant section (.text or .rodata), which means it will get placed on the ROM. If it's for the DS, then as Wintermute says, you won't be able to store the entire thing in RAM.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100160 - tepples - Sat Aug 26, 2006 4:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Where are you planning on putting this 7MB of data?
<br/>
<br/>
<span style="font-weight: bold">The DS</span> has 4MB of RAM.</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Edelnutte wrote:</b></span></td> </tr> <tr> <td class="quote">I'm trying to make an English-German Dictionary <span style="font-weight: bold">for the GBA</span> (which was supposed to be for DS, that was before I had a GBMicro :P )</td> </tr></table><span class="postbody">
<br/>
It's more than likely a GBA program intended to run on a NOR card or a NAND+RAM card. The dictionary would be placed somewhere in GBA ROM space (more than likely in 0x08000000-0x087FFFFF), as poslundc points out. The only time this would interfere would be on the GBA Movie Player v2, in which case I'd recommend using the FAT library to read dictionary entries from the CF card.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100167 - Edelnutte - Sat Aug 26, 2006 5:32 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your replies, I already managed to convert it (it worked with arme-eabi-ld.real.exe I received a .ext file and had no problems using it with the final objcopy)
<br/>
The problem with the errors was well it was a lot!
<br/>
Of course I put the data into ROM, It's placed between 0x08017e48 and 0x086eccb2(in Normal Rom). If it works on my EFA 512 I'll think about a MP Version.
<br/>
Does anybody know how I can avoid to work with the adress, I mean for searching the query I would start at 0x08017e48[0] But this doesn't work if the Rom is put with serveral others because the position changed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100170 - tepples - Sat Aug 26, 2006 5:49 pm</h4>
    <div class="postbody"><span class="postbody">The objcopy program (whether arm-eabi-objcopy or bin2s|arm-eabi-as) should create a name for this object, which you can use from within your C program instead of using a raw address. If you have multiple GBA programs on your EFA card, each one will be loaded into 0x08000000 by the flash card's bankswitch circuitry. It may be simpler for you to use <a class="postlink" href="http://www.pineight.com/gba/#gbfs" target="_blank">GBFS</a> for something like this.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100428 - Edelnutte - Sun Aug 27, 2006 9:06 pm</h4>
    <div class="postbody"><span class="postbody">I think I'll test it with the Adress Method on Emulator, and if it works on Emulator I change the Object file with an Include File (IAfter debugging I don't care about compilation time), so it should run on most Flashcards shouldn't it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100433 - tepples - Sun Aug 27, 2006 9:41 pm</h4>
    <div class="postbody"><span class="postbody">There is almost never an excuse to hardcode addresses within ROM. The few exceptions involve cards with I/O in ROM space, such as CF and SD adapters. Using the symbolic name that objcopy produces will make your code more maintainable both for you and for others.
<br/>
<br/>
First discover the symbolic name:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">arm-eabi-nm -n theobjectfile.o</td> </tr></table><span class="postbody">
<br/>
Then use the symbolic name:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">extern unsigned char theSymbol[];</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101212 - Edelnutte - Sun Sep 03, 2006 9:47 pm</h4>
    <div class="postbody"><span class="postbody">I finally managed to imply the Wordlist with the bin2o tool (from the tools section)
<br/>
<br/>
But now I have another Problem: I need an 8x8 Font. I'm not capable of making one by myself (already tried -  what a waste of time!) and I could't find one anywhere. Does anybody know where I can get one, of xourse one to use freely?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101220 - tepples - Sun Sep 03, 2006 10:36 pm</h4>
    <div class="postbody"><span class="postbody">In which format do you need the <a class="postlink" href="http://pinocchio.jk0.org/nes/8x8s.png" target="_blank">fonts</a>?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101259 - Edelnutte - Mon Sep 04, 2006 1:56 am</h4>
    <div class="postbody"><span class="postbody">Ah dammit I forgot the most Important thing. I need them In an ASCII table! Because otherwise I would need to convert the text and if its ASCII I can just use the numbers of the char as the number of the tile in the map</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101298 - kusma - Mon Sep 04, 2006 8:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Edelnutte wrote:</b></span></td> </tr> <tr> <td class="quote">Ah dammit I forgot the most Important thing. I need them In an ASCII table! Because otherwise I would need to convert the text and if its ASCII I can just use the numbers of the char as the number of the tile in the map</td> </tr></table><span class="postbody">
<br/>
or: you could use a translation-table, and save vram for the tiles not in use!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101334 - tepples - Mon Sep 04, 2006 3:11 pm</h4>
    <div class="postbody"><span class="postbody">But how much VRAM would that save? Having tiles for all characters in Windows code page 1252 (ISO-8859-1 plus 32 extra characters) would use only 8 KiB of the GBA's VRAM. In a dictionary app (like Touch Dic without the touch), what would the extra VRAM be useful for anyway?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
