<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Static Variables - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>Coding > Static Variables</h2>
<div id="posts">
<div class="post">
    <h4>#8719 - Ninja - Fri Jul 18, 2003 4:49 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to use a few static variables in a class that I have, yet when I go to compile, every static variable I have is listed as an undefined reference in the linking step.  Am I just using them wrong, or is my makefile in error, or are they not implemented in GCC?  It will compile just fine though....
<br/>
<br/>
I am using them sort of like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// .h
<br/>
class Class
<br/>
{
<br/>
   static int Count;
<br/>
   ...
<br/>
};
<br/>
<br/>
//.cpp
<br/>
Class::Count = 0;
<br/>
<br/>
Class::Class()
<br/>
{
<br/>
   ++Count;
<br/>
   ...
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by Ninja on Fri Jul 18, 2003 5:30 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#8720 - Vortex - Fri Jul 18, 2003 5:05 pm</h4>
    <div class="postbody"><span class="postbody">The following assignment doesn't look right:
<br/>
<br/>
int Class::Count = 0; 
<br/>
<br/>
It should be Class::Count = 0; 
<br/>
<br/>
Keep in mind there is a difference between static class members (C++ style) and static variables (C style). IMO the problem is you are trying to initialize a static class member using the C syntax for initializing static variables.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8724 - Ninja - Fri Jul 18, 2003 5:28 pm</h4>
    <div class="postbody"><span class="postbody">OOPS!  That was copy and paste from someone else's example code.
<br/>
<br/>
I personally didn't use the int in my source code, and have edited my code to reflect that.  Any other ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8729 - Ninja - Fri Jul 18, 2003 5:49 pm</h4>
    <div class="postbody"><span class="postbody">Sorry... just one more thing to mention.  It might be the .cpp line that's bad.  How I am actually doing it in my program is by using a friend function to initialize the data.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//in .h
<br/>
friend void init();
<br/>
<br/>
//in .cpp
<br/>
void init()
<br/>
{
<br/>
     Class::count = 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
Is there something glaringly wrong with that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8806 - johnny_north - Sun Jul 20, 2003 5:40 pm</h4>
    <div class="postbody"><span class="postbody">What was the intended purpose of using the static? From the looks of it, you intend to do the C++ equiv. of the C #define i.e. you want to let the compiler know that a variable is garanteed not to change, this will allow the compiler to place the variable in rom rather than ram. Use static like this:
<br/>
<br/>
static const int KEY_A 		=1;
<br/>
<br/>
Otherwise, use static in a function definition to let the compiler know that you are declaring a variable that behaves like a global, with function scope:
<br/>
<br/>
void foo(){
<br/>
     static int x = 0; //x keeps its value over multiple call to foo()
<br/>
     ....
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#8850 - Ninja - Mon Jul 21, 2003 6:44 pm</h4>
    <div class="postbody"><span class="postbody">What I was trying to do with the statics was to mark the index at which the current OAM memory was used up to.  In this way, I can add a sprite at that index without problem.  I am currently using external globals to mark the indices, but using a static would be a lot better style.
<br/>
<br/>
The thing that I am trying to do basically, is create a variable that's shared by all members of the class, but is not accessable outside the class.  Each object created by the class should have the ability to modify the variables though.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
