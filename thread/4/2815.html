<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Game Organisation. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > Game Organisation.</h2>
<div id="posts">
<div class="post">
    <h4>#16056 - Krakken - Sat Feb 07, 2004 9:54 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I have recently been working on quite a complicated game and am not too happy with the way it's turning out because of the organisation I have used. I tried to pre-plan everything and it somewhat worked but still... there is a lot of room for improvement.
<br/>
<br/>
I know lots of windows based games use an in-built scripting system that does all the work of the game design while the engine takes care of the "nitty gritty" stuff such as sprite management. However, I don't really understand how this is done in GBA games?
<br/>
<br/>
How do you decide what each character says etc? There are many ways I can think of but none that would be easy to follow when your game gets bigger than a few levels.
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16059 - torne - Sat Feb 07, 2004 3:27 pm</h4>
    <div class="postbody"><span class="postbody">You can use a scripting system. =)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16061 - DekuTree64 - Sat Feb 07, 2004 4:32 pm</h4>
    <div class="postbody"><span class="postbody">I never did see the point in scripting, aside from saving compile time. I just write functions like TextBox(), WarpToMap(), SetGameSwitch(), etc, and then give each map an event C file and 'script' using those. Then you get the ease of using single lines to do most things, but you're still in C, so there aren't any limits to the kinds of things you can do. You might be able to save space with scripts though, if they're just text files with short commands and parameters, because you could compress them with LZ77 or something and only decompress the one for the current map. Or for higher game creation speed, just leave them as raw text files that you can attach with GBFS and test immediately.
<br/>
But personally I think it's more work than it's worth, and imposes pointless limits.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16064 - torne - Sat Feb 07, 2004 4:55 pm</h4>
    <div class="postbody"><span class="postbody">I'd make a scripting system by having a horribly complex struct/union combo (or classes and subclasses for OO types) which could represent all actions that my game engine supported in the minimum possible amount of space, then writing a compiler that translated nice readable text scripts into teeny data structures.
<br/>
<br/>
There aren't very many restrictions of such an approach; if you include branching and loops in your language along with all engine features you have, you're pretty much equivalent to writing C modules.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16067 - DekuTree64 - Sat Feb 07, 2004 5:13 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, I suppose that would save some space in the long run. Maybe give each object a single byte type identifier, and let the scripting system decide how big it is and what the parameters are, so in your script files you can just have a continuous stream of event objects. 
<br/>
Might save a few bytes/event call, since you could use a single byte for the type id, instead of a bl instruction to the function, which would be 2 bytes in THUMB, and then the instructions to load the parameters into the registers would waste a little more space.
<br/>
Ah well, either way it's not that much compared to like the map and sound data, so I won't worry about it unless it ever bites me in the behind.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16068 - Miked0801 - Sat Feb 07, 2004 5:18 pm</h4>
    <div class="postbody"><span class="postbody">Scripting comes in its own on larger teams.  It allows non-programmer people to do programmer tasks.  On an RPG style game, game scripting can be over 50% of the programming load.  Make a nice easy to use scripting system and you can get almost anyone to do scripting for you.  Nice.  Also, each script command should only take a byte plus some extra bytes per entry for more complex commands therefore saving on space.
<br/>
<br/>
It's also real nice to look at scripts only w/o having to worry about debugging C code (once the script engine is happy that is.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16077 - sajiimori - Sat Feb 07, 2004 7:21 pm</h4>
    <div class="postbody"><span class="postbody">Also, you can design a scripting language to fit the problem at hand, instead of bending your problem to fit C.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#16087 - torne - Sat Feb 07, 2004 9:08 pm</h4>
    <div class="postbody"><span class="postbody">I like OO so I'd typically make the scripting entries instances of objects, which means there's no parser code required in the game whatsoever; you can just ask them to execute themselves. =)
<br/>
<br/>
The compilation to structures/objects can be done by nice fast compiler-generator tools on a PC host with cycles to spare for that kind of stuff. bison is your friend.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
