<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Random Number Warning - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>Coding > Random Number Warning</h2>
<div id="posts">
<div class="post">
    <h4>#25278 - sgeos - Thu Aug 19, 2004 10:58 pm</h4>
    <div class="postbody"><span class="postbody">In short, always seed your random number generators with odd numbers.  Details below.
<br/>
<br/>
I was mucking about with a 16 bit linear congruential generator (LCG) and discovered something very interesting about seeding the generator and it's period.
<br/>
<br/>
This is the generator I used:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define RNG_M 0x0DCD        /* == 3533 */
<br/>
<br/>
u16 g_seed;
<br/>
<br/>
u16 seed_rng(u16 p_seed)
<br/>
{
<br/>
        g_seed = p_seed;
<br/>
        return g_seed;
<br/>
}
<br/>
<br/>
<br/>
u16 rngf(void)
<br/>
{
<br/>
        g_seed *= RNG_M;
<br/>
        return g_seed;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Here are the seeds and generator periods I found:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Period  Seed    Hex
<br/>
<br/>
16384   1       0x0001
<br/>
8192    2       0x0002
<br/>
4096    4       0x0004
<br/>
2048    8       0x0008
<br/>
1024    16      0x0010
<br/>
512     32      0x0020
<br/>
256     64      0x0040
<br/>
128     128     0x0080
<br/>
64      256     0x0100
<br/>
32      512     0x0200
<br/>
16      1024    0x0400
<br/>
8       2048    0x0800
<br/>
4       4096    0x1000
<br/>
2       8192    0x2000
<br/>
1       16384   0x4000</td> </tr></table><span class="postbody">
<br/>
<br/>
Here are the periods for the seed 0 through 31:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Period  Seed    Hex
<br/>
<br/>
1       0       0x0000
<br/>
16384   1       0x0001
<br/>
8192    2       0x0002
<br/>
16384   3       0x0003
<br/>
4096    4       0x0004
<br/>
16384   5       0x0005
<br/>
8192    6       0x0006
<br/>
16384   7       0x0007
<br/>
2048    8       0x0008
<br/>
16384   9       0x0009
<br/>
8192    10      0x000A
<br/>
16384   11      0x000B
<br/>
4096    12      0x000C
<br/>
16384   13      0x000D
<br/>
8192    14      0x000E
<br/>
16384   15      0x000F
<br/>
1024    16      0x0010
<br/>
16384   17      0x0011
<br/>
8192    18      0x0012
<br/>
16384   19      0x0013
<br/>
4096    20      0x0014
<br/>
16384   21      0x0015
<br/>
8192    22      0x0016
<br/>
16384   23      0x0017
<br/>
2048    24      0x0018
<br/>
16384   25      0x0019
<br/>
8192    26      0x001A
<br/>
16384   27      0x001B
<br/>
4096    28      0x001C
<br/>
16384   29      0x001D
<br/>
8192    30      0x001E
<br/>
16384   31      0x001F</td> </tr></table><span class="postbody">
<br/>
<br/>
Just in case anyone was wondering where 69069 came from, it is 0x10DCD in hex, or 65536 + 3533.  I suspect that 0x100000DCD or 0x100010DCD would make a good multiplier for a 64 bit LCG, although I have not done any tests.
<br/>
<br/>
I'd be more than willing to send my testing code to any interested party.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25283 - poslundc - Fri Aug 20, 2004 12:09 am</h4>
    <div class="postbody"><span class="postbody">You might try the "alternate" version of the Super-Duper LCG, which has a value of b = 1 (add 1 to the seed). It's supposed to have a better spectrum.
<br/>
<br/>
I personally use BCPL (a = 2147001325, b = 715136305) and while I haven't done any tests on it, it's supposed to have one of the "better" spectrums as well.
<br/>
<br/>
Dan.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25290 - sgeos - Fri Aug 20, 2004 4:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>poslundc wrote:</b></span></td> </tr> <tr> <td class="quote">I personally use BCPL (a = 2147001325, b = 715136305) and while I haven't done any tests on it, it's supposed to have one of the "better" spectrums as well.</td> </tr></table><span class="postbody">
<br/>
It uses the full spectrum.  (a = 0x7FF8A3ED, b = 0x2AA01D31, a' = 0x1F6931E5)
<br/>
The 16-bit version is easy to construct.  (a = 0xA3ED, b = 0x1D31, a' = 0x31E5)
<br/>
<br/>
Thanks a lot for the numbers!
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25316 - f(DarkAngel) - Fri Aug 20, 2004 1:57 pm</h4>
    <div class="postbody"><span class="postbody">If i recall correctly, prime numbers should produce the best result.<br/>_________________<br/>death scream...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25323 - sgeos - Fri Aug 20, 2004 4:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>f(DarkAngel) wrote:</b></span></td> </tr> <tr> <td class="quote">If i recall correctly, prime numbers should produce the best result.</td> </tr></table><span class="postbody">
<br/>
The numbers need only be relatively prime to one another.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
