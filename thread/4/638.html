<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to attach sprites to scaled background - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>Coding > How to attach sprites to scaled background</h2>
<div id="posts">
<div class="post">
    <h4>#3271 - blindfold - Fri Feb 21, 2003 3:04 pm</h4>
    <div class="postbody"><span class="postbody">Hi. 
<br/>
I have a little problem. 
<br/>
<br/>
I have a scaled background and I placed a sprites on it. Now I zoom sprites and background (same factor), but I want a sprite to keep it's position according to background. 
<br/>
<br/>
I tried to calculate percentage of a orginal sprite position, but it just don't work. I know that it is also a math problem, but if someone had a similar problem.......just help me...
<br/>
<br/>
Thanks.
<br/>
<br/>
PS. no rotation is made, so it's easier.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3279 - CoolMan - Fri Feb 21, 2003 5:31 pm</h4>
    <div class="postbody"><span class="postbody">Perhaps if you are converting the sprite's position from map coordinates, then you can scale the coordinate the same way as the BG. Might be too slow tho...<br/>_________________<br/>Moron! You don't herd chickens with a shotgun!
<br/>
<br/>
--CoolMan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3280 - DekuTree64 - Fri Feb 21, 2003 5:39 pm</h4>
    <div class="postbody"><span class="postbody">Subtract the BG center position, multiply by the scale factor, and add the center pos back. Basically you make 0,0 the center while you do your actual calculations. You can also multiply by sin/cos values (x*cos, y*sin, if I remember correctly. Haven't used that in ages) for rotation  before you add your center pos back.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3320 - blindfold - Sat Feb 22, 2003 8:18 pm</h4>
    <div class="postbody"><span class="postbody">I have tried it all, still doesn't work. 
<br/>
I will explain my problem again, but now I will make it very simple...
<br/>
<br/>
I have a scaled background (no need to rotate).
<br/>
Now at position 16, 16 I have a sprite.
<br/>
When the scale value is 0x100 (no zoom), sprite is exacly at 3,3 tile (3rd row, 3rd column).
<br/>
Then I scale a background (let's say it's a 2x zoomed). So I want to have my sprite also at a zoomed position 32,32.
<br/>
But how to calculate it for any zoom value?
<br/>
Scale value isn't a percentage, or any other known to me value, therefore when I increase it, the screen is zooming out, not in....
<br/>
I know it's so easy, although I'm so tired of it that I need help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3326 - blindfold - Sat Feb 22, 2003 9:09 pm</h4>
    <div class="postbody"><span class="postbody">Well, as for now, I figured out that its a 
<br/>
<br/>
u16 x= (16*256)/g_Zoom; 
<br/>
<br/>
for Horizontal walue x, where 16 is a horisontal position
<br/>
I told that was very easy, I hope It's all right...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3358 - blindfold - Sun Feb 23, 2003 3:35 pm</h4>
    <div class="postbody"><span class="postbody">Yessss, that was correct, thank a lot, now it works 100%, just in case anybody has a similar problem...
<br/>
<br/>
<br/>
	u16 x= ((16+16)*256)/g_Zoom - 32;
<br/>
	u16 y= ((40+16)*256)/g_Zoom - 32;
<br/>
<br/>
<br/>
where:
<br/>
<br/>
x is a horizontal position (after zooming)
<br/>
y is vertical position (after zooming)
<br/>
<br/>
sprite is at 16, 40 position before zoom
<br/>
<br/>
g_Zoom is a scale factor
<br/>
<br/>
<br/>
the sprite is 32 width and height, so I have to substract a half of it
<br/>
<br/>
that's all folks...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3363 - ampz - Sun Feb 23, 2003 4:58 pm</h4>
    <div class="postbody"><span class="postbody">I'd say attaching sprites to mode7 backgrounds is a bit more tricky :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#3376 - CoolMan - Sun Feb 23, 2003 7:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">I'd say attaching sprites to mode7 backgrounds is a bit more tricky :-)</td> </tr></table><span class="postbody">
<br/>
<br/>
I would hate to be the commercial coder assigned to that problem...<br/>_________________<br/>Moron! You don't herd chickens with a shotgun!
<br/>
<br/>
--CoolMan</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
