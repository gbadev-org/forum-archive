<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ndstool.exe : Change ARM9 RAM address? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > ndstool.exe : Change ARM9 RAM address?</h2>
<div id="posts">
<div class="post">
    <h4>#173933 - Chris2027 - Sun May 09, 2010 5:54 am</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I seem to have a problem with ndstool.exe (I think).
<br/>
<br/>
My task is to change the ARM9 'RAM' and 'Entry' Addresses, both to 0x2000800.
<br/>
<br/>
making a change to the makefile allows me to change the "entry address" like so: 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">LDFLAGS   =   -specs=ds_arm9.specs -Wl,--section-start,.init=0x2000800 -g $(ARCH) -Wl,-Map,$(notdir $*.map)</td> </tr></table><span class="postbody">
<br/>
<br/>
then in the ds_rules I made a change to the ndstool line (just to test) by adding -r9 0x2000800
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">@ndstool -c $@ -9 $&lt; -b $(GAME_ICON) "$(GAME_TITLE);$(GAME_SUBTITLE1);$(GAME_SUBTITLE2)" $(_ADDFILES) -r9 0x02000800 </td> </tr></table><span class="postbody">
<br/>
<br/>
but this is not affecting the RAM address reporting by ndstool:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0x24    ARM9 entry address              0x2000800
<br/>
0x28    ARM9 RAM address                0x2000000</td> </tr></table><span class="postbody">
<br/>
<br/>
however if I use an older ndstool.exe within the bin folder, it changes the RAM address BUT then the NDS ROM no longer works?
<br/>
<br/>
This worked in an earlier version of devkitpro ?
<br/>
<br/>
Any clue?
<br/>
<br/>
Many thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173948 - fincs - Sun May 09, 2010 5:18 pm</h4>
    <div class="postbody"><span class="postbody">Add -e9 0x02000800 to the ndstool command line to fix the problem.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173953 - Chris2027 - Sun May 09, 2010 10:27 pm</h4>
    <div class="postbody"><span class="postbody">cheers for the reply fincs :)
<br/>
<br/>
I actually tried that, but it doesnt make any difference.  The entry address is infact OK but the RAM address wont budge - unless i use an older ndstool.exe.  however doing that causes the nds binary to not work.
<br/>
<br/>
I think something changed with ndstool.exe - the version I have with the latest devkitpro is:
<br/>
<br/>
Nintendo DS rom tool 1.47 - Mar 25 2010</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#173960 - Chris2027 - Mon May 10, 2010 3:27 am</h4>
    <div class="postbody"><span class="postbody">OK I've worked it out by using a different project with makefile.
<br/>
<br/>
I used the examples/nds/templates/combined/
<br/>
<br/>
now I'm getting somewhere :)
<br/>
<br/>
thanks all, please ignore this post now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174053 - wintermute - Sat May 15, 2010 6:18 pm</h4>
    <div class="postbody"><span class="postbody">The latest ndstool converts directly from elf rather than going through the intermediate objcopy stage. This makes it much easier to mess around with the load and entry points than it is with straight binary.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
LDFLAGS   =   -specs=ds_arm9.specs -Wl,--section-start,.init=0x2000800,--nmagic -g $(ARCH) -Wl,-Map,$(notdir $*.map)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
is sufficient when ndstool is using elf.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
