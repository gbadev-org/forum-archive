<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>need help porting a game - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > need help porting a game</h2>
<div id="posts">
<div class="post">
    <h4>#101420 - sasuke_kun12 - Tue Sep 05, 2006 10:45 am</h4>
    <div class="postbody"><span class="postbody">i know it sounds stupid but I've currently run into a problem whilst porting C-Dogs onto the DS
<br/>
<br/>
I don't know how to port! 
<br/>
<br/>
yes i do have basic C++ knowledge and I've got everything i need. I just need someone (or a document) that'll point me to the right direction<br/>_________________<br/>Current Projects: Rise Of The TriaDS 
<br/>
Percentage Complete: 15% - woot! commenting out the loader GUI
<br/>
<a href="http://sasukekunds.blogspot.com" target="_blank">http://sasukekunds.blogspot.com</a>
<br/>
RELEASE DATE! 15th October it would really help if someone wants to help! if so PM me!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101711 - GPFerror - Thu Sep 07, 2006 4:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sasuke_kun12 wrote:</b></span></td> </tr> <tr> <td class="quote">i know it sounds stupid but I've currently run into a problem whilst porting C-Dogs onto the DS
<br/>
<br/>
I don't know how to port! 
<br/>
<br/>
yes i do have basic C++ knowledge and I've got everything i need. I just need someone (or a document) that'll point me to the right direction</td> </tr></table><span class="postbody">
<br/>
<br/>
Iv got it compiled already for the DS, but running into problems with it reading the datafiles, not sure whats wrong with it yet.
<br/>
<br/>
What problems are you having?
<br/>
<br/>
Troy(GPF)
<br/>
<a href="http://gpf.dcemu.co.uk" target="_blank">http://gpf.dcemu.co.uk</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101773 - sasuke_kun12 - Fri Sep 08, 2006 12:08 am</h4>
    <div class="postbody"><span class="postbody">just dunno where to start. 
<br/>
<br/>
did u convert the keyboard.c and .h and input.c and .h to NDS inputs?
<br/>
<br/>
actaully could you send me a copy of the source to study on? i can help out too if you like!<br/>_________________<br/>Current Projects: Rise Of The TriaDS 
<br/>
Percentage Complete: 15% - woot! commenting out the loader GUI
<br/>
<a href="http://sasukekunds.blogspot.com" target="_blank">http://sasukekunds.blogspot.com</a>
<br/>
RELEASE DATE! 15th October it would really help if someone wants to help! if so PM me!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101789 - GPFerror - Fri Sep 08, 2006 1:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sasuke_kun12 wrote:</b></span></td> </tr> <tr> <td class="quote">just dunno where to start. 
<br/>
<br/>
did u convert the keyboard.c and .h and input.c and .h to NDS inputs?
<br/>
<br/>
actaully could you send me a copy of the source to study on? i can help out too if you like!</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm using my SDL lib I ported to the ds, so it wasnt that difficult to compile, and I haven"t got to rewriting input code, Trying to figure out why my fat lib code can't find the datafiles right now.
<br/>
<br/>
Troy</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101799 - Sektor - Fri Sep 08, 2006 3:16 am</h4>
    <div class="postbody"><span class="postbody">I got the menus working but it freezes when I go to start the game.
<br/>
<br/>
The font is difficult to read at that resolution.
<br/>
<br/>
Feel free to fix it.  Tested on M3CF.  It checks for the data at /data/cdogs/.  Use at own risk, always backup CF/SD cards.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"><br/><br/>Last edited by Sektor on Sun Sep 10, 2006 9:26 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#101809 - sasuke_kun12 - Fri Sep 08, 2006 5:14 am</h4>
    <div class="postbody"><span class="postbody">ok cool thanks! 
<br/>
<br/>
did u use the original source code or the SDL port?<br/>_________________<br/>Current Projects: Rise Of The TriaDS 
<br/>
Percentage Complete: 15% - woot! commenting out the loader GUI
<br/>
<a href="http://sasukekunds.blogspot.com" target="_blank">http://sasukekunds.blogspot.com</a>
<br/>
RELEASE DATE! 15th October it would really help if someone wants to help! if so PM me!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101813 - Sektor - Fri Sep 08, 2006 5:40 am</h4>
    <div class="postbody"><span class="postbody">I copied and modified keyboard.c, keyboard.h and gp2x.h (now ds.h) from the gp2x source over the ones in the official SDL source .  I modified files.c, cdogs.c, gamedata.c and probably some minor changes to a few more files.
<br/>
<br/>
I downloaded cdogs-sdl-current.tar.bz2 from <a href="http://members.optusnet.com.au/lmartinking/hacks/cdogs/" target="_blank">http://members.optusnet.com.au/lmartinking/hacks/cdogs/</a>
<br/>
<br/>
Apparently there is a slightly newer version on the svn server, I'll try that one later.
<br/>
<br/>
-----------------
<br/>
<br/>
For any ports, you start with the makefile or the configure script.  With c-dogs, I just used the generic makefile that is included with devkitarm examples.  I added "-lSDL -lfat" to include the SDL and libfat libraries.  I changed the INCLUDES line to: src/include src/missions
<br/>
<br/>
The seperate level editor source was in the src folder.  I had to move that out of there, so there would be only one "main".
<br/>
<br/>
main was in cdogs.c, so first I opened that.  I wanted text to be output on the bottom screen, so I had to include nds.h,console.h and add some code to set the display/vram.  Then I tried to compile.  If/when errors appear, I try to fix them or often just comment out the offending lines and rewrite them later if they are important.
<br/>
<br/>
If the program runs in a window by default then I look for an option to set it to fullscreen.  If it compiles and I get the video output I was expecting then I move onto getting the input/joystick/keyboard working.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"><br/><br/>Last edited by Sektor on Sun Sep 10, 2006 10:47 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#102049 - Sektor - Sun Sep 10, 2006 6:04 am</h4>
    <div class="postbody"><span class="postbody">I got the game starting by commenting out:
<br/>
<br/>
file: game.c
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">while (gameTicks &lt;= 1)
<br/>
    SDL_Delay(10);</td> </tr></table><span class="postbody">
<br/>
<br/>
It's a bit slow and game over really is game over because you have to restart the DS.  The external missions aren't supported yet.  Download is on my site.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102103 - MaHe - Sun Sep 10, 2006 9:52 pm</h4>
    <div class="postbody"><span class="postbody">Love you, dude, I'm a big fan of this game myself ... Umm, do you intend to implement wifi multiplayer too in the future?<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102117 - Hogmeister - Sun Sep 10, 2006 11:55 pm</h4>
    <div class="postbody"><span class="postbody">OMG i dont know how much you guys know this but i f'en love you! i have LOVED cyberdogs and C-Dogs since wayyy back when c-dogs first came out &gt;&lt; had an unholy facination with it and if you guys hadn't started porting it i was going to try learning C++ and eventually port it myself i think it'd be great on the ds.
<br/>
<br/>
<br/>
anyway much love, keep up the great work !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102161 - Sektor - Mon Sep 11, 2006 10:25 am</h4>
    <div class="postbody"><span class="postbody">I have no plans for network mode (the PC version doesn't have network functions) although that would be fun to play.  It supports split screen, two players on one system but that's very impractical on the DS.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102217 - MaHe - Mon Sep 11, 2006 9:38 pm</h4>
    <div class="postbody"><span class="postbody">Maybe just a simple keypress exchange system? :)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102252 - sasuke_kun12 - Tue Sep 12, 2006 9:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MaHe wrote:</b></span></td> </tr> <tr> <td class="quote">Maybe just a simple keypress exchange system? :)</td> </tr></table><span class="postbody">
<br/>
<br/>
thats what i was tryin to do!
<br/>
<br/>
i went (for examples sake)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"> #define Key A Key_A </td> </tr></table><span class="postbody">
<br/>
<br/>
and thanks sektor! that really really helps!<br/>_________________<br/>Current Projects: Rise Of The TriaDS 
<br/>
Percentage Complete: 15% - woot! commenting out the loader GUI
<br/>
<a href="http://sasukekunds.blogspot.com" target="_blank">http://sasukekunds.blogspot.com</a>
<br/>
RELEASE DATE! 15th October it would really help if someone wants to help! if so PM me!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
