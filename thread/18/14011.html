<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Debugging in emulators - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Debugging in emulators</h2>
<div id="posts">
<div class="post">
    <h4>#138646 - Moby Disk - Mon Aug 27, 2007 6:11 am</h4>
    <div class="postbody"><span class="postbody">How does one go about debugging code for the DS?  Devkitpro comes with Insight and there is an arm-eabi-gdb.exe but I don't understand how to use this with an emulator, or with a real DS either.  I've used gdb on Linux before and it made sense, but I'm completely confused as to how it even applies here.  Does anybody have any links on how to get started with this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138648 - Kiz - Mon Aug 27, 2007 7:55 am</h4>
    <div class="postbody"><span class="postbody">I'm a complete newbie with this stuff myself, but I'll see if I can help you out with this stuff.
<br/>
<br/>
Read: <a href="http://www.devkitpro.org/debugging-with-vba-and-insight.shtml" target="_blank">http://www.devkitpro.org/debugging-with-vba-and-insight.shtml</a>
<br/>
<br/>
The VBA stuff is irrelevant to you, but it shows you how to setup Insight for what you want to do. Then, download DeSmuME (with gdb stub). I think <a class="postlink" href="http://forums.desmume.org/viewtopic.php?id=85" target="_blank">this</a> has the most up to date version, I could be wrong.
<br/>
<br/>
Depending on your environment, starting up DeSmuME so that it uses the right port can be different. For Windows, run it from command prompt with something like:
<br/>
<br/>
desmume_gdb.exe --arm9gdb=20001 --arm7gdb=20000
<br/>
<br/>
Then setup Insight to use the appropriate port.
<br/>
<br/>
Have Insight run the .elf, have DeSmuME run the .nds, and you're good to go. That said, after I finally got it all running, I couldn't get anything remotely useful out of it. I could step through tutorials/examples just fine, but it didn't help me at all with my code, just said that it received Signal 0 and told me to piss off.
<br/>
<br/>
Hope that helped a little.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138653 - simonjhall - Mon Aug 27, 2007 11:45 am</h4>
    <div class="postbody"><span class="postbody">I should really re-release this, since I spent so much time on it:
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=10332" target="_blank">http://forum.gbadev.org/viewtopic.php?t=10332</a>
<br/>
<br/>
It allows you to debug your code running on your DS over wifi, using gdb and any gdb-compatible GUI debugger (I use eclipse).<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138655 - Kiz - Mon Aug 27, 2007 12:10 pm</h4>
    <div class="postbody"><span class="postbody">When I first read that, it made me sad that I don't have a wireless router/dongle. I think I'm gonna have to invest in a dongle soon, it was a nightmare trying to get anything useful out of a debugger when I was toying around with my basic .obj loader the other day.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138656 - kusma - Mon Aug 27, 2007 1:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>simonjhall wrote:</b></span></td> </tr> <tr> <td class="quote">I should really re-release this, since I spent so much time on it:
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=10332" target="_blank">http://forum.gbadev.org/viewtopic.php?t=10332</a>
<br/>
<br/>
It allows you to debug your code running on your DS over wifi, using gdb and any gdb-compatible GUI debugger (I use eclipse).</td> </tr></table><span class="postbody">
<br/>
Yeah, you should, since the link is dead :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138746 - Moby Disk - Tue Aug 28, 2007 2:23 pm</h4>
    <div class="postbody"><span class="postbody">I found my answer.  Over at the desmume forums there is a post about a version of desmume that works with gdb.  It does exactly what I was looking for.
<br/>
<br/>
<a class="postlink" href="http://forums.desmume.org/viewtopic.php?id=85" target="_blank">http://forums.desmume.org/viewtopic.php?id=85</a>
<br/>
<br/>
Also, no$gba has a commercial version that supports debugging, but I'm unclear if that is gdb debugging, or a built-in debugger, or if it loads symbols or what.
<br/>
<br/>
<a class="postlink" href="http://nocash.emubase.de/gba.htm" target="_blank">http://nocash.emubase.de/gba.htm</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138749 - masscat - Tue Aug 28, 2007 4:09 pm</h4>
    <div class="postbody"><span class="postbody">The GDB stubs in Desmume are in the main CVS and should be present and usable in releases after version 0.7.
<br/>
<br/>
I also did a <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=10765" target="_blank">GDB stub for on hardware</a> (similar to Simon's). There was talk of putting this into under the devkitpro tool set but I have not had time recently to bring it to a point where that can happen.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
