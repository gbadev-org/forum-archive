<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mp3-Playback and Performance question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Mp3-Playback and Performance question</h2>
<div id="posts">
<div class="post">
    <h4>#84731 - Mifheu - Wed May 24, 2006 12:58 pm</h4>
    <div class="postbody"><span class="postbody">Hi there! I'am currently working on a concept for a product pitch for a tactical fantasy rpg. I think good music is a important element for a good game, so I'am wondering, if it will be possible to play mp3 music files during the game. I just want to ask, how much performance mp3-playback would take. I just need to know if it will be 60% or only 20% an if it is possible to draw some nice 3D-graphics while playing the music, or if the mp3-playback will take too much processor time to do so. If some one can tell me a rough estimated number, I would be happy. It would also be interesting, if playback for other music-formats like ogg or something would need more or less performance. The only game I know using mp3-music is Quendan, but of course this game only uses very simple graphics and no 3D at all.<br/>_________________<br/>Simplicity is the most complex topic.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84823 - tepples - Wed May 24, 2006 10:23 pm</h4>
    <div class="postbody"><span class="postbody">I haven't yet developed any game with mp3-like music for the DS, but on the GBA, I managed to make such a game with a music decoder that took 60% CPU. Go play <a class="postlink" href="http://www.pineight.com/lu/" target="_blank">Luminesweeper</a> for a while and come back.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84891 - MaHe - Thu May 25, 2006 12:33 pm</h4>
    <div class="postbody"><span class="postbody">Yes, eventually, you could use GSM (I'm sure ARM7 could handle it alone, leaving enough CPU power in ARM9), but the sound quality isn't as good as it would be in the MP3 format. Though both MoonShell (unoptimised) and DSOrganize (optimised) lag pretty much during the song in a compressed format is played. I doubt you could draw 3D graphics on the screen at the same time. Use GSM, MOD (though it's limited) or raw audio. Choice is yours.<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84893 - mntorankusu - Thu May 25, 2006 12:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mifheu wrote:</b></span></td> </tr> <tr> <td class="quote">The only game I know using mp3-music is Quendan, but of course this game only uses very simple graphics and no 3D at all.</td> </tr></table><span class="postbody">There are 3D graphics in the game. On the bottom screen during gameplay, the Ouendan members are dancing in the background in 3D.
<br/>
<br/>
And is the music really in MP3 format?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85008 - Mifheu - Fri May 26, 2006 10:58 am</h4>
    <div class="postbody"><span class="postbody">Hm, that's pretty much what I expected. For GSM I think the quality is too bad. Of course some tracker-format would be ok, but it's not as nice as mp3. :-) For Quendan I'am not completely sure if it is mp3, but it sounds very much like mp3 or something similar. As far as I remember the game features some songs of regular japanes bands and I think it would be heavy work to convert a real song into some tracker-/mod-like music format. Although it might be possible. And yes, it features some 3D-graphics, but when I play it, I'am always looking on the spots you need to touch in the right moment and unfortunately most the time I miss to see the action of the three guys in the background. But the game ist great. Love it... ;-)<br/>_________________<br/>Simplicity is the most complex topic.</span><span class="gensmall"><br/><br/>Last edited by Mifheu on Fri May 26, 2006 2:19 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#85015 - HyperHacker - Fri May 26, 2006 12:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MaHe wrote:</b></span></td> </tr> <tr> <td class="quote">Yes, eventually, you could use GSM (I'm sure ARM7 could handle it alone, leaving enough CPU power in ARM9), but the sound quality isn't as good as it would be in the MP3 format. Though both MoonShell (unoptimised) and DSOrganize (optimised) lag pretty much during the song in a compressed format is played. I doubt you could draw 3D graphics on the screen at the same time. Use GSM, MOD (though it's limited) or raw audio. Choice is yours.</td> </tr></table><span class="postbody">
<br/>
I think that was just a bug in DSOrganize.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85091 - M3d10n - Sat May 27, 2006 12:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mifheu wrote:</b></span></td> </tr> <tr> <td class="quote">Hm, that's pretty much what I expected. For GSM I think the quality is too bad. Of course some tracker-format would be ok, but it's not as nice as mp3. :-) For Quendan I'am not completely sure if it is mp3, but it sounds very much like mp3 or something similar. As far as I remember the game features some songs of regular japanes bands and I think it would be heavy work to convert a real song into some tracker-/mod-like music format. Although it might be possible. And yes, it features some 3D-graphics, but when I play it, I'am always looking on the spots you need to touch in the right moment and unfortunately most the time I miss to see the action of the three guys in the background. But the game ist great. Love it... ;-)</td> </tr></table><span class="postbody">
<br/>
<br/>
They probably use a custom-tailored lossy format made for embbed devices.
<br/>
<br/>
As example, many Sega Saturn games used ADX audio by CRI. It was a lossy format which required around twice the bitrate of an Mp3 to sound as good but was much less CPU-intensive, specially on the Saturn's dual 28MHz SH2 cores (which would have a ahrd time decoding MP3 files).
<br/>
ADX got ported over Dreamcast and also became avaliable on to PS2, GC and Xbox.
<br/>
<br/>
The problem is that I don't know of any audio format targeted at ARM processors which is comparable to MP3 that isn't proprietary and covered by strong licensing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#85101 - tepples - Sat May 27, 2006 1:22 am</h4>
    <div class="postbody"><span class="postbody">There are a few main kinds of lossy audio codec: <ul><li>Predictive codecs, which compute each sample in a block as a function of the previous samples and then some sort of error term: <ul><li>Predictive codecs with one or a few simple predictors, such as IMA ADPCM or Super NES BRR. These use a high bitrate but are fast to decode. </li><li>Predictive codecs with a sophisticated predictor, such as Speex and GSM. These predictors usually involve the spectral shape, the dominant period (pitch) of the signal, and in some cases the buzziness or hissiness of the signal. These can achieve lower bitrates, especially with speech, but they need more CPU time to decode. </li></ul> </li><li>Transform codecs, which turn each block into a set of sinusoids using a modified Fourier transform. These include MP2 (32 bands), MP3 (576 bands), and Vorbis (2048 bands). These can take quite a bit of time and memory to decode, especially without the kind of optimization that people pay big bucks for. </li><li>Hybrid codecs, which use one codec for low frequencies and another (usually a predictive codec producing a spectrally shaped hiss) for high frequencies, such as Speex wideband, PlusV, HE AAC, and mp3PRO. </li></ul><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
