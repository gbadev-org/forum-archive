<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Transparent textures - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Transparent textures</h2>
<div id="posts">
<div class="post">
    <h4>#155178 - ZeroSum - Sat Apr 26, 2008 1:25 am</h4>
    <div class="postbody"><span class="postbody">I'm having some trouble using transparent textures. I searched around a bit and found out about the GL_TEXTURE_COLOR0_TRANSPARENT option but now I have a slightly different problem as described below. I've uploaded a few pictures to help my probably crappy explanation: :)
<br/>
<br/>
Without GL_TEXTURE_COLOR0_TRANSPARENT:
<br/>
<a class="postlink" href="http://i32.tinypic.com/20u8jdv.jpg" target="_blank">Link</a>
<br/>
<br/>
With GL_TEXTURE_COLOR0_TRANSPARENT:
<br/>
<a class="postlink" href="http://i32.tinypic.com/dzj87s.jpg" target="_blank">Link</a>
<br/>
<br/>
The scene is just three quads. One untextured at the back which covers the screen, one textured with a building on the left and one textured with ground on the right. As you can see the building texture is transparent on the "inside" as well as around it. The transparent areas on the inside of the building are supposed to be black.
<br/>
<br/>
All of my textures are 16 colour with palettes with magenta (FF00FF) as the wanted transparent areas. I used Nomad NDS Texture Converter to convert the images. When exporting I ticked the option for a transparent colour and selected magenta.
<br/>
<br/>
I have a feeling that when I do this Nomad is just turning on the "this pixel is transparent bit". When loading the textures without the GL_TEXTURE_COLOR0_TRANSPARENT flag the wanted area is "transparent" as in there is no magenta, but of course it's not see through. I then found I needed to set that flag and it has worked for the right hand texture but not the left.
<br/>
<br/>
I'm guessing that for the building on the left black is the first colour (in position 0) in the palette so its making this transparent as well as the pixels marked with the transparent bit. 
<br/>
<br/>
If this is the case can anyone recommend a texture converting tool where I can choose the palette order myself or one that will put a chosen colour as the first in the palette? I have gfx2gba but I'm unsure if this can do textures or what options to use. 
<br/>
<br/>
Thanks for reading.
<br/>
<br/>
PS. If someone could provide a link about or a brief explanation on how textures are formatted for the DS I would like to try writing my own converter for the experience.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155206 - Sausage Boy - Sat Apr 26, 2008 4:14 pm</h4>
    <div class="postbody"><span class="postbody">Gbatek is _the_ texture format reference:
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#ds3dtextureformats" target="_blank">http://nocash.emubase.de/gbatek.htm#ds3dtextureformats</a>
<br/>
<br/>
texmex does transparency automagically with the image alpha channel, so all palette stuff is handled internally.
<br/>
<a href="http://blog.dev-scene.com/gaspcubed/2007/10/06/texmex-004/" target="_blank">http://blog.dev-scene.com/gaspcubed/2007/10/06/texmex-004/</a><br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155237 - TwentySeven - Sun Apr 27, 2008 1:03 am</h4>
    <div class="postbody"><span class="postbody">If you're going to write your own, microsoft has a really nice open-source octree palette and quantizer that I use in my current project.
<br/>
<br/>
Having palette code that can natively work with 6 bit colours produces WAAAAY better results then stuff that does the 8bit to 6bit conversion as a final step.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
