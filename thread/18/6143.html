<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>glOrtho? A crap attempt.... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > glOrtho? A crap attempt....</h2>
<div id="posts">
<div class="post">
    <h4>#46494 - blaisef01 - Sun Jun 26, 2005 7:26 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I wrote an glOrtho function as i couldn't see one in the ndslib. Hope it comes in useful for someone. It seems to work okay but haven't tested it extensively so it may bust in various situations.
<br/>
<br/>
void glOrthof32(f32 left, f32 right, f32 bottom, f32 top, f32 near, f32 far)
<br/>
{
<br/>
   f32 f2;
<br/>
<br/>
   f2 = F32_TWO;   // 2 * 4096
<br/>
   glMatrixMode(GL_PROJECTION);
<br/>
<br/>
   MATRIX_LOAD4x4 = divf32(F32_TWO, right - left);     
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = 0;      
<br/>
   MATRIX_LOAD4x4 = -divf32(right + left, right - left);
<br/>
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = divf32(F32_TWO, top - bottom);     
<br/>
   MATRIX_LOAD4x4 = 0;      
<br/>
   MATRIX_LOAD4x4 = -divf32(top + bottom, top - bottom);
<br/>
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = divf32(F32_TWO, far - near);     
<br/>
   MATRIX_LOAD4x4 = -divf32(far + near, far - near);  
<br/>
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = 0;  
<br/>
   MATRIX_LOAD4x4 = F32_ONE; // 4096
<br/>
<br/>
   glStoreMatrix(0);
<br/>
}
<br/>
<br/>
void gluOrtho2Df32(f32 left, f32 right, f32 bottom, f32 top)
<br/>
{
<br/>
	glOrthof32(left, right, bottom, top, intof32(-1), intof32(1));
<br/>
}
<br/>
<br/>
void glOrtho(float left, float right, float bottom, float top, float near, float far)
<br/>
{
<br/>
	glOrthof32(floatof32(left), floatof32(right), floatof32(bottom), floatof32(top), floatof32(near), floatof32(far));
<br/>
}
<br/>
<br/>
void gluOrtho2D(float left, float right, float bottom, float top)
<br/>
{
<br/>
	gluOrtho2Df32(floatof32(left), floatof32(right), floatof32(bottom), floatof32(top));
<br/>
}
<br/>
<br/>
Any suggestions, dissings what ever would be appreciated.
<br/>
<br/>
Cheers,
<br/>
<br/>
Aaron</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46495 - Normmatt - Sun Jun 26, 2005 7:51 am</h4>
    <div class="postbody"><span class="postbody">What exactly does this function do and any screens of what it outputs?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46496 - blaisef01 - Sun Jun 26, 2005 8:13 am</h4>
    <div class="postbody"><span class="postbody">It's supposed to work in the same way as the opengl glOrtho function - to create an orthographic viewport, so i can line up 3d coords with 2d coords.
<br/>
hopefully then using the 3d hardware to break the 128 sprite limit.. that's the plan anyway.
<br/>
<br/>
That probably didn't make much sense seeing as it's 8am and i haven't been to sleep yet. And no i have no screenshots as of yet as I'm running of hardware, haven't bothered with emulators in a while.
<br/>
<br/>
Aaron</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46516 - tepples - Sun Jun 26, 2005 3:33 pm</h4>
    <div class="postbody"><span class="postbody">You get 2048 quads per scene with the Nintendo DS 3D core, but how many quads and how many pixels can be on the current scanline?
<br/>
<br/>
And are you trying to break 128 sprites per scene or 128 sprites on one scanline? If the former, have you tried swapping OAM using hblank DMA?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
