<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Multiple held keys issue - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Multiple held keys issue</h2>
<div id="posts">
<div class="post">
    <h4>#53475 - Cidrick - Thu Sep 08, 2005 5:15 pm</h4>
    <div class="postbody"><span class="postbody">I'm writing a program and I've run into an issue that I can't quite figure how to get around. My code is something like this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">...
<br/>
<br/>
if (keysHeld() &amp; KEY_A)
<br/>
{
<br/>
   if (((keysHeld() &amp; KEY_DOWN)||(keysDown() &amp; KEY_DOWN)))
<br/>
   {
<br/>
      // move down code here
<br/>
   }
<br/>
   else if (((keysHeld() &amp; KEY_UP)||(keysDown() &amp; KEY_UP)))
<br/>
   {
<br/>
      // move up code here
<br/>
<br/>
...</td> </tr></table><span class="postbody">
<br/>
<br/>
This partially works. If I'm holding down the A key and then press or hold right, it does what I want it to. However, if I'm holding down the A key, then press right and let go, for whatever reason (keysHeld() &amp; KEY_A) becomes false. It seems that if you're holding down two keys and you let go of one, it thinks you're letting go of both of them.
<br/>
<br/>
Am I missing something or is this an issue with the devkit?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53515 - spencer723 - Thu Sep 08, 2005 11:03 pm</h4>
    <div class="postbody"><span class="postbody">No it's just the way you have your code set up, once the program can see that you're not holding the A button it skips that operation therefore not running the "move right" code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53523 - cybereality - Thu Sep 08, 2005 11:22 pm</h4>
    <div class="postbody"><span class="postbody">You have to check each key seperately to fix the problem. So each key would have its own if statement (not else if) and inside of that check it would then check for any combinations of keys. Otherwise only the first key press is registered and you cannot check multiple keys accurately.<br/>_________________<br/><a class="postlink" href="http://www.cybereality.com" target="_blank">// cybereality</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53547 - Cidrick - Fri Sep 09, 2005 2:48 am</h4>
    <div class="postbody"><span class="postbody">Well doesn't that make a guy feel stupid. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53554 - knight0fdragon - Fri Sep 09, 2005 4:15 am</h4>
    <div class="postbody"><span class="postbody">id reccommend using logic, something like if A AND UP do this A AND DOWN do that</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53618 - Cidrick - Fri Sep 09, 2005 8:26 pm</h4>
    <div class="postbody"><span class="postbody">Hahah, oddly enough it wasn't a problem with my code, but rather the emulator I was using to test my code. I tried another emulator and it works just fine. Apparently IdeaS has issues with multiple keypresses.
<br/>
<br/>
Thanks for the help anyway =P</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
