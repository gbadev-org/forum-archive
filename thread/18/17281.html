<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Console Character Array - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Console Character Array</h2>
<div id="posts">
<div class="post">
    <h4>#174344 - JackUzi - Wed Jun 02, 2010 5:06 am</h4>
    <div class="postbody"><span class="postbody">Hello again
<br/>
<br/>
I was just wondering if there is an array of all the characters currently on the console that my application is able to read. What I am hoping to do is detect a stylus touch, calculate which character position was pressed on the screen and then find out what character is at that position. I then need to be able to read left and right to find spaces so I can figure out the word that was selected. Is this possible?
<br/>
<br/>
Regards,
<br/>
Stuart</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174347 - elhobbs - Wed Jun 02, 2010 8:51 am</h4>
    <div class="postbody"><span class="postbody">Yes, this is possible. The console prints characters using 8x8 tiles. So it is just a matter of reading the touch coordinates and dividing by 8 to find the row and column. Then you can use that to find the offset into the the tile map which is just an array of shorts - one byte is the character the other byte I think may be the color. Here is the code libnds uses to write a char </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">currentConsole-&gt;fontBgMap[currentConsole-&gt;cursorX + currentConsole-&gt;windowX + (currentConsole-&gt;cursorY + currentConsole-&gt;windowY) * currentConsole-&gt;consoleWidth] = currentConsole-&gt;fontCurPal | (u16)(c + currentConsole-&gt;fontCharOffset - currentConsole-&gt;font.asciiOffset);</td> </tr></table><span class="postbody">You would want to use your row and column values in place of cursorX and cursorY. I think you can use currentConole directly if not I think it is the value returned by the consoleInit function.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174356 - JackUzi - Thu Jun 03, 2010 12:40 am</h4>
    <div class="postbody"><span class="postbody">Thank you very much, once again. I'll start to experiment and see how it goes.
<br/>
<br/>
EDIT: Just gave it a go then and it works perfectly. You're a champion!
<br/>
<br/>
Regards,
<br/>
Stuart</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
