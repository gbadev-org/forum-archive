<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compile bug with string.h in project - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Compile bug with string.h in project</h2>
<div id="posts">
<div class="post">
    <h4>#147671 - load*,8,1 - Tue Dec 25, 2007 10:57 pm</h4>
    <div class="postbody"><span class="postbody">I think this might be a bug in the DevKitPro toolchain:
<br/>
Create an empty file called "string.h" in the "include" folder of a template project. Then #include &lt;cstring&gt;.
<br/>
<br/>
These are the error messages I'm getting. I guess that instead of including the string.h of the libraries it is including my own string.h.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:80: error: '::memcpy' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:81: error: '::memmove' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:82: error: '::strcpy' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:83: error: '::strncpy' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:84: error: '::strcat' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:85: error: '::strncat' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:86: error: '::memcmp' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:87: error: '::strcmp' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:88: error: '::strcoll' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:89: error: '::strncmp' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:90: error: '::strxfrm' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:91: error: '::strcspn' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:92: error: '::strspn' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:93: error: '::strtok' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:94: error: '::memset' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:95: error: '::strerror' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:96: error: '::strlen' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:98: error: '::memchr' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring: In function 'void* std::memchr(void*, int, size_t)':
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:102: error: invalid conversion from 'const void*' to 'void*'
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:102: error:   initializing argument 1 of 'void* std::memchr(void*, int, size_t)'
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring: At global scope:
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:104: error: '::strchr' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:110: error: '::strpbrk' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:116: error: '::strrchr' has not been declared
<br/>
/usr/local/devkitPro/devkitARM/lib/gcc/arm-eabi/4.1.2/../../../../include/c++/4.1.2/cstring:122: error: '::strstr' has not been declared
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I know it's kinda unusual to make a file called like a lib. But that's a filename in the project I'm porting.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#147682 - M3d10n - Wed Dec 26, 2007 2:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>load*,8,1 wrote:</b></span></td> </tr> <tr> <td class="quote">I guess that instead of including the string.h of the libraries it is including my own string.h.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This is exactly what is going on. Your string.h is being included instead of the C library one.
<br/>
<br/>
AFAIK, you cannot have headers with the same names as the ones from the libraries you're using. I was bitten by this when I decided to call my math header "math.h". Renamed it to "mMath.h" and it was all fine.
<br/>
<br/>
Solution: rename your files.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#147696 - Peter - Wed Dec 26, 2007 1:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>M3d10n wrote:</b></span></td> </tr> <tr> <td class="quote">This is exactly what is going on. Your string.h is being included instead of the C library one.</td> </tr></table><span class="postbody">
<br/>
There exist two forms of the #include directive, one quoted form and one with angle brackets which have different behaviour.
<br/>
<br/>
Angle-brackets form:
<br/>
This form is usually used for standard headers, it instructs the preprocessor to search for include files in the directories that are specified using the -I switch.
<br/>
<br/>
Quoted form:
<br/>
Typically used for local includes. The preprocessor looks in the same directory of the file that contains the #include. If the preprocessor cannot find the file, it searches the directories specified by the -I switch.
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>M3d10n wrote:</b></span></td> </tr> <tr> <td class="quote">AFAIK, you cannot have headers with the same names as the ones from the libraries you're using.</td> </tr></table><span class="postbody">
<br/>
You can, you just have to keep the "" and &lt;&gt; differences in mind.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>M3d10n wrote:</b></span></td> </tr> <tr> <td class="quote">Solution: rename your files.</td> </tr></table><span class="postbody">
<br/>
I guess the solution would be to update the makefile. The <span style="font-style: italic">INCLUDES</span> variable, that contains all the directories which are added to the include directory search path, using the -I switch, also contains local directories which is the troublemaker imo. If you remove "INCLUDES := include" and include string.h using the quoted include form, the error doesn't occur.
<br/>
<br/>
PS: but it's usually a good idea not to use standard header names anyway ;) 
<br/>
Personally I create a sub-directory in "project/include" usually with the projectname and store all headers there. So i can use "#include &lt;n3d/math.h&gt;" for example.<br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
