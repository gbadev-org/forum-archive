<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Getting the projection- and modelviewmatrix - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Getting the projection- and modelviewmatrix</h2>
<div id="posts">
<div class="post">
    <h4>#59210 - TomschikSimon - Sun Oct 30, 2005 12:07 pm</h4>
    <div class="postbody"><span class="postbody">Is there any possibility to get the projection- and modelviewmatrix after these were set? 
<br/>
<br/>
I would like to do frustum-culling in my demo, so I have to build the frustum, but I can't find any possiblity to get these matrices, except creating my own matrixfunctions (like gluPerspective, glRotateX), which store the matrices. 
<br/>
<br/>
But these function would decrease performance, because the original functions do these transformations in hardware.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59220 - mike260 - Sun Oct 30, 2005 2:12 pm</h4>
    <div class="postbody"><span class="postbody">I think you can get the combined modelview*projection matrix back from the hardware, but I don't know how exactly.
<br/>
Also, I believe the DS supports hardware bounding-box testing against the current fustrum, but again I don't know how to do this.
<br/>
<br/>
In any case, there's no support for either of these things in libnds.<br/>_________________<br/>"Ever tried? Ever failed? No matter. Try Again. Fail again. Fail better."
<br/>
 -- Samuel Beckett</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59309 - TomschikSimon - Mon Oct 31, 2005 11:25 am</h4>
    <div class="postbody"><span class="postbody">Thank you. It looks like I have to write my own matrix-functions or to hope, that somebody will find the address of the register holding these matrix soon.
<br/>
<br/>
But I have another question: How does the div32 and mod32 functions work.
<br/>
I don't get any proper results
<br/>
<br/>
My code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int test = mod32(3,6)</td> </tr></table><span class="postbody">
<br/>
My result is 0, but why</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59315 - TomschikSimon - Mon Oct 31, 2005 12:47 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, Error of IDeaS. I've tested the same code in DSEmu and now it works.
<br/>
Looks like IDeaS doesn't emulate the DIV_CR commands.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59357 - dovoto - Mon Oct 31, 2005 8:19 pm</h4>
    <div class="postbody"><span class="postbody">I will add functions for reading the matrix back from the stack to next release...i thought i had those in there.  I am trying to decide if I want to do a glGetfloat/int type interface or just do a more practicle approach like glGetMatrix().<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
