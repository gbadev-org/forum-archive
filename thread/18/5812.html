<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Binary representation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Binary representation</h2>
<div id="posts">
<div class="post">
    <h4>#43549 - jandujar - Tue May 24, 2005 3:28 pm</h4>
    <div class="postbody"><span class="postbody">Hello.
<br/>
<br/>
I have a problem, and i need  a little help.
<br/>
<br/>
I have a this:
<br/>
<br/>
define 
<br/>
<br/>
class x{
<br/>
public:
<br/>
   int position[10];
<br/>
};
<br/>
<br/>
x positions[100];
<br/>
<br/>
<br/>
but x.position[0..9][0..99]   only have 0 o 1 value.
<br/>
<br/>
Anybody can explain me how to simplifi my class with binary operators:
<br/>
<br/>
position[] = {1,0,1,0,1,0,0,1,1,0}    = &gt; {1010100110}
<br/>
<br/>
To same memory  (because position has 100 fields and positions have 150)
<br/>
<br/>
<br/>
Sorry for my english (i'm spanish)<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43574 - Joat - Tue May 24, 2005 8:52 pm</h4>
    <div class="postbody"><span class="postbody">You have a 10x100 playfield with binary values for each position.  That means you have 1000 bits of information.
<br/>
<br/>
1000/8 = 125 bytes of data, so you can declare your playfield as an array of 125 bytes (or alternatively 63 halfwords or 32 words, it only changes the math a little bit).
<br/>
<br/>
Now each element in the array contains 8 (or 16 or 32) playfield tiles.  You can test for a bit being set by  if (byte &amp; (1&lt;&lt;bitPosition)), where bitPosition is 0..7 (or 15 or 31 if using a halfword or word).
<br/>
<br/>
To actually use your array, you need to first figure out what byte you need, and then what bit within that.  The easiest way is to figure out what bit you need, indexing from the start, then breaking that down:
<br/>
<br/>
bitFromStart = y*width + x;
<br/>
byteToIndex = bitFromStart &gt;&gt; 3; // divide by 8
<br/>
bitWithinByte = bitFromStart &amp; 7;  // which bit within this byte
<br/>
if (mapArray[byteToIndex] &amp; (1 &lt;&lt; (bitWithinByte))) {
<br/>
  you stored a 1 earler in this tile position
<br/>
}
<br/>
<br/>
(note: this assumes the array was created with the first bit in the LSB, and so forth, but that's a pretty arbitrary choice.  doesn't matter which one you use, just make sure to pick the same way when building your maps, and when using them)
<br/>
<br/>
When you want to pack your maps, you can either do it in the same manner as above, or take a building approach, where you start with an empty byte, and shift data in, then write it out every 8 bits.
<br/>
<br/>
Hope this helps.<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43652 - jandujar - Wed May 25, 2005 12:44 pm</h4>
    <div class="postbody"><span class="postbody">Thank's a lot.
<br/>
<br/>
This instruccion help me more:
<br/>
(1 &lt;&lt; (bitWithinByte))
<br/>
<br/>
<br/>
<br/>
One more thing.
<br/>
<br/>
Do you know if "string class" works on ds development? Or I have to build my own.<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43982 - cooky - Sat May 28, 2005 9:48 pm</h4>
    <div class="postbody"><span class="postbody">If you want to do this kind of thing. I.e. make large arrays/structs of single bits into larger bytes n an array style then you should look at the programming part of my website <a href="http://www.ceorron.co.uk" target="_blank">www.ceorron.co.uk</a>
<br/>
<br/>
There you will find what i call a flag array.
<br/>
This class can be set up as any class. Just look at the .h file for the functions they are all prity self explanitory. (but no "[] =" operator)
<br/>
<br/>
Basically it does exactly what you just talked about.
<br/>
<br/>
If you then wanted to insert that flag array into memory for example then you could use <span style="font-style: italic">class_name</span>.get_array() to give you the pointer to the array itself (not a duplicate array).
<br/>
<br/>
As for string classes they are way too large and clumbersome for hand held development. Most people here limit there string sizes and stick to character arrays. It makes a lot of tasks far simpler as it basically means all the rest of your code deosn't need to be anywhere near as dynamic.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44510 - jandujar - Thu Jun 02, 2005 12:16 pm</h4>
    <div class="postbody"><span class="postbody">O_O 
<br/>
<br/>
Thank you.
<br/>
<br/>
This class is what I'm searching.
<br/>
<br/>
I will use it in "Follarium" (in july)<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44924 - cooky - Mon Jun 06, 2005 9:13 pm</h4>
    <div class="postbody"><span class="postbody">Thanks always nice to be of use to some one, some where. :)<br/>_________________<br/>Rolling a six is unlikely but how do you know if you have never picked up the dice.
<br/>
<a href="http://www.ceorron.co.uk" target="_blank">www.ceorron.co.uk</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47776 - jandujar - Wed Jul 13, 2005 7:35 am</h4>
    <div class="postbody"><span class="postbody">I will use your library flag_array.
<br/>
<br/>
I give you credits on my web-page:
<br/>
<br/>
<a class="postlink" href="http://www.polarium-puzzles.com" target="_blank">www.polarium-puzzles.com</a><br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
