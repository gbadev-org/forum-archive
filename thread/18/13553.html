<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Current Time in libnds - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Current Time in libnds</h2>
<div id="posts">
<div class="post">
    <h4>#132857 - kalus - Sat Jun 30, 2007 3:31 pm</h4>
    <div class="postbody"><span class="postbody">How do you get current time in milliseconds from libnds? I've found the structure IPC-&gt;time.curtime, but it always comes out as zeros. I think I have to do something with it in arm7, but what?
<br/>
<br/>
EDIT: ok added rtcGetTime(IPC-&gt;time.curtime); to the vblank handler, only problem now is its only updating seconds, nothing more accurate than that. Is getting milliseconds even possible?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132860 - tepples - Sat Jun 30, 2007 5:51 pm</h4>
    <div class="postbody"><span class="postbody">My first instinct is to add 16, then 17, then 17 to a shared-memory variable in the ARM7's vblank handler, and when it wraps, increment seconds. In order to evaluate whether this situation would work, I'll need to know exactly why you need milliseconds.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132862 - wintermute - Sat Jun 30, 2007 5:58 pm</h4>
    <div class="postbody"><span class="postbody">The RTC does *not* have millisecond resolution and should not be used for anything other than it's intended purpose - the actual real world time. The next iteration of devkitARM and libnds will allow the use of time() - again without millisecond resolution, it just isn't there.
<br/>
<br/>
In order to get finer grained time readings you need to use the timer registers. Some more useful info at <a href="http://forum.gbadev.org/viewtopic.php?p=82246#82246" target="_blank">http://forum.gbadev.org/viewtopic.php?p=82246#82246</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132892 - Ant6n - Sun Jul 01, 2007 5:04 am</h4>
    <div class="postbody"><span class="postbody">maybe it'd be possible to write a routine that routinely checks the time in seconds until it changes, then start a timer. but i dont think this could be fine tuned so that the time and the timer change seconds at the same time, so there might be some odd behaviour on some boundaries</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133869 - spinal_cord - Mon Jul 09, 2007 1:44 pm</h4>
    <div class="postbody"><span class="postbody">Is anyone other than me having trouble with the RTC in the lateds devkitpro/libnds release?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133870 - wintermute - Mon Jul 09, 2007 2:04 pm</h4>
    <div class="postbody"><span class="postbody">There is no RTC support in the current devkitARM/libnds combination with default ARM7 core. As I said above this will be addressed in the next releases, TBA "real soon now"?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133980 - spinal_cord - Tue Jul 10, 2007 12:14 am</h4>
    <div class="postbody"><span class="postbody">"real soon" is a time frame I like a lot! Thanks for the info. I was starting to think I killed my code.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
