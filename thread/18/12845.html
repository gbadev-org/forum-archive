<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Porting libxpnet - a sockets wrapper - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Porting libxpnet - a sockets wrapper</h2>
<div id="posts">
<div class="post">
    <h4>#123407 - Lick - Tue Mar 27, 2007 11:21 pm</h4>
    <div class="postbody"><span class="postbody">I just want to say I just successfully ported libxpnet's <span style="font-style: italic">nsSocket.h</span> and <span style="font-style: italic">nsSocket.cpp</span> to DS. Following will be <span style="font-style: italic">nsHTTPConn.h</span> and <span style="font-style: italic">nsHTTPConn.cpp</span>.
<br/>
<br/>
I'm reasonably happy, since the following code is needed to fetch a webpage: </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">  nsSocket *sock = new nsSocket("www.google.com", 80);
<br/>
  sock-&gt;Open();
<br/>
  
<br/>
  char fetch[] = "GET / HTTP/1.1\r\n"
<br/>
                 "Host: <a href="http://www.google.com" target="_blank">www.google.com</a>\r\n"
<br/>
                 "User-Agent: NintendoDS\r\n\r\n";
<br/>
  int size = strlen(fetch);
<br/>
  sock-&gt;Send((unsigned char*)fetch, &amp;size);
<br/>
  
<br/>
  char data[2048] = {0};
<br/>
  size = 2048;
<br/>
  sock-&gt;Recv((unsigned char*)data, &amp;size);
<br/>
  
<br/>
  sock-&gt;Close();
<br/>
  iprintf(data);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
When nsHTTPConn and nsFTPConn are done, I will release the port.
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123422 - DragonMinded - Wed Mar 28, 2007 1:10 am</h4>
    <div class="postbody"><span class="postbody">What do you mean it's needed to fetch a webpage?  I can fetch a page with just dswifi and it's socket stuff... could you elaborate?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123425 - tepples - Wed Mar 28, 2007 1:56 am</h4>
    <div class="postbody"><span class="postbody">As far as I can tell, this is supposed to be some wrapper around the socket stuff that makes HTTP easier.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123462 - Lick - Wed Mar 28, 2007 10:05 am</h4>
    <div class="postbody"><span class="postbody">Yes, it wraps the sockets implementation into a nice reusable class (therefore it's C++ only). 
<br/>
The interesting part is that libxpnet is also a HTTP and FTP wrapper. So it handles those protocols for you. I am probably going to write a very basic FTP client with it soon.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123484 - tepples - Wed Mar 28, 2007 2:07 pm</h4>
    <div class="postbody"><span class="postbody">A very basic HTTP client that reads a URL from a config file and then loads a .nds directly from that URL would be a nice demo too.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123489 - tyraen - Wed Mar 28, 2007 2:42 pm</h4>
    <div class="postbody"><span class="postbody">Are you releasing them as a compiled library or source code?  Maybe that's a stupid question.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123687 - Lick - Fri Mar 30, 2007 7:48 am</h4>
    <div class="postbody"><span class="postbody">I have decided to port libcurl instead of libxpnet. :)<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123769 - thegamefreak0134 - Fri Mar 30, 2007 11:18 pm</h4>
    <div class="postbody"><span class="postbody">Aww... Why? I rather liked the .NET implementation of stuff. A little odd yes, but it still worked out very nicely.
<br/>
<br/>
Um, would I have to do anything special to get c++ code to compile, or does devkitPRO just do it naturally?
<br/>
<br/>
Regardless, any tools I can use are greatly appreciated. Of course, I'm having a decent bit of luck currently with the PAlib implementation. If I can just convince it somehow to transfer the entire message in one go I'll be happy. 
<br/>
<br/>
&lt;rant&gt;
<br/>
(It likes to stop about halfway through the HTML code for a page. I currently have it looping until it recieves a message with length of zero, for lack of a better way to check for the end of a message. With my dial-up/wireless testing though, I think it tends to timeout when the connection is just being generally slow, causing my loop to exit prematurely.)
<br/>
&lt;/rant&gt;
<br/>
<br/>
Let me know when you make some headway. I'm working on a small bit of interface at the moment, so I don't have to recompile my code every time I want to change the message being sent or connect to another server. Any bit of help along this field is needed. ^_^
<br/>
<br/>
-thegamefreak0134<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123772 - Lick - Fri Mar 30, 2007 11:36 pm</h4>
    <div class="postbody"><span class="postbody">For your information, libxpnet hasn't got anything to do with .NET! ;) And yes, I too don't want to deal with the HTTP protocol and others, that's why I'm trying to port libcurl (even if only a little bit).
<br/>
<br/>
<span style="font-weight: bold">update</span>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">&lt;Lick&gt;	ok i give up.. way too tired and freetimeless to port libcurl
<br/>
&lt;Lick&gt;	someone else do it</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
