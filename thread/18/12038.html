<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>libcartreset - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > libcartreset</h2>
<div id="posts">
<div class="post">
    <h4>#113526 - SukkoPera - Thu Dec 28, 2006 4:05 pm</h4>
    <div class="postbody"><span class="postbody">I wanted to use libcartreset for a small project. The project is ARM9-only (well, I have been a DS programmer for less than 24 hours so far), so I added the following code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   u32 deviceType = DEVICE_TYPE_SCSD;
<br/>
        if (cartSetMenuMode (deviceType))         // Prepare the Slot2 device for reset
<br/>
            passmeloopEnter ();                  // Enter PassMe loop.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm using libcartreset_nolibfat 0.72, and Chishm's new fatlib. ATM I only want the reset function working on my SCLite, that's why I'm hardcoding the deviceType.
<br/>
<br/>
Anyway, the program just hangs, it does not reset. Any hints? Maybe I *must* also program the ARM7 for the reset thing to work? Or DEVICE_TYPE_SCSD is not suitable for the SCLite? It seems that v 0.72 supports it, but I couldn't find a more proper defined type in the headers for libcartreset.
<br/>
<br/>
BTW: LoveLite's resetting works on my SCLite.
<br/>
<br/>
Thanks in advance.<br/>_________________<br/>Nintendo DS Lite (White) + Supercard Lite + R4 + Sandisk 1 GB MicroSD
<br/>
Sony PSP + Firmware 3.03 OE-A2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113527 - Lick - Thu Dec 28, 2006 4:07 pm</h4>
    <div class="postbody"><span class="postbody">Hey SukkoPera! Sorry to disappoint you but, yes, you have to use the ARM7 as well. Otherwise, the whole 'PassMe Loop' can't be done.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113528 - SukkoPera - Thu Dec 28, 2006 4:13 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the instant reply!
<br/>
<br/>
OK then, I'll try that. I just don't understand if libnds has an integrated IPC mechanism or if I should implement my own. And also, what exactly can be done only on the ARM7 and what only on the ARM9.
<br/>
<br/>
Anyway, do you confirm that DEVICE_TYPE_SCSD is OK for SCLite?<br/>_________________<br/>Nintendo DS Lite (White) + Supercard Lite + R4 + Sandisk 1 GB MicroSD
<br/>
Sony PSP + Firmware 3.03 OE-A2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113536 - Lick - Thu Dec 28, 2006 5:01 pm</h4>
    <div class="postbody"><span class="postbody">I can confirm that it works with SCLite.
<br/>
<br/>
As for the ARM7, just build upon the template.c. The template code will handle all the stuff it should.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113538 - SukkoPera - Thu Dec 28, 2006 5:44 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, everything works great now. Thanks for your help!
<br/>
<br/>
Oh, and now I can confirm it works with SCLite, too :).<br/>_________________<br/>Nintendo DS Lite (White) + Supercard Lite + R4 + Sandisk 1 GB MicroSD
<br/>
Sony PSP + Firmware 3.03 OE-A2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115056 - SukkoPera - Fri Jan 12, 2007 4:08 pm</h4>
    <div class="postbody"><span class="postbody">One more question: any chance of getting this to work on GBA?<br/>_________________<br/>Nintendo DS Lite (White) + Supercard Lite + R4 + Sandisk 1 GB MicroSD
<br/>
Sony PSP + Firmware 3.03 OE-A2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115085 - dantheman - Fri Jan 12, 2007 10:31 pm</h4>
    <div class="postbody"><span class="postbody">I don't know if there's a "standard" cart reset library for the GBA or not, although having the users patch the homebrew game with Boot-O-Matic Advance will usually work.  A+B+Start+Select reboots the game, L+R+Start+Select reboots the entire system, bringing the user back to their flash cart menu.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115096 - Lick - Sat Jan 13, 2007 12:15 am</h4>
    <div class="postbody"><span class="postbody">GBA should follow the same principal:
<br/>
1) Reset the media device to bootmenu-mode.
<br/>
2) Jump processor to 0x080000C0. 
<br/>
<br/>
On the GBA it's even easier, as you <span style="font-weight: bold">don't</span> have to do the PassMe loop that involves the ARM9.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115105 - tepples - Sat Jan 13, 2007 12:49 am</h4>
    <div class="postbody"><span class="postbody">Jumping to 0x08000000 or 0x080000C0 does not reset the stack pointer. A proper GBA reset has three steps, which should be done in code running in IWRAM or EWRAM: <ol type="1"><li>Reset the media device </li><li>RegisterRamReset(0xFC) to erase all registers </li><li>Set entry point to ROM and SoftReset() </li></ol><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115111 - Lick - Sat Jan 13, 2007 1:18 am</h4>
    <div class="postbody"><span class="postbody">Yup, that's something I need to put in libcartreset next version. Hehe.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115120 - SukkoPera - Sat Jan 13, 2007 3:16 am</h4>
    <div class="postbody"><span class="postbody">OK, please let me know when you release that!<br/>_________________<br/>Nintendo DS Lite (White) + Supercard Lite + R4 + Sandisk 1 GB MicroSD
<br/>
Sony PSP + Firmware 3.03 OE-A2</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
