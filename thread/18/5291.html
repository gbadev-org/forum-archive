<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Fun with SPI - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Fun with SPI</h2>
<div id="posts">
<div class="post">
    <h4>#38422 - olimar - Sun Mar 27, 2005 1:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by olimar on Wed Aug 20, 2008 9:27 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#38433 - darkfader - Sun Mar 27, 2005 8:32 pm</h4>
    <div class="postbody"><span class="postbody">Ah, looks alot like the savegame EEPROM reading routine I wrote. Except, I cannot seem to get it to work somehow. I hope European DS isn't different :/ I'll check my other DS...
<br/>
Anyway... who wants to try erasing his firmware? :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38434 - Riven.art - Sun Mar 27, 2005 8:34 pm</h4>
    <div class="postbody"><span class="postbody">Maybe to rewrite. The GP32 erases before it loads the new one on.
<br/>
I really hope new firmwares come out</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38441 - darkfader - Sun Mar 27, 2005 9:25 pm</h4>
    <div class="postbody"><span class="postbody">Oh it works here now too... it seems I had wrong a #define :P
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
SPI_CR=0x8800;
<br/>
SPI_DATA=0;
<br/>
SPI_CR=0x8000;
<br/>
SPI_DATA=powersetting; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
That's an odd sequence.
<br/>
<br/>
Anyway... the firmware seems to be 256KB. Firmware of my USA version seem to be encrypted differently than new newer EUR version. Interesting :)
<br/>
Info will appear at <a href="http://www.bottledlight.com/ds/index.php/Main/Firmware" target="_blank">http://www.bottledlight.com/ds/index.php/Main/Firmware</a>
<br/>
Now we wait until someone writes the first DS virus.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38465 - TJ - Mon Mar 28, 2005 3:29 am</h4>
    <div class="postbody"><span class="postbody">I thought the firmware was stored on a ROM like in the GBA? Does this indicate it may be possible to reflash the firmware on the DS?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38530 - darkfader - Mon Mar 28, 2005 11:00 pm</h4>
    <div class="postbody"><span class="postbody">I did command 9F and the ID match with some ST chip.
<br/>
Check bottom of <a href="http://www.bottledlight.com/ds/index.php/Hardware/DataSheets" target="_blank">http://www.bottledlight.com/ds/index.php/Hardware/DataSheets</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38562 - natrium42 - Tue Mar 29, 2005 3:21 am</h4>
    <div class="postbody"><span class="postbody">I made a small firmware dumper for people interested...
<br/>
<br/>
You can download it here: <a href="http://www.natrium42.com/blog/?p=20" target="_blank">http://www.natrium42.com/blog/?p=20</a><br/>_________________<br/><a class="postlink" href="http://www.natrium42.com" target="_blank">www.natrium42.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38570 - darkfader - Tue Mar 29, 2005 5:18 am</h4>
    <div class="postbody"><span class="postbody">It does 64KB, not 32KB :)
<br/>
But I got Darkain's fw dumps and it works.
<br/>
Also, I could write settings :)
<br/>
If the CRC is not correct, it shows some error about corrupted settings :)
<br/>
Anyway... what about a TurnIntoBrick() call in ndslib?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if (gameover) TurnIntoBrick();
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38573 - natrium42 - Tue Mar 29, 2005 5:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darkfader wrote:</b></span></td> </tr> <tr> <td class="quote">It does 64KB, not 32KB :)</td> </tr></table><span class="postbody">
<br/>
Thanks, corrected :)<br/>_________________<br/><a class="postlink" href="http://www.natrium42.com" target="_blank">www.natrium42.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
