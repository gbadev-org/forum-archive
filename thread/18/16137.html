<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>[xm7lib] Release this lib? ... if it's worth it... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > [xm7lib] Release this lib? ... if it's worth it...</h2>
<div id="posts">
<div class="post">
    <h4>#163928 - sverx - Wed Oct 15, 2008 4:01 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
 I know, I already opened <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=15768" target="_blank">this topic</a> to ask about 'how to release a lib'... and I still have to understand clearly how to do that.
<br/>
<br/>
I've been thinking... is it worth it? I mean, is the code (and the idea!) good enough to become a library that somebody would find useful?
<br/>
<br/>
So I prepared a little demo of the yet unreleased library. It's a beta, you won't find so much, forgive me... but gives you the idea, at least.
<br/>
<br/>
It's a library that will play XMs (FastTrackerII eXtended Modules) using only ARM7 resources. So it's like you 'fire and forget', and you've got the ARM9 100% free from this task.
<br/>
<br/>
I've uploaded the demo, which is just a little program that uses the library and contains four XMs that <span style="font-weight: bold">raina</span>, <span style="font-weight: bold">(c)runX,</span> <span style="font-weight: bold">rhinostrich</span> and <span style="font-weight: bold">setrodox</span> decided to sacrificate [;)] for that demo. <span style="font-size: 9px; line-height: normal">(Thank you so much!)</span>
<br/>
<br/>
The XM effects support isn't complete at the moment, most of them are actually still ignored (there are almost none of these in the 4 XMs in the demo) but:
<br/>
- volume column commands and
<br/>
-  instrument volume envelopes are supported (with sustain, loops and fade)
<br/>
- samples of 8 &amp; 16 bits are ok
<br/>
- sample loops (normal &amp; ping-pong) supported too.
<br/>
<span style="font-size: 9px; line-height: normal">(Thank you raina for your lot of beta testing!)</span>
<br/>
<br/>
Well, I need the community feedback. You know, I'm a newbie...
<br/>
<br/>
Here are the links:[...] removed, were broken. Check <a href="http://forum.gbadev.org/viewtopic.php?t=16198" target="_blank">http://forum.gbadev.org/viewtopic.php?t=16198</a> instead.
<br/>
<br/>
p.s. : the scopes are cheating ;) Don't pay too much attention to what you SEE :)
<br/>
<br/>
<span style="font-style: italic">edit: raina took a video of the demo, it's <a class="postlink" href="http://de.youtube.com/watch?v=9e8uyL4Qngo" target="_blank">here on youtube</a>.</span>
<br/>
<span style="font-style: italic">re-edit: removed broken links</span></span><span class="gensmall"><br/><br/>Last edited by sverx on Mon Nov 10, 2008 12:40 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#164019 - 0xtob - Sat Oct 18, 2008 10:11 pm</h4>
    <div class="postbody"><span class="postbody">Hey! The demo is looking good! I'm just wondering: Since <a class="postlink" href="http://code.google.com/p/libntxm/" target="_blank">libntxm</a> does the same thing (XM on ARM7) why did you write another lib for this?
<br/>
<br/>
About releasing: Putting the source on the web will harm no one. Either people will use it or they won't but you have nothing to loose. Also I get some competition :)<br/>_________________<br/><a class="postlink" href="http://blog.dev-scene.com/0xtob" target="_blank">http://blog.dev-scene.com/0xtob</a> | <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">http://nitrotracker.tobw.net</a> | <a class="postlink" href="http://dsmi.tobw.net" target="_blank">http://dsmi.tobw.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164020 - tepples - Sat Oct 18, 2008 10:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">I'm just wondering: Since <a class="postlink" href="http://code.google.com/p/libntxm/" target="_blank">libntxm</a> does the same thing (XM on ARM7) why did you write another lib for this?</td> </tr></table><span class="postbody">
<br/>
Because two different XM players can have different levels of coverage of XM format features, or they might use different time-space tradeoffs, etc. For example, does libntxm support the effects column yet?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164023 - 0xtob - Sat Oct 18, 2008 10:55 pm</h4>
    <div class="postbody"><span class="postbody">I'm sure he had a good reason to start a new library, I just want to know from him what it was.
<br/>
<br/>
libntxm does support some effects already, this is wip.
<br/>
<br/>
What do you mean by time-space tradeoff?<br/>_________________<br/><a class="postlink" href="http://blog.dev-scene.com/0xtob" target="_blank">http://blog.dev-scene.com/0xtob</a> | <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">http://nitrotracker.tobw.net</a> | <a class="postlink" href="http://dsmi.tobw.net" target="_blank">http://dsmi.tobw.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164029 - furrykef - Sat Oct 18, 2008 11:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">What do you mean by time-space tradeoff?</td> </tr></table><span class="postbody">
<br/>
<br/>
Optimizing for size vs. optimizing for speed is a very common tradeoff that one has to make here and there in pretty much any project. Though we don't always make such optimizations consciously, and many of us (like me) initially optimize for "whatever is the simplest to write". ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164030 - tepples - Sat Oct 18, 2008 11:50 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">Q: What's a time-space tradeoff?</span>
<br/>
<br/>
First look up <span style="font-weight: bold">-Os</span> and other <a class="postlink" href="http://gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Optimize-Options.html#Optimize-Options" target="_blank">optimization options in the GCC manual</a>. Then try compiling the same program with -Os, -O2, and -O3.
<br/>
<br/>
Some programs use more memory so that they can run faster. For example, in a music player, a program may have a period table for all octaves (for speed), or it may have a period table only for the 12 tones of the lowest octave with divisions by 2 to reach other octaves (for size). Or a program may use linear interpolation on a lookup table for a trigonometric function (for speed) or <a class="postlink" href="http://en.wikipedia.org/wiki/CORDIC" target="_blank">CORDIC</a> iterations (for size).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164069 - sverx - Mon Oct 20, 2008 8:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">Hey! The demo is looking good!</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you! :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">I'm just wondering: Since <a class="postlink" href="http://code.google.com/p/libntxm/" target="_blank">libntxm</a> does the same thing (XM on ARM7) why did you write another lib for this?</td> </tr></table><span class="postbody">
<br/>
<br/>
Ahem... because I didn't know about libntxm... :| Well, at least it confirms me that the idea of playing XM on ARM7 is good! :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">About releasing: Putting the source on the web will harm no one. Either people will use it or they won't but you have nothing to loose.</td> </tr></table><span class="postbody">
<br/>
<br/>
No plan to release the source at the moment. At least until I want to keep on working on it by myself :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">Also I get some competition :)</td> </tr></table><span class="postbody">
<br/>
<br/>
lol :) I didn't mean to compete... anyway I'll check a demo of libntxm, if you can give me a link to it :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164070 - sverx - Mon Oct 20, 2008 9:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">I'm sure he had a good reason to start a new library, I just want to know from him what it was.</td> </tr></table><span class="postbody">
<br/>
<br/>
:rolleyes: :rolleyes: :rolleyes:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">libntxm does support some effects already, this is wip.</td> </tr></table><span class="postbody">
<br/>
<br/>
xm7lib supports:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">- 0xy Arpeggio
<br/>
- 8xx Set note panning
<br/>
- 9xx Sample offset
<br/>
- Axy Slides note volume up or down
<br/>
- Cxx Set note volume
<br/>
- E8x Set note panning
<br/>
- E9x Retrig note
<br/>
- EAx Slide note fine volume up
<br/>
- EBx Slide note fine volume down
<br/>
- ECx Note cut
<br/>
- EDx Note delay
<br/>
- EEx Pattern delay
<br/>
- Fxx Set song speed
<br/>
- Gxx Set global volume
<br/>
- Hxy Slides global volume up or down
<br/>
- Lxx Set envelope position
<br/>
- Pxy Panning slide
<br/>
- Rxy Retrig note with volume slide
<br/>
<br/>
and partially
<br/>
- 5xy (Portamento to note with) volume slide
<br/>
- 6xy (Vibrato with) volume slide</td> </tr></table><span class="postbody">
<br/>
<br/>
I'll go back to work on effects support after the release of this version of the library (I still need to learn how to do that...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164072 - 0xtob - Mon Oct 20, 2008 9:10 am</h4>
    <div class="postbody"><span class="postbody">Cool! Of course XM playback on the ARM7 is a good idea. I mean, the DS sound system is actually a hardware XM player :) Good luck with coding!
<br/>
<br/>
I've developed libntxm for <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">NitroTracker</a>, so  check it out to see what libntxm sounds like. Judging from your feature list I'd say we're pretty much on par feature-wise. I've got some more effects, and you have better volume envelopes.
<br/>
<br/>
edit: Oh, you got more effects, so you win :)
<br/>
<br/>
So, nice to have some competition :) Let's stay in touch!<br/>_________________<br/><a class="postlink" href="http://blog.dev-scene.com/0xtob" target="_blank">http://blog.dev-scene.com/0xtob</a> | <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">http://nitrotracker.tobw.net</a> | <a class="postlink" href="http://dsmi.tobw.net" target="_blank">http://dsmi.tobw.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164073 - sverx - Mon Oct 20, 2008 9:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">[...] the DS sound system is actually a hardware XM player :)</td> </tr></table><span class="postbody">
<br/>
<br/>
ahahah! You're right! :D
<br/>
<span style="font-size: 7px; line-height: normal">(edit: unfortunally it misses ping-pong loop hardware support...)</span>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">I've developed libntxm for <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">NitroTracker</a>, so  check it out to see what libntxm sounds like.</td> </tr></table><span class="postbody">
<br/>
<br/>
I've read about NitroTracker some time ago (I remember I read that it wasn't supporting any effect...) bit I already was thinking it's a cool project! I'll try it with the same XMs and I'll tell you my opinion (well, I'm not a musician...)
<br/>
Anyway the idea behind xm7lib was (is) to write a library for playing XMs in games, not to write players/trackers for the DS... (and, again, I didn't know somebody was already writing an XM replay library working the same way...)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">Let's stay in touch!</td> </tr></table><span class="postbody">
<br/>
<br/>
Sure! :D
<br/>
Bye!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164082 - tepples - Mon Oct 20, 2008 12:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">(edit: unfortunally it misses ping-pong loop hardware support...)</td> </tr></table><span class="postbody">
<br/>
And compressed samples. DS uses IMA ADPCM; XM uses a less sophisticated method.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164083 - sverx - Mon Oct 20, 2008 1:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">DS uses IMA ADPCM; XM uses a less sophisticated method.</td> </tr></table><span class="postbody">
<br/>
<br/>
AFAIK XM have no compression at all on the samples. Anyway I'd be happy to learn I'm wrong :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164084 - 0xtob - Mon Oct 20, 2008 1:19 pm</h4>
    <div class="postbody"><span class="postbody">XM only has this stupid delta coding, no idea what that's supposed to bring. Anyway, I was thinking of on-the-fly compressing samples with ADPCM  when loading an XM, so less RAM is used.<br/>_________________<br/><a class="postlink" href="http://blog.dev-scene.com/0xtob" target="_blank">http://blog.dev-scene.com/0xtob</a> | <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">http://nitrotracker.tobw.net</a> | <a class="postlink" href="http://dsmi.tobw.net" target="_blank">http://dsmi.tobw.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164087 - sverx - Mon Oct 20, 2008 3:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">XM only has this stupid delta coding, no idea what that's supposed to bring.</td> </tr></table><span class="postbody">
<br/>
<br/>
And I wouldn't call it 'a compressed sample' for sure ;)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">Anyway, I was thinking of on-the-fly compressing samples with ADPCM  when loading an XM, so less RAM is used.</td> </tr></table><span class="postbody">
<br/>
<br/>
Sounds like it's a good idea, if it's possible to enable/disable it...
<br/>
<span style="font-size: 9px; line-height: normal">(and it's a better idea than the one I had... :rolleyes: it envolved <span style="font-style: italic">trashing</span> the XM format :D ... )</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164133 - zzo38computer - Tue Oct 21, 2008 5:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">Cool! Of course XM playback on the ARM7 is a good idea. I mean, the DS sound system is actually a hardware XM player :) Good luck with coding!</td> </tr></table><span class="postbody">My idea is yo make a new XM format call NXM (Nintendo XM) which has a few differences from XM that are more closer to Nintendo DS, such as making the compression the same as Nintendo DS compression, removing smoe things not support by Nintendo DS, and adding a few other things that Nintendo DS has but XM doesn't have. And then write a program to convert XM file to NXM file.<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164138 - tepples - Tue Oct 21, 2008 7:39 pm</h4>
    <div class="postbody"><span class="postbody">A feature request for NXM: Sample sharing, where multiple songs can share samples that have the same length and MD5. For instance, if I use a particular kick drum sample in half the songs in a collection, I don't want to duplicate the sample several times in the archive.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164147 - eKid - Wed Oct 22, 2008 1:09 am</h4>
    <div class="postbody"><span class="postbody">ADPCM compression on everything would probably mess up effect 9xx (sample offset) which is used fairly a lot...
<br/>
<br/>
BTW, my player lib is almost complete (in fact, the music/sfx part IS complete). And I suspect it will dominate over all existing mod players for gba/nds. :)  It has complete mod/s3m/xm/IT support, sample sharing (preprocessed), optional adpcm compression, and other goodies.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164154 - sverx - Wed Oct 22, 2008 9:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zzo38computer wrote:</b></span></td> </tr> <tr> <td class="quote">My idea is yo make a new XM format call NXM (Nintendo XM) which has a few differences from XM that are more closer to Nintendo DS, such as making the compression the same as Nintendo DS compression, removing smoe things not support by Nintendo DS, and adding a few other things that Nintendo DS has but XM doesn't have. And then write a program to convert XM file to NXM file.</td> </tr></table><span class="postbody">
<br/>
<br/>
mmm... I disagree. NDS doesn't support ping-pong loops but it's not a good idea to remove them because it's possibile to transform them in regular loops in the loading routines. Anyway I think it would be interesting to have some ADPCM support, as long as it is optional, and per sample... so it means that NitroTracker -for instance- could add an XM 'subtype' based on FT2's file format and call it NXM (as in Nitro XM, if you want). Of course it won't play on other already existing players/trackers...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">A feature request for NXM: Sample sharing, where multiple songs can share samples that have the same length and MD5. For instance, if I use a particular kick drum sample in half the songs in a collection, I don't want to duplicate the sample several times in the archive.</td> </tr></table><span class="postbody">
<br/>
<br/>
In mods/XMs I've seen sometimes that a single file contains more than one song so that they all share the same samples. Using pattern jump effect it's possible to keep each tune 'separated' from the others...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">ADPCM compression on everything would probably mess up effect 9xx (sample offset) which is used fairly a lot...</td> </tr></table><span class="postbody">
<br/>
<br/>
mmm... got to run some tests about that...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">BTW, my player lib is almost complete (in fact, the music/sfx part IS complete). And I suspect it will dominate over all existing mod players for gba/nds. :) It has complete mod/s3m/xm/IT support, sample sharing (preprocessed), optional adpcm compression, and other goodies.</td> </tr></table><span class="postbody">
<br/>
<br/>
Can't wait to see it :) A demo? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164161 - tepples - Wed Oct 22, 2008 1:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">BTW, my player lib is almost complete (in fact, the music/sfx part IS complete). And I suspect it will dominate over all existing mod players for gba/nds. :)</td> </tr></table><span class="postbody">
<br/>
You said "gba". Do you intend to follow through?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">In mods/XMs I've seen sometimes that a single file contains more than one song so that they all share the same samples. Using pattern jump effect it's possible to keep each tune 'separated' from the others</td> </tr></table><span class="postbody">
<br/>
Once you keep all your music and sound effects in one file, you will end up running into the format's maximum number of distinct patterns, the format's maximum number of order table entries, or the platform's memory limit.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164163 - eKid - Wed Oct 22, 2008 1:38 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">BTW, my player lib is almost complete (in fact, the music/sfx part IS complete). And I suspect it will dominate over all existing mod players for gba/nds. :) It has complete mod/s3m/xm/IT support, sample sharing (preprocessed), optional adpcm compression, and other goodies.</td> </tr></table><span class="postbody">
<br/>
Can't wait to see it :) A demo? :)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Working on/testing the last few things now, a demo will come very soon.. :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">You said "gba". Do you intend to follow through?</td> </tr></table><span class="postbody">
<br/>
Yep, the lib builds for both gba and nds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164164 - kusma - Wed Oct 22, 2008 3:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">You said "gba". Do you intend to follow through?</td> </tr></table><span class="postbody">
<br/>
Yep, the lib builds for both gba and nds.</span></td> </tr></table><span class="postbody">
<br/>
Are you challenging me to a duel?! ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164183 - sverx - Thu Oct 23, 2008 9:28 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Once you keep all your music and sound effects in one file, you will end up running into the format's maximum number of distinct patterns, the format's maximum number of order table entries, or the platform's memory limit.</td> </tr></table><span class="postbody">
<br/>
<br/>
That's not false, but this solution gives the game the ability of having a sort of 'continuous play' instead of stopping and loading a new tune. Of course in each situation there's a choice to be made... (btw there are 256 different patterns and 256 table entries in XM, not really few...)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">Yep, the lib builds for both gba and nds.</td> </tr></table><span class="postbody">
<br/>
<br/>
So it mixes in software instead of using the 16 hardware channels (of the NDS...) ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164188 - eKid - Thu Oct 23, 2008 9:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">Yep, the lib builds for both gba and nds.</td> </tr></table><span class="postbody">
<br/>
<br/>
So it mixes in software instead of using the 16 hardware channels (of the NDS...) ?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
It has different interfaces for gba/ds audio, so it uses the hardware channels on ds. (it also has a special mode that mixes hardware+software together :P)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164194 - kusma - Thu Oct 23, 2008 10:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">It has different interfaces for gba/ds audio, so it uses the hardware channels on ds.</td> </tr></table><span class="postbody">
<br/>
How do you support ping-pong looping on the DS hardware?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">(it also has a special mode that mixes hardware+software together :P)</td> </tr></table><span class="postbody">
<br/>
Outch :P. How do you keep the two mixers in sync?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164195 - eKid - Thu Oct 23, 2008 11:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">It has different interfaces for gba/ds audio, so it uses the hardware channels on ds.</td> </tr></table><span class="postbody">
<br/>
How do you support ping-pong looping on the DS hardware?
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
The modules get converted into a custom format so those get unrolled.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">(it also has a special mode that mixes hardware+software together :P)</td> </tr></table><span class="postbody">
<br/>
Outch :P. How do you keep the two mixers in sync?</span></td> </tr></table><span class="postbody">
<br/>
Magically :P... I delay the hardware channels to match the latency.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164202 - sverx - Thu Oct 23, 2008 12:06 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">How do you support ping-pong looping on the DS hardware?</td> </tr></table><span class="postbody">[...] those get unrolled.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I guess we're all doing that ;) Or is that somebody using a different approach? 8| Talk now! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164204 - kusma - Thu Oct 23, 2008 12:34 pm</h4>
    <div class="postbody"><span class="postbody">I'm not using the DS hardware, so I don't have the problem ;)
<br/>
Unrolling the loops does work, but doing so does give some odd interactions with some effects, like sample offset.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164207 - sverx - Thu Oct 23, 2008 1:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">I'm not using the DS hardware, so I don't have the problem ;)</td> </tr></table><span class="postbody">
<br/>
<br/>
Of course you don't ;) BTW, have you got a demo of your work to see? (To hear!)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote">Unrolling the loops does work, but doing so does give some odd interactions with some effects, like sample offset.</td> </tr></table><span class="postbody">
<br/>
<br/>
for example? Can you explain what could happen with sample offset effect when on a unrolled ping-pong loop?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164210 - eKid - Thu Oct 23, 2008 1:23 pm</h4>
    <div class="postbody"><span class="postbody">If you use sample offset to jump past the end of a sample, the offset gets zeroed (unless using IT format). If you unroll the loop then it makes the sample longer, which might stop the zeroing. You can't start from inside the sample loop with the DS sound hardware though anyway... :/</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164213 - sverx - Thu Oct 23, 2008 2:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">You can't start from inside the sample loop with the DS sound hardware though anyway... :/</td> </tr></table><span class="postbody">
<br/>
<br/>
That's true, and it would be true even if we had support for ping-pong loop so there's no way out... or you have to copy the unrolled loop portion twice (ram waste...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164229 - tepples - Thu Oct 23, 2008 10:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">That's not false, but this solution gives the game the ability of having a sort of 'continuous play' instead of stopping and loading a new tune. Of course in each situation there's a choice to be made... (btw there are 256 different patterns and 256 table entries in XM, not really few...)</td> </tr></table><span class="postbody">
<br/>
Imagine patterns of sixteenth notes at 150 bpm, averaging 64 rows per pattern. This makes each order table entry 6.4 seconds long. I can think of a <span style="font-style: italic">lot</span> of games that have more than a 27-minute soundtrack.
<br/>
<br/>
This whole concept of multiple songs in one .xm file reminds me of how early Super NES games' sound drivers worked: there were multiple SPC700 overlays, each of which contained a more or less self-contained set of samples and songs, and the main CPU would have to send each overlay to the SPC700 CPU through a (comparatively slow) link. For example, Super Mario World and SMB3 in Super Mario All-Stars appear to have used one overlay for world maps and one for gameplay.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164244 - sverx - Fri Oct 24, 2008 11:25 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Imagine patterns of sixteenth notes at 150 bpm, averaging 64 rows per pattern. This makes each order table entry 6.4 seconds long. I can think of a <span style="font-style: italic">lot</span> of games that have more than a 27-minute soundtrack.</td> </tr></table><span class="postbody">
<br/>
<br/>
Never calculated it... wow... 27 minutes it's a <span style="font-size: 18px; line-height: normal">LOT</span>!
<br/>
And you didn't consider you're talking about 27 minutes of <span style="font-weight: bold">different</span> patterns, when a lot of tunes have loops made of patterns...
<br/>
And if it's still not enough you could use 256 rows patterns instead of 64 rows ones, so you'll have 1h 48min of music stuffed in <span style="font-weight: bold">one</span> XM.
<br/>
It could be enough for most of the applications, at least in my opinion... :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164246 - eKid - Fri Oct 24, 2008 11:34 am</h4>
    <div class="postbody"><span class="postbody">What about instrument limit? :)
<br/>
<br/>
Also, what sucks about XM is that instruments can't share samples, so to play a sample with different envelopes (or panning setting..) then you have to duplicate the sample...  :/ I think pre-processing is really the way to go with XMs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164249 - sverx - Fri Oct 24, 2008 11:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">What about instrument limit? :)
<br/>
Also, what sucks about XM is that instruments can't share samples, so to play a sample with different envelopes (or panning setting..) then you have to duplicate the sample...  :/ I think pre-processing is really the way to go with XMs.</td> </tr></table><span class="postbody">
<br/>
<br/>
Are we talking about playing XMs or are we talking about writing a different format starting from XM and adding the features we want/need?
<br/>
<br/>
Because I think you're all right about the fact that XM has its limits... but that's not the point... XM it's a widespread format and I think it's good to have a library thay plays them the best it's possible while not slowing down the ARM9 cpu, it can be a really good system for having music in homebrew videogames. Don't you think? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164251 - tepples - Fri Oct 24, 2008 12:22 pm</h4>
    <div class="postbody"><span class="postbody">Even Tetris Attack or Tetrisphere has a soundtrack longer than 27 minutes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">And you didn't consider you're talking about 27 minutes of <span style="font-weight: bold">different</span> patterns, when a lot of tunes have loops made of patterns...</td> </tr></table><span class="postbody">
<br/>
When a tune loops its patterns, it still uses entries in the order table.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And if it's still not enough you could use 256 rows patterns instead of 64 rows ones, so you'll have 1h 48min of music stuffed in <span style="font-weight: bold">one</span> XM.</td> </tr></table><span class="postbody">
<br/>
And you still have all their samples loaded into RAM, including samples that only one song ever uses, like a TB303-style acid line or like the "bells frogs bing cherries"/"estuans interius" vocals from "One Winged Angel" in <span style="font-style: italic">Final Fantasy VII</span>.
<br/>
<br/>
Yes, XM has its limits, but it's a start. I'm just trying to make sure that when we leave room for extensions to the XM format (like IMA ADPCM compressed samples), we leave room at the same time for other extensions (like instruments sharing samples within or across files). Not all extensions have to be implemented in the first release, of course.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164253 - sverx - Fri Oct 24, 2008 1:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">When a tune loops its patterns, it still uses entries in the order table.</td> </tr></table><span class="postbody">
<br/>
<br/>
I meant using effect Bxx, which does a jump in the order table.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">I'm just trying to make sure that when we leave room for extensions to the XM format (like IMA ADPCM compressed samples), we leave room at the same time for other extensions (like instruments sharing samples within or across files).</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, I'm sure these ideas will be considered when(if) somebody would want to create an "extended XM" format. Personally, I'm not planning to do that, at least now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166408 - hacker013 - Sat Feb 07, 2009 2:39 pm</h4>
    <div class="postbody"><span class="postbody">any updates yet?<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166529 - sverx - Mon Feb 09, 2009 12:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">any updates yet?</td> </tr></table><span class="postbody">
<br/>
<br/>
about?<br/>_________________<br/><a class="postlink" href="http://bit.ly/yiQrz9" target="_blank">libXM7</a>|<a class="postlink" href="http://bit.ly/yJwcOo" target="_blank">NDS programming tutorial (Italiano)</a>|<a class="postlink" href="http://disjointedstudio.blogspot.com/" target="_blank">Waimanu DS / GBA</a>|<a class="postlink" href="http://adshomebrewersdiary.blogspot.com" target="_blank">A DS Homebrewer's Diary</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166548 - hacker013 - Mon Feb 09, 2009 5:27 pm</h4>
    <div class="postbody"><span class="postbody">this library, has it any updates?<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166554 - sverx - Mon Feb 09, 2009 6:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">this library, has it any updates?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, actually it's ver. 0.81 . Details <a class="postlink" href="http://www.teleion.it/users/cgq/nds/libxm7/" target="_blank">here</a> (and in other topics in that same forum...)<br/>_________________<br/><a class="postlink" href="http://bit.ly/yiQrz9" target="_blank">libXM7</a>|<a class="postlink" href="http://bit.ly/yJwcOo" target="_blank">NDS programming tutorial (Italiano)</a>|<a class="postlink" href="http://disjointedstudio.blogspot.com/" target="_blank">Waimanu DS / GBA</a>|<a class="postlink" href="http://adshomebrewersdiary.blogspot.com" target="_blank">A DS Homebrewer's Diary</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
