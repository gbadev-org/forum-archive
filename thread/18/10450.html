<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How can i show fps? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > How can i show fps?</h2>
<div id="posts">
<div class="post">
    <h4>#93684 - ETkoala - Thu Jul 20, 2006 5:55 pm</h4>
    <div class="postbody"><span class="postbody">Is there any way to show the frames per second on screen? It will be useful to improve the code optimization ^^"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93690 - spencer723 - Thu Jul 20, 2006 6:53 pm</h4>
    <div class="postbody"><span class="postbody">Could you not increase a variable every VBlank and check the clock to see if a second has gone by then ouput it to the screen? After the second has gone by, just reset the variable and start again. I don't know how efficient that would be though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93695 - Lazy1 - Thu Jul 20, 2006 7:14 pm</h4>
    <div class="postbody"><span class="postbody">I find it better to measure performance of specific functions in how long they take to execute in milliseconds.
<br/>
<br/>
Here's where you need to do:
<br/>
-
<br/>
- Set up a timer to increment every 1 millisecond
<br/>
- In the start of your function assign a variable to the number of ms passed
<br/>
- At the end of your function execution time will be ( current_ms_passed - initial_ms_passed )
<br/>
<br/>
Then just print out how long it took to the console.
<br/>
Though, you'll need two timers one will have to overflow into timer #2.
<br/>
Then you need an interrupt for timer #2 so when it overflows a variable is incremented with timer #2's value.
<br/>
<br/>
So, current_ms_passed = timer # 2 data + base_ms_counter.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93708 - tepples - Thu Jul 20, 2006 9:12 pm</h4>
    <div class="postbody"><span class="postbody">Or you can use VCOUNT (or whatever they named it on the DS) for the same effect without wasting a timer.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93907 - LiraNuna - Fri Jul 21, 2006 10:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
//on vblank irq: 
<br/>
++dsFrame;
<br/>
if(dsFrame &gt; 59) {
<br/>
 FPS = renderingTime;
<br/>
 renderingTime = dsFrame = 0;
<br/>
}
<br/>
<br/>
// on main loop:
<br/>
while(1) {
<br/>
renderScene();
<br/>
print(FPS);
<br/>
++renderingTime;
<br/>
}
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Private property.
<br/>
Violators will be shot, survivors will be shot again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94154 - ETkoala - Sun Jul 23, 2006 12:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LiraNuna wrote:</b></span></td> </tr> <tr> <td class="quote"></td> </tr></table><span class="postbody">
<br/>
<br/>
thanks ^^, it's easier to understand the code :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94419 - yayo - Mon Jul 24, 2006 8:14 pm</h4>
    <div class="postbody"><span class="postbody">But VBlank will happen even when your code lasts 2 or more hardware vblank ticks in painting a frame, I think the true aprox is to measure the time you consume rendering a frame because vblank will happen exactly as the hardware specs tell us so :/<br/>_________________<br/><a href="http://eduyayo.blogspot.com" target="_blank">http://eduyayo.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94458 - dovoto - Mon Jul 24, 2006 9:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yayo wrote:</b></span></td> </tr> <tr> <td class="quote">But VBlank will happen even when your code lasts 2 or more hardware vblank ticks in painting a frame, I think the true aprox is to measure the time you consume rendering a frame because vblank will happen exactly as the hardware specs tell us so :/</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
In lira's code the renderTime variable is incremented once per game loop.  Every 60 video frames this variable is saved (for printing) and reset, which gives you game frames per 60 video frames (or game frames per second).  He could have used a one second timer instead of the vblank irq which perhaps would have been clearer (but a rather unecessary waste of a timer irq).<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
