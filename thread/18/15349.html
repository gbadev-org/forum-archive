<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>RTC alarm & NDS emulator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > RTC alarm & NDS emulator</h2>
<div id="posts">
<div class="post">
    <h4>#154067 - sverx - Thu Apr 10, 2008 12:17 pm</h4>
    <div class="postbody"><span class="postbody">Hi there,
<br/>
  it's my <span style="font-weight: bold">first</span> post so, first of all, I greet everyone in here :)
<br/>
<br/>
I've been searching this forum but I didn't find an answer so I decided to post the question directly ;)
<br/>
<br/>
I wrote my own arm7 code to communicate with the RTC. I can read the current time, I can read &amp; set the alarm1 and the alarm2, everything it's done using the ndslib function
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">rtcTransaction()</td> </tr></table><span class="postbody">
<br/>
<br/>
Then I said the SIO to trigger the RTC IRQ
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">REG_RCNT = 0x8100;</td> </tr></table><span class="postbody">
<br/>
<br/>
and of course I enabled the IRQ_NETWORK flag.
<br/>
<br/>
Did I forgot something? I can't get the IRQ request when the time I've set into the alarm1 comes...
<br/>
<br/>
I'm using no$gba... because AFAIK it's the only emulator that emulates the RTC.
<br/>
<br/>
Every help will be appreciated. And excuse my not so perfect english...
<br/>
<br/>
Ciao! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154072 - silent_code - Thu Apr 10, 2008 3:14 pm</h4>
    <div class="postbody"><span class="postbody">hi! greets and welcome! :^)
<br/>
<br/>
one short hint: are you really using the deprecated ndslib or did you mean libnds? ;^)
<br/>
<br/>
don't rely on emulators. if it seems to not work, test it on hw. until now, all my clock readings were wrong in emus, but the code worked flawlessly on the hw.
<br/>
<br/>
as to your specific problem, i am not much of a help. sure some others will respond soon.
<br/>
<br/>
happy coding!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154075 - sverx - Thu Apr 10, 2008 3:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">are you really using the deprecated ndslib or did you mean libnds? ;^)</td> </tr></table><span class="postbody">
<br/>
<br/>
right, it's libnds... installed.ini says:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">[libnds]
<br/>
Version=20070503</td> </tr></table><span class="postbody">
<br/>
<br/>
and it makes me think: where can I check which is the current version? (not for downloading it, actually, just to check...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154076 - silent_code - Thu Apr 10, 2008 4:11 pm</h4>
    <div class="postbody"><span class="postbody">on devkitPro's <a class="postlink" href="http://sourceforge.net/projects/devkitpro/" target="_blank">sourceforge page</a>. :^)
<br/>
there's a <a class="postlink" href="http://sourceforge.net/project/showfiles.php?group_id=114505&amp;package_id=151608" target="_blank">more recent version</a> out!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154116 - sverx - Fri Apr 11, 2008 11:28 am</h4>
    <div class="postbody"><span class="postbody">Thanks :) There's even one more release today! :)
<br/>
<br/>
By the way... no idea about the "main" question?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154452 - sverx - Wed Apr 16, 2008 4:00 pm</h4>
    <div class="postbody"><span class="postbody">It's not working even on a real hardware... so there's something wrong I guess :|
<br/>
<br/>
Following this: <a href="http://nocash.emubase.de/gbatek.htm#dsrealtimeclockrtc" target="_blank">http://nocash.emubase.de/gbatek.htm#dsrealtimeclockrtc</a>
<br/>
<br/>
I made a little function to set the alarm n.1 at a specified time. I'm quite sure it works (I made a little function to read the alarm and it confirmed me the time has been set...)
<br/>
<br/>
Of course to access the alarm n.1 I first had to change the value of the <span style="font-weight: bold">status register 2</span>, doing that:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">newvalue = ((oldvalue &amp; 0xF0) | 0x04)</td> </tr></table><span class="postbody">
<br/>
<br/>
well... nothing, no IRQ :|
<br/>
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">mmm... I guess there's also a little mistake in clock.h... it says</span>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define READ_INT_REG2      0x6A
<br/>
#define WRITE_INT_REG2     0x6B</td> </tr></table><span class="postbody">
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">aren't them swapped?</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154481 - Cydrak - Wed Apr 16, 2008 9:44 pm</h4>
    <div class="postbody"><span class="postbody">Can you post source/commands you're sending?
<br/>
<br/>
Notably, values are BCD, and each alarm field has a bit that determines what values need to match. If clear, they act as sort of a wildcard.
<br/>
<br/>
Another thing to check, the SI interrupt is edge triggered. I guess you might try to disable both alarms first, since they share the same line. You can also read status1 to see if the INT1/2 flags are showing up.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154523 - sverx - Thu Apr 17, 2008 9:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">Can you post source/commands you're sending?
<br/>
<br/>
Notably, values are BCD, and each alarm field has a bit that determines what values need to match. If clear, they act as sort of a wildcard.
<br/>
<br/>
Another thing to check, the SI interrupt is edge triggered. I guess you might try to disable both alarms first, since they share the same line. You can also read status1 to see if the INT1/2 flags are showing up.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for your reply... well, I know values are BCD and I know about that MSB that set/cleared means different comparison. Here's the function I wrote to set the alarm (I always work in 24hrs mode)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void RTCWriteAlarm (Alarm_Type* as) {
<br/>
<br/>
  uint8 command[4];
<br/>
<br/>
  switch (as-&gt;alarm) {
<br/>
    case 1: command[0] = WRITE_INT_REG1;
<br/>
           break;
<br/>
   case 2: command[0] = WRITE_INT_REG2;
<br/>
           break;
<br/>
  }
<br/>
<br/>
  command[1]= (as-&gt;day &amp; 0x07);
<br/>
  // check if it's NOT everyday 
<br/>
  if (as-&gt;everyday==0)
<br/>
    command[1] |= 0x80;
<br/>
  
<br/>
  command[2]= as-&gt;hours;
<br/>
  command[3]= as-&gt;minutes;
<br/>
  
<br/>
  integerToBCD(&amp;command[2],2);
<br/>
  
<br/>
  // set the compare enable bits, so that the IRQ got fired ONLY when it's the right hour:minute
<br/>
  command[2] |= 0x80;
<br/>
  command[3] |= 0x80;
<br/>
<br/>
  rtcTransaction (&amp;command[0], 4, 0, 0);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm quite sure it works smooth, I've got a similar function to read the alarm and it confirms me that the alarm gets written :|
<br/>
<br/>
Of course I also disable both the alarms at the beginning of the program
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// reset BOTH alarms
<br/>
RTCWriteStatus2 (RTCReadStatus2() &amp; 0xB0);</td> </tr></table><span class="postbody">
<br/>
<br/>
and I also enable the alarm I want to use (following code is for alarm 1)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">RTCWriteStatus2 ((RTCReadStatus2() &amp; 0xF0) | 0x04);</td> </tr></table><span class="postbody">
<br/>
<br/>
... finally also the SIO has been set to trigger the interrupt
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">REG_RCNT = 0x8100;  // general purpose mode (0x8000) , interrupt enabled (0x0100)</td> </tr></table><span class="postbody">
<br/>
<br/>
and the IRQ it's working, I know it because if I set the alarm1 to trigger every minute
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">RTCWriteStatus2 ((RTCReadStatus2() &amp; 0xF0) | 0x02);</td> </tr></table><span class="postbody">
<br/>
<br/>
it works, I receive the IRQ every 60 seconds.
<br/>
<br/>
Ideas? :|</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155018 - HyperHacker - Wed Apr 23, 2008 11:07 pm</h4>
    <div class="postbody"><span class="postbody">So it works if you set it to go off every minute, but not if you set it to go off just once? Are you specifying the same time in both cases? If so, I'd look closer at whatever bits you're specifying differently to choose single/repeated alarms.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155023 - Cydrak - Thu Apr 24, 2008 12:50 am</h4>
    <div class="postbody"><span class="postbody">Here's essentially what I'm doing. Looks a lot like yours:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// reg: alarm register to set.
<br/>
// time: a value of 0xWWHHMMSS (weekday, hour, min, sec)
<br/>
//   Values are binary; seconds field is ignored.
<br/>
//   Default is to set hour/minute.
<br/>
//   Otherwise, set bit 7 for the chosen fields.
<br/>
//
<br/>
u32 clockSetAlarmReg(int reg, u32 time)
<br/>
{
<br/>
    u8 cmd[4] = { reg, 0, 0, 0 };
<br/>
    IRQGuard gu(0);
<br/>
    
<br/>
    // Default to setting hour and minute if not specified
<br/>
    if(time &amp;&amp; !(time &amp; (setTime|setDate)))
<br/>
        time |= setTime;
<br/>
    
<br/>
    // Even in 24-hour mode, AM/PM bits are still updated,
<br/>
    //    ...so apparently the alarm must match.
<br/>
    int pm = (time&gt;&gt;16 &amp; 0x1f) &gt;= 12? 0x40 : 0x00;
<br/>
    
<br/>
    // Fix up for 12 hour mode
<br/>
    if(pm &amp;&amp; (~g_mode &amp; STATUS_24HRS))
<br/>
        time -= 12 &lt;&lt; 16;
<br/>
    
<br/>
    if(time &amp; setWeekday)  cmd[1] = 0x80 | toBcd(time&gt;&gt;24 &amp; 0x07);
<br/>
    if(time &amp; setHour)     cmd[2] = 0x80 | toBcd(time&gt;&gt;16 &amp; 0x1f) | pm;
<br/>
    if(time &amp; setMinute)   cmd[3] = 0x80 | toBcd(time&gt;&gt; 8 &amp; 0x3f);
<br/>
    
<br/>
    rtcTransaction(cmd, 4, 0, 0);
<br/>
    return time | alarmEnabled;
<br/>
}
<br/>
<br/>
u32 clockSetAlarm2(u32 time)
<br/>
{
<br/>
    clockClearMode(STATUS_INT2AE);
<br/>
    if(!time) return g_alarm2 &amp;= ~alarmEnabled;
<br/>
    
<br/>
    clockSetMode(STATUS_INT2AE);    
<br/>
    g_alarm2 = clockSetAlarmReg(WRITE_INT_REG2, time);
<br/>
    g_alarm2 |= time &amp; alarmFlagsMask;
<br/>
    return g_alarm2;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
I noticed a couple more things, though. First is that I couldn't get RTC interrupts under NO$GBA at all, although reading the time worked. And I think you're right, some of the #defines were swapped...
<br/>
<br/>
The other is that 24-hour mode still updates the AM/PM flag. If the alarm hour is set for 12..23, but missing the PM (0x40), it's not going to fire.
<br/>
<br/>
If this still doesn't fix it, I trimmed out my somewhat lightly-tested <a class="postlink" href="http://draci.chaosnet.org/code/ex-rtc.zip" target="_blank">RTC code</a>. (Mind the naive FIFO stuff... it's months old, but anyway not hard to replace.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155043 - sverx - Thu Apr 24, 2008 11:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">I noticed a couple more things, though. First is that I couldn't get RTC interrupts under NO$GBA at all, although reading the time worked.</td> </tr></table><span class="postbody">
<br/>
<br/>
I <span style="font-weight: bold">can</span> get the IRQ under NO$GBA only when Alarm1 type is 'Per-minute edge interrupt' (0x02) ... :|
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">The other is that 24-hour mode still updates the AM/PM flag. If the alarm hour is set for 12..23, but missing the PM (0x40), it's not going to fire.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, I also realized it -a couple of days ago- reading the datasheets, so I added this line to my function (command[2] is where I store the alarm 'hour', in BCD)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// set the AM/PM bit 
<br/>
command[2] |= ((as-&gt;hours&gt;=12)?0x40:0x00);</td> </tr></table><span class="postbody">
<br/>
... still no IRQ. :|
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">If this still doesn't fix it, I trimmed out my somewhat lightly-tested <a class="postlink" href="http://draci.chaosnet.org/code/ex-rtc.zip" target="_blank">RTC code</a>.</td> </tr></table><span class="postbody">
<br/>
<br/>
I gave a look at your code one minute ago... but still didn't find something so different from mine :|
<br/>
<br/>
Thanks once more... I'll keep on comparing your code to mine until something comes out. Your code works, right? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155044 - sverx - Thu Apr 24, 2008 12:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">So it works if you set it to go off every minute, but not if you set it to go off just once? Are you specifying the same time in both cases? If so, I'd look closer at whatever bits you're specifying differently to choose single/repeated alarms.</td> </tr></table><span class="postbody">
<br/>
<br/>
No, I mean it works when I use 'Per-minute edge interrupt' mode (0x02) ... but NO, it's <span style="font-weight: bold">not</span> working when I reset the 'compare bits' (the MSB) in the <span style="font-style: italic">day-of-week</span> and <span style="font-style: italic">hour</span> and <span style="font-style: italic">minute</span> registers...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155053 - shash - Thu Apr 24, 2008 2:48 pm</h4>
    <div class="postbody"><span class="postbody">If anyone has handy a sample of the RTC alarm with interrupts and such, I'll fix it on DesMuME as soon as I can.<br/>_________________<br/><a href="http://shashemudev.blogspot.com" target="_blank">http://shashemudev.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155054 - sverx - Thu Apr 24, 2008 3:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shash wrote:</b></span></td> </tr> <tr> <td class="quote">If anyone has handy a sample of the RTC alarm with interrupts and such, I'll fix it on DesMuME as soon as I can.</td> </tr></table><span class="postbody">
<br/>
<br/>
if you mean 'a .nds that works on hardware' I found one <a class="postlink" href="http://spinal.dizidesigns.co.uk/alarm_ds.php" target="_blank">here</a>.
<br/>
<br/>
If you mean something else, sorry, I didn't get what you need. Explain me and I'll help you as much as possible.
<br/>
<br/>
Thanks :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155062 - shash - Thu Apr 24, 2008 6:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shash wrote:</b></span></td> </tr> <tr> <td class="quote">If anyone has handy a sample of the RTC alarm with interrupts and such, I'll fix it on DesMuME as soon as I can.</td> </tr></table><span class="postbody">
<br/>
<br/>
if you mean 'a .nds that works on hardware' I found one <a class="postlink" href="http://spinal.dizidesigns.co.uk/alarm_ds.php" target="_blank">here</a>.
<br/>
<br/>
If you mean something else, sorry, I didn't get what you need. Explain me and I'll help you as much as possible.
<br/>
<br/>
Thanks :)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I basically meant a simple ".nds" that works on hardware and doesn't on emulators, I don't know if that link you posted is what you're looking to be fixded on emulators. I don't have much time lately, so a concise sample would be the best towards fixing this fast :)<br/>_________________<br/><a href="http://shashemudev.blogspot.com" target="_blank">http://shashemudev.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155065 - sverx - Thu Apr 24, 2008 6:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shash wrote:</b></span></td> </tr> <tr> <td class="quote">I basically meant a simple ".nds" that works on hardware and doesn't on emulators</td> </tr></table><span class="postbody">
<br/>
<br/>
mmm... no, then it's wrong. :(
<br/>
<br/>
That one works on hardware and also works on NO$GBA emulator. At the moment it's my code that doesn't work on the emulator... and unfortunatly I can do only few tests on hardware. The few I've done, it wasn't working. I guess anyway it's a problem of my code, even if I don't know where the problem is. The last problem is that when I'll find the mistake and correct it, I'm not sure I'll notice it (on the emulator...) :|
<br/>
<br/>
Thanks anyway!
<br/>
<br/>
Ciao :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155086 - Cydrak - Thu Apr 24, 2008 9:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks once more... I'll keep on comparing your code to mine until something comes out. Your code works, right? :)</td> </tr></table><span class="postbody">
<br/>
Er, yes, it should... The posted code was a summary, mind. The *.zip is what I tested. Certain settings like 12-hour or the clock correction weren't really tested, but IRQs work for my DSLite. On NO$GBA though, it never sees an IRQ and the status bits stay clear, although all the registers appear to be set.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">That one works on hardware and also works on NO$GBA emulator.</td> </tr></table><span class="postbody">
<br/>
Hm, are there sources to that? How do you know it's using the RTC interrupt, and not something else? (Vblank, timers... really, the main appeal of the RTC is that you can go entirely to sleep and still wake up, whereas most hardware and interrupts would be paused.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shash wrote:</b></span></td> </tr> <tr> <td class="quote">If anyone has handy a sample of the RTC alarm with interrupts and such, I'll fix it on DesMuME as soon as I can.</td> </tr></table><span class="postbody">
<br/>
What I posted covers the main IRQs at least. I should probably beef up the example so one can fool with things like 12-hour, setting the time, etc...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">At the moment it's my code that doesn't work on the emulator... and unfortunatly I can do only few tests on hardware.</td> </tr></table><span class="postbody">
<br/>
I found it well worth my time to get a wifi solution working. Doubly so when I can soft-reboot, which brings the testing time well under a minute, under 10 sec in some cases. As a result, I almost never test on emulators...
<br/>
<br/>
(Unfortunately the tool I use doesn't seem supported now, I heavily modified it anyway, and the original link is broken, so I'm not sure what to suggest for that. :/)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155328 - sverx - Mon Apr 28, 2008 10:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">That one works on hardware and also works on NO$GBA emulator.</td> </tr></table><span class="postbody">
<br/>
Hm, are there sources to that? How do you know it's using the RTC interrupt, and not something else? (Vblank, timers... really, the main appeal of the RTC is that you can go entirely to sleep and still wake up, whereas most hardware and interrupts would be paused.)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Well ... :| You're right, I don't know about that :|
<br/>
<br/>
<span style="font-size: 7px; line-height: normal">(I'm still working on it... but there could be some news... )</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155413 - sverx - Tue Apr 29, 2008 11:23 am</h4>
    <div class="postbody"><span class="postbody">It's working now! :) Well, I'm not really sure what was exactly that made it... (maybe it's that you need to reset the alarm status to 'disable' before setting it again ON and setting a new alarm time? mmm... still not sure...) but now, on a real NDS -I mean hardware- it works. It's not working on any emulator... so maybe <span style="font-weight: bold">shash</span> can try to fix <span style="font-weight: bold">DesMuME</span> ?
<br/>
<br/>
Thanks everybody (well, especially Cydrak!) for the help.
<br/>
<br/>
See you soon with new problems ;)
<br/>
<br/>
Ciao! :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155460 - shash - Tue Apr 29, 2008 8:51 pm</h4>
    <div class="postbody"><span class="postbody">I will have a some free time the following days, so if you can send me or upload it elsewhere I'll spend a few hours trying to fix it.<br/>_________________<br/><a href="http://shashemudev.blogspot.com" target="_blank">http://shashemudev.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155506 - sverx - Wed Apr 30, 2008 8:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shash wrote:</b></span></td> </tr> <tr> <td class="quote">if you can send me or upload it elsewhere</td> </tr></table><span class="postbody">
<br/>
<br/>
I sent you a PM right now :) Thanks :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
