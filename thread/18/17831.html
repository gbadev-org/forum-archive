<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>memcpy() versus ldmia/stmia versus dmaCopyWords() versus... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > memcpy() versus ldmia/stmia versus dmaCopyWords() versus...</h2>
<div id="posts">
<div class="post">
    <h4>#177254 - sverx - Fri Feb 24, 2012 3:13 pm</h4>
    <div class="postbody">I was always asking myself... well, then I made a small program that measures the time taken to copy 64000 bytes from main memory to main or to video memory, using <em class="text-italics">memcopy</em>(), using ldmia/stmia on 8 registers, reading from uncached and/or cache unaligned locations, unrolling ldmia/stmia loops, using ldmia/stmia on 10 registers, using a DTCM temporary storage area, or using <em class="text-italics">dmaCopyWords</em>().<br/>
<br/>
All the results are <a class="postlink" href="http://adshomebrewersdiary.blogspot.com/2012/02/unequivocal-answer.html">here</a>, the program too.<br/>
<br/>
Somebody eventually may find it useful/interesting :)</div>    
</div>
<div class="post">
    <h4>#177298 - LOst? - Sun Apr 01, 2012 5:51 am</h4>
    <div class="postbody">What is the fastest method of updating the OAM? <br/>
(I don't want to guess the memory locations, but I mean copying a full global array of OAM entries to OAM RAM each picture frame).</div>    
</div>
<div class="post">
    <h4>#177299 - sverx - Sun Apr 01, 2012 2:45 pm</h4>
    <div class="postbody">Each OAM is just 1 KB, so it doesn't make a big difference.<br/>
<br/>
I would bet either on <em class="text-italics">dmaCopyWords</em>(), keeping in mind you need to flush the cache so that your copy in main memory has been written before starting the DMA copy OR you can make your own simple ldmia/stmia asm routine and don't ever worry about the whole caching thing...</div>    
</div>
</div>

    </body>
</html>
