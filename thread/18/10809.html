<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>PAlib Adventures - Problem , question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > PAlib Adventures - Problem , question</h2>
<div id="posts">
<div class="post">
    <h4>#98307 - Erith - Mon Aug 14, 2006 4:12 pm</h4>
    <div class="postbody"><span class="postbody">Hi Guys!
<br/>
<br/>
I'm trying to develop someting on my DS using PAlib.
<br/>
<br/>
I will post every problem and question in this topic, hoping you guys can help me!
<br/>
<br/>
Trouble:
<br/>
1) I'm having some problems with graphic conversion with PAGfx, I create my sprites in CorelDraw r 13 and save in bmp, jpg, or png but when i try to convert it the application Closes suddenly. If you need I can Post the bitmap i'm trying to convert(Sprite conversion).
<br/>
<br/>
2) I tested stylus funcionality, by dragging arround a Sprite, but on my DS (supercard) or on any emulator I have allways the same problem.
<br/>
If the sprite is dragged on the right or left bottom corner, it stiks there and i cant move it anymore..
<br/>
<br/>
Here The code I used:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Includes
<br/>
#include &lt;PA9.h&gt;       // Include for PA_Lib
<br/>
#include "gfx/gioca.pal.c"
<br/>
#include "gfx/gioca.c"
<br/>
#include "gfx/titolo.pal.c"
<br/>
#include "gfx/titolo.c"
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
// Function: main()
<br/>
int main(int argc, char ** argv)
<br/>
{
<br/>
<br/>
   PA_Init();    // Initializes PA_Lib
<br/>
   PA_InitVBL(); // Initializes a standard VBL
<br/>
   
<br/>
   PA_LoadTiledBg(1, // screen
<br/>
         3, // background number (0-3)
<br/>
         titolo); // Background name, used by PAGfx...
<br/>
   
<br/>
   PA_LoadSpritePal (0,0,(void*)gioca_Pal);
<br/>
   PA_CreateSprite(0,0,(void*)gioca_Sprite,OBJ_SIZE_64X32,
<br/>
   1,0,96,100);   
<br/>
   
<br/>
   
<br/>
   // Infinite loop to keep the program running
<br/>
   while (1)
<br/>
   {
<br/>
   
<br/>
   if(PA_SpriteTouched(0) &amp;&amp; Stylus.Held==1) {
<br/>
   PA_SetSpriteXY(0,0,Stylus.X-32,Stylus.Y-16);
<br/>
   
<br/>
   }
<br/>
      PA_WaitForVBL();
<br/>
   }
<br/>
   
<br/>
   return 0;
<br/>
} // End of main()
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Question:
<br/>
<br/>
-- Do I have Any Chance to get a sprite bigger than 64x64? (like in Bleach DS, where the sprites are very big) Thanks Guys For everything!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98309 - retrohead - Mon Aug 14, 2006 4:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">1) I'm having some problems with graphic conversion with PAGfx, I create my sprites in CorelDraw r 13 and save in bmp, jpg, or png but when i try to convert it the application Closes suddenly. If you need I can Post the bitmap i'm trying to convert(Sprite conversion). </td> </tr></table><span class="postbody">
<br/>
<br/>
When you convert with PAGfx, all your files must be the same colour depth, i.e. all 256colours.
<br/>
<br/>
Also all your images must one of the restricted widths 8px 16px 32px 64px for sprites.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">2) I tested stylus funcionality, by dragging arround a Sprite, but on my DS (supercard) or on any emulator I have allways the same problem.
<br/>
If the sprite is dragged on the right or left bottom corner, it stiks there and i cant move it anymore.. </td> </tr></table><span class="postbody">
<br/>
<br/>
I have no idea sorry :(
<br/>
*EDIT* IDEA - Perhaps stop the sprite moving into the area that it gets stuck. You could output some debug text to the screen showing the x and y position of the sprite then take a note of where it gets stuck. You can then stop the styus working when it reaches the rim of tat area, just an idea for a quick fix.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">-- Do I have Any Chance to get a sprite bigger than 64x64? (like in Bleach DS, where the sprites are very big) Thanks Guys For everything!</td> </tr></table><span class="postbody">
<br/>
<br/>
The only way i found for doing this was by using multipla sprites for creating the large sprite. 
<br/>
<br/>
For example:
<br/>
To create a 128x128 sprite you need to use 4* 64x64 sprites.
<br/>
<br/>
I did see a method for using a 128x128 sprite
<br/>
<br/>
1. Create your sprite 128x128
<br/>
2. PAGfx the sprite
<br/>
3. Load and create the sprite as 64x64 
<br/>
4. Use double size to make the sprrites canvas 128x128.
<br/>
<br/>
The above method didn't work for me and all i ended up with were blank sprites. I resorted to my first suggestion.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98343 - omaremad - Mon Aug 14, 2006 8:10 pm</h4>
    <div class="postbody"><span class="postbody">I think the graphics have to be palletted in photoshop/gimp etc...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98405 - Lynx - Tue Aug 15, 2006 1:22 am</h4>
    <div class="postbody"><span class="postbody">If you test out a lot of the PAlib released homebrew, you will see the exact same thing with the sprites sticking to the bottom of the screen..  So, it's either a PAlib issue or tutorials not explaining the proper way to handle sprites so they don't get stuck at the bottom of the screen.<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98654 - Erith - Wed Aug 16, 2006 7:56 pm</h4>
    <div class="postbody"><span class="postbody">Thanks Guys For Everything!
<br/>
<br/>
Now another problem...
<br/>
<br/>
if i add in my previsious code
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u8 prova;</td> </tr></table><span class="postbody"> (also just declaring a variable)
<br/>
<br/>
I get an error from the compiler !!!
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"> void value not ignored as it ought to be </td> </tr></table><span class="postbody">
<br/>
<br/>
I tryed to put the variable before and next to the main function...
<br/>
<br/>
What can i do?
<br/>
<br/>
I got one more problem:
<br/>
<br/>
I want that a sprite disappear if i put it on another...
<br/>
then i wrote ths code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if(PA_SpriteTouched(1)&amp;&amp; preso==1 &amp;&amp; Stylus.Released==1){PA_DeleteSprite(0,0);</td> </tr></table><span class="postbody">
<br/>
<br/>
But so, nothing happens if I put it on the second and if I delete from the code </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Stylus.Released==1</td> </tr></table><span class="postbody">
<br/>
The sprite disappears suddenly when I comes on the other sprite's corner...
<br/>
<br/>
<br/>
Sorry for my bad English.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98805 - Erith - Thu Aug 17, 2006 6:28 pm</h4>
    <div class="postbody"><span class="postbody">Ok, i solved that problem, but now i have another one!
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Includes
<br/>
#include &lt;PA9.h&gt;       // Include for PA_Lib
<br/>
#include "gfx/gioca.pal.c"
<br/>
#include "gfx/gioca.c"
<br/>
#include "gfx/titolo.pal.c"
<br/>
#include "gfx/titolo.c"
<br/>
#include "gfx/cartaccia.pal.c"
<br/>
#include "gfx/cartaccia.c"
<br/>
#include "gfx/cestino.pal.c"
<br/>
#include "gfx/cestino.c"
<br/>
<br/>
<br/>
u8 preso=0;
<br/>
u8 cestix;
<br/>
u8 cesty;
<br/>
s16 nposx;
<br/>
s16 nposy;
<br/>
<br/>
<br/>
// Function: main()
<br/>
int main(int argc, char ** argv)
<br/>
{
<br/>
   
<br/>
   PA_Init();    // Initializes PA_Lib
<br/>
   PA_InitVBL(); // Initializes a standard VBL
<br/>
   
<br/>
   PA_LoadTiledBg(1, // screen
<br/>
         3, // background number (0-3)
<br/>
         titolo); // Background name, used by PAGfx...
<br/>
   
<br/>
   PA_LoadSpritePal (0,0,(void*)cartaccia_Pal);
<br/>
   PA_CreateSprite(0,0,(void*)cartaccia_Sprite,OBJ_SIZE_32X32,
<br/>
   1,0,150,100);   
<br/>
   PA_LoadSpritePal (0,1,(void*)cestino_Pal);
<br/>
   PA_CreateSprite(0,1,(void*)cestino_Sprite,OBJ_SIZE_64X64,
<br/>
   1,1,10,10);
<br/>
   // Infinite loop to keep the program running
<br/>
   
<br/>
   while (1)
<br/>
   {
<br/>
   PA_InitRand();
<br/>
   nposx=PA_RandMinMax (-1, 1);
<br/>
   nposy=PA_RandMinMax (-1, 1);
<br/>
   PA_SetSpriteX(0,1,cestix=cestix+nposx);
<br/>
   PA_SetSpriteY(0,1,cesty=cesty+nposy);
<br/>
   if(PA_SpriteTouched(0) &amp;&amp; Stylus.Held==1) {
<br/>
   PA_SetSpriteXY(0,0,Stylus.X-16,Stylus.Y-16); preso=1; cestix=PA_GetSpriteX(0,1); cesty=PA_GetSpriteY(0,1);
<br/>
   }
<br/>
   
<br/>
   if(Stylus.Released &amp;&amp; PA_StylusInZone(cestix, cesty, cestix+64, cesty+64)){PA_DeleteSprite(0,0);}
<br/>
   
<br/>
   
<br/>
      PA_WaitForVBL();
<br/>
   }
<br/>
   
<br/>
   return 0;
<br/>
} // End of main()
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I want that the trash moves randomly but it moves always diagonally.
<br/>
<br/>
Here the nds compiled file.
<br/>
<br/>
<a class="postlink" href="http://www.uppo.it/storage/57ce0aa7a162ee1ab4d863cf563b1164.nds" target="_blank">http://www.uppo.it/storage/57ce0aa7a162ee1ab4d863cf563b1164.nds</a>
<br/>
<br/>
Please Help me!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98829 - dustin - Thu Aug 17, 2006 9:10 pm</h4>
    <div class="postbody"><span class="postbody">Have you tried it on hardware and not in an emulator because I have found that some emulators don't like PA_Rand and always give the same number.<br/>_________________<br/><a href="http://www.thrivepresents.com" target="_blank">www.thrivepresents.com</a>
<br/>
palib.dustin.info</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98857 - Erith - Fri Aug 18, 2006 1:36 am</h4>
    <div class="postbody"><span class="postbody">Yeah Dustin that's right, if I put it into the supercard and in the ds works good.
<br/>
Tnx.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98905 - Erith - Fri Aug 18, 2006 12:14 pm</h4>
    <div class="postbody"><span class="postbody">Let's go on a higher level.
<br/>
<br/>
3d... How To?
<br/>
<br/>
I'm a 3d modeler and with my 3d program I can export:
<br/>
<br/>
3ds
<br/>
stl
<br/>
xml
<br/>
direct 3d
<br/>
dxf
<br/>
fbx
<br/>
quickdraw3d
<br/>
uzr
<br/>
vrml
<br/>
obj
<br/>
<br/>
<br/>
What can I do to see my model on my NDS?
<br/>
<br/>
I saw a bin file on the toon_shading example on the devikit examples (not pa_lib) and it seems like that it's the 3d model...
<br/>
<br/>
I've tried it and this one works on my ds but all the palib 3d eamples and some devkit nds 3d examples (on devkitPro\examples\nds\Graphics\3D)
<br/>
expecially the Nehe tutorials don't work on the ds or emu...
<br/>
<br/>
Please Help!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99011 - Sausage Boy - Sat Aug 19, 2006 1:24 am</h4>
    <div class="postbody"><span class="postbody">What 3d program are you using? I believe tciny is working on an exporter for Maya. There are no good exportion and conversion tools for DS 3d yet, you'll either have to write your own or wait and see.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99341 - Erith - Sun Aug 20, 2006 9:26 pm</h4>
    <div class="postbody"><span class="postbody">I'm using C4d.
<br/>
I would write a PHP program that can convert for example VRML in the DS format (i mean a HRF (human readable format) ) so I can include as file dot Cpp this one... Here an example tha shows how a vrml2 works:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#VRML V2.0 utf8
<br/>
<br/>
#Created by CINEMA 4D
<br/>
<br/>
DEF Platonico Transform {
<br/>
  children [ 
<br/>
    Shape {
<br/>
      appearance Appearance {
<br/>
        material Material {
<br/>
        }
<br/>
      }
<br/>
      geometry DEF FACESET_Platonico IndexedFaceSet {
<br/>
        ccw FALSE
<br/>
        solid FALSE
<br/>
        coord Coordinate {
<br/>
          point [ -80.901703 50 0,-80.901703 -50 0,-50 0 80.901703,50 0 80.901703,80.901703 50 0,
<br/>
            80.901703 -50 0,50 0 -80.901703,-50 0 -80.901703,0 80.901703 50,0 80.901703 -50,
<br/>
            0 -80.901703 -50,0 -80.901703 50
<br/>
          ]
<br/>
        }
<br/>
        texCoord TextureCoordinate {
<br/>
          point [ 0.5 0,1 1,1 1,
<br/>
            0 1,0.5 0,0 1,0.5 0,1 1,
<br/>
            0.5 0,0 1,1 1,0 1,0.5 0,
<br/>
            1 1,0.5 0,1 1,0 1,1 1,
<br/>
            0 1,0.5 0,1 1,0 1,0.5 0,
<br/>
            0 1,1 1,0 1,1 1,0.5 0,
<br/>
            1 1,0.5 0,1 1,0 1
<br/>
          ]
<br/>
        }
<br/>
        coordIndex [ 9,8,0,-1,8,2,0,-1,8,3,2,-1,8,4,3,-1,
<br/>
          8,9,4,-1,4,9,6,-1,6,9,7,-1,9,0,7,-1,
<br/>
          11,10,1,-1,2,11,1,-1,2,3,11,-1,3,5,11,-1,
<br/>
          5,10,11,-1,5,6,10,-1,6,7,10,-1,7,1,10,-1,
<br/>
          1,7,0,-1,2,1,0,-1,4,5,3,-1,4,6,5,-1
<br/>
        ]
<br/>
        texCoordIndex [ 25,24,0,-1,23,7,0,-1,23,10,6,-1,23,13,8,-1,
<br/>
          23,26,12,-1,11,26,19,-1,18,26,22,-1,25,1,22,-1,
<br/>
          31,28,4,-1,5,30,4,-1,5,10,29,-1,9,15,29,-1,
<br/>
          16,28,29,-1,16,17,27,-1,18,20,27,-1,21,2,27,-1,
<br/>
          3,20,0,-1,5,2,0,-1,11,15,8,-1,11,17,14,-1
<br/>
        ]
<br/>
      }
<br/>
    }
<br/>
  ]
<br/>
}
<br/>
DEF Timer TimeSensor {
<br/>
  startTime 0
<br/>
  stopTime 0
<br/>
  cycleInterval 3
<br/>
  loop TRUE
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I think is pretty easy (ok i think XML is better) and the last one Timer time sensor is for animation... but it doesn't work with bones... it works only with PLA (point level animation) easier to calculate for the hardware but the file will be bigger!
<br/>
<br/>
That's my 2 cents... Any Idea?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
