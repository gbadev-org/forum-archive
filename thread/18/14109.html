<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GDC DS-papers - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > GDC DS-papers</h2>
<div id="posts">
<div class="post">
    <h4>#139784 - syncope - Mon Sep 10, 2007 3:46 am</h4>
    <div class="postbody"><span class="postbody">Huh, didn't make it this year but...suprisingly the GDC07 proceedings are already publically available <a class="postlink" href="https://www.cmpevents.com/GD07/a.asp?option=C&amp;V=1&amp;SL=2&amp;CP1=141&amp;PV=2&amp;DLnts=1" target="_blank">here</a>.( bunch of <a class="postlink" href="https://www.cmpevents.com/GD07/a.asp?option=C&amp;V=1&amp;SB=4" target="_blank">here</a> stuff there)
<br/>
<br/>
Nothing new really, but all in all I guess it makes for a friendly-written high level beginner's introduction.
<br/>
Could have sworn they meant to cover dual screen 3D rendering in more detail in this one.
<br/>
<br/>
-The texture streaming is nice, 
<br/>
-Using sprites as cheap bilboard replacements for lightflares is a nice touch [mario basketball does that too no ?].
<br/>
-Nice fog insights,
<br/>
Speaking of which, have you seen what they are doing with fog in the Transformers DS games. Like how its smoothly receding/fading into the background. Think it looks relatively slick.
<br/>
<a class="postlink" href="http://dsmedia.ign.com/ds/image/article/780/780538/transformers-the-game-decepticons-20070413031449432.jpg" target="_blank">(1)</a>
<br/>
<a class="postlink" href="http://dsmedia.ign.com/ds/image/article/780/780538/transformers-the-game-decepticons-20070413031449870.jpg" target="_blank">(2)</a> - don't tell me that's just a skybox.
<br/>
-and toon shading/outlines or edge marking as they refer to it explained.
<br/>
<br/>
*Now initially I wasn't sure wheather hotlinking was a bad idea. But these are public files, with all legally questionable content removed. Should be good to go and enjoy :)</span><span class="gensmall"><br/><br/>Last edited by syncope on Sat Sep 15, 2007 8:19 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#139796 - a128 - Mon Sep 10, 2007 8:14 am</h4>
    <div class="postbody"><span class="postbody">Nice document...but how you simulate point lights?!
<br/>
<br/>
Maybe you can enable/disable the light for some polygons?!
<br/>
<br/>
Ok, this is possible....is this a solution for a point light?!
<br/>
<br/>
<br/>
<br/>
Or does "simulate" mean....calc you own vertex colors?!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139910 - a128 - Tue Sep 11, 2007 1:27 pm</h4>
    <div class="postbody"><span class="postbody">I use glLight(1,.........) with different directions for different models in one render frame, but of course you still have a "directional light" not a point light?!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139915 - pas - Tue Sep 11, 2007 3:33 pm</h4>
    <div class="postbody"><span class="postbody">Nice, indeed (good thing to show people that say: shut up with your underpowered DS Shit !).
<br/>
<br/>
BTW: Where are the Video's the Document points to ? Copyright protected ?
<br/>
<br/>
What do they mean with 2048 Polygons at a time ?
<br/>
<br/>
I thought the DS could more ? Something about 120.000 ? Or did I misunderstand something ? Could anyone link me to a good DS Fact Sheet ? Sorry for being a bit stupid, I just want to understand.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139919 - kusma - Tue Sep 11, 2007 3:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>pas wrote:</b></span></td> </tr> <tr> <td class="quote">I thought the DS could more ? Something about 120.000 ? Or did I misunderstand something ?</td> </tr></table><span class="postbody">
<br/>
2048 per frame at 60 FPS ~= 120.000 per second</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139924 - pas - Tue Sep 11, 2007 5:05 pm</h4>
    <div class="postbody"><span class="postbody">ok, thank you !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139959 - syncope - Wed Sep 12, 2007 1:57 am</h4>
    <div class="postbody"><span class="postbody">Yes the DS (just like the Wii- what's up with that Nintendo ?) is limited in the number of vertices and hence Polygons it can display.
<br/>
Better to have known limits than unpleasant suprises however.
<br/>
<br/>
@pas The videos are nowhere to be found, as you expected &gt; they contain copyrighted/devkit stuff.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139978 - a128 - Wed Sep 12, 2007 8:29 am</h4>
    <div class="postbody"><span class="postbody">I have contacted Chuck Homic who held the DS GDC07 topic..and asked him about his "point light "idea....
<br/>
<br/>
"Simulating pointlights" using the DS hardware....is  changing the direction of one light souce per frame...so model A have a different direction then model B.
<br/>
<br/>
And -what I missed you can change the intensity
<br/>
 based on the distance to the light source.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140296 - Mumbly Juergens - Sat Sep 15, 2007 3:07 am</h4>
    <div class="postbody"><span class="postbody">Some of the other titles on the GDC page you linked look interesting. I may be stupid or mental but is there a way to download them?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140373 - syncope - Sat Sep 15, 2007 8:14 pm</h4>
    <div class="postbody"><span class="postbody">huh ? oh thanks for pointing that out Mumbly.
<br/>
It was meant to point to <a class="postlink" href="https://www.cmpevents.com/GD07/a.asp?option=C&amp;V=1&amp;SL=2&amp;CP1=141&amp;PV=2&amp;DLnts=1" target="_blank">this Page</a>
<br/>
[and if that doesn't work &gt;&gt; simply click on 'proceedings' in the upper right corner and select 'Game Developers Conference' on the following page ;)]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141730 - ritz - Fri Sep 28, 2007 10:12 pm</h4>
    <div class="postbody"><span class="postbody">Here's my attempt at point lights (w/attenuation) using the hardware directional lights only. Dynamic works somewhat too (hold X for the light to spin around the room... move/watch the dude), but please ignore the map tiles as I've yet to modify and re-convert them for this. All the keys (except for START) and the touchscreen do stuff. Holding SELECT is just a debug key that skips swap buffers &amp; vsync (for benchmarking things).
<br/>
<br/>
<a class="postlink" href="http://ritz.ca.googlepages.com/sonicrpg.zip" target="_blank">sonicrpg</a>
<br/>
<br/>
Install as /sonicrpg/*.* in the root of your memory card.
<br/>
<br/>
P.S. It's best just to check out the static point light for a bit before pushing X (dynamic) because the map parts screw up :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141772 - xrl - Sat Sep 29, 2007 6:36 pm</h4>
    <div class="postbody"><span class="postbody">Nice presentation. Are the movies available?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141788 - M3d10n - Sun Sep 30, 2007 12:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ritz wrote:</b></span></td> </tr> <tr> <td class="quote">Here's my attempt at point lights (w/attenuation) using the hardware directional lights only. Dynamic works somewhat too (hold X for the light to spin around the room... move/watch the dude), but please ignore the map tiles as I've yet to modify and re-convert them for this. All the keys (except for START) and the touchscreen do stuff. Holding SELECT is just a debug key that skips swap buffers &amp; vsync (for benchmarking things).
<br/>
<br/>
<a class="postlink" href="http://ritz.ca.googlepages.com/sonicrpg.zip" target="_blank">sonicrpg</a>
<br/>
<br/>
Install as /sonicrpg/*.* in the root of your memory card.
<br/>
<br/>
P.S. It's best just to check out the static point light for a bit before pushing X (dynamic) because the map parts screw up :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Looks nice. Better than some commercial games, actually. How many polygons are you using there? Btw, I noticed the framerate drops when more than one map tile is visible. Are you doing multi-pass, or is it CPU-bound?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141794 - ritz - Sun Sep 30, 2007 2:20 am</h4>
    <div class="postbody"><span class="postbody">Thanks. The entire scene including the two creatures is ~4250 triangles. Normally I would never use this many polys, but it's just for testing how much and how fast I can go. The actual vert/poly ram used is shown in that little line on the top screen (last two numbers). I use the hardware's boxtest for a lot of culling (the first two groups of numbers on that status line). I'm not sure what you mean.. multi-pass?
<br/>
<br/>
EDIT:
<br/>
<br/>
I should mention that I use NWN models (converted into a completely different format of course) for all this because I'm neither an artist nor an animator :P</span><span class="gensmall"><br/><br/>Last edited by ritz on Sun Sep 30, 2007 3:12 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#141796 - mml - Sun Sep 30, 2007 2:53 am</h4>
    <div class="postbody"><span class="postbody">Oh wow ritz, that's stunning.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141841 - M3d10n - Sun Sep 30, 2007 8:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ritz wrote:</b></span></td> </tr> <tr> <td class="quote">Thanks. The entire scene including the two creatures is ~4250 triangles. Normally I would never use this many polys, but it's just for testing how much and how fast I can go. The actual vert/poly ram used is shown in that little line on the top screen (last two numbers). I use the hardware's boxtest for a lot of culling (the first two groups of numbers on that status line). I'm not sure what you mean.. multi-pass?
<br/>
<br/>
EDIT:
<br/>
<br/>
I should mention that I use NWN models (converted into a completely different format of course) for all this because I'm neither an artist nor an animator :P</td> </tr></table><span class="postbody">
<br/>
<br/>
I noticed the poly counter. There are very few angles where it goes beyond the limit (I saw it go to 2400 from one angle), but strangely, I couldn't find any visual glitches when it did so. I mean, 400 missing triangles *shouldn't* go unnoticeable. Maybe its because the scene is dark or something...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141862 - ritz - Sun Sep 30, 2007 10:05 pm</h4>
    <div class="postbody"><span class="postbody">The umberhulk (the guy in the corner) is the last rendered thing and if you go over the hardware limit of 2048 you'll start to see missing pieces of him :) That's expected as I'm testing large amounts of stuff. Also, when there's that much crap going on, the framerate for this scene drops below 60 and then the DS will wait until the next vsync, effectively dropping it to 30fps instead.. that's why I have that SELECT button thing so I can still see the actual framerate for bechmarking. For fun if you wanna see a bigger hit in framerate, just add some more point lights. Edit the 'theroom.map' file to something like:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">6
<br/>
tin01_d01_01 0 -5.0 0.0 5.0 0 256
<br/>
tin01_d01_02 0 5.0 0.0 -5.0 0 0
<br/>
tin01_d01_04 0 -5.0 0.0 -5.0 0 128
<br/>
tin01_d01_08 0 5.0 0.0 5.0 0 -128
<br/>
c_golflesh 1 -2.5 0.0 0.2 0 -190
<br/>
c_umberhulk 0 5.0 0.0 4.0 0 64
<br/>
4
<br/>
1 3.8 2.7 -4.0 31 0 0 0.2 0.1 0.02 0.0
<br/>
1 -3.8 2.7 4.0 0 31 0 0.2 0.1 0.02 0.0
<br/>
1 -3.8 2.7 -4.0 0 0 31 0.2 0.1 0.02 0.0
<br/>
1 3.8 2.7 4.0 31 0 31 0.2 0.1 0.02 0.0
<br/>
3 3 3 31 31 31</td> </tr></table><span class="postbody">
<br/>
<br/>
Actually, I'm not sure what that will look like, I just added some more lights and changed some colors/settings. This will be pretty hefty on the hardware I should thing :)
<br/>
<br/>
If you want just directional lights (or mix both): the first digit in the lights line is 0 or 1, directional or positional. If directional, then the next 3 floats are the direction and not it's position. After that are the R G B followed by the attenuation numbers att0, att1, att2. Range is the last one, but I have finished that yet.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141887 - a128 - Mon Oct 01, 2007 8:53 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ritz wrote:</b></span></td> </tr> <tr> <td class="quote">I use the hardware's boxtest for a lot of culling (the first two groups of numbers on that status line).</td> </tr></table><span class="postbody">
<br/>
<br/>
If you are using the boxtest from libnds ..this code is broken!
<br/>
So your boxtest just does not work
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=13413&amp;highlight=boxtest" target="_blank">http://forum.gbadev.org/viewtopic.php?t=13413&amp;highlight=boxtest</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141919 - ritz - Mon Oct 01, 2007 5:23 pm</h4>
    <div class="postbody"><span class="postbody">I don't actually. I just use it in this fashion:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">      GFX_BOX_TEST = VERTEX_PACK(psom-&gt;bbox[0],psom-&gt;bbox[1]);
<br/>
      GFX_BOX_TEST = VERTEX_PACK(psom-&gt;bbox[2],psom-&gt;bbox[3]);
<br/>
      GFX_BOX_TEST = VERTEX_PACK(psom-&gt;bbox[4],psom-&gt;bbox[5]);
<br/>
      while (GFX_STATUS &amp; 0x01) ;
<br/>
      if (GFX_STATUS &amp; 0x02) { ...
<br/>
</td> </tr></table><span class="postbody">
<br/>
Thanks for the head's up though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141955 - a128 - Tue Oct 02, 2007 9:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
  GFX_BOX_TEST = VERTEX_PACK(x, y);
<br/>
  GFX_BOX_TEST = VERTEX_PACK(z, width); 
<br/>
  GFX_BOX_TEST = VERTEX_PACK(height, depth); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
at  libnds.... width &amp; height are in a wrong order...the above code should fix that</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142153 - keldon - Fri Oct 05, 2007 9:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ritz wrote:</b></span></td> </tr> <tr> <td class="quote">Install as /sonicrpg/*.* in the root of your memory card.</td> </tr></table><span class="postbody">
<br/>
Okay I've tried that and still get (init FAT failed - OOPV() ). I'm using EZ flash 5 with Kingston memory.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142307 - keldon - Mon Oct 08, 2007 12:01 am</h4>
    <div class="postbody"><span class="postbody">Need some help here, how do you get the sonicrpg rom to run?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142322 - ritz - Mon Oct 08, 2007 2:57 am</h4>
    <div class="postbody"><span class="postbody">Hi keldon, sorry, was away for a few days. I'm not sure I know the answer to your question. The "init FAT failed" is the very first initializing step of the libfat library... I use an R4 card with auto-patching dldi (or something like that). You may need to patch the .nds file using dldi tools. Maybe search the forum or perhaps someone here has a similar card as you that can help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142329 - keldon - Mon Oct 08, 2007 8:07 am</h4>
    <div class="postbody"><span class="postbody">Got it, amazing demo!!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142330 - ritz - Mon Oct 08, 2007 8:35 am</h4>
    <div class="postbody"><span class="postbody">Glad you got it working.. and thanks :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
