<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Looping Sounds - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Looping Sounds</h2>
<div id="posts">
<div class="post">
    <h4>#64418 - blaisef01 - Thu Dec 22, 2005 5:05 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
Is there anyway of playing a looped sound [but not from the beginning] without having to delve into the black arts which are interrupts and cascading timers?
<br/>
<br/>
Cheers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64426 - gladius - Thu Dec 22, 2005 7:17 am</h4>
    <div class="postbody"><span class="postbody">Not quite sure what you mean.  The DS's built in channels support looping at arbitrary points within the sample.  If you mean starting playbakc of a sample (with looping) at an arbitrary point, you can do that as well.
<br/>
<br/>
Only if you need to dynamically generate your sound will you need to start using interrupts and timers (which are not too bad really).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#64428 - blaisef01 - Thu Dec 22, 2005 9:57 am</h4>
    <div class="postbody"><span class="postbody">That's exactly what i wanted to do, all i gotta do now is figure out how...
<br/>
<br/>
Cheers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68519 - ventilo - Wed Jan 25, 2006 8:39 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
Could you please keep us posted on your achievements ? I'm interested in the subject because there is not much information about looping sounds with libnds....
<br/>
<br/>
As for me I've tried in arm7 code using the SOUND_REPEAT flag (in place of SOUND_ONE_SHOT), and also setting SCHANNEL_REPEAT_POINT(channel) to various values (data pointer or offset...), to no avail, my sample just doesn't get repeated.<br/>_________________<br/>Firstname's Y.A.N.N..... yet another NDS noob :o)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69124 - blaisef01 - Sat Jan 28, 2006 4:30 pm</h4>
    <div class="postbody"><span class="postbody">Hi Ventilo
<br/>
<br/>
To Repeat a sound do as normal but:
<br/>
							SCHANNEL_REPEAT_POINT(i) = loopstart &gt;&gt; 2;
<br/>
	SCHANNEL_LENGTH(i) = len &gt;&gt; 2;
<br/>
<br/>
where loopstart is the offset from the start of the sample in bytes.
<br/>
where len is the (length of the sample - loopstart) in bytes
<br/>
<br/>
<br/>
Hope this helps....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69372 - ventilo - Mon Jan 30, 2006 11:04 am</h4>
    <div class="postbody"><span class="postbody">Okay thanks, it works now, only I did something wrong trying to transmit a "one_shot" parameter to the arm7 routine.
<br/>
<br/>
Thanks again :o)<br/>_________________<br/>Firstname's Y.A.N.N..... yet another NDS noob :o)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69815 - rychan - Thu Feb 02, 2006 4:49 am</h4>
    <div class="postbody"><span class="postbody">Does anyone know how to play long sounds on the DS? Stuck bogged down with 64kb of arm7 space isn't really much.
<br/>
<br/>
Coukldn't find anything in the devkitpro examples that showed it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69817 - ProblemBaby - Thu Feb 02, 2006 4:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Does anyone know how to play long sounds on the DS? Stuck bogged down with 64kb of arm7 space isn't really much. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You can play sounds from main memory thats 4mb, if I you want even bigger you have to stream. 
<br/>
<br/>
I aint sure about the easiest way to put data in main memory. But I know that you can include it in your arm9 source and send the pointer to the arm7.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108374 - walaber - Wed Nov 08, 2006 6:42 am</h4>
    <div class="postbody"><span class="postbody">is there any way to play a sound with libnds from standard arm9 code that will cause the sound to loop?
<br/>
<br/>
all of the code above appears to be arm7 code... is that correct?<br/>_________________<br/>Go Go Gadget NDS!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108387 - 0xtob - Wed Nov 08, 2006 11:48 am</h4>
    <div class="postbody"><span class="postbody">Nopel, unfortunately, you'll have to mess with registers on the Arm7. libnds definitely needs some improvement of the sound functions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108406 - silent_code - Wed Nov 08, 2006 3:32 pm</h4>
    <div class="postbody"><span class="postbody">second that!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
