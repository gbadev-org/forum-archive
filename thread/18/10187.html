<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>wait for keyypress not working, how do i do it? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > wait for keyypress not working, how do i do it?</h2>
<div id="posts">
<div class="post">
    <h4>#90778 - spinal_cord - Sun Jul 02, 2006 10:58 am</h4>
    <div class="postbody"><span class="postbody">I have what I assume is a simple, rather silly problem. I'm trying to add a title screen to my (hardly started) game, but for some reason I cant get it wo wait for start to be pressed before continuing. Can someone tell me what im doing wrong?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void title(void)
<br/>
{
<br/>
   PA_LoadTiledBg(0, 3, title);   
<br/>
   PA_LoadTiledBg(1, 3, title1);   
<br/>
int st=0;
<br/>
      while(st==0)
<br/>
   {
<br/>
      if(Pad.Newpress.Start){st=1;}
<br/>
   }   
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Is this a good way to do this? (appart from it not working).<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#90779 - Dark Knight ez - Sun Jul 02, 2006 11:13 am</h4>
    <div class="postbody"><span class="postbody">I haven't worked with PALib, but I'll try to give a meaningful reply nevertheless.
<br/>
<br/>
Is there no function to refresh what keys are pressed?
<br/>
In libnds there is a function called scanKeys() which needs to be called before you can check what new keypresses were done.
<br/>
If something like that exists, your code should look like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int st=0;
<br/>
while (st==0)
<br/>
{
<br/>
    scanKeys();
<br/>
    if (Pad.Newpress.Start){st=1;}
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I say this, because the only thing I can think of which goes "wrong" is that Pad.Newpress.Start is true from the start. It might need an update before using it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#90781 - spinal_cord - Sun Jul 02, 2006 11:42 am</h4>
    <div class="postbody"><span class="postbody">Thankyou very much, You were indeed correct, there is a 		PA_UpdatePad(); , weird how i don't need it in the rest of the game.
<br/>
<br/>
It all seems to be working fine now.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#90782 - Dark Knight ez - Sun Jul 02, 2006 12:22 pm</h4>
    <div class="postbody"><span class="postbody">As I understood it, some keypresses are not accessable from the main CPU (ARM9), but only from ARM7.
<br/>
To get/update these keypresses, some communication is needed between ARM9 and ARM7.
<br/>
The function PA_UpdatePad() takes care of that communication for you.
<br/>
<br/>
Apparently, the Start button is amongst the keypresses detected by ARM7. The other buttons you are using can probably be accessed by ARM9 - no need for such communication.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#90787 - spinal_cord - Sun Jul 02, 2006 1:21 pm</h4>
    <div class="postbody"><span class="postbody">I also tried with up and select, they didnt work either. doesn't matter though, it works now, thats the main thing.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#90839 - Mr Snowflake - Sun Jul 02, 2006 10:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dark Knight ez wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Apparently, the Start button is amongst the keypresses detected by ARM7. The other buttons you are using can probably be accessed by ARM9 - no need for such communication.</td> </tr></table><span class="postbody">Only X Y and the touch screen are under ARM7's control<br/>_________________<br/><a class="postlink" href="http://www.mrsnowflake.be" target="_blank">http://www.mrsnowflake.be</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#90864 - Diffuse - Mon Jul 03, 2006 1:32 am</h4>
    <div class="postbody"><span class="postbody">I might as well answer this one since im familiar with PALib.
<br/>
<br/>
The reason you don't need it anywhere else is because PA_WaitForVBL(); calls PA_UpdatePad();. Here's how I would do it:
<br/>
<br/>
While(!Pad.Newpress.Start) PA_WaitForVBL();
<br/>
<br/>
Alot simpler :) Good luck.<br/>_________________<br/><a href="http://www.ndscene.net" target="_blank">http://www.ndscene.net</a>
<br/>
Diffuse is Tepples #1 fan! w00t!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
