<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS Programming info - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DS Programming info</h2>
<div id="posts">
<div class="post">
    <h4>#25611 - SmileyDude - Thu Aug 26, 2004 12:51 am</h4>
    <div class="postbody"><span class="postbody">apologies to those who may have already seen this (i got it from the gbaemu.com forums):
<br/>
<br/>
<a class="postlink" href="http://andreas.abi-2005.org/pgforum/thread...?threadid=15637" target="_blank">http://andreas.abi-2005.org/pgforum/thread...?threadid=15637</a><br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25612 - SmileyDude - Thu Aug 26, 2004 1:04 am</h4>
    <div class="postbody"><span class="postbody">so, just some observations from quickly looking over the memory map portion.
<br/>
<br/>
It looks as if the DS is really going to be the GBA+ from a programming perspective.  In other words, its more like moving from GB development to GBC development than from GB/GBC to GBA development.
<br/>
<br/>
All of the 2D modes still appear to be there.  It appears that some things have been increased in size.  For example, there is now an additional BG and OBJ palette (at 0x05000400 &amp; 0x05000600).  I'm not sure from reading this if these are for the other screen, or if you can use them together for 512 colors in the BG and 512 in the sprites.
<br/>
<br/>
BTW -- looks like Nintendo corrected one of the shortcomings on the GBA.  There is now what looks like a set of hardware divide registers.  Yay!
<br/>
<br/>
There appears to be a lot of registers related to the 3d hardware as well... it doesn't appear that Nintendo is going to hide much of the underlying hardware as originally feared.  
<br/>
<br/>
On the downside, there doesn't appear to be any registers for sound.  Maybe it will it show up later, but at this point, it certainly doesn't debunk any earlier rumors. :(
<br/>
<br/>
Now lets hope that we can actually get code on this thing pretty easily :)<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25613 - dagamer34 - Thu Aug 26, 2004 1:08 am</h4>
    <div class="postbody"><span class="postbody">Can't open the page.
<br/>
<br/>
Anyway, I'll be really happy if 8-bit writes to VRAM are allowed this time around!<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25614 - abilyk - Thu Aug 26, 2004 1:19 am</h4>
    <div class="postbody"><span class="postbody">I had to dig around in that forum for it but I believe this link is correct:  <a href="http://andreas.abi-2005.org/pgforum/thread.php?threadid=15637" target="_blank">http://andreas.abi-2005.org/pgforum/thread.php?threadid=15637</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25615 - SmileyDude - Thu Aug 26, 2004 1:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>abilyk wrote:</b></span></td> </tr> <tr> <td class="quote">I had to dig around in that forum for it but I believe this link is correct:  <a href="http://andreas.abi-2005.org/pgforum/thread.php?threadid=15637" target="_blank">http://andreas.abi-2005.org/pgforum/thread.php?threadid=15637</a></td> </tr></table><span class="postbody">
<br/>
<br/>
Hmm... I swore I just cut and pasted that URL.  Oh well... that is the link I was talking about anyway :)<br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25617 - ampz - Thu Aug 26, 2004 2:10 am</h4>
    <div class="postbody"><span class="postbody">Nothing about the DS cart interface registers... Too bad.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25619 - zazery - Thu Aug 26, 2004 2:49 am</h4>
    <div class="postbody"><span class="postbody">A step forward towards DS deving nonetheless.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25621 - dagamer34 - Thu Aug 26, 2004 3:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">Nothing about the DS cart interface registers... Too bad.</td> </tr></table><span class="postbody">
<br/>
<br/>
We can't expect <span style="font-weight: bold">everything</span> to be handed to us on a silver platter. It still is definitely a step in the right direction. 
<br/>
<br/>
Anybody see any registers related to touch screen input? And can anyone translate what goldmomo says? I want to know what he interpreted from this info.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25622 - SmileyDude - Thu Aug 26, 2004 3:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">And can anyone translate what goldmomo says? I want to know what he interpreted from this info.</td> </tr></table><span class="postbody">
<br/>
<br/>
This is from google's translation, so it's a bit rough:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>goldmomo wrote:</b></span></td> </tr> <tr> <td class="quote">Thus I see for the moment from it:  to one insertable 3D Layer (BG0) sound, DMA (direct memory access), timer and some different one (probably equal as GBA) -2*4MByte RAM (Main &amp; ext Main, probably rather 4MB with Mirror) is missing to hardware DIV and SQRT hardware matrix multiplication Scale/transformation any vector registers (ne description would be fine)??  -32K RAM (IWRAM think I) $37f8xxx is believes I mirror on $3000000 new 256ker pallet (for 3D??)  that normal VRAM has 512kByte!!  then then 128kByte specially VRAM (??) -256kByte SpriteRAM -und again 128kByte RAM for Sprites (??) 1MByte LCDC RAM??  (probably Mirror) -ich think with the $60xxxxx Mirros in it will be (thus everything altogether 1MB VRam into the others is divided)</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>goldmomo wrote:</b></span></td> </tr> <tr> <td class="quote">All if wrong data could be natural, stop is not official (anyway still some registers are missing).  But with the GBA all Tutorials and register lists were unofficial already.  It will show up as soon as the DS is there, and/or then the first emulator.  Interesting it is still that Gba Rome (inclusive Flash maps) on the normal DS registers, memory...  to access can.  Thus it is then also possible with Flash maps to test DS programs.  However it whether also the ARM9 with GBA maps is questionable runs and/or the ARM7tdmi with 33Mhz, since the DS has completely different Rome header (with Startupcodes for both CPUs).</td> </tr></table><span class="postbody"><br/>_________________<br/>dennis</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25623 - dagamer34 - Thu Aug 26, 2004 3:45 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SmileyDude wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">And can anyone translate what goldmomo says? I want to know what he interpreted from this info.</td> </tr></table><span class="postbody">
<br/>
<br/>
This is from google's translation, so it's a bit rough:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>goldmomo wrote:</b></span></td> </tr> <tr> <td class="quote">Thus I see for the moment from it:  to one insertable 3D Layer (BG0) sound, DMA (direct memory access), timer and some different one (probably equal as GBA) -2*4MByte RAM (Main &amp; ext Main, probably rather 4MB with Mirror) is missing to hardware DIV and SQRT hardware matrix multiplication Scale/transformation any vector registers (ne description would be fine)??  -32K RAM (IWRAM think I) $37f8xxx is believes I mirror on $3000000 new 256ker pallet (for 3D??)  that normal VRAM has 512kByte!!  then then 128kByte specially VRAM (??) -256kByte SpriteRAM -und again 128kByte RAM for Sprites (??) 1MByte LCDC RAM??  (probably Mirror) -ich think with the $60xxxxx Mirros in it will be (thus everything altogether 1MB VRam into the others is divided)</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>goldmomo wrote:</b></span></td> </tr> <tr> <td class="quote">All if wrong data could be natural, stop is not official (anyway still some registers are missing).  But with the GBA all Tutorials and register lists were unofficial already.  It will show up as soon as the DS is there, and/or then the first emulator.  Interesting it is still that Gba Rome (inclusive Flash maps) on the normal DS registers, memory...  to access can.  Thus it is then also possible with Flash maps to test DS programs.  However it whether also the ARM9 with GBA maps is questionable runs and/or the ARM7tdmi with 33Mhz, since the DS has completely different Rome header (with Startupcodes for both CPUs).</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah, shortly after I replied, I went to google to translate it. You beat me to it! :)<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25631 - ector - Thu Aug 26, 2004 10:07 am</h4>
    <div class="postbody"><span class="postbody">Somewhat annoyingly it appears that the 3D stuff is all fixed point .. but yeah, expecting floating point hardware might have been a little optimistic :P
<br/>
At least nice to have hardware matrix manipulation and stuff..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25633 - ampz - Thu Aug 26, 2004 12:09 pm</h4>
    <div class="postbody"><span class="postbody">Did you expect floating point on a handheld system?!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25648 - ector - Thu Aug 26, 2004 4:28 pm</h4>
    <div class="postbody"><span class="postbody">Not really, but it would have been nice :)
<br/>
<br/>
PSP does floating point btw, doesn't it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25664 - Miked0801 - Thu Aug 26, 2004 7:19 pm</h4>
    <div class="postbody"><span class="postbody">Divide/Sqrt ... :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25678 - Abscissa - Thu Aug 26, 2004 10:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SmileyDude wrote:</b></span></td> </tr> <tr> <td class="quote">For example, there is now an additional BG and OBJ palette (at 0x05000400 &amp; 0x05000600).  I'm not sure from reading this if these are for the other screen, or if you can use them together for 512 colors in the BG and 512 in the sprites.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Judging by the GBA's architecture I wouldn't be suprised if you could choose to use it either way (Although a 9-bit bitmapped mode seems kinda strange: it would waste a lot of bits). Maybe a bit in some display control register would be 0 for "use palette 1 on screen 1 and palette 2 on screen 2", and 1 for "Allow OAM entry to specify which palette on a per-sprite basis".  Or perhaps you could use it as double-buffered palettes.  So for color rotation effects, you wouldn't have to change the palette in the VBLANK.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SmileyDude wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
There is now what looks like a set of hardware divide registers.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Being a 3D-capable system, it would almost have to have that.  Using software division on 3D scenes would be an enormous waste of cycles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25679 - Abscissa - Thu Aug 26, 2004 10:56 pm</h4>
    <div class="postbody"><span class="postbody">Hmm... "DISP3DCNT" looks suspiciously interesting ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25685 - MaKo - Fri Aug 27, 2004 12:54 am</h4>
    <div class="postbody"><span class="postbody">It looks like it has HW T&amp;L with 4 lights, that's nice :)
<br/>
<br/>
Also, there is a TOON_TABLE, LOL.
<br/>
<br/>
Could ITCM be the ARM7/ARM9 shared memory ("interchange memory")? Maybe for handling touch screen etc..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25686 - MumblyJoe - Fri Aug 27, 2004 1:38 am</h4>
    <div class="postbody"><span class="postbody">Awsome, looks like Nintendo made another sweet system for homebrew and let the register specs get out again :P
<br/>
<br/>
Bet someone is getting a spanking for this getting out, if they know who let it happen. It almost guarantees that emulators will be availiable quickly and I assume most of the info is there for WntrMute to update DevkitARM with a dsspecs option sooner or later... no rush of course to start homebrewing, just having the DS released would be a nice start so I can play some new games.<br/>_________________<br/><a class="postlink" href="http://www.hungrydeveloper.com" target="_blank">www.hungrydeveloper.com</a>
<br/>
Version 2.0 now up - guaranteed at least 100% more pleasing!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25687 - techtech - Fri Aug 27, 2004 1:54 am</h4>
    <div class="postbody"><span class="postbody">Wouldn't this be the memory map of the debug system?
<br/>
<br/>
Notice that the 4MB main memory is listed, and then an "extension" to
<br/>
8MB. Also, other stuff is labelled "DB"...
<br/>
<br/>
Are we going to be specifying each vertex to the mem regs? or passing
<br/>
a (DMAing a ??) display list to GXFIFO perhaps?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25693 - Abscissa - Fri Aug 27, 2004 4:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>techtech wrote:</b></span></td> </tr> <tr> <td class="quote">Also, other stuff is labelled "DB"...</td> </tr></table><span class="postbody">
<br/>
<br/>
When I first saw that, I assumed it was "double-buffer".  But now that you mention debug systems, perhaps it's "debug".</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#25696 - sgeos - Fri Aug 27, 2004 6:27 am</h4>
    <div class="postbody"><span class="postbody">I assumed DB was for the second screen. =P
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#27284 - zazery - Fri Oct 08, 2004 3:36 am</h4>
    <div class="postbody"><span class="postbody">Interesting article on <a class="postlink" href="http://ds.advancedmn.com/article.php?artid=1109" target="_blank">this link</a>. It has a screenshot of a few of the registers. I haven't checked them out thoroughly but it could help us RE the DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29417 - mymateo - Fri Nov 19, 2004 8:51 pm</h4>
    <div class="postbody"><span class="postbody">To save silicon trees, I'll use this old topic instead of starting a new one to share my idea and see what people think.
<br/>
<br/>
Linking to a DS to flash a DS cart may be tricky because the DS may be programmed to write to only specific parts of the cart as a measure against piracy.  Now, a standalone flasher is a very obvious choice to flash your own cart, but I had another thought.
<br/>
<br/>
A flash kit that had a DS cart you put directly into the DS which will load up flashing software.  Then, in the GBA port, you plug in a GBA2DS card adapter, allowing you to send data to the GBA port, and have the adapter do the actual flashing on the card.  Then you just need software for PC/MAC and a wireless router to make the set complete.
<br/>
<br/>
I know it's probably more likely going to be stand-alone flasher if/when the DS cards get figured out, but I thought I'd see your impressions on my alternative.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29441 - dagamer34 - Sat Nov 20, 2004 2:15 am</h4>
    <div class="postbody"><span class="postbody">I think a stand alone linker will probably be the solution used for a long time. Though cracking the Nintendo wireless protocol seems like SO much fun, it would only lead to piracy.
<br/>
<br/>
By the way, I just burned several silicon trees.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29445 - zazery - Sat Nov 20, 2004 3:26 am</h4>
    <div class="postbody"><span class="postbody">I don't have the strongest background in wireless programming but wouldn't it be possible to basically identify the device and record the signal on your computer and send it to someone online. This could extend the wireless play to anywhere around the world.  
<br/>
<br/>
Also if this were possible then it would be to record the data the DS sends to another DS for the 'DS Download Play' option and send it somewhere else in the world.
<br/>
<br/>
I don't know if it's possible, does anyone know if this is a possibility?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29446 - tepples - Sat Nov 20, 2004 3:59 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>zazery wrote:</b></span></td> </tr> <tr> <td class="quote">Also if this were possible then it would be to record the data the DS sends to another DS for the 'DS Download Play' option and send it somewhere else in the world.</td> </tr></table><span class="postbody">
<br/>
That doesn't even work with GBA multiboot, as GBA multiboot uses a short challenge-response handshake to exchange cipher keys.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29447 - zazery - Sat Nov 20, 2004 5:16 am</h4>
    <div class="postbody"><span class="postbody">Right that makes sense so my idea is out of the question.  Plus with the RSA encryption of the DS it's going to be pointless to try to break up the communications and decipher them. It would've been neat if you could take those LAN only games and play them online with anyone.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29449 - PhoenixSoft - Sat Nov 20, 2004 7:01 am</h4>
    <div class="postbody"><span class="postbody">That's what the Demasked project is basically.  Of course, there is more to it that hasn't been announced so far, but tunnelling is a big part of it.  But they do have Nintendo's support this time around, so they probably have all the signal decryption tools handed to them.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29456 - mymateo - Sat Nov 20, 2004 12:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PhoenixSoft wrote:</b></span></td> </tr> <tr> <td class="quote">That's what the Demasked project is basically.  Of course, there is more to it that hasn't been announced so far, but tunnelling is a big part of it.  But they do have Nintendo's support this time around, so they probably have all the signal decryption tools handed to them.</td> </tr></table><span class="postbody">
<br/>
<br/>
Fisrt of all, WOO HOO!  I likes the sound of thats, I do.
<br/>
<br/>
Second of all...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">By the way, I just burned several silicon trees.</td> </tr></table><span class="postbody">
<br/>
<br/>
NOOOOOOOOOOOOO!
<br/>
<br/>
But back to that first part, help me understand.  The Demasked project, I'm guessing, is either a homebrew or 3rd party licensed team working on... whatever it is they do.  In this case, turn WLAN only games into online capable games.  Nintendo <span style="font-style: italic">supports</span> this?  I'd have thought they would want to make money off of this and do it themselves so they can hold all rights and sell licensing and charge fees for customers to use it like buying online time or whatnot.  This project sounds much less consumer-expensive and not as profitable for the Big-N.  I'm way too tired to look for an official site right now, so if someone posts a link I'll read it in the morning.  If not, I'll look for it if I get the motivation to.
<br/>
<br/>
If this is the case, we could call the new method Wireless WAGN (Wagon), the Wireless World Area Gaming Network.  I thought of it myself.  Or WWWAN (Wireless World Wide Area Network).  Or bucket.  'Cause bucket is cool.  (Don't worry, I'll be a little more normal after some sleep and I get my DS.  Cherry Lane bastard managers don't open the mall until 11 am on Sundays.  ARGH!  That's where EB is!!  I'll bribe the manager to meet me outside just after midnight with my DS.  He's got to like pizza and or beer.  Wait, wrong topic.  Sleep is good.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29458 - PhoenixSoft - Sat Nov 20, 2004 1:24 pm</h4>
    <div class="postbody"><span class="postbody">Yes, the WarpPipe team is supported by Nintendo.  The tunnelling functionality will also somehow be integrated into third party games in various ways.
<br/>
<br/>
Here's why Nintendo supports it:
<br/>
<br/>
- Minimal effort by them to get an online system up-and-running
<br/>
- Easier to add online support to games
<br/>
- No costs because they don't need to keep host servers running 24/7 for 3-4 years while gamers use them to play online DS games</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#29602 - Kleevah - Mon Nov 22, 2004 1:15 pm</h4>
    <div class="postbody"><span class="postbody">You guys might find <a class="postlink" href="http://forums.warppipe.com/viewtopic.php?t=12945" target="_blank">this thread</a> over at warppipe interesting. 
<br/>
Aparantly the DS shows up on netstumbler, hopefully making tunneling a possibility...<br/>_________________<br/>"Duct tape is just like the Force. It has a light side, a dark side, and it holds the universe together...."</span><span class="gensmall"><br/><br/>Last edited by Kleevah on Mon Nov 22, 2004 1:18 pm; edited 1 time in total</span></div>    
</div>
</div>

    </body>
</html>
