<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DMA+DTCM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DMA+DTCM</h2>
<div id="posts">
<div class="post">
    <h4>#69216 - bananaboy - Sun Jan 29, 2006 10:10 am</h4>
    <div class="postbody"><span class="postbody">Are there any known problems with DMAing data from DTCM to VRAM?  Or is it just not allowed?  I'm trying to DMA a buffer from an array that I have stored in DTCM to my BG but nothing appears on screen.  If I stick the array in EWRAM instead it works.  My array is aligned to 4 bytes and I'm doing a word copy using dmaCopyWords (do pointers have to be aligned for DMA?  I haven't found any concrete text on it yet, only a few postings here and there).
<br/>
<br/>
sam</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69223 - chishm - Sun Jan 29, 2006 11:57 am</h4>
    <div class="postbody"><span class="postbody">IIRC, DTCM and ITCM cannot be accessed by DMA. They are memory internal to the CPU, which the DMA controller cannot access. Also, I am pretty sure that DMA source and destination addresses have to be word aligned (or half word aligned), depending on which mode you use.
<br/>
<br/>
EDIT: Added bit about halfword aligned when using 16 bit DMA.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"><br/><br/>Last edited by chishm on Sun Jan 29, 2006 2:36 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#69230 - bananaboy - Sun Jan 29, 2006 1:32 pm</h4>
    <div class="postbody"><span class="postbody">Cheers for the reply!  Thinking about it, that all actually makes perfect sense!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69274 - HyperHacker - Sun Jan 29, 2006 7:00 pm</h4>
    <div class="postbody"><span class="postbody">What happens if you use an unaligned address, does it just correct it? That may explain some problems I tend to have with DMA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69286 - wintermute - Sun Jan 29, 2006 8:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">What happens if you use an unaligned address, does it just correct it? That may explain some problems I tend to have with DMA.</td> </tr></table><span class="postbody">
<br/>
<br/>
yes</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
