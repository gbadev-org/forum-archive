<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>print character with hex values - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > print character with hex values</h2>
<div id="posts">
<div class="post">
    <h4>#108483 - chrissieboy - Thu Nov 09, 2006 11:13 am</h4>
    <div class="postbody"><span class="postbody">Im busy with loading a 3d model binary file.
<br/>
<br/>
So right now i read out the hex values from the binary.
<br/>
<br/>
In the header of the binary file there is the name of the file, wich i want to read out.
<br/>
<br/>
I know a character is 4 bytes, so i must read 4 bytes from the binary i think?
<br/>
<br/>
In my hex viewer i see this hex values : F5 1B 00 00 4F 62 6A 65 63 74
<br/>
these value i want to translate to chars.
<br/>
<br/>
I do this : 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
iprintf("%04x  ", ((u16*)hovercraft_bin)[i]);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
to print the hex value on the screen of the ds, 
<br/>
then it prints :
<br/>
F5 1B 00 00 4F 62 6A 65 63 74
<br/>
on my ds screen, but now i want it to print it as characters to display the name.
<br/>
<br/>
<br/>
I did this but it crashes :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
iprintf("%s  ", ((u16*)hovercraft_bin)[i]);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
iprintf("%c  ", ((u16*)hovercraft_bin)[i]);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
but all it did not work, does anyone know how to print characters out of an hex value??
<br/>
<br/>
(sorry for my bad english im from the netherlands)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108496 - Lick - Thu Nov 09, 2006 4:19 pm</h4>
    <div class="postbody"><span class="postbody">You'd need to zero the string to signalize to iprintf that the string has ended. So in memory it would look like this 'string\0'.
<br/>
<br/>
Simply do this:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// char array to hold 10 characters and a zero.
<br/>
char buffer[10 +1] = {0};
<br/>
// copy 10 characters to the array
<br/>
memcpy(buffer, hovercraft_bin, 10);
<br/>
// print the array
<br/>
iprintf("%s ", buffer);</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108498 - chrissieboy - Thu Nov 09, 2006 4:37 pm</h4>
    <div class="postbody"><span class="postbody">THanx works perfect !!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108500 - Cearn - Thu Nov 09, 2006 4:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">I'm busy with loading a 3d model binary file.
<br/>
<br/>
So right now i read out the hex values from the binary. In the header of the binary file there is the name of the file, wich i want to read out.
<br/>
<br/>
I know a character is 4 bytes, so i must read 4 bytes from the binary i think?</td> </tr></table><span class="postbody">
<br/>
A character is not 4 bytes, a character is one byte (at least in C).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"> C type  | ARM name | typedef | size
<br/>
char     | byte     | s8/u8   | 1 byte
<br/>
short    | halfword | s16/u16 | 2 bytes
<br/>
int/long | word     | s32/u32 | 4 bytes</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">In my hex viewer i see this hex values : F5 1B 00 00 4F 62 6A 65 63 74
<br/>
these value i want to translate to chars.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Technically you don't 'translate' binary to chars, you just interpret them as such. Hex is also just an interpretation. The file format of the binary is just another interpretation as well of data, which I assume you have the format specs somewhere.To interpret the header, just impose part of the file as such by pointing to it with the appropriate header struct:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Assumed header structure, actual header is probably different
<br/>
typedef struct HEADER
<br/>
{
<br/>
    u32 magic;   // possibly size or so
<br/>
    char name[NAMESIZE]; // name of file
<br/>
    ... more
<br/>
};
<br/>
<br/>
// In code:
<br/>
HEADER *hdr= (HEADER*)hovercraft_bin;
<br/>
</td> </tr></table><span class="postbody">
<br/>
Now you can use <span style="font-style: italic">hdr</span> and its members for interpreting the header's contents. For example, <span style="font-style: italic">hdr-&gt;name</span> would point to the byte 4 of the data and interpret it as a string. I'm assuming this is where the name starts because the bytes "4F 62 6A 65 63 74" are ascii for "Object". Of course, I'm just guessing at the string-size, or whether it's even zero-terminated.
<br/>
If it is zero-terminated, you can print out the name like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">iprintf("%s", hdr-&gt;name);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
About why these didn't work:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">iprintf("%s  ", ((u16*)hovercraft_bin)[i]);
<br/>
<br/>
iprintf("%c  ", ((u16*)hovercraft_bin)[i]); </td> </tr></table><span class="postbody">
<br/>
((u16*)hovercraft_bin) interprets <span style="font-style: italic">hovercraft_bin</span> as a halfword array, from which you read the <span style="font-style: italic">i</span>th entry. "%s" expects a pointer, not a halfword. As halfwords make poor substitutes for pointers, it'll fail.
<br/>
"%c" expects a character (i.e., an 8bit (signed) integer). In this case it'll only use the lower byte of the halfword, so using it in a loop will only give every other character of a string. Another problem is that the name doesn't start at the beginning of the data, which means you'll get strange results at first.
<br/>
<br/>
If you're still unfamiliar with datatypes, pointers and how the printf() routines work, I'd suggest trying them out on a PC first, where you have better debugging facilities.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">(sorry for my bad english im from the netherlands)</td> </tr></table><span class="postbody">Hah! With the pervasiveness of English over here, one could say that English classes start at age 9. Sorry dude, that excuse doesn't work this time :P 
<br/>
<span style="font-size: 9px; line-height: normal">(Text is mostly fine, anyway; mostly. Proper capitalization and apostrophes might be nice, though, but meh, this isn't English Lit, so don't sweat it.)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108502 - chrissieboy - Thu Nov 09, 2006 4:58 pm</h4>
    <div class="postbody"><span class="postbody">thanx Cearn!!
<br/>
<br/>
Im going to read your answer tonight again, because its a lot information at once for me ;)
<br/>
<br/>
But it al starts to make more sense to me!!
<br/>
<br/>
Thanx for spending your time to teach me something!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
