<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Running NDSLib & LibNDS side by side - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Running NDSLib & LibNDS side by side</h2>
<div id="posts">
<div class="post">
    <h4>#53745 - headspin - Sun Sep 11, 2005 1:27 pm</h4>
    <div class="postbody"><span class="postbody">I have been using NDSLib for a while now, and since I hear that it's no longer being updated, I would like to move my current stuff over to LibNDS.
<br/>
<br/>
How do I add LibNDS alongside NDSLib, so that I can compile with both?
<br/>
<br/>
Currently the structure for NDSLib...
<br/>
<br/>
devkitPro\devkitARM\include\c++\4.0.1\NDS\*
<br/>
<br/>
devkitPro\devkitARM\lib\gcc\arm-elf\4.0.1\libnds7.a
<br/>
devkitPro\devkitARM\lib\gcc\arm-elf\4.0.1\libnds9.a
<br/>
<br/>
Where do I place LibNDS, and will there be any conflicts?<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53761 - wintermute - Sun Sep 11, 2005 5:46 pm</h4>
    <div class="postbody"><span class="postbody">libnds and ndslib were almost identical until the recent move to devkitPro CVS. There is no need to run them side by side. The only real difference was in placement of nds.h and capitalisation of the include files.
<br/>
<br/>
As devkitARM and libnds progress there will soon be a point where ndslib will not compile. Use of the older library is to be discouraged.
<br/>
<br/>
Placement of external libraries within the compiler directories is not a good idea, especially in a place dependent on the compiler version. The old directories should be removed when upgrading the toolchain.
<br/>
<br/>
The recommended layout is shown in the setting up instructions on devkitpro.org - <a href="http://www.devkitpro.org/setup.shtml" target="_blank">http://www.devkitpro.org/setup.shtml</a> . The example makefiles use files within the toolchain to help ameliorate the differences between the environment on the supported host platforms. Please use the example templates and report any problems to the appropriate devkitPro mailing list or via the bug tracker - <a href="http://sourceforge.net/tracker/?group_id=114505&amp;atid=668551" target="_blank">http://sourceforge.net/tracker/?group_id=114505&amp;atid=668551</a> .</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53778 - headspin - Sun Sep 11, 2005 9:03 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, I have successfully moved to LibNDS. It is very similar like you say, and I recommend others to do the same.
<br/>
<br/>
The only issues I had was trying to use the new sound functions in nds/arm9/sound.h; playSound() and playGenericSound(). I just used the original playGenericSound() from NDSLib (renamed to playSnd()) and it works ok.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">__attribute__ ((section (".ewram"))) TransferSound snd;
<br/>
<br/>
void playSnd(const void* data, u32 length)
<br/>
{
<br/>
   snd.count = 1;
<br/>
   snd.data[0].data = data;
<br/>
   snd.data[0].len = length;
<br/>
   snd.data[0].rate = 44100;
<br/>
   snd.data[0].pan = 63;
<br/>
   snd.data[0].vol = 127;
<br/>
   snd.data[0].format = 0; // 1 = 8-bit
<br/>
<br/>
   playSound(snd.data);
<br/>
   DC_FlushAll();
<br/>
   IPC-&gt;soundData = &amp;snd;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Can anyone show me how to achieve the above with the new functions?<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#56996 - Didou - Wed Oct 12, 2005 11:28 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
Unfortunalety for me, moving from NDSlib to libnds is still a real problem... Behaviour seems not to be the same, especially against emulators... Or I missed something...
<br/>
<br/>
  -- Didou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57001 - josath - Thu Oct 13, 2005 12:02 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Didou wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Unfortunalety for me, moving from NDSlib to libnds is still a real problem... Behaviour seems not to be the same, especially against emulators... Or I missed something...
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You need to give more information than just "there's a problem" and "something is different"
<br/>
<br/>
Also, the emulators are very very inaccurate. I wouldn't use them for anything serious if at all possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57042 - Didou - Thu Oct 13, 2005 6:46 am</h4>
    <div class="postbody"><span class="postbody">Hi
<br/>
<br/>
[quote="josath]You need to give more information than just "there's a problem" and "something is different"[/quote]
<br/>
<br/>
In fact, I posted a detailed topic in the forum as "devkitpro R12 -&gt; R16, NDSlib -&gt; libnds, issues".
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Also, the emulators are very very inaccurate. I wouldn't use them for anything serious if at all possible.</td> </tr></table><span class="postbody">
<br/>
Yep, I know, but there are differences both on emulator and real hadware !
<br/>
<br/>
  -- Didou</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
