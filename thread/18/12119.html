<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>3D both screens - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > 3D both screens</h2>
<div id="posts">
<div class="post">
    <h4>#114612 - Risine - Tue Jan 09, 2007 3:28 pm</h4>
    <div class="postbody"><span class="postbody">Hi there,
<br/>
I am wondering if it is possible to use 3D on BOTH screens <span style="text-decoration: underline">at the same time</span>?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114613 - Lord Raptor - Tue Jan 09, 2007 3:46 pm</h4>
    <div class="postbody"><span class="postbody">Have a look here <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=11364" target="_blank">http://forum.gbadev.org/viewtopic.php?t=11364</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114614 - silent_code - Tue Jan 09, 2007 3:47 pm</h4>
    <div class="postbody"><span class="postbody">yes, it is possible, but needs some trickery to do. it cuts down the framerate in half and uses up some valuable video memory.
<br/>
<br/>
search the forum for 'display capture' and '3d on both screens', there's plenty of info and demos here.
<br/>
<br/>
EDIT: oh, lord! you were quicker than me ;p</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114629 - Risine - Tue Jan 09, 2007 5:18 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, got the examples on the forum.
<br/>
But unfortunately as soon as the framerate gets a little down, you see screen flickering and other messy stuff on both screens.
<br/>
Is there no other way without this kind of problems?
<br/>
Is it possible for instance to write the scene on a texture rather than the screen directly?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114716 - silent_code - Wed Jan 10, 2007 10:32 am</h4>
    <div class="postbody"><span class="postbody">there are some workarounds (afaik), just dig a bit deeper ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114723 - Risine - Wed Jan 10, 2007 1:52 pm</h4>
    <div class="postbody"><span class="postbody">Tried to play with the VBL, with no success :(
<br/>
What's the trick? Do I have to dig unknown registers bits to find the answer?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114724 - Dark Knight ez - Wed Jan 10, 2007 2:06 pm</h4>
    <div class="postbody"><span class="postbody">In one of those "3D on both screens" topic, the solution to your problem is mentioned:
<br/>
You can render a 3D scene to a screen AND rendering it into a VRAM bank as a 2D background at the same time.
<br/>
You can use that captured 2D background to display the same "3D scene" again using 2D displaying methods for that screen, while you use the 3D displaying methods for the other screen.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://amplituds.drunkencoders.com" target="_blank">AmplituDS website</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114762 - Risine - Wed Jan 10, 2007 6:02 pm</h4>
    <div class="postbody"><span class="postbody">I have looked the forum everywhere again and again, haven't found more than what I already have.
<br/>
Can you explain/show me the 1st part ?:
<br/>
"render a 3D scene to a screen AND rendering it into a VRAM bank as a 2D background at the same time"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114769 - Dark Knight ez - Wed Jan 10, 2007 7:20 pm</h4>
    <div class="postbody"><span class="postbody">Use the search function.
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=11364&amp;highlight=capture+vram" target="_blank">http://forum.gbadev.org/viewtopic.php?t=11364&amp;highlight=capture+vram</a><br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://amplituds.drunkencoders.com" target="_blank">AmplituDS website</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114786 - Risine - Wed Jan 10, 2007 8:29 pm</h4>
    <div class="postbody"><span class="postbody">Many thanks Dark Knight Ez.
<br/>
I've seen this link ( and used the search function again and again ;) ), that's the same code that I already have.
<br/>
what I've done is replacing the drawship/drawteapot functions by displaying the same one triangle on one screen and another same triangle on the other screen.
<br/>
<br/>
Example 1 :
<br/>
Screen 1 : draw 1000* the same red triangle
<br/>
Screen 2 : draw 1000* the same green triangle
<br/>
works fine, no pb.
<br/>
<br/>
Example 2 :
<br/>
Screen 1 : draw 1000* the same red triangle
<br/>
Screen 2 : draw 1* the same green triangle
<br/>
flickering problems,I see part of the red on the green in screen 2 and part of the green on the red in screen 1.
<br/>
<br/>
I suppose it has something to do with VBL, but didn't succeeded finding the right solution. Any idea?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114818 - Goosey - Wed Jan 10, 2007 10:37 pm</h4>
    <div class="postbody"><span class="postbody">Risine, I believe this might be caused from a bad alignment of drawing/waiting for vblank going on (I ran into something similar)
<br/>
<br/>
if I recall correctly make sure you do the commands in this order at the end of the frame:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
GFX_FLUSH = 0; // aka 'glFlush();'
<br/>
swiWaitForVBlank();
<br/>
lcdSwap();
<br/>
UpdateOAM();
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114922 - Vich - Thu Jan 11, 2007 5:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Goosey wrote:</b></span></td> </tr> <tr> <td class="quote">Risine, I believe this might be caused from a bad alignment of drawing/waiting for vblank going on (I ran into something similar)
<br/>
<br/>
if I recall correctly make sure you do the commands in this order at the end of the frame:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
GFX_FLUSH = 0; // aka 'glFlush();'
<br/>
swiWaitForVBlank();
<br/>
lcdSwap();
<br/>
UpdateOAM();
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
Why would you want to call lcdSwap every time?<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114924 - Dark Knight ez - Thu Jan 11, 2007 6:10 pm</h4>
    <div class="postbody"><span class="postbody">In order to put the actual 3D rendering on an other screen each time, instead of on the same.
<br/>
Hence the subject of this thread.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://amplituds.drunkencoders.com" target="_blank">AmplituDS website</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114925 - NeX - Thu Jan 11, 2007 6:12 pm</h4>
    <div class="postbody"><span class="postbody">I know very little about this subject, but would it be possible to set the draw area to 256x384, write to a big capture buffer, and then display half of it on each screen?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114930 - tepples - Thu Jan 11, 2007 7:10 pm</h4>
    <div class="postbody"><span class="postbody">The draw area is frozen to 256x192. Inside the graphics hardware, the buffer is closer to 256x1; the capture hardware just lets the pixels go to RAM at the same time they're going to the LCD.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
