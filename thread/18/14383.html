<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Linker errors with my new NiFi app[SOLVED] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Linker errors with my new NiFi app[SOLVED]</h2>
<div id="posts">
<div class="post">
    <h4>#143561 - yellowstar - Tue Oct 23, 2007 10:03 pm</h4>
    <div class="postbody"><span class="postbody">I am getting linker errors with my NiFi app.(not pong)
<br/>
(built on the wireless lib)
<br/>
<br/>
But,
<br/>
I'm getting linker errors.
<br/>
<br/>
I'm trying to use a lib I wrote for wireless stuff.(same stuff
<br/>
as in pong)
<br/>
<br/>
Another thing:
<br/>
I noticed that the my lib is only 8
<br/>
bytes for some reason.
<br/>
<br/>
Here's what the app will do:
<br/>
This is for Slot-1 users whom want to backup/overwrite eeprom
<br/>
to/from sav files.
<br/>
It's a EEPROM reader and file sender.
<br/>
First the host gets booted with the card.
<br/>
Then the client.
<br/>
The host reads the EEPROM.
<br/>
And then, it sends the EEPROM,
<br/>
for the client to save to the card.
<br/>
For overwriting the EEP,
<br/>
it's the opposite.
<br/>
The client sends the sav file.
<br/>
The host recieves it,
<br/>
then it overwrites the EEPROM with the sav file.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Makefile
<br/>
LIBS   := -lfat -llobby9d -lnds9 -lyellwireless
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
linking NiFi_EEP.arm9.elf
<br/>
connect.o: In function `main':
<br/>
c:/AndrewConsoleStuff/MMaxLibWifi/NiFi_EEP/arm9/source/connect.cpp:91: undefined reference to `AskMode()'
<br/>
c:/AndrewConsoleStuff/MMaxLibWifi/NiFi_EEP/arm9/source/connect.cpp:94: undefined reference to `FindPlayers()'
<br/>
prog.o: In function `ProgMain()':
<br/>
c:/AndrewConsoleStuff/MMaxLibWifi/NiFi_EEP/arm9/source/prog.cpp:35: undefined reference to `Init_Timers()'
<br/>
c:/AndrewConsoleStuff/MMaxLibWifi/NiFi_EEP/arm9/source/prog.cpp:43: undefined reference to `GetPlayerQuit()'
<br/>
collect2: ld returned 1 exit status
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef YELL_WIRELESS_H_
<br/>
#define YELL_WIRELESS_H_
<br/>
<br/>
void Init_Timers();
<br/>
<br/>
bool GetPlayerQuit();//Returns wether or not
<br/>
//wether your opponet has quit.
<br/>
//Based on wether or not a timeout on
<br/>
//that player stays for 3-5 seconds.
<br/>
<br/>
void AskMode();
<br/>
void FindPlayers();
<br/>
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by yellowstar on Fri Nov 09, 2007 7:39 pm; edited 4 times in total</span></div>    
</div>
<div class="post">
    <h4>#143562 - simonjhall - Tue Oct 23, 2007 10:07 pm</h4>
    <div class="postbody"><span class="postbody">The includes for these don't work correctly when you're compiling C code. Take the ipc_init and safe_malloc prototypes and stick extern "C" in front of them.
<br/>
<br/>
eg,
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void camels_eat_shoes(int how_many);</td> </tr></table><span class="postbody">
<br/>
would become
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">extern "C" void camels_eat_shoes(int how_many);</td> </tr></table><span class="postbody">
<br/>
I'd give you a proper example if I had the code infront of me, but I don't ;-)<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143564 - Mighty Max - Tue Oct 23, 2007 10:10 pm</h4>
    <div class="postbody"><span class="postbody">Ah, so am i still missing the ifdef encapsulation on some files *hides*<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143566 - yellowstar - Tue Oct 23, 2007 10:23 pm</h4>
    <div class="postbody"><span class="postbody">I found out I wasn't including the safe_malloc.h
<br/>
file.
<br/>
<br/>
Also,
<br/>
I can't find the headers for the other errors.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143567 - Mighty Max - Tue Oct 23, 2007 10:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yellowstar wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Also,
<br/>
I can't find the headers for the other errors.</td> </tr></table><span class="postbody">
<br/>
<br/>
MessageQueue.h
<br/>
<br/>
Cleanup of the includes for apps is somewhere down in the todo list :p<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143585 - yellowstar - Wed Oct 24, 2007 2:54 am</h4>
    <div class="postbody"><span class="postbody">I found it.(before I saw your post Mighty)
<br/>
<br/>
I found it by searching for the first function
<br/>
in the include dir.
<br/>
I never saw those prototypes
<br/>
in that file before.(when I wanted to find them.)
<br/>
<br/>
<br/>
It compiles correctly now.
<br/>
<br/>
I'm going to post about this game
<br/>
in the wireless topic,
<br/>
with a download.
<br/>
<br/>
<span style="font-weight: bold">EDIT:</span>
<br/>
I have posted there.
<br/>
Here's a <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=143587#143587" target="_blank">link</a> to my post.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144910 - yellowstar - Fri Nov 09, 2007 4:10 am</h4>
    <div class="postbody"><span class="postbody">I have renamed and updated this topic,
<br/>
for a new problem,
<br/>
for a differen't program.
<br/>
<br/>
All the above posts aren't for this new problem,
<br/>
they are for the old pong issue.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144918 - gmiller - Fri Nov 09, 2007 5:25 am</h4>
    <div class="postbody"><span class="postbody">your link may be failing because your library is listed last and it might use routines in library listed further to the left on the line.  The linker usually process the libraries from left to right so libraries that reference other library ode need to be listed on the left relative to the library that hos the routines it calls.  This might also mean you need to list a library more than one.
<br/>
<br/>
for examle:
<br/>
<br/>
libmyA calls code library libmyB which calls code min libmyC
<br/>
<br/>
So the link order would be:
<br/>
<br/>
-lmyA -lmyB -lmyC (followed by other libraies)
<br/>
<br/>
Yours might go:
<br/>
<br/>
 -lyellwireless -lfat -llobby9d -lnds9</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144949 - yellowstar - Fri Nov 09, 2007 7:29 pm</h4>
    <div class="postbody"><span class="postbody">I solved it.
<br/>
<br/>
Make wasn't find the main source file
<br/>
for the lib, and thus not compiling anything.(anything that I wanted)
<br/>
<br/>
The reason for this,
<br/>
was because the source directory and the file
<br/>
wasn't lowercase.(first character)
<br/>
<br/>
Once that was fixed,
<br/>
it worked.
<br/>
<br/>
I had this exact same problem
<br/>
with another lib I wrote.(that lib didn't deal with any wireless things)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
