<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Turn off one screen and backlight? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Turn off one screen and backlight?</h2>
<div id="posts">
<div class="post">
    <h4>#49787 - wizardy - Tue Aug 02, 2005 2:17 pm</h4>
    <div class="postbody"><span class="postbody">I'm using just one screen, and want to turn the other off to don't waste battery, but haven't been able to find out how. Does anyone know how to do this?
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49789 - LiraNuna - Tue Aug 02, 2005 2:24 pm</h4>
    <div class="postbody"><span class="postbody">if i'm not mistake, it's the 6the and 7th bits on POWER_CR, one for each screen.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49912 - dafer - Wed Aug 03, 2005 4:56 pm</h4>
    <div class="postbody"><span class="postbody">Bit 0 in POWER_CR is for turning on both screens and bit 1/9 is for enabling 2D for Main/Sub.
<br/>
So to enable 2D for just one screen write:
<br/>
<br/>
POWER_CR = 0x0003; //Enable main 2D
<br/>
POWER_CR = 0x0201; //Enable Sub 2D
<br/>
<br/>
Anyway the code below generat different behavior for Main and Sub screen. If both screens are just turned on (POWER_CR = 0x0001) the sub screen is white and the main is black. Anyone who knows why?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main(){
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG, VRAM_B_MAIN_SPRITE, VRAM_C_SUB_BG,   VRAM_D_SUB_SPRITE);
<br/>
   videoSetMode(MODE_0_2D);
<br/>
   videoSetModeSub(MODE_0_2D);
<br/>
   irqInitHandler(irqDefaultHandler);
<br/>
   irqSet(IRQ_VBLANK, irqVBlank);
<br/>
   while(1){
<br/>
      uint16 sc = 0x0000;
<br/>
      if((~(*(volatile uint16*)0x04000130)) &amp; 0x0001){ //Press A to...
<br/>
         sc = 0x0001; //...turn on both screens.
<br/>
      }
<br/>
      if((~(*(volatile uint16*)0x04000130)) &amp; 0x0002){ //Press B to...
<br/>
         sc |= 0x0002; //...enable Main 2D
<br/>
      }
<br/>
      if((~(*(volatile uint16*)0x04000130)) &amp; 0x0004){ //Press Select to...
<br/>
         sc |= 0x0200; //...enable Sub 2D
<br/>
      }
<br/>
      POWER_CR = sc;
<br/>
      swiWaitForVBlank();
<br/>
   }
<br/>
}
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>/As meningful to you as words written in water.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49970 - wintermute - Thu Aug 04, 2005 2:05 am</h4>
    <div class="postbody"><span class="postbody">the backlight is controlled by the arm7, POWER_CR only controls the 2d &amp; 3d engines and power to the displays.
<br/>
<br/>
All will be revealed later</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
