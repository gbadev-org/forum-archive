<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Help with image/palette converter - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Help with image/palette converter</h2>
<div id="posts">
<div class="post">
    <h4>#83838 - Daniel[Nordigic] - Thu May 18, 2006 9:56 pm</h4>
    <div class="postbody"><span class="postbody">I'm making an image/palette converter to ouput a loaded image/palette to a binary file. Since i'm not sure how to output the data to the bin file I got a little confused..
<br/>
<br/>
If I have a palette index like this
<br/>
<span style="font-weight: bold">R=31
<br/>
G=0
<br/>
B=31</span>
<br/>
The famous purple everyone hates.. as a colorvalue this is
<br/>
<span style="font-weight: bold">31775</span>
<br/>
and as binary
<br/>
<span style="font-weight: bold">0111 1100 0001 1111</span>
<br/>
<br/>
I've tried writing the Ascii of the colorvalue to a textfile but I'm not sure thats the right approach... Does anyone know how to write theese values to bin files??
<br/>
<br/>
If i get the help I need I'll release it here on the forums later...
<br/>
<br/>
Thanks
<br/>
<br/>
/Daniel</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83846 - SteveH - Thu May 18, 2006 11:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Daniel[Nordigic] wrote:</b></span></td> </tr> <tr> <td class="quote">I'm making an image/palette converter to ouput a loaded image/palette to a binary file. Since i'm not sure how to output the data to the bin file I got a little confused..
<br/>
<br/>
If I have a palette index like this
<br/>
<span style="font-weight: bold">R=31
<br/>
G=0
<br/>
B=31</span>
<br/>
The famous purple everyone hates.. as a colorvalue this is
<br/>
<span style="font-weight: bold">31775</span>
<br/>
and as binary
<br/>
<span style="font-weight: bold">0111 1100 0001 1111</span>
<br/>
<br/>
I've tried writing the Ascii of the colorvalue to a textfile but I'm not sure thats the right approach... Does anyone know how to write theese values to bin files??
<br/>
<br/>
If i get the help I need I'll release it here on the forums later...
<br/>
<br/>
Thanks
<br/>
<br/>
/Daniel</td> </tr></table><span class="postbody">
<br/>
<br/>
What I would do is convert the WORD 3C1F in to the BYTE pair of 3C 1F then write them out in the correct format for the DS, which in this case is :
<br/>
<br/>
1F 3C
<br/>
<br/>
Little Endian style :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83865 - Daniel[Nordigic] - Fri May 19, 2006 3:24 am</h4>
    <div class="postbody"><span class="postbody">Ok... Why the word 3C1F...?
<br/>
0111 1100 0001 1111 is 7C1F...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83889 - SteveH - Fri May 19, 2006 10:28 am</h4>
    <div class="postbody"><span class="postbody">Lets call that a "I've just come on from work and my brain is half dead" typo..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83892 - Daniel[Nordigic] - Fri May 19, 2006 11:21 am</h4>
    <div class="postbody"><span class="postbody">Righto ;D
<br/>
I'm gonna give it a try tonight when i get home... i'll let you know how it turns out..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83909 - Mighty Max - Fri May 19, 2006 2:55 pm</h4>
    <div class="postbody"><span class="postbody">What language are you using?
<br/>
<br/>
On C/C++ just use a write(&amp;value16bit,2,1,file) ;
<br/>
<br/>
On Basic do something (long time no do for me, so i might have little errors here) like 
<br/>
<br/>
OPEN $filename FOR BINARY AS #n
<br/>
PUT #n,bytelow
<br/>
PUT #n,bytehigh<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83912 - ecurtz - Fri May 19, 2006 4:03 pm</h4>
    <div class="postbody"><span class="postbody">Remember to set the high bit (at least if you're using them as 3d textures) it's used to mark opaque/transparent.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83940 - Daniel[Nordigic] - Fri May 19, 2006 8:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mighty Max wrote:</b></span></td> </tr> <tr> <td class="quote">On C/C++ just use a write(&amp;value16bit,2,1,file) ;</td> </tr></table><span class="postbody">
<br/>
<br/>
Correct me if I'm wrong.. But as far as I know the write command only has 2 parameters... The string and the number of chars to write...
<br/>
<br/>
If this is some other function not related to ofstream, please go further into the code and teach me...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ecurtz wrote:</b></span></td> </tr> <tr> <td class="quote">Remember to set the high bit (at least if you're using them as 3d textures) it's used to mark opaque/transparent.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks... did'nt think about that</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83943 - SteveH - Fri May 19, 2006 8:47 pm</h4>
    <div class="postbody"><span class="postbody">I think he's onabout fwrite( value, size, num, file );
<br/>
<br/>
The only problem with fwrite is that it's specific to the CPU, luckily in the case of intel and the ds they are the same, but some processors are big-endian, so using write would not work...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83944 - Mighty Max - Fri May 19, 2006 9:02 pm</h4>
    <div class="postbody"><span class="postbody">Indeed, i missed the f, sorry.
<br/>
<br/>
It simply writes the content pointed to by the first parameter to the file, no matter if it is a string (pointer to an 0 terminated char array), or pointer to any other datatype.
<br/>
<br/>
Little/Big-Endian shouldnt be a problem here, as Steve noted, thanks :) forgot to think about it<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83951 - Daniel[Nordigic] - Fri May 19, 2006 9:44 pm</h4>
    <div class="postbody"><span class="postbody">Thanks... I just figured it out myself though... This shouldn't be a problem now... thanks mate!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83971 - Daniel[Nordigic] - Fri May 19, 2006 11:46 pm</h4>
    <div class="postbody"><span class="postbody">BTW if the high bit is set it's opaque right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83972 - SteveH - Fri May 19, 2006 11:50 pm</h4>
    <div class="postbody"><span class="postbody">Yes, stupid thing - took 3 days to find that "bug"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83985 - Daniel[Nordigic] - Sat May 20, 2006 12:28 am</h4>
    <div class="postbody"><span class="postbody">hehe ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83986 - Daniel[Nordigic] - Sat May 20, 2006 12:30 am</h4>
    <div class="postbody"><span class="postbody">Uhm... another stupid question... if the image is used as a 2d sprite is the high bit ignored?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84152 - Daniel[Nordigic] - Sat May 20, 2006 8:07 pm</h4>
    <div class="postbody"><span class="postbody">Someone....please...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84159 - tepples - Sat May 20, 2006 8:36 pm</h4>
    <div class="postbody"><span class="postbody">If nobody replies, then it's likely that nobody who has read your question knows the answer. Is there anything specific that prevents you from investigating this yourself and reporting it to us?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84164 - Daniel[Nordigic] - Sat May 20, 2006 8:53 pm</h4>
    <div class="postbody"><span class="postbody">Ok...
<br/>
They just sounded so sure about this kind of stuff before...
<br/>
<br/>
My deepest apologies!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84317 - Daniel[Nordigic] - Sun May 21, 2006 10:10 pm</h4>
    <div class="postbody"><span class="postbody">Yet another question... How does texture mode 5, compressed work?
<br/>
Also did anyone know if the high-bit (bit 16) of colorpalettes is ignored on 2D sprites?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84434 - Daniel[Nordigic] - Mon May 22, 2006 4:08 pm</h4>
    <div class="postbody"><span class="postbody">ok...major problem... when an image is saved to binary... how is this done?...
<br/>
I tried reading it from topleft to bottomright, but that turned out very ugly... Anyone with experience in this area?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84437 - waruwaru - Mon May 22, 2006 4:33 pm</h4>
    <div class="postbody"><span class="postbody">Perhaps you should compare your results against something produced by gfx2gba, then you will know what the differences are.<br/>_________________<br/><a class="postlink" href="http://www.DSLua.com" target="_blank">DSLua - a scripting language for your DS!</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84439 - Daniel[Nordigic] - Mon May 22, 2006 4:37 pm</h4>
    <div class="postbody"><span class="postbody">Problem is that the first thing i'm trying is mode 2, 4color images... gfx2gba doesn't support that...or does it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84441 - waruwaru - Mon May 22, 2006 4:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
=======================
<br/>
gfx2gba Converter v0.15
<br/>
-----------------------
<br/>
(C) 2oo1-2oo3 [TRiNiTY]
<br/>
=======================
<br/>
<br/>
Usage: gfx2gba [options] bmp/pcx/tga/tim/spr files ...
<br/>
<br/>
Options are:
<br/>
<br/>
 -pPalettename                  -m generate map (optimized)
<br/>
 -oOutputdir                    -M generate map (not optimized)
<br/>
 -fOutput format                -mm generate metatiled map (optimized)
<br/>
 -sSection                      -MM generate metatiled map (not optimized)
<br/>
 -SpSuffix for palette          -bBank for map
<br/>
 -SmSuffix for map              -mc save map in column order
<br/>
 -StSuffix for tiledata         -F turn off check for flipped tiles
<br/>
 -TMetatilesize                 -rs output a rotate/scale BG screen map
<br/>
 -tTilesize                     -P don't save palette data
<br/>
 -tc save tiles as columns      -G don't save tile/image data
<br/>
 -cColordepth                   -D don't save map data
<br/>
 -CColor-Offset                 -X don't save anything
<br/>
 -A force color offset add      -Z compress everything
<br/>
 -aTransparent color            -zt compress tile/bitmap data
<br/>
 -vVRAM-Offset                  -zp compress palette data
<br/>
 -x don't merge palettes        -zm compress map data
<br/>
 -q quiet mode                  -ap use aPLib as compressor
<br/>
 -B only optimize blank tiles   -aps use aPLib (safe) as compressor
<br/>
 -extern add extern to arrays   -align add alignment info for GCC</td> </tr></table><span class="postbody">
<br/>
<br/>
There is a color depth switch....  Never tried a 4 color image myself, so dunno for sure.<br/>_________________<br/><a class="postlink" href="http://www.DSLua.com" target="_blank">DSLua - a scripting language for your DS!</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84442 - Daniel[Nordigic] - Mon May 22, 2006 4:45 pm</h4>
    <div class="postbody"><span class="postbody">Ok.. will try this when I get home later... thanks mate!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84496 - Daniel[Nordigic] - Mon May 22, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">Gfx2Gba didn't help much but I solved it anyway...  yay.. :D</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
