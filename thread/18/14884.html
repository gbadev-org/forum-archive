<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How do I use libfat with NO$GBA? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > How do I use libfat with NO$GBA?</h2>
<div id="posts">
<div class="post">
    <h4>#149504 - Dwedit - Mon Jan 21, 2008 6:36 am</h4>
    <div class="postbody"><span class="postbody">I'm already trying to use the FCSR DLDI patch for the rom, but I'm finding that the filesystem gets overwritten as I load data into malloc'ed memory.  How do I see whether FCSR is using a disk image based in RAM, and force it to be in ROM?<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149506 - kusma - Mon Jan 21, 2008 9:35 am</h4>
    <div class="postbody"><span class="postbody">I use a ds.gba variant of the executable, so the FCSR-image is put in the emulated slot-2. Tried that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149508 - Dwedit - Mon Jan 21, 2008 9:47 am</h4>
    <div class="postbody"><span class="postbody">Tried it, still gets overwritten.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149514 - M3d10n - Mon Jan 21, 2008 1:03 pm</h4>
    <div class="postbody"><span class="postbody">I use the FCSR thing and have no issues whatsoever on both NO$GBA (both .nds and .ds.gba) and Ideas (only .ds.gba).
<br/>
<br/>
But I don't do any writing to the filesystem, only reading.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149643 - Peter - Wed Jan 23, 2008 7:18 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=14126&amp;highlight=gba+file+fcsr" target="_blank">libfat/DLDI file IO on emulator</a><br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149656 - Lazy1 - Wed Jan 23, 2008 2:10 pm</h4>
    <div class="postbody"><span class="postbody">I had a similar problem a while ago where no$ would freeze for some unknown reason when using the DLDI driver.
<br/>
Somehow writes were being allowed and corrupting something, this would cause an exception on the DS but no$gba would just crash.
<br/>
<br/>
I think there is a new DLDI somewhere that fixes the write issue, maybe that would work better.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149660 - Dwedit - Wed Jan 23, 2008 3:43 pm</h4>
    <div class="postbody"><span class="postbody">Basically, I'm getting problems where files seem to disappear after restarting the program.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149679 - M3d10n - Wed Jan 23, 2008 7:51 pm</h4>
    <div class="postbody"><span class="postbody">FCSR saves to SRAM, are you sure the NO$ SRAM is properly setup? Also, I think you can only use 64KB saves.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#149684 - GPFerror - Wed Jan 23, 2008 9:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>M3d10n wrote:</b></span></td> </tr> <tr> <td class="quote">FCSR saves to SRAM, are you sure the NO$ SRAM is properly setup? Also, I think you can only use 64KB saves.</td> </tr></table><span class="postbody">
<br/>
<br/>
FCSR is supposed to save to SRAM, but there are no existing tools to make the proper image format which requires overlays in the image and my fcsr.dldi driver doesn't implement the write functions, original version had FEATURE_MEDIUM_CANWRITE enabled so that has caused some problems. I just uploaded a fixed version to <a href="http://gpf.dcemu.co.uk/" target="_blank">http://gpf.dcemu.co.uk/</a> on left nav bar under pc utilities, hopefully someone can upload it the dldi wiki or whereever it stored.
<br/>
<br/>
Thanks,
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
