<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>textured_quad - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > textured_quad</h2>
<div id="posts">
<div class="post">
    <h4>#163176 - sverx - Wed Sep 24, 2008 3:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=163174#163174" target="_blank">this post</a>, Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">The textured_quad example in devkitPro should be a great starting point. Or, optionally, <a class="postlink" href="http://blog.dev-scene.com/gaspcubed/files/2008/09/textured_quad_palette.zip" target="_blank">this</a>, which is the same example, but with a paletted texture. You'll want to get rid of GL_TEXTURE_COLOR0_TRANSPARENT if you decide to use that though.</td> </tr></table><span class="postbody">
<br/>
<br/>
I made a search on that forum and I found NeHe's tutorial: I'm reading it because I really don't even know what OpenGL is! I'm reading lesson 1 and -even if the tutorial seems well written- I guess it's too soon to say I understand what I'm reading...
<br/>
Yes, I noticed the textured_quad example: I gave a look to it but it was before, so I really didn't understand any of the few lines of code. :|
<br/>
Anyway I'll also give a look to your link -later-, thanks :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">Now, you need to set 3D up so one pixel on the texture maps exactly to one pixel on the screen. This is done through orthographic projection. Replace glViewport with something like this
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glOrthof32(0, 256, 0, 192, -1, 1)</td> </tr></table><span class="postbody">
<br/>
This means the screen will go from 0 to 256 horizontally in 3D space, and 0-192 vertically (obviously). </span></td> </tr></table><span class="postbody">
<br/>
<br/>
That's good, in fact I need to 'drive' pixels on the screen changing texels (right?) on the texture so that they corresponds.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">It also sets the near clipping plane to -1, and the far clipping plane to 1. Anything in between will get drawn. Orthographic projection means we don't care about how far away something is from the camera, everything is drawn at the same size.</td> </tr></table><span class="postbody">
<br/>
<br/>
So it's ok if my quad has the 4 corners all with Z=0, right?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">All you need to do now is put a quad with your texture in there, and update it every frame.</td> </tr></table><span class="postbody">
<br/>
<br/>
Right. Well, I've got to decide if it's better to use one big texture (256x256) or some smaller textures to save some memory... it shouldn't be hard to show some 12 (4x3) textures each 64x64, right?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">The greatest reference for all this is <a class="postlink" href="http://nocash.emubase.de/gbatek.htm" target="_blank">GBATEK</a>. It might look complicated at first, but it really pays off when you get used to it.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, it's one of my preferred, but it isn't good for a topic where I'm a complete beginner ;)
<br/>
<br/>
Thanks :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163190 - Sausage Boy - Wed Sep 24, 2008 9:16 pm</h4>
    <div class="postbody"><span class="postbody">Wow, you're a great beginner. Everything you say sounds sane and correct. :)<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163197 - TwentySeven - Thu Sep 25, 2008 2:48 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">glOrthof32(0, 256, 0, 192, -1, 1)</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
should be
<br/>
<br/>
glOrthof32(0, 255, 0, 191, -1, 1) 
<br/>
<br/>
right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163211 - Sausage Boy - Thu Sep 25, 2008 12:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TwentySeven wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">glOrthof32(0, 256, 0, 192, -1, 1)</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
should be
<br/>
<br/>
glOrthof32(0, 255, 0, 191, -1, 1) 
<br/>
<br/>
right?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Hm, I don't think so actually. I have no idea why it is like that, but I'm pretty sure that the other values create the intended result.
<br/>
<br/>
Also, it turns out I lied. gluPerspective() is what needs to be replaced, not glViewport().<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163215 - sverx - Thu Sep 25, 2008 3:31 pm</h4>
    <div class="postbody"><span class="postbody">Hi there :)
<br/>
I started experimenting on the <span style="font-style: italic">textured_quad</span> example because I need to understand a lot of things before going on with the effect I want to achieve.
<br/>
<br/>
First I tryed changing this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">gluPerspective(70, 256.0 / 192.0, 0.1, 40);</td> </tr></table><span class="postbody">
<br/>
with this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glOrthof32(0, 256, 0, 192, -1, 1)</td> </tr></table><span class="postbody">
<br/>
as <span style="font-weight: bold">Sausage Boy</span> suggested.
<br/>
<br/>
The quad disappeared from the screen. In the example, if I understood it right, (and I hope so) the program draws a quad with 4 vertices:
<br/>
<br/>
<span style="font-weight: bold">(-0.5,-0.5,0) -  (0.5,-0.5,0) -  (0.5,0.5,0) -  (-0.5,0.5,0)</span>
<br/>
<br/>
so I thought I had to change glOrthof32() parameters, so now it's
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glOrthof32(-128, +128, -96, +96, -1, +1);</td> </tr></table><span class="postbody">
<br/>
but the quad didn't reappear :|
<br/>
<br/>
I'm keeping on reading and reading codes &amp; examples &amp; tutorials... by the way in the while if someone of you has an idea about why this quad doesn't show up... it's welcome :)
<br/>
<br/>
Thanks :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163518 - Cydrak - Sat Oct 04, 2008 1:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sverx wrote:</b></span></td> </tr> <tr> <td class="quote">[well, there's still an open question about the orthographic projection in this very same topic...]</td> </tr></table><span class="postbody">
<br/>
Oh! Sorry, I hadn't realised that.
<br/>
<br/>
Hmm... one thing to watch for is floats vs. fixed point. The "3f" or "f" functions take floats, while "f32" (like glOrthof32, and in fact the DS itself) want 20.12 fixed point. Functions like "glVertex3v16" (4.12) and "glNormal" (three packed 0.10's) take yet other formats. No, I can hardly remember what's what either. :-)
<br/>
<br/>
So in practice the floats are *usually* multiplied by 0x1000 (= 1&lt;&lt;12, or 4096). A value like 0.5 becomes 0x00000800 in the eyes of the "f32" functions. If the projection is only (0x100, 0x0c0), such a quad will be bigger than expected!
<br/>
<br/>
If you're after an OpenGL guide, you can also have a look at the <a class="postlink" href="http://www.opengl.org/documentation/red_book/" target="_blank">Red Book</a>. Lengthly, but also full of examples. It's not DS-specific, of course, so much of it could be skipped. But the general concepts such as the viewport, transformations and matrix stacks, lighting, materials and textures are largely relevant.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163886 - sverx - Tue Oct 14, 2008 2:40 pm</h4>
    <div class="postbody"><span class="postbody">Back again, sorry, I was busy these days...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">Hmm... one thing to watch for is floats vs. fixed point. The "3f" or "f" functions take floats, while "f32" (like glOrthof32, and in fact the DS itself) want 20.12 fixed point.</td> </tr></table><span class="postbody">
<br/>
<br/>
Aw, I didn't notice that... btw I changed the code in the <span style="font-style: italic">textured_quad</span> example so that my figures would be left shifted by 12 bits, like that:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glOrthof32(-128&lt;&lt;12, +128&lt;&lt;12, -96&lt;&lt;12, +96&lt;&lt;12, -1&lt;&lt;12, +1&lt;&lt;12);</td> </tr></table><span class="postbody">
<br/>
<br/>
but I still can't see that quad :| And it's strange because the quad it's the same, it has these vertices
<br/>
<span style="font-weight: bold">(-0.5,-0.5,0) - (0.5,-0.5,0) - (0.5,0.5,0) - (-0.5,0.5,0)</span>
<br/>
<br/>
any idea? (and can we split this parts from the topic?)
<br/>
<br/>
Thanks! :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
