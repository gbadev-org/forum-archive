<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Java for DS - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Java for DS</h2>
<div id="posts">
<div class="post">
    <h4>#136606 - magicdanw - Fri Aug 03, 2007 4:37 am</h4>
    <div class="postbody"><span class="postbody">Hi!  This is my first post here.  I'm a Java programmer who would like to get into DS programming.  I found a program called Java4gba: <a class="postlink" href="http://www.torlus.com/index.php?2004/01/05/25-java4gba---a-java-virtual-machine-for-gba" target="_blank">http://www.torlus.com/index.php?2004/01/05/25-java4gba---a-java-virtual-machine-for-gba</a>
<br/>
<br/>
It lets you program in Java for the Gameboy Advance, but there's no input methods.  I'd like to try to expose the functions found in libnds and PAlib as Java methods, but first I need to figure out how to make nds roms with Java4gba.  Emulators see the compiled roms as gba roms, and they crash if I prepend ndsloader.bin.  Does anyone know how to convert a gba rom into an nds rom, or what the differences are between them?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136613 - felix123 - Fri Aug 03, 2007 7:31 am</h4>
    <div class="postbody"><span class="postbody">You cannot just convert a GBA program into a DS program. You need to rewrite the code.<br/>_________________<br/><a class="postlink" href="http://en.wikipedia.org/wiki/NDSh" target="_blank">Nintendo DS homebrew on Wikipedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136615 - magicdanw - Fri Aug 03, 2007 8:14 am</h4>
    <div class="postbody"><span class="postbody">Ok.  I'm now trying to figure out how to do that.  I have the source code for the program, and I'm trying to first compile it as it is, but I'm having some difficulty.  First of all, the makefile required GCC, which I find odd because it should be built with DevKitAdvanced or DevKitPro.  Anyway, I downloaded GCC for Windows, and now it's giving an error because it needs linux library files, which of course won't work with Windows.  Any idea why it's using GCC instead of DevKit?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136616 - Ant6n - Fri Aug 03, 2007 8:31 am</h4>
    <div class="postbody"><span class="postbody">devkitarm is a modified version of gcc (targeted for arm, with some gba/ds specs, linker scripts, tools)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136618 - magicdanw - Fri Aug 03, 2007 9:21 am</h4>
    <div class="postbody"><span class="postbody">I see.  I've also gotten a bit further.  By using a gba makefile from DevKitPro, I can start compiling.  However, it hits an error in a file that uses ifdef commands.  As far as I can tell, the compiler isn't registering properly that I'm compiling for GBA, so the ifdef GBA code never runs, causing an error later on.  In the compiler options being used, the only instance I see of GBA is -ffast-math GBA, and the compiler complains that GBA isn't a file name, so I guess the architecture is being set wrong or not at all.  Where does the GBA architecture get set?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136659 - Quirky - Fri Aug 03, 2007 5:00 pm</h4>
    <div class="postbody"><span class="postbody">I'd start with a newer version of Java. The Java4gba release is not clearly licensed and may even be illegal. 
<br/>
<br/>
The "phoneme" release seems to be the updated version of the java4gba JVM - <a href="https://phoneme.dev.java.net/downloads_page.html" target="_blank">https://phoneme.dev.java.net/downloads_page.html</a> - and it is GPL. They have changed to using C++ so there are no ifdefs. You need to implement certain functions (not sure which, the documentations on what's needed is not too hot). However, the build system is really confusing, but if you could get it to build for the DS and maybe create classes that exposed palib from Java code it'd be quite cool!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136668 - magicdanw - Fri Aug 03, 2007 6:08 pm</h4>
    <div class="postbody"><span class="postbody">Well, you're right about the build system being confusing :(
<br/>
<br/>
I'm trying to build under cygwin, but I get
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Checking for build-time classes to compile ...
<br/>
d
<br/>
/usr/bin/bash: c:devkitPromsysphoneme_advanced_mr2cdcsrcsharejavavmclassessunmis
<br/>
cbuildlinux-arm-generic.btclasses.list: command not found
<br/>
make: *** [../../build/linux-arm-generic/./btclasses/sun/misc/TimeStamps.class]
<br/>
Error 127</td> </tr></table><span class="postbody">
<br/>
and then it quits.  Everything up until then looks ok (as in, no errors or warnings).  Any idea what this means?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136687 - tepples - Fri Aug 03, 2007 9:26 pm</h4>
    <div class="postbody"><span class="postbody">Try changing the \ characters in path names to / characters.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136880 - magicdanw - Mon Aug 06, 2007 2:28 am</h4>
    <div class="postbody"><span class="postbody">I'm using the default makefile and settings, which use / characters in path names.  I see what you mean, that the \ characters in the pathname were removed, but I searched the entire phoneme folder and no files contain the text "devkitpro," so I don't know where the makefile is getting the path from, or why it's in Windows instead of Unix format...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#136905 - josath - Mon Aug 06, 2007 10:27 am</h4>
    <div class="postbody"><span class="postbody">It took me about an hour to get this working on NDS, it was fairly simple, the code is very portable. I'll see about packing it up and releasing it, but it's not too useful right now since there's no input, and the only output is via text console. (ie. you cannot access any DS hardware, and Java being what it is, you can't just directly write to the HW registers.)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
