<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Help the newbie! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Help the newbie!</h2>
<div id="posts">
<div class="post">
    <h4>#99148 - MaHe - Sat Aug 19, 2006 8:08 pm</h4>
    <div class="postbody"><span class="postbody">I started programming with PA_Lib in quickly got hang of it. But I was a bit annoyed with it - it sure is easy to use, but it's got it's own limitations, and since Mollusk isn't the main coder anymore, it's really buggy. I've decided to move to libnds and figured out, that I'm actually still a newbie. I didn't know zilch. So here's a 'Hello, World' code I wrote for myself:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/*********************************************
<br/>
Name: Hello, world!
<br/>
Author: Matjaz 'MaHe' Hegedic
<br/>
Version: 0.01
<br/>
**********************************************/
<br/>
<br/>
// Includes //
<br/>
<br/>
#include &lt;nds.h&gt;              // Include 'libnds' in our application
<br/>
#include &lt;nds/arm9/console.h&gt; // Include the basic print functionality in our application
<br/>
#include &lt;stdio.h&gt;            // Include 'stdio' in our application
<br/>
<br/>
// Functions //
<br/>
<br/>
int main() {
<br/>
   videoSetMode(0);                                 // Use the top screen only
<br/>
   videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE); // Use subbackground 0 to display text
<br/>
   vramSetBankC(VRAM_C_SUB_BG);           // Map VRAM bank C to subbackground
<br/>
<br/>
   SUB_BG0_CR = BG_MAP_BASE(31);           // Set subbackground 0 to 'black'
<br/>
   BG_PALETTE_SUB[255] = RGB15(31,31,31); // Set the text color to 'white'
<br/>
   
<br/>
   // Initialise the default console settings for the text output
<br/>
   consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
   
<br/>
   // Output 'Pozdravljen, svet' to the screen
<br/>
   iprintf("Pozdravljen, svet!");
<br/>
   
<br/>
   // Loop infinitely
<br/>
   while(1) { swiWaitForVBlank(); }
<br/>
   
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody">(yes, the comments are wrong, but I don't care just yet)
<br/>
This will output 'Pozdravljen, svet!' (Hello, world in my language) on the touch-screen. I'm fine with that, but now I'd like to put it on the top screen. So, I've modified the code:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int main() {
<br/>
   videoSetMode(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
   videoSetModeSub(0);
<br/>
   vramSetBankC(VRAM_C_MAIN_BG);
<br/>
<br/>
   BG0_CR = BG_MAP_BASE(31);          
<br/>
   BG_PALETTE[255] = RGB15(31,31,31);
<br/>
   
<br/>
   // Initialise the default console settings for the text output
<br/>
   consoleInitDefault((u16*)SCREEN_BASE_BLOCK(31), (u16*)CHAR_BASE_BLOCK(0), 16);
<br/>
   
<br/>
   // Output 'Pozdravljen, svet' to the screen
<br/>
   iprintf("Pozdravljen, svet!");
<br/>
   
<br/>
   // Loop infinitely
<br/>
   while(1) { swiWaitForVBlank(); }
<br/>
   
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody">Now, this won't work. It only colors the top screen to black, but won't output anything.
<br/>
Now, I'm sure this is very, very stupid to most of you, experienced coders, but I want to know what have I overlooked ... ?
<br/>
<br/>
Thanks in advance! =)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99153 - Sausage Boy - Sat Aug 19, 2006 8:48 pm</h4>
    <div class="postbody"><span class="postbody">Try:
<br/>
vramSetBankA(VRAM_A_MAIN_BG);<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99163 - Lick - Sat Aug 19, 2006 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Does it work on hardware?<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99239 - dovoto - Sun Aug 20, 2006 5:57 am</h4>
    <div class="postbody"><span class="postbody">to put it on the top screne change nothing from the first demo but add
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">lcdMainOnBottom();</td> </tr></table><span class="postbody">
<br/>
<br/>
(should not matter where).
<br/>
<br/>
This will cause the sub display to render to the top screen.  Because the console uses the sub display by default this should be the only change to make.
<br/>
<br/>
If you want the console to use the main display you will need to init the console with:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/*! \fn void consoleInit(u16* font, u16* charBase, u16 numCharacters, u8 charStart, u16* map, u8 pal, u8 bitDepth)
<br/>
   \brief Initialise the console.
<br/>
   \param font   base address of the 16 color font to use
<br/>
   \param charBase   VRAM address to load the font
<br/>
   \param numCharacters number of characters in the font
<br/>
   \param charStart ascii code of the first character in the font
<br/>
   \param map base address of the map to use for printing
<br/>
   \param pal 16 color palette index to use
<br/>
   \param bitDepth 256/16 color tile flag. 
<br/>
   
<br/>
   Initializes the console with the given parameters. When pal is greater than 15 and
<br/>
   bitDepth is 16 then   all non zero entries in the font are set to index 255. When bitDepth
<br/>
   is not 16 then the font tiles are created as 8bit (256 color).
<br/>
 
<br/>
*/
<br/>
void consoleInit(u16* font, u16* charBase, u16 numCharacters, u8 charStart, u16* map, u8 pal, u8 bitDepth);</td> </tr></table><span class="postbody">
<br/>
<br/>
Although the libnds console is pretty flexible it is not intended for extensive in game use...more for prototyping and debuging and quick tests.  I recomend you stick with consoleInitDefault() or consoleDemoInit() (which is even simpler) and when you find you need a better looking text renderer you write one.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99302 - MaHe - Sun Aug 20, 2006 3:56 pm</h4>
    <div class="postbody"><span class="postbody">Thanks a lot to all of you :)
<br/>
Now, can libFB (www.dragonminded.com) completely replace the current console? I'm leaning towards it, since it has a plethora of useful features...<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
