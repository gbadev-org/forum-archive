<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS(i) GBA Emulator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DS(i) GBA Emulator</h2>
<div id="posts">
<div class="post">
    <h4>#164896 - cboomf_ - Sun Nov 30, 2008 10:26 am</h4>
    <div class="postbody"><span class="postbody">Now that we know the DSi doesn't have a gba slot, could work begin on producng a GBA emulator to run .gba games from slot-1...
<br/>
<br/>
I know that DSi currenty cant run homebrew but eventually, it will inevitably run homebrew, so is it worth starting now then modifying later to run on DSi hardware/flash carts ....<br/>_________________<br/>M3 Simply - 1GB SanDisk 
<br/>
Flashme'd DS</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164897 - Dwedit - Sun Nov 30, 2008 10:36 am</h4>
    <div class="postbody"><span class="postbody">It's not so much writing an emulator, more of writing a relocator.  Really hard to tell what is code and what is data, and properly relocate the binary.
<br/>
Then there would be some difficult patching, and then it may possibly work with no sound.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164898 - cboomf_ - Sun Nov 30, 2008 1:59 pm</h4>
    <div class="postbody"><span class="postbody">I was thinking how about extending lameboy/goomba colour ...<br/>_________________<br/>M3 Simply - 1GB SanDisk 
<br/>
Flashme'd DS</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164906 - DiscoStew - Sun Nov 30, 2008 7:19 pm</h4>
    <div class="postbody"><span class="postbody">Excluding the fact that this could be for running pirated commercial games......
<br/>
<br/>
<br/>
Even if a GBA emulator (or even loading GBA games via the slot-1, and changing to GBA mode if it still exists), wouldn't the access time and read speed on the cards and main RAM be a major problem in getting this to work since they are somewhat slower than GBA carts?<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164909 - silent_code - Sun Nov 30, 2008 8:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>cboomf_ wrote:</b></span></td> </tr> <tr> <td class="quote">I was thinking how about extending lameboy/goomba colour ...</td> </tr></table><span class="postbody">
<br/>
Because they emulate a totally different architecture (Z80?) from the GBA?
<br/>
<br/>
I'd said it in the past and I'll say it again: People should try to make the hardware run GBA homebrew from slot 1, using the native hardware that is already available.
<br/>
<br/>
Although, I don't have any info about the DSi's GBA (non-)"compatibility."<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164933 - Apache Thunder - Wed Dec 03, 2008 5:50 am</h4>
    <div class="postbody"><span class="postbody">Perhaps the DSi will give the DS programmers out there a good reason to try a GBA Emulator since the first DS's had the GBA slot, so coders didn't feel the need to do it even though it could probably be done.
<br/>
<br/>
Once they find a way past the fact that the entire rom can't be executed directly from the card (since Slot-1 cards don't have their own ram), then the rest should be pretty easy.
<br/>
<br/>
The DSi has more internal ram and perhaps a few undiscovered features, so it may turn out that the DSi can have GBA stuff run from Slot-1, but would not work on the standard DS's without some kind of GBA slot expansion pack which would defeat the purpose of doing it on the DS anyway. Of coarse if they find a way of booting GBA from the SD slot, then it won't bear any similarity to a standard DS version.
<br/>
<br/>
I look forward to it, as I don't own a GBA flashcart, so Slot-1 would be the only option for me.<br/>_________________<br/>Sig under construction...Please check back after the sun explodes....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#164950 - silent_code - Wed Dec 03, 2008 10:53 pm</h4>
    <div class="postbody"><span class="postbody">Just a thought: What are the odds (I don't know this) of the DSi not having a GBA BIOS anymore?
<br/>
That's a delicate matter.
<br/>
<br/>
Shouldn't it be possible to write a virtual virtual (yes, there's two of them) memory module that dynamically pages data from the ROM file to the RAM and runs the code from there?
<br/>
<br/>
Although I know the theory (and practical basics), I can't tell whether this can be efficiently (so it's usable) done on the NDS hardware or not. That's not much of my area of interest, you should know. ;^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165024 - M3d10n - Sat Dec 06, 2008 11:13 pm</h4>
    <div class="postbody"><span class="postbody">A crazy approach would load the GBA roms into the RAM (the DSi has 16MBs of RAM, right?). Few GBA games cross the 16MB barrier, and full 16MB games could be done by keeping the emulator code in unused VRAM banks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165037 - DiscoStew - Sun Dec 07, 2008 5:20 am</h4>
    <div class="postbody"><span class="postbody">Most GBA games shown as 16MB don't exactly take up that much. That's just how much space is on the chip that the ROM is stored on. Trimming them would help free space up.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165085 - Chase-san - Tue Dec 09, 2008 2:49 pm</h4>
    <div class="postbody"><span class="postbody">Would probably have to make some kind of pagefile on the cart, but it would be very slow, and most games probably wouldn't run at full speed because of it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165114 - tepples - Wed Dec 10, 2008 4:10 am</h4>
    <div class="postbody"><span class="postbody">I would imagine that DSi RAM covers 0x02000000 through 0x02FFFFFF. But a 16 MB GBA game that has been trimmed to 15 MB expects to cover 0x08000000 through 0x08EFFFFF. Your virtualizer would need to at least
<br/>
<ul><li>rewrite all ROM addresses from 0x08000000 to 0x02100000 somehow </li><li>emulate the entire GBC and GBA audio system </li><li>translate writes to graphics mode registers (DISPCNT, BGCTRL[]) </li><li>change all scroll values (BG_OFFSET[], BG2PA, etc.) so that the 240x160px GBA screen is centered in the 256x192px DS screen; this also involves trapping HDMAs </li><li>translate writes to DMA registers </li><li>trap all interrupts </li></ul><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165120 - elwing - Wed Dec 10, 2008 7:48 am</h4>
    <div class="postbody"><span class="postbody">it should be somehow easyer if you forget about the sound hardware at first, no? it seems to be the worst part...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165142 - silent_code - Wed Dec 10, 2008 9:12 pm</h4>
    <div class="postbody"><span class="postbody">I wonder how much of the old hardware (read: GBA) is still intact and usable on the DSi? Well, I guess we'll have to wait for the world wide release in order to find out via reverse engineering and trial and error. :^)
<br/>
<br/>
Btw.: Who knows what is mapped to the previously slot 2 memory area on the DSi?
<br/>
<br/>
Why would the sound hardware have to be emulated? Is it that different from the NDS'? Did the NDS' prior to the DSi have a special compatibility sound chip for GBA games on board?
<br/>
This is only speculation, but I don't think that the whole compatibility was nuked...
<br/>
<br/>
This is definitely an interesting topic! :^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165147 - Normmatt - Wed Dec 10, 2008 10:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">I wonder how much of the old hardware (read: GBA) is still intact and usable on the DSi? Well, I guess we'll have to wait for the world wide release in order to find out via reverse engineering and trial and error. :^)
<br/>
<br/>
Btw.: Who knows what is mapped to the previously slot 2 memory area on the DSi?
<br/>
<br/>
Why would the sound hardware have to be emulated? Is it that different from the NDS'? Did the NDS' prior to the DSi have a special compatibility sound chip for GBA games on board?
<br/>
This is only speculation, but I don't think that the whole compatibility was nuked...
<br/>
<br/>
This is definitely an interesting topic! :^)</td> </tr></table><span class="postbody">
<br/>
<br/>
The DS had the GBA hardware inside it aswell as the NDS hardware.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165148 - DiscoStew - Wed Dec 10, 2008 10:32 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Normmatt wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">I wonder how much of the old hardware (read: GBA) is still intact and usable on the DSi? Well, I guess we'll have to wait for the world wide release in order to find out via reverse engineering and trial and error. :^)
<br/>
<br/>
Btw.: Who knows what is mapped to the previously slot 2 memory area on the DSi?
<br/>
<br/>
Why would the sound hardware have to be emulated? Is it that different from the NDS'? Did the NDS' prior to the DSi have a special compatibility sound chip for GBA games on board?
<br/>
This is only speculation, but I don't think that the whole compatibility was nuked...
<br/>
<br/>
This is definitely an interesting topic! :^)</td> </tr></table><span class="postbody">
<br/>
<br/>
The DS had the GBA hardware inside it aswell as the NDS hardware.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I think in specifics, it has many features that the GBA has, and the GBA compatibility mode sets up the NDS hardware to match those of the GBA imo, including using the NDS sound hardware to assign 2 digital channels + 4 analogue channels. But, I don't think we are talking about using that compatibility mode, even if it exists, because then it would set the hardware to match a GBA, including the RAM to 256KB + 32KB, when we want to fit upwards of 15MB into the 16MB RAM available.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165187 - silent_code - Thu Dec 11, 2008 8:48 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, but if sound were "fead" through to the hardware (in NDS mode) through a "thin" software layer, it wouldn't be much hassle with converting and all after that.
<br/>
<br/>
@ Normmatt: Thanks, but I'm already aware of that. I was specifically asking about the sound hardware with the intention (although maybe not clear enough formulated) to find out how the compatibility mode is realized in hardware: anoth chip or through the NDS' chip.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165477 - M3d10n - Mon Dec 22, 2008 4:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chase-san wrote:</b></span></td> </tr> <tr> <td class="quote">Would probably have to make some kind of pagefile on the cart, but it would be very slow, and most games probably wouldn't run at full speed because of it.</td> </tr></table><span class="postbody">
<br/>
The DS NeoGeo emulator does exactly that and it runs games several times bigger than the DS RAM, at full speed or very close to for most games.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165492 - wintermute - Tue Dec 23, 2008 2:18 am</h4>
    <div class="postbody"><span class="postbody">The DSi already has GBA emulation. Certain things also lead me to believe that Nintendo intend to offer GBA games via the DSi download service.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165496 - HyperHacker - Tue Dec 23, 2008 4:58 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>M3d10n wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Chase-san wrote:</b></span></td> </tr> <tr> <td class="quote">Would probably have to make some kind of pagefile on the cart, but it would be very slow, and most games probably wouldn't run at full speed because of it.</td> </tr></table><span class="postbody">
<br/>
The DS NeoGeo emulator does exactly that and it runs games several times bigger than the DS RAM, at full speed or very close to for most games.</span></td> </tr></table><span class="postbody">The GBAMP version of Goomba Color also does this for GBC games, paging the ROM from the CF card. It's a bit slow for some games, but it manages to run a 2MB ROM with nothing but 256K of RAM.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165514 - silent_code - Wed Dec 24, 2008 1:55 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">The DSi already has GBA emulation. Certain things also lead me to believe that Nintendo intend to offer GBA games via the DSi download service.</td> </tr></table><span class="postbody">
<br/>
&gt; MORE INPUT
<br/>
&gt; ?<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165521 - Wuschmaster - Wed Dec 24, 2008 1:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">The DSi already has GBA emulation. Certain things also lead me to believe that Nintendo intend to offer GBA games via the DSi download service.</td> </tr></table><span class="postbody">That sounds very unlikely...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
