<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Just using 'malloc' - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Just using 'malloc'</h2>
<div id="posts">
<div class="post">
    <h4>#123146 - MrD - Sun Mar 25, 2007 5:24 pm</h4>
    <div class="postbody"><span class="postbody">On the DS, is it okay to use <span style="font-weight: bold">malloc</span> and <span style="font-weight: bold">free</span> as one would normally do when coding for the PC?
<br/>
<br/>
Is there any caveats that I should be aware of? (Or can I just malloc and free like crazy until I fill or fragment the memory to buggery?)<br/>_________________<br/>Not active on this forum. For Lemmings DS help see its website.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123147 - simonjhall - Sun Mar 25, 2007 5:30 pm</h4>
    <div class="postbody"><span class="postbody">Should be fine. It's what I use!
<br/>
Couple of things you should be aware of though:
<br/>
a) if you're gonna be using the extra memory provided by some of the slot-2 cards at some point, you're probably gonna wanna wrap malloc so you can control which memory space it goes to. When I use slot-2 RAM I also use a different memory allocator, as I don't know how to tell the existing malloc that I've got two spaces
<br/>
<br/>
b) malloc on the ARM7 may be slightly hairy, as I'm sure the heap points at the 96k of fast RAM. If you want to malloc from the main memory block you've gotta do something a bit more complicated.
<br/>
<br/>
That's about it, I think.<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123152 - ikaris - Sun Mar 25, 2007 5:44 pm</h4>
    <div class="postbody"><span class="postbody">While this may not be perfect down the smallest percentile, I use this to keep track of how much memory I've used up.
<br/>
<br/>
Use at your own risk !
<br/>
<br/>
I'm sure someone can think of a better / cleaner way to do this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">struct mallinfo mi = mallinfo();
<br/>
<br/>
float memFreePercent = ((float)mi.uordblks / 4000000.0) * 100;
<br/>
<br/>
iprintf("Memory Free: %d/100\n", (int)memFreePercent);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
