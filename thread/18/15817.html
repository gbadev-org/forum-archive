<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>touchpad input demo?  please! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > touchpad input demo?  please!</h2>
<div id="posts">
<div class="post">
    <h4>#160314 - Holland - Sun Jul 13, 2008 11:21 pm</h4>
    <div class="postbody"><span class="postbody">i've used the touchpad to select things and drag stuff around, but now i'm needing to draw lines.  i'm noticing that the refresh rate is making this a little difficult.
<br/>
<br/>
i'm assuming it's an issue of not using a backbuffer...but i'm having a hard time finding a good tutorial for backbuffering..and more specifically drawing lines with it.
<br/>
<br/>
i'm going to be displaying sprites on top of the surface the lines are drawn on..but i'm assuming that can be handled by just setting the priority in the BG Control registers.
<br/>
<br/>
if i remember correctly from GBA dev, there is a mode with a backbuffer, but i wasn't using any sort of library when i was doing gba stuff.
<br/>
any help or even just a quick and dirty demo app or anything would be greatly appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160315 - dovoto - Sun Jul 13, 2008 11:36 pm</h4>
    <div class="postbody"><span class="postbody">I seem to remember talking about that sort of thing here:
<br/>
<br/>
<a class="postlink" href="http://www.dev-scene.com/NDS/Tutorials_Day_3" target="_blank">http://www.dev-scene.com/NDS/Tutorials_Day_3</a>
<br/>
<br/>
Maybe not exactly what you need but should be a start.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160319 - Holland - Mon Jul 14, 2008 12:32 am</h4>
    <div class="postbody"><span class="postbody">yeah..i've been messing around with those.  the drawing one you provide is great until you add in a waitvblank...then it doesn't update fast enough.  trying to swap it over to be double buffered like your double buffer tutorial...but i'm having issues just because your double buffering is done with bitmaps...i'm just trying to change individual pixel colors.
<br/>
<br/>
is there anywhere i can just get a memory layout like cowbite has for the GBA?  i'm trying to learn how to use libnds but i'm thinking i might be better off just understanding what register everything is writing to and such...since that's the only way i know how to code for the GBA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160320 - Lazy1 - Mon Jul 14, 2008 12:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
is there anywhere i can just get a memory layout like cowbite has for the GBA?  i'm trying to learn how to use libnds but i'm thinking i might be better off just understanding what register everything is writing to and such...since that's the only way i know how to code for the GBA.</td> </tr></table><span class="postbody">
<br/>
<br/>
<a class="postlink" href="http://nocash.emubase.de/gbatek.htm" target="_blank">GBATek</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160322 - Holland - Mon Jul 14, 2008 12:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
is there anywhere i can just get a memory layout like cowbite has for the GBA?  i'm trying to learn how to use libnds but i'm thinking i might be better off just understanding what register everything is writing to and such...since that's the only way i know how to code for the GBA.</td> </tr></table><span class="postbody">
<br/>
<br/>
<a class="postlink" href="http://nocash.emubase.de/gbatek.htm" target="_blank">GBATek</a></span></td> </tr></table><span class="postbody">
<br/>
<br/>
thank you so much!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160330 - Holland - Mon Jul 14, 2008 3:12 am</h4>
    <div class="postbody"><span class="postbody">so i'm starting to notice some things that confuse me.
<br/>
<br/>
when you set up the display control register and pass in MODE_FB# it's sending in 0x00020000 or 0x00060000 etc...
<br/>
<br/>
according to the specs i'm seeing there are only 16 bits in the display control...so what are these doing?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160332 - dovoto - Mon Jul 14, 2008 3:30 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">so i'm starting to notice some things that confuse me.
<br/>
<br/>
when you set up the display control register and pass in MODE_FB# it's sending in 0x00020000 or 0x00060000 etc...
<br/>
<br/>
according to the specs i'm seeing there are only 16 bits in the display control...so what are these doing?</td> </tr></table><span class="postbody">
<br/>
<br/>
Sure you are not looking at gba specs?
<br/>
<br/>
<a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsvideobgmodescontrol" target="_blank">http://nocash.emubase.de/gbatek.htm#dsvideobgmodescontrol</a>  &lt;--try that<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160333 - Holland - Mon Jul 14, 2008 3:31 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">so i'm starting to notice some things that confuse me.
<br/>
<br/>
when you set up the display control register and pass in MODE_FB# it's sending in 0x00020000 or 0x00060000 etc...
<br/>
<br/>
according to the specs i'm seeing there are only 16 bits in the display control...so what are these doing?</td> </tr></table><span class="postbody">
<br/>
<br/>
Sure you are not looking at gba specs?
<br/>
<br/>
<a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsvideobgmodescontrol" target="_blank">http://nocash.emubase.de/gbatek.htm#dsvideobgmodescontrol</a>  &lt;--try that</span></td> </tr></table><span class="postbody">
<br/>
<br/>
&lt;- moron.  you'll learn this over time. :) haha..thanks mate
<br/>
<br/>
edit: i think i may strip out all of the GBA info from this htm...i'd prefer tonc and cowbite for that anyway.  might be a good way to avoid confusion in the future</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160339 - Holland - Mon Jul 14, 2008 4:40 am</h4>
    <div class="postbody"><span class="postbody">if anyone cares i just split up the gbatek doc and fixed all of the links and such...it's better than confusing stuff like i just did by accident :/
<br/>
<br/>
<a href="http://www.mediafire.com/?gls0rdyho2p" target="_blank">http://www.mediafire.com/?gls0rdyho2p</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160343 - Cydrak - Mon Jul 14, 2008 9:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">if anyone cares i just split up the gbatek doc and fixed all of the links and such...it's better than confusing stuff like i just did by accident :/ </td> </tr></table><span class="postbody">
<br/>
Keep in mind you'll still <span style="font-style: italic">need</span> the GBA specs--a ton of registers have barely changed from the GBA so they've just been linked from the DS section. It is confusing, I know... Expect to spend some days reading to find all the little details. And don't be afraid to take notes/make your own "cheat sheets"/etc. :-)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">when you set up the display control register and pass in MODE_FB# it's sending in 0x00020000 or 0x00060000 etc... </td> </tr></table><span class="postbody">
<br/>
Beware that MODE_FB* is quite different from the MODE_n_2D constants or the GBA modes. Essentially, it displays VRAM while normal rendering continues in the background--BG and sprites exist but you won't <span style="font-style: italic">see</span> them. Also, the FB modes are main screen only.
<br/>
<br/>
To draw without losing all the cool features, you can use a BG bitmap instead. For this you'll need:
<br/>
<br/>
- Some VRAM assigned as BG (instead of LCD).
<br/>
- Layer MODE_3_* (for BG3) or MODE_5_* (for BGs 2 and 3).
<br/>
- A BG mode like BG_BMP16_256x256 with the desired BG_BMP_BASE (if &gt; 0).
<br/>
- If using BG_BMP8, a suitable BG_PALETTE.
<br/>
- A matrix. Like the GBA's, these are affine BGs, so you need to set that up as normal. It's pretty straightforward, see the libnds 16bit_color_bmp example.
<br/>
<br/>
Alternately, the 3D can render limited amounts of geometry (lines included).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160348 - Holland - Mon Jul 14, 2008 1:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">if anyone cares i just split up the gbatek doc and fixed all of the links and such...it's better than confusing stuff like i just did by accident :/ </td> </tr></table><span class="postbody">
<br/>
Keep in mind you'll still <span style="font-style: italic">need</span> the GBA specs--a ton of registers have barely changed from the GBA so they've just been linked from the DS section.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
which is exactly why i made sure the index.htm could link to both the GBA and NDS portion of the specs... now it's still easy to get between the two but there won't be any more confusion about which one you're looking at.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Holland wrote:</b></span></td> </tr> <tr> <td class="quote">when you set up the display control register and pass in MODE_FB# it's sending in 0x00020000 or 0x00060000 etc... </td> </tr></table><span class="postbody">
<br/>
Beware that MODE_FB* is quite different from the MODE_n_2D constants or the GBA modes. Essentially, it displays VRAM while normal rendering continues in the background--BG and sprites exist but you won't <span style="font-style: italic">see</span> them. Also, the FB modes are main screen only.
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
yeah...now that i have an easy way to see what each function is doing, i realized that MODE_FB* is completely different from setting up a MODE_n_2D and enabling various backgrounds.
<br/>
<br/>
thanks for all the input.  i love this forum! :D</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
