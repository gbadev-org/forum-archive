<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ODE + NDS (+OPAL) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > ODE + NDS (+OPAL)</h2>
<div id="posts">
<div class="post">
    <h4>#68932 - tetsu - Fri Jan 27, 2006 1:32 pm</h4>
    <div class="postbody"><span class="postbody">Ever thought about using your Nintendo DS app with a physics lib? The last few days I've tried to get ODE (www.ode.org, the only open source physics lib I know of) working, and <a class="postlink" href="http://hem.bredband.net/b243173/ODEcube.zip" target="_blank">here</a>'s the result.
<br/>
<br/>
Move around with the arrows, L, R and use 'A' to add a new box and 'B' to make them all spin. 
<br/>
<br/>
As you can see, after about 10 boxes in motions, the DS really starts struggeling. After a while it completely dies. Well, it's fun to try anyway.
<br/>
<br/>
Now, the demo isn't very complexed, we're not talking trimesh-to-trimesh collisions here. Still only with some boxes and some border planes, it gives up. First I thought that ODE probably isn't optimized for handheld devices or low-memory computers. Secondly, I used a wrapper lib called OPAL (opal.sf.net) to make things easier for me. This adds another layer which surely slows down the simulation somewhat. Also with everything in C++ would add a layer of complexity compared to if it was in just C.
<br/>
<br/>
But, I think the main reason is just that the NDS simply isn't powerful enough for these types of calculations. Instead, for physics, it would be better to write a specialized engine instead of using a general one like this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69017 - acox - Sat Jan 28, 2006 12:03 am</h4>
    <div class="postbody"><span class="postbody">I just ran your demo. _Very_ cool stuff. Running floating point intensive code on a machine with no FPU is never gonna fly though.
<br/>
<br/>
Someone needs to code an engine in fixed point and it should be orders of magnitude faster. Vertlet integrator would be a good choice to put in its guts.<br/>_________________<br/><a class="postlink" href="http://www.btinternet.com/~ahcox/GBA/" target="_blank">3D on GBA</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69025 - arog - Sat Jan 28, 2006 1:01 am</h4>
    <div class="postbody"><span class="postbody">Here's a screen shot and a .nds version of the file.
<br/>
<br/>
<a href="http://www.aaronrogers.com/nintendods/files/ODScube.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
<a class="postlink" href="http://www.aaronrogers.com/nintendods/files/ODEcube.zip" target="_blank">http://www.aaronrogers.com/nintendods/files/ODEcube.zip</a>
<br/>
<br/>
- Aaron Rogers
<br/>
<a href="http://www.aaronrogers.com/nintendods/" target="_blank">http://www.aaronrogers.com/nintendods/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69036 - cybereality - Sat Jan 28, 2006 2:13 am</h4>
    <div class="postbody"><span class="postbody">Thats a cool demo. The performance isn't good enough to use in a game, but it does work and can be optimized. I am planning on doing some physics demos on the ds (maybe a library, who knows?). I've got a verlet intergrator I wrote in flash that should be portable to the ds. I figured that porting an opensource physics engine like ODE or Tokamak wasn't possible on ds. It seems that you proved me wrong. Even so, I think a custom physics library specifically built for the ds would attain better performance (at least I hope so). Anyway, nice job.<br/>_________________<br/><a class="postlink" href="http://www.cybereality.com" target="_blank">// cybereality</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69086 - DaRk_ViVi - Sat Jan 28, 2006 11:48 am</h4>
    <div class="postbody"><span class="postbody">Hmmm, I tried to run your demo but it doesn't started on my M3 CF (two white screens)...
<br/>
<br/>
Is it possible to run it on this flash?
<br/>
<br/>
Edit: Ok i fixed, i just had to press START instead of A to start a homebrew. :)
<br/>
<br/>
It's a great demo. :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69151 - tetsu - Sat Jan 28, 2006 8:43 pm</h4>
    <div class="postbody"><span class="postbody">Ah, of course, I'd totally forgotten about the lack of FPU. Well, that would explain it. Still I'm pretty sure you can't get away from floating point calculations when doing physics simulations, but maybe they can be kept at a minimum. I don't know anything about this 'Verlet integrator', but I'll look it up. 
<br/>
<br/>
Now, certainly ODE is a bit overkill for NDS, I made the demo mostly out of curiosity if it was possible to port both ODE and OPAL. I was expecting it to hold out longer though.
<br/>
<br/>
Now I just wonder how the collision detection in, for example, Mario DS works. From what I can see, there's a lot of box-on-trimesh checks every(?) frame. Well, I guess it's heavily optimized for these specific tasks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#69841 - octopusfluff - Thu Feb 02, 2006 9:02 am</h4>
    <div class="postbody"><span class="postbody">You can often use fixed point math in many places where you would normally use floating point. This obviously isn't useful if you don't know where your precision needs to be, but if you plan ahead you can usually get pretty good performance.
<br/>
For a general library like ODE, this might not work so well, but specific planned applications (i.e. commercial games with custom engines) tend to do it just fine.
<br/>
<br/>
As for the specific collision methods.. Mario 64 could just well be using bounding spheres. For the gameplay in question, that's all you really need.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130231 - jandujar - Fri Jun 01, 2007 7:37 am</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I'm trying to compile the ODE library for DS. But it seems something is wrong.
<br/>
<br/>
I have compiled the library opcode and then the library ode -&gt; fixing a lot of compilation errors.
<br/>
<br/>
I haved build an example called "ejemplo_ode2" that uses the library "ODE" but something is wrong. 
<br/>
<br/>
I made a square an a plane in the ground. I apply a gravitation and the square fall down, but when it touch the plane it does nothing. 
<br/>
<br/>
I hope somebody can help me.
<br/>
<br/>
Here are the source.,
<br/>
<a href="http://rapidshare.com/files/34203302/libode.tar.gz.html" target="_blank">http://rapidshare.com/files/34203302/libode.tar.gz.html</a>
<br/>
<br/>
Maybe tetsu can release the library compiled.<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130232 - OOPMan - Fri Jun 01, 2007 7:48 am</h4>
    <div class="postbody"><span class="postbody">Kudos for managing to actually get ODE up and running on the DS mate :-)
<br/>
<br/>
Alas, it isn't anywhere near to being a viable solution :-( But that's already been established :-)<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130236 - Ant6n - Fri Jun 01, 2007 10:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>octopusfluff wrote:</b></span></td> </tr> <tr> <td class="quote">...
<br/>
For a general library like ODE, this might not work so well, but specific planned applications (i.e. commercial games with custom engines) tend to do it just fine.
<br/>
...</td> </tr></table><span class="postbody">
<br/>
maybe one could still do a general library, if the user can define the maximum of variables (postion, velocity, force etc) as macros. if programmed right, one could then ensure that these values dont overflow. this seems like quite a hassle, though.
<br/>
another approach could be a custom floating point format, i.e. using two words, one as exponent (shift), and one as mantissa; and using a loose rule, like that the highest set bit in the mantissa only has to be in the highest byte, instead of the highest bit. one could also create vectors or matrizes that use the same exponent for all components or rows/columns (but one would need good precision on the mantissa then, i.e. 32 bit).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
