<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Help! Transparent Sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Help! Transparent Sprites</h2>
<div id="posts">
<div class="post">
    <h4>#132073 - yellowstar - Sat Jun 23, 2007 3:05 am</h4>
    <div class="postbody"><span class="postbody">I have two questions:
<br/>
<br/>
1.
<br/>
<br/>
I need some help with sprites.
<br/>
<br/>
I am trying to use transparent sprites.(sprites that have some pixels
<br/>
transparent.)
<br/>
<br/>
But, it(the NDS) will only display non-transparent sprites.(my sprites)
<br/>
<br/>
In other words,
<br/>
It(the NDS) will only display sprites(my sprites) with white behind it.(the sprite)
<br/>
<br/>
It looks the same on an emulator.
<br/>
<br/>
Messing with the palette didn't do anything.
<br/>
<br/>
It dosen't matter if the converted image(bmp/png) had an alpha channel
<br/>
or not.
<br/>
<br/>
I am using gbAmp to convert the image, in paletted tile mode.
<br/>
<br/>
I used gfx2gba to convert the palette.
<br/>
<br/>
2.
<br/>
<br/>
What option do I use with gfx2gba to output tiles?(for sprites.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132076 - mml - Sat Jun 23, 2007 3:47 am</h4>
    <div class="postbody"><span class="postbody">a) on sprites and most of your backgrounds, palette index 0 is your transparency, so transparent parts of your sprite graphic should be using palette index 0.  (it doesn't matter what colour is actually stored in the palette at this position.)
<br/>
<br/>
b) on the bottom-most background (don't remember offhand if this is bg3 or bg0, the internets will know), palette index 0 is the backdrop colour.
<br/>
<br/>
c) transparent pixels in sprites and the other backgrounds will show the nearest (in terms of rendering order) opaque pixel below them, or fall back to the backdrop colour if there aren't any.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132137 - yellowstar - Sat Jun 23, 2007 8:39 pm</h4>
    <div class="postbody"><span class="postbody">I found the index of the sprite's background color palette index.
<br/>
<br/>
I can change the background color of the sprite,
<br/>
but when I try to set the color to transparent,
<br/>
it dosen't do anything.
<br/>
<br/>
In other words,
<br/>
the  sprite still isn't transparent,.
<br/>
<br/>
I used to have the backgrounds in 16 bit mode,
<br/>
but I switched them to 8 bit mode.
<br/>
But now when I try to draw anything to the main bg,
<br/>
it won't draw anything, it just displays stuff on the bottom part of
<br/>
the screen.
<br/>
(It displays stuff on the bottom part of the top screen.)
<br/>
<br/>
I am not using 16 bit writes, I am using 8 bit writes.
<br/>
<br/>
I am drawing to the backgrounds in a for loop.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132142 - tepples - Sat Jun 23, 2007 9:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yellowstar wrote:</b></span></td> </tr> <tr> <td class="quote">I am not using 16 bit writes, I am using 8 bit writes.</td> </tr></table><span class="postbody">
<br/>
If you are writing to palette memory, VRAM, or OAM, you must use 16-bit or 32-bit writes, or the byte will be replicated into the low and high order bytes of a 16-bit unit.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132154 - yellowstar - Sat Jun 23, 2007 10:37 pm</h4>
    <div class="postbody"><span class="postbody">For the 8 bit writes,
<br/>
I meant only Backgrounds.
<br/>
<br/>
For the palette, I am using normal 16 bit writes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132158 - tepples - Sat Jun 23, 2007 11:01 pm</h4>
    <div class="postbody"><span class="postbody">Backgrounds are in VRAM. I stated 2 posts ago that VRAM does not like 8-bit writes.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132212 - yellowstar - Sun Jun 24, 2007 6:21 pm</h4>
    <div class="postbody"><span class="postbody">I got the background color for the main screen
<br/>
to display correctly.
<br/>
<br/>
But it still won't display the sprite the way I want it to.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132556 - yellowstar - Wed Jun 27, 2007 8:10 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, It works now!
<br/>
<br/>
I finally figured out that you
<br/>
meant that the hardware doesn't
<br/>
render pixels, on sprites which has
<br/>
palette index 0!
<br/>
<br/>
For setting the pixels that were supposed to be
<br/>
transparent in code,
<br/>
I was manually setting it with code after it loaded
<br/>
the image.
<br/>
But for some reason,
<br/>
it would not get rid of all the white pixels
<br/>
which were supposed to be transparent.
<br/>
<br/>
I gave up on that method,
<br/>
and wrote a PC program that
<br/>
would convert the white pixels
<br/>
that are supposed to be transparent,
<br/>
to palette index 0, so they would be transparent.
<br/>
<br/>
That worked!!!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
