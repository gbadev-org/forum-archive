<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>question about .grit files - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > question about .grit files</h2>
<div id="posts">
<div class="post">
    <h4>#165365 - afireohno - Thu Dec 18, 2008 4:57 am</h4>
    <div class="postbody"><span class="postbody">This is my first post on here, so bear with me. I've been trying to figure out as much as I can on my own but I've run into a road block and was hoping for some help. I've been building off of the orangeShuttle tutorial and have created a very simple platform demo with a sprite that runs, walks, and jumps on a black screen. 
<br/>
Anyway, as the next obvious step I'd like to add some background, but I'm not sure how to set up the .grit file to create a tiled background. Do I want each tile be a separate image file and have a separate map, or will grit break it up for me? As you can probably tell I'm a little lost at this point and am not quite sure if I'm even asking the right questions?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165384 - dovoto - Fri Dec 19, 2008 1:58 am</h4>
    <div class="postbody"><span class="postbody">Generally you will create a tiled background in some sort of tile map editor which will output data in a usable format.  For instance my own map editor will output each layer as a bitmap which i can then pass to grit to process.
<br/>
<br/>
Grit will take an image and from it build a tileset and a map and a palette.  It can do this per image or it can build a cumulative tileset from multiple images.  It can also take as an input a graphics file which contains your tiles (although this is not particularly useful).
<br/>
<br/>
<a href="http://www.coranac.com/man/grit/html/grit.htm" target="_blank">http://www.coranac.com/man/grit/html/grit.htm</a>  &lt;-- good place to start but here is a few examples of usage (as that area is marked todo for some reason ;) :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make a map, tileset and palette from layer.bmp
<br/>
<br/>
grit layer.bmp -mR8
<br/>
<br/>
(output map with normal optimizations and 8 bpp tiles, palette and graphics data are output by default and the graphics are tiled by default)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make a map per layer, a single tileset and single palette from layer1.bmp and layer2.bmp
<br/>
<br/>
grit layer1.bmp layer2.bmp -mR8 -pS -gSt
<br/>
<br/>
(same as above but process two layers and share the palette and tile graphics (not sure if the 't' is needed in -gSt but it signifies the graphics need to be tiled))
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The output from this process would be a header file such as this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define layerLen 256
<br/>
extern const unsigned char layerMap[256];
<br/>
<br/>
#define layerTilesLen 6976
<br/>
extern const unsigned int layerTiles[1744];
<br/>
<br/>
#define layerPalLen 512
<br/>
extern const unsigned short layerPal[256];
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The actual data comes in the form of an asm file which gets built with your project.  You can access the data with the above variables.
<br/>
<br/>
Hope this was of some help<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165389 - afireohno - Fri Dec 19, 2008 3:28 am</h4>
    <div class="postbody"><span class="postbody">O.K. Well I think I understand most of that. Let me make sure though. layerTiles[1744] contains data for 27.25??? 8X8 tiles and layerMap[256]  is map data for a map whose dimensions give a product of 256 * 8 (because each tile is 8X8 pixels). 
<br/>
My next question would involve collision detection, but I'll hold off on that until I know I've got it right so far.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165397 - dovoto - Fri Dec 19, 2008 2:48 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>afireohno wrote:</b></span></td> </tr> <tr> <td class="quote">O.K. Well I think I understand most of that. Let me make sure though. layerTiles[1744] contains data for 27.25??? 8X8 tiles and layerMap[256]  is map data for a map whose dimensions give a product of 256 * 8 (because each tile is 8X8 pixels). 
<br/>
My next question would involve collision detection, but I'll hold off on that until I know I've got it right so far.</td> </tr></table><span class="postbody">
<br/>
<br/>
It seems you might need a bit more help in starting out than would be appropriate in a forum post.  There are a couple tutorials which may do your issue a lot more justice.  I have a list of a few of them here:
<br/>
<br/>
<a class="postlink" href="http://www.drunkencoders.com/index.php?system_id=1&amp;page=Tutorials" target="_blank">http://www.drunkencoders.com/index.php?system_id=1&amp;page=Tutorials</a>
<br/>
<br/>
The first two are probably your best bet.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165400 - afireohno - Fri Dec 19, 2008 3:50 pm</h4>
    <div class="postbody"><span class="postbody">I have read those tutorials and after quickly glancing back I realize my error came from oversimplifying things, and probably not reading carefully enough. Anyway, I feel like quite the dolt and please excuse me as this is my first attempt at graphics programming and thanks for the help. I'll reread them.
<br/>
<br/>
On an unrelated note I had a question about using hFlip and vFlip with the new API.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165415 - dovoto - Fri Dec 19, 2008 10:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>afireohno wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
On an unrelated note I had a question about using hFlip and vFlip with the new API.</td> </tr></table><span class="postbody">
<br/>
<br/>
The api doesnt really do anything with the map data.  Your editor should properly set the flip attributes as appropriate durring export.  In the example above grit would do this for you.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165421 - afireohno - Sat Dec 20, 2008 12:02 am</h4>
    <div class="postbody"><span class="postbody">Sorry. I was jumping topics. I was asking about using it with sprites.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
