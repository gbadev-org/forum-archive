<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>RAM access speed - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > RAM access speed</h2>
<div id="posts">
<div class="post">
    <h4>#117926 - Risine - Thu Feb 08, 2007 7:15 pm</h4>
    <div class="postbody"><span class="postbody">I've got some real strange behaviour with RAM speed access.
<br/>
I'm creating a whole image in an allocated short array ( dst=new... ).
<br/>
and have something like :
<br/>
fnt toto
<br/>
{
<br/>
...
<br/>
for (each pixel) {
<br/>
...
<br/>
dst[y]=colour;
<br/>
}
<br/>
...
<br/>
}
<br/>
It takes really a very long time ( x2 ), compared to this :
<br/>
fnt toto
<br/>
{
<br/>
short temp[4]; // local test array
<br/>
...
<br/>
for (each pixel) {
<br/>
...
<br/>
temp[y&amp;3]=colour;
<br/>
}
<br/>
...
<br/>
}
<br/>
<br/>
How can it be possible?
<br/>
It takes more time writing this pixel in RAM, than reading it from ROM and treating it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117981 - Mighty Max - Thu Feb 08, 2007 11:51 pm</h4>
    <div class="postbody"><span class="postbody">The stack is in ITCM which can be accessed faster the wram or vram.
<br/>
<br/>
If you'd put the small array into wram, the second example would have still an advantage, as the cache would cover up the wram/vram slowness.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117997 - Risine - Fri Feb 09, 2007 12:55 am</h4>
    <div class="postbody"><span class="postbody">Well, I'm still estonished of the slowness of the RAM writing.
<br/>
The operation here:
<br/>
...
<br/>
dst[y]=colour; 
<br/>
...
<br/>
<br/>
takes many more time than reading the pixel from ROM and doing many things on it.
<br/>
...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118149 - Risine - Sat Feb 10, 2007 2:14 pm</h4>
    <div class="postbody"><span class="postbody">My DS exec. runs on a GBA EZ-Cart.
<br/>
I'm wondering, is it possible that the exec. runs at the speed of the gba ( for emulations purposes )?
<br/>
Because 48 cycles for a simple RAM writing is pretty huge, isn't it?
<br/>
<br/>
If this is the case, is there a way to make it work at the DS speed?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118345 - kusma - Mon Feb 12, 2007 10:55 am</h4>
    <div class="postbody"><span class="postbody">Actually, I think the biggest speed difference here is due to the 2-word array going immediately into cache.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
