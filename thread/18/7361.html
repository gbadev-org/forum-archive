<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Nintendo DS Wifi Hardware Reference - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Nintendo DS Wifi Hardware Reference</h2>
<div id="posts">
<div class="post">
    <h4>#59533 - chrissieboy - Wed Nov 02, 2005 2:11 pm</h4>
    <div class="postbody"><span class="postbody">Hi all!
<br/>
<br/>
I found this page : <a class="postlink" href="http://akkit.org/info/dswifi.htm" target="_blank">http://akkit.org/info/dswifi.htm</a>
<br/>
<br/>
But there isn't a library yet i think?
<br/>
<br/>
I found in libnds a wifi.h in the arm 7 directory
<br/>
<br/>
But there's almost nothing in here :(
<br/>
<br/>
Then i saw this :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
0x0304 - POWERCNT - ARM7 Power Control (R/W) 
<br/>
 Bit  Description
<br/>
  0   Sound Power
<br/>
  1   Wifi Power
<br/>
2-15  Unused
<br/>
<br/>
Set a bit to '1' to enable power to that system, '0' to disable. 
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
i think this is the hardware adres to put the wifi power on???
<br/>
<br/>
<br/>
then i saw this in the main code :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
POWERCNT |= 2;                                    -- Enable power to the wifi system
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
so it turns the power on.
<br/>
<br/>
So i in my code i made this :
<br/>
#define POWERCNT 	     0x0304
<br/>
<br/>
but i doesn't know if im doing it right?
<br/>
In sound.h i saw they define like this :
<br/>
<br/>
#define POWERCNT 			(*(vuint16*)(0x0304))
<br/>
<br/>
is this the right way?
<br/>
<br/>
Im trying to find documents about how this define works but i really don't understand it, what does vuint16* means??
<br/>
<br/>
Can somebody explain me , because i want to try connecting with my computer.
<br/>
<br/>
Thanx for your help!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59535 - Mollusk - Wed Nov 02, 2005 2:33 pm</h4>
    <div class="postbody"><span class="postbody">I think a sort of lib and an API should be out pretty soon, just be patient :)<br/>_________________<br/>PAlib official forum : <a class="postlink" href="http://www.palib.info" target="_blank">http://www.palib.info</a>
<br/>
PAlib official tutorials: <a class="postlink" href="http://www.palib.info/wiki" target="_blank">http://www.palib.info/wiki</a>
<br/>
Updates, help, code examples, tutorials, etc...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59537 - Mighty Max - Wed Nov 02, 2005 2:38 pm</h4>
    <div class="postbody"><span class="postbody">In the meantime, u could add the base to the offset, so you write to the desired address instead of the first few kB at 0x00000000.
<br/>
<br/>
The system-hardwarereg base is 0x04000000, the wifi hardwarereg base is 0x04800000 iirc.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59540 - chrissieboy - Wed Nov 02, 2005 2:51 pm</h4>
    <div class="postbody"><span class="postbody">okay,
<br/>
<br/>
but on top at the arm7 System Control Registers stand :
<br/>
<br/>
(System Control registers are accessed with a base of 0x04000000)
<br/>
<br/>
this is not the wifi i think?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
0x0304 - POWERCNT - ARM7 Power Control (R/W) 
<br/>
 Bit  Description
<br/>
  0   Sound Power
<br/>
  1   Wifi Power
<br/>
2-15  Unused
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
so i must make this i think :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define POWERCNT      (*(vuint16*)0x04000304)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
0x04000000 to access the system control register???
<br/>
and
<br/>
0x0304 where i can put on the wifi power on the arm7 i think?
<br/>
<br/>
and 
<br/>
vuint16 because it's 16 bits?
<br/>
<br/>
or am i totally wrong?? it must be this :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define POWERCNT      (*(vuint16*)0x04800304)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
or even this is totally wrong?
<br/>
<br/>
thanx for your help!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59542 - Mighty Max - Wed Nov 02, 2005 2:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">okay,
<br/>
<br/>
but on top at the arm7 System Control Registers stand :
<br/>
<br/>
(System Control registers are accessed with a base of 0x04000000)
<br/>
<br/>
this is not the wifi i think?
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
0x0304 - POWERCNT - ARM7 Power Control (R/W) 
<br/>
 Bit  Description
<br/>
  0   Sound Power
<br/>
  1   Wifi Power
<br/>
2-15  Unused
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
so i must make this i think :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define POWERCNT      (*(vuint16*)0x04000304)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
<br/>
That's correct. Remember that this register is ARM7 specific. Doing the same POWERCNT |= 2 on ARM9 will power up "2D Core A Power"<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59544 - chrissieboy - Wed Nov 02, 2005 3:10 pm</h4>
    <div class="postbody"><span class="postbody">sorry for my next stupid question :
<br/>
<br/>
(*(vuint16*)0x04000304)
<br/>
<br/>
what does (vuint16*) stands for????? 16 bit hex or something?
<br/>
<br/>
can't find anything on google about this :(
<br/>
<br/>
also never used it but know i want it to know :) !
<br/>
<br/>
and the next line on the code :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"> *((volatile u16 *)0x04000206) = 0x30;             -- unclear if this is necessary, or exactly what it does.
<br/>
</td> </tr></table><span class="postbody">
<br/>
gives an error : expected unqualified-id before 'volatile'
<br/>
<br/>
sorry but it's al very weird to me :(
<br/>
<br/>
thanx for all your help!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59547 - JaJa - Wed Nov 02, 2005 3:30 pm</h4>
    <div class="postbody"><span class="postbody">Sgstair won't release his libraries until monday at least.
<br/>
They will then have TCP/IP in them.
<br/>
He has however done all the documentation, so if anyone felt like writing thier own stack they could.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59549 - mike260 - Wed Nov 02, 2005 3:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
what does (vuint16*) stands for????? 16 bit hex or something?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
From libnds's nds/jtypes.h:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
typedef unsigned short int      uint16;
<br/>
typedef volatile uint16         vuint16;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But be aware that writing your own networking stack will be very, very, very difficult.<br/>_________________<br/>"Ever tried? Ever failed? No matter. Try Again. Fail again. Fail better."
<br/>
 -- Samuel Beckett</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59561 - chrissieboy - Wed Nov 02, 2005 6:14 pm</h4>
    <div class="postbody"><span class="postbody">hmm so i must also make my own tcp/ip ok i'll wait!!
<br/>
<br/>
I think im going to learn more advanced c++ i think!
<br/>
<br/>
thanx for all your help guys!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
