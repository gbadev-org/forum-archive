<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem with DevkitPro r19 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Problem with DevkitPro r19</h2>
<div id="posts">
<div class="post">
    <h4>#86945 - agentq - Sat Jun 10, 2006 9:55 pm</h4>
    <div class="postbody"><span class="postbody">I may have found a problem with DevkitPro r19.  It involves static initialised objects.
<br/>
<br/>
If I have an object such as this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">class Test {
<br/>
<br/>
public:
<br/>
   int a;
<br/>
<br/>
   Test(int a) {
<br/>
      this-&gt;a = a;
<br/>
   }
<br/>
};
<br/>
<br/>
Test foo(123);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then later print out the contents of foo.a, it's value is 0 rather than 123, as you might expect.
<br/>
<br/>
It seems as if the global object constructors are not being called.
<br/>
<br/>
I discovered this which trying to build ScummVM with r19.  Could this be an issue with my installation?  Could I have bits of an older version of DevkitPro around?  I installed it using the Windows installer and it seemed to go fine, and it's definately calling the new compiler.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86954 - wintermute - Sat Jun 10, 2006 11:22 pm</h4>
    <div class="postbody"><span class="postbody">Update to r19a :D<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86956 - agentq - Sat Jun 10, 2006 11:51 pm</h4>
    <div class="postbody"><span class="postbody">Ah.  Didn't realise there was a later devkitarm than was included in the devkitpro installer.  Can the installer not always download the latest version?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86973 - wintermute - Sun Jun 11, 2006 2:46 am</h4>
    <div class="postbody"><span class="postbody">It does download the latest version, obviously last time you updated 19a wasn't yet available.
<br/>
<br/>
I've noticed that occasionally the updater doesn't download the latest ini file which I guess is due to browser caching. I'm currently looking for a way to ensure the ini file isn't cached. FWIW the ini file was updated about 2 hours before you posted the first message in this thread so you probably hadn't updated since then.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#86975 - tepples - Sun Jun 11, 2006 3:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">I've noticed that occasionally the updater doesn't download the latest ini file which I guess is due to browser caching. I'm currently looking for a way to ensure the ini file isn't cached.</td> </tr></table><span class="postbody">
<br/>
Have it run a really short php script that just readfile's the INI, and then have the updater pass a random number.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">http://www.devkitpro.org/latest_ini.php?random=3141592654</td> </tr></table><span class="postbody">
<br/>
There are also cache controls in HTTP that your PHP script can send to specify when a given update expires.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#87043 - swimgod - Sun Jun 11, 2006 6:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">I've noticed that occasionally the updater doesn't download the latest ini file which I guess is due to browser caching. I'm currently looking for a way to ensure the ini file isn't cached.</td> </tr></table><span class="postbody">
<br/>
Have it run a really short php script that just readfile's the INI, and then have the updater pass a random number.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">http://www.devkitpro.org/latest_ini.php?random=3141592654</td> </tr></table><span class="postbody">
<br/>
There are also cache controls in HTTP that your PHP script can send to specify when a given update expires.</span></td> </tr></table><span class="postbody">
<br/>
something as simple as...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
&lt;?php
<br/>
$file = "/files/my.ini";//place the ini is...
<br/>
header('Cache-Control: no-cache, must-revalidate');
<br/>
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
<br/>
<br/>
if(is_file($file)){
<br/>
  @readfile($file);
<br/>
}else{
<br/>
  echo"Error, File not found.";
<br/>
}
<br/>
?&gt;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
this should work just find :P<br/>_________________<br/><span style="font-size: 9px; line-height: normal">
<br/>
1x <span style="font-weight: bold">WII</span> 2x remotes
<br/>
2x NDS/L(FMv7-ORG:v4,FMv7-org:DSL)
<br/>
1x GBAMP
<br/>
2x 1gb (MicroDrive{typeII}&amp;SanDisk{typeI})
<br/>
1x SuperPass2
<br/>
1x Supercard-CF</span>
<br/>
<a class="postlink" href="http://swimgod.com/ms_skins" target="_blank">MoonShell skins</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#87045 - tepples - Sun Jun 11, 2006 6:52 pm</h4>
    <div class="postbody"><span class="postbody">Almost. You'll want to check for the existence of the files before you send the HTTP headers so that you can do a proper 404 response if it is not found. And you'll want to get rid of the blank line above the &lt;?php .<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
