<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Altering contents of rotatable background bitmap - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Altering contents of rotatable background bitmap</h2>
<div id="posts">
<div class="post">
    <h4>#133924 - DrDerekDoctors - Mon Jul 09, 2007 9:05 pm</h4>
    <div class="postbody"><span class="postbody">Hello there! I'm using PALib to write a sprite editor for the DS, because it's like a wee little graphics tablet but with a cruddy resolution but the advantage of portability.
<br/>
<br/>
Anyhoo, I was doing it using a 16bit background bitmap which I drew rectangles onto to represent the zoomed pixels but this is obviously gonna' be REAL slow when I zoom out any distance and so it was suggested to me by a friend that I could use an 8-bit rotatey/zoomy background and then draw into *that* image and I'd get really speedy zooming for free with the slight caveat of only having a 256x256 canvas (although I can live with that just peachy, ta').
<br/>
<br/>
So, is it possible to create a blank rotatable bg image on the fly and then alter it? Only PALib seems happy enough to load one but you can't just declare one from scratch and then get a pointer to it's structure so you can mess with it, and it's palette. And that's precisely what I'd need to do.
<br/>
<br/>
Thanks for any pointers,
<br/>
<br/>
Graham</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133926 - bean_xp - Mon Jul 09, 2007 9:21 pm</h4>
    <div class="postbody"><span class="postbody">Yes, of course it's possible, I don't know anything about using libnds, but I have produced a similar application (although for GBA). 
<br/>
<br/>
I didn't use zooming in and out, but I was only working with 16x16 pixels, using that method I was able to display a 1x, 4x and 8x live preview of the image, by creating initial blank data then editing it on the fly.
<br/>
<br/>
Also because you are producing a sprite editor, I think it would be better to use a paletted mode (as apposed to bitmap mode) to cut down on amount of data and allow quick adjustments to colours throughout the image. But it is your app so your call.
<br/>
<br/>
If you want I can send you the source to see my implementation. (But please bear in mind it was a very early project of mine).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133933 - DrDerekDoctors - Mon Jul 09, 2007 9:38 pm</h4>
    <div class="postbody"><span class="postbody">My understanding of the 8-bit rotated background mode is that it is paletted, and is therefore ideal.
<br/>
<br/>
The only downside to using it that I can see, is that I can't easily have a grid drawn in as lines. I suppose I could use very thin elongated sprites for grid-lines, though. Although that's another complexity.
<br/>
<br/>
Is your source DS or GBA? I suspect that is it's GBA then unless it was an earlier PALib thing I doubt I'd learn from it as I've not ventured under the hood of the DS really.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133934 - bean_xp - Mon Jul 09, 2007 9:44 pm</h4>
    <div class="postbody"><span class="postbody">It's GBA source code using libgba, it will be very easy to port to DS and I was planning on doing so, but if you release yours I wont need to (because I'm working on another project now).
<br/>
<br/>
Oh and about getting under the hood, intimidating at first but much easier once you get used to it, in my opinion.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133936 - DrDerekDoctors - Mon Jul 09, 2007 9:48 pm</h4>
    <div class="postbody"><span class="postbody">Well I'll gladly take a squizz at it to see if there's an answer in there for me, but I suspect the use of a different library in it's making might flummox me.
<br/>
<br/>
If you can pop it over to <a href="mailto:contact@arsecast.com">contact@arsecast.com</a>, that'd prolly be the easiest address as it's gmail.
<br/>
<br/>
Thanks,
<br/>
<br/>
Graham</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133937 - HyperHacker - Mon Jul 09, 2007 9:50 pm</h4>
    <div class="postbody"><span class="postbody">You can have up to a 512x512 16-bit or paletted bitmap, but the former leaves very little VRAM for anything else. I think you can do 256x512 (or 512x256) too.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133939 - DrDerekDoctors - Mon Jul 09, 2007 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Aah, I was just about to say I found a demo in PALib which demostrates it (although it's naming is a bit ambiguous). Hurrah!
<br/>
<br/>
And 256x256x8bit is plenty, anyhoo, if I get free scaling from it. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133940 - bean_xp - Mon Jul 09, 2007 9:59 pm</h4>
    <div class="postbody"><span class="postbody">Oh Ok, I've sent you the source anyway just now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134021 - tepples - Tue Jul 10, 2007 3:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DrDerekDoctors wrote:</b></span></td> </tr> <tr> <td class="quote">I was doing it using a 16bit background bitmap which I drew rectangles onto to represent the zoomed pixels but this is obviously gonna' be REAL slow when I zoom out any distance and so it was suggested to me by a friend that I could use an 8-bit rotatey/zoomy background</td> </tr></table><span class="postbody">
<br/>
If you need 16-bit, you can still use a 16-bit rotatey/zoomy background by setting up mode 5 appropriately.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">So, is it possible to create a blank rotatable bg image on the fly and then alter it?</td> </tr></table><span class="postbody">
<br/>
Yes, but I don't know how to do so <span style="font-style: italic">in PALib.</span> Outside PALib, you can draw pixels to an extended rotation background and set the background's matrix to zoom in (set the texel increments less than 256/256, such as 64/256 for a 400% zoom) and pan to a given texel.
<br/>
<br/>
You can do the grid lines at at 400%, 800%, or 1600% zoom by using a text background on top of the extended rotation background. You can even make the grid lines semitransparent using the blend registers.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134047 - DrDerekDoctors - Tue Jul 10, 2007 9:34 am</h4>
    <div class="postbody"><span class="postbody">Ooh, that's interesting, Tepples, thanks. If I used the 16-bit one I might be able to keep the onion-skinning. I'll have to look into text mode to see if it could help with the grid-lines as they'd be at arbitrary locations due to being able to smoothly move the picture (not a texel at a time).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
