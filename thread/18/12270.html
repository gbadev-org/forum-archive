<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS Firmware Upacker - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DS Firmware Upacker</h2>
<div id="posts">
<div class="post">
    <h4>#116614 - chishm - Sat Jan 27, 2007 11:30 am</h4>
    <div class="postbody"><span class="postbody">For reasons that are too long to bother explaining now, I decided to write a firmware unpacker. That was over a week and a half ago. I finally finished it. So other people don't have to go through the same trouble, get <a class="postlink" href="http://chishm.drunkencoders.com/NDS_Projects/fwunpack.zip" target="_blank">fwunpack</a>.
<br/>
<br/>
What does it do?
<br/>
It decrypts and decompresses all the binaries (parts 1-5 and FlashMe stubs) from a firmware dump.
<br/>
<br/>
What use is it?
<br/>
To satisfy your curiousity. 
<br/>
<br/>
Can I make my own firmware with this?
<br/>
No, there is no repacker, but I suppose it isn't too hard to write one now. The worst bit would be writing the compressor for parts 3-5.
<br/>
<br/>
Thanks to:
<br/>
Martin Korth for GBATek, where I got the decryption algorithms.
<br/>
Pepsiman for his BIOS dumpers and firmware dumping in DSLinux.
<br/>
Loopy for answering all my questions and pointing me in the write direction, and for HB Firmware where I got the (now unused) LZ77 recompression code.
<br/>
Forgotten for the LZ77 decompression code taken from Visual Boy Advance.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116617 - Lick - Sat Jan 27, 2007 12:22 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">in the <span style="font-weight: bold">write</span> direction</td> </tr></table><span class="postbody">
<br/>
Hehe. Nice work Chishm. Oh here was my <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=107106#107106" target="_blank">rather sad attempt</a> (yes, I'm ashamed).<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116619 - chishm - Sat Jan 27, 2007 12:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lick wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">in the <span style="font-weight: bold">write</span> direction</td> </tr></table><span class="postbody">
<br/>
Hehe. Nice work Chishm. Oh here was my <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=107106#107106" target="_blank">rather sad attempt</a> (yes, I'm ashamed).</span></td> </tr></table><span class="postbody">
<br/>
Heh, Freudian slip (although it's not about my mother). Your attempt isn't too bad, it took me a few days to even get the part 1&amp;2 decryption working.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116630 - Lynx - Sat Jan 27, 2007 4:51 pm</h4>
    <div class="postbody"><span class="postbody">Wow.. good work.. Did you get that amazone wish list put together yet?<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116874 - Juglak - Tue Jan 30, 2007 4:42 pm</h4>
    <div class="postbody"><span class="postbody">I made something pretty similar to this... was a pain, but it works.
<br/>
<br/>
I've looked around for any existing code for compressing parts 3-5, but, couldnt find any.
<br/>
<br/>
Any luck on that front?
<br/>
<br/>
-J<br/>_________________<br/>My goodies: 1xDS Lite - Supercard Lite, DSi, Supercard DSONEi</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116931 - chishm - Wed Jan 31, 2007 3:33 am</h4>
    <div class="postbody"><span class="postbody">Nah, no luck. The compression looks to be Huffman-encoded LZ77-compressed data, possibly similar to DEFLATE. Apart from that, I haven't looked into it too much (moved onto another project).<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
