<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>About write a value to main Memory? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > About write a value to main Memory?</h2>
<div id="posts">
<div class="post">
    <h4>#117806 - alex_III - Wed Feb 07, 2007 6:42 pm</h4>
    <div class="postbody"><span class="postbody">i try to write a ds game trainer
<br/>
the trainer run before ds game
<br/>
i try to write a value to main Memory
<br/>
and tested it in DeSmuME it's working
<br/>
but in NO$GBA and my ds it's not working..weird
<br/>
i have no idea..this problem bothered me two days
<br/>
before write a value to main Memory have to do something?
<br/>
<br/>
<br/>
my codes
<br/>
<br/>
for example write 0x1 to 0x02110000
<br/>
<br/>
#define trainerflag (*(vuint32*)0x02110000)
<br/>
<br/>
while(1) 
<br/>
{
<br/>
 :
<br/>
if ( keys &amp; KEY_RIGHT )
<br/>
trainerflag=1;
<br/>
 :
<br/>
<br/>
}</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117807 - Lick - Wed Feb 07, 2007 6:56 pm</h4>
    <div class="postbody"><span class="postbody">0x2000000 to 0x2400000 is <span style="font-weight: bold">cached</span>. You need to flush the cache at the regions you're writing to. An easier method would be accessing the <span style="font-weight: bold">uncached</span> <span style="font-style: italic">mirror</span> (another instance of the same memory) at 0x2400000 to 0x2800000. It's basically the same piece of memory, but you don't need to worry about flushing.
<br/>
<br/>
You might also want to set the Main RAM access priority to the processor you are currently on. REG_EXEMEMCNT{0x04000204} bit15=0: arm9 priority, 1: arm7 priority. This should be 0 by default, and you can only change this register on the arm9.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117809 - alex_III - Wed Feb 07, 2007 8:16 pm</h4>
    <div class="postbody"><span class="postbody">It's working now!!!
<br/>
Big thanks to you Lick!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117813 - wintermute - Wed Feb 07, 2007 8:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lick wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
You might also want to set the Main RAM access priority to the processor you are currently on. REG_EXEMEMCNT{0x04000204} bit15=0: arm9 priority, 1: arm7 priority. This should be 0 by default, and you can only change this register on the arm9.</td> </tr></table><span class="postbody">
<br/>
<br/>
In general you shouldn't touch the ewram bus priority. The default arm7 core is kept out of this region by using the arm7 iwram for code and data so the arm9 is largely unaffected.
<br/>
<br/>
Messing with the  priority on this bus has been known to cause audio distortion. The default setting is ARM7 priority.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117819 - Lick - Wed Feb 07, 2007 9:41 pm</h4>
    <div class="postbody"><span class="postbody">Lick stands corrected.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
