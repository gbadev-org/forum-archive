<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Rebuilding libfat - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Rebuilding libfat</h2>
<div id="posts">
<div class="post">
    <h4>#162582 - RobinWatts - Fri Sep 05, 2008 1:36 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I've got an M3 DS Real here, with a RAM/Rumble pack. If I boot any program that uses libfat with the RAM/Rumble pack in, it starts to rumble.
<br/>
<br/>
I thought I might try to build myself my own version of libfat rather than relying on the one packaged with devkitARM, so I could try and track down what's causing this problem.
<br/>
<br/>
I've downloaded the sources, but when I try and build them, it tells me that I'm missing nds/ndstypes.h. I've looked all over the packages I've downloaded and can't for the life of me find this file.
<br/>
<br/>
I'm probably doing something really dim here, and have forgotten something vital... any hints? Anyone here managed to rebuild libfat themselves?
<br/>
<br/>
Thanks,
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162583 - Maxxie - Fri Sep 05, 2008 1:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>RobinWatts wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
I thought I might try to build myself my own version of libfat rather than relying on the one packaged with devkitARM, so I could try and track down what's causing this problem.</td> </tr></table><span class="postbody">
<br/>
<br/>
Doing a forum search can be much more helpfull.
<br/>
Cause and solution will be delivered without additional costs.<br/>_________________<br/><a class="postlink" href="http://nintendods.desperate-programmers.com/doku.php?id=wireless_io_map" target="_blank">Trying  to bring more detail into understanding the wireless hardware</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162591 - RobinWatts - Fri Sep 05, 2008 3:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Maxxie wrote:</b></span></td> </tr> <tr> <td class="quote">Doing a forum search can be much more helpfull.
<br/>
Cause and solution will be delivered without additional costs.</td> </tr></table><span class="postbody">
<br/>
<br/>
I have searched. I couldn't find the answer, hence the posting.
<br/>
<br/>
Now, I'm quite prepared to believe I've overlooked something blindingly obvious, in which case I'm very sorry and I apologise for wasting everyones time and bandwidth.
<br/>
<br/>
Nonetheless, I still can't find it - could you maybe point me at the blindingly obvious thing I've missed please?
<br/>
<br/>
Thanks,
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162594 - Maxxie - Fri Sep 05, 2008 4:19 pm</h4>
    <div class="postbody"><span class="postbody">Points to alternative drivers:
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=14653&amp;highlight=fat+rumble" target="_blank">http://forum.gbadev.org/viewtopic.php?t=14653&amp;highlight=fat+rumble</a>
<br/>
<br/>
But there is a thread somewhere around that tells you which of the default drivers is causing this problem with the rumble if it tries to detect the card.
<br/>
Iirc it is the M3SD with sdram which rumbles, just disable it .<br/>_________________<br/><a class="postlink" href="http://nintendods.desperate-programmers.com/doku.php?id=wireless_io_map" target="_blank">Trying  to bring more detail into understanding the wireless hardware</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162600 - RobinWatts - Fri Sep 05, 2008 6:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Maxxie wrote:</b></span></td> </tr> <tr> <td class="quote">Points to alternative drivers:
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=14653&amp;highlight=fat+rumble" target="_blank">http://forum.gbadev.org/viewtopic.php?t=14653&amp;highlight=fat+rumble</a>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, but none of the drivers mentioned there are for the M3 DS Real, right?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
But there is a thread somewhere around that tells you which of the default drivers is causing this problem with the rumble if it tries to detect the card.
<br/>
Iirc it is the M3SD with sdram which rumbles, just disable it .</td> </tr></table><span class="postbody">
<br/>
<br/>
How do I disable it without rebuilding libfat?
<br/>
<br/>
How does that help when I get prebuilt apps from other people? Long term someone needs to fix libfat so that it doesn't trigger the rumble - I was hoping that I could have a go at doing that.
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162612 - Maxxie - Fri Sep 05, 2008 10:07 pm</h4>
    <div class="postbody"><span class="postbody">So with "rebuilding an own version of libfat" you mean build libfat yourself with your settings instead of building really an own version?
<br/>
<br/>
Sorry then, i missunderstood you as someone who wants to invent the wheel another time.
<br/>
<br/>
To disable the build in interfaces in libfat, remove their entries in source/disc_io/disc.c's ioInterface array.
<br/>
<br/>
If you want a patcher that works on allready compiled binaries, search for this array in memory (search for the device type IDs in their characteristic distance&amp;order) and overwrite everyone but the dldi with the dldi entry. (Or something that is identified as invalid)<br/>_________________<br/><a class="postlink" href="http://nintendods.desperate-programmers.com/doku.php?id=wireless_io_map" target="_blank">Trying  to bring more detail into understanding the wireless hardware</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162613 - RobinWatts - Fri Sep 05, 2008 10:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Maxxie wrote:</b></span></td> </tr> <tr> <td class="quote">So with "rebuilding an own version of libfat" you mean build libfat yourself with your settings instead of building really an own version?
<br/>
<br/>
Sorry then, i missunderstood you as someone who wants to invent the wheel another time.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
As I said in my first post, I've got the sources to libfat - I just want to be able to rebuild them.
<br/>
<br/>
When I do make, I immediately hit problems with missing files, nds/ndstypes.h for example.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
To disable the build in interfaces in libfat, remove their entries in source/disc_io/disc.c's ioInterface array.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Presumably you've got a copy that you can build successfully then? Which means that you have nds/ndstypes.h? Where did you get it? What package is it in?
<br/>
<br/>
Thanks,
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162615 - zeruda - Sat Sep 06, 2008 12:24 am</h4>
    <div class="postbody"><span class="postbody">That's an incorrect line.
<br/>
replace #include &lt;nds/ndstypes.h&gt;
<br/>
with 
<br/>
#include &lt;nds/jtypes.h&gt;
<br/>
<br/>
I assume you've installed devkitpro. Go to the folder \devkitPro\libnds. All the libnds header files like jtypes.h are there so you can look through them to see how things work. Documentation for libnds is at <a href="http://libnds.devkitpro.org/dirs.html" target="_blank">http://libnds.devkitpro.org/dirs.html</a> as well.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
