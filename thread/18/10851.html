<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>fscan - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > fscan</h2>
<div id="posts">
<div class="post">
    <h4>#98873 - dustin - Fri Aug 18, 2006 5:07 am</h4>
    <div class="postbody"><span class="postbody">Hi I have looked and I can't seem to find any type of fscan in Chism's Fat library.  Is there another library/ another version of Chism's I should be using that has fscan. If not I assume I should just make my own way of reading a .txt document into an array correct?  There is not some other function I missed that does what I want is there?  Thanks<br/>_________________<br/><a href="http://www.thrivepresents.com" target="_blank">www.thrivepresents.com</a>
<br/>
palib.dustin.info</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98874 - tepples - Fri Aug 18, 2006 5:16 am</h4>
    <div class="postbody"><span class="postbody">gba_nds_fat or libfat?
<br/>
<br/>
It's not so hard: fopen() the file, find the size of the file using fstat() or something similar, malloc() enough room, fread() it as one chunk, fclose(), and you're done.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98877 - GPFerror - Fri Aug 18, 2006 5:27 am</h4>
    <div class="postbody"><span class="postbody">this is what I did for fscanf for use with fatlib
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int      FAT_fscanf(FAT_FILE *kf, const char *fmt, ...)
<br/>
{      
<br/>
      char line[256];
<br/>
      int i;
<br/>
      va_list args; 
<br/>
      FAT_fgets(line, 255, kf);
<br/>
      va_start(args, fmt); 
<br/>
      i=vsscanf (line, fmt, args);
<br/>
      va_end(args);
<br/>
      
<br/>
      return i;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
<br/>
Troy(GPF)
<br/>
<a class="postlink" href="http://gpf.dcemu.co.uk" target="_blank">http://gpf.dcemu.co.uk</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98878 - dustin - Fri Aug 18, 2006 5:28 am</h4>
    <div class="postbody"><span class="postbody">gba_nds_fat at the moment.  The reason I was trying to use fscan is that I have a text document that is a series of numbers divided by , .  If I used something like fscan I could say %d,%d,%d... and get an array without having to deal with ASCI or anything.  Maybe I'm mistaken, is something like that not do able in fscan normally?  By just freading it in I'll have to convert the ASCI numbers into there corresponding int's right?  Sorry if that doesn't make sense I might be misunderstanding something.
<br/>
<br/>
Edit: GPFerror explained it while I was typing up my post.<br/>_________________<br/><a href="http://www.thrivepresents.com" target="_blank">www.thrivepresents.com</a>
<br/>
palib.dustin.info</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98888 - sajiimori - Fri Aug 18, 2006 8:00 am</h4>
    <div class="postbody"><span class="postbody">Incidentally, real games don't normally store numbers as strings of ASCII digits.  It's better to store them as binary values.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98901 - chishm - Fri Aug 18, 2006 10:50 am</h4>
    <div class="postbody"><span class="postbody">libfat has fscan by extension from newlib.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98940 - dustin - Fri Aug 18, 2006 4:53 pm</h4>
    <div class="postbody"><span class="postbody">excellent I'll be sure to check libfat out.  Sajiimori the reason I am using strings to store numbers is for easy level creation.  It's a puzzle game (masyu), and it seemed to me the easiest way for myself and/or other people to make puzzles would be to edit a text document.  This will also hopefully make it easy to add new levels to the game without having to recompile or anything.  Is there some better way you think I should consider doing it?<br/>_________________<br/><a href="http://www.thrivepresents.com" target="_blank">www.thrivepresents.com</a>
<br/>
palib.dustin.info</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98948 - tepples - Fri Aug 18, 2006 5:35 pm</h4>
    <div class="postbody"><span class="postbody">Make an editor in the Java programming language that can read and write the binary puzzle files that your game uses.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98954 - sajiimori - Fri Aug 18, 2006 6:13 pm</h4>
    <div class="postbody"><span class="postbody">If a text editor is good enough as a level editing interface, I'd still suggest at least writing a preprocessor that converts the text to binary.
<br/>
<br/>
The best format is one that lets you fread straight into your data structures, without any runtime reformatting.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98959 - tepples - Fri Aug 18, 2006 7:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">The best format is one that lets you fread straight into your data structures, without any runtime reformatting.</td> </tr></table><span class="postbody">
<br/>
Unless you want to use the same data files on platforms with big-endian (GameCube, Power Mac, Xbox 360, PS3, Wii) and little-endian (PC, GBA, PS2, Xbox, DS, Intel Mac) CPUs. Or unless you have data structures more complicated than arrays of structs, in which case you may have to relocate the pointers.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98998 - sajiimori - Fri Aug 18, 2006 11:52 pm</h4>
    <div class="postbody"><span class="postbody">I'd recommend producing different binaries for different platforms where appropriate.
<br/>
<br/>
It's true that runtime preprocessing can be useful.  Replacing indexes with pointers at load time can be a helpful optimization, especially if there are multiple levels of indirection.
<br/>
<br/>
And of course, compression is a way to save ROM space at the cost of extra preprocessing.
<br/>
<br/>
That said, my collision file format has multiple sections and variable-length structures of several kinds, but it's designed to be used verbatim.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99038 - tepples - Sat Aug 19, 2006 5:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sajiimori wrote:</b></span></td> </tr> <tr> <td class="quote">I'd recommend producing different binaries for different platforms where appropriate.</td> </tr></table><span class="postbody">
<br/>
True, but "where appropriate" will shrink as players start to expect cross-platform online features.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
