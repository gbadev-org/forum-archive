<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>AlphaChannel-Textures with varying transparency in2D/3D - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > AlphaChannel-Textures with varying transparency in2D/3D</h2>
<div id="posts">
<div class="post">
    <h4>#117351 - syncope - Sun Feb 04, 2007 2:12 am</h4>
    <div class="postbody"><span class="postbody">Hallo World !,
<br/>
<br/>
Ok I've serched and searched, here and in all the places I could make sense of.
<br/>
Maybe the feature is just not well documented, but could it indeed not have been reverse engineered yet at all ?
<br/>
<br/>
<br/>
Using an Alphachannel/Mask with soft AND strong Transparencies on an image &gt;&gt;
<br/>
<br/>
like so !
<br/>
<a href="http://img226.imageshack.us/img226/7963/quadsp1.png">[Images not permitted - Click here to view it]</a>
<br/>
<a href="http://img68.imageshack.us/img68/3401/desiredresulttb7.png">[Images not permitted - Click here to view it]</a>
<br/>
Doing this on a sprite
<br/>
and a textured quad
<br/>
<br/>
<br/>
<br/>
I've certainly seen it plenty of times in commercial games,  but perhaps I'm just imagining having seen it in homebrew also.
<br/>
Electroplankton is full of it for example, in both 2D and 3D.
<br/>
<a href="http://img226.imageshack.us/img226/6937/planktonexamplesmx0.jpg">[Images not permitted - Click here to view it]</a>
<br/>
[I guess for the creatures which are made of polygons, as seen in screens 3, 4 and 8 - they used a transparency lookuptable or 1D texture, similar to the DS-style toonshading . Strong banding is noticable when looking at these on hardware.]
<br/>
<br/>
<br/>
Without resorting to sortware blending, for which frankly I'm to inexperienced with programming, how can this be done ? Seems like the hardware supports it with ease.
<br/>
<br/>
Please feel free to take the supplied test graphics for a spin
<br/>
<a class="postlink" href="http://www.filefactory.com/dlf/f/831df5/b/8/h/3fbd10f526948a2f/j/1170548934" target="_blank">http://www.filefactory.com/dlf/f/831df5/b/8/h/3fbd10f526948a2f/j/1170548934</a>
<br/>
[PNG &amp; PCX files]
<br/>
<br/>
If this is just an oversight on my part, lets simlpy make this thread a place where concise approaches to to handling this issue can be found.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117368 - Sausage Boy - Sun Feb 04, 2007 10:16 am</h4>
    <div class="postbody"><span class="postbody">It's in fact very easy. Assuming you have 3D set up and working, you'll need to add this to your 3D code. The glEnable(GL_BLEND) needs to be ran every frame, I don't know about the other one.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glEnable(GL_BLEND);
<br/>
glAlphaFunc(BLEND_ALPHA);</td> </tr></table><span class="postbody">
<br/>
<br/>
You'll also need a way to convert your textures to use the alpha format. You can either write a converter yourself, information about the formats can be found at <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#ds3dtextureformats" target="_blank">GBATEK</a>.
<br/>
<br/>
You can also use one of the existing texture converters, my <a class="postlink" href="http://thewaffleiron.net/public/SausageBoy/texmex-003.zip" target="_blank">texmex</a> or the <a class="postlink" href="http://www.nomadteam.com/" target="_blank">Nomad Texture Converter</a>. Mine has a nice feature if you want to use your image editing program to reduce the palette, but still get all the alpha levels, search the board for texmex to find out how to use it. On the other hand, they have a nice GUI. Choose whichever you prefer.
<br/>
<br/>
Now, it's just a matter of loading those textures like regular paletted textures.
<br/>
<br/>
<br/>
Edit: Oops, I lied about when to run the commands, fixed now.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117725 - syncope - Tue Feb 06, 2007 11:39 pm</h4>
    <div class="postbody"><span class="postbody">Very cool, very resourcefull ! Thank you Sausage Boy.
<br/>
looking into it now.
<br/>
<br/>
Anyone have a hunch or suggestions on how to compliment this with a Sprite-based 2D method ? Or if that's actually not possible/feasible.
<br/>
<br/>
[I'll post example-screenshots of that here, should I come across any]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117730 - Lick - Wed Feb 07, 2007 12:18 am</h4>
    <div class="postbody"><span class="postbody">As far as I know, with 2D sprites you can only change the 'transparency' of a layer. You could change it per scanline, but even then the result would differ from what you try to do, and it would be a lot of messy code. 
<br/>
You are better off doing it in 3D. (But beware of 3D hardware-related bugs in libnds.)<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117746 - syncope - Wed Feb 07, 2007 2:25 am</h4>
    <div class="postbody"><span class="postbody">Thanks again
<br/>
[also for the word of warning]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117805 - Sausage Boy - Wed Feb 07, 2007 6:03 pm</h4>
    <div class="postbody"><span class="postbody">A good example of using the 3d hardware for 2d can be found in my <a class="postlink" href="http://thewaffleiron.net/public/SausageBoy/BearAttack-1.01.zip" target="_blank">Bear Attack</a>. The point is to stay alive as long as possible. Note the smooth edges and nicely transparent explosions. If you stay alive long enough, you'll also see the entire screen covered with bears, something that just wouldn't be possible with the regular 2d hardware. Also, any game with a bear monitor simply wins (if you don't think it's working, you didn't survive long enough).
<br/>
<br/>
As for the source, what you might want to look at can be found in Userview.cpp (feel free to use the whole thing or parts of it, under whatever license you feel comfortable with). There's some good stuff in Factory.cpp as well, even though it's a horrible example of what you absolutely shouldn't do (put a little of everything in a class).<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
