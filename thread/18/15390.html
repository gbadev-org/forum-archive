<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Simplified alpha blending question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Simplified alpha blending question</h2>
<div id="posts">
<div class="post">
    <h4>#154517 - abszero - Thu Apr 17, 2008 5:09 am</h4>
    <div class="postbody"><span class="postbody">Does the DS' alpha blending system allow for a top layer to blend with all the layers and sprites below it?
<br/>
<br/>
My understanding is that it does if you use something like 
<br/>
BLEND_CR = BLEND_ALPHA | BLEND_SRC_BG0 | BLEND_DST_BG1 | BLEND_DST_BG2 | BLEND_DST_BG3 | BLEND_DST_SPRITE
<br/>
<br/>
assuming BG0 is the top layer and sprites have an appropriate priority.
<br/>
<br/>
Is that correct?  Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154518 - eKid - Thu Apr 17, 2008 5:18 am</h4>
    <div class="postbody"><span class="postbody">That's right, but you also have to set the blending factors in BLEND_AB
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
BLEND_AB = 0x0808;
<br/>
</td> </tr></table><span class="postbody">
<br/>
The two bytes in this register are the values affect the first and second alpha blending targets. The value ranges from 0-&gt;16 so 8 and 8 will blend the targets half-half. A value of 0x1010 will simply add the pixels together.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154557 - abszero - Fri Apr 18, 2008 3:08 am</h4>
    <div class="postbody"><span class="postbody">Mhm, I'm doing that as well, and yet I still get inexplicable color saturation...
<br/>
<br/>
I'm trying to make a transparent -say 50% for simplicity- blue overlay for the entire screen basically.   I can achieve the correct effect by adjusting all the palette entries (averaging them with the desired color) but that won't work long term. However, using blending with the same effective alpha value (0x0808) gives me an entirely different effect, reducing the screen to an apparent palette of two or three shades of blue.  This number seems independent of the blend value, so I don't think it's a numeric precision issue, but I guess it might be somehow.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
