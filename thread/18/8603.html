<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How many chips are used in the flash cartridge(SD ver)? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > How many chips are used in the flash cartridge(SD ver)?</h2>
<div id="posts">
<div class="post">
    <h4>#72091 - swzte - Thu Feb 16, 2006 10:09 am</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">As we all know,the flash cartridge supporting SD usually include sram , flash, cpld and sdram etc. Who can explain the use  of every part? Thanks a lot. </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72093 - chishm - Thu Feb 16, 2006 10:17 am</h4>
    <div class="postbody"><span class="postbody">SD Port: Used to interface to an SD card to read data.
<br/>
Flash: Stores the firmware.
<br/>
SDRAM: Stores loaded data to emulate a GBA cart
<br/>
CPLD: The "controller". It is what switches between the other devices based on commands from the host (GBA or DS console).<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72094 - swzte - Thu Feb 16, 2006 10:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">SD Port: Used to interface to an SD card to read data.
<br/>
Flash: Stores the firmware.
<br/>
SDRAM: Stores loaded data to emulate a GBA cart
<br/>
CPLD: The "controller". It is what switches between the other devices based on commands from the host (GBA or DS console).</td> </tr></table><span class="postbody">
<br/>
<br/>
I have a question about SDRAM. What's the meaning of the loaded data you metioned above?It's the program data or other data? If it's program data, why not directly copy the data from SD card to the main ram of DS. Besides,  the size of SDRAM is usually 32M bytes and if the nds game is bigger than 32M byte, not all data can be loaded into the SDRAM.Is it right?Thanks a lot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72099 - FluBBa - Thu Feb 16, 2006 12:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">SDRAM: Stores loaded data to emulate a GBA cart</td> </tr></table><span class="postbody">
<br/>
<br/>
Most (if not all) of the current "DS" flashcarts where made with the GBA in mind so they include RAM (up to 32MB) to support GBA games, it's not used to hold the entire DS game, maybe used as a read cache or something.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72152 - The 9th Sage - Thu Feb 16, 2006 7:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FluBBa wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Most (if not all) of the current "DS" flashcarts where made with the GBA in mind so they include RAM (up to 32MB) to support GBA games, it's not used to hold the entire DS game, maybe used as a read cache or something.</td> </tr></table><span class="postbody">
<br/>
<br/>
At least with the M3, smaller NDS games you actually can load them totally into RAM.<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72210 - swzte - Fri Feb 17, 2006 1:45 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Most (if not all) of the current "DS" flashcarts where made with the GBA in mind so they include RAM (up to 32MB) to support GBA games, it's not used to hold the entire DS game, maybe used as a read cache or something.</td> </tr></table><span class="postbody">
<br/>
When analyzing ndsmall.s(from CVS), we can find that this little program only copy the arm7 program and the arm9 program to main ram and shared ram respectively. However, the main ram is only 4M bytes and the shared ram is only 32k bytes.When adding ndsmall.s to a 32M bytes ds game, it can run very well. Why?Who can give an explanation?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72234 - knight0fdragon - Fri Feb 17, 2006 3:32 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FluBBa wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote">SDRAM: Stores loaded data to emulate a GBA cart</td> </tr></table><span class="postbody">
<br/>
<br/>
Most (if not all) of the current "DS" flashcarts where made with the GBA in mind so they include RAM (up to 32MB) to support GBA games, it's not used to hold the entire DS game, maybe used as a read cache or something.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
i always assumed that the DS executable was loaded into the ram and it treats the rest of the data like files you would grab off the HDD
<br/>
<br/>
<br/>
lookin at an example RE loads in at 1426 and the arm7 and arm9 total is ~ 1426<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72236 - tepples - Fri Feb 17, 2006 3:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>knight0fdragon wrote:</b></span></td> </tr> <tr> <td class="quote">i always assumed that the DS executable was loaded into the ram and it treats the rest of the data like files you would grab off the HDD</td> </tr></table><span class="postbody">
<br/>
This is correct, but some CF cards are slower than DS Game Cards, so the adapters' piracy patches read the first 256 Mbit of the game into RAM for faster access. If you want to learn more about this process, go ask at Pocket Heaven.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72239 - swzte - Fri Feb 17, 2006 3:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>knight0fdragon wrote:</b></span></td> </tr> <tr> <td class="quote">i always assumed that the DS executable was loaded into the ram and it treats the rest of the data like files you would grab off the HDD</td> </tr></table><span class="postbody">
<br/>
This is correct, but some CF cards are slower than DS Game Cards, so the adapters' piracy patches read the first 256 Mbit of the game into RAM for faster access. If you want to learn more about this process, go ask at Pocket Heaven.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
<span style="font-weight: bold">Ok! Thanks everybody here. After the ds executable is loaded into main ram the PC pointer is set to ARM7 entry. The game runs and the CPU control is given to the ds executable. However, if the executable size is bigger than 256 Mbit. how to do with the rest data other than the fisrt 256 Mbit which is loaded in to the ram.  </span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72241 - tepples - Fri Feb 17, 2006 4:01 am</h4>
    <div class="postbody"><span class="postbody">So that we can give you the most relevant response, what do you intend to do with this information?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72244 - swzte - Fri Feb 17, 2006 4:15 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">So that we can give you the most relevant response, what do you intend to do with this information?</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Oh I'm a newbie to DS. After a look into the pin definition of the GBA cart, I think at most 256 Mbit game can run in the GBA cart. But I know I am wrong because many kinds of carts support games bigger than 256 Mbit. Howeber, I'm still wonder about the trick.Can you give an explanation?Thanks a lot!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72246 - tepples - Fri Feb 17, 2006 5:06 am</h4>
    <div class="postbody"><span class="postbody">Three methods: <ol type="1"><li>Bankswitching (common on NES and GB, not so much on official GBA games; use on GBA is primarily in unlicensed flash carts designed to hold multiple programs) - see <a class="postlink" href="http://en.wikipedia.org/wiki/Bank_switching" target="_blank">article at Wikipedia</a> and <a class="postlink" href="http://wiki.pocketheaven.com/Bank_switching" target="_blank">article at PHWiki</a> </li><li>Loading things from CF into RAM </li><li>Streaming directly from CF </li></ol><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
