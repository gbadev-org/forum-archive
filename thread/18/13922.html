<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Weird color issues... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Weird color issues...</h2>
<div id="posts">
<div class="post">
    <h4>#137617 - calcprogrammer1 - Tue Aug 14, 2007 1:08 am</h4>
    <div class="postbody"><span class="postbody">I was working on my program, and when I added a 16 color background on BG 2, my back gif image corrupted.
<br/>
<br/>
It ran fine with BG3 being the 16bit image and bg1 being the keyboard (no bg 1 on top screen, BG 2 for text, and sprites).  Then when I went to use normal text, it gave me some random error, so I decided to change 16bit to 8 bit backgrounds.  The picture shows up as having an 8 bit depth in Windows, but when I use it, I get some random issues.  Gimp says there is no RED in the palette, (how do you use palettes in Gimp anyways, or another free program).
<br/>
<br/>
<a href="http://img143.imageshack.us/img143/6943/colorerrorhz7.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
EDIT:
<br/>
<br/>
Weird, If I remove the init 16 color BG 2 on the bottom screen (using it for 16cText), then it doesn't affect, but the top screen is still messed up (it's using BG2 for 16cText as well, still enabled).<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"><br/><br/>Last edited by calcprogrammer1 on Tue Aug 14, 2007 1:12 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#137618 - tepples - Tue Aug 14, 2007 1:11 am</h4>
    <div class="postbody"><span class="postbody">In GIMP 2, palettes show up in the Colormap window: File &gt; Dialogs &gt; Colormap.
<br/>
<br/>
If an image has 1-bit transparency, the palette entry assigned to the transparent color might show up as the background color. What is the value of BG_PALETTE[0] (or whatever PALib calls it)?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137620 - calcprogrammer1 - Tue Aug 14, 2007 1:31 am</h4>
    <div class="postbody"><span class="postbody">I opened the Color map in Gimp (I have GIMP 2), and also I have Desmume open showing the problem.
<br/>
<br/>
Top screen has the problem, it uses BG3 for image, BG2 for 16c text, it worked fine as 16bit though (with text).
<br/>
<br/>
Bottom screen doesn't have the problem, it's 8 bit BG3 for the picture, no BG2, and BG1 is keyboard.
<br/>
<br/>
<a href="http://img406.imageshack.us/img406/1296/colorerror2yl8.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
EDIT:
<br/>
<br/>
When I turn of BG3 (the image) on bottom screen, 16c text works, as does sprites and the keyboard:
<br/>
<br/>
<a href="http://img338.imageshack.us/img338/7821/colorerror3ji9.jpg">[Images not permitted - Click here to view it]</a><br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137621 - calcprogrammer1 - Tue Aug 14, 2007 2:19 am</h4>
    <div class="postbody"><span class="postbody">Nevermind...the PA_LoadGif function must have loads of bugs or something, PAlib doesn't seem very stable, lots of bugs that shouldn't even be there in the first place.
<br/>
<br/>
But anyways, the PA_LoadEasyBG() function helped, though I had to convert my background rather than use GIF.<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
