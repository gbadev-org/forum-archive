<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Color conversion issue - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Color conversion issue</h2>
<div id="posts">
<div class="post">
    <h4>#88378 - Lazy1 - Mon Jun 19, 2006 3:50 am</h4>
    <div class="postbody"><span class="postbody">I have 2 16 color backgrounds in mode 0, the first one is clouds and the second one is mountains.
<br/>
I guess some darker colours were set to black during the conversion of the mountain image which is causing holes which show the sky behind the mountain.
<br/>
<br/>
Demo of this in action:
<br/>
<a class="postlink" href="http://lazyone.drunkencoders.com/2d.nds" target="_blank">http://lazyone.drunkencoders.com/2d.nds</a>
<br/>
<br/>
Another issue is where to get/how to make ground tiles.
<br/>
Think terrain viewed from the side, but with hills instead of being completely flat.
<br/>
<br/>
I cheated by using a gimp filter for the clouds and terragen for the mountain background, but I have no idea how I'd make a sidescroller terrain.
<br/>
Any thoughts are appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88381 - tepples - Mon Jun 19, 2006 4:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">I have no idea how I'd make a sidescroller terrain.</td> </tr></table><span class="postbody">
<br/>
Go play some NES platformers for a while. Then go play one of the <span style="font-style: italic">Sonic</span> games for Mega Drive/Genesis or the <span style="font-style: italic">Donkey Kong Country</span> games for Super NES.
<br/>
<br/>
Give us a screenshot of what you want the terrain to look like, and we might be able to show you how to draw it.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88382 - Lazy1 - Mon Jun 19, 2006 4:09 am</h4>
    <div class="postbody"><span class="postbody">Thats exactly what I'm looking for, sonic the hedgehog style ground.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88384 - tepples - Mon Jun 19, 2006 4:18 am</h4>
    <div class="postbody"><span class="postbody">The underlying terrain in <span style="font-style: italic">Sonic 2</span> consists of 16x16 pixel squares, each with its own collision data.
<br/>
<br/>
This <a class="postlink" href="http://pinocchio.jk0.org/gbaforum/slope.png" target="_blank">illustration</a> will get your mind working on various algorithms. From left to right: <ul><li>Curved surface from a <span style="font-style: italic">Sonic</span> game. </li><li>The 16x16 squares that make up this surface. </li><li>An approximation of this surface with line segments. </li><li>The line segments alone. </li></ul><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88385 - Lazy1 - Mon Jun 19, 2006 4:26 am</h4>
    <div class="postbody"><span class="postbody">Ok, I'll have to think about how I'm going to draw that then.
<br/>
But are there any solutions to the transparency problems I'm having?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88386 - tepples - Mon Jun 19, 2006 4:27 am</h4>
    <div class="postbody"><span class="postbody">Render a pink sky behind the mountain, and then move pink to color 0.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88402 - PeterM - Mon Jun 19, 2006 9:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">The underlying terrain in <span style="font-style: italic">Sonic 2</span> consists of 16x16 pixel squares, each with its own collision data.
<br/>
<br/>
This <a class="postlink" href="http://pinocchio.jk0.org/gbaforum/slope.png" target="_blank">illustration</a> will get your mind working on various algorithms. From left to right: <ul><li>Curved surface from a <span style="font-style: italic">Sonic</span> game. </li><li>The 16x16 squares that make up this surface. </li><li>An approximation of this surface with line segments. </li><li>The line segments alone. </li></ul></td> </tr></table><span class="postbody">Thanks for the picture - I was pondering how to do curves in a future game and it helped me out.<br/>_________________<br/><a href="http://aaiiee.wordpress.com/" target="_blank">http://aaiiee.wordpress.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88427 - Lazy1 - Mon Jun 19, 2006 1:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Render a pink sky behind the mountain, and then move pink to color 0.</td> </tr></table><span class="postbody">
<br/>
<br/>
Isn't that really hacky?
<br/>
I already tried something like that but didn't like the way it turned out.
<br/>
<br/>
Since I want to have multiple maps, map specific hacks aren't going to work here.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88428 - PeterM - Mon Jun 19, 2006 1:26 pm</h4>
    <div class="postbody"><span class="postbody">Maybe I've missed the point, but it's not a map-specific hack. It's a standard way of doing color-key transparency.<br/>_________________<br/><a href="http://aaiiee.wordpress.com/" target="_blank">http://aaiiee.wordpress.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88447 - Lazy1 - Mon Jun 19, 2006 4:19 pm</h4>
    <div class="postbody"><span class="postbody">I don't understand what he means by moving pink to colour 0.
<br/>
I can't just add another colour to the palette, It looks like crap when only 15 colours can be used for the sky. The 1 additional colour makes a huge difference.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88453 - wintermute - Mon Jun 19, 2006 5:18 pm</h4>
    <div class="postbody"><span class="postbody">You can still use 16 colors for the sky since it will be the lowest priority background. Index 0 of each palette is transparent, where all pixels in one screen position are index 0 then it will show as palette 0, index 0.
<br/>
<br/>
The standard way of dealing with this is to use rgb(255,0,255) as your transparent color when creating art assets.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88469 - tepples - Mon Jun 19, 2006 6:04 pm</h4>
    <div class="postbody"><span class="postbody">Or you could separate the sky into multiple horizontal bands and then use either separate palettes or mid-frame palette rewriting to change it. A lot of Super NES games just used color 0 for most of the sky and then pointed an hblank DMA channel at it.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#88485 - Lazy1 - Mon Jun 19, 2006 6:44 pm</h4>
    <div class="postbody"><span class="postbody">Ok I understand now, what I need to know now is how to have the gimp make 255 0 255 the first entry in the palette, since it seems to put the darkest colour there instead.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
