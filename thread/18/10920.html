<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Extended Rotation: Start below top left corner? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Extended Rotation: Start below top left corner?</h2>
<div id="posts">
<div class="post">
    <h4>#99847 - bjoerngiesler - Thu Aug 24, 2006 6:59 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I'm trying to use an extended rotation background that starts scaled down to 0 in y direction, then slowly grows across the screen (YDY going from INF to 1). That works very well in principle, but I want it to happen from the BOTTOM of the screen! I.e. the ERB should start its life at screen y=192 and go up to screen y=0.
<br/>
<br/>
Is that possible? CY only takes positive values and shifts the ERB in negative screen y, i.e. up.
<br/>
<br/>
Help is much appreciated!<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99880 - tepples - Thu Aug 24, 2006 2:43 pm</h4>
    <div class="postbody"><span class="postbody">Careful manipulation of the origin fields of the matrix should give you this effect. Just subtract 191 * pb from x_origin and 191 * pd from y_origin.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99895 - bjoerngiesler - Thu Aug 24, 2006 5:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Careful manipulation of the origin fields of the matrix should give you this effect. Just subtract 191 * pb from x_origin and 191 * pd from y_origin.</td> </tr></table><span class="postbody">
<br/>
<br/>
Do you have a link to the matrix representation you're describing and how it maps to the control registers? (I know rotation/scaling matrices, just so we have the same terminology.) Also, pb is the x offset and pd the y offset?
<br/>
<br/>
Thanks!<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99899 - tepples - Thu Aug 24, 2006 5:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Careful manipulation of the origin fields of the matrix should give you this effect. Just subtract 191 * pb from x_origin and 191 * pd from y_origin.</td> </tr></table><span class="postbody">
<br/>
<br/>
Do you have a link to the matrix representation you're describing and how it maps to the control registers?</span></td> </tr></table><span class="postbody">
<br/>
See <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/affine.htm" target="_blank">TONC: the affine transformation matrix</a> and <a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/affbg.htm" target="_blank">TONC: affine backgrounds</a>. My use of "origin" corresponds to TONC's "displacement vector".<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99931 - bjoerngiesler - Thu Aug 24, 2006 7:45 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your help. Turned out I actually had a fixed-point problem -- I took 8.8 fixed to mean always-positive numbers, since they have no sign bit. The TONC pages helped me a lot with that.
<br/>
<br/>
Thanks again!<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99947 - Cearn - Thu Aug 24, 2006 9:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bjoerngiesler wrote:</b></span></td> </tr> <tr> <td class="quote">Turned out I actually had a fixed-point problem -- I took 8.8 fixed to mean always-positive numbers, since they have no sign bit.
<br/>
<br/>
Thanks again!</td> </tr></table><span class="postbody">
<br/>
Unlike floating point number, <a class="postlink" href="http://en.wikipedia.org/wiki/Signed_number_representations" target="_blank">signed integers</a> (and hence fixed point numbers) never have <span style="font-style: italic">a</span> sign bit, not in the truest sense of the word. For example, The 16bit representation of -1 is 0xFFFF, not 0x8001, which it would be with a real signbit. Two's complement integers interpret the top half of their range as negative numbers, 'wrapped around' at 0:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0x8000 ... 0xFFFE 0xFFFF 0x0000 0x0001 0x0002 ... 0x7FFF
<br/>
-2^15  ...   -2     -1     0      1      2    ... +2^15-1
<br/>
</td> </tr></table><span class="postbody">
<br/>
Yes, this does mean that the most significant bit tells you whether the number is negative or not, but that is merely incidental to the whole scheme; for smaller negative numbers, later bits will indicate the sign just as well.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
