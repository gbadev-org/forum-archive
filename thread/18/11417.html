<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Reading the current Matrix used by hardware - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Reading the current Matrix used by hardware</h2>
<div id="posts">
<div class="post">
    <h4>#105786 - DiscoStew - Wed Oct 11, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">Is it possible?
<br/>
<br/>
I see there are ways of writing a matrix for hardware to use, like multiplying a 4x4 matrix with the one currently active, but what about reading a 4x4 matrix?<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105814 - toa - Thu Oct 12, 2006 6:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">Is it possible?
<br/>
<br/>
I see there are ways of writing a matrix for hardware to use, like multiplying a 4x4 matrix with the one currently active, but what about reading a 4x4 matrix?</td> </tr></table><span class="postbody">
<br/>
<br/>
Hep, it's possible, you can  libnds has methods for it  "getMatrix" or something as I recall.
<br/>
Specific hardware-details at:
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#ds3dmatrixloadmultiply" target="_blank">http://nocash.emubase.de/gbatek.htm#ds3dmatrixloadmultiply</a>
<br/>
(Look for: CLIPMTX_RESULT and VECMTX_RESULT)
<br/>
<br/>
Personally I use CLIPMTX_RESULT for frustum based scene culling calculations and it work pretty sweet.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105816 - DiscoStew - Thu Oct 12, 2006 6:41 am</h4>
    <div class="postbody"><span class="postbody">lol, my internet went out while I was ready to submit this, and I couldn't see any new posts. I'll give it a try.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105855 - DiscoStew - Thu Oct 12, 2006 5:34 pm</h4>
    <div class="postbody"><span class="postbody">Hmm, I'm can't seem to get anything from that register array. This is what I'm trying to do to get the Matrix Identity.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
glLoadIdentity();
<br/>
while(GFX_BUSY);
<br/>
<br/>
u32 count = 0;
<br/>
for ( ; count &lt; 16; count++)
<br/>
   baseIdentity.m[count] = MATRIX_READ_PROJECTION[count];
<br/>
iprintf("Matrix[0] = %04X\n", baseIdentity.m[0]);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Just to test, I'm getting the first index, which according to the Matrix Identity and the 1.19.12 fixed-point standard should be 0x00001000, but I get 0.
<br/>
I've even tried writing to an area of RAM (example: 0x02050000), then used Dualis to view that section. I can see values that I write myself to that specific location, but when I try reading the current matrix as shown above to write to there, all I get are 0s. Am I do something wrong?
<br/>
<br/>
EDIT:
<br/>
Oh, just to let you know, the MATRIX_READ_PROJECTION from the libnds points to the same location as CLIPMTX_RESULT.
<br/>
<br/>
EDIT 2:
<br/>
Well, until I can get a response about this problem I'm having with reading that area of memory, I'll do all of my matrices calculating manually, so I have something to work with until a solution is made.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
