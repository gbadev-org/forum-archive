<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Translucent box / Solid box problem (SOLVED) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Translucent box / Solid box problem (SOLVED)</h2>
<div id="posts">
<div class="post">
    <h4>#130820 - a128 - Fri Jun 08, 2007 2:07 pm</h4>
    <div class="postbody"><span class="postbody">I draw two boxes
<br/>
<br/>
One box is translucent , the box behind is solid, flad shaded box
<br/>
<br/>
The Problem i can not see  solid box THRU the translucent box. The translucent box is in fact translucent and in front of the solid box.
<br/>
<br/>
BTW the Solid box does not have any GFX_NORMAL commands, because it's a flat shaded box. So I do not turn POLY_FORMAT_LIGHT0 on
<br/>
<br/>
The code below just reflects the parameters for the translucent/solid part
<br/>
I use
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
#define POLY_FORMAT_LIGHTFLAGS (flags for 1 light or more)
<br/>
 //Bit15 is 1 !!!!!
<br/>
 GFX_DIFFUSE_AMBIENT = 0x18c6f1fc;
<br/>
 GFX_SPECULAR_EMISSION = 0x18c6;
<br/>
//Solid Box
<br/>
 glPolyFmt(POLY_ID(0) | POLY_ALPHA(31) | POLY_CULL_BACK| 0); 
<br/>
glBegin(GL_QUADS);
<br/>
 ....
<br/>
<br/>
<br/>
//Translucent Box
<br/>
/*setMaterial0()*/ 
<br/>
 GFX_DIFFUSE_AMBIENT = 0x18c6ffff;
<br/>
 GFX_SPECULAR_EMISSION = 0x18c6;
<br/>
/* translucent level 10 */
<br/>
 glPolyFmt(POLY_ID(1) | POLY_ALPHA(10) | POLY_CULL_NONE| POLY_FORMAT_LIGHTFLAGS); 
<br/>
glBegin(GL_QUADS);
<br/>
<br/>
<br/>
....
<br/>
<br/>
glFlush(0); //Is this automaic sorting?! or glFlush(1)?!
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by a128 on Mon Jun 11, 2007 3:26 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#130825 - kalus - Fri Jun 08, 2007 3:35 pm</h4>
    <div class="postbody"><span class="postbody">sounds like an alpha sorting issue. i think you might need normal data setting for the ds to determine render order</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130830 - a128 - Fri Jun 08, 2007 4:21 pm</h4>
    <div class="postbody"><span class="postbody">I found the solution:
<br/>
<br/>
You must enable once
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   
<br/>
glEnable(GL_BLEND);
<br/>
glAlphaFunc(BLEND_ALPHA); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
then the above code works just fine.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
