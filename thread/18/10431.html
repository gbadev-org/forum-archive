<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprite problems - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Sprite problems</h2>
<div id="posts">
<div class="post">
    <h4>#93388 - iainprice - Tue Jul 18, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">I have tried looking for the answers on the forum but I can't find them but please be kind if these questions are kinda obvious....
<br/>
<br/>
I have been using code from other demos for sprite handling but I canot seem to get the y coorinates to work....
<br/>
<br/>
[code]
<br/>
	sprites[0].x = 111&lt;&lt;8;
<br/>
	sprites[0].y = 98&lt;&lt;8;
<br/>
[/code]
<br/>
<br/>
then later:
<br/>
[code]
<br/>
void updatespritepos(Sprite* sp)
<br/>
{
<br/>
	int x = sp-&gt;x &gt;&gt; 8;
<br/>
	int y = sp-&gt;y &gt;&gt; 8;
<br/>
<br/>
	sp-&gt;oam-&gt;attribute[1] &amp;= 0xFE00;
<br/>
	sp-&gt;oam-&gt;attribute[1] |= (x &amp; 0x01FF);
<br/>
<br/>
	sp-&gt;oam-&gt;attribute[0] &amp;= 0xFF00;
<br/>
	sp-&gt;oam-&gt;attribute[0] |= (y &amp; 0x00FF);
<br/>
} 
<br/>
[/code]
<br/>
<br/>
Another problem I have is that I am using kaleid to convert a 32*32 256 bmp to a mode 4 c file. But when I load it, it seems corrupt:
<br/>
<br/>
[code]	for(i = 0; i &lt; 256; i++)
<br/>
	{
<br/>
		SPRITE_PALETTE[i] = ball_pal[i];
<br/>
		SPRITE_PALETTE_SUB[i] = ball_pal[i];
<br/>
	}
<br/>
	for(i = 0; i&lt; 32*16; i++)
<br/>
	{
<br/>
		SPRITE_GFX[i] = ball_gfx[i];
<br/>
		SPRITE_GFX_SUB[i] = ball_gfx[i];
<br/>
	}
<br/>
[/code]
<br/>
<br/>
<br/>
Any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93514 - iainprice - Wed Jul 19, 2006 5:04 pm</h4>
    <div class="postbody"><span class="postbody">I am now using usenti and the sprites are in 8*8 blocks and now working fine but the y coordinate is still not working....
<br/>
<br/>
any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93516 - TheRain - Wed Jul 19, 2006 5:12 pm</h4>
    <div class="postbody"><span class="postbody">&lt;edit&gt; nevermind... you got that straight from the complex2d demo.   ummm i am not sure why it's not working.</span><span class="gensmall"><br/><br/>Last edited by TheRain on Wed Jul 19, 2006 5:39 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#93520 - iainprice - Wed Jul 19, 2006 5:37 pm</h4>
    <div class="postbody"><span class="postbody">I think I've got it sorted... nearly.
<br/>
<br/>
When I enable and disable the sprites it copies data to attribute 0 which stamps all over the y position stored there already.
<br/>
<br/>
Just trying to juggle sprites on the main and sub screen and I'll be there....</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
