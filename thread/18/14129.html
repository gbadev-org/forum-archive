<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to rotate something around in a circle? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > How to rotate something around in a circle?</h2>
<div id="posts">
<div class="post">
    <h4>#140040 - Jeremysr - Wed Sep 12, 2007 11:59 pm</h4>
    <div class="postbody"><span class="postbody">Should be pretty easy if I knew more math but I'm only in grade 10. So can someone explain to me how to rotate something around a certain point? (I'm trying to make a line rotate around one end, kind of like one of those radar... things.)
<br/>
<br/>
I'm using PAlib for this if it helps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140047 - kusma - Thu Sep 13, 2007 12:47 am</h4>
    <div class="postbody"><span class="postbody">To make a radar-wipe-thingy: Draw a line from (cx,cy) to (cx + sin(theta) * radius, cy - cos(theta) * radius) where (cx, cy) is the center point for the rotation, theta is the rotation amount (a linear function of the time) and radius is, well, the radius of the radar ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140153 - mml - Thu Sep 13, 2007 11:13 pm</h4>
    <div class="postbody"><span class="postbody">This is pretty basic trigonometry, your grade 10 maths textbook probably has a chapter on it somewhere... :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140155 - Sukanu - Thu Sep 13, 2007 11:27 pm</h4>
    <div class="postbody"><span class="postbody">One thing to check, make shure if the lib is using 0-2pi or 0-360 for theta, I know I made that mistake the first time I was coding with trig, most libs use the 0-2pi method.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140166 - calcprogrammer1 - Fri Sep 14, 2007 12:44 am</h4>
    <div class="postbody"><span class="postbody">I took trig last year (I'm in senior year now) and all this trig stuff seems to have escaped over the summer...and now I'm trying to program a calculator &gt;.&lt; The math.h library is useful to get your trig functions, and yes, they're in Radians mode (so that means, 0 to 2pi, with Pi usually being 3.141<span style="font-weight: bold">5</span>9.......look it up on a calculator or something).  You can convert Radians to Degrees by doing this:
<br/>
<br/>
&lt;degrees&gt; = &lt;radians&gt; * ( 180 / pi )
<br/>
<br/>
And to use all this, make sure to include math:
<br/>
<br/>
#include &lt;math.h&gt; //math functions
<br/>
<br/>
Then you can use sin(), cos(), tan(), all that good stuff.<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"><br/><br/>Last edited by calcprogrammer1 on Fri Sep 14, 2007 1:46 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#140169 - kusma - Fri Sep 14, 2007 1:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>calcprogrammer1 wrote:</b></span></td> </tr> <tr> <td class="quote">with Pi usually being 3.1419</td> </tr></table><span class="postbody">
<br/>
BRRRR! Try again! ;)
<br/>
(I'm sure you mean 3.141<span style="font-weight: bold">5</span>9...etc)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140171 - calcprogrammer1 - Fri Sep 14, 2007 1:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>calcprogrammer1 wrote:</b></span></td> </tr> <tr> <td class="quote">and all this trig stuff seems to have escaped over the summer...</td> </tr></table><span class="postbody">
<br/>
<br/>
:P
<br/>
<br/>
I knew that some part of that post would be incorrect...though I remember that, must've just not hit the button right (Pi does equal 3.14159..., but I did say check your calculator to be sure :)<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140172 - Jeremysr - Fri Sep 14, 2007 1:49 am</h4>
    <div class="postbody"><span class="postbody">Thanks everyone... I should have said exactly what I was trying to do because I'm not sure kusma's advice will help or not. The radar was just an example... what I want to do is use the stylus to rotate the line. So I thought of two methods I might be able to do it but still have trouble knowing how to do it.
<br/>
<br/>
1. Start drawing a line from one point to where the stylus is, but stop after a certain length of the line. But how do I know how long to draw the line? (I want it to stay the same length as it's rotated.)
<br/>
2. Can I somehow figure out what amount/angle to rotate it by checking what position the stylus is at?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140181 - calcprogrammer1 - Fri Sep 14, 2007 2:39 am</h4>
    <div class="postbody"><span class="postbody">I'm thinking you could have a center point that you drag around, then you can use the Pythagorean theorem (a^2 + b^2 = c^2), the Law of Sines, Law of Cosines, etc to find the interior angle.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
                     | 90 degrees, 1/2pi radians
<br/>
                     |
<br/>
                     |
<br/>
                     |
<br/>
&lt;-----------------------------------&gt; 0 degrees/ 0 radians
<br/>
180 degrees,         |
<br/>
pi radians           |
<br/>
                     |
<br/>
                     |
<br/>
           270 degrees, 3/2pi radians
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That's how you should interpret it, with the center at the middle of your angle thing.  Draw a line from the center to the touched point, then drop a vertical line (use the X value of the touched point) to form a triangle.  There's tons of trig you can now use to find the angle.
<br/>
<br/>
The angle you want is the one at the origin (center) point.
<br/>
The "opposite" line is the farthest from the angle, it would be the line you drop from the point.
<br/>
The "adjacent" line is the x-axis in this case, length is from origin to x value of touched point.
<br/>
The "hypotenuse" is the angled line between the origin and the touched point.  If you use the lengths of the other two lines (adj. and opp. lines) as A and B, then the length of the hypotenuse equals the square root of a^2 + b^2 (the Pythagorean theorem).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
|     /|
<br/>
|    / |
<br/>
|   / ----------hypotenuse
<br/>
|  /   | 
<br/>
| /    |-------opposite
<br/>
|/     |     adjacent (x axis)
<br/>
-------------------------&gt;
<br/>
</td> </tr></table><span class="postbody">
<br/>
The angle can be found using these trig functions:
<br/>
sin = opposite/hypotenuse
<br/>
cos = adjacent/hypotenuse
<br/>
tan = opposite/adjacent<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140183 - Jeremysr - Fri Sep 14, 2007 2:52 am</h4>
    <div class="postbody"><span class="postbody">Ok, the only part I don't understand is how do I get the angle (of the final line I want to draw on the screen) once I have the lengths of those three lines?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140185 - calcprogrammer1 - Fri Sep 14, 2007 3:02 am</h4>
    <div class="postbody"><span class="postbody">Ok, I'm looking it up (I knew all this last year...but I forgot), I think, if you call the angle you're looking at A:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
^        /|C
<br/>
|       / |
<br/>
|      /  |
<br/>
|     /   |
<br/>
|    /    |
<br/>
|   /b    |a
<br/>
|  /      |
<br/>
| /       |
<br/>
|/A      B|
<br/>
-----------------
<br/>
      c</td> </tr></table><span class="postbody">
<br/>
<br/>
You're trying to find angle A.  To get angle A, you can use the Sine function:
<br/>
<br/>
sin A = opp/hyp
<br/>
<br/>
sin A = a/b
<br/>
<br/>
Correct me if I'm wrong, but if I remember correctly you use the arcsine function, sometimes called arcsin() or sin-1(), to do the opposite of Sine.  This way, you'd take a (which is the Y position of the touched point minus the Y position of the center) and divide it by b (which you find using the Pythagorean theorem).  Then you do the arcsin() of the resulting number to find the angle.
<br/>
<br/>
Capital letters represent angle measures (in Radians) and lowercase represent lengths of the lines.
<br/>
<br/>
You can convert that to degrees by multiplying by (180/pi).<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140187 - Jeremysr - Fri Sep 14, 2007 3:08 am</h4>
    <div class="postbody"><span class="postbody">Thanks! I'll go try it out. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140193 - Sukanu - Fri Sep 14, 2007 4:22 am</h4>
    <div class="postbody"><span class="postbody">Actually I think a better way would be is convert to a pseudo polar cordiance(and this is if you are rotating around a tip)
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
^        /|B
<br/>
|       / |
<br/>
|      /  |
<br/>
|     /   |
<br/>
|    /    |
<br/>
|   /     | 
<br/>
|  /      |
<br/>
| /       |
<br/>
|/A      C|
<br/>
-----------------
<br/>
       
<br/>
</td> </tr></table><span class="postbody">
<br/>
I am going to use some janky use of BBcode to represent lines so where you see so you have AB that represents the line AB(I know the line should go on top but BBcode won't let me do that) and A represents point A and B alone represents point B
<br/>
<br/>
The first thing you need to do is find the length of your line
<br/>
<br/>
now you can use the Pythagorean theorem but since we cant assume that the user started their line at (0,0) we need to take the differences
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Bx-Ax = Δx
<br/>
By-Ay = Δy
<br/>
(Δx)^2 + (Δy)^2 = AB^2
<br/>
</td> </tr></table><span class="postbody">
<br/>
now AB is our radius
<br/>
<br/>
Now you need the starting theta, that is easy because you already have Δx and Δy you just use 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
theta = tan(Δy/Δx)
<br/>
</td> </tr></table><span class="postbody">
<br/>
now we use 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">(Ax + sin(theta) * radius, Ay - cos(theta) * radius)</td> </tr></table><span class="postbody">
<br/>
and that will give us our new end point to redraw our line, you just add or subtract to the theta to rotate.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140194 - Jeremysr - Fri Sep 14, 2007 4:28 am</h4>
    <div class="postbody"><span class="postbody">I just found a <a class="postlink" href="http://www.palib.info/Doc/PAlibDoc%20Eng/group___math.html#ga9" target="_blank">PAlib function</a> where you give it two points on the screen and it returns the angle. Would that work instead of having to do all this math that I don't understand very good? :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140196 - Sukanu - Fri Sep 14, 2007 4:37 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Jeremysr wrote:</b></span></td> </tr> <tr> <td class="quote">I just found a <a class="postlink" href="http://www.palib.info/Doc/PAlibDoc%20Eng/group___math.html#ga9" target="_blank">PAlib function</a> where you give it two points on the screen and it returns the angle. Would that work instead of having to do all this math that I don't understand very good? :P</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes it will probibly have a function to give it two points and it will give you a length. use those two values to plug in to the last equation I gave to give you your new B point coords.
<br/>
<br/>
EDIT---
<br/>
<br/>
yep just use PA_Distance and sqrt it or PA_TrueDistance
<br/>
<br/>
to use the sites termonolgy
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
length = PA_TrueDistance (x1, y1, x2, y2) 
<br/>
angle = PA_GetAngle (x1, y1, x2, y2)     
<br/>
x2 = x1 + sin(angle + yourChange) * length
<br/>
y2 = y1 - cos(angle + yourChange) * length</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140197 - Jeremysr - Fri Sep 14, 2007 4:50 am</h4>
    <div class="postbody"><span class="postbody">Right now I just need to get the angle of the end of the line to the position of the stylus. Then I can use that angle to rotate the line so it points to where the stylus is.
<br/>
<br/>
I'm not sure about this but it seems like you're showing me how to just make the line rotate, right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140198 - calcprogrammer1 - Fri Sep 14, 2007 4:56 am</h4>
    <div class="postbody"><span class="postbody">I'm thinking you have like a circle or something on the touch screen, or something with a center point (like a radar).  It's possible to just draw a line from the center point to wherever the touch point is (I forget how to check pen location in PAlib, but the PA_Draw16bitLine(screen,x1,y1,x2,y2,color); function should do what you want, if you just want to draw a line).  You're saying angle, if you just want a line from one point to another, you don't need to calculate an angle.  If you want to find the angle that a touch point is in relation to a point on the screen (say, how far around the circle you touch), then you can use trig functions to find the angle.  If I knew more of what you wanted to do, I might know what to do.<br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140199 - Sukanu - Fri Sep 14, 2007 4:57 am</h4>
    <div class="postbody"><span class="postbody">Yea, I was showing how to rotate, look at my edits for updates. I am not sure if I understand the question now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140202 - Jeremysr - Fri Sep 14, 2007 5:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If you want to find the angle that a touch point is in relation to a point on the screen (say, how far around the circle you touch), then you can use trig functions to find the angle.</td> </tr></table><span class="postbody">
<br/>
<br/>
That's what I want to do.
<br/>
<br/>
I already have a line that can rotate like "radar" but I want the stylus to control the angle of it. I want the line to stay the same length, so I can't just draw it right to the stylus. It has to go towards the stylus but only be a certain length.
<br/>
<br/>
Here's some code that I thought would work, but Desmume freezes when it gets to PA_GetAngle() and my M3 won't even load the .nds...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   while (1) {
<br/>
      if (Stylus.Newpress) {
<br/>
            PA_Draw8bitLineEx(SCREEN_BOTTOM, 120, 95, x + sin(rot_amount) * 30, y - cos(rot_amount) * 30, 0, 5); // Erase old line
<br/>
            rot_amount = (PA_GetAngle(120, 95, Stylus.X, Stylus.Y) &gt;&gt; 8) * 0.01252;
<br/>
            PA_Draw8bitLineEx(SCREEN_BOTTOM, 120, 95, x + sin(rot_amount) * 30, y - cos(rot_amount) * 30, 1, 5);
<br/>
            
<br/>
            PA_WaitForVBL();
<br/>
      }
<br/>
      
<br/>
      PA_WaitForVBL();
<br/>
   }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
(The 0.01252 is the same as 1 PAlib degree in the line-drawing code (which I got from kusma's first post))</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140205 - calcprogrammer1 - Fri Sep 14, 2007 5:23 am</h4>
    <div class="postbody"><span class="postbody">If you can, stay away from the PA_ angle functions (I've had crashes using PA_sin() and such before, and reverted to using the math.h ones).  Use the C math library instead (though it looks like you're using it already).  GetAngle must do the same thing that I explained how to do with trig.
<br/>
<br/>
Hmm...
<br/>
<br/>
this isn't true C++, just pseudocode:
<br/>
<br/>
tan A = opp/adj (use this function to find the angle)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
customGetAngle(x1, y1, x2, y2){
<br/>
<br/>
     adj = x2 - x1;
<br/>
     opp = y2 - y1;
<br/>
     angle = arctan(opp/adj);
<br/>
     //convert to degrees
<br/>
     angle = angle * (180/3.14159)//......and on and on, there may be a Pi constant
<br/>
     return angle;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This is designed with the assumption of only using quadrant I (the positive-X, positive-Y quadrant), you might be able to use it in others, if not, you'd need to use an absolute-value on the points then modify it accordingly, but see if this works for quadrant I first.
<br/>
<br/>
I'm not sure, but that's how I'd do it.  I think arctan() is a math function, it might be different though.  Either way, you'll need to add this if you don't have it:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#include "math.h"
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>DS Firmware 1, Datel Games n' Music card / Chism's FW hacked GBA MP v2 CF
<br/>
<br/>
There's no place like 127.0.0.1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140216 - hi2u - Fri Sep 14, 2007 7:45 am</h4>
    <div class="postbody"><span class="postbody">On a side note, unless you've covered this already, PAlib uses <a class="postlink" href="http://palib.info/wiki/doku.php?id=day6#angles_in_palib" target="_blank">a different angle system</a>.<br/>_________________<br/><a class="postlink" href="http://img101.imageshack.us/img101/4064/1184503265197kz4.gif" target="_blank">hi2u</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140289 - tepples - Sat Sep 15, 2007 1:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hi2u wrote:</b></span></td> </tr> <tr> <td class="quote">On a side note, unless you've covered this already, PAlib uses <a class="postlink" href="http://palib.info/wiki/doku.php?id=day6#angles_in_palib" target="_blank">a different angle system</a>.</td> </tr></table><span class="postbody">
<br/>
I've seen trig functions based on 256-part circles in a lot of places. FutureBASIC and <a class="postlink" href="http://www.emesystems.com/BS2math3.htm" target="_blank">BASIC Stamp</a> call the unit of 1/256 circle a "brad". The <a class="postlink" href="http://alleg.sourceforge.net/stabledocs/en/alleg032.html#Fixed%20point%20trig" target="_blank">fixed-point trig in the Allegro library</a> also uses a 256-part circle. It would appear that the 512-part circle of PAlib is no harder to understand.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#140335 - Cearn - Sat Sep 15, 2007 1:16 pm</h4>
    <div class="postbody"><span class="postbody">Since you don't seem to need a rotation, just a direction, you don't need angles at all. All you have to do is find the distance vector between the points and scale it down to your desired radius <span style="font-style: italic">R</span>. 
<br/>
<br/>
Say you have two points, <span style="font-weight: bold">x0</span>=(<span style="font-style: italic">x0</span>, <span style="font-style: italic">y0</span>) for the circle origin and the stylus point <span style="font-weight: bold">x1</span>=(<span style="font-style: italic">x1</span>, <span style="font-style: italic">y1</span>). The difference will be <span style="font-weight: bold">dx</span>= (<span style="font-style: italic">dx</span>, <span style="font-style: italic">dy</span>) = <span style="font-weight: bold">x1</span>-<span style="font-weight: bold">x0</span>. This will have a length <span style="font-style: italic">L</span> = sqrt(<span style="font-style: italic">dx</span>² + <span style="font-style: italic">dy</span>²). Dividing <span style="font-weight: bold">dx</span> by <span style="font-style: italic">L</span> will give you a vector in the right direction of unit length; multiplying by the radius again gives a distance vector of the desired length. To avoid problems during the integer division, do the multiplication first: new <span style="font-weight: bold">dx</span>= <span style="font-weight: bold">dx</span>*<span style="font-style: italic">R</span>/<span style="font-style: italic">L</span> = (<span style="font-style: italic">dx</span>*<span style="font-style: italic">R</span>/<span style="font-style: italic">L</span>, <span style="font-style: italic">dx</span>*<span style="font-style: italic">R</span>/<span style="font-style: italic">L</span>). Since the DS has hardware division and square root, the routine should be quite fast if done this way.
<br/>
<br/>
Code (untested. I hope div32 gives signed results &gt;_&gt;)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int x0, y0, radius;      // circle origin and desired radius
<br/>
int dx=0, dy=0, len;
<br/>
<br/>
while(1)
<br/>
{
<br/>
   if(Stylus.Presses)
<br/>
   {
<br/>
      // Erase old line
<br/>
      PA_Draw8bitLineEx(SCREEN_BOTTOM, x0, y0, x0+dx, y0+dy, 0, 5);
<br/>
<br/>
      // Scale distance vector to radius length (also add something for div/0 plz)
<br/>
      dx= Stylus.X - x0;
<br/>
      dy= Stylus.Y - y0;
<br/>
      len= sqrt32(dx*dx + dy*dy);
<br/>
      dx= div32(dx*radius, len);
<br/>
      dy= div32(dy*radius, len);
<br/>
      
<br/>
      // Draw new line
<br/>
      PA_Draw8bitLineEx(SCREEN_BOTTOM, x0, y0, x0+dx, y0+dy, 1, 5);
<br/>
   }
<br/>
   PA_WaitForVBL();
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
