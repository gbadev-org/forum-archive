<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>New Tuna-ViDS build - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > New Tuna-ViDS build</h2>
<div id="posts">
<div class="post">
    <h4>#169596 - RobinWatts - Sat Jul 25, 2009 11:44 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I've been preparing for a long haul flight by encoding some movies/TV programmes to watch on the NDS using Tuna-viDS.
<br/>
<br/>
In order to do this I ended up trying to rebuild tuna-loader, which wouldn't work, so I tried updating devkitpro, and then none of it would build... big can of worms, etc.
<br/>
<br/>
Long story short, I've updated the source so it builds with the latest version of the tools, and has some small extra tweaks that people may file useful.
<br/>
<br/>
Firstly, I've improved the dithering; graduated areas of colour now look better spatially, and I temporaly dither too, so static things look better over a sequence of frames.
<br/>
<br/>
Secondly, I've tweaked it to add a simple volume control to allow me to boost the volume of the sound above 100%. Use this with care as you might end up with distortion, but it really helps with quiet sections.
<br/>
<br/>
An archive with the modified source and prebuild binaries can be found at:
<br/>
<br/>
<a class="postlink" href="http://www.wss.co.uk/pinknoise/tuna-vids/" target="_blank">http://www.wss.co.uk/pinknoise/tuna-vids/</a>
<br/>
<br/>
This is NOT an official release, use with caution etc. If Chishm likes the changes he can of course roll them into his version.
<br/>
<br/>
Please don't look to the changes for neatness - I just wanted this to work!
<br/>
<br/>
Any questions, just follow up here, or mail me, but I'm about to disappear on holiday fairly soon, hence may lag a bit in replying.
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169601 - Tommmie - Sun Jul 26, 2009 7:43 am</h4>
    <div class="postbody"><span class="postbody">really thanks, was going to use this video-player to wacht movies on holiday. can i now also wacht video's with a higher frame rate?
<br/>
<br/>
ps: thanks for tremolo it's really great, is it possible to optimize it more for the nds?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169605 - RobinWatts - Sun Jul 26, 2009 11:08 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Tommmie wrote:</b></span></td> </tr> <tr> <td class="quote">really thanks, was going to use this video-player to wacht movies on holiday. can i now also wacht video's with a higher frame rate?</td> </tr></table><span class="postbody">
<br/>
<br/>
I haven't tried anything above 12.5fps myself (as I've been watching PAL videos, which run natively at 25fps, so I get a nice simple 1/2 rate thing).
<br/>
<br/>
I'd *hope* that 15fps should be possible (so NTSC watchers can get a 1/2 rate thing too), but I haven't tested it myself.
<br/>
<br/>
I've not boosted the speed at all since Chishm's 1.1 release though...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">ps: thanks for tremolo it's really great, is it possible to optimize it more for the nds?</td> </tr></table><span class="postbody">
<br/>
<br/>
It has been ages since I looked at it, but when I last did, I think it had hit pretty much all the obvious optimisations.
<br/>
<br/>
If you *REALLY* want to do fast digital audio, then you should check out Siren14, and my implementation of that, Siryn.
<br/>
<br/>
This runs in a fraction of the time/space required by Tremolo or MP3. The quality doesn't match up to Ogg Vorbis or MP3 at high bitrates, but at low bitrates (such as would seem appropriate for many applications on the DS) it's quality/speed tradeoff is blindingly good.
<br/>
<br/>
See <a class="postlink" href="http://www.wss.co.uk/pinknoise/siryn" target="_blank">http://www.wss.co.uk/pinknoise/siryn</a> for more details.
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169606 - RobinWatts - Sun Jul 26, 2009 11:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Tommmie wrote:</b></span></td> </tr> <tr> <td class="quote">really thanks, was going to use this video-player to wacht movies on holiday. can i now also wacht video's with a higher frame rate?</td> </tr></table><span class="postbody">
<br/>
<br/>
Some quick tests show that 15fps is no problem here, but that's about it.
<br/>
<br/>
Actually, I'd advise you to run some encoding tests yourself, because the bitrates you pick for audio and video and the speed of your SD card/Slot 1 card may come into play...
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169608 - Tommmie - Sun Jul 26, 2009 1:15 pm</h4>
    <div class="postbody"><span class="postbody">ok will do that, I encode my audioalready at 22050 hz and a bitrate of 64kbs. but will try 15 fps. anyway great update.
<br/>
<br/>
and about that siren14, is it's quality at lower bitrates better then ogg? and how can I encode a music file to siren14, do i need a license or something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169610 - RobinWatts - Sun Jul 26, 2009 4:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Tommmie wrote:</b></span></td> </tr> <tr> <td class="quote">and about that siren14, is it's quality at lower bitrates better then ogg? and how can I encode a music file to siren14, do i need a license or something?</td> </tr></table><span class="postbody">
<br/>
<br/>
I haven't done tests myself between Siren14 and Ogg, in terms of quality. Siren14 is MUCH lighter on the CPU though.
<br/>
<br/>
The link I gave earlier includes a pointer to the Polycom site. On that site you'll find the following FAQs page: <a class="postlink" href="http://www.polycom.com/company/about_us/technology/siren14_g7221c/faq.html" target="_blank">http://www.polycom.com/company/about_us/technology/siren14_g7221c/faq.html</a>
<br/>
<br/>
They have demo WAVs and demo PC executables for encoding/decoding, so you can do your own tests. I'll be interested to hear what you think.
<br/>
<br/>
Yes, you'll need a license, but you can get a royalty free license without having to pay anything under very reasonable terms. Full details on that page.
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169653 - Lazy1 - Tue Jul 28, 2009 2:20 am</h4>
    <div class="postbody"><span class="postbody">What is with dark areas having a patchy appearance?
<br/>
It's hard to describe but it looks like a block of yellowish dots, this happens in every DS movie player I tried.
<br/>
Is this a limitation of the display?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169655 - Da-Bomb1 - Tue Jul 28, 2009 3:32 am</h4>
    <div class="postbody"><span class="postbody">I thin it's due to the limited number of colors the screen can display...if you look at it closely, it's just alternating pixels.  I don't fully understand it, but it looks to me that they just alternate with every frame to make it look smoother.  Don't take my word for this though. :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169660 - RobinWatts - Tue Jul 28, 2009 11:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">What is with dark areas having a patchy appearance?
<br/>
It's hard to describe but it looks like a block of yellowish dots, this happens in every DS movie player I tried.
<br/>
Is this a limitation of the display?</td> </tr></table><span class="postbody">
<br/>
<br/>
The DS screen is a 555 one; it can only display 32 different shades of Red/Green/Blue at each pixel, to give a total of 32768 different colours.
<br/>
<br/>
When displaying video on such screens, if you have smoothly changing areas of colour, and you simply display the closest colour to each pixel, you get "posterisation". (See <a class="postlink" href="http://www.cambridgeincolour.com/tutorials/posterization.htm" target="_blank">http://www.cambridgeincolour.com/tutorials/posterization.htm</a> for what this means.)
<br/>
<br/>
To try and avoid this, we dither the output; some pixels are bumped up a bit brighter, some a bit darker. The net effect is that you get the "stippled" (or "dotty") effect that you've noticed. Overall this should result in a more pleasing display.
<br/>
<br/>
The dither pattern is varied from frame to frame so that over time each pixel displays the correct colour "on average".
<br/>
<br/>
HTH,
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169803 - hacker013 - Tue Aug 04, 2009 1:15 pm</h4>
    <div class="postbody"><span class="postbody">@RobinWatts
<br/>
I saw you made some time ago a yuv2rgb script which was faster than the one chishm made for his tuna-vids, have you also changed his script to your script in this build?<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169868 - Lazy1 - Fri Aug 07, 2009 9:54 pm</h4>
    <div class="postbody"><span class="postbody">I see, would any kind of colour correction or similar filter help with this during encoding?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169936 - RobinWatts - Sun Aug 16, 2009 8:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">@RobinWatts
<br/>
I saw you made some time ago a yuv2rgb script which was faster than the one chishm made for his tuna-vids, have you also changed his script to your script in this build?</td> </tr></table><span class="postbody">
<br/>
<br/>
My yuv2rgb code was integrated into his v1.1 release. This new release of mine is an update to v1.1, so yes, it has a (modified) version of my code in.
<br/>
<br/>
Robin (On holiday, so lagging)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170197 - hacker013 - Mon Sep 07, 2009 7:39 pm</h4>
    <div class="postbody"><span class="postbody">Can you explain to me why it contains a loader and a player and not just a player with a directory browser ?<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170199 - spinal_cord - Mon Sep 07, 2009 8:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">Can you explain to me why it contains a loader and a player and not just a player with a directory browser ?</td> </tr></table><span class="postbody">
<br/>
<br/>
To give an example of passing command line arguments. The loader passes the filename to the player by leaving it in a specific location in memory.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170200 - hacker013 - Mon Sep 07, 2009 9:12 pm</h4>
    <div class="postbody"><span class="postbody">so it isn't nesseary to have those 2 seperated ?<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170206 - RobinWatts - Tue Sep 08, 2009 11:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">so it isn't nesseary to have those 2 seperated ?</td> </tr></table><span class="postbody">
<br/>
<br/>
I'd guess not. That's just the way Chishm did it originally. Having the 2 integrated would be neater, IMHO, but it does serve as some useful example code...
<br/>
<br/>
Robin</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
