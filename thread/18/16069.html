<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>RAM_COUNT & no$gba - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > RAM_COUNT & no$gba</h2>
<div id="posts">
<div class="post">
    <h4>#163107 - ritz - Mon Sep 22, 2008 5:38 pm</h4>
    <div class="postbody"><span class="postbody">Not sure if this is a valid place for this question... please move or delete if not applicable.
<br/>
<br/>
Is RAM_COUNT (GFX_POLYGON_RAM_USAGE, GFX_VERTEX_RAM_USAGE) supported in no$gba? I can't seem to find an answer to this anywhere. I use these values in a few places and they work as expected on the hardware. However, they're always 0 in this emulator.
<br/>
<br/>
I noticed that iDeaS now emulates VERTEX_RAM, but I just can't seem to get my rom to work on this emu at all (I could be doing something stupid though).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163108 - Lino - Mon Sep 22, 2008 6:32 pm</h4>
    <div class="postbody"><span class="postbody">Can you send me your roms? with source?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163115 - ritz - Mon Sep 22, 2008 9:39 pm</h4>
    <div class="postbody"><span class="postbody">You can find the rom inside the .zip file on <a href="http://www.daftcode.net" target="_blank">www.daftcode.net</a>
<br/>
I should note that I use v2 of Noda's EFS lib too (the Nitro FS stuff). I'm thinking the emu is fine, but somehow I might be messing up somewhere with DLDIing and the R4 option of the emu.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163130 - ritz - Tue Sep 23, 2008 2:19 pm</h4>
    <div class="postbody"><span class="postbody">I found out what was preventing it from running on iDeaS. I use the other cache algo in my rom. I took the following out and it now loads:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#ifdef C_CACHERR
<br/>
   __asm("mrc p15, 0, r7, c1, c0, 0");
<br/>
   __asm("mov r6, #0x4000");
<br/>
   __asm("orr r8, r7, r6");
<br/>
   __asm("mcr p15, 0, r8, c1, c0, 0");
<br/>
#endif
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163133 - Lino - Tue Sep 23, 2008 4:15 pm</h4>
    <div class="postbody"><span class="postbody">but this code disable ITCM and DTCM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163138 - ritz - Tue Sep 23, 2008 7:37 pm</h4>
    <div class="postbody"><span class="postbody">Geez, I hope not! I could be messing something up (I'm not great at asm), but from my testing the flag gets changed to the round-robin cache algo only. A lot of my functions are currently sitting in ITCM so if I was disabling L2 wouldn't that cause nothing but problems/errors for me?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163140 - Lino - Tue Sep 23, 2008 7:53 pm</h4>
    <div class="postbody"><span class="postbody">Excume in my emu that code disabled ITCM and DTCM on real DS you enable/disable the chache managment algorithm.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163178 - M3d10n - Wed Sep 24, 2008 4:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ritz wrote:</b></span></td> </tr> <tr> <td class="quote">I should note that I use v2 of Noda's EFS lib too (the Nitro FS stuff). I'm thinking the emu is fine, but somehow I might be messing up somewhere with DLDIing and the R4 option of the emu.</td> </tr></table><span class="postbody">
<br/>
<br/>
That's the problem. Try loading the .ds.gba in iDeaS, that way EFS will use GBA ROM access mode. I could never get EFS DLDI mode to work in iDeaS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163182 - ritz - Wed Sep 24, 2008 7:48 pm</h4>
    <div class="postbody"><span class="postbody">iDeaS loads it fine with EFS/DLDI. It just wasn't working initially because of a change to the CP15 coprocessor.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
