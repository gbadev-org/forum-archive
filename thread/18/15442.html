<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Parallel Processing, how do i do it? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Parallel Processing, how do i do it?</h2>
<div id="posts">
<div class="post">
    <h4>#155081 - TheMagnitude - Thu Apr 24, 2008 8:12 pm</h4>
    <div class="postbody"><span class="postbody">I have looked around the forums and searched for parallel processing and I keep coming across phrases such as SQRT_BUSY and stuff but I dont fully understand it.
<br/>
<br/>
I am computing the mandelbrot set and was wondering how I would use parallel processing to speed up my calculations?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155082 - Lino - Thu Apr 24, 2008 8:13 pm</h4>
    <div class="postbody"><span class="postbody">You can use the <span style="font-weight: bold">swp</span> opcode for interlock operation.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155084 - silent_code - Thu Apr 24, 2008 8:20 pm</h4>
    <div class="postbody"><span class="postbody">&lt;jokingly&gt;
<br/>
wifi input data to a pc, let it process it, display the received data, repeat if necessary. ;^)
<br/>
&lt;/jokingly&gt;
<br/>
<br/>
if you're taking part in the contest: good luck!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155094 - TheMagnitude - Thu Apr 24, 2008 11:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lino wrote:</b></span></td> </tr> <tr> <td class="quote">You can use the <span style="font-weight: bold">swp</span> opcode for interlock operation.</td> </tr></table><span class="postbody">
<br/>
<br/>
Searched for "swp" and "swp opcode" in google, and gbadev.org and in the devkitpro directory and found nothing helpful.
<br/>
<br/>
How am I supposed to find out about these things? how do other people come to know them?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155096 - Dwedit - Fri Apr 25, 2008 12:02 am</h4>
    <div class="postbody"><span class="postbody">To do parallel processing:
<br/>
* First you need to make your code for both the ARM7 and ARM9.  If you are using just an ARM9 project, look at the ARM7+ARM9 combined example for how to set up a project that way.
<br/>
* Then you probably need an IPC FIFO library so that you can have the ARM9 send messages to and from the ARM7.  Doing things this way is nice because you can have one processor interrupt the other.  Dekutree64 made one, and it's available in <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=13430&amp;postdays=0&amp;postorder=asc&amp;start=15" target="_blank">this thread</a>.
<br/>
* Remember that main memory (4MB) is shared among both processors, but the ARM9 also caches that memory.  If you need to be sure that you are fetching the memory and not just cached values, either flush the cache, or use a different memory area.  There are also mirrors of main memory which are not cached.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155119 - Lino - Fri Apr 25, 2008 4:53 am</h4>
    <div class="postbody"><span class="postbody">You can search <span style="font-weight: bold">lock xchg</span> is very similar, i hope :D Im not sure if it works well with 2 cpus.
<br/>
<br/>
On ARM pdf there is a simple example with semaphores where it is used.
<br/>
<br/>
OMG 60000 processes.</span><span class="gensmall"><br/><br/>Last edited by Lino on Fri Apr 25, 2008 7:33 am; edited 3 times in total</span></div>    
</div>
<div class="post">
    <h4>#155123 - nanou - Fri Apr 25, 2008 6:50 am</h4>
    <div class="postbody"><span class="postbody">What do you hope to accomplish with parallel processing?
<br/>
<br/>
I'm currently working on a project that has a highly parallelized representation. There are over 6000 individual "processes", which I time share. They're all handled in serially, pausing after small segments of work to do the usual nonsense, and then pick up where it left off. If I'd tried to implement a proper parallel environment for it all to work in the overhead would absolutely kill me.<br/>_________________<br/>- nanou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155125 - Dwedit - Fri Apr 25, 2008 7:20 am</h4>
    <div class="postbody"><span class="postbody">Read the first post, the task to parallelize is Mandelbrot set generation.  Using the ARM7 in addition to the ARM9 gives you an extra processor half as fast as the main processor.
<br/>
<br/>
Maybe you could take a look at Fractint's source code for some ideas on how to optimize the code.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155127 - nanou - Fri Apr 25, 2008 8:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dwedit wrote:</b></span></td> </tr> <tr> <td class="quote">Read the first post, the task to parallelize is Mandelbrot set generation.</td> </tr></table><span class="postbody">
<br/>
<br/>
The question actually has little or nothing to do with the application itself.
<br/>
<br/>
--
<br/>
<br/>
Anyway, I guess it's pointless to bring up the subtler points here. You might find that without thinking it through very carefully that you waste more time if you use a generalized 2 processor method than if you just stick with one processor.
<br/>
<br/>
If you really want and need to use the arm7 for additional processing, don't ask "how do I do parallel processing?" ask "how much work can I offload onto arm7, and how do I do that without prohibitive overhead?" Just rephrasing the question like that should give you an avenue to your answer. But if your existing design isn't optimal you'll save more time by fixing that first.<br/>_________________<br/>- nanou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155139 - silent_code - Fri Apr 25, 2008 12:59 pm</h4>
    <div class="postbody"><span class="postbody">you could use (if applicable - i haven't "done" mb, yet) a tile based renderer.
<br/>
each processor then  takes an unprocessed tile (or cell) and computes it. when it's done, it checks if there are others available and processes the next. you'd need interprocessor communication, but i wouldn't use multiprocessing (or multithreading) - it's (as TheMagnitude correctly asked for) parallel processing.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
