<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Limit sprite movement? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Limit sprite movement?</h2>
<div id="posts">
<div class="post">
    <h4>#161953 - Quipeace - Wed Aug 20, 2008 10:26 am</h4>
    <div class="postbody"><span class="postbody">hello everyone,
<br/>
<br/>
first off all, im new to nds programming, (its my first post here too by the way) so dont flame me if its very simple to do.
<br/>
<br/>
heres the situation:
<br/>
<br/>
its my third project so far (did a small mario like thing before this).
<br/>
I got a sprite that has to be able to move sideways, but NOT up and down (like its on rails), i know this is possible with the pad, but id like to use the stylus if possible.
<br/>
<br/>
thanks in advance
<br/>
<br/>
<br/>
<br/>
EDIT: this is my code so far (please dont mind the comment blocks, i find it hard to read the code without those...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;PA9.h&gt;                                                
<br/>
#include "gfx/all_gfx.c"
<br/>
#include "gfx/all_gfx.h"
<br/>
 
<br/>
<br/>
//-----------------------------------Standard Stuff----------------------------------------------\\
<br/>
<br/>
int main(int argc, char ** argv)
<br/>
{
<br/>
   PA_Init();                                               
<br/>
   PA_InitVBL();
<br/>
   
<br/>
   PA_InitText(0,0);
<br/>
   PA_SetTextCol(0, 31, 31, 31);
<br/>
<br/>
   s32 x = 0;  // Sprite X
<br/>
   s32 y = 0;  // Sprite Y
<br/>
   
<br/>
//------------------------------------End of Stuff-----------------------------------------------\\
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
//-----------------------------------LOAD BACKGROUND---------------------------------------------\\
<br/>
<br/>
    PA_EasyBgLoad(0, 3,   pdabot); 
<br/>
   PA_EasyBgLoad(1, 3, pdatop); 
<br/>
          
<br/>
//------------------------------------END BACKGROUND---------------------------------------------\\
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
//--------------------------------------Load Icons-----------------------------------------------\\
<br/>
   
<br/>
   PA_LoadSpritePal(0, // Screen
<br/>
         0, // Palette number
<br/>
         (void*)Settingsicon_Pal);   // Palette name
<br/>
   
<br/>
   PA_CreateSprite(0, // Screen
<br/>
         0, // Sprite number
<br/>
         (void*)Settingsicon_Sprite, // Sprite name
<br/>
         OBJ_SIZE_64X32, // Sprite size
<br/>
         1, // 256 color mode
<br/>
         0, // Sprite palette number
<br/>
         1, 17); // X and Y position on the screen             
<br/>
   
<br/>
<br/>
//--------------------------------------END ICONS------------------------------------------------\\
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
///////////////////////////////////////////////////////////////////////////////////////////////////
<br/>
//----------------------------------------BEGIN--------------------------------------------------\\
<br/>
 
<br/>
while (1)
<br/>
{
<br/>
    PA_MoveSprite(0);
<br/>
    PA_WaitForVBL();
<br/>
}
<br/>
   
<br/>
return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Quipeace[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161954 - sgeos - Wed Aug 20, 2008 10:47 am</h4>
    <div class="postbody"><span class="postbody">I'm not familiar with PAlib, but I'll hazard a guess and say that sprite positioning and input are separate tasks.  If you want to move a sprite with the stylus, you will have to figure out where the stylus is and where your sprite is.  If your stylus is dragging the sprite, then you move the sprite with the stylus.  This really is not much different from moving with the pad, expect that you need some way to determine if you should be dragging a given game object.
<br/>
<br/>
You could set the position of the game object to the cursor location, or to the cursor location plus an offset (if you want to center the on part of the sprite), or you could move the sprite based cursor movement.  (change = new - old)
<br/>
<br/>
Reading your code, it does not appear that the sprite x and y position variables are being used.  My guess is that PA_MoveSprite() is working some automagic that you need to stop using.  If you do not want to move up and down, I suspect you'll need to manually update the x, but not y position.
<br/>
<br/>
-Brendan</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161955 - AntonioND - Wed Aug 20, 2008 11:13 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sgeos wrote:</b></span></td> </tr> <tr> <td class="quote">Reading your code, it does not appear that the sprite x and y position variables are being used.  My guess is that PA_MoveSprite() is working some automagic that you need to stop using.  If you do not want to move up and down, I suspect you'll need to manually update the x, but not y position.
<br/>
<br/>
-Brendan</td> </tr></table><span class="postbody">
<br/>
You're right.
<br/>
<br/>
<br/>
Quipeace, you should use:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">PA_MoveSprite(0);
<br/>
PA_SetSpriteY(0,17);</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
EDIT: This kind of questions should go to PAlib's forum: 
<br/>
<a href="http://www.palib.info/" target="_blank">http://www.palib.info/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161956 - Quipeace - Wed Aug 20, 2008 11:32 am</h4>
    <div class="postbody"><span class="postbody">Thanks alot, and thanks for pointing me to that forum too, i didnt know about it (ill post my palib questions there from now)
<br/>
<br/>
THANKS
<br/>
<br/>
EDIT: im getting an error using the PA_SetSpriteY, not declared in this scope, but ill go to the palib forum for that ;)
<br/>
<br/>
EDIT: got it working, it needed a nother value for the screen ;) thanks again.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
