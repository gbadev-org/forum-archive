<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Can I display more than 32 sprites? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Can I display more than 32 sprites?</h2>
<div id="posts">
<div class="post">
    <h4>#137860 - Phantaseur - Thu Aug 16, 2007 8:20 pm</h4>
    <div class="postbody"><span class="postbody">Again I have problems with sprites, now I just cannot display more than 32 sprites. In tutorials next code is used </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
   for (int i = 0; i &lt; 128; i++){
<br/>
   snspr[i].attribute[0] = ATTR0_DISABLED;
<br/>
   snspr[i].attribute[1] = 0;
<br/>
   snspr[i].attribute[2] = 0;
<br/>
   }
<br/>
   for (int i = 0; i &lt; 32; i++) {
<br/>
   sprot[i].hdx = 256;
<br/>
   sprot[i].hdy = 0;
<br/>
   sprot[i].vdx = 0;
<br/>
   sprot[i].vdy = 256;
<br/>
   }</td> </tr></table><span class="postbody">
<br/>
So I tought it's possible use 128 sprites on the screen and just 32 of them can be rotated. Now I don't need rotating sprites, but I want see more than 32 sprites on the screen.
<br/>
I use 8x8 sprites with 256 colors &amp; it takes just two kilobytes (2048 bytes) of vram.
<br/>
<br/>
How can I get more than 32 sprites on the screen?</span><span class="gensmall"><br/><br/>Last edited by Phantaseur on Sun Aug 19, 2007 10:38 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#137865 - jenswa - Thu Aug 16, 2007 8:50 pm</h4>
    <div class="postbody"><span class="postbody">You probably should leave out the last for loop which setups the rotating stuff for the 32 sprites. Because I thinks when that's enabled you can only have 32 and not 128.
<br/>
<br/>
But I am not sure if I understand this correct, since I've only programmed for the GBA. And there was this situation with rotating backgrounds and the memory space they occupy.
<br/>
<br/>
So if you don't need the rotating stuff, just leave out of the code, or disable it by commenting out the code.<br/>_________________<br/>It seems this wasn't lost after all.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137867 - Phantaseur - Thu Aug 16, 2007 9:03 pm</h4>
    <div class="postbody"><span class="postbody">Commented successfully. Not helped.
<br/>
I still see just 32 sprites....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137873 - josath - Thu Aug 16, 2007 10:31 pm</h4>
    <div class="postbody"><span class="postbody">You can have 128 sprites easily. (more if you do some clever tricks)
<br/>
Please post your code, if you would like us to help find your bug.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137886 - knight0fdragon - Fri Aug 17, 2007 3:09 am</h4>
    <div class="postbody"><span class="postbody">you can have 128 sprites, but some of the sprites have to share the 32 slots available in the rotating matrix<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137894 - Phantaseur - Fri Aug 17, 2007 6:00 am</h4>
    <div class="postbody"><span class="postbody">What means clever triks?
<br/>
What means share the slots and how can I do it?
<br/>
<br/>
<span style="font-size: 7px; line-height: normal">http://rapidshare.com/files/49478109/snake.tar.gz.html
<br/>
Here is my code, but there is no comments...
<br/>
When snake grows up to 32, you cannot see part of it.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137909 - PypeBros - Fri Aug 17, 2007 10:32 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Phantaseur wrote:</b></span></td> </tr> <tr> <td class="quote">Again I have problems with sprites, now I just cannot display more than 32 sprites. In tutorials next code is used <table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
	for (int i = 0; i &lt; 128; i++){
<br/>
	snspr[i].attribute[0] = ATTR0_DISABLED;
<br/>
	snspr[i].attribute[1] = 0;
<br/>
	snspr[i].attribute[2] = 0;
<br/>
	}
<br/>
	for (int i = 0; i &lt; 32; i++) {
<br/>
	sprot[i].hdx = 256;
<br/>
	sprot[i].hdy = 0;
<br/>
	sprot[i].vdx = 0;
<br/>
	sprot[i].vdy = 256;
<br/>
	}</td> </tr></table><span class="postbody">
<br/>
So I tought it's possible use 128 sprites on the screen and just 32 of them can be rotated. Now I don't need rotating sprites, but I want see more than 32 sprites on the screen.
<br/>
I use 8x8 sprites with 256 colors &amp; it takes just two kilobytes (2048 bytes) of vram.
<br/>
<br/>
How can I get more than 32 sprites on the screen?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
What you show from the tutorial is the part that cleans up the local sprite table (the one that is copied over registers at Vblank). snspr is your sprite attributes table, defining position, size, and misc. stuff of the sprites. If you want to activate sprites, you need to change at least attribute 0[code] to e.g. ATTR0_COLOR_256 | ATTR0_SQUARE
<br/>
somewhere later in your code.
<br/>
<br/>
sprot, as many have pointed out, is the set of matrices used for rotation. You may have 128 rotated sprites, but only using 32 different scaling/rotation transformations.
<br/>
<br/>
Pointing us at the exact tutorial you're talking about and looking in that tutorial for other references to the snspr[] array will help. Avoid doing anything application-related setup in that spritetable-cleanup function: you'll just make it messy and your changes my be discarded by functions called later :P<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137942 - Phantaseur - Fri Aug 17, 2007 8:42 pm</h4>
    <div class="postbody"><span class="postbody">I've understood, attribute[2] (which is id) is not uniqe for each sprite, it is unique for each image of sprite, I can have same id for different sprites with same images. So I can have up to 128 sprites with just seven images (as I need), problem solved.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137987 - SaruCoder - Sat Aug 18, 2007 6:06 am</h4>
    <div class="postbody"><span class="postbody">Small little comment even though you solved your problem.
<br/>
<br/>
The <span style="font-style: italic">id</span> that goes into attribute[2] is more like an offset to a tile (8x8 pixels) in SPRITE_GFX or SPRITE_GFX_SUB.  And the id has a range of 0 to 1023*
<br/>
<br/>
*depending on which mode you're in and if you're using 1D or 2D sprites, so it can be 0 to 255, worst case. <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=13901" target="_blank">http://forum.gbadev.org/viewtopic.php?t=13901</a>
<br/>
<br/>
The id can point to a 0.5, 1, 2, 4 tile block size, again depending on if you're using
<br/>
DISPLAY_SPR_1D_SIZE_32
<br/>
DISPLAY_SPR_1D_SIZE_64
<br/>
DISPLAY_SPR_1D_SIZE_128
<br/>
DISPLAY_SPR_1D_SIZE_256
<br/>
when you set your videoMode. (Please correct me if I'm wrong in the numbers)
<br/>
<br/>
Sooo... I don't why it would hit a 32 sprite limit with 8x8 pixel sprites, but it's very possible for 16x16 pixel sprites under the right conditions (videoMode set to DISPLAY_SPR_2D | DISPLAY_SPR_1D_SIZE_32 | MODE_*_2D)
<br/>
<br/>
MODE_*_2D would be either MODE_3_2D, MODE_4_2D, or MODE_5_2D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138010 - tepples - Sat Aug 18, 2007 12:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SaruCoder wrote:</b></span></td> </tr> <tr> <td class="quote">The id can point to a 0.5, 1, 2, 4 tile block size, again depending on if you're using
<br/>
DISPLAY_SPR_1D_SIZE_32
<br/>
DISPLAY_SPR_1D_SIZE_64
<br/>
DISPLAY_SPR_1D_SIZE_128
<br/>
DISPLAY_SPR_1D_SIZE_256
<br/>
when you set your videoMode. (Please correct me if I'm wrong in the numbers)</td> </tr></table><span class="postbody">
<br/>
In fact, that's a 32, 64, 128, or 256 byte offset. True, it's 1/2, 1, 2, or 4 tiles if your sprite cels are 256-color, but it's 1, 2, 4, or 8 if your sprite cels are 16-color.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
