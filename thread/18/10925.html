<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Trying to avoid Stylus Jumping!! The scene needs you!! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Trying to avoid Stylus Jumping!! The scene needs you!!</h2>
<div id="posts">
<div class="post">
    <h4>#99911 - PadrinatoR - Thu Aug 24, 2006 7:07 pm</h4>
    <div class="postbody"><span class="postbody">As it seems that no one is reading the other thread (http://forum.gbadev.org/viewtopic.php?t=7980&amp;start=120&amp;postdays=0&amp;postorder=asc) I have decided to open this new one hoping that it will be read even by the most lazy ones :D :P
<br/>
<br/>
As you may know, there is a very annoying problem with the touchscreen that produces jumps when you touch the touchscreen gently. Last few days I've been modifying libnds code in order to achieve a good reading of the touchscreen.
<br/>
<br/>
I ask you to test the last method and tell me your results, please. It will help us to fix this annoying ?bug?
<br/>
<br/>
Well, here is the link: <a href="http://www.ftp.nu/files/5434/" target="_blank">http://www.ftp.nu/files/5434/</a>
<br/>
<br/>
You must test 2 things:
<br/>
<br/>
1) Can you draw in the whole screen?? (In some zones you may need to touch harder)
<br/>
<br/>
2) If you touch gently the screen... do jumping lines appear??
<br/>
<br/>
Thank you in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99927 - laurens - Thu Aug 24, 2006 7:37 pm</h4>
    <div class="postbody"><span class="postbody">As i told, theres no problems for me, at all!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99929 - PadrinatoR - Thu Aug 24, 2006 7:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>laurens wrote:</b></span></td> </tr> <tr> <td class="quote">As i told, theres no problems for me, at all!</td> </tr></table><span class="postbody">
<br/>
<br/>
This is a new version... have you tested it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99934 - HyperHacker - Thu Aug 24, 2006 8:07 pm</h4>
    <div class="postbody"><span class="postbody">It doesn't jump, but light touches are ignored often. If I'm not pressing hard on the screen as I draw, it just ignores the touch altogether. The pressure often goes negative and shows something like 00-25. I also can't reach the top right or bottom left. As I draw along the top the line actually slants downward. This doesn't happen with any other app.
<br/>
My DS was V1 originally, so it's old.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99936 - PadrinatoR - Thu Aug 24, 2006 8:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">It doesn't jump, but light touches are ignored often. If I'm not pressing hard on the screen as I draw, it just ignores the touch altogether.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, light touches produce incorrect values, so they're ignored. If I didn't ignore them, there would be jumping lines.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">The pressure often goes negative and shows something like 00-25.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, that values are ignored, don't worry :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">I also can't reach the top right or bottom left. As I draw along the top the line actually slants downward. This doesn't happen with any other app.</td> </tr></table><span class="postbody">
<br/>
<br/>
How many pixels does it slant downward? A "normal" (in this test) behaviour is that the border lines appear 0, 1 or 2 pixels displaced from its correct position. Is that what you have noticed? Or it's more displaced?
<br/>
<br/>
Thank you for answering ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99938 - Goosey - Thu Aug 24, 2006 8:19 pm</h4>
    <div class="postbody"><span class="postbody">A little birdy told me to try polling the screen every 4 ms and keeping a running value in memory. Maybe some fancy averaging stuff.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99942 - tepples - Thu Aug 24, 2006 9:10 pm</h4>
    <div class="postbody"><span class="postbody">Works for me. (DS classic, originally fw2)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99946 - PadrinatoR - Thu Aug 24, 2006 9:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Goosey wrote:</b></span></td> </tr> <tr> <td class="quote">A little birdy told me to try polling the screen every 4 ms and keeping a running value in memory. Maybe some fancy averaging stuff.</td> </tr></table><span class="postbody">
<br/>
<br/>
I'll try it but... I think that's not the solution because you can get an invalid value in every moment :S</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100015 - Thomas - Fri Aug 25, 2006 12:27 pm</h4>
    <div class="postbody"><span class="postbody">Works fine on my old DS Phat, you only need to apply some more pressure than usual to make it register your touch. But it doesn't jump at all, the touch position is very stable.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100058 - PadrinatoR - Fri Aug 25, 2006 9:00 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
As I say here: <a href="http://forum.gbadev.org/viewtopic.php?t=7980&amp;start=135" target="_blank">http://forum.gbadev.org/viewtopic.php?t=7980&amp;start=135</a>
<br/>
<br/>
I'm disassembling a commercial game. I started with Polarium but now I'm disassembling Brain Training.
<br/>
<br/>
I've got the algorithm which reads the touchscreen in Brain Training, but it doesn't seem to be enough to avoid stylus jumping.
<br/>
<br/>
This is the algorithm:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">SORRY, I'M CORRECTING IT</td> </tr></table><span class="postbody">
<br/>
<br/>
It's only a semi-literal translation from assembler to C (a lot of lines can be combined), and it works and gives good results, but doesn't eliminate jumping problem.
<br/>
<br/>
I've seen some curious things:
<br/>
<br/>
- It doesn't read Z1 and Z2 values (used to calculate stylus pressure).
<br/>
- It reads only TEMP1 sensor, but not TEMP2.
<br/>
- It reads the AUX sensor in two ways: 8bit transfer (0xEC) and 12bit transfer (0xE4).
<br/>
<br/>
These three things occurs in Wario Ware Touched, Brain Training and Polarium (the only three games I've disassembled).
<br/>
<br/>
Also, the three games read first TEMP1 sensor and then PENIRQ, so I'm thinking it may be a stabilizer or something like that, which lets Nintendo take correct data from the touchscreen. At the moment, I don't know when AUX1 is read.
<br/>
<br/>
More things... I've not found in ARM7 code any calibration algorithm and I'm not able to find it in ARM9 code (I don't know if IDA Pro disassembles it right, but something tells me it doesn't, because I'm not able to find any stylus code :S). If someone could say me how to detect User Settings reading, I'll thank him a lot :D
<br/>
<br/>
That's all! I'll continue studying asm code haha</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100064 - HyperHacker - Fri Aug 25, 2006 10:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">It doesn't jump, but light touches are ignored often. If I'm not pressing hard on the screen as I draw, it just ignores the touch altogether.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, light touches produce incorrect values, so they're ignored. If I didn't ignore them, there would be jumping lines.</span></td> </tr></table><span class="postbody">
<br/>
Well that's just the problem... making it too sensitive creates jumps, but making it not sensitive enough makes it ignore valid light touches. In Pictochat I can drag my stylus lightly across the screen and draw a line no problem, but in this app I'd only get the occasional dot. If a happy medium can't be found that stops the jumping while allowing light touches, maybe we'll have to start storing some pressure sensitivity value in an unused firmware region. (Or maybe there already is one.)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">The pressure often goes negative and shows something like 00-25.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, that values are ignored, don't worry :)</span></td> </tr></table><span class="postbody">
<br/>
OK, but just to clarify, I meant it actually says "00-25", not zero to 25.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">I also can't reach the top right or bottom left. As I draw along the top the line actually slants downward. This doesn't happen with any other app.</td> </tr></table><span class="postbody">
<br/>
<br/>
How many pixels does it slant downward? A "normal" (in this test) behaviour is that the border lines appear 0, 1 or 2 pixels displaced from its correct position. Is that what you have noticed? Or it's more displaced?</span></td> </tr></table><span class="postbody">
<br/>
It's fine at the top left and bottom right but about 6 pixels out of place at the top right and bottom left.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100414 - PadrinatoR - Sun Aug 27, 2006 7:53 pm</h4>
    <div class="postbody"><span class="postbody">Thanks <span style="font-weight: bold">HyperHacker</span>. I continue studying source from commercial games. As I said in my previous post, Nintendo doesn't measure Z1 and Z2, so there is no pressure limitation or something like that.
<br/>
<br/>
I've found in Tetris DS ARM9 source the place where calibration points are used and I've got the algorithm used to convert from ADC coordinates to SCR coordinates. Now I can confirm that there is no more calibration data, <span style="font-weight: bold">Tetris DS only uses the two known points</span>.
<br/>
<br/>
Now I'm looking for the code that ensures that read data from touchscreen is not erroneous, and what's the meaning of some memory zones.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100418 - Lick - Sun Aug 27, 2006 8:17 pm</h4>
    <div class="postbody"><span class="postbody">Go Go Go Padrinator!
<br/>
<br/>
Really, I'm behind all your investigation. I believe that it will help the scene, perhaps unnoticed, but still it helps awfully much. You're a great guy!<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100427 - PadrinatoR - Sun Aug 27, 2006 8:54 pm</h4>
    <div class="postbody"><span class="postbody">hahaha thank you very much, Lick!!
<br/>
<br/>
I think this is the most important feature of Nintendo DS: the touchscreen, and it's important to get it working fine.
<br/>
<br/>
<br/>
<br/>
Mmm I've noticed an interesting thing... stylus jumping is present in Another Code: Two Memories :S I touched gently the borders of the screen and the cursor (used to investigate something) jumped a little.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100517 - PadrinatoR - Mon Aug 28, 2006 12:10 pm</h4>
    <div class="postbody"><span class="postbody">More data:
<br/>
<br/>
- As I said before, TEMP1 sensor is read but <span style="font-weight: bold">information is not stored anywhere</span>.
<br/>
<br/>
- It seems that Nintendo modifies 'range' variable automatically. The range is a value from 20 to 35 and it is adjusted depending on last read data. The code is something like this (remember that it's ported from asm to C++):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
static uint8 counter_1 = 0;
<br/>
static uint8 counter_2 = 0;
<br/>
static uint8 range = 20;
<br/>
static uint8 min_range = 20;
<br/>
<br/>
void UpdateRange(uint8 *range, uint16 dist_max_in_last_reading){
<br/>
   if(touchscreen_touched){
<br/>
      if(!error_reading_data){
<br/>
         counter_2 = 0;
<br/>
         if(dist_max_in_last_reading &gt;= ((*range) &gt;&gt; 1)){
<br/>
            counter_1 = 0;
<br/>
         }else{
<br/>
            counter_1++;
<br/>
            if(counter_1 &gt;= 4){
<br/>
               counter_1 = 0;
<br/>
               if((*range) &gt; min_range){
<br/>
                  (*range)--;
<br/>
                  counter_2 = 3;
<br/>
               }
<br/>
            }
<br/>
         }
<br/>
      }else{
<br/>
         counter_1 = 0;
<br/>
         counter_2++;
<br/>
         if(counter_2 &gt;= 4){
<br/>
            counter_2 = 0;
<br/>
            if((*range) &lt; 35){
<br/>
               (*range)++;
<br/>
            }
<br/>
         }
<br/>
      }
<br/>
   }else{
<br/>
      counter_2 = 0;
<br/>
      counter_1 = 0;
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
<span style="font-weight: bold">dist_max_in_last_reading</span> is a variable which stores the max. distance between values in the last reading (because when Nintendo reads the touchscreen, they take 5 values and compare all with all and get the highest distance. And it's the highest between the maximum distance when reading X and the maximum distance when reading Y.</span><span class="gensmall"><br/><br/>Last edited by PadrinatoR on Tue Aug 29, 2006 9:47 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#100527 - PadrinatoR - Mon Aug 28, 2006 1:25 pm</h4>
    <div class="postbody"><span class="postbody">I've ported the function that checks if stylus was pressed. It's called before <span style="font-weight: bold">and after</span> measure X and Y coordiantes... why?? I don't know... In addition, as I said in a previous post, Nintendo measures the TEMP1 sensor first (but not stores information about it anywhere) and then checks REG_KEYXY ( called EXTKEYIN in: <a href="http://nocash.emubase.de/gbatek.htm#dskeypad" target="_blank">http://nocash.emubase.de/gbatek.htm#dskeypad</a> ).
<br/>
<br/>
Well, here you have the mentioned code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u8 CheckStylus(void){
<br/>
   SerialWaitBusy();
<br/>
<br/>
   REG_SPICNT = 0x8A01;
<br/>
   REG_SPIDATA = 0x84;
<br/>
<br/>
   SerialWaitBusy();
<br/>
<br/>
   REG_SPIDATA = 0;
<br/>
<br/>
   SerialWaitBusy();
<br/>
<br/>
   REG_SPICNT = 0x8201;
<br/>
   REG_SPIDATA = 0;
<br/>
<br/>
   SerialWaitBusy();
<br/>
<br/>
   if(last_time_touched){
<br/>
      if( !(REG_KEYXY &amp; 0x40) )
<br/>
         return 1;
<br/>
      else{
<br/>
         REG_SPICNT = 0x8A01;
<br/>
         REG_SPIDATA = 0x84;
<br/>
<br/>
         SerialWaitBusy();
<br/>
<br/>
         REG_SPIDATA = 0;
<br/>
<br/>
         SerialWaitBusy();
<br/>
<br/>
         REG_SPICNT = 0x8201;
<br/>
         REG_SPIDATA = 0;
<br/>
<br/>
         SerialWaitBusy();
<br/>
<br/>
         return !(REG_KEYXY &amp; 0x40) ? 2 : 0;
<br/>
      }
<br/>
   }else{
<br/>
      return !(REG_KEYXY &amp; 0x40) ? 1 : 0;
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
In the first call, before measuring X and Y, it doesn't matter if the function returns 1 or 2, because both values are interpreted as a pen touch, but in the second call, after measuring X and Y, these values are taken into account and it has different consequences. It's "more valid" a 1 than a 2. Zero will always mean that stylus wasn't touching the screen.</span><span class="gensmall"><br/><br/>Last edited by PadrinatoR on Tue Aug 29, 2006 10:28 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#100669 - PadrinatoR - Tue Aug 29, 2006 1:33 pm</h4>
    <div class="postbody"><span class="postbody">More algorithms. This is the algorithm used by Nintendo to convert from ADC values to SCR values:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">static int32 a, b, c, d;
<br/>
<br/>
void PrecalculateCalibrationData(void){   
<br/>
   c = ((PersonalData-&gt;calX1 - PersonalData-&gt;calX2) &lt;&lt; 8)/(PersonalData-&gt;calX1px - PersonalData-&gt;calX2px);
<br/>
   d = ((PersonalData-&gt;calY1 - PersonalData-&gt;calY2) &lt;&lt; 8)/(PersonalData-&gt;calY1px - PersonalData-&gt;calY2px);
<br/>
   
<br/>
   a = ((((PersonalData-&gt;calX1 + PersonalData-&gt;calX2) &lt;&lt; 8) - (c * (PersonalData-&gt;calX1px + PersonalData-&gt;calX2px))) &lt;&lt; 9) &gt;&gt; 16;
<br/>
   b = ((((PersonalData-&gt;calY1 + PersonalData-&gt;calY2) &lt;&lt; 8) - (d * (PersonalData-&gt;calY1px + PersonalData-&gt;calY2px))) &lt;&lt; 9) &gt;&gt; 16;
<br/>
<br/>
   c = 0x10000000 / c;
<br/>
   d = 0x10000000 / d;
<br/>
}
<br/>
<br/>
void ADC_to_SCR(uint16 adc_x, uint16 adc_y, u8 *scr_x, u8 *scr_y){
<br/>
   s64 aux4;
<br/>
   uint32 aux1, aux2, aux3, aux5, aux6, aux7, aux8;
<br/>
<br/>
   aux1 = adc_x &lt;&lt; 2;
<br/>
   aux2 = aux1 &gt;&gt; 31;
<br/>
   aux1 -= a;
<br/>
   aux3 = aux2 - (a &gt;&gt; 31);
<br/>
   aux4 = (c * aux1);
<br/>
   aux5 = (c * aux3) + (aux4 &gt;&gt; 32);
<br/>
   aux6 = c &gt;&gt; 31;
<br/>
   aux7 = (aux6 * aux1) + aux5;
<br/>
   aux8 = ((aux4 &lt;&lt; 32) &gt;&gt; 32) &gt;&gt; 22;
<br/>
   aux8 = aux8 | (aux7 &lt;&lt; 10);
<br/>
   *scr_x = aux8;
<br/>
<br/>
   aux1 = adc_y &lt;&lt; 2;
<br/>
   aux2 = aux1 &gt;&gt; 31;
<br/>
   aux1 -= b;
<br/>
   aux3 = aux2 - (b &gt;&gt; 31);
<br/>
   aux4 = (d * aux1);
<br/>
   aux5 = (d * aux3) + (aux4 &gt;&gt; 32);
<br/>
   aux6 = d &gt;&gt; 31;
<br/>
   aux7 = (aux6 * aux1) + aux5;
<br/>
   aux8 = ((aux4 &lt;&lt; 32) &gt;&gt; 32) &gt;&gt; 22;
<br/>
   aux8 = aux8 | (aux7 &lt;&lt; 10);
<br/>
   *scr_y = aux8;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, I know that this code is very... "ugly", it is ported instruction by instruction from asm code. If someone wants to reduce it... it works perfectly as I've posted it. My main target is to avoid stylus jumping.
<br/>
<br/>
Both functions are executed in ARM9 using these division "commands":
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#dsmaths" target="_blank">http://nocash.emubase.de/gbatek.htm#dsmaths</a>
<br/>
<br/>
As I could see, there are only <span style="font-weight: bold">2 calibration points</span>, so we can discard any hidden calibration point which doesn't let us get the right coordinates of the screen.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101117 - PadrinatoR - Sat Sep 02, 2006 8:03 pm</h4>
    <div class="postbody"><span class="postbody">OK!! I think I've got all the algorithms used by Nintendo to get the stylus working right in Tetris DS Downloadable Demo but... it doesn't seem to be enough, so I've modified the code a little and it seems to be very very accurate.
<br/>
<br/>
The only ugly thing is that with the Nintendo algorithm, it seems that the first touch is not interpreted correctly but... I'm tired and fed up with assembler code haha
<br/>
<br/>
I think that Tetris is not the best game to disassemble, but I haven't got Pictochat's binary and Brain Training is not disassembled correctly (only ARM7 is well disassembled, but the important part is on ARM9, because ARM7 code is almost the same in all games).
<br/>
<br/>
<span style="font-weight: bold">If anyone knows how to get Pictochat's binary from firmware, please, send me an email or a PM</span>.
<br/>
<br/>
The new test is here:
<br/>
<br/>
<a href="http://www.ftp.nu/files/5567/" target="_blank">http://www.ftp.nu/files/5567/</a>
<br/>
<br/>
I've run it in 2 DS's, in both I can draw in the whole screen and one have more jumps than the other one, but they're veeeeery small jumps.
<br/>
<br/>
Tell me your results, please :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101129 - yal - Sat Sep 02, 2006 10:18 pm</h4>
    <div class="postbody"><span class="postbody">It work just well on my Ds (very old model), I have no stylus jumping at all :)
<br/>
<br/>
Regarding the corner, I'm about at 6 or 7 pixels from the top, 3 from the left, 4 or 5 from the right, and 0 from the bottom.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101130 - PadrinatoR - Sat Sep 02, 2006 10:21 pm</h4>
    <div class="postbody"><span class="postbody">Have you tried to re-calibrate it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101131 - yal - Sat Sep 02, 2006 10:25 pm</h4>
    <div class="postbody"><span class="postbody">I just did, and I got almost the same result. I am maybe 1 pixel closer from the top now</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101179 - spinal_cord - Sun Sep 03, 2006 5:59 pm</h4>
    <div class="postbody"><span class="postbody">I've got a 2 pixel gap bottom and right, 1 pixel left and 0 pixels top.
<br/>
As for the accuracy, its the most accurate I've ever seen, and i didn't notice any jumping even with light presses.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101188 - Mrshlee - Sun Sep 03, 2006 7:13 pm</h4>
    <div class="postbody"><span class="postbody">This was almost perfect.. I didn't have a single jumps or light touches lines..
<br/>
The lines I did have were pretty much drawn perfect.
<br/>
<br/>
Very impressive. hope this is included in Devkitpro :D<br/>_________________<br/><a class="postlink" href="http://MrShlee.com/" target="_blank">MrShlee.com</a>
<br/>
Projects
<br/>
<a class="postlink" href="http://dev-scene.com/" target="_blank">Dev-Scene</a>
<br/>
<a class="postlink" href="http://MyTechpedia.com/" target="_blank">MyTechpedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101193 - tepples - Sun Sep 03, 2006 7:58 pm</h4>
    <div class="postbody"><span class="postbody">Gaps between the side of the screen and the side of the touchable area are caused by the tip of the stylus, whose radius is larger than 1 pixel.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101271 - HyperHacker - Mon Sep 04, 2006 3:03 am</h4>
    <div class="postbody"><span class="postbody">Hm, if someone knew how to grab Pictochat's binary from firmware, it might be possible to make a program that makes a .nds from it out of a firmware dump. That'd be a nice legal way to provide Pictochat for people who use homebrew firmware; just have them dump their current FW first, then they can run the .nds whenever.
<br/>
Heck, maybe the entire firmware could be made a .nds. :p<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101302 - PadrinatoR - Mon Sep 04, 2006 9:16 am</h4>
    <div class="postbody"><span class="postbody">Thank you for answering :D
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote">The only ugly thing is that with the Nintendo algorithm, it seems that the first touch is not interpreted correctly but... I'm tired and fed up with assembler code haha</td> </tr></table><span class="postbody">
<br/>
<br/>
I was wrong, that 'ugly thing' was my fault, because I modified PAlib in order to fix a bug... and I created a new bug hahaha
<br/>
<br/>
I have Pictochat's binary (at least I have a BIOS dump of NDS) but I'm not able to disassemble it because I don't know where is the entry point of the program.
<br/>
<br/>
Then, at this point, I'm very pleased with the results because they're near to Nintendo ones (they are not able to avoid stylus jumping completely), so I've finished my investigation. If someone is not convinced enough and wants to continue studying stylus jumping, you can send me a PM and I will inform you of everything I did to disassemble comercial games and find stylus code.
<br/>
<br/>
You may be wondering why I said 'they are near to Nintendo results' if I've disassembled Nintendo's games. The answer is: disassembling and interpreting code from a binary requires to suppose a lot of things and my ports are not exactly the same code that Nintendo wrote. The only algorithms perfectly ported from commercial games have been posted in this thread. The rest of them may not be exactly the same, but as you have seen they seem to work pretty well :)
<br/>
<br/>
Well, I'm gonna add this new method to the last libnds and PAlib and upload it to let you to download and use it :) Obviously the source code is included in the package ^^</span><span class="gensmall"><br/><br/>Last edited by PadrinatoR on Mon Sep 04, 2006 11:53 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#101304 - MelGibson - Mon Sep 04, 2006 9:28 am</h4>
    <div class="postbody"><span class="postbody">Thanks PadrinatoR for all the effort you have put in :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101308 - melw - Mon Sep 04, 2006 9:51 am</h4>
    <div class="postbody"><span class="postbody">So far the best homebrew touchscreen implementation for sure. Didn't get any jumping with light touches and the accurancy is ok as well. What comes to the padding - I have also some pixels of space on the left and top borders, but I believe it's the same what comes to commercial games - they just don't use the whole screen for drawing or input in most cases. +1 vote for getting this included in libnds &amp; excellent work, Padrinator!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101317 - masscat - Mon Sep 04, 2006 12:00 pm</h4>
    <div class="postbody"><span class="postbody">Good work PadrinatoR (the joys of looking through assembler), your code works very well for me.
<br/>
<br/>
I think the original cause of the jumping maybe mechanical, a bit like boucing with switches. That is, there is a point where a touchscreen is just giving a reading (not 0). Any less presure and the reading is going to be invalid (would read as zero). If this change were to happen during conversion then the reading is going to be rubbish. Having never worked with touchscreens before I do not know if this sort of thing happens.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101323 - PadrinatoR - Mon Sep 04, 2006 12:24 pm</h4>
    <div class="postbody"><span class="postbody">As I promised, I've uploaded all the stuff.
<br/>
<br/>
<a class="postlink" href="http://www.ftp.nu/files/5586/" target="_blank">libnds 19 July 2006 - Modified by PadrinatoR</a>
<br/>
<a class="postlink" href="http://www.ftp.nu/files/5587/" target="_blank">PAlib 2 September 2006 - Modified by PadrinatoR</a>
<br/>
<a class="postlink" href="http://www.ftp.nu/files/5584/" target="_blank">DrawIt NO JUMPING - FINAL TEST - By PadrinatoR</a>
<br/>
<br/>
libnds and PAlib have a changes.txt to orient you if you wanna see what changes I've made in both libs.
<br/>
<br/>
That's all!! Enjoy it!!
<br/>
<br/>
EDIT: Thank you for your comments!! :D I only want a big NDS scene... so we'll need to use our stylus!! haha</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101363 - zzo38computer - Mon Sep 04, 2006 7:12 pm</h4>
    <div class="postbody"><span class="postbody">This is good. With these codes, I can add calibration to FWNITRO.<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101375 - PadrinatoR - Mon Sep 04, 2006 7:56 pm</h4>
    <div class="postbody"><span class="postbody">Feel free to use them ;)
<br/>
<br/>
I don't know if the third calibration point is important, I only know that it's not used to convert ADC values to pixels.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101403 - zzo38computer - Tue Sep 05, 2006 3:24 am</h4>
    <div class="postbody"><span class="postbody">I don't have time now, but when I have time I will do it.<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101611 - yal - Wed Sep 06, 2006 9:29 pm</h4>
    <div class="postbody"><span class="postbody">I tried your version of libnds and now the stylus doesn't work at all on my project :(
<br/>
<br/>
Is there any change to make in the stylus code to use your new version of the lib?
<br/>
<br/>
Here is the code I use to read the stylus
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void CNdsApp::ProcessInput()
<br/>
{
<br/>
   // read the button states
<br/>
   // read the touchscreen coordinates
<br/>
   scanKeys();   
<br/>
   touchPosition touch = touchReadXY();
<br/>
   
<br/>
   SScreenCoordinate TouchPos;
<br/>
   TouchPos.bValid   = true;
<br/>
   TouchPos.x      = touch.px;
<br/>
   TouchPos.y      = touch.py;
<br/>
<br/>
   if (keysDown() &amp; KEY_TOUCH)
<br/>
   {
<br/>
      OnTouch(TouchPos);
<br/>
      m_bPreviouslyTouching = true;
<br/>
   }
<br/>
   else if (keysHeld() &amp; KEY_TOUCH)
<br/>
      OnMove(TouchPos);
<br/>
   else if (m_bPreviouslyTouching)
<br/>
   {
<br/>
      m_bPreviouslyTouching = false;
<br/>
      OnUnTouch(TouchPos);
<br/>
   }
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
It worked fine on emulator and with the jumping probleme on DS, but now it doesn't work neither on DS nor on emu (I tried Ideas, dualis and no$gba). When I touch the screen, my cursor move in the left top corner and don't want to move anymore.
<br/>
<br/>
Could you post some code snippet of the good way to use the stylus with your modification?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101613 - PadrinatoR - Wed Sep 06, 2006 9:34 pm</h4>
    <div class="postbody"><span class="postbody">Is that code executed in ARM7 or ARM9?<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101614 - yal - Wed Sep 06, 2006 9:37 pm</h4>
    <div class="postbody"><span class="postbody">It's on Arm9, sorry, I forgot to mention it.
<br/>
I used the Arm9 template of libnds for my project</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101617 - PadrinatoR - Wed Sep 06, 2006 9:42 pm</h4>
    <div class="postbody"><span class="postbody">Ok! My modification of libnds adds a new field to touchPosition struct: 'touched'.
<br/>
<br/>
This field is updated in touchReadXY and tells you if stylus touching is considered as a valid touch, so you must use it to detect if the user is using the touchscreen.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101619 - yal - Wed Sep 06, 2006 9:46 pm</h4>
    <div class="postbody"><span class="postbody">so I should replace my
<br/>
<br/>
if (keysDown() &amp; KEY_TOUCH)
<br/>
<br/>
by
<br/>
<br/>
if (touch.touched)
<br/>
<br/>
or should I test both like that?
<br/>
<br/>
if ((keysDown() &amp; KEY_TOUCH) &amp;&amp; touch.touched)
<br/>
<br/>
EDIT:
<br/>
I tried both, and none of them seam to work :(
<br/>
actually I even tried 
<br/>
if (touch.touched)
<br/>
   ASSERT(false);
<br/>
<br/>
And my assert never happen (tested both on emu and hardware)</span><span class="gensmall"><br/><br/>Last edited by yal on Wed Sep 06, 2006 9:58 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#101622 - PadrinatoR - Wed Sep 06, 2006 9:56 pm</h4>
    <div class="postbody"><span class="postbody">It should be enough using touch.touched. I haven't used libnds because I use PAlib. If you want you can see PAlib/lib/arm9/PA/PA_Keys.c and look for PA_UpdateStylus function. It has only this code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void PA_UpdateStylus(void) {
<br/>
<br/>
   touchPosition touchPos = touchReadXY();
<br/>
<br/>
   Stylus.Newpress = touchPos.touched &amp;&amp; !Stylus.Held;
<br/>
   Stylus.Released = Stylus.Held &amp;&amp; !touchPos.touched;
<br/>
   Stylus.Held = touchPos.touched;
<br/>
   Stylus.X = touchPos.px;
<br/>
   Stylus.Y = touchPos.py;
<br/>
   Stylus.Pressure = (((touchPos.x* touchPos.z2) &gt;&gt; 6) / touchPos.z1) - (touchPos.x &gt;&gt; 6);   
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
This is the only code used by PAlib to read the touchscreen. I hope it helps you ;)
<br/>
<br/>
I think Stylus struct fields of PAlib are self-explainatory but if you need more help, ask me what you want, I'll try to help you as much as I can :D<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101626 - yal - Wed Sep 06, 2006 10:11 pm</h4>
    <div class="postbody"><span class="postbody">This is pretty much what I do, exept for the pressure that I don't understand, what is it for?
<br/>
<br/>
The things is that I don't seem to have touchPos.touched == true ever. I put an assert there, and it never happen. 
<br/>
<br/>
Is there something to initialize somewhere that I might have forget?
<br/>
<br/>
To install your lib, I just need to copy the file right? the source are here just for information, I wasn't suppose to compile anything myself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101628 - PadrinatoR - Wed Sep 06, 2006 10:16 pm</h4>
    <div class="postbody"><span class="postbody">You only have to use "my" libnds replacing the official ones. Obviously you have to compile them.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101629 - yal - Wed Sep 06, 2006 10:30 pm</h4>
    <div class="postbody"><span class="postbody">If by "compile them" you mean compile the source of the lib, it's not that obvious since your distrib of the lib came with libnds7.a and libnds9.a that seemed already compiled to me :)
<br/>
<br/>
Anyway, I used make.bat to compile the lib, it went fine, and it updated libnds7.a and libnds9.a but it didn't solved my problem at all :(
<br/>
<br/>
I'm done for tonight, time to have some sleep. I'll try to check pa_lib source code tomorow.
<br/>
<br/>
EDIT:
<br/>
I just noticed that your version for libnds is from the 19 july and the one for pa_lib from the 2 september, is that normal?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101630 - PadrinatoR - Wed Sep 06, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">Sorry!! I think I did a 'make clean' before compress it :S
<br/>
<br/>
If you want, you can send me your project and I can try to find the problem.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101633 - yal - Wed Sep 06, 2006 10:46 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Sorry!! I think I did a 'make clean' before compress it :S </td> </tr></table><span class="postbody">
<br/>
What for? It's easier for people that use your lib to not have to compile it themselve, at least I prefer not to having to compile :)
<br/>
<br/>
That would be nice, I just hope the bug won't be to ambarassing for me ;)
<br/>
I'll send you a PM right away.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101672 - abszero - Thu Sep 07, 2006 9:42 am</h4>
    <div class="postbody"><span class="postbody">For what it's worth, I'm experiencing the same problems yal describes.
<br/>
<br/>
As a simple test of the new routines, I've been fiddling with the two libnds input examples, touch_look and TouchTest.  I've tried a number of things in both, but nothing seems to work properly when using the modified libnds.  
<br/>
<br/>
It's especially clear in TouchTest since it reports the perceived stylus coordinates.  Compiling TouchTest as it comes in a fresh install of devkitpro gives me a version that works well except for the usual glitches at low pen pressure.  Compiling and linking the modified libnds on the other hand causes the coordinates to go nuts, changing in ways that aren't correlated with how you move the pen at all.
<br/>
<br/>
Now, I've only been dealing with DS development very seriously for about 24 hours now, so it's entirely possible I'm doing something stupid.  But I don't see anything obvious.  And just for the record, I'm using a DS Lite with one of the new M3 Lite MicroSDs, so that could have some effect too perhaps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101689 - PadrinatoR - Thu Sep 07, 2006 2:28 pm</h4>
    <div class="postbody"><span class="postbody">Hi! I've been looking for a mistake in yal's source and it seems to be all correct but... I've noticed that touchPosition struct is messed up O_o
<br/>
<br/>
I mean that for example touch.x is touch.y and touch.y is touch.px... and the rest of fields doesn't correspond with any logical value.
<br/>
<br/>
I'll be away for 4 days, I'll return on Sunday, so I'll try to find the error before I go out this afternoon.
<br/>
<br/>
Thanks for your comments!<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101690 - yal - Thu Sep 07, 2006 2:36 pm</h4>
    <div class="postbody"><span class="postbody">I got two tests in mind that I'll do tonight, but if you want to try it before leaving, here they are :
<br/>
<br/>
change your struct from
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
typedef struct touchPosition {
<br/>
	u8 error;
<br/>
	u8 touched;
<br/>
	int16	x;
<br/>
	int16	y;
<br/>
	int16	px;
<br/>
	int16	py;
<br/>
	int16	z1;
<br/>
	int16	z2;	
<br/>
} touchPosition;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
to
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
typedef struct touchPosition {
<br/>
	u8 error;
<br/>
	u8 touched;
<br/>
	int16	x;
<br/>
	int16	y;
<br/>
	int16	px;
<br/>
	int16	py;
<br/>
	int16	z1;
<br/>
	int16	z2;
<br/>
	u8 error;
<br/>
	u8 touched;
<br/>
} touchPosition;</td> </tr></table><span class="postbody">
<br/>
<br/>
And see if the value are still messed up, and how.
<br/>
<br/>
The second test would be to move my ProcessInput() into a C file and call it from my CPP class. That would be very weird if it fix the problem, but since your best guess for now is that it work with C and not CPP, it might worth the try.
<br/>
<br/>
good luck :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101692 - PadrinatoR - Thu Sep 07, 2006 2:49 pm</h4>
    <div class="postbody"><span class="postbody">Mmmm I don't know how are libnds projects organized... where is ARM7 code?<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101693 - yal - Thu Sep 07, 2006 2:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Mmmm I don't know how are libnds projects organized... where is ARM7 code?</td> </tr></table><span class="postbody">
<br/>
<br/>
If you are talking about my project, I don't know at all, but I was more than happy to not have to take care about it :)
<br/>
<br/>
I though it was all embeded into a lib with a minimal version of the code that threat input and others things for people that don't want to bother with 2 cpus</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101694 - PadrinatoR - Thu Sep 07, 2006 3:01 pm</h4>
    <div class="postbody"><span class="postbody">Well I say it because in PAlib I had to modify ARM7 code, because there is where read data from touchscreen is sent by IPC to ARM9. I think you're using a precompiled ARM7 code that is obviously not updated and it produces this weird effects. I think that can be the reason :S<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101695 - yal - Thu Sep 07, 2006 3:06 pm</h4>
    <div class="postbody"><span class="postbody">That was I was thinking to :)
<br/>
<br/>
The things is why is this precompiled code not rebuild when you build the lib and how do I rebuild it with the new lib.
<br/>
<br/>
Maybe this is something that has more to deal with DevKitPro than only with libnds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101699 - PadrinatoR - Thu Sep 07, 2006 3:11 pm</h4>
    <div class="postbody"><span class="postbody">Yes, may be the templates located in examples/nds??<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101701 - yal - Thu Sep 07, 2006 3:17 pm</h4>
    <div class="postbody"><span class="postbody">Yes, that's the one I used as a starting point,. If my memory is right (I don't have devkit pro here) there is two template, one for using the two processor, and one for using only the arm9 (that's the one I used).
<br/>
But I don't remember having copying anything else than source file and makefile from there. I don't remember any lib in this directory.
<br/>
Maybe the makefile have a reference to a lib placed somewhere else.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101703 - PadrinatoR - Thu Sep 07, 2006 3:21 pm</h4>
    <div class="postbody"><span class="postbody">I've not found anything... :S
<br/>
<br/>
But it's needed ARM7 code as it is the only processor which has access to the touchscreen O_o<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101704 - yal - Thu Sep 07, 2006 3:27 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, I can't be of any further help from here right now :(
<br/>
<br/>
I'll take a look tonight, but since I'm not very familiar with makefile, I doubt I'll be able to found anything you missed.
<br/>
<br/>
I think we could use the help of some devkitpro "expert", I'm sure there is some people that should know that over here.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102366 - PadrinatoR - Wed Sep 13, 2006 9:01 am</h4>
    <div class="postbody"><span class="postbody">I've found the problem!
<br/>
<br/>
In only-arm9 projects, ndstool includes a default arm7 binary that, obviously, wasn't updated. I've been able to update and compile this binary but I'm not able to compile ndstool :'(
<br/>
<br/>
I hope someone can help me!<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102369 - PadrinatoR - Wed Sep 13, 2006 9:39 am</h4>
    <div class="postbody"><span class="postbody">Ok! I've compiled ndstools and now BlokusDS works fine :D
<br/>
<br/>
I must go out so when I came I'll upload the modified ndstools ;)<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102381 - yal - Wed Sep 13, 2006 12:48 pm</h4>
    <div class="postbody"><span class="postbody">It's great, I'll have to test that :)
<br/>
Unfortunately I'm in the middle of a big code modification and I won't be able to test it before a little while :(
<br/>
<br/>
Do you plan to integrate that in DevKitPro ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102383 - PadrinatoR - Wed Sep 13, 2006 2:01 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.ftp.nu/files/5754/" target="_blank">ndstool - Modified by PadrinatoR</a>
<br/>
<br/>
Here it is, there is a readme file which explains you what you must do.
<br/>
<br/>
:D<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102388 - Lick - Wed Sep 13, 2006 3:23 pm</h4>
    <div class="postbody"><span class="postbody">Thanks PadrinatoR!
<br/>
<br/>
I replaced the original tool (after backing up o/c) with yours [for arm9-only projects]  and I will try out your arm7 vblank code [for combined projects]. However, I can't say that I have any trouble with the current implementation so I will not be able to give you feedback.
<br/>
<br/>
Why don't you release the code as a library, instead of a mod of an existing library? I can imagine that the arm9-only needs to be 'replaced' but if people manually code the arm7, then your algorithms can be called from their code. I think that's a lot better than having the users to replace the include and lib directories.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102396 - PypeBros - Wed Sep 13, 2006 4:31 pm</h4>
    <div class="postbody"><span class="postbody">that seems to behave _way_ better than the original code from libnds. can't wait to have it integrated in my sprite editor :P<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102420 - PadrinatoR - Wed Sep 13, 2006 11:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lick wrote:</b></span></td> </tr> <tr> <td class="quote">Why don't you release the code as a library, instead of a mod of an existing library? I can imagine that the arm9-only needs to be 'replaced' but if people manually code the arm7, then your algorithms can be called from their code. I think that's a lot better than having the users to replace the include and lib directories.</td> </tr></table><span class="postbody">
<br/>
<br/>
Because it's only a modification based on a big and complete library :P
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>yal wrote:</b></span></td> </tr> <tr> <td class="quote">Do you plan to integrate that in DevKitPro ?</td> </tr></table><span class="postbody">
<br/>
<br/>
I haven't got "rights" to do it haha But I hope it will be included.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102484 - PypeBros - Thu Sep 14, 2006 12:04 pm</h4>
    <div class="postbody"><span class="postbody">weirdo. while the drawtest worked perfectly, i cannot have my app working. 
<br/>
<br/>
I replaced the files mentionned in the changelog of <a href="http://www.ftp.nu/files/5586/" target="_blank">http://www.ftp.nu/files/5586/</a> (libnds), modified the ndstool, recompiled everything, and still, whenever i touch the screen, touchReadXY() on ARM9 seems to report coordinates (0,0) everytime :P
<br/>
<br/>
the files i replaced:
<br/>
./tools/nds/ndstool/DefaultArm7/source/main.c.org
<br/>
./libnds/source/arm7/touch.c.org
<br/>
./libnds/source/arm9/touch.c.org
<br/>
./libnds/include/nds/arm7/touch.h.org
<br/>
./libnds/include/nds/arm9/input.h.org
<br/>
./libnds/include/nds/jtypes.h.org
<br/>
./libnds/include/nds/ipc.h.org
<br/>
<br/>
<br/>
--- edit:
<br/>
hmm. obviously, touch.x and touch.y are still updated, but not touch.px and touch.py which my code relies on ...
<br/>
--- edit again:
<br/>
after crawling through touch.c code, it looks like nothing on the ARM9 invokes PrecalculateCalibrationData() in my copy of libnds ... just adding it in the application's initialization did the trick (having a,b,c,d scaling coefficient all equal to zero couldn't produce very interesting .px, .py)<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102488 - PadrinatoR - Thu Sep 14, 2006 2:25 pm</h4>
    <div class="postbody"><span class="postbody">mmm the modified ndstool has a readme.txt which tells you what you have to do with ndstool.exe, the modified source is in the rar in order to make easy including it in the next devKitPro :P<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102490 - PypeBros - Thu Sep 14, 2006 2:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote">mmm the modified ndstool has a readme.txt which tells you what you have to do with ndstool.exe, the modified source is in the rar in order to make easy including it in the next devKitPro :P</td> </tr></table><span class="postbody">
<br/>
<br/>
well, as i'm running only linux here, there's little chance i could use ndstool.exe, even if you give plenty of details in the readme.txt...
<br/>
<br/>
btw, i finally managed to rebuild the libnds and ndstool so that they use your patched source. There's one thing that intrigue me, though: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   if( dword_211A6B0 == 0 ){
<br/>
        touchPos.px = aux3;
<br/>
        touchPos.py = aux4;
<br/>
   }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
when i leave that code block, it seems that all the "single" clicks (i mean, pressed&amp;KEY_TOUCH rather than held&amp;KEY_TOUCH) are reported at the previous location ... that makes my "GUI" engine behave rather weirdly (e.g. the engine select the widget with 'press' and track 'moves' until you release the stylus. If the 'press' isn't right, all the moves are ignored until you return to the widget that is selected)
<br/>
<br/>
commenting the above block worked fine for me, though i don't have the time to check i have no stylus jumping with that version right now :P<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102515 - PadrinatoR - Thu Sep 14, 2006 9:24 pm</h4>
    <div class="postbody"><span class="postbody">Arggh!!  My Windows-mind didn't let me think in other OS xDD
<br/>
<br/>
Ok, can you post your stylus code? I <span style="font-weight: bold">think</span> it shouldn't give you any problem.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102564 - PypeBros - Fri Sep 15, 2006 8:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void Engine::handle(void) {
<br/>
  Event evt=GUI_NOPE;
<br/>
  
<br/>
  // read the button states
<br/>
  scanKeys();
<br/>
  
<br/>
  // read the touchscreen coordinates
<br/>
  touchPosition touch;
<br/>
  uint pressed = keysDown();   // buttons pressed this loop
<br/>
  uint held = keysHeld();   // buttons currently held
<br/>
<br/>
  /* when the touchpad is released, touchReadXY returns (0,0).
<br/>
   * we prefer working on the last coordinates in that case.
<br/>
   */
<br/>
  if (pressed&amp;KEY_TOUCH) {
<br/>
    touch=touchReadXY();
<br/>
  } else if (held&amp;KEY_TOUCH) {
<br/>
    touch=touchReadXY();
<br/>
  } else {
<br/>
    touch=lastpos;
<br/>
    touchReadXY();
<br/>
  }
<br/>
<br/>
  uint16 mask;
<br/>
  bool inside = current &amp;&amp; current-&gt;test(touch);
<br/>
  iprintf("%s %x",inside?"inside":"outside",current);
<br/>
<br/>
  if ((pressed&amp;KEY_TOUCH)) {
<br/>
    /* a new touch starts. If we're no longer in the previous
<br/>
     * widget, let's just drop it to get something fresh ...
<br/>
     */
<br/>
    evt=(held &amp; KEY_L)?GUI_ALT_TOUCHED:GUI_TOUCHED;
<br/>
    if (!inside) current=0;
<br/>
    lastpos=touch;
<br/>
  } else {
<br/>
    if ((held&amp;KEY_TOUCH)) {
<br/>
      /* we're drawing with the pencil. ignore movements that get out
<br/>
       * until they're back in.
<br/>
       */ 
<br/>
      evt=(held&amp;KEY_L)?GUI_ALT_TOUCHED:GUI_MOVED;
<br/>
      lastpos=touch;
<br/>
      if (!inside) {
<br/>
   lastbuttons = held|pressed; return;
<br/>
      }
<br/>
    } else if (lastbuttons&amp;KEY_TOUCH) {
<br/>
      /* touching inside and releasing outside is not clicking */
<br/>
      evt = inside?
<br/>
                 ((held&amp;KEY_L)?GUI_ALT_CLICKED:GUI_CLICKED):
<br/>
                 GUI_RELEASED;
<br/>
    }
<br/>
  }
<br/>
<br/>
  /* now, if we have no longer a current object, let's check for one */
<br/>
  if (!current) {
<br/>
    current = interface-&gt;test(touch);
<br/>
    inside=true;
<br/>
    mask=GUI_NOPE;
<br/>
  }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Rest of the code is checking D-pad and buttons, invoking current-&gt;handle() or interface-&gt;handle(), etc.<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102578 - PadrinatoR - Fri Sep 15, 2006 12:02 pm</h4>
    <div class="postbody"><span class="postbody">Ok, that's enough :P
<br/>
<br/>
As I say to yal, now you have to use a new field in touchPosition called <span style="font-weight: bold">touched</span>. That field will tell you if the stylus was touched:
<br/>
<br/>
Then you shouldn't use keysHeld and keysDown in order to detect stylus touching.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102667 - tepples - Fri Sep 15, 2006 11:44 pm</h4>
    <div class="postbody"><span class="postbody">Either that, or you can dispense with the new field and poke the touched value directly into the appropriate bit of the keys* bitfields.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102975 - PypeBros - Mon Sep 18, 2006 11:31 am</h4>
    <div class="postbody"><span class="postbody">thanks, tepples, i think i'll do that. I'd prefer keep my sources compatible with both "regular" and "modified" versions of the library.<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103152 - Lick - Tue Sep 19, 2006 4:47 pm</h4>
    <div class="postbody"><span class="postbody">Seriously, the reason why your modification isn't widely used yet, is because people don't want to replace the libnds installation. Please wrap the algorithms!!
<br/>
Your work is greatly appreciated, but library-mods are generally not..<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103154 - PadrinatoR - Tue Sep 19, 2006 4:51 pm</h4>
    <div class="postbody"><span class="postbody">PypeBros problem was that he wasn't calling PrecalculateCalibrationData(); It's now fixed ^^
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lick wrote:</b></span></td> </tr> <tr> <td class="quote">Seriously, the reason why your modification isn't widely used yet, is because people don't want to replace the libnds installation. Please wrap the algorithms!!
<br/>
Your work is greatly appreciated, but library-mods are generally not..</td> </tr></table><span class="postbody">
<br/>
<br/>
Mmmm I wanna see my modifications in newer versions of libnds but I cannot include it, is someone of the libnds project reading this thread??<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103157 - PypeBros - Tue Sep 19, 2006 5:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PypeBros wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
--- edit again:
<br/>
after crawling through touch.c code, it looks like nothing on the ARM9 invokes PrecalculateCalibrationData() in my copy of libnds ... just adding it in the application's initialization did the trick (having a,b,c,d scaling coefficient all equal to zero couldn't produce very interesting .px, .py)</td> </tr></table><span class="postbody">
<br/>
<br/>
yep, i figured that already, that way, i can click on stuff, but it still had that "delay" between what i click and what i get. E.g. if i click on a color on the palette, then on some pixel of the grid, the pixel isn't toggled. Iirc, i first get the old position in the palette reported as a "touch" and then the new position ... 
<br/>
<br/>
btw, what exactly does the code i reported to have commented out in the post above? 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 if( dword_211A6B0 == 0 ){
<br/>
        touchPos.px = aux3;
<br/>
        touchPos.py = aux4;
<br/>
   } 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
"dword_211A6B0" is a pretty obscure variable name for the one not enlightened :P<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103158 - PadrinatoR - Tue Sep 19, 2006 5:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PypeBros wrote:</b></span></td> </tr> <tr> <td class="quote">yep, i figured that already, that way, i can click on stuff, but it still had that "delay" between what i click and what i get. E.g. if i click on a color on the palette, then on some pixel of the grid, the pixel isn't toggled. Iirc, i first get the old position in the palette reported as a "touch" and then the new position...</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Yeah it's done in that way in commercial games too, but it shouldn't be a problem for you, I think O_o
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PypeBros wrote:</b></span></td> </tr> <tr> <td class="quote">btw, what exactly does the code i reported to have commented out in the post above? 
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 if( dword_211A6B0 == 0 ){
<br/>
        touchPos.px = aux3;
<br/>
        touchPos.py = aux4;
<br/>
   } 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
"dword_211A6B0" is a pretty obscure variable name for the one not enlightened :P</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Sorry! I forgot answering you! :S
<br/>
<br/>
I don't know hahaha There are two variables in that function whose meaning I'm not able to understand. I only know that it works and that's the way followed by Nintendo to read touchscreen data.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103171 - Mrshlee - Tue Sep 19, 2006 6:52 pm</h4>
    <div class="postbody"><span class="postbody">Hunt down and talk to Wintermute on #DSDev<br/>_________________<br/><a class="postlink" href="http://MrShlee.com/" target="_blank">MrShlee.com</a>
<br/>
Projects
<br/>
<a class="postlink" href="http://dev-scene.com/" target="_blank">Dev-Scene</a>
<br/>
<a class="postlink" href="http://MyTechpedia.com/" target="_blank">MyTechpedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103388 - dovoto - Thu Sep 21, 2006 2:57 pm</h4>
    <div class="postbody"><span class="postbody">I will take a look at the modification and see if it should make it into the next official release...been out of town so trying to catch up on a few things.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103395 - PadrinatoR - Thu Sep 21, 2006 3:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">I will take a look at the modification and see if it should make it into the next official release...been out of town so trying to catch up on a few things.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you very much. Here you have the complete code of touchReadXY (ARM9):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">touchPosition touchReadXY() {
<br/>
   // LEYENDA
<br/>
   //---------
<br/>
   // last_measures = dword_211A6AC
<br/>
   // newpress = dword_211A68C
<br/>
   // released = dword_211A690
<br/>
   // ???? = dword_211A6B0
<br/>
   // ???? = dword_211A6A0
<br/>
<br/>
   static touchPosition touchPos, touchPos_Old;
<br/>
   static u8 dword_211A6A0; //,dword_211A68C, dword_211A690;
<br/>
   static u8 dword_211A6B0;
<br/>
   u8 unk_bool;
<br/>
   int16 dist_x, dist_y, med_x, med_y, aux1, aux2, aux3, aux4;
<br/>
<br/>
//---------------------------------------------------------------------------------
<br/>
   while (IPC-&gt;mailBusy);
<br/>
<br/>
   if(touchPos.error == 0){
<br/>
      if(touchPos.touched == 0){
<br/>
         touchPos.newpress = 1;
<br/>
         touchPos.released = 0;
<br/>
      }else{
<br/>
         touchPos.newpress = 0;
<br/>
         touchPos.released = 1;
<br/>
      }
<br/>
   }else{
<br/>
      touchPos.newpress = 0;
<br/>
      touchPos.released = 0;
<br/>
   }
<br/>
<br/>
   med_x = touchPos.px;
<br/>
   med_y = touchPos.py;
<br/>
<br/>
   touchPos.error = IPC-&gt;touchError;
<br/>
   touchPos.touched = IPC-&gt;touched;
<br/>
<br/>
   touchPos.x = IPC-&gt;touchX;
<br/>
   touchPos.y = IPC-&gt;touchY;
<br/>
<br/>
   touchPos.z1 = IPC-&gt;touchZ1;
<br/>
   touchPos.z2 = IPC-&gt;touchZ2;
<br/>
<br/>
   ADC_to_SCR(touchPos.x, touchPos.y, &amp;(touchPos.px), &amp;(touchPos.py));
<br/>
<br/>
   if(touchPos.touched == 0){
<br/>
      touchPos.touched = 0;
<br/>
      touchPos_Old.px = -1;
<br/>
      dword_211A6B0 = 0;
<br/>
   }else{
<br/>
      aux1 = touchPos.px;
<br/>
      aux2 = touchPos.py;
<br/>
      aux3 = touchPos_Old.px; //signed
<br/>
      aux4 = touchPos_Old.py; //signed
<br/>
<br/>
      dist_x = aux1 - aux3;
<br/>
      dist_y = aux2 - aux4;
<br/>
<br/>
      if(dword_211A6B0 != 0){
<br/>
         touchPos.px = med_x;
<br/>
         touchPos.py = med_y;
<br/>
      }
<br/>
<br/>
      dist_x = dist_x &lt;&lt; 16;
<br/>
      dist_y = dist_y &lt;&lt; 16;
<br/>
<br/>
      if(touchPos.error == 2 || touchPos.error == 0) touchPos_Old.px = aux1;
<br/>
      if(touchPos.error == 1 || touchPos.error == 0) touchPos_Old.py = aux2;
<br/>
<br/>
      dist_x = dist_x &gt;&gt; 16;
<br/>
      dist_y = dist_y &gt;&gt; 16;
<br/>
<br/>
      if( dword_211A6B0 == 0 ){
<br/>
         touchPos.px = aux3;
<br/>
         touchPos.py = aux4;
<br/>
      }
<br/>
<br/>
      if(aux3 &lt; 0){
<br/>
         if( touchPos.error == 0){ //si no hubo "error"
<br/>
            touchPos.touched = 0;
<br/>
            dword_211A6B0 = 0;
<br/>
            dword_211A6A0 = 1;
<br/>
         }else{
<br/>
            touchPos.touched = 0;
<br/>
            touchPos_Old.px = -1;
<br/>
            dword_211A6B0 = 0;
<br/>
         }
<br/>
      }else{
<br/>
         if(dword_211A6B0 == 0){
<br/>
            unk_bool = 1;
<br/>
<br/>
            if (touchPos.error == 0 &amp;&amp; dist_x &gt;= -12 &amp;&amp; dist_x &lt;= 12 &amp;&amp; dist_y &gt;= -12 &amp;&amp; dist_y &lt;= 12)
<br/>
               unk_bool = 0;
<br/>
<br/>
            if(dword_211A6A0 == 0){ //Comprueba la direccion rara
<br/>
               if(unk_bool == 0)
<br/>
                  dword_211A6B0 = 0;
<br/>
               else
<br/>
                  dword_211A6B0 = 1;
<br/>
            }else{
<br/>
               touchPos.touched = 0;
<br/>
<br/>
               if(unk_bool == 0)
<br/>
                  dword_211A6A0 = 0;
<br/>
               else
<br/>
                  dword_211A6A0 = 1;
<br/>
<br/>
               dword_211A6B0 = 0;
<br/>
            }
<br/>
         }else{
<br/>
            if(touchPos.error == 0 &amp;&amp; dist_x &gt;= -12 &amp;&amp; dist_x &lt;= 12 &amp;&amp; dist_y &gt;= -12 &amp;&amp; dist_y &lt;= 12){
<br/>
               touchPos.px = aux3;
<br/>
               touchPos.py = aux4;
<br/>
               dword_211A6B0 = 0;
<br/>
            }else{
<br/>
               dist_x = touchPos_Old.px - med_x;
<br/>
               dist_y = touchPos_Old.py - med_y;
<br/>
<br/>
               if(dist_x &gt;= -12 &amp;&amp; dist_x &lt;= 12 &amp;&amp; dist_y &gt;= -12 &amp;&amp; dist_y &lt;= 12){
<br/>
                  dword_211A6B0 = 0;
<br/>
               }else{
<br/>
                  dword_211A6B0 = 1;
<br/>
               }
<br/>
            }
<br/>
         }
<br/>
      }
<br/>
   }
<br/>
<br/>
   if(touchPos.touched == 0){
<br/>
      touchPos.newpress = 0;
<br/>
   }else{
<br/>
      touchPos.released = 0;
<br/>
   }
<br/>
<br/>
   return touchPos;
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I deleted the code which sets 'newpress' and 'released' fields in the modification that I uploaded... but that is the complete code used in commercial games :)<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107147 - wintermute - Fri Oct 27, 2006 4:52 am</h4>
    <div class="postbody"><span class="postbody">Sorry, this isn't suitable for inclusion in libnds in it's current form.
<br/>
<br/>
Any error conditions can and should be indicated by not reporting the pendown flag. This is read by the arm7 and transferred via the IPC struct at present.
<br/>
<br/>
All the variables should have sensible names.
<br/>
<br/>
Comments should be in english.
<br/>
<br/>
It looks like you're translating touch screen co-ordinates on the arm9. Is there any significant difference between your translation and what we're using now?
<br/>
<br/>
As far as I know the only major issue with the current code is the "jumping".
<br/>
<br/>
I was attempting to compensate by reading the touchscreen several times over the course of the frame to weed out nonsensical values. It sounds like you've managed to do this without that approach.
<br/>
<br/>
I'd rather see the touchscreen reading and translation entirely on the arm7 with the arm9 merely reading the input without mangling the structure that's already there.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107190 - HyperHacker - Fri Oct 27, 2006 3:31 pm</h4>
    <div class="postbody"><span class="postbody">I noticed something quite interesting. In an app I'm workin on the touch screen rarely jumps, but when ARM9 CPU usage gets too high (~7ms for the main loop) and it starts missing frames, suddenly it loses accuracy and I often get two different buttons pressed when I touch one. I use a method many older games used, having a "keys pressed this frame" and "keys held &gt;1 frame" variable (both set by ARM7), and I read the touch screen when Keys Pressed includes the Touch bit, so skipping frames seems like it should be making it less responsive (and indeed, it takes a few tries for keypresses to be noticed), not responsive to things that never even happened. O_o I almost wonder if the temperature change by the CPU heating up is enough to throw it off...<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107204 - PadrinatoR - Fri Oct 27, 2006 4:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Sorry, this isn't suitable for inclusion in libnds in it's current form.
<br/>
<br/>
Any error conditions can and should be indicated by not reporting the pendown flag. This is read by the arm7 and transferred via the IPC struct at present.</td> </tr></table><span class="postbody">
<br/>
<br/>
I imagined that :P My intention was to get Nintendo's algorithm and try to adapt it as is in the current libnds. I only wanted to give you a way of reading the touchscreen which is used by Nintendo in order to avoid jumping.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">All the variables should have sensible names.</td> </tr></table><span class="postbody">
<br/>
<br/>
I think there is only 1 variable which hasn't a name (I don't understand its role in the algorithm :S :$).
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Comments should be in english.</td> </tr></table><span class="postbody">
<br/>
You're right, I put some comments in Spanish, I think I had translated all of them to English :S Sorry.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">It looks like you're translating touch screen co-ordinates on the arm9. Is there any significant difference between your translation and what we're using now?</td> </tr></table><span class="postbody">
<br/>
I did it in that way because Nintendo does it on the ARM9, I suppose that there is no difference if it's done on the ARM7, although in commercial games Nintendo uses <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsmaths" target="_blank">these ARM9 functions</a> to make the translations, I don't know if they are more accurate.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">As far as I know the only major issue with the current code is the "jumping".</td> </tr></table><span class="postbody">
<br/>
Of course! That's the only problem, I only used all the algorithm that I've extracted from Nintendo's games in order to know how does it work.
<br/>
<br/>
<br/>
<br/>
<br/>
In conclusion, my target was only to discover how Nintendo avoids this jumping problem and to show you it, I don't know what's the best way to implement it in libnds, so I think that someone in the libnds project would be more capable to do it. I only give you a fully functional code without jumping problems which included (adapted) in libnds will give us better homebrew applications and a better control of the touchscreen.
<br/>
<br/>
Anyway, if I can help you with something, just say me what I have to do ;)<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107635 - ThomasS - Tue Oct 31, 2006 7:22 pm</h4>
    <div class="postbody"><span class="postbody">@PadrinatoR:
<br/>
I'm trying to use your stylus code, but the server "www.ftp.nu" on which your version of ndstool was seems to be down. Could you please upload it to another site?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107810 - Payk - Thu Nov 02, 2006 8:07 am</h4>
    <div class="postbody"><span class="postbody">If realy hv to say that this algorithm is what we need. Maybe on some nds the touchscreen works more or less ok with homebrew, but for me not.
<br/>
When using a keyboard for example in dsorganize it often becomes a pain to write a short filename. In nitrotracker, when trying to load a file, i often hit the wrong one...
<br/>
But on Pictochat it works that perfect. Absolutly as it should be...any homebrew keyboard is a pain...i am thinking about a password input...how bad... but with Pictochat it would be ok
<br/>
<br/>
<br/>
U made a great job, if libnds doesnt use that, well i will use it and recommand others to do same.
<br/>
Thanx for effort. That helps many apps alot!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107908 - diggla - Fri Nov 03, 2006 1:15 am</h4>
    <div class="postbody"><span class="postbody">PadrinatoR, could you upload your mod to a mirror site? <a href="http://www.ftp.nu" target="_blank">www.ftp.nu</a> seems to be offline most of the time :O</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107969 - PadrinatoR - Fri Nov 03, 2006 3:54 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, I went away. Here you have the modified versions of libnds, ndstool and PAlib.
<br/>
<br/>
<a class="postlink" href="http://rapidshare.com/files/1816216/libnds__19_July_2006__Modified_By_PadrinatoR.rar" target="_blank">http://rapidshare.com/files/1816216/libnds__19_July_2006__Modified_By_PadrinatoR.rar</a>
<br/>
<a class="postlink" href="http://rapidshare.com/files/1817055/ndstool_-_Modified_by_PadrinatoR.rar" target="_blank">http://rapidshare.com/files/1817055/ndstool_-_Modified_by_PadrinatoR.rar</a>
<br/>
<a class="postlink" href="http://rapidshare.com/files/1817669/PAlib_2_Sept_2006_Modified_By_PadrinatoR.rar" target="_blank">http://rapidshare.com/files/1817669/PAlib_2_Sept_2006_Modified_By_PadrinatoR.rar</a><br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107982 - Wonder Boy - Fri Nov 03, 2006 7:27 pm</h4>
    <div class="postbody"><span class="postbody">Thanx PadrinatoR! Valuable Work! :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108025 - ThomasS - Sat Nov 04, 2006 11:38 am</h4>
    <div class="postbody"><span class="postbody">Unfortunately it doesn't work in Dualis - but works great with real harware.
<br/>
Thank you very much, PadrinatoR!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108280 - PypeBros - Tue Nov 07, 2006 1:58 pm</h4>
    <div class="postbody"><span class="postbody">just ported tetattDS to padrinator's modified lib ... works fine :)<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109333 - pollier - Fri Nov 17, 2006 9:09 am</h4>
    <div class="postbody"><span class="postbody">EDIT: Hooray, with the changes I didn't read the first time in this topic, I made the nds-examples TouchTest work with the patched libnds. Also putting back in some code that I had commented out for testing resolved the other issue. Excuse my nubletry!<br/>_________________<br/>(Works for me!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110872 - spinal_cord - Sat Dec 02, 2006 1:50 pm</h4>
    <div class="postbody"><span class="postbody">I'm using palib, do I only need the palib patch or do I need the others to?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110873 - PadrinatoR - Sat Dec 02, 2006 1:53 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for your comments! I'm glad to see that it's being useful for you :D
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spinal_cord wrote:</b></span></td> </tr> <tr> <td class="quote">I'm using palib, do I only need the palib patch or do I need the others to?</td> </tr></table><span class="postbody">
<br/>
<br/>
You need all of them :)<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110876 - spinal_cord - Sat Dec 02, 2006 3:03 pm</h4>
    <div class="postbody"><span class="postbody">The palib seems to be a different version to mine, if i use it, i can compile my code, if i dont, the stylus jumps :(<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110877 - PadrinatoR - Sat Dec 02, 2006 3:14 pm</h4>
    <div class="postbody"><span class="postbody">I should create a patch for the last version but I haven't got time enough :S<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110888 - Lick - Sat Dec 02, 2006 5:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote">I should create a patch for the last version but I haven't got time enough :S</td> </tr></table><span class="postbody">
<br/>
<br/>
You should really release it in a format that people can reuse when libnds or PAlib get updated. That's the better way of doing things, NOT patching/modding libraries.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110890 - PadrinatoR - Sat Dec 02, 2006 5:22 pm</h4>
    <div class="postbody"><span class="postbody">What format of releasing do you suggest?<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110891 - Hermes - Sat Dec 02, 2006 5:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PadrinatoR wrote:</b></span></td> </tr> <tr> <td class="quote">What format of releasing do you suggest?</td> </tr></table><span class="postbody">
<br/>
<br/>
have you released the source code? yes?
<br/>
<br/>
i think the ball is in the tile roof of others coders  XD
<br/>
<br/>
You don't worry by this question
<br/>
<br/>
[SPANISH ON]
<br/>
Paisano, nunca es buena idea parchear una libreria: si les interesa meter esa modificacion, ya lo har?n pero si no lo hacen, eres libre de publicar los fuentes de la libreria con esa modificacion y distribuirlos, pues la licencia lo permite.
<br/>
[SPANISH OFF]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110893 - PadrinatoR - Sat Dec 02, 2006 6:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hermes wrote:</b></span></td> </tr> <tr> <td class="quote">[SPANISH ON]
<br/>
Paisano, nunca es buena idea parchear una libreria: si les interesa meter esa modificacion, ya lo har?n pero si no lo hacen, eres libre de publicar los fuentes de la libreria con esa modificacion y distribuirlos, pues la licencia lo permite.
<br/>
[SPANISH OFF]</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, that's what I'm doing, I've uploaded a modified version of the library, not a patch (I said 'patch' before, sorry :S). As you say, the ball is in the tile roof of others coders.
<br/>
<br/>
I'll release modified version of them as fast as I can (now I've got a lot of work :( ) until they include it in their libraries (if they want).
<br/>
<br/>
Anyway, <span style="font-weight: bold">Lick</span>, I accept suggestions about how to improve the release of these modified versions of PAlib and libnds.<br/>_________________<br/><a class="postlink" href="http://frikiblog.spaces.live.com/?_c11_BlogPart_FullView=1&amp;_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3D10%26ayear%3D2006" target="_blank"><span style="font-style: italic">DSAmp: control Winamp with your Nintendo DS</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110894 - spinal_cord - Sat Dec 02, 2006 6:14 pm</h4>
    <div class="postbody"><span class="postbody">I cant wait. (Thankyou)<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110898 - Mollusk - Sat Dec 02, 2006 7:00 pm</h4>
    <div class="postbody"><span class="postbody">The problem with the current state is that it requires modifying libnds... Meaning that if people want to use it, they need to modify their libnds too, and it'll be removed with the next update...
<br/>
<br/>
The best solution would be to have a code fully working in the arm9, with a simple template showing how/when to call it. If that's not possible (as you modified arm7 code), have one of the libnds template modified, implimenting a arm7 and arm9 functions to show how to use it :)
<br/>
<br/>
As for PAlib, I didn't get much time to do any updates lately, but I think this should really make it in the next version. But as the current state requires to have a modified libnds, I can't just bundle libnds with PAlib, it wouldn't be a good solution... If you had a more plug-and-play version, it would be easier to put it in ;)<br/>_________________<br/>PAlib official forum : <a class="postlink" href="http://www.palib.info" target="_blank">http://www.palib.info</a>
<br/>
PAlib official tutorials: <a class="postlink" href="http://www.palib.info/wiki" target="_blank">http://www.palib.info/wiki</a>
<br/>
Updates, help, code examples, tutorials, etc...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110899 - Lick - Sat Dec 02, 2006 7:02 pm</h4>
    <div class="postbody"><span class="postbody">Yes, release the code in an example form; a project that uses both custom ARM7 and custom ARM9 code. Put the relevant code into functions, and call them in the example.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110911 - spinal_cord - Sat Dec 02, 2006 8:18 pm</h4>
    <div class="postbody"><span class="postbody">That sounds best (and easyest) to me. 
<br/>
Does the code further up the tread work as it is (using palib)or does it require the modifications to work?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
