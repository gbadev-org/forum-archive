<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>faster downloads over tcp? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > faster downloads over tcp?</h2>
<div id="posts">
<div class="post">
    <h4>#175588 - 3dfx - Sat Jan 01, 2011 12:07 am</h4>
    <div class="postbody"><span class="postbody">Is there anything I can edit in the dswifi src to enable some faster speeds?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175589 - elhobbs - Sat Jan 01, 2011 7:22 am</h4>
    <div class="postbody"><span class="postbody">Keep in mind the ds has a 2 mega bit connection. What are you getting for transfer rates?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175590 - 3dfx - Sat Jan 01, 2011 9:00 pm</h4>
    <div class="postbody"><span class="postbody">Sadly I'm getting 6 KB/sec 48 kbits/sec. This is over a school connection, work connection, and home connection.  I heard some people getting faster speeds by tweaking the dswifi lib but I have no idea what to change.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175591 - elhobbs - Sun Jan 02, 2011 3:29 am</h4>
    <div class="postbody"><span class="postbody">dswifi does not deal well with congested networks as it only allows one packet in transmission at a time. there is/was an issue with duplicate packets getting generated during retransmission - not sure if that was fixed or not. 6 KB/s does seem a little low though. I want to say the norm is usually in the 40-60 KB/s range for a home network. It does depend a lot on what you are doing though. If you are creating something new than you will get better results using just UDP instead of TCP on the ds at the moment.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175592 - PypeBros - Sun Jan 02, 2011 2:27 pm</h4>
    <div class="postbody"><span class="postbody">I usually manage to receive 80K bytes / sec. over TCP, and that doesn't required a dswifi tweak. <a class="postlink" href="http://sylvainhb.blogspot.com/2010/01/sgiptcp-either-buggy-or-awkward.html" target="_blank">sending from the DS is a bit slower</a>, and no dswifi tweak helped here. 
<br/>
<br/>
Last speed issues I had with WiFi transfers came from a poor libFAT caching policy or missized recv buffers. I suggest you have a look at HappyHTTP library from Ben Campbell as a reference point.<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175595 - Ludo6431 - Sun Jan 02, 2011 8:54 pm</h4>
    <div class="postbody"><span class="postbody">I don't know why but transfers trough internet are at about 6KB/s and transfers through a local network are at about 80/100KB/s.<br/>_________________<br/>Sorry for my poor english, I'm french.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175613 - PypeBros - Tue Jan 04, 2011 3:57 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ludo6431 wrote:</b></span></td> </tr> <tr> <td class="quote">I don't know why but transfers trough internet are at about 6KB/s and transfers through a local network are at about 80/100KB/s.</td> </tr></table><span class="postbody">
<br/>
(long-distance) Internet transfers have longer round-trip time before a retransmission can happen, and the DS has an insanely small reception window (1 ethernet packet). Add high loss ratio over the warioless link to the mix and any <a class="postlink" href="http://en.wikipedia.org/wiki/TCP_tuning#TCP_speed_limits" target="_blank">TCP performance estimators</a> will tell you that you'll experience really painful transfers.
<br/>
<br/>
If that's your problem, the dswifi tweaking you might need to investigate the windowlen max size, but it look like it is stuck at the size of 1 ethernet packet to skip one (nasty) part of IP protocol (fragmentation), so I can't tell in advance to what extent you might be succesful.
<br/>
<br/>
Alternatively (e.g. for web browsing), you might want to go through a nearby HTTP proxy to improve your performance.<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#175909 - tepples - Sat Feb 26, 2011 6:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PypeBros wrote:</b></span></td> </tr> <tr> <td class="quote">Add high loss ratio over the warioless link</td> </tr></table><span class="postbody">
<br/>
"warioless" being a pun on "wireless" and the fact that we don't have access to the (possibly more refined) warioworld libraries, right? Is it that the official libraries support fragmentation?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
