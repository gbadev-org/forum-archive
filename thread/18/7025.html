<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NDS RAM sections not overwritten by commercial games? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > NDS RAM sections not overwritten by commercial games?</h2>
<div id="posts">
<div class="post">
    <h4>#55727 - chishm - Sat Oct 01, 2005 1:28 am</h4>
    <div class="postbody"><span class="postbody">I am not interested in piracy, just hear me out. 
<br/>
<br/>
I was examining the NDS file specs in the NDSTech Wiki, and I noticed that the Metroid ARM9 binary is loaded into RAM starting from 0x0200:4000. I have noticed this in all the other commercial demos that I have examined too. This means they are purposely not overwritting main RAM from 0x0200:0000 to 0x0200:4000. Examining some of the loaders also shows they are purposely leaving this memory untouched.
<br/>
<br/>
Curiosity leads me to ask - what is so special about this section of RAM? Does it contain any useful data left by the BIOS, or is it used for any specific function?
<br/>
<br/>
Maybe we can use this behaviour to our advantage.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55732 - josath - Sat Oct 01, 2005 5:20 am</h4>
    <div class="postbody"><span class="postbody">Maybe they use that space as working memory? Like for malloc() or something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55738 - chishm - Sat Oct 01, 2005 8:14 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>josath wrote:</b></span></td> </tr> <tr> <td class="quote">Maybe they use that space as working memory? Like for malloc() or something?</td> </tr></table><span class="postbody">
<br/>
Possibly, but its only 16KiB, which isn't much to malloc from. That, and warez loaders seem to go to the trouble of not overwriting it. I'm thinking it might have some useful functions copied from the firmware or some form of copy protection. It'd be good if it was the former, because then we might get easier access to the hardware. This is all just speculation for now, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55748 - Mighty Max - Sat Oct 01, 2005 2:45 pm</h4>
    <div class="postbody"><span class="postbody">This space is saved for the header.
<br/>
<br/>
The header info of i.e. Metroid Prime Hunters Demo reserves that size:
<br/>
<a href="http://www.bottledlight.com/ds/index.php/FileFormats/NDSFormat" target="_blank">http://www.bottledlight.com/ds/index.php/FileFormats/NDSFormat</a>
<br/>
<br/>
Yet big parts of this space seems to be unused.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55755 - chishm - Sat Oct 01, 2005 3:36 pm</h4>
    <div class="postbody"><span class="postbody">That's what I was saying. The games seem to purposely not use that area. The reason that the ARM9 starts 4KiB into the NDS file is due to it being aligned to 4KiB (same source as MightyMax). This still doesn't completely explain why it is 4KiB aligned when copied, since the NDS header is copied to another location anyway, and the space in between (in the file) is padded with 0s.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
