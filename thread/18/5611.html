<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Recompiled programs not running? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Recompiled programs not running?</h2>
<div id="posts">
<div class="post">
    <h4>#41596 - LOUD NOISES - Sat Apr 30, 2005 2:41 am</h4>
    <div class="postbody"><span class="postbody">I just got my passme and flash cart and I've been playing around with the existing programs and attempting to write my own. The already compiled examples that came with the NDS Dev Environment ran great on both the emulators and hardware (at least the ones I tried), but for some reason my own programs were only giving me two white screens on the actual hardware. However, my program ran fine on iDeaS but crashed on Dualis.
<br/>
<br/>
As an experiment, I recompiled some of the existing programs (such as the 2d and 3d examples and nibbles). Previously, these programs ran fine on both the emulators. After recompiling they still worked with iDeaS, but crashed Dualis and gave me white screens on the DS. Can anyone help me out? The code is compiling without error but it just won't run.
<br/>
<br/>
edit: I'm using the newest versions of NDSLIB, the compiler, etc.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41598 - tepples - Sat Apr 30, 2005 3:14 am</h4>
    <div class="postbody"><span class="postbody">Dualis does not actually emulate the ARM7. Instead, it uses "high level emulation", using native PC code that has the same function as common ARM7 codes. If your ARM7 binary's function differs materially from what Dualis expects, Dualis will throw up.
<br/>
<br/>
Bottom line: Trust the hardware first and iDeaS second.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41602 - LOUD NOISES - Sat Apr 30, 2005 5:09 am</h4>
    <div class="postbody"><span class="postbody">What I still don't understand is why programs that worked correctly on the hardware stopped working after being recompiled. None of the source code was changed and all of them compiled without errors.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41603 - arog - Sat Apr 30, 2005 5:42 am</h4>
    <div class="postbody"><span class="postbody">I think there were some issues with ndslib.  You can try to grab the latest version from CVS, the zip from DrunkenCoders.com, or if you're using NDS Dev Env, I am going to make an update shortly.  I have to watch the latest episode of House of Cosbies first, though.
<br/>
<br/>
Edit:
<br/>
Well, that wasn't worth it.  Episode #4 of HoC sucked!
<br/>
<br/>
Added latest ndslib updater to the site.
<br/>
<br/>
- Aaron Rogers
<br/>
<a href="http://www.aaronrogers.com/nintendods/" target="_blank">http://www.aaronrogers.com/nintendods/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41618 - bluescrn - Sat Apr 30, 2005 9:30 am</h4>
    <div class="postbody"><span class="postbody">I've just deleted and reinstalled the dev env, with the updates. Also removed any traces of other GBA dev tools that might have been conflicting. Same problem - white screens of death on hardware :(
<br/>
<br/>
Tried the template and mines projects. For the template project:
<br/>
<br/>
my template.ds.gba is 6,352 bytes
<br/>
my arm9.bin is 1,564 bytes
<br/>
my arm7.bin is 3,172 bytes
<br/>
<br/>
Could somebody that has this working on hardware compare their filesizes with mine?  And maybe post their working .ds.gba so I can compare them??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41621 - josath - Sat Apr 30, 2005 9:54 am</h4>
    <div class="postbody"><span class="postbody">the issue seems to be fixed by doing the following with ndslib from cvs:
<br/>
update ndslib/startup to date apr 25, 2005 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cvs update -D "apr 25 2005" ndslib/startup</td> </tr></table><span class="postbody">
<br/>
update ndslib/include/NDS/ipc.h to revision 1.7 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cvs update -r1.7 ndslib/include/NDS/ipc.h</td> </tr></table><span class="postbody">
<br/>
<br/>
then rerunning install.bat (or manually copying the startup files to devkitarm/arm-elf/lib )</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41623 - bluescrn - Sat Apr 30, 2005 11:04 am</h4>
    <div class="postbody"><span class="postbody">That's what's been suggested on IRC, but so far it doesn't seem to have worked for me.
<br/>
<br/>
I got the latest version from CVS, rolled back ipc.h, ds_arm9.ld, and ds_arm9_crt0.s, and rebuilt (ndslib install.bat, and the project), and still getting white screens :(
<br/>
<br/>
Might try it on another PC next, to see if there's still an old version of a tool/lib/header somewhere causing problems....  
<br/>
<br/>
But can anyone confirm that they've had either the template, mines, or 2D_Example_davr projects running on hardware (via FlashMe or WifiMe)?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41624 - bluescrn - Sat Apr 30, 2005 11:19 am</h4>
    <div class="postbody"><span class="postbody">Update...
<br/>
<br/>
The ndslib examples *are* working now - Just ran 'Hello World' and the envmapped teapot :)
<br/>
<br/>
Maybe they were working earlier, I was concentrating on the ndsdev\projects samples - I still haven't successfully run any of these on hw.
<br/>
<br/>
But with 'hello world' as a starting point, the fun can begin! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41660 - LOUD NOISES - Sat Apr 30, 2005 9:46 pm</h4>
    <div class="postbody"><span class="postbody">That seems to have fixed it for me. Thanks.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
