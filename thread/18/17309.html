<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>help with drunken-coders' tutorials and DSi - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > help with drunken-coders' tutorials and DSi</h2>
<div id="posts">
<div class="post">
    <h4>#174639 - cyberant - Sun Jul 04, 2010 11:48 am</h4>
    <div class="postbody"><span class="postbody">I've been trying to follow drunken coders' tutorial at dev-scene, and I have some problems and questions.
<br/>
<br/>
I have a DSi with AceKard 2i and I've been trying to run certain hombrew demo files. it seems that some demo files won't run perfectly with the DSi or won't run at all (or they run but make the DS shut down soon after running).
<br/>
<br/>
I tried following Day1 tutorial, writing the code below and building is with "make":
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
 
<br/>
int main(void)
<br/>
{
<br/>
   int i;
<br/>
 
<br/>
   consoleDemoInit();
<br/>
 
<br/>
   videoSetMode(MODE_FB0);
<br/>
 
<br/>
   vramSetBankA(VRAM_A_LCD);
<br/>
 
<br/>
   printf("Hello World!\n");
<br/>
   printf("www.Drunkencoders.com");
<br/>
 
<br/>
   for(i = 0; i &lt; 256 * 192; i++)
<br/>
      VRAM_A[i] = RGB15(31,0,0);
<br/>
 
<br/>
   swiWaitForVBlank();
<br/>
 
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
If I run it with an emulator it runs fine, showing the text message. But, when I try running it on a DSi it shuts the DS off (it seems to show the text message for a split-second).
<br/>
<br/>
1) Is there a problem with the code?
<br/>
2) Or should the code be updated to work properly on a DSi?
<br/>
3) Is there a way to make it work properly on both a DSi and a normal DS?
<br/>
4) Are there any other things I should take notice of if I want my code to be compatible for all available DS consoles?
<br/>
<br/>
Also I'd like to mention that when I tried building and running the Hello_World example that comes with the devkitpro it seems to work perfectly on my DSi:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/*---------------------------------------------------------------------------------
<br/>
<br/>
   $Id: main.cpp,v 1.13 2008-12-02 20:21:20 dovoto Exp $
<br/>
<br/>
   Simple console print demo
<br/>
   -- dovoto
<br/>
<br/>
<br/>
---------------------------------------------------------------------------------*/
<br/>
#include &lt;nds.h&gt;
<br/>
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
volatile int frame = 0;
<br/>
<br/>
//---------------------------------------------------------------------------------
<br/>
void Vblank() {
<br/>
//---------------------------------------------------------------------------------
<br/>
   frame++;
<br/>
}
<br/>
   
<br/>
//---------------------------------------------------------------------------------
<br/>
int main(void) {
<br/>
//---------------------------------------------------------------------------------
<br/>
   touchPosition touchXY;
<br/>
<br/>
   irqSet(IRQ_VBLANK, Vblank);
<br/>
<br/>
   consoleDemoInit();
<br/>
<br/>
   iprintf("      Hello DS dev'rs\n");
<br/>
   iprintf("     \x1b[32mwww.devkitpro.org\n");
<br/>
   iprintf("   \x1b[32;1mwww.drunkencoders.com\x1b[39m");
<br/>
 
<br/>
   while(1) {
<br/>
   
<br/>
      swiWaitForVBlank();
<br/>
      touchRead(&amp;touchXY);
<br/>
<br/>
      // print at using ansi escape sequence \x1b[line;columnH 
<br/>
      iprintf("\x1b[10;0HFrame = %d",frame);
<br/>
      iprintf("\x1b[16;0HTouch x = %04X, %04X\n", touchXY.rawx, touchXY.px);
<br/>
      iprintf("Touch y = %04X, %04X\n", touchXY.rawy, touchXY.py);      
<br/>
   
<br/>
   }
<br/>
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Your help is appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174641 - Sektor - Sun Jul 04, 2010 12:32 pm</h4>
    <div class="postbody"><span class="postbody">It's not a problem with the DSi, it would do the same on any DS. It's a problem with the code.  Some tutorials were written when the devkit compiled code used to hang on a return 0 but now it tries to return to menu and if it can't, it shuts the DS down.
<br/>
<br/>
Now if you want an infinite loop then code an infinite loop instead of doing a return.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174642 - cyberant - Sun Jul 04, 2010 12:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sektor wrote:</b></span></td> </tr> <tr> <td class="quote">It's not a problem with the DSi, it would do the same on any DS. It's a problem with the code.  Some tutorials were written when the devkit compiled code used to hang on a return 0 but now it tries to return to menu and if it can't, it shuts the DS down.
<br/>
<br/>
Now if you want an infinite loop then code an infinite loop instead of doing a return.</td> </tr></table><span class="postbody">Thanks! :)
<br/>
I changed the code and wrapped swiWaitForVBlank with a while(true) loop and it works.
<br/>
<br/>
Also, thanks for confirming that it's not a problems with the DSi hardware.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
