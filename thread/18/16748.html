<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Card command B7 (read) returns FF - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Card command B7 (read) returns FF</h2>
<div id="posts">
<div class="post">
    <h4>#169331 - m4c0 - Sat Jul 04, 2009 1:06 am</h4>
    <div class="postbody"><span class="postbody">I'm trying to use cardParamCommand to read my homebrew NitroROM area, but CARD_DATA_RD always returns FF. On no$gba it works. Is there any particular reason?
<br/>
<br/>
Searching the forum, I found a Chishm's post about using the B7 command with some special flags (removing BLK_SIZE, adding ACTIVATE, nRESET and BLK_SIZE 1). This is exactly what I'm doing...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169336 - Lick - Sun Jul 05, 2009 9:51 am</h4>
    <div class="postbody"><span class="postbody">Try re-inserting the card after your app has loaded. You'll need to pause the app for that, and resume afterwards. ("press START after re-inserting.")<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169377 - m4c0 - Tue Jul 07, 2009 10:11 am</h4>
    <div class="postbody"><span class="postbody">Now I receive random values... Seems KEY2-related. Does I need to issue ALL KEY1/2 commands? That's awkward. How does it works for real game cards? And how it works for games backed up on R4DS?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169378 - chishm - Tue Jul 07, 2009 12:55 pm</h4>
    <div class="postbody"><span class="postbody">Are you trying this on an official DS card or a flash card? A flash card most likely won't work for what you're attempting.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169386 - m4c0 - Tue Jul 07, 2009 11:54 pm</h4>
    <div class="postbody"><span class="postbody">Actually, I want to reproduce the behaviour of an official game backed up on a flash card.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169387 - chishm - Wed Jul 08, 2009 12:39 am</h4>
    <div class="postbody"><span class="postbody">The firmware of the flash card usually patches the backups so that instead of the SDK functions used to access the DS card, the game uses proprietary commands to read its data from the backup file. Sine homebrew doesn't use the official SDK, the card firmware has no where to patch, and the normal card commands will just fail. Incidentally, this is part of the reason DLDI was created -- to give the firmware a known area to patch.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169400 - m4c0 - Wed Jul 08, 2009 12:24 pm</h4>
    <div class="postbody"><span class="postbody">Good Lord! Finally I found a self-contained answer! :)
<br/>
<br/>
The official SDK seems like Voldemort: the "SDK-Who-Must-Not-Be-Named"... I know it's illegal to use it without Nintendo permission (or distribute by any means), but I'm starting to believe it is also illegal to mention its existence without permission... :D
<br/>
<br/>
Back to homebrew, I know DLDI patch grants access to the storage media (this is how libfat works), but the question is: can I use its interface to read my NitroROM without searching for the NDS file (like EFS does)?
<br/>
<br/>
BTW: is this the moment for create a new thread?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
