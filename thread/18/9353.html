<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>software mixer again - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > software mixer again</h2>
<div id="posts">
<div class="post">
    <h4>#80766 - ProblemBaby - Tue Apr 25, 2006 9:54 am</h4>
    <div class="postbody"><span class="postbody">Hello
<br/>
I really need to make some things sure before I start to develop my software mixer.
<br/>
<br/>
Iam planning to put the whole mixer in the ARM9 of several reasons, be able to play samples from ROM, easy and accurate communication between the app and its always nice to make it working even if Ive to use the official arm7 bin =).
<br/>
<br/>
Ive tried some to sync to vblank but I can't get clean output, so Ive to use a timer interrupt. What I want to ask is:
<br/>
<br/>
1. How should I set up the timer, when should I start play the buffer in Arm7, how should I make it synchronized.
<br/>
<br/>
2. Ive never made a timer synced mixer but I guess that the actual interrupt should look exactly as the vblank audio code would do, right?
<br/>
<br/>
thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80770 - tepples - Tue Apr 25, 2006 12:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">Iam planning to put the whole mixer in the ARM9 of several reasons, be able to play samples from ROM</td> </tr></table><span class="postbody">
<br/>
Designing with ROM in mind will hurt you when you try to port your program to GBAMP or (should you get a publisher lined up) to Nintendo's tools. Neither the GBAMP nor Nitro makes data available in GBA ROM.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">easy and accurate communication between the app and its always nice to make it working even if Ive to use the official arm7 bin =).</td> </tr></table><span class="postbody">
<br/>
If you use the official ARM7 binary, you'll probably get a decent interface, given that official games sound as good as they do.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">2. Ive never made a timer synced mixer but I guess that the actual interrupt should look exactly as the vblank audio code would do, right?</td> </tr></table><span class="postbody">
<br/>
Pretty much. If you want a more forgiving environment, develop a timer synchronized mixer on GBA first.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80779 - ProblemBaby - Tue Apr 25, 2006 4:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Designing with ROM in mind will hurt you when you try to port your program to GBAMP or (should you get a publisher lined up) to Nintendo's tools. Neither the GBAMP nor Nitro makes data available in GBA ROM. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
why? It would be make life much easier to play from ROM, dont have to think about Loading samples (Copy) and memory usage.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If you use the official ARM7 binary, you'll probably get a decent interface, given that official games sound as good as they do. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
My plan was to make the arm7 sound code as easy as possible infact just start two channels. Do you think games like osu tatakae ouendan have made their own sound code or is it a part in the arm7 binary to play streamed compressed sound.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Pretty much. If you want a more forgiving environment, develop a timer synchronized mixer on GBA first.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Thats all I wanted to know, the only problem is when to start the arm7  channels to get perfect timing, any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80780 - ProblemBaby - Tue Apr 25, 2006 4:03 pm</h4>
    <div class="postbody"><span class="postbody">by the way, do we now anything about the offical arm7 binary how its structured up, even if I dont think I'll get published I always want to try to make it as easy portable as possible.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80787 - tepples - Tue Apr 25, 2006 4:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Designing with ROM in mind will hurt you when you try to port your program to GBAMP or (should you get a publisher lined up) to Nintendo's tools. Neither the GBAMP nor Nitro makes data available in GBA ROM. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
why? It would be make life much easier to play from ROM, dont have to think about Loading samples (Copy) and memory usage.</span></td> </tr></table><span class="postbody">
<br/>
You will have to worry about loading samples and memory usage if you want to make your program compatible with the GBA Movie Player v2 or with Nintendo's Nitro development hardware. Or are you going to buy a SuperCard, M3, or traditional GBA flash cart for everybody who wants to try your program?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If you use the official ARM7 binary, you'll probably get a decent interface, given that official games sound as good as they do. 
<br/>
</td> </tr></table><span class="postbody">
<br/>
My plan was to make the arm7 sound code as easy as possible infact just start two channels. Do you think games like osu tatakae ouendan have made their own sound code or is it a part in the arm7 binary to play streamed compressed sound.</span></td> </tr></table><span class="postbody">
<br/>
As far as I can tell, official games decompress the sound on the ARM9 and send commands to the ARM7 to play it, unless the compression is the built-in IMA ADPCM compression supported by the DS audio hardware.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80792 - ProblemBaby - Tue Apr 25, 2006 5:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
You will have to worry about loading samples and memory usage if you want to make your program compatible with the GBA Movie Player v2 or with Nintendo's Nitro development hardware. Or are you going to buy a SuperCard, M3, or traditional GBA flash cart for everybody who wants to try your program? 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Do this stuff don't have ROM memory, is it a difference between GBA ROM and ROM, I don't know that much about this stuff, the only thing I know is that it works for me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80816 - wintermute - Tue Apr 25, 2006 7:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Do this stuff don't have ROM memory, is it a difference between GBA ROM and ROM, I don't know that much about this stuff, the only thing I know is that it works for me.</td> </tr></table><span class="postbody">
<br/>
<br/>
gbamp and commercial games have no GBA cart memory. MK2/3 need a boot menu on a GBA cart. As far as I'm aware there's no easy way to use the onboard memory of the M3 as ROM with ds applications.
<br/>
<br/>
Designing with ROM in mind will limit your application to traditional flashcarts.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80914 - tepples - Wed Apr 26, 2006 2:57 am</h4>
    <div class="postbody"><span class="postbody">"GBA ROM" means reasonably fast 16-bit word-addressed memory on a device in SLOT-2 that appears in 0x08000000-0x09FFFFFF of the Nintendo DS address space. Traditional GBA flash carts have up to 32 MB of GBA ROM visible at once. SuperCard and M3 have 32 MB of RAM that acts like a GBA ROM. But the GBAMP v2 has only 512 KB of GBA ROM, used to hold the GBAMP firmware.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80948 - HyperHacker - Wed Apr 26, 2006 7:21 am</h4>
    <div class="postbody"><span class="postbody">If you get a game published by Nintendo, it's going to be on a DS card, and there may well not be anything in the GBA slot at all (or far more likely, a GBA game). Unless you plan to sell it with an Option Pak just because you don't want to load things into memory, and I doubt Nintendo would be fond of the idea.
<br/>
<br/>
I would also like to know any information that's available about how to use the official ARM7 binary though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80976 - ProblemBaby - Wed Apr 26, 2006 1:29 pm</h4>
    <div class="postbody"><span class="postbody">Is it something that differs GBA ROM and DS ROM (from a DS cart)?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80977 - tepples - Wed Apr 26, 2006 1:35 pm</h4>
    <div class="postbody"><span class="postbody">ROM on a DS Game Card is accessed through a set of registers called "DS card I/O" because the DS Game Card is a <a class="postlink" href="http://wiki.pocketheaven.com/Block_device" target="_blank">block device</a> just like the CF card.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81040 - ProblemBaby - Wed Apr 26, 2006 9:28 pm</h4>
    <div class="postbody"><span class="postbody">Oh, then its no idea to put it in ROM anyway.
<br/>
Just one more thing though, how should things be structured up to be as easy portable as possible. is it a bad idea to put images one by one in ROM, is it best to put chunks of data, that first is copied to RAM and then split, or something like that?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81044 - Sausage Boy - Wed Apr 26, 2006 9:51 pm</h4>
    <div class="postbody"><span class="postbody">Doesn't really matter. Do whatever you feel comfortable with, and what seems best for the task. It might be a good idea to store all the frames in an animation in one file, for example.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
