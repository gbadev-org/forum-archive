<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Building Problem in r20...  or am i just stupid? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Building Problem in r20...  or am i just stupid?</h2>
<div id="posts">
<div class="post">
    <h4>#120317 - max482wert - Fri Mar 02, 2007 9:02 pm</h4>
    <div class="postbody"><span class="postbody">K, so im making a special DLDI version of the Tales of Dagur for myself and I need help "making" it this is the result I get when "make"ing it: (It uses GBA_NDS_FAT)
<br/>
<br/>
<span style="color: blue">&gt; "make"</span>
<br/>
"make" --no-print-directory -C arm7
<br/>
make[2]: `/e/Downloads/ToD.src/ToD.src.arm7' is up to date.
<br/>
"make" --no-print-directory -C arm9
<br/>
background.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/background.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/background.cpp -o background.o
<br/>
database.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/database.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/database.cpp -o database.o
<br/>
doorLink.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/doorLink.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/doorLink.cpp -o doorLink.o
<br/>
events.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/events.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/events.cpp -o events.o
<br/>
handlers.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/handlers.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/handlers.cpp -o handlers.o
<br/>
e:/Downloads/ToD.src/arm9/source/handlers.cpp: In function 'void handleHBlank()':
<br/>
<span style="color: violet">e:/Downloads/ToD.src/arm9/source/handlers.cpp:734: error: 'DISP_Y' was not declared in this scope</span>
<br/>
make[2]: *** [handlers.o] Error 1
<br/>
make[1]: *** [build] Error 2
<br/>
"make": *** [arm9/ToD.src.elf] Error 2
<br/>
<br/>
<span style="color: blue">&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 01:02</span>
<br/>
<br/>
<br/>
I added the IO_DLDI to GBA_NDS_FAT. There's just a problem building it.
<br/>
<br/>
Help is appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120318 - Puyo - Fri Mar 02, 2007 9:15 pm</h4>
    <div class="postbody"><span class="postbody">Include registers_alt.h . That should help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120319 - LiraNuna - Fri Mar 02, 2007 9:19 pm</h4>
    <div class="postbody"><span class="postbody">add this in 'main.h' :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define DISP_Y REG_VCOUNT</td> </tr></table><span class="postbody">
<br/>
Should make the problems go away :)
<br/>
<br/>
EDIT: may i suggest adding a .SILENT: rule on the ARM9 and ARM7 makefile? ;)<br/>_________________<br/>Private property.
<br/>
Violators will be shot, survivors will be shot again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120321 - max482wert - Fri Mar 02, 2007 9:24 pm</h4>
    <div class="postbody"><span class="postbody"><span style="color: blue">&gt; "make" </span>
<br/>
"make" --no-print-directory -C arm7
<br/>
make[2]: `/e/Downloads/ToD.src/ToD.src.arm7' is up to date.
<br/>
"make" --no-print-directory -C arm9
<br/>
NPCs.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/NPCs.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/NPCs.cpp -o NPCs.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/sprites.h:2,
<br/>
                 from e:/Downloads/ToD.src/arm9/source/NPCs.cpp:1:
<br/>
<span style="color: red">e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory</span>
<br/>
Sound9.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/Sound9.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/Sound9.cpp -o Sound9.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/Sound9.h:9,
<br/>
                 from e:/Downloads/ToD.src/arm9/source/Sound9.cpp:8:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
background.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/background.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/background.cpp -o background.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/background.h:2,
<br/>
                 from <span style="color: red">e:/Downloads/ToD.src/arm9/source/background.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory</span>
<br/>
database.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/database.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/database.cpp -o database.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/database.h:1,
<br/>
                 from <span style="color: red">e:/Downloads/ToD.src/arm9/source/database.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning:</span> registers_alt.h: No such file or directory
<br/>
doorLink.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/doorLink.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/doorLink.cpp -o doorLink.o
<br/>
<span style="color: red">In file included from e:/Downloads/ToD.src/arm9/source/doorLink.cpp:3:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory</span>
<br/>
events.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/events.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/events.cpp -o events.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/events.h:4,
<br/>
                 from e:/Downloads/ToD.src/arm9/source/events.cpp:1:
<br/>
<span style="color: red">e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory</span>
<br/>
handlers.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/handlers.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/handlers.cpp -o handlers.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/handlers.h:4,
<br/>
                 from e:/Downloads/ToD.src/arm9/source/handlers.cpp:1:
<br/>
<span style="color: red">e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory</span>
<br/>
levelLink.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/levelLink.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/levelLink.cpp -o levelLink.o
<br/>
<span style="color: red">In file included from e:/Downloads/ToD.src/arm9/source/levelLink.cpp:2:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory</span>
<br/>
main.cpp
<br/>
arm-eabi-g++ -MMD -MP -MF /e/Downloads/ToD.src/arm9/build/main.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb -mthumb-interwork -I/e/Downloads/ToD.src/arm9/include -I/e/devkitPro/libnds/include -I/e/devkitPro/libnds/include -I/e/Downloads/ToD.src/arm9/build -DARM9 -fno-rtti -fno-exceptions -c /e/Downloads/ToD.src/arm9/source/main.cpp -o main.o
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/main.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<span style="color: violet">e:/Downloads/ToD.src/arm9/source/main.cpp: In function 'int main()':
<br/>
e:/Downloads/ToD.src/arm9/source/main.cpp:19: error: 'VRAM_B_MAIN_BG_0x6000000' was not declared in this scope
<br/>
e:/Downloads/ToD.src/arm9/source/main.cpp:20: error: 'VRAM_C_SUB_BG_0x6200000' was not declared in this scope
<br/>
e:/Downloads/ToD.src/arm9/source/main.cpp:20: error: 'VRAM_D_MAIN_BG_0x6020000' was not declared in this scope</span>
<br/>
make[2]: *** [main.o] Error 1
<br/>
make[1]: *** [build] Error 2
<br/>
"make": *** [arm9/ToD.src.elf] Error 2
<br/>
<br/>
<span style="color: blue">&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 01:33</span></span><span class="gensmall"><br/><br/>Last edited by max482wert on Fri Mar 02, 2007 9:44 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#120323 - Puyo - Fri Mar 02, 2007 9:41 pm</h4>
    <div class="postbody"><span class="postbody">Replace them with 'VRAM_B_MAIN_BG_0x06000000', 'VRAM_C_SUB_BG_0x06200000', 'VRAM_D_MAIN_BG_0x06020000'.
<br/>
Without quotes. Don`t post all the log here post only errors. And you should include it like &lt;registers_alt.h&gt;.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120324 - max482wert - Fri Mar 02, 2007 9:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LiraNuna wrote:</b></span></td> </tr> <tr> <td class="quote">add this in 'main.h' :
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define DISP_Y REG_VCOUNT</td> </tr></table><span class="postbody">
<br/>
Should make the problems go away :)
<br/>
<br/>
EDIT: may i suggest adding a .SILENT: rule on the ARM9 and ARM7 makefile? ;)</span></td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
how do I make the rule? (sorry I don't know much about making makfiles)
<br/>
<br/>
<br/>
EDIT: wait it's "making"......... fail.
<br/>
<br/>
Errors: <span style="color: red">from e:/Downloads/ToD.src/arm9/source/NPCs.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
</span>
<br/>
<br/>
<span style="color: red">from e:/Downloads/ToD.src/arm9/source/Sound9.cpp:8:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
from e:/Downloads/ToD.src/arm9/source/background.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
from e:/Downloads/ToD.src/arm9/source/database.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/doorLink.cpp:3:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
from e:/Downloads/ToD.src/arm9/source/events.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
from e:/Downloads/ToD.src/arm9/source/handlers.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
</span>
<br/>
<span style="color: red">In file included from e:/Downloads/ToD.src/arm9/source/levelLink.cpp:2:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
In file included from e:/Downloads/ToD.src/arm9/source/main.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
from e:/Downloads/ToD.src/arm9/source/sprites.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
e:/Downloads/ToD.src/arm9/source/sprites.cpp:6: warning: dereferencing type-punned pointer will break strict-aliasing rules
<br/>
e:/Downloads/ToD.src/arm9/source/sprites.cpp:7: warning: dereferencing type-punned pointer will break strict-aliasing rules
<br/>
<br/>
from e:/Downloads/ToD.src/arm9/source/text.cpp:1:
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:11:27: warning: registers_alt.h: No such file or directory
<br/>
<br/>
e:/Downloads/ToD.src/arm9/source/fat/disc_io.c:40:11: error: #include expects "FILENAME" or &lt;FILENAME&gt;
<br/>
<br/>
:/Downloads/ToD.src/arm9/source/fat/disc_io.c:223: error: 'WAIT_CR' undeclared (first use in this function)
<br/>
e:/Downloads/ToD.src/arm9/source/fat/disc_io.c:223: error: (Each undeclared identifier is reported only once
<br/>
e:/Downloads/ToD.src/arm9/source/fat/disc_io.c:223: error: for each function it appears in.)
<br/>
e:/Downloads/ToD.src/arm9/source/fat/disc_io.c:310: error: 'WAIT_CR' undeclared (first use in this function)
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120331 - strager - Fri Mar 02, 2007 11:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Puyo wrote:</b></span></td> </tr> <tr> <td class="quote">And you should include it like &lt;registers_alt.h&gt;.</td> </tr></table><span class="postbody">
<br/>
<br/>
No, he should include as such:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds/registers_alt.h&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
About the .SILENT: issue, add the following line to the beginning of each Makefile:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">.SILENT:</td> </tr></table><span class="postbody">
<br/>
That should make your errors easier to read.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120332 - max482wert - Fri Mar 02, 2007 11:49 pm</h4>
    <div class="postbody"><span class="postbody">K, now only two errors:
<br/>
<br/>
<span style="color: violet">e:/Downloads/ToD.src/arm9/source/main.h:32: error: expected `)' before '*' token
<br/>
e:/Downloads/ToD.src/arm9/source/main.h:32: error: expected `)' before '*' token</span>
<br/>
<br/>
It points to variable code: 	
<br/>
<span style="color: green">//Variables</span>
<br/>
<span style="color: blue">extern volatile</span> u32 frameCounter;
<br/>
<span style="color: blue">extern volatile</span> u16 KEYS;
<br/>
<span style="color: blue">extern volatile</span> u16 HKEYS;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120336 - LiraNuna - Sat Mar 03, 2007 12:37 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://liranuna.drunkencoders.com/tod-with-dldi-support/" target="_blank">Have fun</a><br/>_________________<br/>Private property.
<br/>
Violators will be shot, survivors will be shot again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120337 - max482wert - Sat Mar 03, 2007 12:39 am</h4>
    <div class="postbody"><span class="postbody">why??!!!!!!!!!!! NO!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
