<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Libhax (New Release 0.3a) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Libhax (New Release 0.3a)</h2>
<div id="posts">
<div class="post">
    <h4>#159036 - hacker013 - Tue Jun 24, 2008 6:54 pm</h4>
    <div class="postbody"><span class="postbody">hey everybody,
<br/>
<br/>
I was looking for a simpel lib to build nds programs. I found PALib but that wasn't easy enough for people who starting with nds homebrewing like me so I made my own lib based on PAlib and libnds. I have made this for dos like programs. 
<br/>
<br/>
The Download:
<br/>
<a class="postlink" href="http://host-a.net/hacker013/libds%200.1.zip" target="_blank">Download Version 0.1</a>
<br/>
<a class="postlink" href="http://host-a.net/hacker013/hacker.zip" target="_blank">Download Version 0.3a</a>
<br/>
<br/>
Bugs:
<br/>
screen not totally displayed (memory bug)
<br/>
custom bmp font not good working (also a memory bug)
<br/>
custom bmp loader (working ) cutsom bmp drawer not (pointer passing bug)
<br/>
<br/>
Added:
<br/>
bmp functions
<br/>
draw functions
<br/>
text functions
<br/>
fat functions (2 only)
<br/>
busy with a custom arm7 core.
<br/>
<br/>
I will pause this library. You can contineu it and if you have a update of a bugfix, post it here and i will update the library.
<br/>
<br/>
The documentation is on my site:
<br/>
<a href="http://www.ndshome.webs.com/" target="_blank">http://www.ndshome.webs.com/</a>
<br/>
<br/>
I know, it is not much but it is a start. With the next version come mayby also some examples.
<br/>
<br/>
Give comment on it so that i can improve it.
<br/>
<br/>
gr,
<br/>
<br/>
hacker013<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"><br/><br/>Last edited by hacker013 on Sun Sep 14, 2008 10:42 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#159043 - AntonioND - Tue Jun 24, 2008 9:03 pm</h4>
    <div class="postbody"><span class="postbody">This function is wrong:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">bool ds_file_exists(char *filename)
<br/>
{
<br/>
FILE *f = fopen(filename,"rb");
<br/>
if(f==NULL)return 0;
<br/>
<br/>
return 1;
<br/>
<br/>
fclose(f);
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
Should be:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">bool ds_file_exists(char *filename)
<br/>
{
<br/>
FILE *f = fopen(filename,"rb");
<br/>
if(f==NULL) {
<br/>
fclose(f);
<br/>
return 0;
<br/>
}
<br/>
fclose(f);
<br/>
return 1;
<br/>
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
If not, it won't close the file.
<br/>
<br/>
PD: Espa?ol, ?eh?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Mensage segun el codigo</td> </tr></table><span class="postbody">
<br/>
Esto me ha dolido a la vista XD, es con J.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159046 - kusma - Tue Jun 24, 2008 9:19 pm</h4>
    <div class="postbody"><span class="postbody">Some other issues are that non-inline functions are in header files (breaks with multi-source projects), and ds_print() looks unsafe to me. Are you sure ds_print_ext() shouldn't fully replace it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159047 - GrizzlyAdams - Tue Jun 24, 2008 10:22 pm</h4>
    <div class="postbody"><span class="postbody">This seems like a bad idea. You are going to get horrible performance by wrapping PAlib, which itself is a wrapper around libnds.  Nevermind how hard it will be to debug any problems you run into (and you will run into problems). 
<br/>
<br/>
libnds should be more than enough for anyone with decent knowledge of C/C++.  If you can't understand how to use libnds then you will have a hard time developing for the ds, no matter how many layers of abstraction you stack on top of it.
<br/>
<br/>
You have to keep in mind that the ds is a resource constrained system, you can only stuff so much code into memory, and only do so much per frame of video. You don't have the luxury of 64MB of ram, multiple 300mhz cpus, or a full operating system to protect you from simple mistakes.
<br/>
<br/>
AntonioND: check your code, you can't fclose(NULL), the behavior is undefined, if you are lucky it will return without doing anything, if you are not you've just corrupted your heap.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159050 - Lazy1 - Tue Jun 24, 2008 10:51 pm</h4>
    <div class="postbody"><span class="postbody">If you want to check if a file exists <a class="postlink" href="http://linux.die.net/man/2/stat" target="_blank">stat()</a> might be a better choice.
<br/>
<br/>
Also, wouldn't that function be better called IsFileAccessible or something similar?
<br/>
Just because fopen returns NULL doesn't mean that the file isn't there which could be misleading, though this may not apply on the DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159052 - BigRedPimp - Tue Jun 24, 2008 11:12 pm</h4>
    <div class="postbody"><span class="postbody">I can understand why PA*** exists, to a point. It's a good idea, just very poorly executed. However, what you're doing is making matters worse. You might want to consider learning how libnds works and try to make your own alternative rather than wrapping the bloated and broken functions in PA***.
<br/>
<br/>
Let's see if I can sum this up...
<br/>
<br/>
libnds is a brand new car that someone buys mainly for the purpose of driving it. It works just fine right off the lot and needs no work done to it.
<br/>
<br/>
PA*** is the same car only the person buying it decides to make modifications to make it "better" by tossing body kits and lights on it. This ends up making the car look good to others but since there was no focus on tuning the car to perform right with the modifications, it runs like crap.
<br/>
<br/>
This "libds" is the same modified car but this time, there are some poor modification choices that render the car not only unable to be driven but looks like something only Mimi Bobeck would be proud to own.
<br/>
<br/>
Seriously, people need to put a little thought into the things they do before they go right out and do them because they think they're helping people. See my sig if you wonder why this is a highly bad idea.<br/>_________________<br/>MALWARE DETECTED: PAlib
<br/>
<a class="postlink" href="http://dsdev.bigredpimp.com/palib-survival-guide" target="_blank">Don't panic! There is a fix.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159064 - DensitY - Wed Jun 25, 2008 2:11 am</h4>
    <div class="postbody"><span class="postbody">While I think building a library to run on top of PA is a bad idea, hacker013, I think your heart is in the right place, as there is a need for a higher level library for those that just want to get their game on.
<br/>
<br/>
When it comes to developing a library I'd look for reasons to why people need a higher level library and equate those down to specific areas in ds development with libnds that most find confusing and/or simply don't want to deal with. off the top of my head I can list
<br/>
<br/>
- Vbank assignments
<br/>
- Extended palettes
<br/>
- Background layers
<br/>
- Sprites and OAM configuration
<br/>
- Sound code (more so because the sound hardware is only accessable directly via the arm7 cpu)
<br/>
<br/>
and possibly the least spoken biggie
<br/>
<br/>
- Easy Pc-&gt;DS asset path.
<br/>
<br/>
I think if you were to focus on a thin library that sits on top of libnds that allows the programmer to easy path to get backgrounds, sprites, extended palettes and sound working but leave them the power of vbank assignments and provide good Gui based tools for converting assets from PC to a good lean DS format (designed with the ds hardware in mind). The key thing is to keep the library tiny, clean, simple, easy to use and doesn't cut off the programmer from wanting todo more powerful things like using some vbanks for 3d textures and just using your library's background code for a top screen UI etc.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159090 - AntonioND - Wed Jun 25, 2008 8:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>GrizzlyAdams wrote:</b></span></td> </tr> <tr> <td class="quote">AntonioND: check your code, you can't fclose(NULL), the behavior is undefined, if you are lucky it will return without doing anything, if you are not you've just corrupted your heap.</td> </tr></table><span class="postbody">
<br/>
I didn't know that, thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159101 - hacker013 - Wed Jun 25, 2008 2:33 pm</h4>
    <div class="postbody"><span class="postbody">hey everybody,
<br/>
<br/>
thank you for the comment. i can use that much and i will use it but have one you guys a good site about libnds developing??
<br/>
<br/>
@kusma 
<br/>
<br/>
in the ds_print_ext(); doesn't work "\n" , i don't why, i think it is a PALib bug.
<br/>
<br/>
@lazy1
<br/>
<br/>
thank you for the idea, i can use that.
<br/>
<br/>
@Density
<br/>
<br/>
i will see what i can do, i'm not so good in c/c++. but i will do best.<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159104 - kusma - Wed Jun 25, 2008 3:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
@kusma 
<br/>
<br/>
in the ds_print_ext(); doesn't work "\n" , i don't why, i think it is a PALib bug.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But doesn't ds_print("%s"); crash or print junk? Perhaps you should try using libnds' console functionality (consoleInit* and puts()) instead of PAlib's?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159112 - hacker013 - Wed Jun 25, 2008 5:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
@kusma 
<br/>
<br/>
in the ds_print_ext(); doesn't work "\n" , i don't why, i think it is a PALib bug.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But doesn't ds_print("%s"); crash or print junk? Perhaps you should try using libnds' console functionality (consoleInit* and puts()) instead of PAlib's?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
i'm buzy to do that but it is much work.<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159116 - Lazy1 - Wed Jun 25, 2008 6:52 pm</h4>
    <div class="postbody"><span class="postbody">If you do plan on continuing it's best to drop console printing functions and leave that to newlib.
<br/>
The only reason you should have any console functions is if you want two consoles, even then you could probably write a devoptab implementation to do that even better.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159122 - josath - Wed Jun 25, 2008 9:10 pm</h4>
    <div class="postbody"><span class="postbody">Could I suggest you rename your library? It's confusingly close to libnds (we still get people from time to time confusing libnds and ndslib). Maybe libhacker or something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159129 - silent_code - Wed Jun 25, 2008 10:14 pm</h4>
    <div class="postbody"><span class="postbody">I can only further encourage what josath wrote: Please rename your library.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159142 - dovoto - Thu Jun 26, 2008 3:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kusma wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>hacker013 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
@kusma 
<br/>
<br/>
in the ds_print_ext(); doesn't work "\n" , i don't why, i think it is a PALib bug.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But doesn't ds_print("%s"); crash or print junk? Perhaps you should try using libnds' console functionality (consoleInit* and puts()) instead of PAlib's?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
i'm buzy to do that but it is much work.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
#include &lt;nds.h&gt;
<br/>
<br/>
int main(void)
<br/>
{
<br/>
   consoleDemoInit();
<br/>
<br/>
   printf("man...libnds is tough");
<br/>
<br/>
  while(1);
<br/>
}
<br/>
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159189 - Lynx - Thu Jun 26, 2008 5:29 pm</h4>
    <div class="postbody"><span class="postbody">I guess a little off topic.. but:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I found PALib but that wasn't easy enough for people who starting with nds homebrewing like me so I made my own lib based on PAlib and libnds.</td> </tr></table><span class="postbody">
<br/>
<br/>
If PAlib isn't "simple" enough for people "like you" how are you going to create your own lib?  I can't program to save my life, and PAlib is plenty easy in my opinion.
<br/>
<br/>
Maybe I'm just having issues grasping the concept that someone who thinks PAlib is "hard" would be able to create a lib that isn't even worse than PAlib...<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160428 - hacker013 - Tue Jul 15, 2008 6:20 pm</h4>
    <div class="postbody"><span class="postbody">hey everybody, 
<br/>
<br/>
Soon i release the 0.2 version of libds and i've renamed it to libhax. if have some problems with the int to char code :( Maybe can someone help.
<br/>
The 0.2 version contains a basic gui (only static text, buttons and checkboxes), basic draw api (codes like draw_line, draw_rectangle) , basic fat functions, basic console functions ,  extra string functions like (string_to_char, string_length, int_to_char). 
<br/>
<br/>
Can somebody help me with the problem to make from this files a library (.a file)
<br/>
<br/>
Update soon......
<br/>
<br/>
gr,
<br/>
<br/>
hacker013<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160433 - Lazy1 - Tue Jul 15, 2008 7:57 pm</h4>
    <div class="postbody"><span class="postbody">The standard C library already can do string to int and int to string.
<br/>
<br/>
<a href="http://linux.die.net/man/3/sprintf" target="_blank">http://linux.die.net/man/3/sprintf</a>
<br/>
<a href="http://linux.die.net/man/3/sscanf" target="_blank">http://linux.die.net/man/3/sscanf</a>
<br/>
<a href="http://linux.die.net/man/3/atoi" target="_blank">http://linux.die.net/man/3/atoi</a>
<br/>
<br/>
You're better off staying away from things we can already do and moving towards functionality that does not yet exist or is in short supply.
<br/>
For example, work more on your GUI code since lots of people do not like writing user interfaces, especially for small applications.
<br/>
<br/>
That of course depends on if your library is well written, wrappers around a wrapper like PAlib are just going to be more confusing when it comes to tracking down bugs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160435 - hacker013 - Tue Jul 15, 2008 8:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
That of course depends on if your library is well written, wrappers around a wrapper like PAlib are just going to be more confusing when it comes to tracking down bugs.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks, for the 0.2 version have i moved the hole lib to libnds:)<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161910 - hacker013 - Mon Aug 18, 2008 2:28 pm</h4>
    <div class="postbody"><span class="postbody">I've renamed it to libhax / xlib (i can't choose). And a have version 0.3 ready but it is dirty and my homemade console from that lib isn't working. I set this lib to pause because i'm busy with a os (something like that).<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161914 - Sausage Boy - Mon Aug 18, 2008 5:24 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://en.wikipedia.org/wiki/Xlib" target="_blank">Xlib</a> already exists unfortunately, and is used by pretty much all Linux GUI software in existance. ;)<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161923 - silent_code - Mon Aug 18, 2008 9:43 pm</h4>
    <div class="postbody"><span class="postbody">Maybe you should give it a functional name instead of a fancy one?
<br/>
Something descriptive, that's easy to memorize by it's functionality?<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162806 - hacker013 - Sat Sep 13, 2008 10:50 am</h4>
    <div class="postbody"><span class="postbody">when i got the bmp loading and drawing working, release version 3 (total libnds and libfat)<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162853 - hacker013 - Sun Sep 14, 2008 10:38 am</h4>
    <div class="postbody"><span class="postbody">New Release (0.3a)
<br/>
<br/>
<a class="postlink" href="http://host-a.net/hacker013/hacker.zip" target="_blank">Download hacker.zip</a><br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
