<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Libfat difference between No$Gba and actual DS [solved] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Libfat difference between No$Gba and actual DS [solved]</h2>
<div id="posts">
<div class="post">
    <h4>#159295 - doudou - Sat Jun 28, 2008 9:15 pm</h4>
    <div class="postbody"><span class="postbody">My rom crashes on my DS when I use libfat for resources packaging but it's fine in No$Gba.
<br/>
<br/>
Is libfat meant to be used in the same way on device and emulator? 
<br/>
<br/>
(I use DS one card in case it would have something to do with it).</span><span class="gensmall"><br/><br/>Last edited by doudou on Sat Jul 05, 2008 7:13 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#159296 - elhobbs - Sat Jun 28, 2008 9:33 pm</h4>
    <div class="postbody"><span class="postbody">the emulators tend to be more forgiving when it come to access violations. you may have to resort to print statements and infite loops to halt the program at various stages to locate the error. you might want to give desmume a try as you can attach a debugger to it. I have used insight (comes with devkitarm) and it works quite nicely. if you can setup your project to cross build for the DS and Windows then that is even better as you have much better debugging tools like visual studio express.
<br/>
<br/>
oh yeah, to answer your actual question - it depends on how you are trying to access data. are you trying to read the fat file system on the flash card or are you using something like FCSR (which I think the data is attached to the binary)? if you are trying to access the files through the fat file system then you need to make sure you are using the correct dldi driver.</span><span class="gensmall"><br/><br/>Last edited by elhobbs on Sat Jun 28, 2008 9:36 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#159297 - silent_code - Sat Jun 28, 2008 9:33 pm</h4>
    <div class="postbody"><span class="postbody">What type of card is the DS one?
<br/>
<br/>
libfat should work with any DLDI-able card, but shouldn't work with no$gba (which version are you using?) - emulators and older GBA NOR cartridges are mostly supported via FCSR.
<br/>
<br/>
An alternative to the "pure" libfat are EFS2.0 by Noda and NitroFS by eris. Those should work with any device, as well as with emulators. Another bonus is that they append the files to the .nds, so you only have one file (just like with FCSR, but with different reasons.)
<br/>
<br/>
I don't know how both libraries handle external files, which is important for development, as you don't want to write a big ROM file to your card every time you need to test a new version. This is even more true when sending the .nds over WiFi.
<br/>
<br/>
But I'm sure that both libraries have some sort of support for those cases.
<br/>
<br/>
Have a nice day! :^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159620 - doudou - Thu Jul 03, 2008 1:48 am</h4>
    <div class="postbody"><span class="postbody">The DS one : <a href="http://eng.supercard.cn/manual/dsone/" target="_blank">http://eng.supercard.cn/manual/dsone/</a>
<br/>
<br/>
Libfat does work with no$gba 2.5c, but I have to DLDI patch my rom. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Another bonus is that they append the files to the .nds</td> </tr></table><span class="postbody">
<br/>
<br/>
Maybe that's what I misunderstood: I thought I would only have the .nds file with libfat, as for commercial roms.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159621 - doudou - Thu Jul 03, 2008 2:03 am</h4>
    <div class="postbody"><span class="postbody">I now isolated my problem to the following that fails (returns false):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">fatInitDefault()</td> </tr></table><span class="postbody">
<br/>
<br/>
Does anyone knows what I have to look for?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159657 - doudou - Thu Jul 03, 2008 7:02 pm</h4>
    <div class="postbody"><span class="postbody">Do we need a specific DLDI version depending on the hardware (flash card) we use? And do we have something else than the .nds to upload on the cart?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159663 - silent_code - Thu Jul 03, 2008 9:22 pm</h4>
    <div class="postbody"><span class="postbody">Yes, each card provides its own DLDI "driver".
<br/>
Most modern cards auto patch ROMs (I'm talking about homebrew, which are also ROM images... ;^) ), but some older ones need manual patching via one of the available console or GUI tools.
<br/>
Visit chishm's official DLDI page for more information.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#159738 - doudou - Sat Jul 05, 2008 7:12 pm</h4>
    <div class="postbody"><span class="postbody">Ok, with scds2.dldi it's now fine, thanks!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
