<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>problems with KEY_X and the ds lite - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > problems with KEY_X and the ds lite</h2>
<div id="posts">
<div class="post">
    <h4>#118031 - captaincabinets - Fri Feb 09, 2007 6:18 am</h4>
    <div class="postbody"><span class="postbody">Ahoy. I am having troubles with a simple program I'm trying to code. It reads the button presses using 
<br/>
<br/>
scanKeys()
<br/>
if (keyHeld() &amp; KEY_X) etc.
<br/>
<br/>
Now this works fine on an emulator, but when I put it on my ds lite, it acts as if the KEY_X bit is always set, ie, x is constantly pressed. I tried re-writing it so it gets the special keys from 
<br/>
<br/>
~IPC-&gt;buttons &amp; 1
<br/>
<br/>
 but it is exactly the same result: works fine on the emulator (dualis), but not on the ds lite.
<br/>
<br/>
I am using the standard ARM7 code that comes with devkitpro.
<br/>
<br/>
Any suggestions? Does the lite's GBA architecture differ from the normal ds', ie are the x,y,touch registers in a different location?
<br/>
<br/>
Any help appreciated.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118036 - wintermute - Fri Feb 09, 2007 8:06 am</h4>
    <div class="postbody"><span class="postbody">This is symptomatic of a non functioning arm7 core - dualis does not emulate arm7 code so it won't show up there.
<br/>
<br/>
Make sure that you have the most recent toolchain and libnds, this can be caused by a mismatch between the libnds used to build the ndstool embedded arm7 core and your arm9 application.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118044 - captaincabinets - Fri Feb 09, 2007 12:00 pm</h4>
    <div class="postbody"><span class="postbody">yep, I updated libnds and the problem went away. Spectacular, thanks very much for the help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118055 - tepples - Fri Feb 09, 2007 2:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">This is symptomatic of a non functioning arm7 core - dualis does not emulate arm7 code</td> </tr></table><span class="postbody">
<br/>
Then why does AXE work in a copy of Dualis from May 2006?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118063 - Sausage Boy - Fri Feb 09, 2007 5:40 pm</h4>
    <div class="postbody"><span class="postbody">I believe dualis has arm7 emulation these days, at least in some form.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118065 - wintermute - Fri Feb 09, 2007 6:28 pm</h4>
    <div class="postbody"><span class="postbody">Really?
<br/>
<br/>
I was under the impression that Dualis just filled in the IPC struct rather than doing anything at all with the arm7 core.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118070 - Sausage Boy - Fri Feb 09, 2007 8:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">2006-03-01
<br/>
<br/>
Two are better than one.
<br/>
<br/>
This release features the addition of the second CPU (ARM7TDMI). Touchscreen access is still faked in the same manner as in earlier versions, and not all parts of ARM7 memory are handled correctly yet.</td> </tr></table><span class="postbody">
<br/>
<br/>
I hope this quote from <a class="postlink" href="http://dualis.1emulation.com" target="_blank">http://dualis.1emulation.com</a> clears things up.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
