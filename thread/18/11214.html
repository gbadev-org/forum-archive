<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Tabs on Makefile: what for? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Tabs on Makefile: what for?</h2>
<div id="posts">
<div class="post">
    <h4>#103311 - Izhido - Wed Sep 20, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
I wanted to tell you about something odd that happened to me when developing vc2mkfil. At the very beginning, I built an application that created an exact copy of the /examples/nds/templates/arm9/Makefile present on devkitPro; character by character, line by line. No modifications of any kind, just a copy of an existing, functional makefile. I ran the tool, and invoked "make" with that file. Just imagine my surprise when "make" printed the following:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Makefile:102: ***** missing separator. Stop.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
WTF??? I went and checked, line by line, the original makefile against the generated one... no visible differences... it should work!!! Then, after a while, it hit me: The files were not really the same, since I replaced all TABs with 3-spaces (three ' '(20H) blank spaces). The line being mentioned reads like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
$(BUILD):
<br/>
    @[ -d $@ ] || mkdir -p $@             &lt;----- Line 102
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The thing here is, if I replace the tabs preceding each line where each target's commands are specified, with blank spaces, then "make" refuses to accept the file, arguing there's a "missing separator". (???) Shouldn't a blank space be considered a valid separator? Or am I missing something here? 
<br/>
<br/>
I must admit I'm not an expert on "make" builds, but... isn't that behavior odd? What do you think about it? Is there a reasonable explanation for this? I'd like very much to know... :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103314 - Sausage Boy - Wed Sep 20, 2006 10:28 pm</h4>
    <div class="postbody"><span class="postbody">Makefiles have been working like that since like, more than a hundred years ago. Deal with it.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103315 - Cearn - Wed Sep 20, 2006 10:29 pm</h4>
    <div class="postbody"><span class="postbody">As annoying as it is, this is the standard behaviour for makefiles. See <a class="postlink" href="http://www.gnu.org/software/make/manual/make.html#Rule-Introduction" target="_blank">this here manual page</a>. As for <span style="font-style: italic">why</span> it has to be a tab, I'd like to know that one myself. Also nice is how escaped linebreaks cannot have whitespace after the backslash. A line ending in "\" is fine, one ending in "\ " isn't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103317 - Izhido - Wed Sep 20, 2006 10:47 pm</h4>
    <div class="postbody"><span class="postbody">Hehe. Figures. 
<br/>
<br/>
BTW, thanks for the link, Cearn. Very helpful. And, Sausage Boy, OK, I promise I'll live with it :).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103601 - cloak - Fri Sep 22, 2006 11:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">Also nice is how escaped linebreaks cannot have whitespace after the backslash. A line ending in "\" is fine, one ending in "\ " isn't.</td> </tr></table><span class="postbody">
<br/>
<br/>
Makes sense when you think about it from a programming perspective. You are esentially escaping the \n of the file (think \\n) which ignores the newline. Once there is whitespace after you get something like \ \n. How can you distinguish if this should be an end of line or continuation?
<br/>
<br/>
-Cloak</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103606 - Izhido - Fri Sep 22, 2006 11:53 pm</h4>
    <div class="postbody"><span class="postbody">Um... while (from a programming point of view) this is correct, the thing is, makefiles are usually created by people, not machines, and for us, it's too easy to put spaces, tabs, comments, or whatever, into these files, just to "pretify" them, or making them more understandable for another people. After all, C/C++ let us do this... so, why makefiles (the things one uses to compile C/C++ programs) shouldn't? Just my 2 cents ....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103813 - tepples - Sun Sep 24, 2006 7:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Izhido wrote:</b></span></td> </tr> <tr> <td class="quote">makefiles are usually created by people, not machines, and for us, it's too easy to put spaces, tabs, comments, or whatever, into these files, just to "pretify" them, or making them more understandable for another people. After all, C/C++ let us do this... so, why makefiles (the things one uses to compile C/C++ programs) shouldn't?</td> </tr></table><span class="postbody">
<br/>
Python, classic Fortran, and older assembly languages are whitespace sensitive.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103937 - Izhido - Mon Sep 25, 2006 3:26 pm</h4>
    <div class="postbody"><span class="postbody">... and let's not forget BASIC and all it's Visual- children :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103958 - tepples - Mon Sep 25, 2006 6:00 pm</h4>
    <div class="postbody"><span class="postbody">BASIC has never been whitespace sensitive. Every Do is terminated by a Loop, every For has a Next, every If has an End If, much like in Pascal.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103966 - Izhido - Mon Sep 25, 2006 6:46 pm</h4>
    <div class="postbody"><span class="postbody">... yet, Visual Basic 6.0/.NET 2002/.NET 2003/2005 requires that, when you wish to continue a line, you write " _" (a blank space followed by an underscore followed ONLY by Enter, no whitespace/comment), or else it wont compile.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103970 - sajiimori - Mon Sep 25, 2006 7:23 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, newlines are included in the traditional definition of "whitespace."
<br/>
<br/>
Agreed that the 'make' pseudo-language sucks horribly.  It's what you get when you don't plan ahead, and you consistently make the wrong decisions at every step in development.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154482 - gauauu - Wed Apr 16, 2008 9:49 pm</h4>
    <div class="postbody"><span class="postbody">To bring back from the dead:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote"> As for <span style="font-style: italic">why</span> it has to be a tab, I'd like to know that one myself. </td> </tr></table><span class="postbody">
<br/>
<br/>
I just read ESR's <span style="font-style: italic">The Art of Unix Programming</span> which has a quote from the creator of make:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Why the tab in column 1? Yacc was new, Lex was brand new. I hadn't tried either, so I figured this would be a good excuse to learn. After getting myself snarled up with my first stab at Lex, I just did something simple with the pattern newline-tab. It worked, it stayed. And then a few weeks later I had a user population of about a dozen, most of them friends, and I didn't want to screw up my embedded base. The rest, sadly, is history.
<br/>
<br/>
-- Stuart Feldman</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154485 - Dominik - Wed Apr 16, 2008 10:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>gauauu wrote:</b></span></td> </tr> <tr> <td class="quote">I just read ESR's <span style="font-style: italic">The Art of Unix Programming</span> which has a quote from the creator of make:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Why the tab in column 1? Yacc was new, Lex was brand new. I hadn't tried either, so I figured this would be a good excuse to learn. After getting myself snarled up with my first stab at Lex, I just did something simple with the pattern newline-tab. It worked, it stayed. And then a few weeks later I had a user population of about a dozen, most of them friends, and I didn't want to screw up my embedded base. The rest, sadly, is history.
<br/>
<br/>
-- Stuart Feldman</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
*lol* Thanks for the quote. Made it worthwhile for me that I clicked on this thread in the first place. :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
