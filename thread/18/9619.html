<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>saving homebrew data - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > saving homebrew data</h2>
<div id="posts">
<div class="post">
    <h4>#83886 - knight0fdragon - Fri May 19, 2006 9:08 am</h4>
    <div class="postbody"><span class="postbody">Is there some convienient package out there that will let my apps save to any type of cart, or will i have to add all sorts of code to make this as compatible as possible<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83977 - tepples - Sat May 20, 2006 12:11 am</h4>
    <div class="postbody"><span class="postbody">Do you mean a library that will allow writing to all CF cards, all SD cards, all flash carts' SRAM, all flash carts' NOR area, and NOR/NAND hybrid carts' NAND area? Nope. Chishm's library supports CF and possibly a few other types, but not everything. Which makes and models were you talking about?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83999 - knight0fdragon - Sat May 20, 2006 3:16 am</h4>
    <div class="postbody"><span class="postbody">Basically what i want is a convienient way, yes a library, that pretty much auto detects for me, 
<br/>
<br/>
so for example I have 3 users
<br/>
<br/>
User A has supercard
<br/>
<br/>
User B has XGLite
<br/>
<br/>
User C maybe has wifi download with MPFH to use for a save  (this one is optional of course)
<br/>
<br/>
What I am looking for is something in the lines of
<br/>
<br/>
SaveToCard(data);
<br/>
<br/>
then when i need to read
<br/>
<br/>
data = LoadFromCard();
<br/>
<br/>
and in the black box realm, it detects the flash carts and what not.
<br/>
<br/>
Surely i doubt something THIS convienent exists,  but perhaps there is something out there easier
<br/>
<br/>
I believe Chishm's library only writes to MP1/2  and a few flash carts
<br/>
<br/>
but not things like supercard.
<br/>
<br/>
If this doesnt exist I will perhaps work on some class to do this<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84011 - tepples - Sat May 20, 2006 4:43 am</h4>
    <div class="postbody"><span class="postbody">I assume that the XG has GBA SRAM; otherwise, the player couldn't have used it to install FlashMe using PassMe2 or a clone thereof. Reading and writing GBA SRAM is easy: it's just a byte array starting at 0x0A000000.
<br/>
<br/>
Support GBA SRAM and Chishm's library, and you've supported users A and B. Pseudocode follows:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/* returns nonzero for success and 0 for failure */
<br/>
int save() {
<br/>
  if (cfAvailable) {
<br/>
    int wasWritten = 0;
<br/>
    FILE *fp = fopen("/mygame/save.dat", "w");
<br/>
    if(fp) {
<br/>
      written = fwrite(loadSaveBuf, sizeof(loadSaveBuf), 1, fp);
<br/>
      fclose(fp);
<br/>
    }
<br/>
    return wasWritten;
<br/>
  } else if (sramAvailable) {
<br/>
    /* First copy over the savegame. */
<br/>
    bytecpy((char *)0x0A000000, loadSaveBuf, sizeof(loadSaveBuf));
<br/>
    /* If the copy was successful, bytecmp() will return 0. */
<br/>
    return !bytecmp((char *)0x0A000000, loadSaveBuf, sizeof(loadSaveBuf));
<br/>
  } else {
<br/>
    return 0;
<br/>
  }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
Do you claim that user C uses FlashMe+WMB exclusively? If so, how did user C install FlashMe?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84014 - HyperHacker - Sat May 20, 2006 5:00 am</h4>
    <div class="postbody"><span class="postbody">A borrowed flash cart?
<br/>
<br/>
BTW, you have to ensure that the CPU that's going to write to SRAM has access to the bus. Use sysSetBusOwners() in NDSLib.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84018 - knight0fdragon - Sat May 20, 2006 5:12 am</h4>
    <div class="postbody"><span class="postbody">well see the reason why i am asking this is because I want to make it easilt accessible to all kinds of different carts
<br/>
<br/>
I myself only have 2 kinds. and chishms driver doesnt write to SC I thought
<br/>
<br/>
its not a matter of the code, that i can do, thanks though for that
<br/>
<br/>
just looking for something that handles a lot of cases that have been tested, that i myself cannot.  This is ok though,  I will just write my own class since i doubt anything like this really exists
<br/>
<br/>
does the MP player have some virtual sram like the SC does????
<br/>
<br/>
perhaps i could just add a case where if its a non flash cart, then save the virtual sram to CF<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84022 - tepples - Sat May 20, 2006 5:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>knight0fdragon wrote:</b></span></td> </tr> <tr> <td class="quote">well see the reason why i am asking this is because I want to make it easilt accessible to all kinds of different carts
<br/>
<br/>
I myself only have 2 kinds. and chishms driver doesnt write to SC I thought</td> </tr></table><span class="postbody">
<br/>
<a class="postlink" href="http://chishm.drunkencoders.com/gba_nds_fat/index.html" target="_blank">Chishm's driver</a> has no problem writing to GBAMP CF, SuperCard CF, or M3 CF. But currently, you have to use the SRAM method to write to SD adapters or NOR cards.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">does the MP player have some virtual sram like the SC does????</td> </tr></table><span class="postbody">
<br/>
M3 (GBAMP v3) does, but GBAMP v2 does not.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">perhaps i could just add a case where if its a non flash cart, then save the virtual sram to CF</td> </tr></table><span class="postbody">
<br/>
That's pretty much what the pseudocode I posted does.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84062 - knight0fdragon - Sat May 20, 2006 11:55 am</h4>
    <div class="postbody"><span class="postbody">ok and i was refering to this when refering to chishms driver
<br/>
<br/>
Partially supported devices (read only, disabled by default) 
<br/>
SuperCard SD 
<br/>
M3 Adapter SD 
<br/>
EFA 2<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84094 - zzo38computer - Sat May 20, 2006 3:32 pm</h4>
    <div class="postbody"><span class="postbody">Another thing I would recomend for compatibility is to check if the DS game card has the same title as your game, and if it does it will save on the DS game card.<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84095 - thoduv - Sat May 20, 2006 3:32 pm</h4>
    <div class="postbody"><span class="postbody">A modified version of chishms FAT libary can write on M3SD and SCSD (even it's slow). It's the version using ASM drivers. For instance, SaTa uses it in his Rein tool.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84849 - knight0fdragon - Thu May 25, 2006 12:19 am</h4>
    <div class="postbody"><span class="postbody">Ok now my next problem is actually detecting if its a supercard or not.  I tried checking the header, supercard gives me ""
<br/>
<br/>
is there another way to detect what cart i have?<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84892 - MaHe - Thu May 25, 2006 12:40 pm</h4>
    <div class="postbody"><span class="postbody">Offtopic: SuperCard doesn't have 'virtual SRAM' but a real one, though it's not battery powered (it is on miniSD version). 
<br/>
<br/>
Ontopic: A library like this would be very convenient, so I hope somebody manages to make it work :)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
