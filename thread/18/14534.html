<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Try to copy data to the subscreen - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Try to copy data to the subscreen</h2>
<div id="posts">
<div class="post">
    <h4>#145489 - kiwicode - Fri Nov 16, 2007 4:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I've got a very strange problem and I can't figure out what it might be the cause.
<br/>
<br/>
I want to change the value of subscreen's memory ( for example to draw a simple rect ). This is pretty easy and I don't have any problems with it.
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   for( int iy = 50; iy &lt; 100; iy ++ )
<br/>
   {
<br/>
      for( int ix = 50; ix &lt; 150; ix++ )
<br/>
      {
<br/>
            
<br/>
            video_buffer[ iy * 256 + ix &gt;&gt; 1 ] = 15 | ( 15 &lt;&lt; 8 );
<br/>
      }
<br/>
   }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The problem occurs when I want to copy the data on every single byte of the subscreen instead of copying it on 2 bytes per time.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
( ( uint8 * )video_buffer )[ iy * 256 + ix  ] = 15 | ( 15 &lt;&lt; 8 );
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
After this simple cast I don't see anything blitted on my subscreen!
<br/>
How can this happen?
<br/>
<br/>
I've initialized everything that way:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   videoSetMode( MODE_0_2D | DISPLAY_BG0_ACTIVE | DISPLAY_SPR_ACTIVE | DISPLAY_SPR_1D_LAYOUT | DISPLAY_SPR_EXT_PALETTE );
<br/>
   videoSetModeSub( MODE_5_2D | DISPLAY_BG3_ACTIVE );
<br/>
<br/>
   vramSetBankA(VRAM_A_MAIN_BG);
<br/>
   vramSetBankB(VRAM_B_MAIN_SPRITE_0x06400000);
<br/>
   vramSetBankC(VRAM_C_SUB_BG);
<br/>
<br/>
   u16* video_buffer =  (u16*)BG_BMP_RAM_SUB(2);
<br/>
<br/>
   SUB_BG3_CR = BG_BMP8_256x256 | BG_BMP_BASE(2) | BG_PRIORITY(1);
<br/>
   SUB_BG3_XDY = 0;
<br/>
   SUB_BG3_XDX = 1 &lt;&lt; 8;
<br/>
   SUB_BG3_YDX = 0;
<br/>
   SUB_BG3_YDY = 1 &lt;&lt; 8;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
any ideas?
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145498 - DragonMinded - Fri Nov 16, 2007 7:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The problem occurs when I want to copy the data on every single byte of the subscreen instead of copying it on 2 bytes per time.</td> </tr></table><span class="postbody">
<br/>
<br/>
This is the problem.  You can't access VRAM bytewise.<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145509 - Lick - Fri Nov 16, 2007 10:50 pm</h4>
    <div class="postbody"><span class="postbody">Funny that there are 3 of these (BMP8) topics at the same time!<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
