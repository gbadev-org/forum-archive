<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Upgrading devkitpro, linker errors - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Upgrading devkitpro, linker errors</h2>
<div id="posts">
<div class="post">
    <h4>#161499 - ingramb - Tue Aug 05, 2008 3:52 am</h4>
    <div class="postbody"><span class="postbody">I'm trying to upgrade my project from r20 to the latest version of devkitpro, and I get the following linker error:
<br/>
<br/>
"section .sbss [02020c0c -&gt; 02023013] overlaps section .itcm [02020c0c -&gt; 020281f3]".
<br/>
<br/>
Looking at the map file, both my itcm and sbss sections seem to be within range.
<br/>
<br/>
Any ideas as to what changed since r20 that could cause this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161539 - ingramb - Wed Aug 06, 2008 2:53 am</h4>
    <div class="postbody"><span class="postbody">I'm looking at my map file more closely, and I have this:
<br/>
<br/>
.itcm           0x01000000     0x75e8 load address 0x02020c0c
<br/>
...
<br/>
.sbss           0x0b000020     0x2408 load address 0x02020c0c
<br/>
<br/>
I think this is the problem...the itcm and the sbss have the same load address.  But the sbss shouldn't even have a load address right?  It's just zero-filled memory.
<br/>
<br/>
[EDIT]
<br/>
Looking at my old map file, the sbss doesn't have a load address.
<br/>
<br/>
Any insights given this new information?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161576 - tepples - Wed Aug 06, 2008 7:18 pm</h4>
    <div class="postbody"><span class="postbody">As I understand it, the load address of a section that doesn't get loaded might just be identical to the load address of the section next to it in some config file. In this case, .../devkitarm/arm-eabi/lib/ds_arm9.ld specifies .dtcm, .itcm, .sbss, and .bss one after another.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#161607 - ingramb - Thu Aug 07, 2008 4:38 am</h4>
    <div class="postbody"><span class="postbody">I've tried building some small test cases using the newest version of devkitpro, and none of them show a load address for the sbss section.  Only my project does.  I've upgraded my makefiles to the latest template versions.  I've tried removing all DTCM_BSS variables, and then slowly adding them back one by one.  It doesn't matter.  As soon as ANYTHING goes into the sbss section, my map file shows:
<br/>
<br/>
.sbss           0x0b000020     0x2200 load address 0x02022854
<br/>
<br/>
And I get linker errors.  Every other test case I've tried comes up as:
<br/>
<br/>
.sbss           0x0b000020    0x****
<br/>
(notice no load address)
<br/>
<br/>
I'm about ready to throw my laptop out the window.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
