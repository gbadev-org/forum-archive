<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>WRAM & IWRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > WRAM & IWRAM</h2>
<div id="posts">
<div class="post">
    <h4>#162297 - jimis - Sat Aug 30, 2008 5:56 pm</h4>
    <div class="postbody"><span class="postbody">I am trying to use ds wram (shared memory) to move data from one processor to the other. Unfortunatelly devkitarm maps it by default to arm7 to form a continuous 96KB block. Is it possible to move arm7 code in iwram only (0x03800000) by eg. modifying a file?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162312 - eKid - Sun Aug 31, 2008 6:38 am</h4>
    <div class="postbody"><span class="postbody">You have to setup your project to use a custom arm7 linker script. Then you can modify a copy of the devkitARM script to put the data/code in the different spot (3800000-64kb).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162313 - jimis - Sun Aug 31, 2008 8:36 am</h4>
    <div class="postbody"><span class="postbody">Thanks a lot for the fast reply!
<br/>
Just because I am a newbie an I have little programming experience can anybody give me more specific instructions?
<br/>
The only file that I have seen containing arm7 iwram info was ds_arm7.ld. Is this what i have to edit?
<br/>
After putting this (iwram : ORIGIN = 0x03800000, LENGTH = 64K) in  ds_arm7.ld I noticed changes in my .map file. The addresses in it where above 0x03800000 (only in iwram memory). But all emulators and the ds apparently crashed...
<br/>
Note:Only arm7 crashed, arm9 was functioning properly.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162316 - jimis - Sun Aug 31, 2008 9:22 am</h4>
    <div class="postbody"><span class="postbody">I have just seen the -T flag of the compiler which enables you to use a custom scriptfile.
<br/>
Is this the way to use a custom arm7 linker script?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162367 - eKid - Mon Sep 01, 2008 10:31 am</h4>
    <div class="postbody"><span class="postbody">It's probably crashing because ndstool is still building the final NDS rom with the 37F8000 address. Try adding "-r7 0x3800000 -e7 0x3800000" to your ndstool line in your makefile to tell it the new arm7 load/entry points.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162383 - jimis - Mon Sep 01, 2008 6:00 pm</h4>
    <div class="postbody"><span class="postbody">Thank you it worked!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
