<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Iwram compile error - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Iwram compile error</h2>
<div id="posts">
<div class="post">
    <h4>#133032 - doudou - Mon Jul 02, 2007 8:57 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to get my GBA project compiling for NDS. This is the latest error I got:
<br/>
<br/>
linking GameProject.elf
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-eabi/4.1.1/../../../../arm-eabi/bin/ld.exe: error: no memory region specified for loadable section `.iwram'
<br/>
collect2: ld returned 1 exit status
<br/>
<br/>
Any suggestion?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133038 - wintermute - Mon Jul 02, 2007 9:31 pm</h4>
    <div class="postbody"><span class="postbody">Don't put code in .iwram?
<br/>
<br/>
The DS arm9 linkscripts don't contain a .iwram section, the equivalent is .itcm. You should start by removing any attributes which place functions or data in non default sections, it's probably unlikely that you need to use the fast memory on the DS.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133790 - doudou - Sun Jul 08, 2007 7:06 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, I didn't really need to put code in the iwram for DS, removing the 
<br/>
<br/>
__attribute__((section (".iwram"),long_call))
<br/>
<br/>
did solve the problem. I think Since I'm trying to compile a complete GBA game project for DS, I think I will encounter some artefacts of that kind before succeeding...
<br/>
<br/>
I'm already stuck on another:
<br/>
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-eabi/4.1.1/../../../../arm-eabi/bin/ld.exe: region ewram is full (c:/GameProject/MakeNDS/Game.elf section .rodata)
<br/>
<br/>
And there are few others about others sections. Maybe I need a to know a bit more about sections and linking in general, does someone have a link or topic that could help?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133842 - wintermute - Mon Jul 09, 2007 5:59 am</h4>
    <div class="postbody"><span class="postbody">The last one means that you've consumed all of the DS memory unfortunately. The DS has 4meg available for your application as opposed to the GBA's 32meg of ROM space.
<br/>
<br/>
If possible you need to load your assets from an external device using the file IO provided by libfat and not attempt to have everything in memory simultaneously.
<br/>
<br/>
I have considered providing another set of linkscripts to allow building ARM9 code to run from GBA cart space but I'm not sure this is something that should be encouraged. Cart space is only available on slot2 cards and, even then, not all devices provide the full 32meg. For slot1 cards your only option is the file system.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134596 - doudou - Sat Jul 14, 2007 2:50 pm</h4>
    <div class="postbody"><span class="postbody">Thanks again! For now I only removed a lot of my resources to be able to compile and it did. Next step will be to use the libfat IO you mentionned. 
<br/>
<br/>
My rom is not running in DeSmuME. I can see my backgrounds (mode 0) but not my sprites. It's already more than what I thought you work at this point.  It's not working on my DS though.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
