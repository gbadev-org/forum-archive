<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Problem: Textures affecting non-textured quads (not wanted). - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Problem: Textures affecting non-textured quads (not wanted).</h2>
<div id="posts">
<div class="post">
    <h4>#75754 - Dark Knight ez - Wed Mar 15, 2006 7:27 pm</h4>
    <div class="postbody"><span class="postbody">Hello.
<br/>
<br/>
I've been adding textured and non-textured quads to a 3D environment on the NDS. For textured quads I'm using code similiar to this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glBindTexture(GL_TEXTURE_2D, *texture);
<br/>
glBegin(GL_QUADS);
<br/>
      glColor3f(1.0f, 1.0f, 1.0f);
<br/>
      glTexCoord2f(0.0f, 1.0f); glVertex3f(xstart,         tracksCenterY, zstart - depth);
<br/>
      glTexCoord2f(1.0f, 1.0f); glVertex3f(xstart + width, tracksCenterY, zstart - depth);
<br/>
      glTexCoord2f(1.0f, 0.0f); glVertex3f(xstart + width, tracksCenterY, zstart);
<br/>
      glTexCoord2f(0.0f, 0.0f); glVertex3f(xstart,         tracksCenterY, zstart);
<br/>
glEnd();</td> </tr></table><span class="postbody">
<br/>
For untextured quads, I just leave out the glBindTexture call and the glTexCoord2f calls.
<br/>
When using both in the same program, my untextured quads seem to use the colour of the texture which has been bound by the last executed glBindTexture call, even though I'm not attaching that texture with glTexCoord2f calls.
<br/>
This is not at all what I want. I just want it to use the colour specified by glColor3f, not affected by textures I use.
<br/>
Am I doing something wrong? Is there a call to unbind textures (temporarily)? Or is this a bug in libnds?
<br/>
<br/>
<br/>
Thanks in advance.
<br/>
<br/>
Dark Knight ez.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75755 - MrK - Wed Mar 15, 2006 7:38 pm</h4>
    <div class="postbody"><span class="postbody">I think there's a bit (GL_TEXTURE_2D) in register GFX_CONTROL which controls the texture mapping
<br/>
<br/>
maybe using glDisable (GL_TEXTURE_2D) should work... but I can't assure it :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75757 - Dark Knight ez - Wed Mar 15, 2006 7:47 pm</h4>
    <div class="postbody"><span class="postbody">Tried that --- glDisable(GL_TEXTURE_2D) --- just now, and it doesn't seem to have the desired effect unfortunately.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75775 - Webez - Wed Mar 15, 2006 9:43 pm</h4>
    <div class="postbody"><span class="postbody">glBindTexture(GL_TEXTURE_2D, 0);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75836 - Dark Knight ez - Thu Mar 16, 2006 12:59 pm</h4>
    <div class="postbody"><span class="postbody">Thank you, that did the trick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
