<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>File I/O for loading graphics and audio resources? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > File I/O for loading graphics and audio resources?</h2>
<div id="posts">
<div class="post">
    <h4>#145114 - Natso - Sun Nov 11, 2007 7:54 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to figure out whether or not the following are possible, so I can know what kind of limits I'm facing (it's for what is possibly my next project).
<br/>
<br/>
Loading files from the flash cartridge's filesystem... Are there any good examples or tutorials where I can see/learn the proccess?
<br/>
<br/>
Also, how much trouble would it be to load an mp3 format song, presumably lower quality, but... buffering it from the flashcart's filesystem in real-time... has this been done before?  Or is it at all reasonable?
<br/>
<br/>
Tracker files, in s3m or similar format... (also streaming them from the filesystem) I imagine it would be more efficient than streaming the mp3, but if there are some quirks I should know about, can you give me details?
<br/>
<br/>
Lastly, loading graphics from the filesystem.  I really only need to load them at predetermined intervals (never at the same time that music is playing).  Basically it is for re-skinning the GUI.  Is there a common image format that would be reasonable to use, or should I just have the user convert it into a ds-friendly format before putting it on the cartridge?
<br/>
<br/>
Thanks!
<br/>
 - Natso<br/>_________________<br/>I'm a bomb technitian. If you see me running, try to keep up ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145117 - tepples - Sun Nov 11, 2007 8:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Natso wrote:</b></span></td> </tr> <tr> <td class="quote">I'm trying to figure out whether or not the following are possible, so I can know what kind of limits I'm facing (it's for what is possibly my next project).
<br/>
<br/>
Loading files from the flash cartridge's filesystem... Are there any good examples or tutorials where I can see/learn the proccess?</td> </tr></table><span class="postbody">
<br/>
It's called <a class="postlink" href="http://chishm.drunkencoders.com/libfat/" target="_blank">libfat</a>.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Also, how much trouble would it be to load an mp3 format song, presumably lower quality, but... buffering it from the flashcart's filesystem in real-time... has this been done before?</td> </tr></table><span class="postbody">
<br/>
MoonShell  does it, and so does DSOrganize.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Tracker files, in s3m or similar format</td> </tr></table><span class="postbody">
<br/>
MoonShell 1.6 and earlier did it, and DSOrganize still does.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Lastly, loading graphics from the filesystem.  I really only need to load them at predetermined intervals (never at the same time that music is playing).  Basically it is for re-skinning the GUI.  Is there a common image format that would be reasonable to use, or should I just have the user convert it into a ds-friendly format before putting it on the cartridge?</td> </tr></table><span class="postbody">
<br/>
It shouldn't be too much of a problem to load .bmp or .tga files from the file system and convert them to the format that the DS video hardware wants. But you will have to tell the user whether to use 16-color, 256-color, or high- or true-color images.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145150 - HyperHacker - Mon Nov 12, 2007 12:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">But you will have to tell the user whether to use 16-color, 256-color, or high- or true-color images.</td> </tr></table><span class="postbody">Or you can just check the file header to see which type it is. No reason you can't support more than one colour depth. (You'd probably want to point out, though, that using the same bit depth as the program uses will be faster - less conversion required - and anything above 16-bit will have to be downsampled to 16-bit anyway.)<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145161 - Lick - Mon Nov 12, 2007 1:11 am</h4>
    <div class="postbody"><span class="postbody">If you use high- or true-color images, you'll need to convert the pixelvalues back to R5G5B5(A1) to display them on the DS screen. The problem is that it's rather ugly with most of your images. A solution would be implementing dithering. Noise dithering is really simple and relatively fast. Diffuse dithering is a bit more complicated.
<br/>
<br/>
I use the free DepthDither 2.0 for the not-free Photoshop to convert images to 15-bit "offline".<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145173 - tepples - Mon Nov 12, 2007 3:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">No reason you can't support more than one colour depth. (You'd probably want to point out, though, that using the same bit depth as the program uses will be faster - less conversion required - and anything above 16-bit will have to be downsampled to 16-bit anyway.)</td> </tr></table><span class="postbody">
<br/>
So if a DS program is expecting a 16-color image where color index 0 is transparent, and the user passes a 24-bit image, which library should the DS program use to dither the image to 15 non-FF00FF colors? Or should all reskinnable GUIs operate in 16-bit mode?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145175 - HyperHacker - Mon Nov 12, 2007 4:57 am</h4>
    <div class="postbody"><span class="postbody">That's entirely up to you. ;-)<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
