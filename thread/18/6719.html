<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS Save Game Backup/Restore - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > DS Save Game Backup/Restore</h2>
<div id="posts">
<div class="post">
    <h4>#52590 - mrnull - Thu Sep 01, 2005 5:21 am</h4>
    <div class="postbody"><span class="postbody">Ahh!  It's killing me.  I just got Nintendogs and I'm only allowed 1 save.  Those of you with a girlfriend know my frustration.  So my question is, has anyone created a (GBAMP) application that can backup and restore save games from EEPROM?  I think that'd be killer.. app..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52594 - deltro - Thu Sep 01, 2005 5:48 am</h4>
    <div class="postbody"><span class="postbody">I don't think we can write to GBAMP yet.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52597 - knight0fdragon - Thu Sep 01, 2005 6:02 am</h4>
    <div class="postbody"><span class="postbody">I believe there is one for the supercard</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52600 - chishm - Thu Sep 01, 2005 6:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>deltro wrote:</b></span></td> </tr> <tr> <td class="quote">I don't think we can write to GBAMP yet.</td> </tr></table><span class="postbody">
<br/>
Yes we can. Have you tried the GBAMP builds of PocketNES or Goomba? They both support saving. Trust me, you can do it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52622 - lambi1982 - Thu Sep 01, 2005 1:12 pm</h4>
    <div class="postbody"><span class="postbody">mrnull, what you can do is get another dog ( in the game that is) and have one for you and one for your girlfriend. 
<br/>
<br/>
Now take one of the dogs to the dog hotel, now only one dog is active.
<br/>
When you are finished with one dog and she might want to play, goto the hotel and do a <span style="text-decoration: underline">swap</span> now you get to re-train the second dog but still keep you other one.<br/>_________________<br/>Who, Me?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52625 - M3d10n - Thu Sep 01, 2005 1:37 pm</h4>
    <div class="postbody"><span class="postbody">One or teo of these newer DS-targeted flash carts seem to be capable of backing up/restoring DS SRAM saves straight from original carts. Check their feature list.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52641 - Mr. Picklesworth - Thu Sep 01, 2005 4:35 pm</h4>
    <div class="postbody"><span class="postbody">You play Nintendogs with your girlfriend?<br/>_________________<br/>Thanks!
<br/>
<span style="font-size: 9px; line-height: normal">MKDS Friend Code: 511165-679586
<br/>
MP:H Friend Code: 2105 2377 6896</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52674 - IxthusTiger - Thu Sep 01, 2005 8:50 pm</h4>
    <div class="postbody"><span class="postbody">Get her her own copy of Nintendogs! Easy as that!
<br/>
<br/>
My girl has a Pug (Begoy) and a Beagle (Cuya), I have a Corgi (Shiggy) and a Shiba (Diogi.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52684 - The 9th Sage - Thu Sep 01, 2005 10:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>IxthusTiger wrote:</b></span></td> </tr> <tr> <td class="quote">Get her her own copy of Nintendogs! Easy as that!
<br/>
<br/>
My girl has a Pug (Begoy) and a Beagle (Cuya), I have a Corgi (Shiggy) and a Shiba (Diogi.)</td> </tr></table><span class="postbody">
<br/>
<br/>
That's cool...I have a Corgi and a Shiba as well.  Ein, and Ryoko respectively. :)<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52689 - skabio - Fri Sep 02, 2005 12:09 am</h4>
    <div class="postbody"><span class="postbody">I remember reading a post on here about a save backup utility that came out just after chishm released his CF FAT code.  I searched but I couldn't find it.  You might check with chishm however as I remember his post about how he thought they used his code without giving him credit.  I don't think it allowed for restoring the save though so it may be a wasted effort.
<br/>
<br/>
Edit:  I did find this code however but I'm not sure if its for the gbamp:
<br/>
<br/>
<a href="http://www.few.vu.nl/%7Essstolk/temp/main.cpp" target="_blank">http://www.few.vu.nl/%7Essstolk/temp/main.cpp</a>
<br/>
<br/>
Edit2:  I found the utility looks like it was writen by chishm (taken from a post in the CF FAT Driver topic)
<br/>
<br/>
New demo - A save game copier. Warning - this could ruin your CF card or your game save.
<br/>
Instructions to use:
<br/>
1. Download from here: 
<br/>
<br/>
<a href="http://www.geocities.com/chishm1/gbamp/mp_save.zip" target="_blank">http://www.geocities.com/chishm1/gbamp/mp_save.zip</a>
<br/>
<br/>
and extract the file to your CF card.
<br/>
2. Put the GBAMP in your GBA (or NDS) and run MP_Save.gba.
<br/>
3. Remove your GBAMP, insert your game then press A once.
<br/>
4. Remove your game, reinsert your GBAMP then press A again.
<br/>
5. Turn off your GBA, put your CF card in the computer and then use the save file for whatever purpose you want.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52690 - Puppet - Fri Sep 02, 2005 12:55 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>skabio wrote:</b></span></td> </tr> <tr> <td class="quote">Edit2:  I found the utility looks like it was writen by chishm (taken from a post in the CF FAT Driver topic)
<br/>
<br/>
New demo - A save game copier. Warning - this could ruin your CF card or your game save.
<br/>
Instructions to use:
<br/>
1. Download from here: 
<br/>
<br/>
<a href="http://www.geocities.com/chishm1/gbamp/mp_save.zip" target="_blank">http://www.geocities.com/chishm1/gbamp/mp_save.zip</a>
<br/>
<br/>
and extract the file to your CF card.
<br/>
2. Put the GBAMP in your GBA (or NDS) and run MP_Save.gba.
<br/>
3. Remove your GBAMP, insert your game then press A once.
<br/>
4. Remove your game, reinsert your GBAMP then press A again.
<br/>
5. Turn off your GBA, put your CF card in the computer and then use the save file for whatever purpose you want.</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm pretty sure that's just for GBA games.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52694 - skabio - Fri Sep 02, 2005 1:54 am</h4>
    <div class="postbody"><span class="postbody">Woops I suppose it is.  Sorry about that.  I guess you could use this:
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=6103" target="_blank">http://forum.gbadev.org/viewtopic.php?t=6103</a>
<br/>
<br/>
But you would need a flash cart and some way to play the dump.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52695 - josath - Fri Sep 02, 2005 2:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>skabio wrote:</b></span></td> </tr> <tr> <td class="quote">Woops I suppose it is.  Sorry about that.  I guess you could use this:
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=6103" target="_blank">http://forum.gbadev.org/viewtopic.php?t=6103</a>
<br/>
<br/>
But you would need a flash cart and some way to play the dump.</td> </tr></table><span class="postbody">
<br/>
<br/>
that doesn't seem to have anything at all to do with game saves (eeprom) as far as i can tell.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52701 - The 9th Sage - Fri Sep 02, 2005 3:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>josath wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>skabio wrote:</b></span></td> </tr> <tr> <td class="quote">Woops I suppose it is.  Sorry about that.  I guess you could use this:
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=6103" target="_blank">http://forum.gbadev.org/viewtopic.php?t=6103</a>
<br/>
<br/>
But you would need a flash cart and some way to play the dump.</td> </tr></table><span class="postbody">
<br/>
<br/>
that doesn't seem to have anything at all to do with game saves (eeprom) as far as i can tell.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
nope, it doesn't.  Just a dumper of NDS card images, doesn't touch the EEPROM at all.<br/>_________________<br/>Now with 20% More Old Man from Zelda 1 than ever before!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52705 - skabio - Fri Sep 02, 2005 3:21 am</h4>
    <div class="postbody"><span class="postbody">Oh I just assumed it dumped the whole thing.  Guess not.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52710 - deltro - Fri Sep 02, 2005 5:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chishm wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>deltro wrote:</b></span></td> </tr> <tr> <td class="quote">I don't think we can write to GBAMP yet.</td> </tr></table><span class="postbody">
<br/>
Yes we can. Have you tried the GBAMP builds of PocketNES or Goomba? They both support saving. Trust me, you can do it.</span></td> </tr></table><span class="postbody">I actually fell behind in caring about my GBAMP, it's been my flash cart ^_^, I guess getting my CF corrupted is a nice wake up call to- hell yes we can write to the GBAMP ^^;;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52711 - mrnull - Fri Sep 02, 2005 5:57 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the replies guys.  I'd imagine that my situation isn't unusual to others out there.  I had originally decided to buy an Action Replay Duo, but found out that all of my local shops had stopped carrying them.  Has anyone heard anything about the product being discontinued?
<br/>
<br/>
Anyway, I think a save/restore app would be pimp.  I e-mailed the creator of MoonShell asking for the added functionality.  That's usually what I'm running on my GBAMP anyway.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52824 - DsPet - Sat Sep 03, 2005 4:37 pm</h4>
    <div class="postbody"><span class="postbody">Nintendogs has 256KB to store the game save (using the "E2PROM" interface, although technically it is Flash ROM)
<br/>
<br/>
If you have a GBA cart with 64KB of SRAM, you can backup the Game save with *two* steps
<br/>
[the 1st 64K block is about the dogs, the 2nd 64K block is about the owner, the 3rd and 4th block are duplicates as far as I've checked]
<br/>
<br/>
Check this thread for code to read the E2PROM.
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=6657" target="_blank">http://forum.gbadev.org/viewtopic.php?t=6657</a>
<br/>
Writing the E2PROM is more complicated (it isn't regular E2PROM, you need to erase blocks first)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52832 - josath - Sat Sep 03, 2005 7:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DsPet wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
[the 1st 64K block is about the dogs, the 2nd 64K block is about the owner, the 3rd and 4th block are duplicates as far as I've checked]</td> </tr></table><span class="postbody">
<br/>
<br/>
The speculation i've heard, is that it keeps duplicates of the save data, in case you shut it off while it's writing to the save area and one of them gets corrupted, at next boot it just uses the backup save data (and assuming it saves quite often, you probably wont notice anything being missing)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52847 - knight0fdragon - Sat Sep 03, 2005 9:58 pm</h4>
    <div class="postbody"><span class="postbody">There is a program out that lets u go from EEPROM to GBA SRAM for the nds, then all you would have to do is go from SRAM to GBAMP, then reverse the process to load it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52881 - Dark Knight ez - Sun Sep 04, 2005 12:19 pm</h4>
    <div class="postbody"><span class="postbody">My program code listed in one of the first couple of posts here, was ment to copy an NDS savefile to a GBA flashcards SRAM. However, the code to access an NDS savefile wasn't complete in ndslib at the time (is it still that way?), so the program wasn't finished. It might  be one day though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52934 - DsPet - Sun Sep 04, 2005 8:15 pm</h4>
    <div class="postbody"><span class="postbody">'josath' wrote:
<br/>
&gt; ...it keeps duplicates of the save data, in case you shut it off while it's writing to the save area and one of them gets corrupted,
<br/>
That's my guess as well. The data blocks must be erased first and with 128KB of critical data to save, there is a significant period of time the Flash storage being updated is in an invalid state (another reason why there is an explicit Save command)
<br/>
<br/>
'Dark Knight ez' wrote:
<br/>
&gt; My program code listed in one of the first couple of posts here, was ment to copy an NDS savefile to a 1GBA flashcards SRAM. However, the code to access an NDS savefile wasn't complete in ndslib at the time (is it still that way?)...
<br/>
The NDSLIB version is seriously broken as mentioned above. See that thread for working "cardReadEeprom" code.
<br/>
BTW: I've got it work running using the ARM7 processor. Not sure of the exact limitations but I suspect your program will need more changes.
<br/>
<br/>
If someone writes a fixed "cardWriteEeprom" please let me know.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52995 - Dark Knight ez - Mon Sep 05, 2005 11:42 am</h4>
    <div class="postbody"><span class="postbody">It does need more changes, true. I put in your piece of code, in order to get the reading part to work (which remains pretty much useless without the writing back part, but okay ;), but I got an error trying to build the program.
<br/>
After deleting all of your code, the problem remain (probably was there even before I put in your code). I get the error:
<br/>
<br/>
make[1]: *** No rule to make target '[...]/main.cpp' needed by 'main.o'. Stop. 
<br/>
make: *** [build] Error 2
<br/>
<br/>
where [...] is the path to my main.cpp. Does anybody know what is needed to undo this error?
<br/>
<br/>
<br/>
<br/>
Oh, DsPet, since you've got it working already, are you planning on releasing your code once the write-part is complete as well? It will probably be better than my own code, since I'm new at as well C as programming for a handheld, I'm just fiddling around. ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53053 - DsPet - Mon Sep 05, 2005 8:10 pm</h4>
    <div class="postbody"><span class="postbody">re: build problems
<br/>
My advice is to install/reinstall the "devkitPro" NDS tools. Then clone one of the examples (including the templates)
<br/>
<br/>
re: "cardWriteEprom"
<br/>
I broke down and wrote a version just for Nintendog (256KB)
<br/>
Rather simple, writing in 256B blocks/pages. Separate function for erasing sectors (1 sector=64KB)
<br/>
<br/>
re: backing up Nintendogs
<br/>
There is a lot of empty space in the 128KB of data, so it can be compressed to well under 64KB. Will fit on typical carts with SRAM (no page banking tricks needed)
<br/>
My game saves are ~6KB each compressed [don't play the game much, and I can't afford more than one dog ;-]
<br/>
<br/>
re: releasing the utility
<br/>
Eventually, it needs more features and more testing.
<br/>
I'd like it to be a "Nintendogs dog trainer"
<br/>
<br/>
Before that I need to find out how they are checksumming/validating the saved data [ie. so you can add a few thousand dollars to your virtual bank account, and many other possibilities]
<br/>
Right now if you change a data byte it rejects the game save.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
