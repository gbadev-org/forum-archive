<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>tell me how to set a single bg tile on a map? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > tell me how to set a single bg tile on a map?</h2>
<div id="posts">
<div class="post">
    <h4>#93167 - spinal_cord - Mon Jul 17, 2006 9:36 am</h4>
    <div class="postbody"><span class="postbody">Im using palib, but its no good, I cant set a sinlge bg tile unless the map is scrolled all of the way right (!?), so can someone tell me how to do this with libnds? (or is it ndslib?). thats all im asking.
<br/>
<br/>
thankyou.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93181 - parrot_ - Mon Jul 17, 2006 2:24 pm</h4>
    <div class="postbody"><span class="postbody">One tile or the whole (tiled) BG?
<br/>
<br/>
One Tile:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
u16* map = SCREEN_BASE_BLOCK(31); // 256 X 256 map
<br/>
<br/>
void placeTile(int tileid, int x, int y)
<br/>
{
<br/>
     //tileid is the tile number in the tileset
<br/>
     map[x+y*32] = tileid;
<br/>
}
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
A whole (tiled) BG:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
void copyBG(u16* bgdata, u16* paldata, int bgdatasize, int paldatasize)
<br/>
{
<br/>
     //Copy the palette to the BG_PALETTE area
<br/>
     dmaCopy(paldata, (void*)BG_PALETTE, paldatasize);
<br/>
<br/>
    //Copy the BG in the BG area
<br/>
    dmaCopy(bgdata, (void*)SCREEN_BASE_BLOCK(31), bgdatasize);
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
That should work. Tell me if it doesn't<br/>_________________<br/>Squak! etc.
<br/>
<a class="postlink" href="http://squakly.wordpress.com" target="_blank">My Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93183 - Sausage Boy - Mon Jul 17, 2006 2:39 pm</h4>
    <div class="postbody"><span class="postbody">Assuming you're actually using Map Base 31, of course.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93234 - spinal_cord - Mon Jul 17, 2006 11:32 pm</h4>
    <div class="postbody"><span class="postbody">I should have phrased it a bit better, I can change the tile referenct in my map, but not on the screen. So I guess i'm asking how to update a single tile on the screen without reloading the whole layer.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93286 - parrot_ - Tue Jul 18, 2006 10:23 am</h4>
    <div class="postbody"><span class="postbody">Have you got a tileset in tile memory?<br/>_________________<br/>Squak! etc.
<br/>
<a class="postlink" href="http://squakly.wordpress.com" target="_blank">My Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93292 - spinal_cord - Tue Jul 18, 2006 11:46 am</h4>
    <div class="postbody"><span class="postbody">yes, i do, the problem comes when i try to change a single tile on the screen. my map array is correct, i change that when the tile is removed from the level, but the command to change the tile on the screen doesn't work properly, it works until the screen is scrolled, but not after, it seems to be because of where the screen is scrolled to, when it is all the way to the right, is works fine, if it is even a few pixelx left of that, then it doesnt. I dont know if this is a proble with palib, or a problem with my code. But sinse the array is changed correctly (you can tell this by scrolling off the screnn then back one, the tile is changed) I can only assume it is a problem with the palib tile changing thingy.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
