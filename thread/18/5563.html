<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Development environment on Linux? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Development environment on Linux?</h2>
<div id="posts">
<div class="post">
    <h4>#41452 - takochan - Thu Apr 28, 2005 6:03 pm</h4>
    <div class="postbody"><span class="postbody">Hello.
<br/>
<br/>
I am trying to set up a development environement for Linux, but I have some problems. I read on the forums that some of you successfully installed one...
<br/>
<br/>
The devkit just works out of the box ; however there are several include and lib directories, I wonder which one should I add to my gcc variables.
<br/>
<br/>
The real problem seems to be ndslib, when I try to compile the "hello world" example from Dovoto, it tries to launch a Windows executable (examples/tools/ndstool.exe).
<br/>
<br/>
Well, to be true I don't know where to start from - is there a tutorial to set-up a development enviroment on a Linux machine?</span><span class="gensmall"><br/><br/>Last edited by takochan on Sun May 01, 2005 2:34 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#41453 - ghod - Thu Apr 28, 2005 6:10 pm</h4>
    <div class="postbody"><span class="postbody">I have this same problem when trying to develop with linux.  The souce for ndstool can be gotten from: <a href="http://darkfader.net/ds/" target="_blank">http://darkfader.net/ds/</a> .  Once I built this binary and placed it in the examples/tools directory, it worked, except now it is looking for dsbuild.exe which I haven't yet found the source for.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41458 - josath - Thu Apr 28, 2005 6:50 pm</h4>
    <div class="postbody"><span class="postbody">instead of using dsbuild.exe, download this:
<br/>
<a href="http://darkfader.net/ds/files/ndsmall.bin" target="_blank">http://darkfader.net/ds/files/ndsmall.bin</a>
<br/>
and then this is the command to convert an .nds to a .nds.gba
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">cat ndsmall.bin mygame.nds &gt; mygame.nds.gba</td> </tr></table><span class="postbody">
<br/>
I believe that it is more compatible than using dsbuild.exe, but i could be wrong. Here is the source to dsbuild if you want it: <a href="http://rorexrobots.com/ds/dsbuild.cpp" target="_blank">http://rorexrobots.com/ds/dsbuild.cpp</a>
<br/>
<br/>
For ndstool, make sure to check that the linux version actually works. For some reason, when I compiled it under linux, it didn't work right. But, wine runs ndstool.exe fine. So in my examples/tools folder, I left ndstool.exe there, and created a script called 'ndstool':
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"># ndstool script to launch wine, in the correct path
<br/>
wine `dirname $0`/ndstool.exe $*
<br/>
</td> </tr></table><span class="postbody">
<br/>
So when the makefiles call ndstool, they will hit the script first, which will launch wine on ndstool.exe, passing along any paramaters.
<br/>
<br/>
As far as variables, I only need to do this to my path: (I have devkitarm in ~/ds/devkitarm)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">export PATH=$PATH:~/ds/devkitarm/bin</td> </tr></table><span class="postbody">
<br/>
Also you have to make sure to copy the startup scripts from ndslib to the devkitarm directory.
<br/>
Create a script in the ndslib/startup dir called go.sh:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DEVDIR=/home/davidr/ds/devkitarm
<br/>
<br/>
cp *.o $DEVDIR/arm-elf/lib/
<br/>
cp *.ld $DEVDIR/arm-elf/lib/
<br/>
cp *.specs $DEVDIR/arm-elf/lib/
<br/>
cp thumb/*.o $DEVDIR/arm-elf/lib/thumb/
<br/>
cp interwork/*.o $DEVDIR/arm-elf/lib/interwork/
<br/>
cp thumb/interwork/*.o $DEVDIR/arm-elf/lib/thumb/interwork/
<br/>
</td> </tr></table><span class="postbody">
<br/>
Make sure to set DEVDIR correctly to your devkitarm directory. then run it.
<br/>
<br/>
Here's is a guide to ndsdev on linux: <a class="postlink" href="http://www.dspassme.com/programmers_guide/" target="_blank">Nintendo DS on Linux guide</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41709 - takochan - Sun May 01, 2005 1:14 pm</h4>
    <div class="postbody"><span class="postbody">Hello, and thank you for your answers!
<br/>
<br/>
I tried to set up a developement environement using the Linux development tutorial (I was very happy to find one) but I had some problems.
<br/>
<br/>
First of all, there is an inconstancy between ndslib and the template. In ndslib, there is this function:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
uint32 touchReadTemperature(int * t1, int * t2);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
...But in arm7/main.cpp the example call it as if it was:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
uint32 touchReadTemperature(int t1, int t2);
<br/>
</td> </tr></table><span class="postbody">
<br/>
I corrected it.
<br/>
<br/>
Secondly, in the arm9/main.cpp there are the following lines:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   DISPLAY_CONTROL = MODE_0_2D;
<br/>
   SUB_DISPLAY_CONTROL = MODE_0_2D;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
but neither DISPLAY_CONTROL nor SUB_DISPLAY_CONTROL appear in ndslib. I commented these lines.
<br/>
<br/>
After compilation, I get a .ds.gba file, so I can not test it using dualis (additionnally I can not test it on my DS since I don't have my GBA Card yet). How can I produce a file readable by an emulator?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41727 - DaBigJHall - Sun May 01, 2005 3:35 pm</h4>
    <div class="postbody"><span class="postbody">The file readable by Dualis is the arm9.bin found in the template\arm9\ directory, or in the template\boot\resources\ directory.  I don't know about other emulators, though.  Hope that helps :)
<br/>
<br/>
I think DISPLAY_CONTROL and SUB_DISPLAY_CONTROL changed to DISPLAY_CR and SUB_DISPLAY_CR, respectively.  I think the videoSetMode() and videoSetModeSub() macros do the same thing as assigning values to those variables, but then again, I could have no idea what I'm talking about right now :).<br/>_________________<br/>Yep, it's a signature.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41741 - takochan - Sun May 01, 2005 4:53 pm</h4>
    <div class="postbody"><span class="postbody">Thank you, it works now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42216 - oxymen - Sun May 08, 2005 2:29 am</h4>
    <div class="postbody"><span class="postbody">I went through the guide for ndsdev on linux.
<br/>
when I try to compile the template I get this list of errors:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make
<br/>
<br/>
rm -rf arm9/arm9.bin
<br/>
rm -rf arm7/arm7.bin
<br/>
make -C arm7 -I /home/ndsdev/ds_projects/template
<br/>
make[1]: Entering directory `/home/ndsdev/ds_projects/template/arm7'
<br/>
mv: missing file argument
<br/>
Try `mv --help' for more information.
<br/>
make[2]: [all] Error 1 (ignored)
<br/>
main.cpp
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:6:21: NDS/NDS.h: No such file or directory
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:8:27: NDS/ARM7/BIOS.h: No such file or directory
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:9:28: NDS/ARM7/touch.h: No such file or directory
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:10:28: NDS/ARM7/clock.h: No such file or directory
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp: In function `void InterruptHandler()':
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:18: error: `IF' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:18: error: (Each undeclared identifier is reported only once for each function it appears in.)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:18: error: `IRQ_VBLANK' undeclared(first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:21: error: `IPC' undeclared (firstuse this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:24: error: `XKEYS' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:27: error: `TSC_MEASURE_X' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:27: error: `touchRead' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:28: error: `TSC_MEASURE_Y' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:29: error: `TSC_MEASURE_Z1' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:30: error: `TSC_MEASURE_Z2' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:33: error: `uint8' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:33: error: expected primary-expression before ')' token
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:33: error: `rtcGetTime' undeclared(first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:34: error: expected primary-expression before ')' token
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:34: error: `BCDToInteger' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:37: error: `touchReadTemperature' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp: In function `int main(int, char**)':
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:50: error: `rtcReset' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:53: error: `IME' undeclared (firstuse this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:54: error: `IRQ_HANDLER' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:55: error: `IE' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:55: error: `IRQ_VBLANK' undeclared(first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:56: error: `IF' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:57: error: `DISP_SR' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:57: error: `DISP_VBLANK_IRQ' undeclared (first use this function)
<br/>
/home/ndsdev/ds_projects/template/arm7/./main.cpp:61: error: `swiWaitForVBlank' undeclared (first use this function)
<br/>
make[2]: *** [main.o] Error 1
<br/>
make[1]: *** [build] Error 2
<br/>
make[1]: Leaving directory `/home/ndsdev/ds_projects/template/arm7'
<br/>
make: *** [all] Error 2
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
What is wrong?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42219 - DaBigJHall - Sun May 08, 2005 2:34 am</h4>
    <div class="postbody"><span class="postbody">GCC isn't finding your include files.  Did you copy the NDS folder in ndslib\include to devkitARM_r11\arm-elf\include?  That should fix the problem.<br/>_________________<br/>Yep, it's a signature.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42249 - wintermute - Sun May 08, 2005 1:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DaBigJHall wrote:</b></span></td> </tr> <tr> <td class="quote">GCC isn't finding your include files.  Did you copy the NDS folder in ndslib\include to devkitARM_r11\arm-elf\include?  That should fix the problem.</td> </tr></table><span class="postbody">
<br/>
<br/>
don't ever do this with libraries that aren't specifically written to be installed in this manner. In the case of arm toolchains four separate versions are required to be placed in the compiler tree. Always use the -I &amp; -L options to work with external libraries.
<br/>
<br/>
There are now a number of examples which show how to do this properly. My best advice at this point is to wait for the impending release of devkitARM r12.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42254 - DaBigJHall - Sun May 08, 2005 3:56 pm</h4>
    <div class="postbody"><span class="postbody">Oops!  I'll have to go and change those, then :)  I've been meaning to update my libogc and libnds from the CVS anyway.
<br/>
<br/>
Stupid me :D<br/>_________________<br/>Yep, it's a signature.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42262 - tepples - Sun May 08, 2005 6:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">In the case of arm toolchains four separate versions are required to be placed in the compiler tree.</td> </tr></table><span class="postbody">
<br/>
Even if only the -mthumb -mthumb-interwork version is ever used?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Always use the -I &amp; -L options to work with external libraries.</td> </tr></table><span class="postbody">
<br/>
Isn't -I <a class="postlink" href="http://gcc.gnu.org/gcc-4.0/changes.html" target="_blank">deprecated in newer GCC</a>? Or is -I- something different?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42267 - josath - Sun May 08, 2005 6:43 pm</h4>
    <div class="postbody"><span class="postbody">you have to set the env variable NDSLIBPATH in bash i just do:
<br/>
export NDSLIBPATH=/home/davidr/ds/ndslib/
<br/>
(i think the last slash might be important, put it just in case)
<br/>
then i don't get the 'not found' errors</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42268 - wintermute - Sun May 08, 2005 7:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
Isn't -I <a class="postlink" href="http://gcc.gnu.org/gcc-4.0/changes.html" target="_blank">deprecated in newer GCC</a>? Or is -I- something different?</td> </tr></table><span class="postbody">
<br/>
<br/>
-I- is something different.
<br/>
<br/>
<a href="http://gcc.activeventure.org/Directory-Options.html" target="_blank">http://gcc.activeventure.org/Directory-Options.html</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
