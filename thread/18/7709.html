<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DeSmuME : nds emulator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > DeSmuME : nds emulator</h2>
<div id="posts">
<div class="post">
    <h4>#62898 - YopYop - Tue Dec 06, 2005 8:31 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I want to present you my Nintendo DS emulator here <a href="http://yopyop156.ifrance.com/" target="_blank">http://yopyop156.ifrance.com/</a> there?s two version one that support 2D (not that much only mode 0) and another one that support the 3D engine and the second 2D engine. There?s a lot of work but, the 2 second emu (3D one) can run Meteos E3 demo (when the title screen appears press enter) and it?s quite playable.
<br/>
<br/>
If you find an instruction that don?t work as it must do make a post.
<br/>
<br/>
yopyop</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62907 - Vich - Tue Dec 06, 2005 9:32 pm</h4>
    <div class="postbody"><span class="postbody">V?ry nice! It runs s? fast compared to other emulators! Even faster than Ensata! B?t it does only run a few demo's:
<br/>
- my own test app runs (3D on one screen and console on the other, accepting keyboard input)
<br/>
- most test apps run, but without key input
<br/>
- apps with advanced textures(environment mapping) or lighting don't run
<br/>
<br/>
I've got one app that locks. Here's a screenshot of the debugger:
<br/>
<a href="http://warehouse.lifeisdigital.net/pictures/development/desmumebug1.png" target="_blank">http://warehouse.lifeisdigital.net/pictures/development/desmumebug1.png</a>
<br/>
<br/>
Nice job! Keep up the good work! I hope to see updates soon :D
<br/>
ps: if you want me to send applications that don't behave like they should, I can upload them? Just ask :)
<br/>
<br/>
[edit]
<br/>
- When I set vertex backface culling on, it doesn't cull it. (although that's just a minor bug :P)
<br/>
- Mouse clicking (touchscreen) feature is missing?
<br/>
<br/>
I also wonder why French people don't make their applications in English. Since English is th? common language on the internet. Since I'm Belgian, I know French aside from Dutch, but most people here won't. If you want, I can translate your app?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62910 - FloFri - Tue Dec 06, 2005 9:41 pm</h4>
    <div class="postbody"><span class="postbody">Looks interesting! Please keep it up!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62940 - Mr Snowflake - Wed Dec 07, 2005 1:21 am</h4>
    <div class="postbody"><span class="postbody">Nice to see a new emulator.<br/>_________________<br/><a class="postlink" href="http://www.mrsnowflake.be" target="_blank">http://www.mrsnowflake.be</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62958 - YopYop - Wed Dec 07, 2005 7:41 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">I've got one app that locks. Here's a screenshot of the debugger:
<br/>
<a href="http://warehouse.lifeisdigital.net/pictures/development/desmumebug1.png" target="_blank">http://warehouse.lifeisdigital.net/pictures/development/desmumebug1.png</a>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Since its swi5 it could have a lot of explications:
<br/>
-	The interruptions run too fast to be seen.
<br/>
-	You don?t acknowledge the interruption in DTCM + 0x3FF8 (but I don?t think so)
<br/>
-	When a proc is in swi wait state they run 2500(x2 for ARM9) cycles and it could produce a bug. It will be correct when the optimisation time will come.
<br/>
For the key input it support only NDS UP DOWN RIGTH LEFT (same key on keyboard) START (enter) SELECT (backspace) A B (A and Z but for a azerty keyboard) the other key will be done tonight.
<br/>
The toushscreen is emulated but there?s steel a little bug due to the conversions from screen unit to touchscreen unit.
<br/>
<br/>
For the web page in Frensh, it?s because there?s not much information on it ans it will bring nearly nothing to spend time to translate it. But if you want you can make a English page and send me it here yopyop156 AT ifrance DOT com.
<br/>
<br/>
And thank you all for the comments.
<br/>
<br/>
yopyop</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62965 - Vich - Wed Dec 07, 2005 9:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>YopYop wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Since its swi5 it could have a lot of explications:
<br/>
-	The interruptions run too fast to be seen.
<br/>
-	You don?t acknowledge the interruption in DTCM + 0x3FF8 (but I don?t think so)
<br/>
-	When a proc is in swi wait state they run 2500(x2 for ARM9) cycles and it could produce a bug. It will be correct when the optimisation time will come.
<br/>
</td> </tr></table><span class="postbody">
<br/>
Cool =)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
For the key input it support only NDS UP DOWN RIGTH LEFT (same key on keyboard) START (enter) SELECT (backspace) A B (A and Z but for a azerty keyboard) the other key will be done tonight.
<br/>
The toushscreen is emulated but there?s steel a little bug due to the conversions from screen unit to touchscreen unit.
<br/>
</td> </tr></table><span class="postbody">
<br/>
In my own application, the key input works, so it might be wrong code in the other apps (where it didn't work). I didn't check the code of those other (faulty apps), so my guess it's that.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">For the web page in Frensh, it?s because there?s not much information on it ans it will bring nearly nothing to spend time to translate it. But if you want you can make a English page and send me it here yopyop156 AT ifrance DOT com.
<br/>
<br/>
And thank you all for the comments.
<br/>
<br/>
yopyop</td> </tr></table><span class="postbody">
<br/>
Oh, I didn't mean an English web page, but I meant an English user interface :) Shall I translate that for you?
<br/>
<br/>
Oh, and there was nothing wrong with texture loading. The application that didn't show anything was displaying a display list. My guess is that display lists aren't implemented yet in your code?
<br/>
<br/>
One last question: since the application is s? fast, do you limit the virtual CPU computing time to 67MHz and 33MHz for respectively ARM9 and ARM7?
<br/>
<br/>
Anyway, v?ry nice work!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62967 - Xgame - Wed Dec 07, 2005 10:08 am</h4>
    <div class="postbody"><span class="postbody">seems good but touch screen not work(only in dualist works with a few of game).
<br/>
i tested the 3d emulator: touch_look example work, but yeti3D not Work.
<br/>
the only emulator can run yeti3d is ensata, but it is very slow.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62995 - YopYop - Wed Dec 07, 2005 5:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
The application that didn't show anything was displaying a display list. My guess is that display lists aren't implemented yet in your code?
<br/>
<br/>
One last question: since the application is s? fast, do you limit the virtual CPU computing time to 67MHz and 33MHz for respectively ARM9 and ARM7? 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes the display lists aren't implemented yet.
<br/>
If you were thinking that the old emulator is fast, what would you say for the new one (I add some optimisations)? And yes the CPU have to run to their normal speed but I didn't limit the number of fps you have to chek the upper bar and make your mind.
<br/>
<br/>
yopyop</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62998 - Webez - Wed Dec 07, 2005 6:33 pm</h4>
    <div class="postbody"><span class="postbody">Hi.
<br/>
Your emulator looks promising!!
<br/>
<br/>
I have run my demo and it has two problems.
<br/>
<br/>
1) If I load a texture it crashes. 
<br/>
2) If I enable vblank interrupt what should be drawn doesn't display.
<br/>
<br/>
Thanks for your hard work!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63000 - YopYop - Wed Dec 07, 2005 6:59 pm</h4>
    <div class="postbody"><span class="postbody">yop,
<br/>
<br/>
Try it now or send your demo to me to yopyop156 AT ifrance.com
<br/>
Thanks
<br/>
<br/>
yopyop</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63002 - bahnhof - Wed Dec 07, 2005 7:54 pm</h4>
    <div class="postbody"><span class="postbody">Great work, this emulator is the only one so far which runs my demo like it does on hardware! Excellent. But you really need to make an english version of the emulator :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63237 - Webez - Sat Dec 10, 2005 10:50 am</h4>
    <div class="postbody"><span class="postbody">For those who have not visited his webpage again, yopyop has released a new version with some bugs corrected and more features!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63248 - Vich - Sat Dec 10, 2005 3:17 pm</h4>
    <div class="postbody"><span class="postbody">Very nice! My app runs at 140FPS now!
<br/>
:D
<br/>
<br/>
- Please include a commandline option, so you can start the application like this: dsmume3d.exe myrom.nds -autostart
<br/>
This will be v?ry helpful for people that want to run it from their IDE.
<br/>
- I use lcdSwap() from devkitPro, but it doesn't affect the screens in your emulator.
<br/>
- Display lists would be nice :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65044 - Two9A - Thu Dec 29, 2005 9:41 pm</h4>
    <div class="postbody"><span class="postbody">(I feel like I'm resurrecting dead threads here...)
<br/>
<br/>
YopYop: I don't suppose you could let me in on the secret to the insane speeds we're seeing here? I can only assume you've got some kind of direct binary translation (dynamic, most probably) going on, since my plain old interpreter struggles along at 20fps right now.
<br/>
<br/>
Also, I don't suppose you'll be releasing source anytime soon? It'd be nice to be able to flick through an example of a _working_ emulator.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65144 - YopYop - Fri Dec 30, 2005 5:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">Very nice! My app runs at 140FPS now!
<br/>
:D
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
lol! The FPS is just an indication. The instructions cycle count and the memory wait sates must be a little bit wrong.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Vich wrote:</b></span></td> </tr> <tr> <td class="quote">- Please include a commandline option, so you can start the application like this: dsmume3d.exe myrom.nds -autostart
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The commandline is done.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Two9A wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
YopYop: I don't suppose you could let me in on the secret to the insane speeds we're seeing here? I can only assume you've got some kind of direct binary translation (dynamic, most probably) going on, since my plain old interpreter struggles along at 20fps right now.
<br/>
<br/>
Also, I don't suppose you'll be releasing source anytime soon? It'd be nice to be able to flick through an example of a _working_ emulator.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
For the emulator I proced like that :
<br/>
I've seted up this table <a href="http://yopyop156.ifrance.com/instruction_tabdef.inc" target="_blank">http://yopyop156.ifrance.com/instruction_tabdef.inc</a> (in fact it was at the end) and I used it to call the good instruction. I don't know that much about emulator programming so I can't tell you if it's a direct binary translation or an interpreter but I was thinking it was a good methode to do this work. 
<br/>
<br/>
You must know that at  the begining of this project it wasn't supposed to be an emulator but just a desasembleur to understand how wifi work but when I found sgstair work, I changed my mind and I decid to do an emulator.
<br/>
<br/>
For the source I'll do a public releas when I'll do a better framework for the 2D GPU and some other correction.
<br/>
<br/>
yopyop</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
