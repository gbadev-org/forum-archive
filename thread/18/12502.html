<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Tiled sub BG not showing up - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Tiled sub BG not showing up</h2>
<div id="posts">
<div class="post">
    <h4>#119149 - outphase - Tue Feb 20, 2007 4:02 am</h4>
    <div class="postbody"><span class="postbody">I'm trying to get a tiled bg to show up, but only static and other garbage appears. The image was generated using "git haruhi_logo.gif -ftb -m" Any thoughts as to why it won't show up? maybe a missed declaration or so. If more code is needed let me know as I thought this would be the vital block.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   videoSetModeSub(MODE_5_2D | DISPLAY_BG3_ACTIVE);
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG, VRAM_B_MAIN_BG, VRAM_C_SUB_BG, VRAM_D_LCD);
<br/>
   vramSetBankE(VRAM_E_MAIN_SPRITE);
<br/>
   lcdMainOnBottom();
<br/>
<br/>
   SUB_BG3_CR = BG_BMP8_256x256 | BG_MAP_BASE(0) | BG_TILE_BASE(1);
<br/>
   SUB_BG3_XDX = BIT(8);         // scale x
<br/>
   SUB_BG3_XDY = 0;            // rotation x
<br/>
   SUB_BG3_YDX = 0;            // rotation y
<br/>
   SUB_BG3_YDY = BIT(8);         // scale y
<br/>
   SUB_BG3_CX = 0;               // translation x
<br/>
   SUB_BG3_CY = 0;               // translation y
<br/>
   
<br/>
   memcpy((uint16 *)BG_PALETTE_SUB,haruhi_logo_pal_bin,haruhi_logo_pal_bin_size);
<br/>
<br/>
   memcpy((void *)BG_MAP_RAM_SUB(0),haruhi_logo_map_bin,haruhi_logo_map_bin_size);
<br/>
   memcpy((void *)BG_TILE_RAM_SUB(1),haruhi_logo_img_bin, haruhi_logo_img_bin_size);
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119571 - VRMLGHOST - Sat Feb 24, 2007 11:32 am</h4>
    <div class="postbody"><span class="postbody">your enabling background 3 which in mode 5 (<a class="postlink" href="http://liranuna.drunkencoders.com/nds-2d-tuts/lesson-1/" target="_blank">http://liranuna.drunkencoders.com/nds-2d-tuts/lesson-1/</a>) is extended rotation background (like a big bitmap) not a text tile based background. change to using bg0 or bg 1 and you should be fine.
<br/>
<br/>
NOTE: you cant use the following on a text/tile background
<br/>
<br/>
   SUB_BG3_XDX = BIT(8);         // scale x
<br/>
   SUB_BG3_XDY = 0;            // rotation x
<br/>
   SUB_BG3_YDX = 0;            // rotation y
<br/>
   SUB_BG3_YDY = BIT(8);         // scale y
<br/>
   SUB_BG3_CX = 0;               // translation x
<br/>
   SUB_BG3_CY = 0;               // translation y
<br/>
<br/>
JUST USE:
<br/>
<br/>
BG0_X0 = 0;//offset (or translation) of left of background relative to screen
<br/>
BG0_Y0 = 0;//offset (or translation) of top of background relative to screen
<br/>
<br/>
<br/>
try somethign like
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
videoSetModeSub(MODE_5_2D | DISPLAY_BG0_ACTIVE);
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG, VRAM_B_MAIN_BG, VRAM_C_SUB_BG, VRAM_D_LCD);
<br/>
   vramSetBankE(VRAM_E_MAIN_SPRITE);
<br/>
   lcdMainOnBottom();
<br/>
<br/>
   SUB_BG0_CR = BG_BMP8_256x256 | BG_MAP_BASE(0) | BG_TILE_BASE(1);
<br/>
   SUB_BG0_X0 = 0;
<br/>
   SUB_BG0_Y0 = 0;
<br/>
   memcpy((uint16 *)BG_PALETTE_SUB,haruhi_logo_pal_bin,haruhi_logo_pal_bin_size);
<br/>
<br/>
   memcpy((void *)BG_MAP_RAM_SUB(0),haruhi_logo_map_bin,haruhi_logo_map_bin_size);
<br/>
   memcpy((void *)BG_TILE_RAM_SUB(1),haruhi_logo_img_bin, haruhi_logo_img_bin_size);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
