<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>My first DS dev test, need testing/questions answered - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > My first DS dev test, need testing/questions answered</h2>
<div id="posts">
<div class="post">
    <h4>#102500 - AM - Thu Sep 14, 2006 6:35 pm</h4>
    <div class="postbody"><span class="postbody">Hey guys! 
<br/>
<br/>
I'm new to all this DS development stuff. Actually, I've barely started as I haven't even got a DS yet - so far I've only been playing around with emulators (sort of dipping my toe in the DS homebrew pool and testing the water before I decide whether to get a DS or not). 
<br/>
<br/>
Anyhow, this is my first err... thing for the DS: It's an attempt to do parallax mapping in the framebuffer mode. Problem is I'm getting really crappy framerates with the Dualis emulator (not to mention other emulators where it either won't work at all or only results in even more terrible FPS).
<br/>
<br/>
So I guess what I'm wondering is:
<br/>
1) Anyone feel like giving it a try to see if it runs at all on real DS hardware, and if so what kind of framerates you get with parallax on vs. off?
<br/>
2) Is it feasable to, with proper optimization, achieve a full 60 FPS rate doing this kind of thing on the DS or should I abandon this project altogether?
<br/>
<br/>
Well, thanks in advance.
<br/>
<br/>
<a href="http://web.telia.com/~u16106552/screenshot.png">[Images not permitted - Click here to view it]</a>
<br/>
<a class="postlink" href="http://web.telia.com/~u16106552/fc01.nds" target="_blank">download .nds file</a>
<br/>
<br/>
P.S. the parallax effect isn't particularly obvious using this XOR texture but that's beside the point as this is just a speed test so far...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102512 - 0xtob - Thu Sep 14, 2006 8:47 pm</h4>
    <div class="postbody"><span class="postbody">Without parallax mapping: 1.5fps
<br/>
with parallay mapping: 0.9fps
<br/>
<br/>
I'm sure this effect could be done way faster (and better looking) using the DS's graphics hardware. You would need to optimize pretty much to make it 120x faster, so it runs with 60fps in both screens :-) Remember that high-level optimizations are generally more effctive than low level ones.
<br/>
<br/>
But it looks nice so far. Make it faster, add some chiptunes and scrollers and you have a small intro :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102519 - AM - Thu Sep 14, 2006 9:54 pm</h4>
    <div class="postbody"><span class="postbody">Ok, I think I've located the primary culprit responsible for the poor performance: divisions. I gotta figure out a way to do this without so many divisions, or do divisions faster (currently using the div32 function but apparently that's not enough).
<br/>
<br/>
0xtob: just to make this perfectly clear: your running it on the DS not the emulator? Bummer if so, I was hoping by some voodoo magic everything would work out when run on hardware. ;) Oh well, back to the drawing board.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102522 - 0xtob - Thu Sep 14, 2006 10:13 pm</h4>
    <div class="postbody"><span class="postbody">Yep, these are figures from my DS. General divisions are terribly slow, but you can use bitshifts for divisions by powers of two.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102534 - AM - Thu Sep 14, 2006 11:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">Yep, these are figures from my DS. General divisions are terribly slow, but you can use bitshifts for divisions by powers of two.</td> </tr></table><span class="postbody">
<br/>
Already doing that, I also have some divisions where the denominator is constant (in some cases the screen width, in some cases the screen height) so I'm looking into using precalculated tables for that. So far not working so good though...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102539 - tepples - Fri Sep 15, 2006 12:10 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>AM wrote:</b></span></td> </tr> <tr> <td class="quote">I also have some divisions where the denominator is constant (in some cases the screen width, in some cases the screen height) so I'm looking into using precalculated tables for that.</td> </tr></table><span class="postbody">
<br/>
For those, multiplication by the reciprocal might be best.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102568 - kusma - Fri Sep 15, 2006 9:45 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>AM wrote:</b></span></td> </tr> <tr> <td class="quote">Hey guys! 
<br/>
2) Is it feasable to, with proper optimization, achieve a full 60 FPS rate doing this kind of thing on the DS or should I abandon this project altogether?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Considering the fact that I got it to run at 30fps on the GBA in "Newton never did this, BITCH" (http://www.pouet.net/prod.php?which=19030), yeah.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102606 - AM - Fri Sep 15, 2006 4:12 pm</h4>
    <div class="postbody"><span class="postbody">edit: err... nevermind, fixed it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102668 - tepples - Fri Sep 15, 2006 11:47 pm</h4>
    <div class="postbody"><span class="postbody">Why don't these graphic demos, even the years-old ones such as "fr018: aGb", have any source code?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102977 - PypeBros - Mon Sep 18, 2006 12:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Why don't these graphic demos, even the years-old ones such as "fr018: aGb", have any source code?</td> </tr></table><span class="postbody">
<br/>
<br/>
heh. the demoscene has never been very open-source :P Those guys work hard to get the latest bits of optimization so that they can beat concurrent demogroups and win the competition. That leaves little room for open-sourcing your code ...<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#102988 - tepples - Mon Sep 18, 2006 1:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PypeBros wrote:</b></span></td> </tr> <tr> <td class="quote">the demoscene has never been very open-source :P Those guys work hard to get the latest bits of optimization so that they can beat concurrent demogroups and win the competition. That leaves little room for open-sourcing your code ...</td> </tr></table><span class="postbody">
<br/>
Then why isn't source released even years after the competition? Per the policies of at least one major online encyclopedia, having a Free demo is bound to get your demogroup more exposure.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103043 - 0xtob - Mon Sep 18, 2006 9:16 pm</h4>
    <div class="postbody"><span class="postbody">I think it just this "no one does it, so why should we" thinking. Another factor may be the dirtyness of demo code (I can tell :-) But actually, demosceners aren't so strict about their "secrets". At demo parties you can just ask any famous coder you run into about the effects of their demos and they will happily tell you in every little detail. I've asked lots of stupid questions, and no one has ever said something like "That's ultra-secret group internal information. Learn OpenGL, noob!"
<br/>
<br/>
But yeah, more open source demos would be very nice!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
