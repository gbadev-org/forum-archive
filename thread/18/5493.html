<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Tic Tac Toe Touch game - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Tic Tac Toe Touch game</h2>
<div id="posts">
<div class="post">
    <h4>#40571 - chrissieboy - Wed Apr 20, 2005 2:25 pm</h4>
    <div class="postbody"><span class="postbody">Hi all, im busy with the game <b style="color:#FFA34F">tac</b> <b style="color:#FFA34F">tac</b> <b style="color:#FFA34F">toe</b> with touchscreen.
<br/>
<br/>
But before i go further i wanna know if it works on hardware.
<br/>
<br/>
It's not done already.
<br/>
.
<br/>
<br/>
So can somebody test my code to see if it works on hardware?
<br/>
<br/>
this is the emu version :
<br/>
<a class="postlink" href="http://members1.chello.nl/~c.la.mark/tictactoe.bin" target="_blank">http://members1.chello.nl/~c.la.mark/tictactoe.bin</a>
<br/>
<br/>
And this is the passme version:
<br/>
<a class="postlink" href="http://members1.chello.nl/~c.la.mark/tictactoe.ds.gba" target="_blank">http://members1.chello.nl/~c.la.mark/tictactoe.ds.gba</a>
<br/>
<br/>
<br/>
<br/>
For all people who teach me alot THANK YOU ALL!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40576 - McDee - Wed Apr 20, 2005 3:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
So can somebody test my code to see if it works on hardware?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
sorry, but it doesn`t work on hardware. flashed it, booted it, and after the nintendo-logo the screens remain white. nothing comes up.
<br/>
<br/>
mcdee</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40577 - Lynx - Wed Apr 20, 2005 3:16 pm</h4>
    <div class="postbody"><span class="postbody">Same here.. (doesn't work)
<br/>
<br/>
Here is what I would suggest..  Compile the template and let one of us test it, you might have a problem with your ndslib or devarmkit that would cause all of your .ds.gba's to not work.
<br/>
<br/>
Then, if your compiled template works on hardware, compare what you are doing (or not doing) to the template, which will be a confirmed working program on hardware.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40584 - chrissieboy - Wed Apr 20, 2005 4:24 pm</h4>
    <div class="postbody"><span class="postbody">hi thanx for your comment!!
<br/>
<br/>
My template for this game was :
<br/>
<br/>
<a class="postlink" href="http://rorexrobots.com/ds/drops" target="_blank">http://rorexrobots.com/ds/drops</a>
<br/>
<br/>
<br/>
i only kicked some code out of it , or modified it.
<br/>
<br/>
The only things i changed were some if statements.
<br/>
For what to do when touched on the screen.
<br/>
<br/>
I saw on this forum that the water drops demo works on hardware,
<br/>
so my opinion was that this MUST work.
<br/>
<br/>
But now it didn't???? AARG
<br/>
<br/>
This makes me really mad all things i made doesn't works on hardware??
<br/>
<br/>
here's my code nothing weird i thought??
<br/>
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
// Simple ARM9 demo (touch screen controls the colors)
<br/>
// -- joat
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
<br/>
#include &lt;NDS/NDS.h&gt;
<br/>
#include &lt;NDS/memory.h&gt;
<br/>
#include &lt;NDS/ARM9/rand.h&gt;
<br/>
#include &lt;NDS/ARM9/video.h&gt;
<br/>
#include &lt;NDS/ARM9/trig_lut.h&gt;
<br/>
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
void pltpoint(int x, int y, int c, uint16 *vram);
<br/>
void circle(int x, int y, int r, int c, uint16 *vram);
<br/>
<br/>
volatile unsigned int counter = 0;
<br/>
void InterruptHandler(void) {
<br/>
<br/>
  if (IF &amp; IRQ_VBLANK) {
<br/>
    counter++;
<br/>
<br/>
    IF = IRQ_VBLANK;
<br/>
  }
<br/>
}
<br/>
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
<br/>
#define KEY_TOUCH (((~IPC-&gt;buttons) &lt;&lt; 6) &amp; (1&lt;&lt;12))
<br/>
<br/>
int main(int argc, char ** argv) {
<br/>
  // Red main screen, blue sub-screen
<br/>
  PALETTE[0] = RGB15(0, 0, 31);
<br/>
  PALETTE[512] = RGB15(0, 0, 31);
<br/>
<br/>
  // Turn on the screens and 2D cores and switch to mode 0
<br/>
  POWER_CR = POWER_ALL_2D;
<br/>
  DISPLAY_CR = MODE_FB0;
<br/>
  SUB_DISPLAY_CR = MODE_0_2D | DISPLAY_BG0_ACTIVE;
<br/>
<br/>
  SUB_BG0_CR = BG_COLOR_256 | (1 &lt;&lt; SCREEN_SHIFT);
<br/>
  SUB_BG1_CR = BG_COLOR_256 | (2 &lt;&lt; SCREEN_SHIFT);
<br/>
<br/>
  vramSetMainBanks(VRAM_A_LCD,VRAM_B_LCD,VRAM_C_SUB_BG,VRAM_D_SUB_SPRITE);
<br/>
<br/>
  // Enable the V-blank interrupt
<br/>
  IME = 0;
<br/>
  IRQ_HANDLER = &amp;InterruptHandler;
<br/>
  IE = IRQ_VBLANK;
<br/>
  IF = ~0;
<br/>
  DISP_SR = DISP_VBLANK_IRQ;
<br/>
  IME = 1;
<br/>
<br/>
  int tx=64;
<br/>
  int ty=157;
<br/>
<br/>
  int touched=0;
<br/>
<br/>
  // Touchscreen calibration
<br/>
  int divx = 14;
<br/>
  int divy = 18;
<br/>
  int subx = 00;
<br/>
  int suby = 12;
<br/>
  uint16* vram = VRAM_A;
<br/>
<br/>
  while (1) 
<br/>
  {
<br/>
<br/>
      if(counter &gt; 0)
<br/>
      {
<br/>
          counter = 0;
<br/>
        
<br/>
          if(KEY_TOUCH)
<br/>
          {
<br/>
              if(0 == 0)
<br/>
              {
<br/>
                  touched = 1;
<br/>
                  tx = IPC-&gt;touchX / divx - subx;
<br/>
                  ty = IPC-&gt;touchY / divy - suby;
<br/>
<br/>
              }
<br/>
          }
<br/>
        else
<br/>
      touched = 0;
<br/>
        
<br/>
   
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
  
<br/>
      dmaCopyWords(3, (uint32 *)VRAM_C, (uint32 *)vram, 256*192*2);
<br/>
              
<br/>
      if (tx &gt; 33 &amp; ty &gt; 3 &amp; tx &lt; 96 &amp; ty &lt;65 ) { circle(64,35,29,         RGB15(0, 0, 31), vram); }
<br/>
      if (tx &gt; 97 &amp; ty &gt; 3 &amp; tx &lt; 159 &amp; ty &lt; 65) { circle(126,35,29,         RGB15(0, 0, 31), vram); }
<br/>
      if (tx &gt; 160 &amp; ty &gt; 3 &amp; tx &lt; 222 &amp; ty &lt; 65) { circle(188,35,29,         RGB15(0, 0, 31), vram); }
<br/>
      
<br/>
      if (tx &gt; 33 &amp; ty &gt; 3+62 &amp; tx &lt; 96 &amp; ty &lt;65+62 ) { circle(64,34+62,29,         RGB15(0, 0, 31), vram); }
<br/>
      if (tx &gt; 97 &amp; ty &gt; 3+62 &amp; tx &lt; 159 &amp; ty &lt; 65+62) { circle(126,34+62,29,         RGB15(0, 0, 31), vram); }
<br/>
      if (tx &gt; 160 &amp; ty &gt; 3+62 &amp; tx &lt; 222 &amp; ty &lt; 65+62) { circle(188,34+62,29,         RGB15(0, 0, 31), vram); }
<br/>
      
<br/>
      if (tx &gt; 33 &amp; ty &gt; 3+62+62 &amp; tx &lt; 96 &amp; ty &lt;65+62+62 ) { circle(64,34+62+61,29,         RGB15(0, 0, 31), vram); }
<br/>
      if (tx &gt; 97 &amp; ty &gt; 3+62+62 &amp; tx &lt; 159 &amp; ty &lt; 65+62+62) { circle(126,34+62+61,29,         RGB15(0, 0, 31), vram); }
<br/>
      if (tx &gt; 160 &amp; ty &gt; 3+62+62 &amp; tx &lt; 222 &amp; ty &lt; 65+62+62) { circle(188,34+62+61,29,         RGB15(0, 0, 31), vram); }
<br/>
  
<br/>
  
<br/>
  // geef touchscreen achtergrond een andere kleur
<br/>
  /*
<br/>
  for(int i=0; i&lt;256*192; i++)
<br/>
  {
<br/>
      VRAM_C[i] = RGB15(15,15,15);
<br/>
  }*/
<br/>
  //---------------------------------------------------------------------
<br/>
  // my space
<br/>
  
<br/>
   for(int n=34; n&lt;220; n++) { vram[n+4*256] = RGB15(31,0,0); }
<br/>
   for(int n=34; n&lt;220; n++) { vram[n+65*256] = RGB15(31,0,0); }
<br/>
   for(int n=34; n&lt;220; n++) { vram[n+126*256] = RGB15(31,0,0); }
<br/>
   for(int n=34; n&lt;220; n++) { vram[n+187*256] = RGB15(31,0,0); }
<br/>
   for(int n=4; n&lt;187; n++) { vram[n*256+33] = RGB15(31,0,0); }
<br/>
   for(int n=4; n&lt;187; n++) { vram[n*256+95] = RGB15(31,0,0); }
<br/>
   for(int n=4; n&lt;187; n++) { vram[n*256+157] = RGB15(31,0,0); }
<br/>
   for(int n=4; n&lt;187; n++) { vram[n*256+219] = RGB15(31,0,0); }
<br/>
  
<br/>
  //myspace
<br/>
  //---------------------------------------------------------------------
<br/>
  
<br/>
<br/>
      }
<br/>
  }
<br/>
  return 0;
<br/>
}
<br/>
<br/>
void circle(int x, int y, int r, int c, uint16 *vram)
<br/>
{
<br/>
    for(int a=0; a&lt;512; a+=4)
<br/>
    {
<br/>
            pltpoint(x+((COS[a]*r)&gt;&gt;12),y+((SIN[a]*r)&gt;&gt;12),c,vram);
<br/>
    }
<br/>
}
<br/>
<br/>
inline void pltpoint(int x, int y, int c, uint16 *vram)
<br/>
{
<br/>
    int n = y*256+x;
<br/>
    if(n &gt; 256*192 || n&lt;0)
<br/>
        return;
<br/>
    vram[y*256 + x] = c;
<br/>
}
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
many thanx for your help!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40586 - chrissieboy - Wed Apr 20, 2005 4:33 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://members1.chello.nl/~c.la.mark/template.ds.gba" target="_blank">http://members1.chello.nl/~c.la.mark/template.ds.gba</a>
<br/>
<br/>
i changed the name of the file so it was template.ds.gba
<br/>
<br/>
here up it is.
<br/>
<br/>
Can that be the error?
<br/>
<br/>
Or totaly not??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40588 - Ethos - Wed Apr 20, 2005 5:01 pm</h4>
    <div class="postbody"><span class="postbody">The name means nothing :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40594 - Theodore104 - Wed Apr 20, 2005 7:19 pm</h4>
    <div class="postbody"><span class="postbody">The "drops" demo doesn't have an entire project, just the arm9 main.cpp; what template are you using for the rest of the project (the arm7 main.cpp, the bootloader, etcetera)?
<br/>
<br/>
Might the changes to boot/main.cpp described <a class="postlink" href="http://www.dspassme.com/programmers_guide/Tutorial/configuration.html#config_sw_template" target="_blank">here</a> be what's needed?
<br/>
<br/>
 - Theo</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40761 - FourScience - Fri Apr 22, 2005 5:33 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote"><a class="postlink" href="http://members1.chello.nl/~c.la.mark/template.ds.gba" target="_blank">http://members1.chello.nl/~c.la.mark/template.ds.gba</a>
<br/>
<br/>
i changed the name of the file so it was template.ds.gba
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Is that code you modified or the original template? I recommend compiling someone else's unchanged demo or the original template and letting us see how that runs. Then maybe we can see if there's a problem with your development environment or your source code.
<br/>
<br/>
Keep at it!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
