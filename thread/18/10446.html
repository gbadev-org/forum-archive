<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprite placements seem to be about 16 pixels off x and y? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Sprite placements seem to be about 16 pixels off x and y?</h2>
<div id="posts">
<div class="post">
    <h4>#93631 - TheRain - Thu Jul 20, 2006 7:01 am</h4>
    <div class="postbody"><span class="postbody">So... I'm trying to figure out why this is... but my sprites seem to be consistantly off in placement by about 16 pixels both on the x and y... give or take 2 pixels.... here's my code
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
newbutton.x=0;
<br/>
newbutton.y=0;
<br/>
<br/>
sprites[spritesInitialized].attribute[0] = ATTR0_BMP | ATTR0_ROTSCALE_DOUBLE | (newbutton.y); 
<br/>
sprites[spritesInitialized].attribute[1] = ATTR1_SIZE_32 | (newbutton.x);  
<br/>
sprites[spritesInitialized].attribute[2] = ATTR2_ALPHA(1)| ((normalx*4)+(normaly*128));
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93632 - Cearn - Thu Jul 20, 2006 7:59 am</h4>
    <div class="postbody"><span class="postbody">ATTR0_ROTSCALE_DOUBLE doubles the normal canvas for objects, but the object's position is still the top-left corner. As a result, the center seems offset by half the object size.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93761 - TheRain - Fri Jul 21, 2006 2:04 am</h4>
    <div class="postbody"><span class="postbody">Ah cool... that makes much (some) sense I guess.   
<br/>
<br/>
Can someone tell me how to apply rotational attributes to a single sprite entry??   The only example I've seen sets the same rotational attribute for all sprites by doing 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
  SpriteEntry sprites[128];
<br/>
  pSpriteRotation spriteRotations = (pSpriteRotation)sprites;
<br/>
<br/>
and then later 
<br/>
<br/>
<br/>
   spriteRotations[0].hdx=256;
<br/>
   spriteRotations[0].hdy=0;
<br/>
   spriteRotations[0].vdx=0;
<br/>
   spriteRotations[0].vdy=256;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Also, what is .hdx, .hdy,.vdx, .vdy anyway?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93804 - Cearn - Fri Jul 21, 2006 11:06 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheRain wrote:</b></span></td> </tr> <tr> <td class="quote">Ah cool... that makes much (some) sense I guess.   
<br/>
<br/>
Can someone tell me how to apply rotational attributes to a single sprite entry??   The only example I've seen sets the same rotational attribute for all sprites by doing 
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
  SpriteEntry sprites[128];
<br/>
  pSpriteRotation spriteRotations = (pSpriteRotation)sprites;
<br/>
<br/>
and then later 
<br/>
<br/>
<br/>
   spriteRotations[0].hdx=256;
<br/>
   spriteRotations[0].hdy=0;
<br/>
   spriteRotations[0].vdx=0;
<br/>
   spriteRotations[0].vdy=256;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Also, what is .hdx, .hdy,.vdx, .vdy anyway?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
<a class="postlink" href="http://user.chem.tue.nl/jakvijn/tonc/affine.htm" target="_blank">tonc:affine matrix</a>. You really might consider starting with GBA stuff to learn the ropes; the tools, emus and documentation are much more mature than DS stuff.
<br/>
<br/>
hdx, hdy, vdx, vdy form the same matrix as pa-pd. hdx=pa, vdy=pd. MAthematically it'd be better if hdy and vdx were pc and pb, respectively, as the columns of <span style="font-weight: bold">P</span> are the vectors (in which case <span style="font-weight: bold">h</span> and <span style="font-weight: bold">v</span> would correspond to <span style="font-weight: bold">u</span> and <span style="font-weight: bold">v</span>), but I think hdy and vdx are actually pb and pc. Contrary to what you might think from the name, hdy does not affect the sprite in the y-direction.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93853 - TheRain - Fri Jul 21, 2006 5:45 pm</h4>
    <div class="postbody"><span class="postbody">Thanks man... Actually, that is my last graphics question... i've got all the 2d functionality I can think of having now.   Thanks a bunch!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
