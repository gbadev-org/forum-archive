<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>display 2 sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > display 2 sprites</h2>
<div id="posts">
<div class="post">
    <h4>#174745 - stra?enschild - Tue Jul 13, 2010 8:12 pm</h4>
    <div class="postbody"><span class="postbody">hey guys,
<br/>
i ran into some problems trying to display 2 sprites on the screen.
<br/>
here are my sprites functions:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">oamInit(&amp;oamMain, SpriteMapping_Bmp_1D_256, false);
<br/>
oamEnable(&amp;oamMain);
<br/>
u16* gfx = oamAllocateGfx(&amp;oamMain, SpriteSize_32x32,SpriteColorFormat_256Color);
<br/>
<br/>
dmaCopyHalfWords(3,fireTiles,gfx, fireTilesLen);
<br/>
dmaCopyHalfWords(3,firePal, SPRITE_PALETTE, firePalLen); 
<br/>
<br/>
dmaCopyHalfWords(3,spriteTiles,gfx, spriteTilesLen);
<br/>
dmaCopyHalfWords(3,spritePal, SPRITE_PALETTE, spritePalLen);
<br/>
<br/>
oamSet(&amp;oamMain,0,positionx,positiony,1,0,SpriteSize_32x32,SpriteColorFormat_256Color,gfx,0,true,false,false,false,false); 
<br/>
<br/>
oamSet(&amp;oamMain,1, 20, 20,0,0,SpriteSize_8x8,SpriteColorFormat_256Color,gfx,0,true,false,false,false,false); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
with the code above i only get sprite called sprite displayed.
<br/>
The sprites are .png files and were generated with grit.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174746 - vuurrobin - Tue Jul 13, 2010 9:15 pm</h4>
    <div class="postbody"><span class="postbody">you are only allocating memory for 1 sprite, so the gfx of your second sprite is overwriting the gfx of your first sprite. same with the palette.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174750 - stra?enschild - Wed Jul 14, 2010 7:56 pm</h4>
    <div class="postbody"><span class="postbody">thanks for your reply, could you please post how i have to modify my code.
<br/>
I have just started to code for the ds, so all is new and confusing to me. 
<br/>
sorry for beeing such a newbie ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174751 - headspin - Thu Jul 15, 2010 12:19 am</h4>
    <div class="postbody"><span class="postbody">Allocate RAM for each sprite and then use the appropriate pointer.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">oamInit(&amp;oamMain, SpriteMapping_Bmp_1D_256, false);
<br/>
oamEnable(&amp;oamMain);
<br/>
<br/>
u16* gfx1 = oamAllocateGfx(&amp;oamMain, SpriteSize_32x32,SpriteColorFormat_256Color);
<br/>
u16* gfx2 = oamAllocateGfx(&amp;oamMain, SpriteSize_8x8,SpriteColorFormat_256Color);
<br/>
<br/>
dmaCopyHalfWords(3,fireTiles,gfx1, fireTilesLen);
<br/>
dmaCopyHalfWords(3,firePal, SPRITE_PALETTE, firePalLen);
<br/>
<br/>
dmaCopyHalfWords(3,spriteTiles,gfx2, spriteTilesLen);
<br/>
// I assume your palettes are the same in which case this is not needed
<br/>
dmaCopyHalfWords(3,spritePal, SPRITE_PALETTE, spritePalLen);
<br/>
<br/>
oamSet(&amp;oamMain,0,positionx,positiony,1,0,SpriteSize_32x32,SpriteColorFormat_256Color,gfx1,0,true,false,false,false,false);
<br/>
oamSet(&amp;oamMain,1, 20, 20,0,0,SpriteSize_8x8,SpriteColorFormat_256Color,gfx2,0,true,false,false,false,false);</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
