<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Even more problems :-( - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Even more problems :-(</h2>
<div id="posts">
<div class="post">
    <h4>#52525 - spencer723 - Wed Aug 31, 2005 3:02 pm</h4>
    <div class="postbody"><span class="postbody">I finally found the Makefile I want to use for creating the .nds.gba and .nds file, but whenever I go to compile it I get these errors:
<br/>
<br/>
  CreateProcess((null), basename C:/Dev-Cpp, ...) failed. 
<br/>
  C:\devkitPro\examples\nds\Graphics\2D\hello_world\Makefile [Build Error]  No rule to make target `all'.  Stop. 
<br/>
<br/>
If anyone knows what the problem could be, please reply, thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52542 - wintermute - Wed Aug 31, 2005 6:03 pm</h4>
    <div class="postbody"><span class="postbody">There are all sorts of reasons why you're having problems. Neither Dev-C++ nor win98 are particularly supported platforms. The vast majority of devkitARM users have at least win2k and the installer reflects this.
<br/>
<br/>
The toolchain as a whole has been carefully crafted to work transparently on windows, linux and OS X provided that the environment variables are set correctly. The make provided with dev-c++ is *not* suitable for this.
<br/>
<br/>
You can set up the environment variables in win98 using the instructions found here <a href="http://www.chem.gla.ac.uk/~louis/software/faq/q1.html#win98" target="_blank">http://www.chem.gla.ac.uk/~louis/software/faq/q1.html#win98</a>
<br/>
<br/>
Note: the DEVKITARM and DEVKITPRO variables need to be in unix format ( /&lt;drive lettter&gt;/path/to )
<br/>
<br/>
You also need to set the path for msys, look for a set PATH= line in msconfig and add c:\devkitPro\msys\bin; to the start of that variable, assuming you installed to the default c:\devkitPro. You can also just insert set PATH=c:\devkitPro\msys\bin;%PATH% at the bottom.
<br/>
<br/>
You will need to reboot after making these changes.
<br/>
<br/>
As for the no rule to make target `all' error.
<br/>
<br/>
in the Makefile look for these lines
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
.PHONY: $(BUILD) clean
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
edit so it appears like this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
.PHONY: $(BUILD) clean all
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
all: $(BUILD)
<br/>
<br/>
$(BUILD):
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52553 - spencer723 - Wed Aug 31, 2005 7:24 pm</h4>
    <div class="postbody"><span class="postbody">Thank you very much :-D
<br/>
<br/>
I'm still having a bit of problems with it though, I changed the variable back to "/c/..." but now it's saying there's no such file ot directory, when it's the other way (C:\) it works fine.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52557 - wintermute - Wed Aug 31, 2005 8:43 pm</h4>
    <div class="postbody"><span class="postbody">you need to run msys make, not any other make that may be found on your system. It may work with the full path in your dev-cpp setup but you do need to have the msys bin directory in your path.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52577 - spencer723 - Thu Sep 01, 2005 1:51 am</h4>
    <div class="postbody"><span class="postbody">Thank you so much! Wow you're good with this stuff.
<br/>
<br/>
One more problem though...when it goes to compile it, it says there's something wrong with the 'CIDLoop' in arm9_crt0.o, it says theres an unidentified reference to 'main'</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52627 - wintermute - Thu Sep 01, 2005 1:56 pm</h4>
    <div class="postbody"><span class="postbody">For some reason it's not picking up the source files in the project. Are you attempting to build one of the examples using dev-cpp or are you trying to modify something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52637 - spencer723 - Thu Sep 01, 2005 4:25 pm</h4>
    <div class="postbody"><span class="postbody">I'm trying to compile one of the examples that came with devkitPro, I'm using Msys by typing "make" when I'm in the directory with the code and Makefile, it prints this on the screen:
<br/>
<br/>
linking NDSCOD~1.elf
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-elf/4.0.1/../../../../arm-elf/lib/thumb/interwork/ds_arm9_crt0.o: In function `CIDLoop':
<br/>
ds_arm9_crt0.s:(.init+0x200): undefined reference to `main'
<br/>
make[1]: *** [/c/NDSCOD~1/NDSCOD~1.elf] Error 1
<br/>
make: *** [build] Error 2
<br/>
<br/>
NOTE: The directory my code is in is C:\NDS Code Test</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52648 - wintermute - Thu Sep 01, 2005 5:24 pm</h4>
    <div class="postbody"><span class="postbody">Remove the spaces from the directory name. All should work after that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52670 - spencer723 - Thu Sep 01, 2005 7:28 pm</h4>
    <div class="postbody"><span class="postbody">I removed the spaces and changed the name of my folder to "NDS" and I still get the same error, does it have something to do with the ds_arm9_crt0.s file?
<br/>
<br/>
Also, I'm getting a "build" folder and inside the folder there is a file named NDS.map.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52699 - Ethos - Fri Sep 02, 2005 2:59 am</h4>
    <div class="postbody"><span class="postbody">you have no main function<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52702 - spencer723 - Fri Sep 02, 2005 3:13 am</h4>
    <div class="postbody"><span class="postbody">I have one file named 'main.cpp' and my main function starts like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main(int argc, char **argv) {
<br/>
code goes here...
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52704 - tepples - Fri Sep 02, 2005 3:18 am</h4>
    <div class="postbody"><span class="postbody">Are you actually using the features of C++ that aren't in C? If not, try renaming 'main.cpp' to 'main.c'. Is the linker using gcc or g++?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52726 - Ethos - Fri Sep 02, 2005 1:01 pm</h4>
    <div class="postbody"><span class="postbody">Also make sure the file holding your main function is being compiled, and if that is so it must not be linked....look at your Makefile!!!<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52728 - spencer723 - Fri Sep 02, 2005 1:30 pm</h4>
    <div class="postbody"><span class="postbody">Okay, I decided to scrap what I was doing before and was looking at tutorials from <a href="http://www.double.co.nz/nintendo_ds/nds_develop1.html." target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop1.html.</a> Whenever I go to make it, I get this:
<br/>
<br/>
$ make
<br/>
arm-elf-g++ -g -Wall -O2 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I/c/devkitPro/libnds/include -DARM7 -c arm7_main.cpp -oarm7_main.o
<br/>
arm-elf-g++.exe: no input files
<br/>
make: *** [arm7_main.o] Error 1
<br/>
<br/>
I have "arm-elf-g++.exe" in the bin folder for msys.</span><span class="gensmall"><br/><br/>Last edited by spencer723 on Fri Sep 02, 2005 1:32 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#52729 - wintermute - Fri Sep 02, 2005 1:32 pm</h4>
    <div class="postbody"><span class="postbody">The example makefiles read source code from the source folder
<br/>
<br/>
Project Folder
<br/>
|
<br/>
+include  (header files go here)
<br/>
|
<br/>
+source  (c/cpp files go here)
<br/>
|
<br/>
Makefile</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52730 - spencer723 - Fri Sep 02, 2005 1:35 pm</h4>
    <div class="postbody"><span class="postbody">Could I get an example of that? I don't understand how I would write that into the Makefile. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52743 - wintermute - Fri Sep 02, 2005 5:57 pm</h4>
    <div class="postbody"><span class="postbody">You don't need to write it in the makefile.
<br/>
<br/>
The example makefiles automatically pick up all c/c++ files found in the source directory. Have a look at the template, it includes a main.c, note where it's placed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52745 - spencer723 - Fri Sep 02, 2005 6:25 pm</h4>
    <div class="postbody"><span class="postbody">What would the source directory be? This is the Makefile I am using right now with the example I downloaded:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
NDSLIB_INCLUDE=$(DEVKITPRO)/libnds/include
<br/>
NDSLIB_LIB=$(DEVKITPRO)/libnds/lib
<br/>
<br/>
all: demo1.nds.gba
<br/>
<br/>
arm7_main.o: arm7_main.cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM7 -c arm7_main.cpp -oarm7_main.o
<br/>
<br/>
arm7.elf: arm7_main.o
<br/>
   arm-elf-g++ -g -mthumb-interwork -mno-fpu -specs=ds_arm7.specs arm7_main.o -L$(NDSLIB_LIB) -lnds7 -oarm7.elf
<br/>
<br/>
arm7.bin: arm7.elf
<br/>
   arm-elf-objcopy -O binary arm7.elf arm7.bin
<br/>
<br/>
arm9_main.o: arm9_main.cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM9 -c arm9_main.cpp -oarm9_main.o
<br/>
<br/>
arm9.elf: arm9_main.o
<br/>
   arm-elf-g++ -g -mthumb-interwork -mno-fpu -specs=ds_arm9.specs arm9_main.o -L$(NDSLIB_LIB) -lnds9 -o arm9.elf
<br/>
<br/>
arm9.bin: arm9.elf
<br/>
   arm-elf-objcopy -O binary arm9.elf arm9.bin
<br/>
<br/>
demo1.nds: arm7.bin arm9.bin 
<br/>
   ndstool -c demo1.nds -9 arm9.bin -7 arm7.bin
<br/>
<br/>
demo1.nds.gba: demo1.nds
<br/>
   dsbuild demo1.nds -o demo1.nds.gba
<br/>
<br/>
clean:
<br/>
   rm -f *.bin
<br/>
   rm -f *.elf
<br/>
   rm -f *.o
<br/>
   rm -f *~
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I have 2 files in the folder called "arm9_main.cpp" and "arm7_main.cpp" in the folder "C:\demo1"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52760 - Dannon - Fri Sep 02, 2005 8:38 pm</h4>
    <div class="postbody"><span class="postbody">I have a small template setup that I have put together you can try using this, it should compile aslong as you have NDSLIBPATH and DEVKITARM setup in enviroment variables and have the /bin directory of msys and devkitARM setup in the 'Path' system variable, hope this helps (hope this works!)
<br/>
<br/>
You can get the template <a class="postlink" href="http://dannonn1.tripod.com/Template.rar" target="_blank">Here</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52764 - wintermute - Fri Sep 02, 2005 10:32 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>spencer723 wrote:</b></span></td> </tr> <tr> <td class="quote">What would the source directory be? This is the Makefile I am using right now with the example I downloaded:
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
When you installed devkitPro, a set of examples were placed in &lt;drive&gt;:\devkitPro\examples\nds
<br/>
<br/>
Inside the templates directory there you will find two templates, one is for a dual core application for custom arm7 code. One is an arm9 only project using the default arm7 core provided with ndstool.
<br/>
<br/>
Within the other directories you will find numerous examples which illustrate various aspects of libnds.
<br/>
<br/>
These examples work, unfortunately any other examples you find cannot be guaranteed to work with the current or any future iteration of the toolchain.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52766 - wintermute - Fri Sep 02, 2005 10:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dannon wrote:</b></span></td> </tr> <tr> <td class="quote">I have a small template setup that I have put together you can try using this, it should compile aslong as you have NDSLIBPATH and DEVKITARM setup in enviroment variables and have the /bin directory of msys and devkitARM setup in the 'Path' system variable, hope this helps (hope this works!)
<br/>
<br/>
You can get the template <a class="postlink" href="http://dannonn1.tripod.com/Template.rar" target="_blank">Here</a></td> </tr></table><span class="postbody">
<br/>
<br/>
ndslib is deprecated and will no longer be updated. All work has now moved to libnds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52773 - spencer723 - Fri Sep 02, 2005 11:07 pm</h4>
    <div class="postbody"><span class="postbody">Alright I found the Makefile and organized the folders like the example, it's finding the folders and everything, but now it's not finding 'nds.h'. I checked the Makefiles and all it says for including is "INCLUDES := include build" in arm7's Makefile and "INCLUDES := include" in the arm9 Makefile. And I just wanna thank all the people who are helping me with this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52775 - wintermute - Fri Sep 02, 2005 11:16 pm</h4>
    <div class="postbody"><span class="postbody">In the makefile you'll find a section like this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CFLAGS   :=   -g -Wall -O2\
<br/>
          -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
<br/>
CFLAGS   +=   $(INCLUDE) -DARM9
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
add this just after that
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
CXXFLAGS   := $(CFLAGS)
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
this has been updated in CVS recently and will be in the next update</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52781 - spencer723 - Sat Sep 03, 2005 12:23 am</h4>
    <div class="postbody"><span class="postbody">It worked! Thank you so much wintermute! I might just have to put you into my credits when I get to my game :-D.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
