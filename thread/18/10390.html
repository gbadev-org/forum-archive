<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>exec() on all chishm-compatible cards - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > exec() on all chishm-compatible cards</h2>
<div id="posts">
<div class="post">
    <h4>#93027 - Mighty Max - Sun Jul 16, 2006 4:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
i am building up a generic <b style="color:#FFA34F">exec</b>() stub for starting other .NDS files from devices. You probably know that the method used in GBAMP is bound to the gbamp and chishm's modified firmware. Well this <b style="color:#FFA34F">exec</b>() command does not rely on this anymore.
<br/>
<br/>
I have set up the first working examples, tested to boot wifi-code &amp; official WMB-Demos. (Zelda Preview Video)
<br/>
<br/>
There is still alot of work to clean the code &amp; the boot process. But this is the first version that allows every homebrewer to boot other NDSes with just including one function to your arm7 and one to your arm9 code, as the example shows.
<br/>
<br/>
<a href="http://mightymax.org/exec_test.zip" target="_blank">http://mightymax.org/exec_test.zip</a> contains all needed sources. Put the ds_arm9_vram.ld &amp; specs into the corresponding devkitARM folders &amp; make. Needed to run the code are the two output files exec_test.nds &amp; exec_stub.bin. The example runs any nds named "zelda.nds" (as i tested it with the zelda preview) but you can change it accordingly
<br/>
<br/>
How it works:
<br/>
the <b style="color:#FFA34F">exec</b>() command copies exec_stub.bin into the VRAM, and starts executing this binary, which itself loads the .NDS that <b style="color:#FFA34F">exec</b>() points it too.
<br/>
<br/>
What it can be used to:
<br/>
- create a launcher menu
<br/>
- use a seperate NDS for different tasks in your homebrew (i.e. a seperated viewer for the movies of your game)
<br/>
- (when datel CF) is supported: run &gt;1MB files from Max Media Player
<br/>
<br/>
Issues:
<br/>
- i created the example using devkitpro r18. (it might need some changes for r19+)
<br/>
- it uses the "old" gba_nds_fat driver. The new fatlib as well as gbfs support shouldnt be a problem tho
<br/>
- long filenames are a problem. 8bit writeaccess to VRAM :/
<br/>
<br/>
Please report issues &amp; whishes.
<br/>
<br/>
have fun
<br/>
Mighty Max<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93047 - tepples - Sun Jul 16, 2006 7:11 pm</h4>
    <div class="postbody"><span class="postbody">Does this <b style="color:#FFA34F">exec</b>() support displaying something on both screens while the program loads, or does it take up the whole VRAM and require blanking the screen to avoid garbage? Can it be configured to display an animation while loading the .nds so that the user doesn't think that the DS has frozen?
<br/>
<br/>
Anyway, using the "old" gba_nds_fat driver should suffice until the "new" driver manages to implement <a class="postlink" href="http://www.opengroup.org/onlinepubs/009695399/basedefs/dirent.h.html" target="_blank">&lt;dirent.h&gt;</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93050 - Mighty Max - Sun Jul 16, 2006 7:28 pm</h4>
    <div class="postbody"><span class="postbody">The DS is still able to use both screens. At the current state it just takes 2 of the 4 main banks, but the bin is so small it can be reduced to 1 of those 4. 
<br/>
<br/>
The rest is still available for gfx.
<br/>
<br/>
<br/>
For now however the video mode is set by the exec_stub again for bugtracking purpose.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93055 - dovoto - Sun Jul 16, 2006 8:02 pm</h4>
    <div class="postbody"><span class="postbody">Thanks...I was about to write just such a thing for a wifi loader I was working on.  Saved me a good bit of work :)<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93056 - Mighty Max - Sun Jul 16, 2006 8:03 pm</h4>
    <div class="postbody"><span class="postbody">:)
<br/>
<br/>
I allready found some bugs. i think there will be a new version allready tonight.... if i found out why it happens.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93061 - Payk - Sun Jul 16, 2006 8:32 pm</h4>
    <div class="postbody"><span class="postbody">Yeah good work mighty!
<br/>
Perhaps useable for making somekind of multitask...not sure if thats possible but i think so...THANX</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93065 - Mighty Max - Sun Jul 16, 2006 9:08 pm</h4>
    <div class="postbody"><span class="postbody">Two bugs solved. 
<br/>
<br/>
- the main makefile was not starting the exec_stub make too
<br/>
- if the arm7 code of the target was to be load in exclusive ram, the arm7 was pointed to a wrong address (missing an &amp; *grrr*)
<br/>
<br/>
:edit: Update
<br/>
- added mem clearance for work ram up to 0x27FC000 and vram bank a. This solves a lot of oddities in homebrew. Devvers don't seem to initialize their classes/structs correct with values.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93304 - Mighty Max - Tue Jul 18, 2006 1:38 pm</h4>
    <div class="postbody"><span class="postbody">a little fix for the problem loading &gt;3MB files. (ToD i.e.)
<br/>
<br/>
insert 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   FAT_fclose(nds) ;
<br/>
   nds = FAT_fopen(file,"r") ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
just after the line 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   header.arm9_base |= 0x00400000 ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
in the exec_stub/main
<br/>
<br/>
<br/>
I don't exactly understand why the filereset fixes the fread aborting while returning the full size, however this (dirty) hack fixes it.
<br/>
<br/>
<br/>
Next step: support RAM &amp;ROM images of .NDS files.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93341 - Mighty Max - Tue Jul 18, 2006 6:55 pm</h4>
    <div class="postbody"><span class="postbody">Yes i like monologes ;)
<br/>
<br/>
I've updated the sources again. The exec_stub works now for the big files and for nds files that are allready loaded somewhere in the ram. The exec_stub code should be much more readable now ;)
<br/>
<br/>
the "command" parameter can contain now either the (fatlib) path to the nds file or "mem:/" + the decimal representation for the buffer address.
<br/>
<br/>
<br/>
Who will be the first one to implement a Download&amp;Play from this? *g*
<br/>
<br/>
<br/>
:edit: SausageB hinted me to a bug, fixed<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93490 - MechaBouncer - Wed Jul 19, 2006 3:35 pm</h4>
    <div class="postbody"><span class="postbody">I'm still not quite sure I follow what this does. It sounds really cool, but I'm missing something. Is this for creating code that automatically executes on boot with other hardware (flashcarts, Supercard, M3)? Like how the GBAMP automatically runs anything named _BOOT_MP.nds at boot? (Then again, isn't that something that FlashMe does and chishm's firmware just allows it?) Is it something to make boot loaders easier to make? Or is this some kind of method of launching homebrew code on un-FlashMe/PassMe/NoPass DSes? Sorry for all the questions. Whatever it is, it sounds nifty.<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93501 - Mighty Max - Wed Jul 19, 2006 4:05 pm</h4>
    <div class="postbody"><span class="postbody">It is a method homebrew developers can use to start other .NDS files. It might be a nds that got downloaded from the inet via wifi or stored on a compatible card.
<br/>
<br/>
You can easily create a new bootloader for cards that do not allow the start of homebrew. I.e. you could just flash a selfbuild menu on the GBAMP-SD replacing the gba menu, once the sd version is supported in the fatlib.
<br/>
<br/>
For the end-user, the stub alone is of no use.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93521 - MechaBouncer - Wed Jul 19, 2006 5:48 pm</h4>
    <div class="postbody"><span class="postbody">Okay, I think I get it. So it's basically for any app to switch to another, but in a universal way and without everyone having to reverse engineer other multiboot programs?
<br/>
<br/>
Could this method then be used to "return" to a multiboot app (your own GBAMP Multiboot, Moonshell, DSOrganize, etc.) by re-executing it? Of course, that would probably require that there be some kind of standardized file to execute (like _BOOT_MP.nds) or that the homebrew programs that make use of that include a specific multiboot launcher. That would at least let the user re-run whatever loader of choice they use.<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93538 - DynamicStability - Wed Jul 19, 2006 7:55 pm</h4>
    <div class="postbody"><span class="postbody">Mecha, yes it would allow that if you have a standard name, like _BOOT_MP.nds.
<br/>
<br/>
I use the gbamp method on all my programs, which lets me use select to boot _boot_mp.nds, and start to boot wifc2.nds (which re-downloads my latest code on the current project and executes again)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93555 - dovoto - Wed Jul 19, 2006 9:52 pm</h4>
    <div class="postbody"><span class="postbody">Do you think you could switch to the stdio functions (fopen vs FAT_open etc...) I am writting a wifi device for use with the devkitpro stub (similar to the way chishms new fat lib works) that will allow loading of files over wifi.  (fopen("wifi:/blah.nds") for instance).
<br/>
<br/>
There should be enough vram to load a wifi enable <b style="color:#FFA34F">exec</b> stub i would hope?  Otherwise i can just load it into available ram and exicute it that way.  I may just modify the stub myself but best to keep that sort of thing in one place :)<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93567 - Mighty Max - Wed Jul 19, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">To use the stdio fopen() und co should be no problem at all.
<br/>
<br/>
The implementation of the wifilib in a code running from VRAM could be some work, but not impossible.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93625 - dovoto - Thu Jul 20, 2006 6:27 am</h4>
    <div class="postbody"><span class="postbody">It is probably not really worth it if it is too complex to get wifi enabled stub to run from vram.  I can just load it into whatever ram I have free and launch it that way<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93628 - tepples - Thu Jul 20, 2006 6:40 am</h4>
    <div class="postbody"><span class="postbody">Would it be acceptable to limit the Wi-Fi stub to a 3.5 MB .nds file?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93629 - dovoto - Thu Jul 20, 2006 6:45 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Would it be acceptable to limit the Wi-Fi stub to a 3.5 MB .nds file?</td> </tr></table><span class="postbody">
<br/>
yah..that is pretty much along the lines i was thinking<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93633 - melw - Thu Jul 20, 2006 8:09 am</h4>
    <div class="postbody"><span class="postbody">Not even WMB (at least on Windows) allows &gt;3Mb .nds files to be transferred. Limiting the .nds size is just natural - I guess that's how the DS download play works too - it reserves some 3Mb of the DS' 4Mb RAM for the download.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94001 - Mighty Max - Sat Jul 22, 2006 12:39 pm</h4>
    <div class="postbody"><span class="postbody">The current restrictions are not really big. Actual, using the fatlib or ROM as source for the executeable, allows to (theoretical) run a nds file wich binaries fits into the 4MB - 768 Bytes. 
<br/>
<br/>
However you are much more likely to run into other problems before you reach that limit (location of the IPC-Struct, etc)
<br/>
<br/>
The RAM as source is limited by the size of heap left at the time you create the image.
<br/>
<br/>
Btw. a bug that prevented loading an mem-Image correct was found by Dovoto, and is fixed since yesterday.
<br/>
<br/>
<br/>
:edit: Updated it once more. Be carefull, the ARM7 code has changed and the new exec_stub is not compatible with the old ARM7 code. So Update both or none.
<br/>
<br/>
The new arm7 ode can (but doesn't need to) be called from within an IRQ Handler now. And is now part of the IRQ_VBLANK.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94033 - dovoto - Sat Jul 22, 2006 4:41 pm</h4>
    <div class="postbody"><span class="postbody">I have wifi loading of nds files working.  I was able to load the few nds examples from the example pack I tried.  The official demos I did not have as much luck with.  I got the zelda trailer to load but it froze after a few seconds of playback, the other two i tried I had no luck with (tetris and meteos i think).
<br/>
<br/>
Looks like i get about 15KB/s with no attempt at making it fast (I am not sure where to begin optimizing network code to tell the truth).
<br/>
<br/>
My code is not too clean and normaly I would hide it till I had some time to clean it up and, speed it up, and make it a bit more stable but I am going out of town for a couple of days so here it is anyway.  (I also have made no attempt to reduce the size of the binary)
<br/>
<br/>
[url]
<br/>
<a href="http://www.drunkencoders.com/temp/exec_test.zip[/url]" target="_blank">www.drunkencoders.com/temp/exec_test.zip[/url]</a>
<br/>
<br/>
<br/>
It also has a stuf for wifi file io that will plug into devkitpro  (fopen("wifi:/blah...") ).  This works insofar as the functions get called but I have not actualy filled them out to connect to any sort of file server.  They might serve as a good starting point.
<br/>
<br/>
This also does not require a fat capable device like the original version might posted.  The fileserver simply waites for a connection on port 12345 and when it gets a connection it sends the file size followed by the actual file.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94472 - Mighty Max - Mon Jul 24, 2006 10:26 pm</h4>
    <div class="postbody"><span class="postbody">I can't get it to work dovoto.
<br/>
<br/>
The client does never complete the connection to the AP. (Alltho the wifilib can and does in my own applications)
<br/>
<br/>
And i can't run the server. I guess that i need framework?<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94475 - dovoto - Mon Jul 24, 2006 11:03 pm</h4>
    <div class="postbody"><span class="postbody">interesting...I did not spend much time trying to make it robust.  Odd that the server does not run as it is just a console app...but maybe i have some setting messed up on compiler and it is outputing .net code or some such.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94497 - josath - Tue Jul 25, 2006 2:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">interesting...I did not spend much time trying to make it robust.  Odd that the server does not run as it is just a console app...but maybe i have some setting messed up on compiler and it is outputing .net code or some such.</td> </tr></table><span class="postbody">
<br/>
<br/>
for me it wants msvc80d.dll or something (forget the exact one). if it's a simple server, you could just give us the C code and let us compile it. or we could just wait for an improved version</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94599 - dovoto - Tue Jul 25, 2006 1:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>josath wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
for me it wants msvc80d.dll or something (forget the exact one). if it's a simple server, you could just give us the C code and let us compile it. or we could just wait for an improved version</td> </tr></table><span class="postbody">
<br/>
<br/>
I will get the source out when i have a minute.  Should be easy to make your own though...just wait for a connection on port 12345 and when you have one send the file size (4 bytes) to the nds followed by the nds file.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94719 - tepples - Tue Jul 25, 2006 10:19 pm</h4>
    <div class="postbody"><span class="postbody">Would it be hard to make your client use standard HTTP/1.1 so that I can just drop my .nds file in my Apache public folder?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94728 - dovoto - Tue Jul 25, 2006 10:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Would it be hard to make your client use standard HTTP/1.1 so that I can just drop my .nds file in my Apache public folder?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, but right now it is set up to be interupted by the server so I can reset and reload the nds file without touching the NDS.  It would be a simple modification to have the retrieval allways grab a certain file from an http.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94920 - Mighty Max - Wed Jul 26, 2006 9:50 pm</h4>
    <div class="postbody"><span class="postbody">There have been again several changes to the exec() 
<br/>
<br/>
+ the host can now decide if mem gets cleared, arm7 loaded, etc (see LF_ flags)
<br/>
* the parameter "mem:/dddd" is no longer supported. Instead of a string, pass the pointer to the mem image directly (suggested by dovoto to reduce mem load by not relying to string functions) add LF_MEMDIRECT as loaderflag
<br/>
+ long filename &amp; directory support
<br/>
- changed the synching, to reduce the danger of overwriting the arm7 loader from an allready running arm9 bin (its stack was overwriting this in the demos)
<br/>
<br/>
I still have problems loading the newer official demos. The old ones work just fine. In dualis even the new demos load just fine. If anyone has any suggestion what might caus it, please let me hear.
<br/>
<br/>
:edit: forgotten: LF_LOADGBFS will load an appended gbfs image into the main ram just below __eheap_end  (0x200 aligned) and tries to change __eheap_end so it doesnt get overwritten after an malloc. Works only for homebrew &amp; files loaded from fat, not mem<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95547 - Sektor - Sun Jul 30, 2006 4:23 am</h4>
    <div class="postbody"><span class="postbody">I ran the <a class="postlink" href="http://mightymax.org/exec_test.zip" target="_blank">binary</a> on M3CF but it displayed this error:
<br/>
<br/>
FAT:
<br/>
1: 0 400000
<br/>
2: 0 0
<br/>
3: 0 20132C4
<br/>
4: 20313EDC 2013ECC
<br/>
ARM9
<br/>
LD9FAT
<br/>
file open failed
<br/>
-&gt; 0
<br/>
ARM7
<br/>
LD7FAT
<br/>
file open failed
<br/>
-&gt; 0
<br/>
CLR
<br/>
<br/>
I had exec_test.nds, exec_stub.bin, bootme.nds and zelda.nds on my CF card.  Same error when started with WMB or M3 menu.  I don't think it looks for zelda.nds anymore, I just had it there because of the first post in this thread.  I haven't tried compiling it yet, I have a newer devkitarm installed.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95561 - Mighty Max - Sun Jul 30, 2006 7:36 am</h4>
    <div class="postbody"><span class="postbody">A yes sorry to test the long filenames the nds to start has changed to "A_long_filename.nds"
<br/>
<br/>
The exec_test without exec_stub should be able to compile in the newer devkits too, so you can change the filename to whatever you need.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95565 - Sektor - Sun Jul 30, 2006 8:23 am</h4>
    <div class="postbody"><span class="postbody">It worked with that filename.  I'll try and add this to all my DS projects.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96189 - DragonMinded - Tue Aug 01, 2006 8:20 pm</h4>
    <div class="postbody"><span class="postbody">Hey MightyMax, thanks for finally getting out the one piece of code everyone wanted!
<br/>
<br/>
I'll let you know how it works.
<br/>
<br/>
EDIT: I cannot get the stub to compile.  Complained that it couldn't find the specs file, so I edited the INI to include the specs path, and now it can't find the .ld file, in the same directory.<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96206 - Mighty Max - Tue Aug 01, 2006 9:04 pm</h4>
    <div class="postbody"><span class="postbody">The makefiles &amp; linkscripts are still based uppon devkitArm r18. I should relly move on to r19 :p
<br/>
<br/>
For r18 however the path to copy those two file to, is "devkitPro\devkitARM\arm-elf\lib"<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96208 - DragonMinded - Tue Aug 01, 2006 9:12 pm</h4>
    <div class="postbody"><span class="postbody">Ok, compiled here with latest rein and it seems to be executing just fine.  One minor thing, both my happycat.nds and drugwars.nds files have the arm7 mod player playing incorrectly after boot.  If you want to have a look, they are here: <a href="http://www.dragonminded.com/dsorganize/files/DrugWars.nds" target="_blank">www.dragonminded.com/dsorganize/files/DrugWars.nds</a> and <a href="http://www.dragonminded.com/dsorganize/files/HappyCat.nds" target="_blank">http://www.dragonminded.com/dsorganize/files/HappyCat.nds</a>
<br/>
<br/>
(Both use older dekutree mod player if that helps)<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96210 - Mighty Max - Tue Aug 01, 2006 9:23 pm</h4>
    <div class="postbody"><span class="postbody">I gonna check it
<br/>
<br/>
btw, <a class="postlink" href="http://mightymax.org/eabi_specs.zip" target="_blank">here</a> are the r19 (eabi) specs &amp; linkscripts to put into "devkitPro\devkitARM\arm-eabi\lib"<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96211 - DragonMinded - Tue Aug 01, 2006 9:25 pm</h4>
    <div class="postbody"><span class="postbody">I dont use eabi as it causes many many MANY errors with my projects.
<br/>
<br/>
EDIT: Ok, it seems to work ok on some files, but other files it will crash partway through loading.
<br/>
<br/>
Example:  <a href="http://www.stud.uni-karlsruhe.de/~uxasl/beup.nds" target="_blank">http://www.stud.uni-karlsruhe.de/~uxasl/beup.nds</a> gets stuck after CI
<br/>
<br/>
Any demo I try goes after loading the arm7 to CLR and then just goes to blank screens.
<br/>
<br/>
<a href="http://www.dragonminded.com/dsorganize/files/dissonance.nds" target="_blank">http://www.dragonminded.com/dsorganize/files/dissonance.nds</a> freezes after CW
<br/>
<br/>
Long demo filenames fail on opening.
<br/>
<br/>
<a href="http://www.dragonminded.com/dsorganize/files/SylphIRC.nds" target="_blank">http://www.dragonminded.com/dsorganize/files/SylphIRC.nds</a> freezes after trying to init arm7<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96219 - Mighty Max - Tue Aug 01, 2006 10:10 pm</h4>
    <div class="postbody"><span class="postbody">I've checked these nds, and they work fine for me. 
<br/>
<br/>
I'll update the archive as soon i got a successfull responce from others on IRC<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96220 - DragonMinded - Tue Aug 01, 2006 10:23 pm</h4>
    <div class="postbody"><span class="postbody">Well, what should I be doing differently so that they do boot?  Keep in mind I'm using a newer fatlib.
<br/>
<br/>
EDIT: Just tried with your original stub with the same results.  Also, sometimes it fails on files that it normally works on, with a failed to init fat or can't load.
<br/>
<br/>
EDIT AGAIN: Seems dissonance works fine now.  Also, if I use my own compiled src, it seems to reliably boot the ones it works with, as apposed to erratic failures.<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"><br/><br/>Last edited by DragonMinded on Tue Aug 01, 2006 10:34 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#96225 - Mighty Max - Tue Aug 01, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">I have updated the archive.
<br/>
<br/>
The precompiled exec_test.nds &amp; bin work for me to boot all the wifi examples you put above as "boot.nds"<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96227 - DragonMinded - Tue Aug 01, 2006 11:01 pm</h4>
    <div class="postbody"><span class="postbody">I recompiled the newest that you've posted and it is working on the ones it didn't before, save for the demos and sylphIRC.  I've always had a problem with SIRC, and there's one built in to my program, so that doesn't matter a bit, really.  The demos still were failing on fat init, so I just wrote a function to convert to short file names and pass your function the short instead of long, and they boot now.  BEUP works fine now!
<br/>
<br/>
You rawks :&gt;
<br/>
<br/>
EDIT: Still getting random fat_fopen errors on both your .bin and my compiled bin
<br/>
<br/>
EDIT 2: Doesn't work with .ds.gba or .sc.nds either.  Should be easy enough to bypass the loader.
<br/>
<br/>
EDIT 3: Brain age usa demo loads like, once in a blue moon here, but usually just shows a white and black screen.
<br/>
<br/>
EDIT 4: Seems setting the filename to lowercase and then displaying it in the actual bin makes the files that woudln't load before work... strange.  I can also patch it myself to load .sd.nds and .ds.gba
<br/>
<br/>
EDIT 5: Seems I like edits as much as you like monologues ;P  Random fat_fopen errors seem to be few and far between, and don't happen consistently on all caps files anymore.  .ds.gba and .sc.nds booting works fine now that I added a few lines of code.  Brain age usa demo still doesn't load, gets through the whole process but stays on white screen.  Keep up the good work :&gt;
<br/>
<br/>
PS: WTF is an impressum?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96256 - josath - Wed Aug 02, 2006 3:13 am</h4>
    <div class="postbody"><span class="postbody">As far as booting .ds.gba files, you can do it sometimes, but it is not reliable. Most people recommend to just use the original .nds files, instead of trying to hack a .ds.gba back into a .nds. 
<br/>
<br/>
However, if you really want to, it turns out that about 80% of .ds.gba files are simply loader + .nds file. The other 20% have other data / configuration, and you will not be able to convert them back into a working .nds
<br/>
<br/>
You can see the source of the app I wrote here, <a href="http://davr.drunkencoders.com/pme2nds.zip" target="_blank">http://davr.drunkencoders.com/pme2nds.zip</a>
<br/>
<br/>
basically, I just search for the 16 byte string '************AXXE' or '************####' (where * can be anything) and assume they will be aligned to 16 byte boundries. When I find a match, I just discard everything up to (but not including) that 16 bytes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96287 - Mighty Max - Wed Aug 02, 2006 9:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DragonMinded wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT 2: Doesn't work with .ds.gba or .sc.nds either.  Should be easy enough to bypass the loader.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I concentrated on real .nds only.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT 3: Brain age usa demo loads like, once in a blue moon here, but usually just shows a white and black screen.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The new demo's don't run at all here. That they do for you very seldom, hints that i really should get into that synching better then before. I got an idea for this ...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
PS: WTF is an impressum?</td> </tr></table><span class="postbody">
<br/>
<br/>
It's a register of personal data of a webside owner. It is required in germany for any page that is not purely for personal use. There are some lawyers sueing anyone without the impressum even for personal use, i'm just beeing on the secure side here ;)
<br/>
<br/>
<br/>
:edit: Update Yes it is the synch. prepare for a version running the new demos today. I can now run the mkds demo, which does not load native on gbamp *g*
<br/>
<br/>
:edit^2: Its updated.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96351 - DragonMinded - Wed Aug 02, 2006 7:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mighty Max wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DragonMinded wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT 3: Brain age usa demo loads like, once in a blue moon here, but usually just shows a white and black screen.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The new demo's don't run at all here. That they do for you very seldom, hints that i really should get into that synching better then before. I got an idea for this ...</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Ok that makes kinda sense, the old E3 demos work great ;P
<br/>
<br/>
PS, making it work with the majority of .ds.gba and .sc.nds is VERY easy.  I simply added another flag and turned it on if it was a proper .ds.gba or .sc.nds file, and in your boot code itself, that flag tells code to add 512 bytes to all file read operations, thus finding the correct header, and so far, booting everything I've tried.
<br/>
<br/>
EDIT: Tried newest that you've put up, still doesn't boot brain age demo, but seems to be an all around solid release, so I don't really mind.  I own brain age anyhow ;P<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96360 - MechaBouncer - Wed Aug 02, 2006 9:23 pm</h4>
    <div class="postbody"><span class="postbody">So is this something we might see added to the next DSOrganize, then? ;)<br/>_________________<br/>Cobalt/Black NDSL
<br/>
CycloDS Evolution (firmware 1.55 BETA 3) and EZFlash 3-in-1
<br/>
Kingston SD-C02G JAPAN 2GB MicroSD
<br/>
MoonShell 1.71, DSOrganize 3.1129, QuakeDS Pre3, ScummVM DS 0.11.1, Pocket Physics 0.6, OpenTyrian DS 0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96368 - MaHe - Wed Aug 02, 2006 10:13 pm</h4>
    <div class="postbody"><span class="postbody">DragonMinded: When implementing this in DSOrganize: could you make it load the .sc.nds files under 4MB using this method and everything bigger load using the current (slower) method? Thanks for answers :)<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96371 - Mighty Max - Wed Aug 02, 2006 10:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DragonMinded wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT: Tried newest that you've put up, still doesn't boot brain age demo, but seems to be an all around solid release, so I don't really mind.  I own brain age anyhow ;P</td> </tr></table><span class="postbody">
<br/>
<br/>
The version uploaded works just fine with brainage demo here. Just solved a sudoku puzzle. Probably a deffect dl or such?<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96373 - DragonMinded - Wed Aug 02, 2006 11:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MechaBouncer wrote:</b></span></td> </tr> <tr> <td class="quote">So is this something we might see added to the next DSOrganize, then? ;)</td> </tr></table><span class="postbody">
<br/>
<br/>
What is this might crap?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96808 - MaHe - Sat Aug 05, 2006 5:10 pm</h4>
    <div class="postbody"><span class="postbody">A problem with my SuperCard miniSD - the top screen will turn white, while the lower one will shut off ... Any ideas?<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96824 - Mighty Max - Sat Aug 05, 2006 7:34 pm</h4>
    <div class="postbody"><span class="postbody">Might be a problem reading from the SD, or it fails to run the arm7 code.
<br/>
<br/>
What is the output of the loader itself, while it tries to load the nds?<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96832 - Sektor - Sat Aug 05, 2006 8:35 pm</h4>
    <div class="postbody"><span class="postbody">How can I reset the DS with code?
<br/>
<br/>
Do you know how to launch the M3 menu?  It's part of the firmware and not an .nds file on the CF/SD card.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96833 - Mighty Max - Sat Aug 05, 2006 8:40 pm</h4>
    <div class="postbody"><span class="postbody">To reset to booting the nds, "swi 0" on both CPUs<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98072 - dovoto - Sun Aug 13, 2006 2:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">I have wifi loading of nds files working.  I was able to load the few nds examples from the example pack I tried.  The official demos I did not have as much luck with.  I got the zelda trailer to load but it froze after a few seconds of playback, the other two i tried I had no luck with (tetris and meteos i think).
<br/>
<br/>
Looks like i get about 15KB/s with no attempt at making it fast (I am not sure where to begin optimizing network code to tell the truth).
<br/>
<br/>
My code is not too clean and normaly I would hide it till I had some time to clean it up and, speed it up, and make it a bit more stable but I am going out of town for a couple of days so here it is anyway.  (I also have made no attempt to reduce the size of the binary)
<br/>
<br/>
[url]
<br/>
<a href="http://www.drunkencoders.com/temp/exec_test.zip[/url]" target="_blank">www.drunkencoders.com/temp/exec_test.zip[/url]</a>
<br/>
<br/>
<br/>
It also has a stuf for wifi file io that will plug into devkitpro  (fopen("wifi:/blah...") ).  This works insofar as the functions get called but I have not actualy filled them out to connect to any sort of file server.  They might serve as a good starting point.
<br/>
<br/>
This also does not require a fat capable device like the original version might posted.  The fileserver simply waites for a connection on port 12345 and when it gets a connection it sends the file size followed by the actual file.</td> </tr></table><span class="postbody">
<br/>
<br/>
here is the source to the file server.  It should now build under linux/windows with no change.  It includes the win exe.
<br/>
<a class="postlink" href="http://www.drunkencoders.com/temp/wifimb.zip" target="_blank">http://www.drunkencoders.com/temp/wifimb.zip</a>
<br/>
<br/>
I was unable to get it to work with the newer stub.  After some tinkering I was able to get the newer stub to read the ndsfile but I can not seem to get it past the "CI" stage.  As soon as i get the newer stub to work I will release a more useful version.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98109 - Mighty Max - Sun Aug 13, 2006 8:48 am</h4>
    <div class="postbody"><span class="postbody">That CI thing is weird. Monsti also observes this while running the stub on the M3SD. What is the card you were testing it with?
<br/>
<br/>
The CI stall basically tells that the arm7 counterpart does not act. Basically it is checking if the given value has been cleared by the arm7 (which is the first thing it does after disabling IRQs):
<br/>
<br/>
The wait:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      // wait until arm7 notifies that the job started
<br/>
      while (*(vu32 *)0x027FFFFC!=0) {
<br/>
      } ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The arm7:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      *(vu32 *)0x27FFFFC = 0 ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Since you got it running with wifi, your arm7 code obviously doesnt crash before trying to exec.
<br/>
<br/>
What is your WAIT_CR set to?
<br/>
Does it change if you put in a swiWaitForVBlank in the while-loop?<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98178 - DragonMinded - Sun Aug 13, 2006 9:27 pm</h4>
    <div class="postbody"><span class="postbody">I am now getting a stall on CW on all of my boot attempts on anything.  I've tried putting a swiWaitForVBlank there but it still doesn't help.... What else should I check for?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98183 - Mighty Max - Sun Aug 13, 2006 10:05 pm</h4>
    <div class="postbody"><span class="postbody">If CW is the last message, the arm7 could not complete copying it's code.
<br/>
<br/>
This might have the following reason:
<br/>
 - the header info's are invalid for the arm7 base or size
<br/>
 - the arm7 code to do this was not copied over to 0x027FFD00, or got otherwise damaged
<br/>
 - the arm7 exec_stub address (at 0x27FFFFC) was set with false information, having the arm7 jump into nirvana
<br/>
<br/>
<br/>
When did it stoppped working? Which was the last working version for you? For me it still acts as it did, so its a bit problematic to find the error.
<br/>
<br/>
The whole procedure is as follows, with the states marked (for nds files using arm7 exclusive ram = homebrew)
<br/>
<br/>
- ARM9 loads ARM9 binary
<br/>
*** ARM9
<br/>
- ARM9 loads ARM7 binary
<br/>
*** ARM7
<br/>
- ARM9 sets parameters &amp; exec_stub for ARM7
<br/>
- ARM9 tells the ARM7 to continue execution (at *0x27FFFFC)
<br/>
*** CI
<br/>
- ARM7 clears clears the flag &amp; continues execution where it's told to
<br/>
- ARM9 waits for the flag to be cleared
<br/>
*** CW
<br/>
- ARM7 clears exclusive memory 
<br/>
- ARM7 copies it's binary
<br/>
- ARM7 clears its first parameter
<br/>
- ARM9 waits for the first parameter to be cleared
<br/>
*** CD
<br/>
- ARM9 clears memory
<br/>
*** CLR
<br/>
- ARM9 loads gbfs data to end of heap &amp; corrects heap end
<br/>
*** PAD
<br/>
- ARM9 sets the first parameter again
<br/>
- ARM7 waits for the parameter to become not zero
<br/>
- ARM7 jumps to new NDS Code
<br/>
- ARM9 jumps to new NDS Code<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98223 - DragonMinded - Mon Aug 14, 2006 6:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mighty Max wrote:</b></span></td> </tr> <tr> <td class="quote">If CW is the last message, the arm7 could not complete copying it's code.
<br/>
<br/>
This might have the following reason:
<br/>
 - the header info's are invalid for the arm7 base or size
<br/>
 - the arm7 code to do this was not copied over to 0x027FFD00, or got otherwise damaged
<br/>
 - the arm7 exec_stub address (at 0x27FFFFC) was set with false information, having the arm7 jump into nirvana
<br/>
<br/>
<br/>
When did it stoppped working? Which was the last working version for you? For me it still acts as it did, so its a bit problematic to find the error.
<br/>
<br/>
The whole procedure is as follows, with the states marked (for nds files using arm7 exclusive ram = homebrew)
<br/>
<br/>
- ARM9 loads ARM9 binary
<br/>
*** ARM9
<br/>
- ARM9 loads ARM7 binary
<br/>
*** ARM7
<br/>
- ARM9 sets parameters &amp; exec_stub for ARM7
<br/>
- ARM9 tells the ARM7 to continue execution (at *0x27FFFFC)
<br/>
*** CI
<br/>
- ARM7 clears clears the flag &amp; continues execution where it's told to
<br/>
- ARM9 waits for the flag to be cleared
<br/>
*** CW
<br/>
- ARM7 clears exclusive memory 
<br/>
- ARM7 copies it's binary
<br/>
- ARM7 clears its first parameter
<br/>
- ARM9 waits for the first parameter to be cleared
<br/>
*** CD
<br/>
- ARM9 clears memory
<br/>
*** CLR
<br/>
- ARM9 loads gbfs data to end of heap &amp; corrects heap end
<br/>
*** PAD
<br/>
- ARM9 sets the first parameter again
<br/>
- ARM7 waits for the parameter to become not zero
<br/>
- ARM7 jumps to new NDS Code
<br/>
- ARM9 jumps to new NDS Code</td> </tr></table><span class="postbody">
<br/>
<br/>
It was working fine, but then suddenly it stopped last week sometime.  I hadn't even compiled anything new.  It has always seemed rather erratic in DSO.
<br/>
<br/>
EDIT: FYI for Mighty Max and anyone else.  Compiling your arm7 with O3 WILL BREAK THE LOADER!  Don't do what I did!
<br/>
<br/>
EDIT again: Why is it that the exec_stub fails to init any card on the NDS side?  My MK2, MK3, and NinjaSD all do not boot from them, checking the interface says that it failed and went to GBAMP.  Why is this?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98244 - Mighty Max - Mon Aug 14, 2006 9:42 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DragonMinded wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT: FYI for Mighty Max and anyone else.  Compiling your arm7 with O3 WILL BREAK THE LOADER!  Don't do what I did!
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Seems like i got to search for a forgotten option for datastructures/volatiles. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT again: Why is it that the exec_stub fails to init any card on the NDS side?  My MK2, MK3, and NinjaSD all do not boot from them, checking the interface says that it failed and went to GBAMP.  Why is this?</td> </tr></table><span class="postbody">
<br/>
<br/>
It still uses the old gba_nds_fat MK3/NinjaDS were not included.  There might be some additional trouble, as the nds does not reset in exec, therefor the encryptions doesnt reset. And i think im clearing the memory where the bootloader stores the card's header.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98252 - DragonMinded - Mon Aug 14, 2006 10:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mighty Max wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DragonMinded wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT: FYI for Mighty Max and anyone else.  Compiling your arm7 with O3 WILL BREAK THE LOADER!  Don't do what I did!
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Seems like i got to search for a forgotten option for datastructures/volatiles. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
EDIT again: Why is it that the exec_stub fails to init any card on the NDS side?  My MK2, MK3, and NinjaSD all do not boot from them, checking the interface says that it failed and went to GBAMP.  Why is this?</td> </tr></table><span class="postbody">
<br/>
<br/>
It still uses the old gba_nds_fat MK3/NinjaDS were not included.  There might be some additional trouble, as the nds does not reset in exec, therefor the encryptions doesnt reset. And i think im clearing the memory where the bootloader stores the card's header.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Chishm said he had a bug with init -&gt; free -&gt; init, but I seem to have fixed it for ninjaSD.  The loader is working fine again on my GBAMP and my ninjaSD.  My MK2 and MK3 don't load though, as they don't reinit, encountering that bug.
<br/>
<br/>
EDIT: I just installed the newest wifi lib last night, and after that, the exec_stub hangs on CW again for ninjaSD.  It was hanging on CI, but I changed that bit of code to be FIFO.  The arm7 sends back that it recieved the CI instruction now, so it moves to CW, but it never leaves from there.
<br/>
<br/>
EDIT 2: I changed the arm7 asm code that it sends to send fifo back saying its done, and now on ninjaSD it hangs on CLR.  It seems that it can't read any of the values on the arm7 to test properly...  Note that in both cases GBAMP and ninjaSD, I'm using the GBAMP to boot, so it's not a loader issue.  The only thing different is the card interface, which loads the executable fine in both cases.
<br/>
<br/>
EDIT 3: Tested with flashme which was working last night.  Seems it still boots this one fine, because it doesn't go through the CI/CW loop, so it wasn't the wifi that was doing it.  Something else isn't allowing the arm7 to execute.  To clarify, it looks like official demos and flashme boot, because they don't do the CI/CW loop.  All other homebrew hangs there though.<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104156 - bjoerngiesler - Tue Sep 26, 2006 8:07 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I'm a bit late to the party. I'm in the process of replacing DSFTP's exec code with yours, MightyMax. Result: For some NDSs, it consistently works, for others it consistently doesn't -- for example, DSOrganize. 
<br/>
<br/>
For the ones that don't work, the output is consistently: 
<br/>
<br/>
...
<br/>
ARM9
<br/>
LD9FAT
<br/>
-&gt; 0
<br/>
ARM7
<br/>
LD7FAT
<br/>
<br/>
and then it hangs.
<br/>
<br/>
From looking at the code, I guess this means it can't read anything (0 bytes for the ARM9 code, hang for the ARM7 code). I just don't have any idea why, since it works with my old code (which was stolen from MoonShell). To address the obvious points: Short filenames, and in the same directory with other files that can be booted.
<br/>
<br/>
Am I interpreting the messages right? Any idea what might cause this?
<br/>
<br/>
EDIT: Just tried DSOrganize 2.3, blue version, I'm on SC CF. Same results with the same files.<br/>_________________<br/><a class="postlink" href="http://giesler.biz/~bjoern/en/sw_dsftp.html" target="_blank">DSFTP homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105212 - ThaKilla - Fri Oct 06, 2006 7:21 pm</h4>
    <div class="postbody"><span class="postbody">Wondering if anyone can help me.
<br/>
<br/>
I'm trying to add the exec() code to DSBlue (for Wifi downloads of nds files)
<br/>
<br/>
I can get it to almost work in DeSumME. Gets to...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
MEM
<br/>
1: 1F1F00 1F5F001F
<br/>
2: 1F001F1F 1F1F00
<br/>
3: 1010101F 18181818
<br/>
4: 18181818 18181818
<br/>
ARM9
<br/>
ARM7
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
And on hardware it only gets to...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
MEM
<br/>
1: 1F1F00 1F5F001F
<br/>
2: 1F001F1F 1F1F00
<br/>
3: 1010101F 18181818
<br/>
4: 18181818 18181818
<br/>
ARM9
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I was noticing that its getting stuck in a loop. If i use the desembler in the Emu than I can step past the ARM7 to see "CI" "CS" and "CLR" than the screen goes blank.
<br/>
<br/>
I'm sure its in the ARM7 somewhere (maybe missing a makefile parm, though I checked) because the ARM9 in the Emu is just waiting for a response.
<br/>
<br/>
I'm going to try and get the exec_stab.bin re-compled and see if that helps.
<br/>
<br/>
Also could it be that I'm including the exec_stab.bin as a ".h" file?
<br/>
<br/>
Edit: I updated to the latest Flashme. (small chance that was it, but it wasn't)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105279 - jmk - Sat Oct 07, 2006 8:22 am</h4>
    <div class="postbody"><span class="postbody">I'm trying to get this to work now, too, and I'm also getting hangs at the "CI" stage. If I understand things correctly, this is the point where the ARM9 is waiting for the ARM7.
<br/>
<br/>
The odd thing is, this works just fine on my SuperCard miniSD when I use DSFTP-2.2. I can't seem to figure out what the difference between my code and Bjorn's code might be -- they seem to be doing the exact same thing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105549 - ThaKilla - Mon Oct 09, 2006 2:38 pm</h4>
    <div class="postbody"><span class="postbody">OK I got my problem fixed.
<br/>
<br/>
I was trying to pass the Mem Address for a GBFS file over.
<br/>
<br/>
If you are using the DL-ed code than I would change a few things in "exec()"
<br/>
<br/>
First would be the function Header, it should look like
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void exec(vu32 command, bool gbaBoot)</td> </tr></table><span class="postbody">
<br/>
(be sure to change the ".h" file
<br/>
<br/>
from there you can Rem from...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">char *exec_filename = (char *)0x0605FC00 ;</td> </tr></table><span class="postbody">
<br/>
to
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">*(vu32 *)0x0605FFFC = 0x0605FC00 ;</td> </tr></table><span class="postbody">
<br/>
note: the last line is where it saves the Mem Addr for the stub to run.
<br/>
<br/>
Now just set your MemLocation (passed to exec) to...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">*(vu32 *)0x0605FFFC = command ;</td> </tr></table><span class="postbody">
<br/>
<br/>
Hope that helps, probly the best I can explain it</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105813 - jmk - Thu Oct 12, 2006 6:19 am</h4>
    <div class="postbody"><span class="postbody">I also fixed my own problem -- I idiotically forgot to add the arm7 vblank exec check to my test program. (That would explain why it, uh, never responded to the arm9.)
<br/>
<br/>
Now it works, but I'm seeing some minor memory corruption and side effects in some programs; are you still working on this (or reading this thread) at all, Mighty Max?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107511 - Marcel24 - Mon Oct 30, 2006 11:57 am</h4>
    <div class="postbody"><span class="postbody">Hi, i have a strange problem :(
<br/>
<br/>
i can boot NDS code now with your source code *great work* but the problem is that 
<br/>
<br/>
my programm that loads a NDS inits the WIFI connection .
<br/>
<br/>
there is no problem with that but if then this application loads another NDS an it need WIFI support too , than it hangs there on AutoConnect source code :(
<br/>
<br/>
any tipps ?
<br/>
<br/>
tnx</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107526 - tepples - Mon Oct 30, 2006 3:16 pm</h4>
    <div class="postbody"><span class="postbody">Is there a command in 802.11b to disconnect the data link layer cleanly?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107531 - Mighty Max - Mon Oct 30, 2006 4:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jmk wrote:</b></span></td> </tr> <tr> <td class="quote">Now it works, but I'm seeing some minor memory corruption and side effects in some programs; are you still working on this (or reading this thread) at all, Mighty Max?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, but not very intense atm.
<br/>
<br/>
Things are not developing fast over here, so that i am still busy with my studies. Im actually a bit too much behind there for my taste.
<br/>
<br/>
At least that will result in better code when im done ;) Currently i am attending an parallel processing course beneath normal studying, so that ipc in that code might get some tuning.
<br/>
<br/>
<br/>
I had tested WiFi init in starting and started nds files with no problems, but the tests were limited, due to my setup here. The IPC Fifo and the wifi hardware are not reset on the exec(). Both might be the reason for this problem. 
<br/>
<br/>
At what exactly point do the Wifi* calls fail? Does it initialize correct?<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114968 - Baffles - Thu Jan 11, 2007 11:26 pm</h4>
    <div class="postbody"><span class="postbody">I talked to Mighty Max on IRC about porting this to work on a Supercard DS (slot one), and he said we just need a new FAT driver.
<br/>
<br/>
Has anybody worked on this at all for Supercard DS? I didn't want to do the work of a new FAT driver if someone had already done it.
<br/>
<br/>
There are <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=112437#112437" target="_blank">drivers avaliable</a> for the SC DS One, so it shouldn't be too hard, should it?[/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#114998 - Baffles - Fri Jan 12, 2007 2:22 am</h4>
    <div class="postbody"><span class="postbody">Alright, I have it working (at a new gba_fat_nds with way more drivers). However, I can't get it to actually copy and execute any roms. If anybody knows much about the workings of this, or how it's supposed to be done, please talk!
<br/>
<br/>
The problem seems to be it crashing or hanging somehow in the arm 7 loading:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#ifdef VERBOSE
<br/>
   iprintf("CI\n") ;
<br/>
#endif
<br/>
      // wait until arm7 notifies that the job started
<br/>
      while (*(vu32 *)0x027FFFFC!=0) {
<br/>
         // printf was here that got printed sparadoically.
<br/>
      } ;
<br/>
<br/>
#ifdef VERBOSE
<br/>
   iprintf("CW\n") ;
<br/>
#endif</td> </tr></table><span class="postbody">
<br/>
<br/>
If I put an iprintf in the loop, it only prints about 8 times, but the code never reaches CW to print (it does print CI first however).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122546 - Fling - Tue Mar 20, 2007 4:30 am</h4>
    <div class="postbody"><span class="postbody">Has anyone managed to get this to work correctly with the newest libfat by any chance?
<br/>
<br/>
I've modified the exec_test.nds program to download a .nds binary over HTTP and then have it exec() the downloaded .nds. I tried using the exec_stub included in the download provided by Mighty Max, but it doesn't work with my DSX (I didn't think it would, but I figured I'd give it a go anyway).
<br/>
<br/>
So, then I decided to try and convert it over to use the newest libfat so I could patch it with the DSX DLDI. I managed to do this... it all compiled, but when execution hits the exec_stub code, it doesn't get past GetNDSInfo(). Specifically, it locks up at some point after "FAT", and I notice some garbled junk on the screen. However, it does appear that libfat initializes correctly (or it wouldn't have got that far).
<br/>
<br/>
Also, I figure I'll point out (though I'm not sure if it makes a difference) that I had to downgrade to libnds-20060621 as the exec_stub has some CP15 calls in it that seemed to have been removed in the newer version of libnds.
<br/>
<br/>
Any help or suggestions would be much appreciated. I feel that I'm very close, and it's bugging me. Kinda wish I had thought to actually test the exec() code to see if it worked for me before putting together the HTTP downloader heh.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122557 - HyperHacker - Tue Mar 20, 2007 7:06 am</h4>
    <div class="postbody"><span class="postbody">I just noticed today that, contrary to my earlier belief, DSOrganize's launcher (which uses this) doesn't hang on Initializing FAT. It takes about a minute to pass that, then hangs on CI. (The other launcher works fine, though.)
<br/>
<br/>
[edit] Working fine in V2.61. Might just be my dodgy GBAMP. Takes ages to init though.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122587 - Fling - Tue Mar 20, 2007 3:37 pm</h4>
    <div class="postbody"><span class="postbody">Hmm... hadn't tried out DSOrganize before today, but thought I'd give it a go since you mentioned it uses this exec code.
<br/>
<br/>
Anyway, patched it for my DSX, and while the DSOrganize app itself works great, the launcher code doesn't. Fails saying "For some reason, the file was not loadable."
<br/>
<br/>
There doesn't seem to be any source provided for his modified exec_stub either, so I'm kind of at a loss here.
<br/>
<br/>
EDIT: Just spent a bit searching around the official DSX forums and the DSOrganize forums, and it looks as if this is a known problem with no solution currently.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122812 - tyraen - Thu Mar 22, 2007 12:56 pm</h4>
    <div class="postbody"><span class="postbody">I've tried this in various forms: the standalone example, the DSO implementation, and none have worked for me.  They always hang on CI.  Has anyone with a SC lite gotten it to work?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122813 - Diddl - Thu Mar 22, 2007 1:26 pm</h4>
    <div class="postbody"><span class="postbody">** deleted **</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#124232 - knight0fdragon - Wed Apr 04, 2007 7:47 am</h4>
    <div class="postbody"><span class="postbody">ok I am trying to update the exec_stub to r20 with dldi support, but alas, it will not work for me.  I dont know if it is because my stub is too large, or perhaps the stuff that is inside the dldi fat drivers are corrupting areas needed by the stub?
<br/>
<br/>
anyway here is my work if anyone wants to take a look at it and lend me a hand in getting this to work
<br/>
<br/>
<a class="postlink" href="http://knight0fdragon.team-gx.org/DS/Examples/exec_test.rar" target="_blank">http://knight0fdragon.team-gx.org/DS/Examples/exec_test.rar</a><br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#124236 - GrizzlyAdams - Wed Apr 04, 2007 8:33 am</h4>
    <div class="postbody"><span class="postbody">Ok, I've been using an updated version of the exec_stub in dschannels, and I've released a unstable source tarball of everything in dschannels.
<br/>
<br/>
The exec_stub relevant pieces are in arm9/source/util.c arm9/source/dldi.c  and the exec_stub folder.
<br/>
<br/>
<a class="postlink" href="http://homebrew.thewaffleiron.net/GrizzlyAdams/DS/dschannels-beta4-5.tar.gz" target="_blank">Tarball Download</a>
<br/>
<br/>
Any pieces by me that don't have a license header are basically 3-clause BSD licensed.  This archive doesn't include the contents of the data directories.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#124241 - knight0fdragon - Wed Apr 04, 2007 9:21 am</h4>
    <div class="postbody"><span class="postbody">unfortunately the .ld you have provided caused my stub to grow 70MB when  I include  the function fatInit or fatInitDefault<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
