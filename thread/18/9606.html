<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Is it possible to use structures? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Is it possible to use structures?</h2>
<div id="posts">
<div class="post">
    <h4>#83686 - spencer723 - Wed May 17, 2006 9:36 pm</h4>
    <div class="postbody"><span class="postbody">I've been trying to use a structure to store my players hp, position, ect, but I keep getting an error. My structure is setup like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct player {
<br/>
   int pos[2] = {0,0};
<br/>
   int hp = 100;
<br/>
   int hp_cap = 100;
<br/>
   int attack = 20;
<br/>
   int defense = 20;
<br/>
   int exp = 0;
<br/>
   int level = 1;
<br/>
};
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
and the error I'm getting is:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
arm9_main.cpp:21:error: a brace-enclosed initializer is not allowed here before '{' token
<br/>
arm9_main.cpp:21:error: ISO C++ forbids initialization of member 'pos'
<br/>
arm9_main.cpp:21:error: making 'pos' static
<br/>
arm9_main.cpp:21:error: ISO C++ forbids in-class initialization of non-constant static member 'pos'
<br/>
<br/>
ect.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Any help would be appreciated :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83690 - ProblemBaby - Wed May 17, 2006 9:55 pm</h4>
    <div class="postbody"><span class="postbody">You cant give them initvalues in the definitiation
<br/>
remove all "= blah"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83696 - spencer723 - Wed May 17, 2006 10:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ProblemBaby wrote:</b></span></td> </tr> <tr> <td class="quote">You cant give them initvalues in the definitiation
<br/>
remove all "= blah"</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks! I also had to make all of them static ints.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83705 - Lazy1 - Wed May 17, 2006 11:25 pm</h4>
    <div class="postbody"><span class="postbody">They don't need to be static ints, just do something like...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct Player_S {
<br/>
   int playerPosition[ 2 ];
<br/>
   int health;
<br/>
} Player_T;
<br/>
<br/>
void initPlayer( Player_T* player ) {
<br/>
   player-&gt;playerPosition[ 0 ] = 0;
<br/>
   player-&gt;playerPosition[ 1 ] = 0;
<br/>
   player-&gt;health = 100;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You are defining a structure, the type itself cannot contain data but variables of that type can.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83729 - spencer723 - Thu May 18, 2006 2:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
...
<br/>
You are defining a structure, the type itself cannot contain data but variables of that type can.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks! Even better. Now, will that be globally available to my whole program (excluding the arm7)? Sorry, I've never declared a structure like this before and I'm sorta new to the DS programming.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83734 - wintermute - Thu May 18, 2006 2:31 am</h4>
    <div class="postbody"><span class="postbody">You could also initialise it like this although it's not as clear as initialising the values directly.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct player {
<br/>
   int pos[2]; 
<br/>
   int hp;
<br/>
   int hp_cap;
<br/>
   int attack;
<br/>
   int defense;
<br/>
   int exp;
<br/>
   int level;
<br/>
};
<br/>
<br/>
struct player player1 = {
<br/>
   {0,0},
<br/>
   100,
<br/>
   100,
<br/>
   20,
<br/>
   20,
<br/>
   0,
<br/>
   1
<br/>
};
<br/>
<br/>
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83737 - spencer723 - Thu May 18, 2006 2:52 am</h4>
    <div class="postbody"><span class="postbody">Thanks everyone :D, I got it working perfectly</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83739 - Lazy1 - Thu May 18, 2006 3:08 am</h4>
    <div class="postbody"><span class="postbody">Have you fully learned C/C++?
<br/>
If not may I suggest this book: 
<br/>
<a href="http://www.amazon.ca/exec/obidos/ASIN/0072226803/qid=1147917749/sr=8-1/ref=sr_8_xs_ap_i1_xgl/702-9042055-0329641" target="_blank">http://www.amazon.ca/exec/obidos/ASIN/0072226803/qid=1147917749/sr=8-1/ref=sr_8_xs_ap_i1_xgl/702-9042055-0329641</a>
<br/>
<br/>
It is possible to learn C or C++ by reading code and changing small things here and there, 
<br/>
but actually learning and understanding the language helps incredibly.
<br/>
You'll understand what what those errors mean, how to solve them and better yet - not cause them.
<br/>
It's also a good idea to learn on a standard platform, like win32, linux or macos x.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83850 - HyperHacker - Thu May 18, 2006 11:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">You could also initialise it like this although it's not as clear as initialising the values directly.</td> </tr></table><span class="postbody">
<br/>
That's whre comments come in.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct player player1 = {
<br/>
   {0,0}, //pos[2]
<br/>
   100, //hp
<br/>
   100, //hp_cap
<br/>
   20, //attack
<br/>
   20, //defense
<br/>
   0, //exp
<br/>
   1 //level
<br/>
};</td> </tr></table><span class="postbody">
<br/>
Ideally you'd put a tab before each comment, but you can't do that in the reply box.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83863 - spencer723 - Fri May 19, 2006 1:18 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">Have you fully learned C/C++?
<br/>
If not may I suggest this book: 
<br/>
<a href="http://www.amazon.ca/exec/obidos/ASIN/0072226803/qid=1147917749/sr=8-1/ref=sr_8_xs_ap_i1_xgl/702-9042055-0329641" target="_blank">http://www.amazon.ca/exec/obidos/ASIN/0072226803/qid=1147917749/sr=8-1/ref=sr_8_xs_ap_i1_xgl/702-9042055-0329641</a>
<br/>
<br/>
It is possible to learn C or C++ by reading code and changing small things here and there, 
<br/>
but actually learning and understanding the language helps incredibly.
<br/>
You'll understand what what those errors mean, how to solve them and better yet - not cause them.
<br/>
It's also a good idea to learn on a standard platform, like win32, linux or macos x.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yep, I've learned C/C++, I taught myself and now I'm in computer science so I'm learning alot more (although I already know most of the stuff being taught).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84145 - snowsquirrel - Sat May 20, 2006 7:07 pm</h4>
    <div class="postbody"><span class="postbody">Wouldn' this work?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct player {
<br/>
   player()
<br/>
   {
<br/>
        pos[0]=pos[1]=0;
<br/>
        hp=hp_cap=100;
<br/>
        attack=defense=20;
<br/>
        exp=0;
<br/>
        level=1;
<br/>
   }
<br/>
   int pos[2];
<br/>
   int hp;
<br/>
   int hp_cap;
<br/>
   int attack;
<br/>
   int defense;
<br/>
   int exp;
<br/>
   int level;
<br/>
}; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Or even better
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct player {
<br/>
   player(int p_x=0, int p_y=0, p_hp=100, p_hp_cap=100, p_attack=20, p_defense=100, p_exp=0, p_level=1)
<br/>
:hp(p_hp), hp_cap( p_hp_cap ),
<br/>
 attack( p_attack ), defense( p_defense ),
<br/>
 exp( p_exp ), level( p_level )
<br/>
  {
<br/>
      pos[0] = x;
<br/>
      pos[1] = y;
<br/>
   }
<br/>
<br/>
   int pos[2];
<br/>
   int hp;
<br/>
   int hp_cap;
<br/>
   int attack;
<br/>
   int defense;
<br/>
   int exp;
<br/>
   int level;
<br/>
}; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Then when you want to create your player, all you have to do is:
<br/>
For the first suggestion
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
player p1;
<br/>
player p2;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
or the second option gives you the ability to create the default, or  change a few things:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
player p1(0,0, 120, 150); //make p1 a little tougher
<br/>
player p2;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Good Luck.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84359 - spencer723 - Mon May 22, 2006 2:39 am</h4>
    <div class="postbody"><span class="postbody">Hmm, I actually may consider that. It could be easier for when I need monsters or enemies on screen with certain health. Thanks snowsquirrel!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84362 - Lazy1 - Mon May 22, 2006 3:05 am</h4>
    <div class="postbody"><span class="postbody">Unless there is some wierd compiler feature, as far as I know C structures cannot have constructors.
<br/>
<br/>
What you could do, is take an object-oriented approach to your game.
<br/>
For example:
<br/>
<br/>
class Entity:
<br/>
health
<br/>
armor
<br/>
x
<br/>
y
<br/>
<br/>
class Player inherits from entity but adds:
<br/>
weapons
<br/>
<br/>
class Enemy inherits from entity but adds:
<br/>
target
<br/>
<br/>
ect..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84367 - wintermute - Mon May 22, 2006 4:11 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">Unless there is some wierd compiler feature, as far as I know C structures cannot have constructors.
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
In C++ structs are classes where everything defaults to public.
<br/>
<br/>
The code up there should have been
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct player {
<br/>
   player(int p_x=0, int p_y=0, int p_hp=100, int p_hp_cap=100, int p_attack=20, int p_defense=100, int p_exp=0, int p_level=1)
<br/>
:hp(p_hp), hp_cap( p_hp_cap ),
<br/>
 attack( p_attack ), defense( p_defense ),
<br/>
 exp( p_exp ), level( p_level )
<br/>
  {
<br/>
      pos[0] = p_x;
<br/>
      pos[1] = p_y;
<br/>
   }
<br/>
<br/>
   int pos[2];
<br/>
   int hp;
<br/>
   int hp_cap;
<br/>
   int attack;
<br/>
   int defense;
<br/>
   int exp;
<br/>
   int level;
<br/>
}; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
it was missing types on most of the constructor parameters and the input position was in p_x &amp; p_y<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#84424 - snowsquirrel - Mon May 22, 2006 1:58 pm</h4>
    <div class="postbody"><span class="postbody">oops that is what I get for coding on the fly.  Also note that this is legal C++, but not legal C.  So if you have a reason not to use C++, you will have to stick with the other suggestions.
<br/>
<br/>
~S</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
