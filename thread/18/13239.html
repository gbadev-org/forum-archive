<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>3D Object Touch Recognition - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > 3D Object Touch Recognition</h2>
<div id="posts">
<div class="post">
    <h4>#129168 - ikaris - Sun May 20, 2007 12:54 am</h4>
    <div class="postbody"><span class="postbody">This post
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=12438" target="_blank">http://forum.gbadev.org/viewtopic.php?t=12438</a>
<br/>
<br/>
talks about detecting if a sprite is touched with the stylus...
<br/>
<br/>
How about 3D objects ?
<br/>
<br/>
Bounding spheres ?
<br/>
<br/>
Access to some sort of buffer ?
<br/>
<br/>
Any suggestions ?
<br/>
<br/>
I did a few searches, and didn't find anything... although its possible I'm blind.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129176 - gabebear - Sun May 20, 2007 1:58 am</h4>
    <div class="postbody"><span class="postbody">The picking example in the libnds examples is probably what you want.
<br/>
<br/>
If you don't already know how picking works in OpenGL then you should start there. Try <a href="http://www.lighthouse3d.com/opengl/picking/" target="_blank">http://www.lighthouse3d.com/opengl/picking/</a> for a good explanation of how it works.
<br/>
<br/>
I know the example isn't that well commented... sorry... It probably should be a tutorial and not just an example.
<br/>
<br/>
Man... surfing is tiring.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129183 - Ant6n - Sun May 20, 2007 4:17 am</h4>
    <div class="postbody"><span class="postbody">AFAIK it comes down to getting a ray from the camera into the world that represents where you clicked on screen, and then doing the collision detection on that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129195 - ikaris - Sun May 20, 2007 1:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ant6n wrote:</b></span></td> </tr> <tr> <td class="quote">AFAIK it comes down to getting a ray from the camera into the world that represents where you clicked on screen, and then doing the collision detection on that.</td> </tr></table><span class="postbody">
<br/>
<br/>
OK, I figured raycasting would be involved.
<br/>
<br/>
However, what does the ray collide with ?
<br/>
<br/>
A bounding sphere would be less accurate for complex models, but detecting a hit on a complex polygon model would be heavier.
<br/>
<br/>
Which method do you people use ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129212 - gabebear - Sun May 20, 2007 6:15 pm</h4>
    <div class="postbody"><span class="postbody">If you are doing picking the easiest thing to do is bound on the actual model. Picking uses the 3D hardware so if you can see it, you can pick it. Generally you use a simplified 3D model for picking; no texturing, simplify complex areas, and such. 
<br/>
<br/>
You can use bounding spheres/boxes for clicking, but it won't be as accurate unless you are clicking on a sphere or box.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129213 - silent_code - Sun May 20, 2007 6:32 pm</h4>
    <div class="postbody"><span class="postbody">you can still colorcode stuff and read back the pixel that is touched. that requires rendering the scene in a backbuffer and not displaying it. that might be slower (if screencapturing is required) than the following:
<br/>
<br/>
when using a collision detection solution, you use a hirarchy of bounding volumes. and sometimes simplified meshes are used, but we're talking nds here, so meshes wil usually be quite simple.
<br/>
<br/>
first shoot the ray into the world to check what parts are involved (and therefore you get the objects to check), then check with which bounding spheres the ray intersects and take the one object closest to the ray's origin. after that you check for collisions with sub volumes (again spheres or aabbs/obb) and finally, if you really have to have it very exact, you check the primitives (quads, tris etc.) inside the bbs.
<br/>
if you find, that that's not the object selected, check the next object, behind the current one. else, you're done.
<br/>
<br/>
a lot of work, that can be very much optimized, but it should get you on track. it may help to use a rather short ray segment, because else it's potentially a lot of testing for lots of small objects in the background.
<br/>
<br/>
also, there was a thread about this topic like half a year ago. look for it!
<br/>
<br/>
hope it helps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129262 - a128 - Mon May 21, 2007 8:13 am</h4>
    <div class="postbody"><span class="postbody">The Picking example in libnds do not work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129764 - gabebear - Sat May 26, 2007 6:36 am</h4>
    <div class="postbody"><span class="postbody">a128, make sure you have matching libnds and examples, or just make sure you have the latest cvs versions. The picking example works fine for me and I just downloaded the latest cvs examples and libnds. 
<br/>
<br/>
I know some other people had problems with that example and I never figured out exactly what the problem was, but reinstalling devkitpro fixed the problem for them.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
