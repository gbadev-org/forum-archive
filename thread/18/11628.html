<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>MD2 loading - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > MD2 loading</h2>
<div id="posts">
<div class="post">
    <h4>#108196 - Xgame - Mon Nov 06, 2006 4:39 pm</h4>
    <div class="postbody"><span class="postbody">Hi, I need a mode for load md2, but I can't find it!I looked anywere but all the animated loader for md2 have expired in their host. I just need it, or same suggestion for do my own loader</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108231 - Payk - Mon Nov 06, 2006 10:21 pm</h4>
    <div class="postbody"><span class="postbody">U can have my code or better  code a own one...u can leanr much from it ;)
<br/>
<br/>
<a class="postlink" href="http://tfc.duke.free.fr/coding/md2-specs-en.html" target="_blank">http://tfc.duke.free.fr/coding/md2-specs-en.html</a>
<br/>
^^this site is great for it.
<br/>
if you load the mesh and its totaly fucked up dont be shoked!
<br/>
the float there is much bigger then on nds (and fixedpoint too...which i recommand) just do /128 for each vertex and it will look right.
<br/>
But thats to slow for rendering....i recommand you scale down and take the vertices and convert to fixed point.
<br/>
<br/>
If you have wrong textures just toggle S and T...while T needs to be changed like: T=texturewidth -T (pseudo code)
<br/>
<br/>
If its an milkshape md2, u dont need to do that...
<br/>
contact me if its to much for you...but i recommand you to try on your own first...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108292 - Xgame - Tue Nov 07, 2006 3:52 pm</h4>
    <div class="postbody"><span class="postbody">just a question:
<br/>
in libnds which is a function like "fopen",  fclose", "fread" and "fseek"?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108296 - tepples - Tue Nov 07, 2006 4:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Xgame wrote:</b></span></td> </tr> <tr> <td class="quote">just a question:
<br/>
in libnds which is a function like "fopen",  fclose", "fread" and "fseek"?</td> </tr></table><span class="postbody">
<br/>
Those functions are present in <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=10289" target="_blank">libfat</a>, provided that your code mounts the drive first. But conspicuous by its absence are findfirst() and opendir().<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108299 - Xgame - Tue Nov 07, 2006 4:31 pm</h4>
    <div class="postbody"><span class="postbody">no way to include file?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108302 - Payk - Tue Nov 07, 2006 5:17 pm</h4>
    <div class="postbody"><span class="postbody">Sure.
<br/>
Best way is romdiskfs portet/modded by GPF.
<br/>
It uses gba-rom space (means it only works on ez-deluxe,supercard, m3...generally all devices which support gba)
<br/>
<br/>
fopen will then be KOS_fopen.
<br/>
same for the rest. writing isnt possible.
<br/>
root wil be "/rd/"...it support folder structure and every read command like stdio/stdlib...its cool
<br/>
<br/>
<a class="postlink" href="http://gpf.dcemu.co.uk/ndsromdisk.shtml" target="_blank">http://gpf.dcemu.co.uk/ndsromdisk.shtml</a>
<br/>
Its faster then fat and nobody can change content of your game (that easily)...
<br/>
<br/>
Strangely its just a hand full of coders using it. that mac VM from lazyone, all portet things from GPF, and my game are using that as well. I just can recommand it.
<br/>
<br/>
But it doesnt work on following devices:
<br/>
DS-Xtreme,DS-LINK,NINJDS,MK2/3,GBAMP,SC RUMBLEPACK...
<br/>
all things which dont go trough gba slot and dont have the 32MB built in ram to hold roms....but most devices have that. And i am working on a mox between fat/kos...just wait some weeks (got other things todo too).
<br/>
Till then u could use KOS or FAT. As you prefer...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108306 - Xgame - Tue Nov 07, 2006 5:49 pm</h4>
    <div class="postbody"><span class="postbody">rally cool! thank you, i'll try now
<br/>
EDIT
<br/>
how can I use just "#include"model.md2""? It whold be easier.</span><span class="gensmall"><br/><br/>Last edited by Xgame on Tue Nov 07, 2006 6:48 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#108309 - Lazy1 - Tue Nov 07, 2006 6:10 pm</h4>
    <div class="postbody"><span class="postbody">I thought someone had a way of appending the romdisk to the arm9 binary or something. That was supposed to work with non-ram cards.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108318 - Payk - Tue Nov 07, 2006 8:11 pm</h4>
    <div class="postbody"><span class="postbody">Lazy1: Yes? You got more infos?
<br/>
XGame: It wouldnt be easier...no stdio functions.
<br/>
And it would mean that the model is stored in 4MB main ram till the entiry game...not a whise choice</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108331 - tepples - Tue Nov 07, 2006 9:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">I thought someone had a way of appending the romdisk to the arm9 binary or something. That was supposed to work with non-ram cards.</td> </tr></table><span class="postbody">
<br/>
You can try using the 'bin2o' macro that comes with the libnds project template to convert the romdisk to an object file for linking into your project.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108349 - Payk - Tue Nov 07, 2006 11:15 pm</h4>
    <div class="postbody"><span class="postbody">Hmh yeah its nice for smaller projects...but it costs mainram of course...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108392 - Lazy1 - Wed Nov 08, 2006 1:13 pm</h4>
    <div class="postbody"><span class="postbody">I have started working on getting romfs working with the standard I/O functions and it seems to be going pretty well so far.
<br/>
Calling romfsInitDefault() sets everything up so files can be read with extreme ease.
<br/>
<br/>
There is a big problem though, I cannot find a whole lot of documentation on how devoptab works. I've been taking quick looks at libfat here and there but it's not enough.
<br/>
<br/>
Even still, it does read files quite nicely and prints "Hello World!" as expected.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int main( void ) {
<br/>
   static char helloBuffer[ 512 ];
<br/>
   FILE* helloFile = NULL;
<br/>
<br/>
   powerON( POWER_ALL_2D | POWER_SWAP_LCDS );
<br/>
   
<br/>
   irqInit( );
<br/>
   irqEnable( IRQ_VBLANK );
<br/>
   
<br/>
   consoleDemoInit( );
<br/>
   romfsInitDefault( );
<br/>
<br/>
   if ( ( helloFile = fopen( "hello.txt", "rt" ) ) != NULL ) {
<br/>
      fread( helloBuffer, 1, 512, helloFile );
<br/>
      fclose( helloFile );
<br/>
<br/>
      iprintf( "%s\n", helloBuffer );
<br/>
   } else {
<br/>
      iprintf( "File open failed\n" );
<br/>
   }
<br/>
   
<br/>
   while ( 1 ) {
<br/>
      swiWaitForVBlank( );
<br/>
   }
<br/>
      
<br/>
   return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108395 - Xgame - Wed Nov 08, 2006 1:59 pm</h4>
    <div class="postbody"><span class="postbody">for me isn't working. what Have I to do for get it work?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108426 - Lazy1 - Wed Nov 08, 2006 6:24 pm</h4>
    <div class="postbody"><span class="postbody">What are you trying to get to work?
<br/>
Having problems with libfat or romfs?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
