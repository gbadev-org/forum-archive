<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Beginner q: .thumb_func - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Beginner q: .thumb_func</h2>
<div id="posts">
<div class="post">
    <h4>#131328 - sourcerer - Thu Jun 14, 2007 12:08 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
When I check the assembly output from devkitPro on some DS samples I see every function starts with .thumb_func.
<br/>
Does this mean all code runs in thumb mode? That seems odd/not so nice to me?
<br/>
<br/>
Any insights as always appreciated :o)
<br/>
<br/>
Kaj</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131336 - chishm - Thu Jun 14, 2007 1:09 pm</h4>
    <div class="postbody"><span class="postbody">C code is compiled into Thumb instructions by default in the template makefiles. This is specified on the line that reads:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ARCH   :=   -mthumb -mthumb-interwork</td> </tr></table><span class="postbody">
<br/>
It's the -mthumb that does it, by the way. Thumb instructions tend to take up less space and are faster to execute from EXRAM, since it is read on a 16 bit bus. When the code is executed out of cache or ITCM, ARM code is quicker, due to the 32 bit bus and more basic operations being performed by each instruction.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131337 - sourcerer - Thu Jun 14, 2007 1:30 pm</h4>
    <div class="postbody"><span class="postbody">Ah, thanks, that makes sense :o)
<br/>
<br/>
Guess in the end it comes down to getting timers around my code to see what is faster.
<br/>
<br/>
K</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
