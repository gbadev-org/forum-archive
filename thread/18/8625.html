<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>"glPick" :picking, selecting in 3D - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > "glPick" :picking, selecting in 3D</h2>
<div id="posts">
<div class="post">
    <h4>#72389 - ishraam - Sat Feb 18, 2006 5:10 am</h4>
    <div class="postbody"><span class="postbody">I think the DS has no "hardware" method to select an object in 3D, like OpenGL has (I mean when you try so "click" on a 3D object rendered on the touchscreen). Am I wrong? 
<br/>
<br/>
If not, is there a "best" way to do it ? 
<br/>
I have thought about rendering one more pass with only colored untextured &amp; unlit objects, each color acting as an ID. Then it would simply be a matter of coord matching.
<br/>
The "select color pass" would not need to be used/drawn each time, only 1/5 frames for example (not to use dynamic management). 
<br/>
The objects could also have a special version, just like with LOD, with fewer faces to be drawn.
<br/>
<br/>
I think that would fit the purpose.
<br/>
<br/>
Any comment or other idea ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72396 - gladius - Sat Feb 18, 2006 8:05 am</h4>
    <div class="postbody"><span class="postbody">That's one possibility.  I think the more common method is to do the ray casting (cast a ray from the viewer through the scene with the direction determined by the mouse position) yourself.  It's not too hard to code a ray/triangle and ray/sphere intersection routine, and there are a bunch on the web as well.
<br/>
<br/>
For speed you first do ray/sphere intersection with the different objects in the scene, then only if the sphere is hit do you go down to the triangle level if you need accuracy.
<br/>
<br/>
You can also do some spatial subdivision such as octtrees or kd-trees for speed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72440 - tepples - Sat Feb 18, 2006 4:47 pm</h4>
    <div class="postbody"><span class="postbody">If your game has sufficiently general collision detection code, you could reuse that.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72482 - dovoto - Sat Feb 18, 2006 10:13 pm</h4>
    <div class="postbody"><span class="postbody">The DS has a register which tracks which vertices made it past the culling stage and are actualy going to be rendered.  This could easily be used to implement the picking routine presented in gl (just check for a change in vertex count after each object is rendered and you will get a hit/miss, make your view small enough and centered on the possition of interest and you will get a nice 3D selection).
<br/>
<br/>
The challenge comes from freezing the current frame and rendering the picking frame somewhere it wont be seen.  I am not certain of how one might do this other than through video capture techniques.  This would be very useful to some people so investigating it would be worth the time in my opinion.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#72500 - ishraam - Sun Feb 19, 2006 4:01 am</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">gladius</span> : Yup I know about ray casting. But don't like it when I need to implement it all in software. 
<br/>
<br/>
<span style="font-weight: bold">dovoto</span> : That's the "other idea" I was waiting for ^_^.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
