<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Directional Lighting - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Directional Lighting</h2>
<div id="posts">
<div class="post">
    <h4>#171938 - headspin - Sun Jan 03, 2010 12:13 pm</h4>
    <div class="postbody"><span class="postbody">I am trying to setup 4 different colored lights to light up a 2d level made of quads.
<br/>
<br/>
Here is the light code from the Display_List_2 libnds example
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glLight(0, RGB15(31,31,31), 0, floattov10(-1.0), 0);
<br/>
glLight(1, RGB15(31,0,0), 0, floattov10(1) - 1, 0);
<br/>
glLight(2, RGB15(0,31,0), floattov10(-1.0), 0, 0);
<br/>
glLight(3, RGB15(0,0,31), floattov10(1.0) - 1, 0, 0);
<br/>
   
<br/>
//need to set up some material properties since DS does not have them set by default
<br/>
glMaterialf(GL_AMBIENT, RGB15(16, 16, 16));
<br/>
glMaterialf(GL_DIFFUSE, RGB15(16, 16, 16));
<br/>
glMaterialf(GL_SPECULAR, BIT(15) | RGB15(8, 8, 8));
<br/>
glMaterialf(GL_EMISSION, RGB15(16, 16, 16));</td> </tr></table><span class="postbody">
<br/>
<br/>
I cannot seem to get the coloured effect I'm looking for. Something like <a href="http://headsoft.com.au/images/light.png">[Images not permitted - Click here to view it]</a> but probably a bit subtler.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171941 - GugloPWN - Sun Jan 03, 2010 4:20 pm</h4>
    <div class="postbody"><span class="postbody">If your scene is 2D but drawn on textured quads you could use vertex colors to get that effect.
<br/>
<br/>
Basically when you define a vertex you can give it a color by calling glColor3b(int r, int g, int b) values between 0-255 and the texture is blended with what ever color you define.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171942 - kusma - Sun Jan 03, 2010 5:57 pm</h4>
    <div class="postbody"><span class="postbody">If I understand the picture correct, you're trying to get colored volumetric point-lights. Unfortunately, this isn't something the Nintendo DS GPU can do directly, so you'll have to fake it somehow (like GugloPWN suggests).
<br/>
<br/>
Not even your desktop GPU can do it "directly", you'll have to do stuff like ray-matching in shadow-maps for similar effects on PCs, and it's quite slow. That solution is simply out the window on NDS ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171943 - headspin - Sun Jan 03, 2010 7:28 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the feedback guys. I had a feeling the effect I was after was not possible. I guess I could have a quad that covers the screen using a 5 bit alpha and then use the glColor3b to set it different colours of light.
<br/>
<br/>
Anyway it's nice to know I can at least set the colour of a vertex for a similar effect.
<br/>
<br/>
Should be good for doing effects like sunset.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
