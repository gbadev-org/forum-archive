<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>I cant install PAlib, please help. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > I cant install PAlib, please help.</h2>
<div id="posts">
<div class="post">
    <h4>#100315 - spinal_cord - Sun Aug 27, 2006 9:47 am</h4>
    <div class="postbody"><span class="postbody">As the title says, im havibg a little trouble, i installed devkitpro with no errors, and the examples compile properly, it seems to be working fine.
<br/>
I installed palib, and when it comes tp install.bat, i get this -
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\DEVKIT~1\PALIB&gt;install
<br/>
<br/>
C:\DEVKIT~1\PALIB&gt;make clean
<br/>
make clean -C lib/arm7
<br/>
make[1]: Entering directory `/c/DEVKIT~1/PALIB/lib/arm7'
<br/>
clean ...arm7
<br/>
make[1]: Leaving directory `/c/DEVKIT~1/PALIB/lib/arm7'
<br/>
make clean -C lib/arm9
<br/>
make[1]: Entering directory `/c/DEVKIT~1/PALIB/lib/arm9'
<br/>
clean ...PA_Game
<br/>
make[1]: Leaving directory `/c/DEVKIT~1/PALIB/lib/arm9'
<br/>
<br/>
C:\DEVKIT~1\PALIB&gt;make
<br/>
make -C lib/arm7
<br/>
make[1]: Entering directory `/c/DEVKIT~1/PALIB/lib/arm7'
<br/>
ModFile.c
<br/>
make[2]: arm-elf-gcc: Command not found
<br/>
make[2]: *** [ModFile.o] Error 127
<br/>
make[1]: *** [build] Error 2
<br/>
make[1]: Leaving directory `/c/DEVKIT~1/PALIB/lib/arm7'
<br/>
make: *** [all] Error 2
<br/>
<br/>
C:\DEVKIT~1\PALIB&gt;make archive
<br/>
/c/devkitPro/devkitARM/arm-elf/bin/ar -cr lib/libpa7.a  lib/arm7/build/command7.
<br/>
o lib/arm7/build/microphone7.o  lib/arm7/build/ModFile.o lib/arm7/build/PA.o  li
<br/>
b/arm7/build/Sound7.o
<br/>
make: /c/devkitPro/devkitARM/arm-elf/bin/ar: Command not found
<br/>
make: *** [archive] Error 127
<br/>
<br/>
C:\DEVKIT~1\PALIB&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
Have i missed a step?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100321 - josath - Sun Aug 27, 2006 10:58 am</h4>
    <div class="postbody"><span class="postbody">Unfortunately, PAlib is not as well tested as devkitpro is.
<br/>
It looks like you are using an old version of PAlib, as it is trying to use 'arm-elf-...' instead of the newer 'arm-eabi-...'. Try downloading the latest version of PAlib (if you can find it). You wont get much help for PAlib here, I suggest posting on their forums.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100324 - spinal_cord - Sun Aug 27, 2006 11:15 am</h4>
    <div class="postbody"><span class="postbody">I get the same thing with the lates download also.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100371 - gmiller - Sun Aug 27, 2006 4:22 pm</h4>
    <div class="postbody"><span class="postbody">You might want to look at the makefile and see if it defines a "prefix" for the commands (somthing like):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
**********************
<br/>
PREFIX=arm-elf
<br/>
<br/>
CC=$(PREFIX)gcc
<br/>
***************
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
then you could change it to:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
PREFIX=arm-eabi
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Of course it could also me that your PATH environment variable does not include your current ARM tool chain.  To see where it points type the following at the same prompt as where you where doing the make.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
echo $PATH
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Edit:  Sorry I see you are starting at the windows command prompt so the appropriate command is:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
echo %PATH%
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100385 - gmiller - Sun Aug 27, 2006 5:26 pm</h4>
    <div class="postbody"><span class="postbody">I went to source forge and got the library and to build the libraries using the devkitPro tools you need to find the following line in the make files:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
# the prefix on the compiler executables
<br/>
#---------------------------------------------------------------------------------
<br/>
PREFIX         :=   arm-elf-
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
and change the "arm-elf-" to "arm-eabi-".  Of course if there are any changes in the command line syntax this will not help, but it will make it run the correct ARM tool.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100388 - spinal_cord - Sun Aug 27, 2006 5:36 pm</h4>
    <div class="postbody"><span class="postbody">it is that already<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100390 - gmiller - Sun Aug 27, 2006 5:40 pm</h4>
    <div class="postbody"><span class="postbody">Your error message:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make[2]: arm-elf-gcc: Command not found
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
makes me think not ...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100392 - spinal_cord - Sun Aug 27, 2006 5:52 pm</h4>
    <div class="postbody"><span class="postbody">the file isnt anywhere on my drive! perhaps something didnt install properly.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100402 - gmiller - Sun Aug 27, 2006 6:28 pm</h4>
    <div class="postbody"><span class="postbody">Are you using devkitPro, and does the file arm-eabi-gcc.exe exist?  If so then you need to make the changes to the makefile as I stated.  I downloaded the library and make the changes and it starts to work but there is a problem building the arm7 code PA.c.  Having never looked at this code before I am not sure why it can't find the symbol DISP_SR which is defined in the ndslib/include/interrupts.h file which I believe it is including.  But I did not check the other required code for PAlib so I might be missing more.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100405 - gmiller - Sun Aug 27, 2006 6:41 pm</h4>
    <div class="postbody"><span class="postbody">I guess I am just stupid and the real declaration of the DISP_SR is in registers_alt.h which you would need to include int the source file PA.c so make it work.  Otherwise the new names for those registers are REG_?? so the new name should be REG_DISP_SR I guess.  I am going to try that now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100416 - gmiller - Sun Aug 27, 2006 8:02 pm</h4>
    <div class="postbody"><span class="postbody">Ok to get the library to build (this all I have done) you need to change the following files:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
./include/nds/arm9/PA_Interrupt.h
<br/>
./include/nds/arm9/PA_Sprite.h
<br/>
./include/nds/arm9/PA_SpriteDual.h
<br/>
./lib/arm7/Makefile
<br/>
./lib/arm7/PA.c
<br/>
./lib/arm9/PA/PA_Mode7.c
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
in PA_Interrupt.h add the #ifdef wrapper around the REG_VCOUNT decl.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifndef REG_VCOUNT^M
<br/>
#define REG_VCOUNT _REG16(0x04000006)^M
<br/>
#endif^M
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
In the PA_Sprite.h change the definition of OBJ_X to OBJ_X_MASK and OBJ_Y to OBJ_MASK,  then change any reference to the original to the new name.
<br/>
<br/>
In the file PA_SpriteDual change the references to OBJ_X and OBJ_Y to OBJ_X_MASK and OBJ_Y_MASK as well.
<br/>
<br/>
The Makefile in arm7 needs the PREFIX changed as in the original message.
<br/>
<br/>
<br/>
In PA.c change the line that reference DISP_SR to:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
REG_DISPSTAT = DISP_VBLANK_IRQ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
In PA_Mode7.c comment out the two lines:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define INT_MIN 0
<br/>
#define INT_MAX 2147483647
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This will get the library to build. There may be an issue with the code change in PA.c (I would have assume it would have been REG_DISPSTAT |= DISP_VBLANK_IRQ) but the original did the assignment to DISP_SR.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100440 - spinal_cord - Sun Aug 27, 2006 11:02 pm</h4>
    <div class="postbody"><span class="postbody">I got my old setup working again - devkitpro 1.2.7 with palib040306. Ill try what you said in a day or two, but im a bit tired right now.  youd think when people release newer versions of thing, theyd make sure they work first. oh well.
<br/>
<br/>
thanks for the help.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100444 - gmiller - Sun Aug 27, 2006 11:16 pm</h4>
    <div class="postbody"><span class="postbody">The problem is that the development kit changed and the makefile and code has not changed to keep up.  Of coure the changes that I indicated are NOT backwards compatable but could be made so.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
