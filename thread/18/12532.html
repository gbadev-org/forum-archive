<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>text backgrounds using vram banks e+ - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > text backgrounds using vram banks e+</h2>
<div id="posts">
<div class="post">
    <h4>#119512 - VRMLGHOST - Fri Feb 23, 2007 10:20 pm</h4>
    <div class="postbody"><span class="postbody">I'm curious if its possible to use E&amp;F for 2 main text backgrounds, and H&amp;I for sub text backgrounds. 
<br/>
My understandings of the background control registers suggests their are 5 bits(32) for addressing into maps and 4 bits(16) for addressing into tiles. and guess therefore that they have to come first before any bitmap(ERBs) backgrounds.
<br/>
<br/>
can anyone explain this?
<br/>
<br/>
Also in the following code, ive specified VRAM_A_MAIN_BG_0x6060000, does that then mean that BG_BMP_BASE(8) would then point to bank E ?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
videoSetMode(   MODE_5_2D | 
<br/>
   DISPLAY_BG0_ACTIVE | 
<br/>
   DISPLAY_BG1_ACTIVE | 
<br/>
   DISPLAY_BG2_ACTIVE | 
<br/>
   DISPLAY_SPR_ACTIVE|
<br/>
   DISPLAY_SPR_1D_LAYOUT);   
<br/>
<br/>
   vramSetBankA( VRAM_A_MAIN_BG_0x6060000 );
<br/>
   vramSetBankB( VRAM_B_MAIN_SPRITE );
<br/>
   vramSetBankE( VRAM_E_MAIN_BG );
<br/>
   vramSetBankF( VRAM_F_MAIN_BG );
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119513 - GPFerror - Fri Feb 23, 2007 10:24 pm</h4>
    <div class="postbody"><span class="postbody">here is how i use H&amp;I for text for my libSDL port
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">    powerON(POWER_ALL);
<br/>
   irqInit();
<br/>
   irqSet(IRQ_VBLANK, on_irq_vblank); 
<br/>
   irqEnable(IRQ_VBLANK);
<br/>
videoSetMode(MODE_6_2D| DISPLAY_BG2_ACTIVE); 
<br/>
videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
vramSetMainBanks(VRAM_A_MAIN_BG,VRAM_B_MAIN_BG,VRAM_C_MAIN_BG,VRAM_D_MAIN_BG);
<br/>
   vramSetBankH(VRAM_H_SUB_BG);
<br/>
   vramSetBankI(VRAM_I_LCD);
<br/>
    SUB_BG0_CR = BG_MAP_BASE(8);
<br/>
BG_PALETTE_SUB[255] = RGB15(31,31,31);
<br/>
consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(8), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
      BG2_CR = BG_BMP8_1024x512;
<br/>
        BG2_XDX = ((width / 256) &lt;&lt; 8) | (width % 256) ;
<br/>
        BG2_XDY = 0; 
<br/>
        BG2_YDX = 0;
<br/>
        BG2_YDY = ((height / 192) &lt;&lt; 8) | ((height % 192) + (height % 192) / 3) ;</td> </tr></table><span class="postbody">
<br/>
<br/>
Probably way overkill for what you need, but maybe helpfull.
<br/>
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119532 - VRMLGHOST - Sat Feb 24, 2007 1:04 am</h4>
    <div class="postbody"><span class="postbody">cheers GPFerror :D. But .......
<br/>
I should probably have highlighted that I want an extended background, sprites and tiles on both main and sub screen (I only included half the code - my bad). 
<br/>
<br/>
So I'm trying to use the later banks for the text background. But im not sure if i can in this case, and either way how to manage it. I think I may be a little confused exactly how the vram ties into the bg control registers. [I could get away without doing this in my current game, however it will help get a better understanding of whats actually going on]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
