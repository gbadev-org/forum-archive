<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ScreenshotCode for taking Screenshot ON DS and save on Card? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > ScreenshotCode for taking Screenshot ON DS and save on Card?</h2>
<div id="posts">
<div class="post">
    <h4>#103686 - pas - Sat Sep 23, 2006 9:31 pm</h4>
    <div class="postbody"><span class="postbody">What do you think would it be able to do a Program like discussed here ?:
<br/>
<a href="http://www.m3-forum.com/viewtopic.php?p=36876#36876" target="_blank">http://www.m3-forum.com/viewtopic.php?p=36876#36876</a>
<br/>
<br/>
Please reply and say what you think about this:
<br/>
<br/>
Pas</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103690 - OOPMan - Sat Sep 23, 2006 9:45 pm</h4>
    <div class="postbody"><span class="postbody">Erm, I take it this is primarily meant for use with roms?
<br/>
<br/>
That's what it looks like from the M3 forum...
<br/>
<br/>
Possibly that makes discussing it here a bad idea...
<br/>
<br/>
Is the code possible? No idea...<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103695 - rmco2003 - Sat Sep 23, 2006 10:30 pm</h4>
    <div class="postbody"><span class="postbody">I think some kind of code to generate screenshots of your homebrew functioning and saving to a CF/SD card would be pretty useful, and plus it'd remove the need for blurry digital camera shots of the screens.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103697 - OOPMan - Sat Sep 23, 2006 10:54 pm</h4>
    <div class="postbody"><span class="postbody">It might be a better idea to just write it as a library that provides screen capture functions from a framebuffer...
<br/>
<br/>
I'm not really certain, but I suspect that the "extra features" that devices like the M3 and SuperCard provide are reliant, to some extent, on some feature of said device. Which means that appending some extra chunk of code to your rom probably wouldn't work without replacing said feature...
<br/>
<br/>
But, yah, I don't really know, I'm just guessing...
<br/>
<br/>
Anyone else with more knowledge have any ideas?<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103702 - Lick - Sat Sep 23, 2006 11:32 pm</h4>
    <div class="postbody"><span class="postbody">The DS has built-in <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsvideocaptureandmainmemorydisplaymode" target="_blank">display capturing</a>.
<br/>
<br/>
However, you can't edit or patch other programs to save screenshots. You'll have to ask the developer to add this feature or if the project is opensource, you could add the code yourself.
<br/>
<br/>
Oh, and don't compare the PSP with the DS! It's a completely different piece of hardware. ;) 
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103704 - HyperHacker - Sat Sep 23, 2006 11:36 pm</h4>
    <div class="postbody"><span class="postbody">Sounds like a great idea. Dipstar and Action Replay already do similar, loading some small chunk of code into RAM and patching the game to execute it. All you'd really need to do is patch a VBlank handler or something to call your routine, have it check for a button press, and use the display capture to write a screenshot to SRAM. (Or perhaps easier, just dump all of VRAM and have a program reconstruct a screenshot out of it; this way you don't need to fiddle with screen capture at all which could be difficult if the game were using it.)
<br/>
Fitting in FATLib would be difficult, so at the expense of losing GBAMP support, I'd just have it write the screenshot to SRAM. This would work with flash carts, Supercard and M3, and as a bonus, all of these could be used to contain the code itself so you don't need to patch anything into RAM.
<br/>
<br/>
I imagine this could easily be made to work with commercial DS cards since they all use the same library (real cards even, not yarr). Homebrew might be more difficult but it could be designed such that apps can call the hook manually rather than being patched, so at least new apps could be made compatible with it.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103780 - Mrshlee - Sun Sep 24, 2006 3:54 pm</h4>
    <div class="postbody"><span class="postbody">LiraNuna has coded this function for homebrew.. so has dynastab (who has disapeared) 
<br/>
<br/>
The code is floating around.<br/>_________________<br/><a class="postlink" href="http://MrShlee.com/" target="_blank">MrShlee.com</a>
<br/>
Projects
<br/>
<a class="postlink" href="http://dev-scene.com/" target="_blank">Dev-Scene</a>
<br/>
<a class="postlink" href="http://MyTechpedia.com/" target="_blank">MyTechpedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103976 - pas - Mon Sep 25, 2006 8:40 pm</h4>
    <div class="postbody"><span class="postbody">I just meant that someone could maybe make a Program (that runs under Windows) and ADDS the Code needed for Screen Capturing to the Homebrew oder maybe something similar (maybe called R****O*****M ? )
<br/>
<br/>
I just would like this cause making Screenshots on the DS can come in Handy everytime...
<br/>
<br/>
Greets:
<br/>
<br/>
Pas</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104001 - josath - Mon Sep 25, 2006 9:56 pm</h4>
    <div class="postbody"><span class="postbody">cReDiAr knows how to patch a commercial game without using illegal roms, his method only works with an actual game in the NDS slot. basically it works like:
<br/>
1. boot the loader from the GBA slot
<br/>
2. load the nds game binaries from the NDS slot
<br/>
3. patch the nds game binaries
<br/>
4. execute the nds game binaries
<br/>
<br/>
currently, he is patching it to do things like infinite ammo etc, but that should be extensible to do screencaptures.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104035 - ecurtz - Tue Sep 26, 2006 2:50 am</h4>
    <div class="postbody"><span class="postbody">Even if you patched the ROM it would only work if there was an empty bank of video RAM to capture the data into, this seems pretty unlikely in most games. AFAIK there is no other way to get to the contents of VRAM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104092 - pas - Tue Sep 26, 2006 3:18 pm</h4>
    <div class="postbody"><span class="postbody">@josath:
<br/>
This sounds interesting, but if I understand it right then We would need a Gba AND a NDS cart at once to do that, right ? Is there really no way to do it with only a Gba or only NDS one ?
<br/>
<br/>
@ecurtz:
<br/>
<br/>
And why shoudn't there be any Videoram free ?
<br/>
<br/>
Maybe we should ask Darkfader or Chisim about this... Or ?
<br/>
<br/>
Greets:
<br/>
<br/>
Pas</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104094 - Sausage Boy - Tue Sep 26, 2006 3:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">This sounds interesting, but if I understand it right then We would need a Gba AND a NDS cart at once to do that, right ? Is there really no way to do it with only a Gba or only NDS one?</td> </tr></table><span class="postbody">
<br/>
<br/>
For taking screenshots of homebrew, the developer can add a screenshot function, or you could just make a mockup screenshot. For commercial games, you'd probably have the nds cart, rigt? And most homebrew running solutions are gba slot based, so no problems there.
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">And why shoudn't there be any Videoram free ? </td> </tr></table><span class="postbody">
<br/>
<br/>
Because a commercial game likely pushes the hardware pretty hard, and leaving a free vram bank would be a huge waste. Besides, you can only capture from the main core, right ecurtz?<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104212 - HyperHacker - Wed Sep 27, 2006 5:43 am</h4>
    <div class="postbody"><span class="postbody">Can you not dump VRAM to SRAM and have a program construct a screenshot out of it later? You shouldn't need the video capture system to just copy the contents of VRAM.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104220 - ecurtz - Wed Sep 27, 2006 6:15 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Because a commercial game likely pushes the hardware pretty hard, and leaving a free vram bank would be a huge waste. Besides, you can only capture from the main core, right ecurtz?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah, and yeah. Both have exceptions, I'm sure. You could in theory capture 2D graphics or the subscreen by reading all the registers and knowing where to grab all the information, but you'd be better off with an emulator at that point. There's no (accessible) VRAM in the sense of a place the pixels are stored, the only way to get to that is the capture mechanism, or else the capture stuff wouldn't exist.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
