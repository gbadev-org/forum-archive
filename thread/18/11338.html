<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Interesting Bug - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Interesting Bug</h2>
<div id="posts">
<div class="post">
    <h4>#104872 - TheWopr - Tue Oct 03, 2006 6:57 pm</h4>
    <div class="postbody"><span class="postbody">I have a program that one of its first tasks is to draw a blue background on the main screen in MODE_5_2D.  I accomplish this by doing, 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void Game::drawBackground() {               //Draws Background, a fullscreen of blue
<br/>
   for(int i = 0; i &lt; 256 * 256; i++)
<br/>
      BG_GFX[i] = RGB15(0,0,31) | BIT(15);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
My game runs ok on an emulator (no$gba) using this but not on hardware.  While trying to find a solution to this I stumbled upon this bug.  Whenever I change my color to anything other than 0,0,31 it succesfully draws the background but it doesn't run the game, it freezes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void Game::drawBackground() {               //Draws Background, a fullscreen of blue
<br/>
   for(int i = 0; i &lt; 256 * 256; i++)
<br/>
      BG_GFX[i] = RGB15(0,31,31) | BIT(15);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've attached all my source, and if anyone could possibly try to test it on hardware too that would be great because it doesn't work for me but maybe someone else might be able to get it right.
<br/>
<br/>
<a href="http://rapidshare.de/files/35372125/TheWoprProject.zip.html" target="_blank">http://rapidshare.de/files/35372125/TheWoprProject.zip.html</a></span><span class="gensmall"><br/><br/>Last edited by TheWopr on Tue Oct 03, 2006 9:10 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#104879 - Cearn - Tue Oct 03, 2006 7:59 pm</h4>
    <div class="postbody"><span class="postbody">The game doesn't freeze, the players just don't move. You may have drawn the background in another color, but in Game::checkCollisions() you're testing against RGB(0,0,31), which means you collide immediately. simple solution would be to have a BG_COLOR #define that you check, rather than literals everywhere.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
