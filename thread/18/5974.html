<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Space Invaders Emulator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Space Invaders Emulator</h2>
<div id="posts">
<div class="post">
    <h4>#45143 - doublec - Tue Jun 07, 2005 11:27 pm</h4>
    <div class="postbody"><span class="postbody">I took a break from working on tutorials. A first cut at an emulator of Space Invaders is at:
<br/>
<br/>
<a href="http://www.double.co.nz/nintendo_ds/space_invaders/index.html" target="_blank">http://www.double.co.nz/nintendo_ds/space_invaders/index.html</a>
<br/>
<br/>
I haven't implemented screen scaling yet so to fit things as best I could I've set it up so you have to rotate the DS to play. The width of the DS screen is the same height as the arcade machine. Unfortunately you lose 30 pixels of width so I definitely need to scale things. It's still playable though and is quite fun. 
<br/>
<br/>
Includes sound. It switches the screens off and pauses when the lid is closed.
<br/>
<br/>
Source will be released in the next update. Hopefully I'll have worked out how best to fit the arcade screen into the DS's more limited screen space. Any thoughts on that? Use both screens for full height? Or just scale? I don't suppose there's any hardware scaling in framebuffer mode...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45163 - FourScience - Wed Jun 08, 2005 4:57 am</h4>
    <div class="postbody"><span class="postbody">Sounds cool and looks good. I am not much of an arcade buff, but I would recommend arranging the screens in whatever way is most playable. I only played Space Invaders on the TI-99 system (off a cartridge), and it was a good kick I'd like to spend time with again, on the DS. Fyi, there's actually a <a class="postlink" href="http://ds.ign.com/objects/728/728329.html" target="_blank">very commercial release</a> of Space Invaders for the DS, but the reviews I read said it was lackluster.
<br/>
<br/>
As for holding the DS sideways, I am trying that myself. I'm doing a Pong clone, based, quite appreciatively, on your demo code. It's held sideways for 2-players to use UP/DOWN and X/B for controls. I read your tutorials 1-3 and jumped straight in and after 3 hours I have everything but collision detection on the paddles (for the ball). It's all pixel for pixel drawing, as I'm not much for mocking up my own sprites. I wouldn't be so (relatively) far if it wasn't for your help.
<br/>
<br/>
I figure I'll make it work sideways, then I'll convert the project to use both screens for the action for single-player mode. Shouldn't be too hard to try both, for pong or Space Invaders. Depending on how you are drawing the aliens though it might take a little more reworking for yours. I'm going to try to have both options though, in the end.<br/>_________________<br/>Work in progress: <a class="postlink" href="http://dual-soft.com" target="_blank">Dual-Soft.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45166 - doublec - Wed Jun 08, 2005 5:21 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the pointer to the commercial game, I wasn't aware of that. I think I made a mistake making the ROM part of the download. In the next release I'll remove the ROM and give instructions on how to create the GBFS file to build the ROM and final nds and leave it up to people to supply the ROM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45177 - FluBBa - Wed Jun 08, 2005 8:52 am</h4>
    <div class="postbody"><span class="postbody">I use HBlank DMA writing to the scroll registers in all my emulators but if you use a bitmapped mode you can probably do some tricks to scale the image while drawing it.<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45372 - doublec - Fri Jun 10, 2005 1:01 am</h4>
    <div class="postbody"><span class="postbody">To allow the user to supply the ROM for the game I'm considering either:
<br/>
<br/>
1) Supply a batch/script file for the user to run that appends their ROM to the executable.
<br/>
<br/>
or
<br/>
<br/>
2) Have them upload the ROM to their cartridge as a saved game. Then I read the ROM from there.
<br/>
<br/>
I'm leaning towards number two. Any thoughts, or other approaches.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45375 - josath - Fri Jun 10, 2005 1:13 am</h4>
    <div class="postbody"><span class="postbody">2) is no good for those of us with a free "neoflash" cart, as it has zero support for gba sram :'(
<br/>
<br/>
What I think may work, is this:
<br/>
distribute the arm7.bin &amp; arm9.bin &amp; ndstool, then the script appends the rom to the arm9.bin, and makes an .nds from that.
<br/>
Only way this won't work is if your arm9.bin+rom is too big to fit in memory. but that shouldn't be a problem with old games like space invaders i think.
<br/>
soemthing like:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">copy /b arm9.bin + sinvade.rom realarm9.bin
<br/>
ndstool -c sinvade.nds -7 arm7.bin -9 realarm9.bin</td> </tr></table><span class="postbody">
<br/>
<br/>
Then just start looking in main ram for the sinvaders rom (main ram is what, 0x02000000  or something)
<br/>
<br/>
This method should make it both work with wmb and with multi-nds loaders.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45376 - doublec - Fri Jun 10, 2005 1:21 am</h4>
    <div class="postbody"><span class="postbody">That looks like the best approach. Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45486 - tepples - Sat Jun 11, 2005 4:54 am</h4>
    <div class="postbody"><span class="postbody">Yes, appending the GBFS file to the arm9 binary would work under three conditions: <ul><li>Do not use the .sbss segment provided by devkitARM, as it will overlap the location of the GBFS file. (This also applies to multiboot programs on the Game Boy Advance.) </li><li>Modify GBFS so that the second search limit is 0x02400000 (end of DS EWRAM, 4 MiB in size) rather than 0x02040000 (end of GBA EWRAM, 0.25 MiB in size).</li><li>Run 'padbin 256 arm9.bin' before you append the GBFS archive. </li></ul> Or if the restriction against .sbss doesn't work well for you, you could just use 'bin2s' (included with recent GBFS releases) to include your GBFS file in the ARM9 binary.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45578 - doublec - Sun Jun 12, 2005 4:48 am</h4>
    <div class="postbody"><span class="postbody">I've updated the space invaders emulator:
<br/>
<br/>
<a href="http://www.double.co.nz/nintendo_ds/space_invaders/index.html" target="_blank">http://www.double.co.nz/nintendo_ds/space_invaders/index.html</a>
<br/>
<br/>
It no longer includes the ROM and has instructions on how to add it. I give the option of using gbfs and appending it to the binary or loading it into SRAM using the flash cartridge software. If I don't find the file in the gbfs, I look for it in SRAM.
<br/>
<br/>
I've also added hardware scaling. This enables the game to be played in the usual DS manner (ie. held horizontally). Using the 'select' key you can switch between different display methods. Vertical, horizontal, scaled or unscaled. It includes stretching the game across both screens scaled or unscaled.
<br/>
<br/>
I've stll to change it so it works with multi boot and direct wifime transfers without using the flash card though.
<br/>
<br/>
The hardware scaling/rotating support of the rotation backgrounds is great! What need is there for a framebuffer mode with that facility?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
