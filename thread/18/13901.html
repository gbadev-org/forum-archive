<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Using More Object VRAM - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Using More Object VRAM</h2>
<div id="posts">
<div class="post">
    <h4>#137372 - The_Perfection - Fri Aug 10, 2007 11:36 pm</h4>
    <div class="postbody"><span class="postbody">Hello all.  I'm attempting to use VRAM bank E for main OVRAM.  Now, this gives me 64Kb, right?  How do I use it all?  As far as I can tell, I can still only put the tile index of a sprite to 1023, which should get me an extra 63 tiles if I place 8t*8t data right on that boundry.  Is there a way to use the other half of the data bank?
<br/>
<br/>
I have set my OVRAM to be used in 1D mode as well as the 64Kb mode (as specified by GBATek).
<br/>
<br/>
Yay.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137375 - josath - Sat Aug 11, 2007 12:09 am</h4>
    <div class="postbody"><span class="postbody">See here:
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#dsvideoobjs" target="_blank">http://nocash.emubase.de/gbatek.htm#dsvideoobjs</a>
<br/>
<br/>
TileVramAddress = TileNumber * BoundaryValue
<br/>
<br/>
so you basically want to set the bits to get a bigger boundryValue, to access more vram. Engine A can use up to 256KB, Engine B only 128KB</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137416 - The_Perfection - Sat Aug 11, 2007 5:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>josath wrote:</b></span></td> </tr> <tr> <td class="quote">TileVramAddress = TileNumber * BoundaryValue </td> </tr></table><span class="postbody">
<br/>
I think I understand that much.  (That's just getting the address to put data, right?)  
<br/>
<br/>
What I'm talking about is the objects attribute 2.  The tile index number can only go up to 1023, can't it?  Or has that changed?  'Cuz if it only goes up to 1023, what's the point in allocating more than 32KB for it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137422 - Cearn - Sat Aug 11, 2007 6:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>The_Perfection wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>josath wrote:</b></span></td> </tr> <tr> <td class="quote">TileVramAddress = TileNumber * BoundaryValue </td> </tr></table><span class="postbody">
<br/>
I think I understand that much.  (That's just getting the address to put data, right?)  
<br/>
<br/>
What I'm talking about is the objects attribute 2.  The tile index number can only go up to 1023, can't it?  Or has that changed?  'Cuz if it only goes up to 1023, what's the point in allocating more than 32KB for it?</span></td> </tr></table><span class="postbody">
<br/>
As far as I understand it, there are still 10 bits, but the indexing has been changed. With, say, DISPLAY_SPR_1D_SIZE_64, you count in units of 64 bytes, not 32. Effectively, you'd be counting in 8bpp tiles instead of 4bpp tiles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137426 - Lordus - Sat Aug 11, 2007 6:51 pm</h4>
    <div class="postbody"><span class="postbody">Example: 
<br/>
if you want to display 128 32x32 sprites in 4bit depth, you would need
<br/>
<br/>
16tiles*32bytes = 512bytes/sprite
<br/>
<br/>
now you could set the tile index in attribute2 to 0,16,32,... and write the tile data to 0, 512, 1024, ...
<br/>
<br/>
so with 32kb you could just display 64 sprites maximum.
<br/>
<br/>
If you specify DISPLAY_SPR_1D_SIZE_64 and still write the tile data to 0, 512, 1024, you would have to set the tile index in attribute2 to 0, 8, 16, ...
<br/>
and the 2d engine will then still use the right offsets, because of the specified boundary. This way you can effectively use 64kb for tile data.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137434 - The_Perfection - Sat Aug 11, 2007 8:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cearn wrote:</b></span></td> </tr> <tr> <td class="quote">With, say, DISPLAY_SPR_1D_SIZE_64, you count in units of 64 bytes, not 32.</td> </tr></table><span class="postbody">
<br/>
So, in 32K mode, you would count in 1 s-tile increments, 64K mode, 2 s-tiles, 128K, 4 s-tiles, and 256K, 8 s-tiles?  That makes sense... sorta.  But it also limits some things.  Like not being able to set an 8*8 sprite to s-tile 1.  I think.
<br/>
<br/>
Well, if that is indeed the case, looks like I'll have to waste some VRAM then.
<br/>
<br/>
Thanks for all the help!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
