<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Secure CRC16 problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Secure CRC16 problem</h2>
<div id="posts">
<div class="post">
    <h4>#54028 - BGNG - Wed Sep 14, 2005 9:20 pm</h4>
    <div class="postbody"><span class="postbody">I have a problem with the Secure CRC16 checksum in the headers of Nintendo DS ROMs. I can correctly calculate the Logo CRC16 and Header CRC16, however. Since the Header CRC16 uses the pre-calculated bytes of the Secure CRC16 checksum in ITS checksum, I know that the value in the Secure CRC16 are correct. Yet, when I calculate it, it fails.
<br/>
<br/>
The documentation I have says that bytes 0x4000 to 0x7FFF are used for the Secure CRC16, but I can't seem to get it to work. The same algorithm, however, correctly calculates the Logo and Header CRC16s.
<br/>
<br/>
I've attached the region of an anonymous ROM file from 0x4000 to 0x7FFF. The checksum in the file's header is 0xCAC3, but when I calculate it, I keep getting 0x8582.
<br/>
<br/>
Anyone able to help?
<br/>
<br/>
The file: <a class="postlink" href="http://www.emutalk.net/attachments/programming/28045-crc16-help-4000-7fff.zip?d=1126725734" target="_blank">4000-7FFF.zip</a>
<br/>
<br/>
(Note: This may be due to cartridge encryption, but the ROM filename table can be extracted correctly. Does, by chance, the FAT not get encrypted?)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
