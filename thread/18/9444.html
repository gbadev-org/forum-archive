<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>limit of iwram? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > limit of iwram?</h2>
<div id="posts">
<div class="post">
    <h4>#81894 - knight0fdragon - Tue May 02, 2006 6:39 pm</h4>
    <div class="postbody"><span class="postbody">g:\devkitpro\devkitarm\arm-elf\bin\ld.real.exe: address 0x381005c of g:/DSCode/template/template/arm7/template.arm7.elf section .data is not within region iwram
<br/>
g:\devkitpro\devkitarm\arm-elf\bin\ld.real.exe: address 0x38113d4 of g:/DSCode/template/template/arm7/template.arm7.elf section .bss is not within region iwram
<br/>
<br/>
i get these two errors and I wonder what is causeing them.
<br/>
<br/>
I tried taking out variables to make it smaller, any other methods im not thinking of, or am i missing the point completely?<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81895 - josath - Tue May 02, 2006 6:55 pm</h4>
    <div class="postbody"><span class="postbody">so it seems you only get 64KB of data on the arm7 with the defaul devkitarm linker scripts. 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ds_arm7.ld wrote:</b></span></td> </tr> <tr> <td class="quote">iwram   : ORIGIN = 0x03800000, LENGTH = 64K</td> </tr></table><span class="postbody">
<br/>
<br/>
It looks like you are only over by about 5KB, so you almost have it fitting. Are you compiling in data files into the arm7 binary? make sure you don't have any giant arrays or anything.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81896 - knight0fdragon - Tue May 02, 2006 6:59 pm</h4>
    <div class="postbody"><span class="postbody">its the new wifi lib doing it it seems<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81897 - tepples - Tue May 02, 2006 7:00 pm</h4>
    <div class="postbody"><span class="postbody">If you're using the default libnds linker script, link your audio files into the ARM9 binary and then IPC their addresses over to the ARM7 for playback. If you want to learn IPC before you get sampled sound to work, try getting the tone generators to work first.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81903 - melw - Tue May 02, 2006 7:19 pm</h4>
    <div class="postbody"><span class="postbody">I hit also the iwram limit after adding dswifi library to my projects. If you're using arm-g++ for compiling the arm7, an easy solution is to change to arm-gcc - arm7 binaries tend to be smaller and at least I didn't really use any C++ specific on that side anyways.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81905 - tepples - Tue May 02, 2006 7:21 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, the exception and RTTI support brought in by g++ really bloats the binary. While compiling one of the drunkencoders examples (yay, I just made my first DS program!), I managed to shave a 100 KB .nds file to 7 KB merely by compiling it as C99 instead of C++.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81907 - knight0fdragon - Tue May 02, 2006 7:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">If you're using the default libnds linker script, link your audio files into the ARM9 binary and then IPC their addresses over to the ARM7 for playback. If you want to learn IPC before you get sampled sound to work, try getting the tone generators to work first.</td> </tr></table><span class="postbody">
<br/>
<br/>
This is what I did in the first place
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I hit also the iwram limit after adding dswifi library to my projects. If you're using arm-g++ for compiling the arm7, an easy solution is to change to arm-gcc - arm7 binaries tend to be smaller and at least I didn't really use any C++ specific on that side anyways.</td> </tr></table><span class="postbody">
<br/>
<br/>
how would i go about doing that in the make file?<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81908 - ficedula - Tue May 02, 2006 7:30 pm</h4>
    <div class="postbody"><span class="postbody">Seems like a change in devkitpro/gcc has triggered it too - the wifi library gives me this error too (compiling the ARM7 binary in C++ mode), but with devkitpro r17, the binary is fine; r18 and/or the new version of gcc in r18 seems to produce larger binaries for some reason. 
<br/>
<br/>
(The ARM9 binary is larger, too, that just doesn't cause errors...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81909 - knight0fdragon - Tue May 02, 2006 7:41 pm</h4>
    <div class="postbody"><span class="postbody">bah i dunno ill have to work something out
<br/>
<br/>
g:\devkitpro\devkitarm\arm-elf\bin\ld.real.exe: address 0x38101cc of g:/DSCode/template/template/arm7/template.arm7.elf section .data is not within region iwram
<br/>
g:\devkitpro\devkitarm\arm-elf\bin\ld.real.exe: address 0x3811548 of g:/DSCode/template/template/arm7/template.arm7.elf section .bss is not within region iwram
<br/>
<br/>
<br/>
thats what i got it knocked down to, any ideas on ways to make my file smaller?  cant get it to compile in C for some odd reason<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81942 - wintermute - Tue May 02, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">Try adding -fno-exceptions -fno-rtti to CXXFLAGS in the arm7 makefile. Failing that you could try renaming the .cpp files to .c
<br/>
<br/>
I'm also considering using the switchable iwram purely for arm7 which would give us an extra 32k. FWIW Nintendo seem to do this for their arm7 binaries too and I don't think anyone has come up with a good use for that memory.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#81963 - knight0fdragon - Wed May 03, 2006 2:58 am</h4>
    <div class="postbody"><span class="postbody">that seemed to work.... what is the dangers of doing this<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82007 - agentq - Wed May 03, 2006 11:58 am</h4>
    <div class="postbody"><span class="postbody">wintermute, I'm using the switchable IWRAM in ScummVM on the ARM9 for some look-up tables, which really helps my performance, so it would be good if using the IWRAM as extra ARM7 RAM is optional.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82013 - wintermute - Wed May 03, 2006 1:00 pm</h4>
    <div class="postbody"><span class="postbody">how much space do your tables need?
<br/>
<br/>
Would they fit in itcm or dtcm?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
