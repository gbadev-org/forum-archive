<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>One button On/Off help! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > One button On/Off help!</h2>
<div id="posts">
<div class="post">
    <h4>#150003 - jay001 - Mon Jan 28, 2008 7:31 pm</h4>
    <div class="postbody"><span class="postbody">i want to make it so the start and select button control the top and bottom screen light. 
<br/>
<br/>
i plan to have the buttons like this;
<br/>
start for top on, start for top off. 
<br/>
select for bottom on, select for bottom off.
<br/>
<br/>
at first i thought this would be simple but i havnt got a clue how to do it.
<br/>
<br/>
i dont know how to make one button turn something on with one press and off with a second press.
<br/>
<br/>
sorry if this is stupid but im learning.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#150008 - eKid - Mon Jan 28, 2008 8:21 pm</h4>
    <div class="postbody"><span class="postbody">In other words, you want select to toggle the bottom backlight, and start to toggle the top backlight. You can do this with a simple exclusive-or with the power management registers. Here are two example functions (I hope your using libnds).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void toggleTopBacklight()
<br/>
{
<br/>
    writePowerManagement( readPowerManagement(PM_CONTROL_REG) ^ PM_BACKLIGHT_TOP );
<br/>
}
<br/>
void toggleBottomBacklight()
<br/>
{
<br/>
    writePowerManagement( readPowerManagement(PM_CONTROL_REG) ^ PM_BACKLIGHT_BOTTOM );
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
The problem is that the power management functions can only be used on the ARM7. So what you need to do is read the keys on the ARM9 and somehow signal the ARM7 to call the functions.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
