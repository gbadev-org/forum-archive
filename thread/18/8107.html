<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>warning problems - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > warning problems</h2>
<div id="posts">
<div class="post">
    <h4>#66845 - radicalrandy - Fri Jan 13, 2006 9:13 pm</h4>
    <div class="postbody"><span class="postbody">Hi I'm getting these warnings that say intov16 or floatof32 is deprecated.  Anybody know what that means?  I think that this is making it so that my input keys aren't calculating correctly.
<br/>
<br/>
Does anybody know how I can fix it so that these warnings don't appear no more, I have no clue as to what they mean.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66848 - Joat - Fri Jan 13, 2006 9:24 pm</h4>
    <div class="postbody"><span class="postbody">Dovoto mis-spelled the original type conversion macros, int o v16 instead int to v16, etc...
<br/>
<br/>
The warning has nothing to do with key presses not working, it just means that someone (me) has flagged those names as old (rather than removing them completly).  To make the warnings go away, just add an extra t to the names, inttov16, floattof32, etc...
<br/>
<br/>
For your key problem (without actually knowing what the problem is):
<br/>
  1) Emulators are unreliable, if at all possible test on hardware instead (first rule of any DS related problem)
<br/>
  2) keysHeld and keysDown do two fairly different things.
<br/>
<br/>
keysHeld returns the buttons that are down as of right now (or for X,Y,and PENIRQ, down as of the last v-blank).
<br/>
<br/>
keysDown returns the keys that have been pushed down ****since the last time you called keysDown*** (updates some internal state), and should only ever be called once a frame (and stored into a variable, if you want to check for more than one newly pressed button).
<br/>
<br/>
i.e. for an effect that should only depend on the state, use keysHeld
<br/>
  amRunning = (keysHeld() &amp; KEY_A) != 0;
<br/>
<br/>
but for an effect that requires a press, use keysDown:
<br/>
<br/>
uint16 keys = keysDown();
<br/>
if ((keys &amp; KEY_START)) gamePaused = !gamePaused;
<br/>
if ((!gamePaused) &amp;&amp; (keys &amp; KEY_A != 0) &amp;&amp; (playerNearDoor()))
<br/>
  openDoor();
<br/>
<br/>
if you had instead written:
<br/>
if ((keysDown() &amp; KEY_START)) gamePaused = !gamePaused;
<br/>
if ((!gamePaused) &amp;&amp; (keysDown() &amp; KEY_A != 0) &amp;&amp; (playerNearDoor()))
<br/>
  openDoor();
<br/>
<br/>
You could never open a door, ever, as you already reset the 'was key A *just* pressed' flag (so to speak), when you checked for the start button.
<br/>
<br/>
<br/>
Hope that helps.<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66851 - radicalrandy - Fri Jan 13, 2006 9:32 pm</h4>
    <div class="postbody"><span class="postbody">hell yes that does, thanks a bunch.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
