<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Console and dual screen 3d - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Console and dual screen 3d</h2>
<div id="posts">
<div class="post">
    <h4>#167120 - Kath - Mon Mar 02, 2009 7:13 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I'm trying to achieve the same as AntonioND in this <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=15971" target="_blank">thread</a> in regards to console output and dual screen 3d. I've tried to follow that thread but the libnds console functions have changed and I can't figure out how to get it working with the new functions.
<br/>
<br/>
Here is my setup code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// Setup function called if two screen 3d wanted.
<br/>
void GfxCore::Setup_Dual3D()
<br/>
{
<br/>
   // Setup the main screen to use the 3D core.
<br/>
   videoSetMode( MODE_0_3D | DISPLAY_BG1_ACTIVE );
<br/>
   
<br/>
   // Set some memory for textures.
<br/>
   vramSetBankA( VRAM_A_TEXTURE ); // 128k +
<br/>
   vramSetBankB( VRAM_B_TEXTURE ); // 128k = 256k for textures.
<br/>
<br/>
   // Set some main bg ram for the console.
<br/>
   vramSetBankF(VRAM_F_MAIN_BG);
<br/>
<br/>
   consoleInit(NULL, 1, BgType_Text4bpp, BgSize_T_256x256, 31, 0, true);
<br/>
<br/>
   // .. sub screen setup for dual 3d then videogl setup ...
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
The consoleInit() causes no$gba to crash (I don't have my DS to check on hardware). Am I not setting something up I should be? I've been poking around in the libnds console <a class="postlink" href="http://devkitpro.cvs.sourceforge.net/viewvc/devkitpro/libnds/source/arm9/console.c?revision=1.39&amp;view=markup" target="_blank">source</a> but I can't figure out what else I need to be doing.
<br/>
<br/>
Thanks!
<br/>
<br/>
Edit: The reason no$gba was crashing was because I was calling iprintf() before I'd set up the console (silly me). 
<br/>
<br/>
I've kind of got it working now but only if I set both the map and tile base to 0, it displays but the text is writing all over the tiles. I tried map base 4 (8k) and tile base 0 but all I get are random asterisks on the screen instead of the console. I'm still getting used to the 2d modes, am I missing something out again?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167121 - albinofrenchy - Mon Mar 02, 2009 8:12 am</h4>
    <div class="postbody"><span class="postbody">Tile base 0 will override map base 4. Try Map base 8. 
<br/>
<br/>
I actually tend to do my maps in the first 8; and then put my tiles in tile base 1. Its easier not to goof up this way I think.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167143 - Kath - Tue Mar 03, 2009 4:08 pm</h4>
    <div class="postbody"><span class="postbody">Thanks :) After changing it and changing some other setup code it works now.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
