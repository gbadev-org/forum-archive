<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>how to access the ds cart from a flashcart? plus make probs - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > how to access the ds cart from a flashcart? plus make probs</h2>
<div id="posts">
<div class="post">
    <h4>#128912 - s0l1dsnak3123 - Wed May 16, 2007 6:43 pm</h4>
    <div class="postbody"><span class="postbody">ok here goes... I'm trying to make an app that dumps the files from the ds cart. The reason I want to do this is because I want to see how my max media launcher works. first of all I can't seem to find any tutorials on this, second of all, I'm new to C++ as well as nds programming so I don't know where to look either (tried google, didn't come up with any results).
<br/>
<br/>
-----------------------------------------------------------------------------------------
<br/>
<br/>
secondly, I'm having problems compiling files. I press winkey and R to get the run dialog, then type CMD and press enter type in cd (and then the directory), and type in make. I get the following error:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">make[1]: Entering directory `/c/devkitPro/examples/nds/filesystem/embedded_gbfs'
<br/>
<br/>
main.c
<br/>
arm-eabi-gcc -MMD -MP -MF /c/devkitPro/examples/nds/filesystem/embedded_gbfs/bui
<br/>
ld/main.d -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffas
<br/>
t-math -mthumb -mthumb-interwork -I/c/devkitPro/examples/nds/filesystem/embedded
<br/>
_gbfs/include -I/c/devkitpro/libnds/include -I/c/devkitpro/libnds/include -I/c/d
<br/>
evkitPro/examples/nds/filesystem/embedded_gbfs/build -DARM9 -c /c/devkitPro/exam
<br/>
ples/nds/filesystem/embedded_gbfs/source/main.c -o main.o
<br/>
arm-eabi-gcc.exe: CreateProcess: No such file or directory
<br/>
make[2]: *** [main.o] Error 1
<br/>
make[1]: *** [build] Error 2
<br/>
make[1]: Leaving directory `/c/devkitPro/examples/nds/filesystem/embedded_gbfs'
<br/>
make: *** [all] Error 2</td> </tr></table><span class="postbody">
<br/>
<br/>
I end up with no .nds file. What shouold I do? I'm running windblows vi$ta (crap edition) - i'm guessing that's the reason? Any help for any of these matters would be greatly appreciated.
<br/>
<br/>
s0l1dsnak3123</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128916 - Lynx - Wed May 16, 2007 7:11 pm</h4>
    <div class="postbody"><span class="postbody">Umm..  I could be way out of line.. but I don't think a cart dumper is exactly the project for a new coder..  You might want to start with something a little easier.  Like the examples that come with DevkitPro.<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128929 - s0l1dsnak3123 - Wed May 16, 2007 7:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote">Umm..  I could be way out of line.. but I don't think a cart dumper is exactly the project for a new coder..  You might want to start with something a little easier.  Like the examples that come with DevkitPro.</td> </tr></table><span class="postbody">
<br/>
<br/>
you could be correct, but never-the-less, I do believe that It  would be *quite* simple in theory... just open ds cart, copy contents to sram, save sram to file. This would be in a raw format of course, but then I could probably learn how to turn it into a .nds file or something (ds lazy, perhaps?)
<br/>
<br/>
I am quite experienced in vb.NET (2005), so I understand arrays, strings, stuff like that, and im up to page 82 on practical C++ programming by o'reilly, so I do understand at worst the basics. (and I can allways look stuff up that I don't understand).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128930 - tepples - Wed May 16, 2007 8:04 pm</h4>
    <div class="postbody"><span class="postbody">There are known incompatibilities between MinGW (the compiler used to produce devkitARM binaries for Windows) and Windows Vista OS.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128934 - s0l1dsnak3123 - Wed May 16, 2007 8:34 pm</h4>
    <div class="postbody"><span class="postbody">lol another reason to get rid of it :)
<br/>
<br/>
I am going to reinstall XP, whilst I'm doing that, does anybody know how I can connect with slot-1?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128966 - Cydrak - Thu May 17, 2007 4:35 am</h4>
    <div class="postbody"><span class="postbody">Given the scarcity of homebrew that actually does this... I think GBATek is going to be your best answer you'll get. Check under "DS Cards, Encryption, Firmware", it's all mapped out.
<br/>
<br/>
Simple... right? Now if you actually understood all of that, you can consider NOT running away, very very quickly. :)
<br/>
<br/>
Seriously though... it's not a straightforward interface, and "memcpy()" isn't going to help you. You have to send the card 8-byte command packets, frob some kinda-sorta-documented hardware, then set up DMA to get the reply. There is encryption and obfuscation required to access the card, so if you get just one little thing wrong, all you get is garbage in return. The keys are locked in the ARM7's BIOS, so you need a way to dump that.
<br/>
<br/>
On top of that, SRAM isn't big enough so you'd have to use a FAT device.
<br/>
<br/>
It's rrrreal fun to debug, trust me--I tried it, thinking I wanted an on-DS AC:WW editor, but sadly it's gonna have to wait. There's a reason no one wants to release dumping code...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128991 - tepples - Thu May 17, 2007 12:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">I tried it, thinking I wanted an on-DS AC:WW editor, but sadly it's gonna have to wait. There's a reason no one wants to release dumping code...</td> </tr></table><span class="postbody">
<br/>
You don't need ROM dumping code to make a town editor. If AnimalMap for Windows manages to edit towns without having any access to the rom data...
<br/>
<br/>
What I really want is a SLOT-2 card that takes GameCube memory cards, so that I can make code that moves (eligible) items back and forth between your ACPG town and your ACWW town.
<br/>
<br/>
<span style="font-weight: bold">[This discussion was split to <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=129034#129034" target="_blank">this topic</a>. -- MOD]</span><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Sun May 20, 2007 1:42 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#129003 - s0l1dsnak3123 - Thu May 17, 2007 1:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">Given the scarcity of homebrew that actually does this... I think GBATek is going to be your best answer you'll get. Check under "DS Cards, Encryption, Firmware", it's all mapped out.
<br/>
<br/>
Simple... right? Now if you actually understood all of that, you can consider NOT running away, very very quickly. :)
<br/>
<br/>
Seriously though... it's not a straightforward interface, and "memcpy()" isn't going to help you. You have to send the card 8-byte command packets, frob some kinda-sorta-documented hardware, then set up DMA to get the reply. There is encryption and obfuscation required to access the card, so if you get just one little thing wrong, all you get is garbage in return. The keys are locked in the ARM7's BIOS, so you need a way to dump that.
<br/>
<br/>
On top of that, SRAM isn't big enough so you'd have to use a FAT device.
<br/>
<br/>
It's rrrreal fun to debug, trust me--I tried it, thinking I wanted an on-DS AC:WW editor, but sadly it's gonna have to wait. There's a reason no one wants to release dumping code...</td> </tr></table><span class="postbody">
<br/>
<br/>
oh... maybe i'll try something a little easier first :) (i think I underestimated how hard this was gonna be...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129021 - Cydrak - Thu May 17, 2007 10:44 pm</h4>
    <div class="postbody"><span class="postbody">Good luck... :) btw, I hope I didn't come off too abrasive, it's a lovely system to code for. It's just, the cards were specifically engineered to be difficult. If you still must try it, getting a feel for the -rest- of the hardware--and console coding in general--will help immensely.
<br/>
<br/>
Tepples, I know. AnimalMap works fine, but... I found it distinctly less than pleasurable to use. Hundreds of different items in the game, and they ALL show up as numbers or nondescript colors. Not even copy/paste/move, although of course that is fixable. :/
<br/>
<br/>
Which makes it a lot like the game, really: hover over the square, and if it wasn't what you want then rinse, repeat. If it was, cue mouse/joypad gymnastics. The thought of managing inventory with it scares me!
<br/>
<br/>
And as making graphics for all the items would be silly, it seemed easier to me, to just reuse the data from the game itself.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129093 - s0l1dsnak3123 - Fri May 18, 2007 8:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Cydrak wrote:</b></span></td> </tr> <tr> <td class="quote">Good luck... :) btw, I hope I didn't come off too abrasive, it's a lovely system to code for. It's just, the cards were specifically engineered to be difficult. If you still must try it, getting a feel for the -rest- of the hardware--and console coding in general--will help immensely.
<br/>
<br/>
Tepples, I know. AnimalMap works fine, but... I found it distinctly less than pleasurable to use. Hundreds of different items in the game, and they ALL show up as numbers or nondescript colors. Not even copy/paste/move, although of course that is fixable. :/
<br/>
<br/>
Which makes it a lot like the game, really: hover over the square, and if it wasn't what you want then rinse, repeat. If it was, cue mouse/joypad gymnastics. The thought of managing inventory with it scares me!
<br/>
<br/>
And as making graphics for all the items would be silly, it seemed easier to me, to just reuse the data from the game itself.</td> </tr></table><span class="postbody">
<br/>
<br/>
don't worry, I am not giving up dshomebrew that easily :) I have found pa_lib... I feel I have found a piece of me that I never knew I lost... ?_?'</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
