<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Accessing saves on GBA game paks - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Accessing saves on GBA game paks</h2>
<div id="posts">
<div class="post">
    <h4>#171519 - zigg - Tue Nov 24, 2009 2:16 pm</h4>
    <div class="postbody"><span class="postbody">I apologize if this is common knowledge, but I'm not sure where to look.
<br/>
<br/>
I'm familiar with the card* routines from libnds that can deal with the saves on DS game cards, but I'm not sure if I can or how to access the saves on GBA game paks.
<br/>
<br/>
Any pointers?  Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171523 - sgeos - Tue Nov 24, 2009 2:43 pm</h4>
    <div class="postbody"><span class="postbody">This is going to depend on the hardware setup of the cart.
<br/>
SRAM is memory mapped, IIRC.
<br/>
EEPROM works much differently.
<br/>
gbatek probably has all of this information.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171525 - zigg - Tue Nov 24, 2009 3:08 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, there is some info at gbatek, starting here:
<br/>
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#gbacartbackupsramfram" target="_blank">http://nocash.emubase.de/gbatek.htm#gbacartbackupsramfram</a>
<br/>
<br/>
I'm a little confused though at this section in particular because it refers to running from WRAM, which I don't think is even a DS-mode concept?
<br/>
<br/>
Might be showing my ignorance here.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171527 - zigg - Tue Nov 24, 2009 3:27 pm</h4>
    <div class="postbody"><span class="postbody">SendSave (GBA) has libSave.c, which looks promising as far as existing code goes.
<br/>
<br/>
<a href="http://chishm.drunkencoders.com/SendSave/index.html" target="_blank">http://chishm.drunkencoders.com/SendSave/index.html</a>
<br/>
<br/>
I honestly have no idea if I can expect to run this code in DS mode, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171534 - Dwedit - Tue Nov 24, 2009 7:50 pm</h4>
    <div class="postbody"><span class="postbody">DS uses a different address for the SRAM area.  Make sure it's not using the GBA's SRAM address, and you're fine.
<br/>
Also remember that the SRAM area is 8 bit reads and writes only.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171538 - sgeos - Wed Nov 25, 2009 3:46 am</h4>
    <div class="postbody"><span class="postbody">Let's take a step back.  What exactly are you trying to do and why?  Presumably you want to read from and write to the save game data of your GBA games?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171764 - zigg - Tue Dec 22, 2009 3:03 pm</h4>
    <div class="postbody"><span class="postbody">(sorry, I just decided to check back in here, missed your last reply, sgeos)
<br/>
<br/>
Yes, that's exactly what I'm looking to do, if possible?not just SRAM but also Flash and EEPROM.  If there is any existing DS-mode code to do this, or if it's even possible, I'm not sure where to find it.
<br/>
<br/>
I've been meaning to build up some test code to see if the read routines even work?from the looks of things, they might (given the alternative address), the I/O registers appear similar in gbatek, but the memory addresses may have changed.
<br/>
<br/>
I've been very busy lately, though, so I haven't had a chance to build any tests.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171765 - Dwedit - Tue Dec 22, 2009 3:20 pm</h4>
    <div class="postbody"><span class="postbody">If the code for the GBA is using hardcoded addresses, you will need to change the address.  No big deal, just change it.  If it's using a symbol for the address of SRAM for all accesses of the SRAM area, you don't need to change anything.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171770 - zigg - Tue Dec 22, 2009 3:47 pm</h4>
    <div class="postbody"><span class="postbody">That probably works OK for Flash (changing E000000 to A000000) but I'm not so sure about EEPROM, since it uses addresses at D000000.
<br/>
<br/>
Do you have any examples of this working in DS mode I can stare at?  Apart from basic SRAM, of course, I'm very confident that will work OK.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#171821 - sgeos - Sun Dec 27, 2009 12:31 am</h4>
    <div class="postbody"><span class="postbody">I guess I would take one of my GBA game and just play around with trying to read and write data.  Be prepared to lose the save data.  There are databases out there that list the type save game hardware for each cart.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
