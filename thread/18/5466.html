<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Use both screens for breakout? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Use both screens for breakout?</h2>
<div id="posts">
<div class="post">
    <h4>#40331 - chrissieboy - Sun Apr 17, 2005 5:13 pm</h4>
    <div class="postbody"><span class="postbody">HI all,
<br/>
<br/>
im making a game like breakout, and with use of the touch screen.
<br/>
Everything was going really well, but now i got a weird problem..
<br/>
<br/>
My ball is moving on the touch screen, and when it lefts the touchscreen and goes to the up screen the problems begin.
<br/>
<br/>
I made this collision code to detect if the touchscreen is leaving and that my sprite must going furthur on the upscreen.
<br/>
<br/>
i made this code :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      // x as touchscreen
<br/>
      
<br/>
         if (sprites[ball_on_touchscreen].x&gt;236&lt;&lt;8)
<br/>
            {
<br/>
            sprites[ball_on_touchscreen]xSpeed=(-speed);
<br/>
            }
<br/>
            
<br/>
         if (sprites[ball_on_touchscreen]x&lt;4&lt;&lt;8)
<br/>
            {
<br/>
            sprites[ball_on_touchscreen].xSpeed=(speed);
<br/>
            }
<br/>
            
<br/>
         // y as   touchscreen
<br/>
         
<br/>
         if (sprites[ball_on_touchscreen].y&gt;172&lt;&lt;8)
<br/>
            {
<br/>
            sprites[ball_on_touchscreen].ySpeed=(-speed);
<br/>
            }
<br/>
            
<br/>
         if (sprites[ball_on_touchscreen].y&lt;4&lt;&lt;8) 
<br/>
            { 
<br/>
            sprites[ball_on_touchscreen].x=sprites[ball_on_touchscreen].x;
<br/>
            sprites[ball_on_touchscreen].y=170&lt;&lt;8;
<br/>
            sprites[ball_on_touchscreen].xSpeed = sprites[ball_on_touchscreen].xSpeed;
<br/>
            sprites[ball_on_touchscreen].ySpeed = sprites[ball_on_touchscreen].xSpeed;
<br/>
            }
<br/>
            
<br/>
         if (sprites[ball_on_touchscreen].y&gt;1&lt;&lt;8 &amp;&amp; sprites[ball_on_touchscreen].y&lt;170&lt;&lt;8)
<br/>
            {
<br/>
            ball_moves_on_touchscreen = true;
<br/>
            }
<br/>
//----------------------------------------------------
<br/>
      // The up screen
<br/>
<br/>
         if (sprites[ball_on_upscreen].x&gt;236&lt;&lt;8)
<br/>
            {
<br/>
            sprites[ball_on_upscreen].xSpeed=(-speed);
<br/>
            }
<br/>
            
<br/>
         if (sprites[ball_on_upscreen].x&lt;4&lt;&lt;8)
<br/>
            {
<br/>
            sprites[ball_on_upscreen].xSpeed=(speed);
<br/>
            }
<br/>
            
<br/>
         // y as   touchscreen
<br/>
         
<br/>
         if (sprites[ball_on_upscreen].y&gt;172&lt;&lt;8)
<br/>
            {
<br/>
            sprites[ball_on_upscreen].ySpeed=(-speed);
<br/>
            }
<br/>
            
<br/>
         if (sprites[ball_on_upscreen].y&lt;2&lt;&lt;8) 
<br/>
            { 
<br/>
            sprites[ball_on_upscreen].ySpeed=(speed);
<br/>
            }
<br/>
         
<br/>
         if (sprites[ball_on_upscreen].y&lt;140&lt;&lt;8)
<br/>
            {
<br/>
            ball_moves_on_touchscreen = false;
<br/>
            }
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
speed is the speed i declared that is 2&lt;&lt;8
<br/>
<br/>
But the problem is that when it is in the up screen and it bounced to the top of that screen, then it bounces down. 
<br/>
And on a half of the screen the ball disapears and starts again from point 172&lt;&lt;8??
<br/>
<br/>
I dont know whats the problem with this script??
<br/>
Im busy with it for a whole day know..
<br/>
So i had take a look on josath his page and downloaded the birds demo.
<br/>
Because this one uses both screens, and i saw that he had made a code for it.
<br/>
But i had use aronroogers.com his nds dev setup, but i cant compile the birds demo it gives a lot of errors.
<br/>
And in his text files i saw that it would not compile with this setup.
<br/>
<br/>
So PLEASE can someone help me or you josath?????
<br/>
<br/>
Very much thanx!!</span><span class="gensmall"><br/><br/>Last edited by chrissieboy on Sun Apr 17, 2005 6:36 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#40336 - sajiimori - Sun Apr 17, 2005 6:19 pm</h4>
    <div class="postbody"><span class="postbody">It's hard to understand your code because of the magic numbers and the unclear interaction between the screens.
<br/>
<br/>
I suggest doing smaller tasks, one at a time.  Try making a ball that just moves up from the bottom screen to the top, or from the top to the bottom, with no bouncing.
<br/>
<br/>
If you're interested in simplifying your logic at all, remember what you're simulating: a single space with a single ball moving through it.  Each screen is like a window into that space.  Your data structures should reflect that.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
enum
<br/>
{
<br/>
  SCREEN_TOP,
<br/>
  SCREEN_BOTTOM,
<br/>
  SCREEN_NUM
<br/>
};
<br/>
<br/>
typedef s32 Fixed;
<br/>
<br/>
struct Vector2
<br/>
{
<br/>
  Fixed x, y;
<br/>
};
<br/>
<br/>
Vector2 cameraPositions[SCREEN_NUM];
<br/>
<br/>
struct Ball
<br/>
{
<br/>
  Vector2 position;
<br/>
  Vector2 velocity;
<br/>
};
<br/>
<br/>
Ball ball;
<br/>
<br/>
struct Rectangle
<br/>
{
<br/>
  Vector2 topLeft;
<br/>
  Vector2 size;
<br/>
};
<br/>
<br/>
Rectangle boardArea;
<br/>
</td> </tr></table><span class="postbody">
<br/>
In the logic code, the ball moves at its velocity, and bounces off the edges of the boardArea rectangle.  The logic doesn't care that there are two screens.
<br/>
<br/>
In the drawing code, you subtract the camera location from an object's world position to get its screen position.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40338 - chrissieboy - Sun Apr 17, 2005 6:30 pm</h4>
    <div class="postbody"><span class="postbody">im sorry for the magic numbers i shall edit it.
<br/>
<br/>
But you suggest that i must make a code that see the 2 screens of 256 * 190 as a big screen of 512 * 380???
<br/>
<br/>
Thats a good idea! I saw that on josath's code of birds he does the same.
<br/>
Only that would not work for me??
<br/>
But josath had to compile it but i can't compile it???
<br/>
<br/>
Do you have a code that i can use for both screens as one screen that can compile with aaronrogers.com tutorial of dev setup?
<br/>
<br/>
And i had take a look at your code but im very new to C.
<br/>
I always used visual basic, so it says nothing to me?? So i think i must read alot...
<br/>
<br/>
But thanx anyway for your code, i think im now going to read everything i dont understand on google, from your code.
<br/>
<br/>
I'll edit my code one moment please</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40356 - dagamer34 - Sun Apr 17, 2005 11:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chrissieboy wrote:</b></span></td> </tr> <tr> <td class="quote">im sorry for the magic numbers i shall edit it.
<br/>
<br/>
But you suggest that i must make a code that see the 2 screens of 256 * 190 as a big screen of 512 * 380???
<br/>
<br/>
Thats a good idea! I saw that on josath's code of birds he does the same.
<br/>
Only that would not work for me??
<br/>
But josath had to compile it but i can't compile it???
<br/>
<br/>
Do you have a code that i can use for both screens as one screen that can compile with aaronrogers.com tutorial of dev setup?
<br/>
<br/>
And i had take a look at your code but im very new to C.
<br/>
I always used visual basic, so it says nothing to me?? So i think i must read alot...
<br/>
<br/>
But thanx anyway for your code, i think im now going to read everything i dont understand on google, from your code.
<br/>
<br/>
I'll edit my code one moment please</td> </tr></table><span class="postbody">
<br/>
<br/>
The number of horizontal pixels don't change. Just pretend it's a large 256*384 screen<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40386 - chrissieboy - Mon Apr 18, 2005 9:20 am</h4>
    <div class="postbody"><span class="postbody">yeah you're right!! its 512 384 with 4 displays !! Stupid from me!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40391 - tepples - Mon Apr 18, 2005 2:22 pm</h4>
    <div class="postbody"><span class="postbody">Anyway, I think you should treat it as 256x480 or something with a 96-pixel or so gap between the screens because there's a gap between the actual screens.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#40403 - dagamer34 - Mon Apr 18, 2005 6:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Anyway, I think you should treat it as 256x480 or something with a 96-pixel or so gap between the screens because there's a gap between the actual screens.</td> </tr></table><span class="postbody">
<br/>
<br/>
I wish emulators would somehow compensate for that by using a picture of a Nintendo DS and have the emulator screens where the real screens would be. That way we can get a real look at perspective differences without having to use hardware.
<br/>
<br/>
In otherwords, for example, if one were able to emulate Metroid Prime Hunters: First Hunt, the opening video wouldn't look correct because of the space between the screens<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
