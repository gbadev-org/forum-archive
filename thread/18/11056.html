<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>how to speed scanline in VRAM ? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > how to speed scanline in VRAM ?</h2>
<div id="posts">
<div class="post">
    <h4>#101436 - anael - Tue Sep 05, 2006 3:13 pm</h4>
    <div class="postbody"><span class="postbody">Hello !
<br/>
<br/>
I'am working on a polygon drawing function to draw directly in VRAM,
<br/>
for the scanline i use :
<br/>
<br/>
swiCopy(&amp;color, back + 256*line + min, COPY_MODE_HWORD | COPY_MODE_FILL | (max - min));
<br/>
<br/>
back is VRAM
<br/>
line the current line where i'm drawing
<br/>
min the x start
<br/>
max the x end
<br/>
<br/>
Is it possible to speed copy ? in ASM ?
<br/>
<br/>
thank you for reading !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101527 - !cube - Wed Sep 06, 2006 8:13 am</h4>
    <div class="postbody"><span class="postbody">Filling a polygon with a single color by copying data from one place to another is definitely not the way to go about it because you're accessing memory in vain when reading the color from a memory address.
<br/>
<br/>
- Use assembler and the registers as fully as you can to reduce memory accesses
<br/>
- Do not make an assembler function for filling a scanline, make one for the whole triangle filling critical loop, setup code can be C/C++
<br/>
- Never EVER plot pixel by pixel with STRB/STRH if you're just filling with one color unless on polygon boundaries
<br/>
- Unroll the loop so you can fill more pixels with just one memory access by using aligned 32-bit stores and possibly even more with consecutive writes
<br/>
- ARM9: Use swizzled textures when doing texture mapping to minimize cache misses
<br/>
- ARM9: Use pre-emptive memory access when doing texture mapping, reading data well before the need to actually use the data anywhere to minimize the effect of cache misses and interlock cycles in LDR/LDRB/LDRH
<br/>
- Use intelligent bit hacks when doing blending
<br/>
<br/>
..just some basic ideas how to improve your filler code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101535 - anael - Wed Sep 06, 2006 9:14 am</h4>
    <div class="postbody"><span class="postbody">Thank you for help.
<br/>
<br/>
Yes i just whant to fill it with a single color with no blending, but i don't know how ASM works.
<br/>
<br/>
swiCopy works fine but it's slow...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
