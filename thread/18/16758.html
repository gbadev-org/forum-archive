<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Paletted transparency not at Color0 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Paletted transparency not at Color0</h2>
<div id="posts">
<div class="post">
    <h4>#169408 - DiscoStew - Thu Jul 09, 2009 4:18 am</h4>
    <div class="postbody"><span class="postbody">Before I go about devising a plan involving the switching around of palette indices to get correct transparency, I'd like to know if it is possible in a 4/8-bit texture palette to have the transparent color not be located at Color0? You may wonder why I'm not wanting to make an external conversion program for this, and it is because I'm using "legacy" assets that I want to retain in their pure form, but to have them working on the DS as if they were meant for the platform.
<br/>
<br/>
If there is no other spot but Color0 for this, then I'll just get working on internal palette swapping to create the same effect.
<br/>
<br/>
<br/>
EDIT:
<br/>
<br/>
I was also thinking just now if it is possible that rather than an index to base transparency off of, what about a specific color? Does the palette only use the regular 15 of the 16 bits, or can that last bit be used as an alpha value? Again, I'm only interested in 4/8 bit palette modes.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169415 - Dwedit - Thu Jul 09, 2009 12:49 pm</h4>
    <div class="postbody"><span class="postbody">You will need to modify the assets at some point.  At the very least, swap color #0 with the transparent color.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169420 - elhobbs - Thu Jul 09, 2009 5:02 pm</h4>
    <div class="postbody"><span class="postbody">like dwedit said - you need to convert the assets to ds format at some point so the system can use them. it does not matter if it is internal or external. for 3d textures that use 4 or 8 bit palettes you can only use index 0 for transparency - they needs to use GL_TEXTURE_COLOR0_TRANSPARENT.
<br/>
<br/>
so you can palette swap index 0 and swap your indices at load time
<br/>
<br/>
or 
<br/>
<br/>
 there is also these texture formats </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   GL_RGB32_A3   = 1, /*!&lt; 32 color palette, 3 bits of alpha */
<br/>
   GL_RGB8_A5    = 6, /*!&lt; 8 color palette, 5 bits of alpha */
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
or
<br/>
<br/>
your other option is to convert them all to GL_RGBA</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   GL_RGBA       = 7, /*!&lt; 15 bit direct color, 1 bit of alpha */
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#169424 - DiscoStew - Thu Jul 09, 2009 10:15 pm</h4>
    <div class="postbody"><span class="postbody">Alright. Since I have to keep the original formats because of palette effects, I'll just have deal with palette swapping, and store what it originally was internally as a reference for when palette effects come into use.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
