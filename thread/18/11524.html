<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to do transparency in non-16bit/alpha textures? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > How to do transparency in non-16bit/alpha textures?</h2>
<div id="posts">
<div class="post">
    <h4>#106875 - Extreme Coder - Tue Oct 24, 2006 10:09 am</h4>
    <div class="postbody"><span class="postbody">Hey guys.
<br/>
I've recently began the framework for a 3D game I'm working on(see <a href="http://www.extremecoder.co.nr" target="_blank">www.extremecoder.co.nr</a>), and there are a few questions that I have:
<br/>
What is the best/right way to do transparency on textures that aren't 16-bit(like the ones in the examples)?
<br/>
Is it possible to have transparency+alpha(or blending) in the same texture? 
<br/>
If so, how?
<br/>
Oh, and why are textures always rotated 90 degrees to the right?
<br/>
<br/>
Thanks.</span><span class="gensmall"><br/><br/>Last edited by Extreme Coder on Tue Oct 24, 2006 12:55 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#106883 - Rockard - Tue Oct 24, 2006 12:34 pm</h4>
    <div class="postbody"><span class="postbody">Check my topic "Setting up non-16bit textures with palettes" a few threads down, and you will find a good tool for that.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106884 - Extreme Coder - Tue Oct 24, 2006 12:53 pm</h4>
    <div class="postbody"><span class="postbody">I'm not asking for which tool to use, because that I know already. I am asking, which code needs to be added to support the things requested above?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106888 - Sausage Boy - Tue Oct 24, 2006 2:41 pm</h4>
    <div class="postbody"><span class="postbody">Texture modes 1 and 6 support alpha transparency (GL_RGB32_A3 and GL_RGB8_A5 in libnds). Treat them as standard paletted textures, there is tons of code in the paletted cube demo. Note that the alpha only works against another texture.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106905 - Extreme Coder - Tue Oct 24, 2006 5:18 pm</h4>
    <div class="postbody"><span class="postbody">Sausage Boy: But how transparent would the texture be? Would it be 25% or 50% or xx% transparent? And how can that be controlled?
<br/>
When converting an image to a paletted texture using your converter, what color in the image would become completely transparent? and what code should I add to support this one-color transparency?
<br/>
<br/>
Thanks again in advance,
<br/>
Extreme Coder</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106908 - Sausage Boy - Tue Oct 24, 2006 6:09 pm</h4>
    <div class="postbody"><span class="postbody">The mode GL_RGB32_A3 means you get 32 colors and 3 bits of alpha, so that makes 8 different levels of transparency. GL_RGB8_A5 is the other way around, that is, 32 levels of alpha.
<br/>
<br/>
My converter doesn't use a color for transparency, it uses the alpha layer in the image. I find the idea of a tranparent color awful, I mean, tools support alpha layers, it makes more sense, so why complicate things more than needed?<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106909 - Rockard - Tue Oct 24, 2006 6:18 pm</h4>
    <div class="postbody"><span class="postbody">You do not add code to make an image transparent. That is included in the picture.
<br/>
<br/>
The per-pixel transparency levels is saved with the bin!
<br/>
Create the transparent picture in a paintprogram like photoshop. Save as png-24 (palette-based png like 8bit-pictures and lower do not support per pixel transparency with different levels of transparancy. All 8bit and lower only supports one color which is set to 100% transparent). Then you use texmex to convert the png24 image to a suitable format, like texture mode 1 or 6 as suggested. The output is a bin with information about the transparency included. Input in your source, and add glEnable(GL_BLEND); and glAlphaFunc(BLEND_ALPHA);
<br/>
or else the images won't blend. That's all! =D
<br/>
<br/>
Btw, your webpage doesn't work!
<br/>
<br/>
edit: whups, sausage got first..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106934 - Extreme Coder - Tue Oct 24, 2006 11:14 pm</h4>
    <div class="postbody"><span class="postbody">About my site, it's gone down for about a few days without me noticing. It will probably come back later(or I will move to another host:P)
<br/>
Looks like either me or you got transparencies, blending and alpha all mixed up :)
<br/>
<br/>
And Sausage Boy: Then how would I make the area around a sprite(which is not used or empty) not get drawn? This part is what I call transparency:)
<br/>
And how do I change the alpha bits?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106958 - Sausage Boy - Wed Oct 25, 2006 7:18 am</h4>
    <div class="postbody"><span class="postbody">Make your source image file transparent. Every mode submits fully transparent pixels, just make them transparent in you image editor. If TexMex detects an image with transparent pixels, and converts to a regular paletted type (GL_RGB4, GL_RGB16 or GL_RGB256), it automagially converts your image into numberofcolors-1 colors, and assigns every transparent pixel to color 0. It is actually possible to choose if you want palette index 0 to be transparent, so if texmex doesn't find any transparent pixels, it uses the entire numberofcolors for colors.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106981 - Extreme Coder - Wed Oct 25, 2006 12:56 pm</h4>
    <div class="postbody"><span class="postbody">Thanks Sausage Boy. But that means I won't have to add anything to my code, just the procedures above? :) And does that also mean that I can't get the transparency I'm talking about with paletted alpha modes?
<br/>
Sorry for the long list of questions, and thanks again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106986 - Sausage Boy - Wed Oct 25, 2006 1:48 pm</h4>
    <div class="postbody"><span class="postbody">You are talking about regular fully see-through pixels, right? In that case, it's perfectly possible in every mode (except 16 bit raw I think).<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107011 - Extreme Coder - Wed Oct 25, 2006 5:57 pm</h4>
    <div class="postbody"><span class="postbody">Yup I was talking about these. Thanks Sausage Boy! I will be trying out what I found out in this thread later today.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120572 - Tantrum - Sun Mar 04, 2007 7:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">It is actually possible to choose if you want palette index 0 to be transparent</td> </tr></table><span class="postbody">
<br/>
<br/>
I just wanted to add an actual code snippet of doing this into the thread.  I was searching and didn't find it explicitly stated and had to go hunting.  Added to save someone else hunting :)
<br/>
<br/>
The define GL_TEXTURE_COLOR0_TRANSPARENT is what you need, used like,
<br/>
<br/>
glTexImage2D(0, 0, GL_RGB16, TEXTURE_SIZE_128 , TEXTURE_SIZE_128, 0, TEXGEN_TEXCOORD | GL_TEXTURE_COLOR0_TRANSPARENT, (u8*)someBitmap);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120575 - gabebear - Sun Mar 04, 2007 8:03 pm</h4>
    <div class="postbody"><span class="postbody">just to clarify, GL_RGB16 is for 16color textures and you can do alpha on 16bit textures by setting the last bit in GL_RGBA mode. The DS uses 5bits per channel for rgb and the last bit is alpha for textures; the GL_RGB mode sets this bit on every pixel for you.
<br/>
<br/>
By setting GL_TEXTURE_COLOR0_TRANSPARENT you are making color 0 in every texture mode to clear.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
