<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Cos, Sin, Tan, aCos, aSin, aTan - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Cos, Sin, Tan, aCos, aSin, aTan</h2>
<div id="posts">
<div class="post">
    <h4>#130443 - Dan2552 - Sun Jun 03, 2007 1:50 pm</h4>
    <div class="postbody"><span class="postbody">I'm not the most experienced person in this at all, so I need help.
<br/>
<br/>
I'm using PAlib, which has Cos and Sin functions, but not Tan and not any of the inverse functions.
<br/>
<br/>
After searching I've read theres a bios call specifically for aTan, how do I go about calling things from the bios - is it simple, or is it something I shouldn't touch (seeming as I am a noob and using PAlib)?
<br/>
<br/>
How would I go about using a math libary?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130444 - tepples - Sun Jun 03, 2007 2:31 pm</h4>
    <div class="postbody"><span class="postbody">tan(theta) = sin(theta)/cos(theta)
<br/>
<br/>
Do you know what a <a class="postlink" href="http://en.wikipedia.org/wiki/Lookup_table" target="_blank">lookup table</a> is? Do you know what <a class="postlink" href="http://en.wikipedia.org/wiki/Linear_interpolation" target="_blank">linear interpolation</a> is? Read those articles a couple times, come back with your questions, and I will teach you how to write trig subroutines that are both fast and accurate.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130447 - Darkflame - Sun Jun 03, 2007 4:09 pm</h4>
    <div class="postbody"><span class="postbody">hmz..best not overkill here.
<br/>
<br/>
Dan needs this to work out a distance a certain amount away from one point in the direction between the point and the stylus press.
<br/>
<br/>
I showed him how to do it with Sin / Cos / Tan ect.
<br/>
<br/>
But I wasnt aware that there wasnt a coding for Tan. (or the ds needed a different lookup table based stuff).<br/>_________________<br/><a class="postlink" href="http://www.rateoholic.co.uk/RateoholicResults.php#SEARCHFOR=&amp;TYPE=VideoGame%25&amp;BY=darkflame&amp;ORDER=hyb_down&amp;ST=0" target="_blank">Darkflames Reviews</a>    --   
<br/>
Make your own at;
<br/>
<a class="postlink" href="http://www.rateoholic.co.uk" target="_blank"> Rateoholic:Reviews for anything, by anyone.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130448 - Dan2552 - Sun Jun 03, 2007 4:18 pm</h4>
    <div class="postbody"><span class="postbody">What I posted on the PAlib forums:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I want to display a sprite proportional to where the stylus is pressed; at a certain distance from another sprite.
<br/>
<br/>
for example:
<br/>
<a href="http://dan2552.googlepages.com/not_to_scale.png">[Images not permitted - Click here to view it]</a>
<br/>
(RED= where the Stylus is pressed)
<br/>
(BLACK= the sprite comparing distance - the circle symbolises the distance)
<br/>
(BLUE= where I want the new sprite to show)
<br/>
<br/>
The stylus should be able to be pressed anywhere, including inside the circle and the (BLUE)sprite should always be on the circle.
<br/>
<br/>
Help?
<br/>
<br/>
<br/>
(not to scale, the black sprite is the center of the circle)</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#130457 - DekuTree64 - Sun Jun 03, 2007 7:51 pm</h4>
    <div class="postbody"><span class="postbody">Vectors work nicely for this sort of thing:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Vector2 delta = touchPos - spritePos;
<br/>
Fixed length = sqrt(delta.x * delta.x + delta.y * delta.y);
<br/>
delta /= length;   // delta is now a unit vector
<br/>
<br/>
Vector2 newSpritePos = spritePos + delta * desiredDistance;</td> </tr></table><span class="postbody">
<br/>
Actually, this particular problem could be done in pure integer math, if you don't feel like writing fixed-point/vector classes:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int deltaX  touchX - spriteX;
<br/>
int deltaY = touchY - spriteY;
<br/>
int length = sqrt(deltaX * deltaX + deltaY * deltaY);
<br/>
deltaX *= desiredDistance;
<br/>
deltaX /= length;
<br/>
deltaY *= desiredDistance;
<br/>
deltaY /= length;
<br/>
<br/>
int newSpriteX = spriteX + deltaX;
<br/>
int newSpriteY = spriteY + deltaY;</td> </tr></table><span class="postbody">
<br/>
Basically the only difference is that the multiply by desired distance is done first, so the divide by length doesn't kill the accuracy.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
