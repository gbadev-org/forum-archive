<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Draw same sprite multiple times.. framebuffer or HW sprites? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Draw same sprite multiple times.. framebuffer or HW sprites?</h2>
<div id="posts">
<div class="post">
    <h4>#162347 - gusano - Mon Sep 01, 2008 4:02 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I am working on a Othello clone, and it requires drawing the same black piece and white piece sprites multiple times. It also requires drawing a tiled background. I have two approaches:
<br/>
<br/>
1. Draw everything using a framebuffer. One sprite for black piece, one for white piece and one for small background tile to be reused. I know most of the people in this forum is against using framebuffer mode, but from what I've read about hardware sprites, you can only have 128 of them and you can't draw the same one in more than one place. I might be mistaken...
<br/>
<br/>
2. Use built-in sprite functionality, draw the "tiled" background to a hardware background from a single image and use ALL 128 hardware sprites for the white and black pieces.
<br/>
<br/>
Any other approach?
<br/>
<br/>
Also, if I wanted to write an isometric engine for the DS, would I have to use a framebuffer, or could I use one of the graphics modes for tiles already included on the DS? (Note: some isometric styles require drawing certain tile rows before others)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162350 - DiscoStew - Mon Sep 01, 2008 4:37 am</h4>
    <div class="postbody"><span class="postbody">For an Othello (Reversi?) clone, why not try this approach...
<br/>
<br/>
Why not just use a single hardware layer? A tileset that makes up an empty space, a tileset that makes up a white piece on that space, and one for a black piece. The pieces aren't just as they are, but what they would look like on the play board, like a square cut-out. When a piece is added, the hardware layer is edited directly from being an empty group to a group pertaining to the right piece tileset.
<br/>
<br/>
One hardware layer, and no sprites needed. You just need to know where to edit the hardware layer data, and what to edit it to.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162351 - gusano - Mon Sep 01, 2008 4:46 am</h4>
    <div class="postbody"><span class="postbody">That's an interesting approach, I hadn't thought of that... thanks! Can you point me in the right direction in terms of code? How do you edit the hardware layer data?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162355 - silent_code - Mon Sep 01, 2008 7:34 am</h4>
    <div class="postbody"><span class="postbody">Unless you want to be able to drag pieces with the stylus, then you'd at (least) need a single sprite. ;^)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162356 - jimis - Mon Sep 01, 2008 7:35 am</h4>
    <div class="postbody"><span class="postbody">If you need more than 128 sprites you can use sprite multiplexing technique (moving sprites while they are rendered in order to use them twice).
<br/>
You can do this by using an interrupt (I recommend vcount).
<br/>
The only problem is that the amount of sprites available to render wont be stable. If you "force" the number of sprites to be fixed some will appear half.
<br/>
But for particles this doesn't really matter.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162359 - DiscoStew - Mon Sep 01, 2008 8:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">Unless you want to be able to drag pieces with the stylus, then you'd at (least) need a single sprite. ;^)</td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah, I should have mentioned that. If you have anything planning on moving singularly, using "some" sprites would help.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162375 - AntonioND - Mon Sep 01, 2008 12:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jimis wrote:</b></span></td> </tr> <tr> <td class="quote">If you need more than 128 sprites you can use sprite multiplexing technique (moving sprites while they are rendered in order to use them twice).</td> </tr></table><span class="postbody">
<br/>
Or he could use 3D hardware with an ortogonal projection.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162376 - tepples - Mon Sep 01, 2008 1:03 pm</h4>
    <div class="postbody"><span class="postbody">It's best to use 2D mode if you can. It's simpler to program, and you can use 3D for the other screen if needed without having to use (complicated) capture mode. So I'd recommend that you use mode 0 for the bottom screen. To show <a class="postlink" href="http://pinocchio.jk0.org/gbaforum/reversi.png" target="_blank">this screen</a> that I just made in GIMP, you'll need the following graphics in VRAM:
<br/>
<ul><li>Empty space: 24x24 pixels, 9 tiles </li><li>Space with black piece and white piece: 24x24 pixels each, 18 tiles total </li><li>Black dot and white dot tiles: 8x8 pixels each, 2 tiles total </li><li>Digits 0-9: 16x24 each, 60 tiles total </li><li>Border: 8x8 pixels each, 8 tiles total </li></ul><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162377 - AntonioND - Mon Sep 01, 2008 1:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">It's best to use 2D mode if you can. It's simpler to program, and you can use 3D for the other screen if needed without having to use (complicated) capture mode. </td> </tr></table><span class="postbody">
<br/>
Yeah, I know, but I'm a 3D lover. ;P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162385 - jimis - Mon Sep 01, 2008 6:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>AntonioND wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>jimis wrote:</b></span></td> </tr> <tr> <td class="quote">If you need more than 128 sprites you can use sprite multiplexing technique (moving sprites while they are rendered in order to use them twice).</td> </tr></table><span class="postbody">
<br/>
Or he could use 3D hardware with an ortogonal projection.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Of cource and in fact it is possible to draw more than 1000 3D sprites.
<br/>
But they limmited to one screen. 3D in both screens drops the framerate at 30 fps.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
