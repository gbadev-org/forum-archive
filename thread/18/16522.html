<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>custom console - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > custom console</h2>
<div id="posts">
<div class="post">
    <h4>#167293 - hacker013 - Sun Mar 08, 2009 10:21 am</h4>
    <div class="postbody"><span class="postbody">hey everybody,
<br/>
<br/>
I'm trying to set up an custom console on VRAM_F and VRAM_G on the main screen. My screen is the whole time messed up and sometimes just white. I don't know to fix it. I took the custom console code from Nitro Engine (didn't work) as code to work with. This is what I have now:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   //consoleDemoInit();
<br/>
   videoSetModeSub(0);   
<br/>
<br/>
   //videoSetMode(MODE_0_3D | DISPLAY_BG1_ACTIVE);
<br/>
   videoSetMode(MODE_5_3D | DISPLAY_BG1_ACTIVE);
<br/>
   vramSetBankF(VRAM_F_MAIN_BG);
<br/>
   vramSetBankG(VRAM_G_MAIN_BG_0x06004000);
<br/>
   
<br/>
   BG_PALETTE[255] = 0xFFFF;
<br/>
   
<br/>
   REG_BG1CNT = BG_MAP_BASE(4) | BG_PRIORITY(0); // use bg 1 for text, set to highest priority
<br/>
   //REG_BG0CNT = BG_PRIORITY(1); //set bg 0 (3d background) to be a lower priority than bg 1
<br/>
<br/>
   consoleInit(consoleGetDefault(),1, BgType_Text4bpp, BgSize_T_256x256, 4,0,true, true);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I think it is just a little mistake with something. Maybe you guys can help me or atleast point me in the right direction.
<br/>
<br/>
gr,
<br/>
<br/>
hacker013<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167336 - albinofrenchy - Mon Mar 09, 2009 11:25 am</h4>
    <div class="postbody"><span class="postbody">I'm guessing you copy pasted their initialization code and your consoleInit function? 
<br/>
<br/>
Try something like
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   videoSetMode(MODE_5_2D| DISPLAY_BG1_ACTIVE); 
<br/>
   vramSetBankF(VRAM_F_MAIN_BG); 
<br/>
   vramSetBankG(VRAM_G_MAIN_BG_0x06004000); 
<br/>
    
<br/>
   consoleInit(0,1, BgType_Text4bpp, BgSize_T_256x256, 0,1,true);
<br/>
   printf("Success!");
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
How was that code compiling, you had an extra option in consoleInit...? 
<br/>
<br/>
Why are you setting the last palette entry to white btw?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167340 - elhobbs - Mon Mar 09, 2009 2:33 pm</h4>
    <div class="postbody"><span class="postbody">the extra option is present in the version of libnds currently in svn</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167341 - albinofrenchy - Mon Mar 09, 2009 2:59 pm</h4>
    <div class="postbody"><span class="postbody">Oh? Whats it for?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167345 - elhobbs - Mon Mar 09, 2009 4:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>albinofrenchy wrote:</b></span></td> </tr> <tr> <td class="quote">Oh? Whats it for?</td> </tr></table><span class="postbody">it deterimines if the default font map/tiles should be loaded.</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">PrintConsole* consoleInit(PrintConsole* console, int layer, BgType type, BgSize size, int mapBase, int tileBase, bool mainDisplay, bool loadGraphics);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167347 - hacker013 - Mon Mar 09, 2009 4:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>elhobbs wrote:</b></span></td> </tr> <tr> <td class="quote">the extra option is present in the version of libnds currently in svn</td> </tr></table><span class="postbody">
<br/>
<br/>
No, I have just the newest devkitARM r25 with the newest libnds 1.3.2 :)<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167351 - albinofrenchy - Mon Mar 09, 2009 6:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">it deterimines if the default font map/tiles should be loaded.</td> </tr></table><span class="postbody">
<br/>
<br/>
Makes sense I guess. 
<br/>
<br/>
I'm really trying to think of a reason I'd need that flag and I'm coming up blank. Good info though :-p
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">No, I have just the newest devkitARM r25 with the newest libnds 1.3.2 :)</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm back to wondering how your stuff compiled?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167353 - elhobbs - Mon Mar 09, 2009 6:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>albinofrenchy wrote:</b></span></td> </tr> <tr> <td class="quote">I'm really trying to think of a reason I'd need that flag and I'm coming up blank. Good info though :-p</td> </tr></table><span class="postbody">if you are using custom font tiles and they are already loaded then you may want to prevent the default tiles from loading and overwriting your custom tiles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167359 - albinofrenchy - Mon Mar 09, 2009 9:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">if you are using custom font tiles and they are already loaded then you may want to prevent the default tiles from loading and overwriting your custom tiles.</td> </tr></table><span class="postbody">
<br/>
<br/>
I thought about this, but I wondered about how good an idea it was to start putting tiles somewhere before you initialize the hardware flags for it. I guess its just memory though, and so it'd be fine. I guess if you are switching between different background modes too you might not want to take the gfx hit for no reason.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167360 - elhobbs - Mon Mar 09, 2009 9:57 pm</h4>
    <div class="postbody"><span class="postbody">I suspect it is there mainly to support multiple consoles. they can have different maps but share the same tiles.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167397 - hacker013 - Tue Mar 10, 2009 8:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>albinofrenchy wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">it deterimines if the default font map/tiles should be loaded.</td> </tr></table><span class="postbody">
<br/>
<br/>
Makes sense I guess. 
<br/>
<br/>
I'm really trying to think of a reason I'd need that flag and I'm coming up blank. Good info though :-p
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">No, I have just the newest devkitARM r25 with the newest libnds 1.3.2 :)</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm back to wondering how your stuff compiled?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I tryed your code and I get white screen Oo.<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167406 - albinofrenchy - Wed Mar 11, 2009 1:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I tryed your code and I get white screen Oo.</td> </tr></table><span class="postbody">
<br/>
<br/>
Try throwing a 'while(true){}' riiight after the printf. If it shows the "Success!" when you do that, you are goofing up video settings after that point.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167417 - hacker013 - Wed Mar 11, 2009 8:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>albinofrenchy wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I tryed your code and I get white screen Oo.</td> </tr></table><span class="postbody">
<br/>
<br/>
Try throwing a 'while(true){}' riiight after the printf. If it shows the "Success!" when you do that, you are goofing up video settings after that point.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Tryed, still white screen.<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
