<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Game running in Emu but not hardware - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Game running in Emu but not hardware</h2>
<div id="posts">
<div class="post">
    <h4>#139241 - doudou - Mon Sep 03, 2007 9:58 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I ported my GBA game to DS and it's running well on DeSmuME but on my DS I only see a black screen. I know the game is not freeze and progress correctly except for graphics since I'm able to log in the 2nd screen. 
<br/>
<br/>
Does someone has clues about differences between hardware and emu that could cause this. 
<br/>
<br/>
Also, should I use another emulator?
<br/>
<br/>
Thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139244 - DiscoStew - Mon Sep 03, 2007 10:34 pm</h4>
    <div class="postbody"><span class="postbody">Don't know what to tell ya except that emulators aren't perfect enough to really mimic hardware, plus we have no idea what you are doing without showing some code.
<br/>
<br/>
I use No$GBA for my DS projects, as I think it's the closest to accuracy in hardware operations, even if it is slow.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#139247 - wintermute - Mon Sep 03, 2007 11:06 pm</h4>
    <div class="postbody"><span class="postbody">Usually missing graphics on hardware but not the emulator are problems with the VRAM setup.
<br/>
<br/>
Personally I prefer no$gba - <a href="http://nocash.emubase.de/gba.htm" target="_blank">http://nocash.emubase.de/gba.htm</a> - it's the fastest and most accurate emulator around.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144067 - doudou - Sun Oct 28, 2007 10:48 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, using no$gba helped me to reach a great first step: my game backgrounds are displayed perfectly. 
<br/>
<br/>
I'm now only missing the sprites. Do you know a difference between EmuDS and No$Gba that would explain the different behavior I have for sprites.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144094 - doudou - Mon Oct 29, 2007 1:03 am</h4>
    <div class="postbody"><span class="postbody">Ok, all is fine finally.
<br/>
<br/>
videoSetMode(MODE_0_2D | BG0_ENABLE | BG1_ENABLE | BG2_ENABLE | BG3_ENABLE | DISPLAY_SPR_1D | DISPLAY_SPR_ACTIVE);
<br/>
<br/>
I was missing the DISPLAY_SPR_ACTIVE flag. I don't know how DSEmu works to be ok without this.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144161 - Quirky - Mon Oct 29, 2007 8:31 pm</h4>
    <div class="postbody"><span class="postbody">I've just tested nds-examples-20071023/Graphics/2D/Sprite_Bitmap and it seems to work OK. Commenting out the DISPLAY_SPR_ACTIVE...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 //set the video mode
<br/>
 videoSetMode(  MODE_0_2D | 
<br/>
//              DISPLAY_SPR_ACTIVE |    //turn on sprites
<br/>
                DISPLAY_BG0_ACTIVE |    //turn on background 0
<br/>
                DISPLAY_SPR_1D |        //this is used when in tile mode
<br/>
                DISPLAY_SPR_1D_BMP      //and this in bitmap mode
<br/>
                 );
<br/>
</td> </tr></table><span class="postbody">
<br/>
...correctly doesn't display the sprites in desmume-cli 0.7.3.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#144199 - M3d10n - Tue Oct 30, 2007 3:17 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>doudou wrote:</b></span></td> </tr> <tr> <td class="quote">I was missing the DISPLAY_SPR_ACTIVE flag. I don't know how DSEmu works to be ok without this.</td> </tr></table><span class="postbody">
<br/>
<br/>
It's very common for emus to fail to mimic exactly the initial state of the hardware (aka: what is enabled/disabled when the system boots). Even No$gba has a slightly different "default" state when compared to actual DS units, specially when it comes to 3D.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
