<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Grafix help - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Grafix help</h2>
<div id="posts">
<div class="post">
    <h4>#138311 - ubercatch22 - Wed Aug 22, 2007 9:06 pm</h4>
    <div class="postbody"><span class="postbody">Can someone help my?
<br/>
<br/>
i acnt seem to get the compiler to compile my code i aways get error
<br/>
<br/>
***no specific target and no make file found
<br/>
<br/>
can anyone help</span><span class="gensmall"><br/><br/>Last edited by ubercatch22 on Thu Aug 23, 2007 3:27 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#138322 - tepples - Wed Aug 22, 2007 11:16 pm</h4>
    <div class="postbody"><span class="postbody">How are you running make? Are you trying to double-click make.exe?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138327 - ubercatch22 - Wed Aug 22, 2007 11:32 pm</h4>
    <div class="postbody"><span class="postbody">I guess since im using devkitpro i open programmers note pad 2 and write my file and thne click on tools make or hit alt + 1 for short cut
<br/>
<br/>
the examples that comewith it work but mine do not 
<br/>
<br/>
but i have bypassed this by copying a example in to another folder and then over writing the ds code file
<br/>
<br/>
it seems to work for know</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138340 - tepples - Thu Aug 23, 2007 2:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ubercatch22 wrote:</b></span></td> </tr> <tr> <td class="quote">but i have bypassed this by copying a example in to another folder and then over writing the ds code file</td> </tr></table><span class="postbody">
<br/>
Good job. This is how most people start a libnds project: by copying the hello world project into a new folder and going from there.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138342 - ubercatch22 - Thu Aug 23, 2007 2:52 am</h4>
    <div class="postbody"><span class="postbody">yep i got it to work and did that but how do i get images on the ds i have been reading and it seems it needs to be in a .bin file formate.
<br/>
<br/>
if someone could help that would be great</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138361 - Dood77 - Thu Aug 23, 2007 8:14 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://filext.com/file-extension/BIN" target="_blank">http://filext.com/file-extension/BIN</a><br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138384 - Risine - Thu Aug 23, 2007 2:05 pm</h4>
    <div class="postbody"><span class="postbody">In your makefile, you probably have that lines to include bin files.
<br/>
#---------------------------------------------------------------------------------
<br/>
%.bin.o	:	%.bin
<br/>
#---------------------------------------------------------------------------------
<br/>
	@echo $(notdir $&lt;)
<br/>
	@$(bin2o)
<br/>
<br/>
You can add that for pcx image files. ( they must be 256 indexed coloured images. )
<br/>
#---------------------------------------------------------------------------------
<br/>
%.pcx.o	:	%.pcx
<br/>
#---------------------------------------------------------------------------------
<br/>
	@echo $(notdir $&lt;)
<br/>
	@$(bin2o)
<br/>
<br/>
And then you just need to load the pcx file in your code using gbfs :
<br/>
----------
<br/>
#include"gbfs.h"
<br/>
...
<br/>
char *data;
<br/>
sImage Img;
<br/>
WAIT_CR&amp;=~0x80;
<br/>
GBFS_FILE const *gbfs_file=find_first_gbfs_file((void*)0x08000000);
<br/>
data=(char *)gbfs_get_obj(gbfs_file,str_files[i],(u32 *)&amp;length);
<br/>
loadPCX((u8 *)data,&amp;Img);
<br/>
--------------
<br/>
----&gt;&gt;&gt; str_files[i] is the "case sensitive" name of the file.
<br/>
<br/>
You can do the same with all you data files ( just replace loadpcx with your own data reading functions ).
<br/>
Just read a little more things about gbfs, that's not that complicated to get in.
<br/>
These links are quite useful for beginners :
<br/>
<a href="http://www.double.co.nz/nintendo_ds/" target="_blank">http://www.double.co.nz/nintendo_ds/</a>
<br/>
<a href="http://www.dev-scene.com/NDS/Tutorials" target="_blank">http://www.dev-scene.com/NDS/Tutorials</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138393 - tepples - Thu Aug 23, 2007 4:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Risine wrote:</b></span></td> </tr> <tr> <td class="quote">GBFS_FILE const *gbfs_file=find_first_gbfs_file((void*)0x08000000);</td> </tr></table><span class="postbody">
<br/>
The find_first_gbfs_file function works only on ds.gba (aka sc.nds), not on the original GBA Movie Player or on SLOT-1 cards. But you can malloc() some space and load a GBFS file using libfat.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138394 - wintermute - Thu Aug 23, 2007 4:21 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Risine wrote:</b></span></td> </tr> <tr> <td class="quote">GBFS_FILE const *gbfs_file=find_first_gbfs_file((void*)0x08000000);</td> </tr></table><span class="postbody">
<br/>
The find_first_gbfs_file function works only on ds.gba (aka sc.nds), not on the original GBA Movie Player or on SLOT-1 cards. But you can malloc() some space and load a GBFS file using libfat.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
gbfs will work fine if it's embedded in the arm9 binary. One of the libnds examples does just this.
<br/>
<br/>
Image files do *not* need to be in a bin format, there are several ways to approach adding graphics to a ds binary.
<br/>
<br/>
First you can link the image file directly using the bin2o macro in the makefile - this will involve writing code on the DS to decode the image and convert to a DS native format.
<br/>
<br/>
In the default arm9 template all files place in any directory referred to by the DATA variable will be automatically added to the project as a binary file. 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
DATA      :=   data
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This names directories within the project folder at the same level as the makefile.
<br/>
<br/>
For each extension you want to use you should copy the .bin rule &amp; change the name to match.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
%.bin.o   :   %.bin
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
so, for .pcx files we add
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
%.pcx.o   :   %.pcx
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
and for .bmp files
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
%.bmp.o   :   %.bmp
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The bin2o rule creates a header which we can use to access this data which will take the form &lt;name&gt;_&lt;extension&gt;.h. This file will define &lt;name&gt;_&lt;extension&gt; and  &lt;name&gt;_&lt;extension&gt;_size
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// for test.bmp
<br/>
#include "test_bmp.h"
<br/>
<br/>
int test_size = test_bmp_size;
<br/>
char *test = test_bmp;
<br/>
<br/>
//for splash.pcx
<br/>
#include "splash_pcx.h"
<br/>
<br/>
int splash_size = splash_pcx_size;
<br/>
char *splash = splash_pcx;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You could also use libfat to load the graphics from your media device at runtime.
<br/>
<br/>
By far the simplest way is to use grit to convert your graphics to a DS native format at compile time. The current version of devkitARM includes a n earlier version of grit which is called git - the name was changed to avoid confusion with a linux application of the same name. Several of the examples use this approach to embed graphics.
<br/>
<br/>
Hopefully this all helps a bit but we can give more specific advice if you tell us exactly what you want to achieve. For instance "I want to use a file called logo.bmp and display it as a splash screen at startup"<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
