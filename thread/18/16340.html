<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Freeware/Opensource debugging tools for libnds - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Freeware/Opensource debugging tools for libnds</h2>
<div id="posts">
<div class="post">
    <h4>#165830 - Kaiser - Thu Jan 08, 2009 8:00 am</h4>
    <div class="postbody"><span class="postbody">I am looking for an alternative debugging tool other than the commercial version of NO$GBA (a free alternative tool that is..).
<br/>
<br/>
Trying to figure out problems and fixing unknown crashes is becoming pretty hectic and I would like to know if there's any known freeware/open source debuggers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165839 - elhobbs - Fri Jan 09, 2009 2:25 am</h4>
    <div class="postbody"><span class="postbody">desmume can be compiled from the svn with a gdb debug stub. I use this with insight that is included with the devkitARM installation. the only big thing missing with desmume is wifi support.
<br/>
<br/>
however, if you can cross compile to windows and or linux then that is probably the best solution.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165851 - Kaiser - Fri Jan 09, 2009 4:59 pm</h4>
    <div class="postbody"><span class="postbody">A gdb debug stub? I am a little unfamiliar with that. How would I go about generating one?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165852 - elhobbs - Fri Jan 09, 2009 6:37 pm</h4>
    <div class="postbody"><span class="postbody">you need to get the desmume source code from the sourceforge download page. you will need to compile it with GDB_STUB defined. this link <a class="postlink" href="http://forums.desmume.org/viewtopic.php?id=85" target="_blank">http://forums.desmume.org/viewtopic.php?id=85</a> has some info about using it. you can ignore the parts about getting the gdb stub code as it is already integrated into the desmume source. it is just not enabled in the prebuilt images.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165855 - gauauu - Fri Jan 09, 2009 9:24 pm</h4>
    <div class="postbody"><span class="postbody">The frustrating part, in my experience, is that desmume wasn't as accurate in dying and crashing as no$gba was.  I'd have problems in my code that caused serious issues on hardware and on no$gba, but were hard to debug, as desmume would play it just fine.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165858 - a128 - Fri Jan 09, 2009 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Searching for a software bug could be hell on the NDS with libnds . Luckily libnds has a blue screen exception handler. It prints a lot of usefull information about the state of the ARM9 at exception time.
<br/>
<br/>
Looking to a bunch of registers and memory adresses is not very sexy.
<br/>
<br/>
Here is a modified guru exception handler.
<br/>
<a class="postlink" href="http://a128.blogspot.com/2008_08_01_archive.html" target="_blank">http://a128.blogspot.com/2008_08_01_archive.html</a>
<br/>
<br/>
 Do
<br/>
<br/>
STACK_TRACE;
<br/>
<br/>
in your code. The handler records the last 21 STACK_TRACE calls and prints the history at guru meditation on the top screen of the NDS. Hope it's usefull for someone.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165867 - Abcd1234 - Sat Jan 10, 2009 4:04 am</h4>
    <div class="postbody"><span class="postbody">I've actually used Masscat's GDB stub quite successfully.  You can find it here:
<br/>
<br/>
<a href="http://masscat.afraid.org/ninds/debug_stub.php" target="_blank">http://masscat.afraid.org/ninds/debug_stub.php</a>
<br/>
<br/>
It allows you to debug your application directly on the DS by providing a remote GDB stub that you connect to over WiFi.  It's a bit flaky at times, but for the most part it works quite nicely, and has allowed me to track down some bugs (such as memory stompers) that would be virtually impossible to track down otherwise.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165868 - elhobbs - Sat Jan 10, 2009 5:53 am</h4>
    <div class="postbody"><span class="postbody">yes, desmume will happily read from invalid memory addresses as it does not implement the memory protection unit.
<br/>
<br/>
the libnds guru meditation screens are not that bad. you can usually use the address from PC or LR like so
<br/>
<br/>
arm-eabi-addr2line -e arm9.elf 0x02020000
<br/>
<br/>
to find the source file and line. stack overflow is another big issue on the ds. if SP is smaller than 0x0b000000 (like 0x0Afffff4) than you have overflowed the stack - too many local variables or recursion depth issues.
<br/>
<br/>
once I find the offending section of code then I will add some special code to trap the condition in desmume so I can step through it with insight.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165908 - Kaiser - Mon Jan 12, 2009 8:34 pm</h4>
    <div class="postbody"><span class="postbody">I don't know if this exists yet, but is the source code to arm-eabi-addr2line available?
<br/>
I was concidering intergrating it into my game so it would just print the line of the source file that caused the exception in the game.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165909 - Maxxie - Mon Jan 12, 2009 8:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>elhobbs wrote:</b></span></td> </tr> <tr> <td class="quote">yes, desmume will happily read from invalid memory addresses as it does not implement the memory protection unit.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well it does so if you enable that feature and compile it yourself. However that in most cases little usefull feature takes a lot of performance.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#ifdef MMU_ENABLE_ACL
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://nintendods.desperate-programmers.com/doku.php?id=wireless_io_map" target="_blank">Trying  to bring more detail into understanding the wireless hardware</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
