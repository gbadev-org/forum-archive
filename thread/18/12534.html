<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>3D on the subscreen - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > 3D on the subscreen</h2>
<div id="posts">
<div class="post">
    <h4>#119539 - krucraft - Sat Feb 24, 2007 2:48 am</h4>
    <div class="postbody"><span class="postbody">Hi, I am having trouble getting my graphics on the bottom screen. I originally had my 3D on the top screen and text on the bottom screen. I tried to change everything so that my 3D is on the bottom screen and text is on the top screen. I successfully put the text on the top screen but nothing is displayed on the bottom screen.
<br/>
<br/>
So far my code is as follows:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   // Setup the top screen for text 
<br/>
   vramSetMainBanks(   VRAM_A_MAIN_SPRITE,        //A and B maped consecutivly as sprite memory
<br/>
                        VRAM_B_MAIN_SPRITE,        //this gives us 256KB which is the max
<br/>
                        VRAM_C_MAIN_BG_0x6000000,  //map C to background memory
<br/>
                        VRAM_D_LCD                 //not using D
<br/>
                        ); 
<br/>
   videoSetMode(MODE_0_2D | DISPLAY_BG0_ACTIVE);   //bg 0 will be used to print text
<br/>
   BG0_CR = BG_MAP_BASE(31);//use bg0 for the text
<br/>
   BG_PALETTE[255] = RGB15(31,31,31);   //by default font will be rendered with color 255
<br/>
   // set up bottom screen for 3D
<br/>
   videoSetModeSub(MODE_0_3D);
<br/>
   
<br/>
   //consoleInit() is a lot more flexible but this gets you up and running quick
<br/>
   consoleInitDefault((u16*)SCREEN_BASE_BLOCK(31), (u16*)CHAR_BASE_BLOCK(0), 16);
<br/>
   
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Can anyone see what I am doing wrong?
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119541 - tepples - Sat Feb 24, 2007 2:53 am</h4>
    <div class="postbody"><span class="postbody">You need to put the text on the sub screen and the 3D on the main screen, and then call lcdMainOnBottom() to put the sub screen on top.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121883 - FRuMMaGe - Thu Mar 15, 2007 1:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">You need to put the text on the sub screen and the 3D on the main screen, and then call lcdMainOnBottom() to put the sub screen on top.</td> </tr></table><span class="postbody">
<br/>
<br/>
You can also use lcdSwap();</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121891 - silent_code - Thu Mar 15, 2007 1:57 pm</h4>
    <div class="postbody"><span class="postbody">but you should use lcdMainOnBottom(), as - in contrast to lcdSwap() - it's considered a safe method for most devices and loaders (lcdSwap() is relative, lcdMainOn...() is absolute).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
