<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Another Day, A new Texture Quadratic Demo - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Another Day, A new Texture Quadratic Demo</h2>
<div id="posts">
<div class="post">
    <h4>#41246 - Ethos - Tue Apr 26, 2005 11:09 pm</h4>
    <div class="postbody"><span class="postbody">Here is a demo showing off the functions:
<br/>
1) gluSphere 
<br/>
2) gluCylinder
<br/>
3) gluDisk
<br/>
4) gluPartialDisk
<br/>
5) good ole Dovoto's textured cube
<br/>
<br/>
All have the ability to be textured inside and outside.
<br/>
I have a bit more optimizing to do on the texture side...but I think I have the functions working pretty well. These functions will only work with GL_NONE (not smooth or FLAT), and GL_FILL (no point or line mapping?)
<br/>
<br/>
Press A to change the figure (or z on the PC):
<br/>
press B to increase the slices/stacks/loops between 8 and 16 (or a on the PC) 
<br/>
<br/>
<a class="postlink" href="http://www.student.cs.uwaterloo.ca/~jtmonagh/DS/texture.nds.gba" target="_blank">Demo[PassME Version]</a>
<br/>
<a class="postlink" href="http://www.student.cs.uwaterloo.ca/~jtmonagh/DS/texture.nds" target="_blank">Demo[ideas1.0.0.3 Version]</a>
<br/>
<br/>
Any comments? Bugs?</span><span class="gensmall"><br/><br/>Last edited by Ethos on Wed Apr 27, 2005 12:43 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#41254 - ecurtz - Tue Apr 26, 2005 11:32 pm</h4>
    <div class="postbody"><span class="postbody">If what you mean by "line mapping" is wireframe then you can enable that by setting the opacity to zero in the TextureMode(?) register (I don't have the docs or code here, it's normally set to 31 in the regular call.)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41257 - dagamer34 - Wed Apr 27, 2005 12:03 am</h4>
    <div class="postbody"><span class="postbody">For future demos, it would be a lot better if you were to test for a button press (keep a copy of the input register from the previous frame and compare it to the current one) instead of a certain bit being set. 
<br/>
<br/>
Holding the A button down quickly scolls through the models, which isn't all that desirable to me at least.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41262 - Cleon I - Wed Apr 27, 2005 12:26 am</h4>
    <div class="postbody"><span class="postbody">I agree, but for the purposes of this demo it works fine.
<br/>
<br/>
It seems to run pretty slow on anything but the cube.  Is that due to hardware limitations or lack of optimizations?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41263 - Ethos - Wed Apr 27, 2005 12:27 am</h4>
    <div class="postbody"><span class="postbody">Yeah, I noticed...especially on ideas....the faster your computer the faster it flips!!!!!!!!!!!
<br/>
<br/>
I fixed the demo (same link), it now will only flip to the next one per button press.
<br/>
Also I set the slices/stacks/loops to 8, if you press B (A on computer) if increase the slices/stacks/loops up to 16....
<br/>
<br/>
Notice the speed difference between 8 and 16 :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41283 - thetictacaddict - Wed Apr 27, 2005 3:05 am</h4>
    <div class="postbody"><span class="postbody">I just get one black (top) and one white (bottom) screen.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41284 - arog - Wed Apr 27, 2005 3:07 am</h4>
    <div class="postbody"><span class="postbody">Any chance you'll release the source code for this demo?
<br/>
<br/>
- Aaron Rogers
<br/>
<a href="http://www.aaronrogers.com/nintendods/" target="_blank">http://www.aaronrogers.com/nintendods/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41286 - Ethos - Wed Apr 27, 2005 3:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>thetictacaddict wrote:</b></span></td> </tr> <tr> <td class="quote">I just get one black (top) and one white (bottom) screen.</td> </tr></table><span class="postbody">
<br/>
<br/>
What are you running this on?
<br/>
I just d/l'd, flashed, and ran on h/w to double-check the link.
<br/>
<br/>
If you are running an emulator, you can only used ideas 1.0.0.3</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41287 - Ethos - Wed Apr 27, 2005 3:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>arog wrote:</b></span></td> </tr> <tr> <td class="quote">Any chance you'll release the source code for this demo?
<br/>
<br/>
- Aaron Rogers
<br/>
<a href="http://www.aaronrogers.com/nintendods/" target="_blank">http://www.aaronrogers.com/nintendods/</a></td> </tr></table><span class="postbody">
<br/>
<br/>
Source will be released when I have optimized glu routines.
<br/>
So probably in a week or so.
<br/>
<br/>
Hopefully dovoto isn't mad that I used his texture since I am still waiting for a PCXtoTexture tool...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41288 - thetictacaddict - Wed Apr 27, 2005 3:28 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ethos wrote:</b></span></td> </tr> <tr> <td class="quote">What are you running this on?
<br/>
I just d/l'd, flashed, and ran on h/w to double-check the link.</td> </tr></table><span class="postbody">
<br/>
Hardware.  It seems like it doesn't run right on FlashMe, but does on PassMe.  I didn't think to try my PassMe at first.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41290 - Ethos - Wed Apr 27, 2005 3:31 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>thetictacaddict wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ethos wrote:</b></span></td> </tr> <tr> <td class="quote">What are you running this on?
<br/>
I just d/l'd, flashed, and ran on h/w to double-check the link.</td> </tr></table><span class="postbody">
<br/>
Hardware.  It seems like it doesn't run right on FlashMe, but does on PassMe.  I didn't think to try my PassMe at first.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Odd, because my DS has the firmware upgrade and works fine (that is how I tested it).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41291 - thetictacaddict - Wed Apr 27, 2005 3:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ethos wrote:</b></span></td> </tr> <tr> <td class="quote">Odd, because my DS has the firmware upgrade and works fine</td> </tr></table><span class="postbody">
<br/>
That <span style="font-style: italic">is</span> odd.  I wonder if I should try re-flashing mine.  Do you know if the patch has changed at all?  I got mine early on, but I didn't hear anything about changes yet.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41297 - ecurtz - Wed Apr 27, 2005 5:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ethos wrote:</b></span></td> </tr> <tr> <td class="quote">Hopefully dovoto isn't mad that I used his texture since I am still waiting for a PCXtoTexture tool...</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm pretty sure dovoto built a PC version on the PCX to texture converter that I made as part of my MD2 conversion. It should be on his site in the Tools section. If not, PM or email me and I'll send you the source, which should either compile or require very minor fixes for your platform.
<br/>
<br/>
I've also had problems with demos built using the new, "tiny" loader.bin on flashed firmware. I think it's a known issue that they work with the hardware passMe or the override buttons only. I just went back to the previous version for my testing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41377 - Ethos - Wed Apr 27, 2005 11:24 pm</h4>
    <div class="postbody"><span class="postbody">Ok, a new Optimized version is now available (same link as above)^^^
<br/>
I also incorporated normal with GL_SMOOTH, GL_FLAT.
<br/>
<br/>
To switch Normal type , press the L button on the DS (ideas isn't mapping the button I think?)
<br/>
<br/>
Any more comments?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41379 - Locke - Wed Apr 27, 2005 11:35 pm</h4>
    <div class="postbody"><span class="postbody">How do you use GL_SMOOTH and GL_FLAT? I tried to find them in the ndslib code and I failed... Are them some flags or is just a term to reffer to vertex normals goraud and non-textured polys?
<br/>
<br/>
Btw, it seems that iDeaS has some problems with key mapping. The D-Pad axis seems to be inverted also.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41380 - Ethos - Wed Apr 27, 2005 11:38 pm</h4>
    <div class="postbody"><span class="postbody">My software adds another SIN/COS table which is used with SMOOTH and FLAT....it actually doesn't use the H/W at all
<br/>
<br/>
Shoulda said GLU_SMOOTH, GLU_FLAT :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41381 - Locke - Wed Apr 27, 2005 11:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ethos wrote:</b></span></td> </tr> <tr> <td class="quote">My software adds another SIN/COS table which is used with SMOOTH and FLAT....it actually doesn't use the H/W at all
<br/>
<br/>
Shoulda said GLU_SMOOTH, GLU_FLAT :)</td> </tr></table><span class="postbody">
<br/>
<br/>
Got it, thx ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41519 - Ethos - Fri Apr 29, 2005 1:12 pm</h4>
    <div class="postbody"><span class="postbody">Little update...
<br/>
<br/>
Code will not be released until after GBAX competition.
<br/>
(Between a small texture bug + more work to be done on routines, which I will be doing while making a competition entry)
<br/>
<br/>
Also I heard about the PCXtoTexture converter....
<br/>
well it sorta did a 8bit+palette texture.
<br/>
<br/>
So here is the code to replace in image.c (All the original source is at <a class="postlink" href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a> under DS-&gt;Tools-&gt;Graphics Converters)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int SaveNDS(char* filename, image_combined_t image)
<br/>
{
<br/>
   FILE *f;
<br/>
   int x,y;
<br/>
<br/>
   // Initialize data conversion
<br/>
   initLEData();
<br/>
<br/>
   if((f = fopen(filename, "wb")) == NULL)
<br/>
   {
<br/>
      return FALSE;
<br/>
   }
<br/>
<br/>
   // 16bit version of texture
<br/>
   
<br/>
   for (y=0;y&lt;image.height;y++)
<br/>
   {
<br/>
   for (x=0;x&lt;image.width;x++)
<br/>
   {
<br/>
      unsigned short color = 0;
<br/>
      int pixelIndex = x + y*image.width;
<br/>
      color = (image.data[(pixelIndex)*3 + 2]) &gt;&gt; 3;
<br/>
      color &lt;&lt;= 5;
<br/>
      color |= ((image.data[(pixelIndex)*3 + 1]) &gt;&gt; 3) &amp; 0x1F;
<br/>
      color &lt;&lt;= 5;
<br/>
      color |= ((image.data[(pixelIndex)*3]) &gt;&gt; 3) &amp; 0x1F;
<br/>
      color |= 0x8000;
<br/>
      fwrite(&amp;color,1,2,f);
<br/>
   }
<br/>
   }
<br/>
   fclose(f);
<br/>
   
<br/>
    return TRUE;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
A 16-bit texture which will work with the 3D texture examples.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
