<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Texture corruption - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Texture corruption</h2>
<div id="posts">
<div class="post">
    <h4>#62331 - thos_thom - Tue Nov 29, 2005 6:09 pm</h4>
    <div class="postbody"><span class="postbody">I have been working on a 3d landscape engine which i have working now, with great help from the ++many tutorials that came with devkitpro. I have complex structures texture mapped and lighting (with proper normals and everything), loaded from a structure.
<br/>
<br/>
I'm about to dive into the collisions and some physics simulations but i cant help but notice that my textures seem to come out strange colours. Just slighty off what they should be, or in some cases completly wrong colours.
<br/>
<br/>
i'm using libnds and code from the nehe conversion tutorials for loading textures.
<br/>
<br/>
My textures are drawn as full color pngs then converted to pcx indexed using photoshop (some really old cut down version).
<br/>
<br/>
Could it be photoshop doing somthing strange? has anyone else seen this?
<br/>
<br/>
thanks<br/>_________________<br/>--------------
<br/>
^thom(as)?
<br/>
--------------</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62334 - rmco2003 - Tue Nov 29, 2005 6:53 pm</h4>
    <div class="postbody"><span class="postbody">Corel Paint Shop Pro X can open and use both PNG and PCX formats, I'd reccomend giving that a try, I've had success with using it on some GBA demos I've made in the past.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62338 - dovoto - Tue Nov 29, 2005 7:44 pm</h4>
    <div class="postbody"><span class="postbody">Just how wrong is wrong?<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62414 - duencil - Wed Nov 30, 2005 7:20 pm</h4>
    <div class="postbody"><span class="postbody">A lot of the low contrast details get lost in the drop to 15 bit, something you cannot preview in photoshop. Might it just be that you're seeing?  I use an external converter for my images, to do the drop to 15 bit before palettization, using the excellent freely available cximage library. That way I can preview the converted image, and retouch it when necessary.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62424 - tepples - Wed Nov 30, 2005 8:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>duencil wrote:</b></span></td> </tr> <tr> <td class="quote">A lot of the low contrast details get lost in the drop to 15 bit, something you cannot preview in photoshop.</td> </tr></table><span class="postbody">
<br/>
Posterize to 32 levels per channel and see what that doesn't do.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62450 - duencil - Thu Dec 01, 2005 12:36 am</h4>
    <div class="postbody"><span class="postbody">Now that's interesting. Any idea about the method photoshop uses for calculating posterized rgbs? iIt should help to keep the pcx loader consistant.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#62460 - tepples - Thu Dec 01, 2005 5:25 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>duencil wrote:</b></span></td> </tr> <tr> <td class="quote">Now that's interesting. Any idea about the method photoshop uses for calculating posterized rgbs?</td> </tr></table><span class="postbody">
<br/>
I don't use Photoshop, but GIMP seems to use the following formula:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">round(pixelvalue * (posterlevels-1) / 255.0) * 255 / (posterlevels-1)</td> </tr></table><span class="postbody">
<br/>
<br/>
The integerized version of this formula is
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">((pixelvalue * (posterlevels-1) + 127) / 255 ) * 255 / (posterlevels-1)</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
