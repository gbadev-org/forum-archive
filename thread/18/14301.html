<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Object Rotation - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Object Rotation</h2>
<div id="posts">
<div class="post">
    <h4>#142579 - NeX - Wed Oct 10, 2007 4:05 pm</h4>
    <div class="postbody"><span class="postbody">I have two rotation variables; pitch (X) and roll (z).  I can get both of these to look absolutely correct by themselves, and as the rotation commands are one axis at a time, if I rotate along the X and then the Z each frame, the rotation looks fine until I roll and then pitch.  The object pitches up along the world axis.  If I do Z first, the roll is wrong.  It's something of a catch-22.  Is there a way to get it to rotate along both axis at once?<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142590 - Peter - Wed Oct 10, 2007 6:03 pm</h4>
    <div class="postbody"><span class="postbody">I guess you work with matrices?! Then just create the corresponding x,z rotation matrices and multiply them. The resulting matrix contains boths rotations.
<br/>
<br/>
My solution is too simple, I probably didn't understand your problem :-/ Hope it helps you anyway!<br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142594 - Miked0801 - Wed Oct 10, 2007 6:16 pm</h4>
    <div class="postbody"><span class="postbody">You do both at the same time, but if you add a 3rd rotation in at the same time, you can get something known as gimble lock.  This is where quaternions become your friend.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142600 - NeX - Wed Oct 10, 2007 7:30 pm</h4>
    <div class="postbody"><span class="postbody">Nope, I'm just after pitch and roll.  I'm trying to find out how exactly you would use a matrix.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142611 - tepples - Wed Oct 10, 2007 9:05 pm</h4>
    <div class="postbody"><span class="postbody">You can start at [[<a class="postlink" href="http://en.wikipedia.org/wiki/Transformation_matrix" target="_blank">Transformation matrix</a>]].<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142614 - NeX - Wed Oct 10, 2007 9:16 pm</h4>
    <div class="postbody"><span class="postbody">Alright... I've looked around and I believe by multiply the matrix, you mean multiply each item within by its counterpart in another.  But, won't this cause problems as there are quite a few zeroes in both?<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142615 - tepples - Wed Oct 10, 2007 9:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NeX wrote:</b></span></td> </tr> <tr> <td class="quote">Alright... I've looked around and I believe by multiply the matrix, you mean multiply each item within by its counterpart in another.</td> </tr></table><span class="postbody">
<br/>
You might be confusing standard <a class="postlink" href="http://en.wikipedia.org/wiki/Matrix_multiplication" target="_blank">matrix multiplication</a> with the <a class="postlink" href="http://en.wikipedia.org/wiki/Hadamard_product#Hadamard_product" target="_blank">Hadamard product</a> used in JPEG.
<br/>
<br/>
First you'll need to know what a <a class="postlink" href="http://en.wikipedia.org/wiki/Dot_product" target="_blank">dot product</a> is. Then each cell of the product is the dot product of the corresponding row of the first matrix with the corresponding column of the second matrix.
<br/>
<br/>
And the DS 3D hardware does most of this for you, so once you understand how it works, you won't need to optimize the matrix multiplication itself for speed.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142617 - NeX - Wed Oct 10, 2007 9:31 pm</h4>
    <div class="postbody"><span class="postbody">Think I'm getting it.  Thanks.  Unbelievable how wrapped in cotton wool you are when using a simplified language like Dark Basic.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142619 - NeX - Wed Oct 10, 2007 9:51 pm</h4>
    <div class="postbody"><span class="postbody">Have I got most of this right?  The screen is blank upon run.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      u16 ref=integ(wrapvalue512(xangle/360.0)*512);
<br/>
      xrot.m[0]=1;
<br/>
      xrot.m[4]=COS_bin[ref];
<br/>
      xrot.m[5]=SIN_bin[ref];
<br/>
      xrot.m[7]=-SIN_bin[ref];
<br/>
      xrot.m[8]=COS_bin[ref];
<br/>
      ref=integ(wrapvalue512(zangle/360.0)*512);
<br/>
      zrot.m[4]=COS_bin[ref];
<br/>
      zrot.m[3]=-SIN_bin[ref];
<br/>
      zrot.m[8]=1;
<br/>
      zrot.m[1]=SIN_bin[ref];
<br/>
      zrot.m[8]=COS_bin[ref];      
<br/>
<br/>
      glLoadMatrix4x4(&amp;xrot);
<br/>
      glMultMatrix4x4(&amp;zrot);
<br/>
      glPushMatrix();
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142621 - Peter - Wed Oct 10, 2007 10:12 pm</h4>
    <div class="postbody"><span class="postbody">Scroll down to the <span style="font-style: italic">Rotate</span> chapter, you'll find matrices for x,y,z rotation there: <a class="postlink" href="http://msdn2.microsoft.com/en-us/library/bb206269.aspx" target="_blank">Transforms (Direct3D 9)</a>.
<br/>
<br/>
Don't be afraid that's the Direct-X documentation. The MSDN is very good and there is more or less everything explained you need to know about how to work with matrices.
<br/>
<br/>
PS: If you don't really want to come up with your own matrix and vector math, you can download <a class="postlink" href="http://n3d.console-dev.de" target="_blank">N3D</a>. You don't need to use the render system (<a class="postlink" href="http://n3d.console-dev.de/docs/class_n3_d_d_e_v_i_c_e.html" target="_blank">N3DDEVICE</a>), but it provides <a class="postlink" href="http://n3d.console-dev.de/docs/group___n3_d_m_a_t_r_i_x.html" target="_blank">Matrix</a> and <a class="postlink" href="http://n3d.console-dev.de/docs/group___n3_d_v_e_c_t_o_r3.html" target="_blank">3D-Vector</a> math modules. The N3D Matrix and Vector modules are implemented in software (don't use any NDS matrix hardware feature), but matrix setup-code isn't really slow anyway, except the multiply is much faster done in hardware.
<br/>
<br/>
Using the N3D functions you code would be something like this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
N3DMATRIX matTrans;
<br/>
N3DMATRIX matRotX;
<br/>
N3DMATRIX matRotZ;
<br/>
<br/>
N3DMatrixTranlation(matTrans, xpos, ypos, zpos);
<br/>
N3DMatrixRotationX(matRotX, xangle_in_radians);
<br/>
N3DMatrixRotationZ(matRotZ, zangle_in_radians);
<br/>
<br/>
// I'm not sure about the multiplication order in opengl, so
<br/>
// maybe its the other way around.
<br/>
glLoadMatrix4x4(&amp;matRotZ);
<br/>
glMultMatrix4x4(&amp;matRotX);
<br/>
glMultMatrix4x4(&amp;matTrans);
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"><br/><br/>Last edited by Peter on Wed Oct 10, 2007 10:21 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#142622 - NeX - Wed Oct 10, 2007 10:16 pm</h4>
    <div class="postbody"><span class="postbody">I think it's merely the commands I'm using.  The helicopter is displaying.  The physics are working exactly as I want them.  Unfortunately, it's still not turning.  Do I have to multiply the SIN_bin[] and COS_bin[] by something?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
      glTranslate3f32(floattof32(xpos), floattof32(ypos), floattof32(zpos));
<br/>
<br/>
<br/>
      glPushMatrix();
<br/>
      u16 ref=integ(wrapvalue512(xangle/360.0)*512);
<br/>
      xrot.m[0]=1;
<br/>
      xrot.m[4]=COS_bin[ref];
<br/>
      xrot.m[5]=SIN_bin[ref];
<br/>
      xrot.m[7]=-SIN_bin[ref];
<br/>
      xrot.m[8]=COS_bin[ref];
<br/>
      ref=integ(wrapvalue512(zangle/360.0)*512);
<br/>
      zrot.m[4]=COS_bin[ref];
<br/>
      zrot.m[3]=-SIN_bin[ref];
<br/>
      zrot.m[8]=1;
<br/>
      zrot.m[1]=SIN_bin[ref];
<br/>
      zrot.m[8]=COS_bin[ref];      
<br/>
<br/>
      glLoadMatrix4x4(&amp;xrot);
<br/>
      glMultMatrix4x4(&amp;zrot);
<br/>
      glPopMatrix(1);
<br/>
      
<br/>
      glScalef(400.0,400.0,400.0);
<br/>
<br/>
                (Draw Helicopter)
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142627 - NeX - Wed Oct 10, 2007 10:56 pm</h4>
    <div class="postbody"><span class="postbody">I think it's about time I called it a day.  Still don't really understand how the matrix commands work, or what any of them actually do.  I've just found tutorials and fiddled with them.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
                //Do Something
<br/>
      glPushMatrix();
<br/>
      //gluLookAt(   -2.0, 0.5, -2.0,      //camera possition 
<br/>
      //      xpos, ypos, zpos,      //look at
<br/>
      //      0.0, 1.0, 0.0);      //up   
<br/>
      //X angle
<br/>
      u16 ref=integ(wrapvalue512(xangle/360.0)*512);
<br/>
      xrot.m[0]=1;
<br/>
      xrot.m[4]=COS_bin[ref];
<br/>
      xrot.m[5]=SIN_bin[ref];
<br/>
      xrot.m[7]=-SIN_bin[ref];
<br/>
      xrot.m[8]=COS_bin[ref];
<br/>
      //Z angle
<br/>
      ref=integ(wrapvalue512(zangle/360.0)*512);
<br/>
      zrot.m[4]=COS_bin[ref];
<br/>
      zrot.m[3]=-SIN_bin[ref];
<br/>
      zrot.m[8]=1;
<br/>
      zrot.m[1]=SIN_bin[ref];
<br/>
      zrot.m[8]=COS_bin[ref];
<br/>
      
<br/>
      //Scale Me
<br/>
      trans.m[0]=400;
<br/>
      trans.m[5]=400;
<br/>
      trans.m[10]=400;
<br/>
      trans.m[15]=1;
<br/>
      
<br/>
      //Move Me
<br/>
      trans.m[3]=integ(xpos*4096.0);
<br/>
      trans.m[7]=integ(ypos*4096.0);
<br/>
      trans.m[11]=integ(zpos*4096.0);
<br/>
      
<br/>
                //Stuff
<br/>
      glLoadMatrix4x4(&amp;xrot);
<br/>
      glMultMatrix4x4(&amp;zrot);
<br/>
      glMultMatrix4x4(&amp;trans);
<br/>
      
<br/>
           //Draw the helicopter using shoddy code
<br/>
      u8 i=0;
<br/>
      while(i&lt;64)
<br/>
      {
<br/>
         glBegin(GL_TRIANGLE);
<br/>
            glNormal(NORMAL_PACK(0,inttov10(-1),0));
<br/>
<br/>
            GFX_TEX_COORD = (TEXTURE_PACK(0, inttot16(127)));
<br/>
            glVertex3v16(BetterHeli[(i*9)+0],   BetterHeli[(i*9)+1],BetterHeli[(i*9)+2] );
<br/>
   
<br/>
            GFX_TEX_COORD = (TEXTURE_PACK(inttot16(127),inttot16(127)));
<br/>
            glVertex3v16(BetterHeli[(i*9)+3],   BetterHeli[(i*9)+4],BetterHeli[(i*9)+5] );
<br/>
   
<br/>
            GFX_TEX_COORD = (TEXTURE_PACK(inttot16(127), 0));
<br/>
            glVertex3v16(BetterHeli[(i*9)+6],   BetterHeli[(i*9)+7],BetterHeli[(i*9)+8] );
<br/>
<br/>
      
<br/>
         glEnd();
<br/>
         i++;
<br/>
      }
<br/>
                //And do something else
<br/>
      glPopMatrix(1);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That N3D sounds great.  How the hell do you install it?  On my PC, it reads the .h and throws error after error.  There are no installation instructions I can find.  I've put things where I guess they should go, but that's hardly going to work.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142629 - DekuTree64 - Wed Oct 10, 2007 11:12 pm</h4>
    <div class="postbody"><span class="postbody">One thing that could definitely cause weirdness is those integer constants. Matrices are 24.12 fixed-point, so they need to be shifted up 12 bits (I think the macro for it is called inttof32).
<br/>
<br/>
And if it still doesn't work, try setting the matrix mode to position-vector before doing the load/multiplies, just incase it's left to projection or something.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142630 - NeX - Wed Oct 10, 2007 11:19 pm</h4>
    <div class="postbody"><span class="postbody">It'd probably help if I had the faintest what half of you were talking about.  What does the matrix mode do?  Why?  How should I implement it?  I've probably made the most stupid mistake, but can't tell because to be quite honest I have no idea where half of the facts were plucked from.  Perhaps I should simply butcher the camera looking code.  Also, about installing libraries; how?  Where do I put all the stuff?  The installation guide for N3D is the vaguest passage I have read since I last did an English essay.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Installation
<br/>
This document describes how to install N3D.
<br/>
<br/>
Make sure to meet the Requirements. Once you have the required software and you can compile the libnds samples from devkitARM, it's easy going.
<br/>
<br/>
You solely have to extract the N3D .zip archive, which you probably just downloaded, to your devkitPro installation root folder. You should then find a "libn3d" directory there.
<br/>
<br/>
The libn3d directory contains all relevant N3D files, such as C++ header files, library files, utilities and this documentation of course. </td> </tr></table><span class="postbody">
<br/>
<br/>
At no point does it tell me what to do with <span style="font-style: italic">any</span> of the files on this entire page.  And no, just copying that folder to the root of devkitPro doesn't do anything.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142654 - Peter - Thu Oct 11, 2007 7:38 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NeX wrote:</b></span></td> </tr> <tr> <td class="quote">At no point does it tell me what to do with <span style="font-style: italic">any</span> of the files on this entire page.  And no, just copying that folder to the root of devkitPro doesn't do anything.</td> </tr></table><span class="postbody">
<br/>
Oh ok, I thought my "guide" is pretty straight forward, obviosly I was wrong :)
<br/>
<br/>
Here is a hopefully more complete one:
<br/>
<br/>
1) Extract libn3d.zip to /devkitpro
<br/>
2) Go to /devkitpro/libn3d/
<br/>
3) You should see dirctories named "include", "lib"
<br/>
<br/>
"include" contains all header files. You need to include "n3d.h" in your project. 
<br/>
<br/>
"lib" contains the libraries, which you need to link to your projct. "libn3d.a" is the release lib, "libn3d_d.a" the debug one. But in n3d v0.2 they are same.
<br/>
<br/>
Pass either _DEBUG or _RELEASE to the compiler to enable debug facilities or remove them. In _RELEASE mode more functions are inlined.
<br/>
<br/>
The makefiles of the n3d sample projects (in /devkitpro/n3d/samples) add the include and lib directories to the correspondng variables in makefile:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
# -ln3d = release lib
<br/>
# -ln3d_d = debug lib
<br/>
LIBS   := -lnds9 -ln3d
<br/>
<br/>
# compile with no debug stuff
<br/>
CFLAGS   += -D_RELEASE
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBNDS) $(DEVKITPRO)/libn3d
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142673 - NeX - Thu Oct 11, 2007 3:42 pm</h4>
    <div class="postbody"><span class="postbody">Thank you.
<br/>
Still get a screenful of errors though.  It seems to really dislike that there .h file.  Well, the types it includes to be specific.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
c:/devkitPro/libnds/include/n3d/n3dtypes.h:51: error: expected specifier-qualifier-list before 'inline'
<br/>
c:/devkitPro/libnds/include/n3d/n3dtypes.h:118: error: expected specifier-qualifier-list before 'inline'
<br/>
c:/devkitPro/libnds/include/n3d/n3dtypes.h:135: error: expected specifier-qualifier-list before 'inline'
<br/>
c:/devkitPro/libnds/include/n3d/n3dtypes.h:151: error: expected specifier-qualifier-list before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dtypes.h:180: error: expected specifier-qualifier-list before 'N3DCOLOR'
<br/>
c:/devkitPro/libnds/include/n3d/n3dtypes.h:197: error: expected specifier-qualifier-list before 'N3DCOLOR'
<br/>
In file included from c:/devkitPro/libnds/include/n3d/n3dtypes.h:483,
<br/>
                 from c:/devkitPro/libnds/include/n3d.h:70,
<br/>
                 from c:/devkitpro/Heli/source/main.c:3:
<br/>
c:/devkitPro/libnds/include/n3d/n3dcolor.inl:2: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dcolor.inl:6: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dcolor.inl:13: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
In file included from c:/devkitPro/libnds/include/n3d/n3dtypes.h:484,
<br/>
                 from c:/devkitPro/libnds/include/n3d.h:70,
<br/>
                 from c:/devkitpro/Heli/source/main.c:3:
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:8: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:16: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:24: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:32: error: expected '=', ',', ';', 'asm' or '__attribute__' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:41: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:49: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:57: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:68: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:79: error: expected '=', ',', ';', 'asm' or '__attribute__' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:88: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:99: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:110: error: expected '=', ',', ';', 'asm' or '__attribute__' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:119: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:130: error: expected '=', ',', ';', 'asm' or '__attribute__' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:139: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DFLOAT'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:151: error: expected '=', ',', ';', 'asm' or '__attribute__' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:161: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:169: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:177: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:185: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:193: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:201: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:215: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Abs'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:223: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Ceil'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:234: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Sign'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:250: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Lerp'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:258: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'DegreeToRadian'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:273: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'RadianToDegree'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:289: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Sin'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:316: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'SinRecip'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:324: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Cos'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:332: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'CosRecip'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:340: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Sqrt'
<br/>
c:/devkitPro/libnds/include/n3d/n3dfloat.inl:350: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Mul64'
<br/>
In file included from c:/devkitPro/libnds/include/n3d/n3dtypes.h:487,
<br/>
                 from c:/devkitPro/libnds/include/n3d.h:70,
<br/>
                 from c:/devkitpro/Heli/source/main.c:3:
<br/>
c:/devkitPro/libnds/include/n3d/n3dvector3.inl:2: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvector3.inl:6: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvector3.inl:13: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvector3.inl:20: error: expected '=', ',', ';', 'asm' or '__attribute__' before ':' token
<br/>
In file included from c:/devkitPro/libnds/include/n3d.h:71,
<br/>
                 from c:/devkitpro/Heli/source/main.c:3:
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:11: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:12: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:13: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DVec3Dot'
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:14: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DVec3Length'
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:15: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DVec3LengthSq'
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:16: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:17: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:18: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:19: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:20: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:21: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:22: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:23: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:24: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:32: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:33: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:34: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:35: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:36: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:37: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:38: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:39: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:40: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:41: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:42: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:43: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:44: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:45: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dmath.h:46: error: expected ')' before '&amp;' token
<br/>
In file included from c:/devkitPro/libnds/include/n3d/n3dmath.h:54,
<br/>
                 from c:/devkitPro/libnds/include/n3d.h:71,
<br/>
                 from c:/devkitpro/Heli/source/main.c:3:
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:19: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:39: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:62: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DVec3Dot'
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:80: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:100: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:114: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DVec3Length'
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:131: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DVec3LengthSq'
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:151: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:195: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:215: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:238: error: expected ')' before '&amp;' token
<br/>
c:/devkitPro/libnds/include/n3d/n3dvec3math.inl:259: error: expected ')' before '&amp;' token
<br/>
In file included from c:/devkitPro/libnds/include/n3d/nds/arm9/n3d_nds.h:25,
<br/>
                 from c:/devkitPro/libnds/include/n3d.h:79,
<br/>
                 from c:/devkitpro/Heli/source/main.c:3:
<br/>
c:/devkitPro/libnds/include/n3d/nds/arm9/n3ddevice.h:11: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'N3DDEVICE'</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142675 - NeX - Thu Oct 11, 2007 4:25 pm</h4>
    <div class="postbody"><span class="postbody">Wait, is this compatible with C or just C++?  Just C++.  Whoops.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142676 - Peter - Thu Oct 11, 2007 5:29 pm</h4>
    <div class="postbody"><span class="postbody">Yes, only C++.
<br/>
<br/>
However, I just briefly looked at the "Simple_Quad" example from libnds and it seems there are already functions that multiply the current transformation by a rotation matrix:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
 //move it away from the camera
<br/>
 glTranslate3f32(0, 0, floattof32(-1));
<br/>
<br/>
 glRotateX(rotateX);
<br/>
 glRotateY(rotateY);
<br/>
</td> </tr></table><span class="postbody">
<br/>
Why don't you use glRotateX and glRotateZ? :)<br/>_________________<br/>Kind Regards,
<br/>
Peter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142677 - NeX - Thu Oct 11, 2007 5:35 pm</h4>
    <div class="postbody"><span class="postbody">Because. if you read the original post, depending upon the order in which I use rotateX and rotateZ, the helicopter rotates properly in direction but not in the other.  I want to do both rotations at the same time, which you cannot do with the X and Z commands.  Multiplying the matricies overcomes this, right?  Please tell me I haven't just wasted all the time I spent trying to get the matricies to work.<br/>_________________<br/><a class="postlink" href="http://www.mediafire.com/?cuyb10fzdz2" target="_blank">Strummer</a> or <a class="postlink" href="http://www.mediafire.com/?71zxcztscix" target="_blank">Drummer?</a>.  
<br/>
Or maybe you would rather play with sand? <a class="postlink" href="http://www.mediafire.com/?a05z5wmdvxm" target="_blank">Sandscape is for you in that case.</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142690 - keldon - Thu Oct 11, 2007 11:14 pm</h4>
    <div class="postbody"><span class="postbody">You can use <a class="postlink" href="http://www.devmaster.net/articles/viewing-systems/" target="_blank">UVN vectors</a> to produce more complex rotations.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142692 - Anthius - Thu Oct 11, 2007 11:39 pm</h4>
    <div class="postbody"><span class="postbody">For a better understanding of what you're doing outside of the code you may want to look up "Rigid Body Dynamics"...  you can find a lot of really complicated stuff on it online, but if you can find a good basic sight it may help you solve the problem yourself (and give you a headache).  A lot of it is complicated, but there are 3 very simple matricies (you multiply your object's matrix by them) for pitch/roll/yaw controll... the matricies escape me at the moment...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142705 - Rajveer - Fri Oct 12, 2007 2:37 am</h4>
    <div class="postbody"><span class="postbody">If you want to try doing it yourself (read slow, information overload!):
<br/>
<br/>
Do a google search for 3D Affine Transformations. In this subject read up on the formulas for rotations and the derivation of a rotation matrix (and what each of it's columns/rows means). Read up on Euler angle rotations which is what glRotatex e.t.c. do (and which leads to gimbal lock i.e. your rotation problem), then read up on axis-angle rotations. These are the simplest type of rotation to understand as you simply have one axis and an angle to rotate it by, and any amount of axis-angle rotations can be combined together to produce a single matrix (i.e. multiplying, with the dot product, a matrix which rotates the helicopter in its x-axis and another which rotates it in its z-axis produces another matrix which you can simply multiply the modelview matrix by). Then you'll probably realise that what gimbal lock actually means is constantly rotating the helicopter around the world x, y and z axis instead of the helicopter's own x, y and z axis. By initially creating a 4x4 identity matrix for the helicopter and multiplying this matrix by x, y and z rotation matrices you will rotate the helicopter around it's own x, y or z axis each time.
<br/>
<br/>
Once you understand this all you'll realise how easy it is, its just grasping the concept which can be hard. Good luck!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142958 - silent_code - Mon Oct 15, 2007 3:48 pm</h4>
    <div class="postbody"><span class="postbody">quaternions anyone? they can be a pain, though.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
