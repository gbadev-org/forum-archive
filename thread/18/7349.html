<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Tile background problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Tile background problem</h2>
<div id="posts">
<div class="post">
    <h4>#59386 - alangerow - Tue Nov 01, 2005 8:53 am</h4>
    <div class="postbody"><span class="postbody">When trying <a class="postlink" href="http://headkaze.webpal.info/" target="_blank">Headspin's keyboard examples</a> (Extended Keyboard Example 4), I'm getting the first tile repeated for the bottom third of the screen. I've spent all night trying to get it to not do that, to no luck. I'm wondering if anyone may have any advice.
<br/>
<br/>
This is a screenshot of the problem:
<br/>
<a href="http://ds.spacemonkeymafia.com/images/screenshots/keyboard_bug.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
And here is a sample of the code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   videoSetMode(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG_0x6000000, VRAM_B_MAIN_BG_0x6020000,
<br/>
         VRAM_C_SUB_BG , VRAM_D_LCD);
<br/>
<br/>
   uint16 * map = (uint16 *) SCREEN_BASE_BLOCK(29);
<br/>
<br/>
   BG0_CR = BG_COLOR_16 | BG_32x32 | (29 &lt;&lt; SCREEN_SHIFT) | (1 &lt;&lt; CHAR_SHIFT);
<br/>
<br/>
   dmaCopy((uint16 *)keyboard_Palette, (uint16 *)BG_PALETTE, 32);
<br/>
   dmaCopy((uint16 *)keyboard_Map, (uint16 *)map, 1024);
<br/>
   dmaCopy((uint16 *)keyboard_Tiles, (uint16 *)CHAR_BASE_BLOCK(1), 14080);</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59399 - GPFerror - Tue Nov 01, 2005 2:55 pm</h4>
    <div class="postbody"><span class="postbody">this is what I did as a workaround to solve the same problem
<br/>
<br/>
first I ran this code
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   char a[10];
<br/>
   int i;
<br/>
   for(i=0;i&lt;10816;i++) {
<br/>
            if (keyboard_Tiles[i] == 0 ) {
<br/>
            
<br/>
            sprintf(a,"tile # %d",i);
<br/>
            print(a);
<br/>
            break;
<br/>
            }
<br/>
            }</td> </tr></table><span class="postbody">
<br/>
so I could figure out where in the keyboard map was a blank tile
<br/>
then I replace the above code with this
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">    for(int i=0;i&lt;768;i++) map[i] = 7008; //blank tile</td> </tr></table><span class="postbody">
<br/>
<br/>
where the 7008 was the tile number the code above found in my keyboard map. and that cleared the rest of the keyboard screen.
<br/>
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#59444 - alangerow - Tue Nov 01, 2005 9:19 pm</h4>
    <div class="postbody"><span class="postbody">Thank you! Your reply helped me not only figure out how to correct the problem, but it also helped me understand tiles more in general.  Thank you very much for the response.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
