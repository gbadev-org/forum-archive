<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>GBFS not working with DevKitArm r14 + latest libnds? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > GBFS not working with DevKitArm r14 + latest libnds?</h2>
<div id="posts">
<div class="post">
    <h4>#49570 - Extreme Coder - Sun Jul 31, 2005 12:53 pm</h4>
    <div class="postbody"><span class="postbody">Hi. As most of you know, ndslib was deleted and the one to continue being updated is libnds, as said on <a href="http://www.drunkencoders.com." target="_blank">www.drunkencoders.com.</a>
<br/>
I was using the ndsdev 2.4.0 setup(Devkitarm r12 +ndslib) and it was working fine with gbfs. Lately I deleted ndsdev, and made the environment on my own, using devkitarm r14 and the latest libnds from cvs. I used the same code I was using on the old setup to load gbfs file, but it didn't work. I finished every aspect in the program, I need to fix this before the neoflash compo deadline! If you could please solve my problem, I would be grateful.
<br/>
If you need the gbfs file loading code, I could show it. But its the same as the one in doublec gbfs tutorial.
<br/>
<br/>
Thanks in advance,
<br/>
Extreme Coder</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49595 - tepples - Sun Jul 31, 2005 7:40 pm</h4>
    <div class="postbody"><span class="postbody">In one of the more recent devkitARM revisions, the ARM9's .bss segment (used for uninitialized variables) was moved to EWRAM. If you have appended a GBFS file to the ARM9 binary, .bss will overwrite the GBFS file, causing find_first_gbfs_file() to fail. Use bin2s to turn your GBFS file into a .s file that you can compile into your project.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49598 - dovoto - Sun Jul 31, 2005 7:53 pm</h4>
    <div class="postbody"><span class="postbody">Or just drop the file into your 'data' directory and it will get automagicaly imported into your project (assuming you are using one of the more common template makfiles for libnds)<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49653 - Extreme Coder - Mon Aug 01, 2005 8:24 am</h4>
    <div class="postbody"><span class="postbody">But what if I want to append the file to the .nds/.ds.gba binary after compiling it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49674 - wintermute - Mon Aug 01, 2005 4:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Extreme Coder wrote:</b></span></td> </tr> <tr> <td class="quote">But what if I want to append the file to the .nds/.ds.gba binary after compiling it?</td> </tr></table><span class="postbody">
<br/>
<br/>
Then everything should be working fine.
<br/>
<br/>
Bear in mind that appending a gbfs in this way will not work when using wmb and currently you'll need to find some way of determining where your gbfs file is when using a multiloader.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49697 - Extreme Coder - Mon Aug 01, 2005 7:55 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Extreme Coder wrote:</b></span></td> </tr> <tr> <td class="quote">But what if I want to append the file to the .nds/.ds.gba binary after compiling it?</td> </tr></table><span class="postbody">
<br/>
<br/>
Then everything should be working fine.
<br/>
<br/>
Bear in mind that appending a gbfs in this way will not work when using wmb and currently you'll need to find some way of determining where your gbfs file is when using a multiloader.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
That's the problem I spoke of in the beginning of this thread. In my project, I used to append the file after compiling the .nds/.ds.gba binary.
<br/>
It worked using the ndsdev setup, but now using the new setup, it doesn't read the appended gbfs file.
<br/>
This is what the problem is all about. If you can, can you provide me with an example that WORKS with devkitarm r14 and the latest libnds.
<br/>
<br/>
Thanks,
<br/>
Extreme Coder</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49698 - josath - Mon Aug 01, 2005 8:06 pm</h4>
    <div class="postbody"><span class="postbody">Maybe you need to pad the .nds or .ds.gba before you append the gbfs? Sometimes they expect it to be a multiple of 256 bytes or something, to speed up searching for it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49716 - doublec - Mon Aug 01, 2005 11:30 pm</h4>
    <div class="postbody"><span class="postbody">Josath has it right. In devkitpro r14 you definitely need to padbin the binary:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">gbfs_demo1.nds: arm7.bin arm9.bin sounds.gbfs
<br/>
   ndstool -c gbfs_demo1.nds -9 arm9.bin -7 arm7.bin
<br/>
   padbin 256 gbfs_demo1.nds
<br/>
</td> </tr></table><span class="postbody">
<br/>
(from <a href="http://www.double.co.nz/nintendo_ds/nds_develop6.html" target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop6.html</a>)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49721 - cory1492 - Tue Aug 02, 2005 12:07 am</h4>
    <div class="postbody"><span class="postbody">Josath: have you tried to compile your ebook sample on R14? when padded it works, but very, very strangely... none of the text seems to be the correct color (yes, I know this is not gbfs, but still, a similar method of searching for a root entry, and the ebook txt is appeneded at the end of the nds) 
<br/>
<br/>
I have tried everything I was able to think of (even the 4.01 toolchain, which nets the same results with ultra tiny binaries) aside from moving on to gbfs to get it to work out proper, I havent been able to reason out what the change was that is causing it (the pallette data, I'm assuming, since changing the 6th member of the first array is the only change that seems to make any difference ) to work differently now (especially since subpixel font still works fine).
<br/>
<br/>
file padding should fix your FS right up E.Coder, all I was able to get was crashes without it on mine. (just so everyone knows padbin appears to be included with devkitARM )</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49931 - Sausage Boy - Wed Aug 03, 2005 7:53 pm</h4>
    <div class="postbody"><span class="postbody">I've struggled with gbfs for a week or something now, and no worky.
<br/>
<br/>
I'm converting data.gbfs to data.s with bin2s, and putting data.s in gfx so it gets compiled in (It echo's the filename when I make).
<br/>
<br/>
I figure there must be something wrong with my code, but I can't figure out what it is... :(
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   extern const GBFS_FILE *data_gbfs; 
<br/>
<br/>
   u32 desert_size = 0;
<br/>
   u8* desert = (u8*)gbfs_get_obj(data_gbfs, "desert.txt", &amp;desert_size);
<br/>
<br/>
   consolePrintf("\n\n\tHello DS devers\n");
<br/>
   consolePrintf("\twww.drunkencoders.com\n\n\n");
<br/>
<br/>
   consolePrintf("%x\n\n", desert_size);
<br/>
<br/>
   u32 curpos=0;
<br/>
<br/>
   while(curpos!=desert_size)
<br/>
   {
<br/>
      consolePrintf("%c", desert[curpos]);
<br/>
      curpos++;
<br/>
   }
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
That's obviously not the whole thing, but I figured the rest wasn't important.
<br/>
<br/>
Anyways, it's supposed to print the contents of desert.txt, but it only prints the Drunken Coders stuff.
<br/>
<br/>
Please, help!<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49934 - tepples - Wed Aug 03, 2005 8:17 pm</h4>
    <div class="postbody"><span class="postbody">Does it print the size? If so, try printing the address so that I can help you further. If it does not print the size, then there is likely a bug in consolePrintf().<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49935 - Sausage Boy - Wed Aug 03, 2005 8:20 pm</h4>
    <div class="postbody"><span class="postbody">It doesn't print the size.
<br/>
Do you have any better ideas for debugging it?<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49937 - jmva16 - Wed Aug 03, 2005 8:23 pm</h4>
    <div class="postbody"><span class="postbody">When you check to see if it is printing the size, make sure you do something like %08X in your printf.  This will force it to print at least 8 characters.  Otherwise, if the size is zero, it will not print anything.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49942 - Sausage Boy - Wed Aug 03, 2005 8:32 pm</h4>
    <div class="postbody"><span class="postbody">The size does indeed seem to be 0...
<br/>
<br/>
Must be because it's not opening the file properly.
<br/>
<br/>
Update:
<br/>
It seems to find the filesystem, but not the file...
<br/>
<br/>
When I print the address to data_gbfs, I get some value that looks good.
<br/>
The other pointer points to 0.
<br/>
<br/>
lsgbfs gives me
<br/>
17 desert.txt<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49955 - doublec - Wed Aug 03, 2005 11:35 pm</h4>
    <div class="postbody"><span class="postbody">Try printing the 'desert' address. It's possible that it's zero and therefore not finding the file you are looking for.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49962 - GPFerror - Thu Aug 04, 2005 12:13 am</h4>
    <div class="postbody"><span class="postbody">check your Makefile - I just finally got gbfs working, problem for me was in my Makefile 
<br/>
<br/>
I had 
<br/>
ARCH	:= -mthumb -mthumb-interwork
<br/>
<br/>
I changed it to
<br/>
<br/>
ARCH	:= -mthumb-interwork
<br/>
<br/>
and I can now add roms to my neopop port at least its working withing DSemu
<br/>
<br/>
Troy
<br/>
<br/>
here is my code
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">  WAIT_CR &amp;= ~0x80;
<br/>
  GBFS_FILE const* gbfs_file = 
<br/>
    find_first_gbfs_file((void*)0x08000000);
<br/>
<br/>
  //  int n=gbfs_count_objs(gbfs_file);
<br/>
  unsigned int length = 0; 
<br/>
  strcpy( (char *)rom.filename, "Snake.npc" );
<br/>
  //char* name;
<br/>
//  NP_rom_file* file = TheRom; 
<br/>
//                        printdbg(file-&gt;filename);
<br/>
    //uint8* ROM=*rom.data;
<br/>
    rom.data = (uint8*)gbfs_get_obj(gbfs_file, (char *)rom.filename, &amp;length); 
<br/>
<br/>
   rom.length=length;
<br/>
<br/>
   //rom.data = (_u8 *)calloc(rom.length, 1);
<br/>
<br/>
   
<br/>
   sprintf(tmp,"%s - %d\n",rom.filename,rom.length);
<br/>
  consolePrintf(tmp);
<br/>
   WAIT_CR |= 0x80;</td> </tr></table><span class="postbody">
<br/>
<br/>
command line to build my gbfs
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"> /c/devkitPro/devkitARM/bin/gbfs rom.gbfs rom/Snake.npc</td> </tr></table><span class="postbody">
<br/>
<br/>
and here is my CreateROM.sh file
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">padbin 256 NdsPop.nds
<br/>
cat NdsPop.nds rom.gbfs &gt;NdsNeoPop.nds
<br/>
cat ndsmall.bin NdsNeoPop.nds &gt; NdsNeoPop.nds.gba</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49971 - wintermute - Thu Aug 04, 2005 2:06 am</h4>
    <div class="postbody"><span class="postbody">the architecture should have no effect on appended data.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49998 - Sausage Boy - Thu Aug 04, 2005 1:03 pm</h4>
    <div class="postbody"><span class="postbody">It seems like printing data_gbfs gives me the first 4 bytes of the gbfs header, PinE.
<br/>
<br/>
Is it supposed to be that way? Isn't it supposed to print the address to those? I tried calling gbfs_get_obj with &amp;data_gbfs, but that gave me a compiler error.
<br/>
<br/>
I've also viewed the .nds in a hex editor, and the filesystem is in there.
<br/>
<br/>
Ok, I made it work, here's how I did it:
<br/>
<br/>
I used bin2s on the filesystem, and put that in the data directory, so it's included.
<br/>
I then used this little piece of code:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   extern const GBFS_FILE *data_gbfs;
<br/>
   const GBFS_FILE *data;
<br/>
   
<br/>
   data = (GBFS_FILE*)&amp;data_gbfs;
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
For some reason, data_gbfs contained the filesystem or something, and I needed a pointer, so I made another pointer. It works, anyways. :P
<br/>
<br/>
Note that this is for WiFi and not for cartridges.
<br/>
I didn't need the arch change GPFerror posted.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50015 - tepples - Thu Aug 04, 2005 4:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">It seems like printing data_gbfs gives me the first 4 bytes of the gbfs header, PinE.
<br/>
<br/>
Is it supposed to be that way?</td> </tr></table><span class="postbody">
<br/>
No.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I then used this little piece of code:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   extern const GBFS_FILE *data_gbfs;
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
There's your problem. Change it to this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   extern const GBFS_FILE  data_gbfs;
<br/>
</td> </tr></table><span class="postbody">
<br/>
Take the star out, and the rest should work.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50017 - Sausage Boy - Thu Aug 04, 2005 4:19 pm</h4>
    <div class="postbody"><span class="postbody">Thanks tepples. That was a slightly less complicated solution. :D
<br/>
<br/>
I also needed to change
<br/>
desert = (char*)gbfs_get_obj(data_gbfs, "desert.txt", &amp;desert_size);
<br/>
to
<br/>
desert = (char*)gbfs_get_obj(&amp;data_gbfs, "desert.txt", &amp;desert_size);
<br/>
<br/>
Sweet.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50023 - GPFerror - Thu Aug 04, 2005 4:54 pm</h4>
    <div class="postbody"><span class="postbody">yeah Im guessing I just had to make the arch change to get it to work in dsemu. 
<br/>
<br/>
The resulting file doesnt seem to work over wmb though, I think the issue with the toolkit r14 globals and mallocs overwriting the gbfs is my problem on hardware, maybe it would work from a flashcart?
<br/>
<br/>
For personal use I can use the bin2s method, but it would require others to have a dev setup to use my ported emulator to add roms, so they could run bin2s on their roms and rebuild, not exactly the easiest solution right now :)
<br/>
<br/>
Kind of in a catch-22 situation, I can't build the code with earlier toolkits and gbfs doesnt work the way I need it to for users adding there own roms. 
<br/>
Is there a work around, how does the snes emulator work for users adding there own roms?
<br/>
<br/>
thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50028 - tepples - Thu Aug 04, 2005 6:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>GPFerror wrote:</b></span></td> </tr> <tr> <td class="quote">The resulting file doesnt seem to work over wmb though, I think the issue with the toolkit r14 globals and mallocs overwriting the gbfs is my problem on hardware, maybe it would work from a flashcart?</td> </tr></table><span class="postbody">
<br/>
It probably would.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">For personal use I can use the bin2s method, but it would require others to have a dev setup to use my ported emulator to add roms, so they could run bin2s on their roms and rebuild, not exactly the easiest solution right now :)</td> </tr></table><span class="postbody">
<br/>
They'd have to have bin2s and binutils, but not gcc.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Is there a work around, how does the snes emulator work for users adding there own roms?</td> </tr></table><span class="postbody">
<br/>
You could make a 2 MB empty GBFS file, bin2s that into your game, and then have your injector copy the user's GBFS file on top of that byte region in your file.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50073 - wintermute - Fri Aug 05, 2005 12:37 am</h4>
    <div class="postbody"><span class="postbody">the latest libnds now contains gbfs, there is also an example of embedding a filesystem.
<br/>
<br/>
<a href="http://devkitpro.sourceforge.net" target="_blank">http://devkitpro.sourceforge.net</a>
<br/>
<br/>
I'll probably work up an example of an appended filesystem later. Bear in mind that data appended to the nds file  will only work from cart and not over wifi. As Tepples just mentioned the best way to handle that case is probably to embed a dummy filesystem &amp; write some code to overwrite it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50131 - ChronoDK - Fri Aug 05, 2005 7:11 pm</h4>
    <div class="postbody"><span class="postbody">An example of that last case (filesystem for wifi) would be nice too.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50143 - GPFerror - Fri Aug 05, 2005 11:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">You could make a 2 MB empty GBFS file, bin2s that into your game, and then have your injector copy the user's GBFS file on top of that byte region in your file.</td> </tr></table><span class="postbody">
<br/>
<br/>
thanks,  that worked great.
<br/>
<br/>
<br/>
<br/>
I couldnt find an injector anywhere so I wrote a quickone.
<br/>
It includes a windows commandline tool and the sourcecode.
<br/>
get it from my site <a href="http://gpf.dcemu.co.uk" target="_blank">http://gpf.dcemu.co.uk</a>
<br/>
its called <span style="font-weight: bold">gbfsinject.rar</span> under utilities on the left menu.
<br/>
for some reason the direct link is not working right now
<br/>
<a href="http://gpf.dcemu.co.uk/files/pc/gbfsinject.rar" target="_blank">http://gpf.dcemu.co.uk/files/pc/gbfsinject.rar</a>
<br/>
<br/>
usage:
<br/>
gbfsinject Ndsfile.nds Gbfsfile.gbfs Out.nds
<br/>
<br/>
Simple utility that looks for the string "PinEightGBFS" and injects the Gbfsfile.gbfs from that location, so make sure the the new gbfs file is not larger than the existing embedded gbfs.
<br/>
<br/>
Troy Davis(GPF)
<br/>
<a href="http://gpf.dcemu.co.uk" target="_blank">http://gpf.dcemu.co.uk</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50160 - tepples - Sat Aug 06, 2005 2:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>GPFerror wrote:</b></span></td> </tr> <tr> <td class="quote">usage:
<br/>
gbfsinject Ndsfile.nds Gbfsfile.gbfs Out.nds
<br/>
<br/>
Simple utility that looks for the string "PinEightGBFS" and injects the Gbfsfile.gbfs from that location, so make sure the the new gbfs file is not larger than the existing embedded gbfs.</td> </tr></table><span class="postbody">
<br/>
Does your program check to see that the file being replaced (empty.gbfs inside Ndsfile.nds) is at least as large as the file you're replacing it with (Gbfsfile.gbfs)? That should be easy, given that GBFS files store their length in a part of the structure for use with skip_gbfs_file().<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#50177 - GPFerror - Sat Aug 06, 2005 6:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Does your program check to see that the file being replaced (empty.gbfs inside Ndsfile.nds) is at least as large as the file you're replacing it with (Gbfsfile.gbfs)? That should be easy, given that GBFS files store their length in a part of the structure for use with skip_gbfs_file().</td> </tr></table><span class="postbody">
<br/>
<br/>
Not in this version, it was just a quick hack, so I could test it would work for my application. Hence the caveat. "make sure the the new gbfs file is not larger than the existing embedded gbfs." :)
<br/>
<br/>
But based on your comments, I started actually looking through the gbfs's code :) So maybe if I get a chance Ill hack something new up later.
<br/>
<br/>
Troy</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
