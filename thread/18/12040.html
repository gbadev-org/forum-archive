<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Odd size tiles - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Odd size tiles</h2>
<div id="posts">
<div class="post">
    <h4>#113545 - AN_D_K - Thu Dec 28, 2006 8:47 pm</h4>
    <div class="postbody"><span class="postbody">I have some artists asking me to program a DS demo for them. I'm currently working on the 2D tile part and have tiles working as long as they work on the 8x8 tiled screen.
<br/>
<br/>
However, the artists want to be awkward. They find 16x16 tiles too small, but 32x32 too big. I've stressed how the DS works but they want 21x21 tiles (well, 19x19 with a border).
<br/>
<br/>
Gah! Telling them "sod off and take your crazy ideas with you" isn't really an option.
<br/>
<br/>
I've accepted that the tiles must be power of two, but I was hoping there would be some way of being able to position a tile anywhere rather than attaching to the lowest 8.
<br/>
<br/>
Is there anyway to get around the 8x8 tile rule?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113548 - OOPMan - Thu Dec 28, 2006 9:36 pm</h4>
    <div class="postbody"><span class="postbody">Hmmmm, you could write your own manual tiling engine and store the tiles in main memory and output to them a BG. Of course, by doing so you negate most of the HW acceleration provided by the DS for things such as tiles...
<br/>
<br/>
If it's just for a demo, then this will probably be okay. If there's a plan to take things further though you probably will need to tell the artists to join the real world.
<br/>
<br/>
Have you considered using 32x32 tiles and padding the empty space with "invisble ink"?<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113549 - sirpoonga - Thu Dec 28, 2006 9:37 pm</h4>
    <div class="postbody"><span class="postbody">You could make your own tile engine that draws on an 8bit background.  However that might be slow.
<br/>
<br/>
That's an odd size, especially since the screen is 256x192.  Round peg, square hole.
<br/>
<br/>
Odd number dimension don't work well in an even number system.  Try centering a 21 pixel wide sprite on the screen...
<br/>
<br/>
The question that comes to my mind is if they are all tiles with borders are the tiles going to change?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113550 - Sunray - Thu Dec 28, 2006 9:39 pm</h4>
    <div class="postbody"><span class="postbody">I don't know much about the 2D modes, but with 3D (and orthographic projection) it should be as easy as power-of-two.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113551 - Dwedit - Thu Dec 28, 2006 9:42 pm</h4>
    <div class="postbody"><span class="postbody">On a GBA, you can use the scaling features to try to transform 24x24 tiles down to 19x19 tiles.  I'm not sure if the hardware scaling can reliably transform 24x24 tiles down to 19x19, and have the exact same pixels omitted each time.
<br/>
<br/>
I suggest you find out what pixels get omitted when you transform 24x24 down to 19x19, and see if they are consistent or not.  If they are, you can convert the 19x19 tiles up to 24x24 tiles for storage in VRAM, then let the hardware change them back down again.  If 19x19 can not work try 18x18, or suggest 24x24.
<br/>
<br/>
Tepples wrote a demo which uses the scaling capabilities to turn 8x8 tiles into 6x8 tiles, and it looks like there is no distortion. (see <a href="http://www.pineight.com/gba/" target="_blank">http://www.pineight.com/gba/</a> bottom of page)
<br/>
<br/>
And no, tile sizes do not need to be powers of two, just multiples of 8.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113553 - sajiimori - Thu Dec 28, 2006 9:53 pm</h4>
    <div class="postbody"><span class="postbody">Scaling and using the 3D hardware are both good options.
<br/>
<br/>
If you go the scaling route, you'll want to preprocess 21x21 tiles to duplicate a row and column per char.  You have to pick the right ones to duplicate so it'll look right -- that may require experimentation.
<br/>
<br/>
Edit: Oh, I guess you already said that, Dwedit.  :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113562 - NeX - Thu Dec 28, 2006 11:17 pm</h4>
    <div class="postbody"><span class="postbody">Tell them to comprimise at 24x24.  It's close to 21x21 and fits the hardware.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113578 - AN_D_K - Fri Dec 29, 2006 1:22 am</h4>
    <div class="postbody"><span class="postbody">I thought about 24 but the reason 21x21 was chosen was because there would only be a 2 pixel border at each end. 24 means a stupidly large border which would negate the resize from 32.
<br/>
<br/>
You're right about just manually doing it myself. I'd rather just tell them to grow up. It's not too hard ...just pointless and annoying.
<br/>
<br/>
3D probably won't cut it. The rescale probably won't work. 
<br/>
<br/>
What about using sprites ???</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113579 - Sausage Boy - Fri Dec 29, 2006 1:26 am</h4>
    <div class="postbody"><span class="postbody">What's the problem with 3d, and scaling?<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113583 - Lick - Fri Dec 29, 2006 1:45 am</h4>
    <div class="postbody"><span class="postbody">You can use sprites. Just use 32x32 sprites and align them in a grid of 21x21. When loading the 21x21 graphics, just add 11 pixels to the right and at the bottom. This creates a border (actually, a corner) of transparent pixels so it doesn't overlap another sprite/tile.
<br/>
If you run out of sprites [the hardware allows for 128], just reuse (search "hblank sprites") them.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Sausage Boy wrote:</b></span></td> </tr> <tr> <td class="quote">What's the problem with 3d, and scaling?</td> </tr></table><span class="postbody">
<br/>
<br/>
The 3D hardware doesn't do filtering so perhaps entire rows/columns of the graphics is lost. This isn't a problem with general textures, but if the graphics are pixel art, then it matters.. BIG TIME!<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113590 - sajiimori - Fri Dec 29, 2006 2:04 am</h4>
    <div class="postbody"><span class="postbody">AN_D_K,
<br/>
<br/>
I wasn't suggesting that you manually edit every tile that the artists produce to make it 24x24.  You would write a tool that duplicates a row and column per char so that a 24x24 tile will cleanly scale down to 21x21 with no dropout.  This is an entirely workable solution, assuming you can spare the affine BG.
<br/>
<br/>
As for 3D, orthographic projections can be used to map world coordinates straight to pixels.  Filtering is not an issue if all you want is a 1:1 mapping between texels and pixels.
<br/>
<br/>
Sprites could work, though you have to mess with HBlank, and you can't allocate as much VRAM to them, unless you can remap VRAM banks in the middle of VDraw, which is yet more gratuitous trickery.
<br/>
<br/>
At any rate, it's no use being afraid of a technique just because you think it might not work.  Why doncha try it?  ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113595 - Lick - Fri Dec 29, 2006 2:11 am</h4>
    <div class="postbody"><span class="postbody">After reading sajimori's post...
<br/>
<br/>
If you can get 3D to work at all, I would suggest loading the 21x21 into 32x32 textures (again, don't scale 'm but add transparent borders to the right and bottom). Then put quads (32x32) in a grid of 21x21 pixels. 
<br/>
<br/>
I should really start experimenting with the 3D hardware. I'm stuck with 2D..<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113597 - tepples - Fri Dec 29, 2006 2:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>AN_D_K wrote:</b></span></td> </tr> <tr> <td class="quote">I have some artists asking me to program a DS demo for them. I'm currently working on the 2D tile part and have tiles working as long as they work on the 8x8 tiled screen.
<br/>
<br/>
However, the artists want to be awkward. They find 16x16 tiles too small, but 32x32 too big. I've stressed how the DS works but they want 21x21 tiles (well, 19x19 with a border).</td> </tr></table><span class="postbody">
<br/>
Others have pointed out 24x24, which <span style="font-style: italic">Kirby Super Star</span> for Super NES uses. Is there a reason that the art department really needs the 19x19 with a border?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I've accepted that the tiles must be power of two, but I was hoping there would be some way of being able to position a tile anywhere rather than attaching to the lowest 8.
<br/>
<br/>
Is there anyway to get around the 8x8 tile rule?</td> </tr></table><span class="postbody">
<br/>
Yes. You can change the vertical by using hblank DMA to skip scanlines, and you can change the horizontal tile size to a multiple of 4 pixels by using two layers, one offset by four pixels. Both Puyo Pop (commercial GBA game) and Luminesweeper (homebrew GBA game) use these two techniques to make 12x12 pixel tiles. You could get 20x20 this way.
<br/>
<br/>
Or you could do it the Pengo way: make your entire playfield out of sprites. Commercial GBA games using this include <span style="font-style: italic">Puzzle League</span> (called <span style="font-style: italic">Panel de Pon</span> in Japan), <span style="font-style: italic">Super Puzzle Fighter II</span>, the Pac-Attack module of <span style="font-style: italic">Pac-Man Collection</span>, and quite a few <span style="font-style: italic">WarioWare</span> microgames. If you need more than 128, you can HDMA in new sprite display lists.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113635 - Sunray - Fri Dec 29, 2006 11:17 am</h4>
    <div class="postbody"><span class="postbody">If you go with 3D, make a tileset texture that contain many/all of your tiles. This texture can be 128x128 or 256x256 for example. An actual tile in this tileset can be any size, 21x21 is fine, no need for any scaling.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113670 - AN_D_K - Fri Dec 29, 2006 4:30 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the ideas and advice. 
<br/>
<br/>
As I mentioned before, 21x21 tiles was chosen because it fits the screen best with not too large and obstructive borders (2 pixels either end) and a nice 12x10 grid. If I go up to 24x24 then I'm stuck with a border of 4 pixels at either end. Down to 16 and they are too small for what the artists want to do. The ideal thing would be to be able to kick them in the nuts and say "it's 32x32 or nothing. punks".
<br/>
<br/>
I guess it depends upon the artist demands of how much memory they want to fill up. For the sprites, is the limit of 128 sprites for 8x8 sprites? So 32 for 16x16?
<br/>
<br/>
The 3D method is winning. Make some quads and draw the textures from the same big image as the tiles. May just take a bit of experimenting from the ideas given to find the one that produces the best results. 
<br/>
<br/>
If I did use a 3D tile then I should just be able to sample a 21x21 from the large texture and it will look spot on if the tile is scaled properly, right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113673 - FluBBa - Fri Dec 29, 2006 4:56 pm</h4>
    <div class="postbody"><span class="postbody">How do you cram 10 21x21 tiles vertically in 192 pixels?<br/>_________________<br/>I probably suck, my not is a programmer.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113674 - Lick - Fri Dec 29, 2006 4:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FluBBa wrote:</b></span></td> </tr> <tr> <td class="quote">How do you cram 10 21x21 tiles vertically in 192 pixels?</td> </tr></table><span class="postbody">
<br/>
With scrolling?<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113675 - Lick - Fri Dec 29, 2006 5:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>AN_D_K wrote:</b></span></td> </tr> <tr> <td class="quote">I guess it depends upon the artist demands of how much memory they want to fill up. For the sprites, is the limit of 128 sprites for 8x8 sprites? So 32 for 16x16?</td> </tr></table><span class="postbody">
<br/>
No, 128 sprites of all sizes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If I did use a 3D tile then I should just be able to sample a 21x21 from the large texture and it will look spot on if the tile is scaled properly, right?</td> </tr></table><span class="postbody">
<br/>
Yes.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113676 - AN_D_K - Fri Dec 29, 2006 5:11 pm</h4>
    <div class="postbody"><span class="postbody">You're right. It's 9 vertically! 3 pixels remainder ...so again, not too bad a border.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#113708 - tepples - Fri Dec 29, 2006 10:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>AN_D_K wrote:</b></span></td> </tr> <tr> <td class="quote">As I mentioned before, 21x21 tiles was chosen because it fits the screen best with not too large and obstructive borders (2 pixels either end) and a nice 12x10 grid.</td> </tr></table><span class="postbody">
<br/>
Players don't really care much about borders at the edges of the visible playfield. <span style="font-style: italic">Zoop</span> for Super NES used a grid of 18x14 tiles 12x14 pixels in size, for 216x196 pixels out of 256x224.
<br/>
<br/>
Are you sure about your math? 12x10 tiles 21x21 in size is 252*210, which is bigger than the DS screen.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If I go up to 24x24 then I'm stuck with a border of 4 pixels at either end. Down to 16 and they are too small for what the artists want to do. The ideal thing would be to be able to kick them in the nuts and say "it's 32x32 or nothing. punks".
<br/>
<br/>
I guess it depends upon the artist demands of how much memory they want to fill up. For the sprites, is the limit of 128 sprites for 8x8 sprites? So 32 for 16x16?</td> </tr></table><span class="postbody">
<br/>
The limit is 128 sprites at any size.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">The 3D method is winning.</td> </tr></table><span class="postbody">
<br/>
And DS-only, which limits your market.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
