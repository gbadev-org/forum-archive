<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS vs GBA exec speed - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > DS vs GBA exec speed</h2>
<div id="posts">
<div class="post">
    <h4>#119603 - Risine - Sat Feb 24, 2007 5:37 pm</h4>
    <div class="postbody"><span class="postbody">What's happening when you run a DS homebrew program from a GBA Card (Ez-flash 2) on a DS?
<br/>
Does it run at the speed of a GBA, or at the speed of a DS? ( concerning all memory accesses,vram,...)?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119604 - Diddl - Sat Feb 24, 2007 5:44 pm</h4>
    <div class="postbody"><span class="postbody">I#M not sure, but I think in GBA mode only the slow ARM7 CPU will work.
<br/>
<br/>
GBA: 33MHt ARM 7
<br/>
NDS: 33MHt ARM 7 and 66 MHz ARM 9 + big VRAM + 3d graphic + touchscreen + bigger screen and 2 screens</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119607 - tepples - Sat Feb 24, 2007 6:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Diddl wrote:</b></span></td> </tr> <tr> <td class="quote">I#M not sure, but I think in GBA mode only the slow ARM7 CPU will work.
<br/>
<br/>
GBA: 33MHt ARM 7</td> </tr></table><span class="postbody">
<br/>
Say what? In GBA mode, the ARM7 is underclocked to 16.78 MHz. The undocumented EWRAM overclocking register is also unavailable.
<br/>
<br/>
The DS screen updates 0.29% faster than the GBA screen, causing one repeated frame about every six seconds. This may cause an occasional flicker in a program that tries to exploit the pseudo-interlaced screen, along with a display lag of up to one frame.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119621 - Risine - Sat Feb 24, 2007 8:52 pm</h4>
    <div class="postbody"><span class="postbody">And what are the consequences on RAM accesses? Read&amp;Write? Are they affected?How?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119633 - GrizzlyAdams - Sat Feb 24, 2007 10:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Risine wrote:</b></span></td> </tr> <tr> <td class="quote">What's happening when you run a DS homebrew program from a GBA Card (Ez-flash 2) on a DS?
<br/>
Does it run at the speed of a GBA, or at the speed of a DS? ( concerning all memory accesses,vram,...)?</td> </tr></table><span class="postbody">
<br/>
<br/>
DS homebrew is loaded to main ram so cart speed has no effect on the actual program running. There are very few DS homebrew apps that actually run from GBA cart address space. I think DipStar might be one of said apps.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119710 - Risine - Sun Feb 25, 2007 2:36 pm</h4>
    <div class="postbody"><span class="postbody">Hummm, and what is that "undocumented EWRAM overclocking register is also unavailable"?
<br/>
Is EWRAM the RAM allocated/desallocated by new/delete functions?
<br/>
If so, does that mean that this unavailable register affect EWRAM access speed? How much?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119713 - tepples - Sun Feb 25, 2007 3:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Risine wrote:</b></span></td> </tr> <tr> <td class="quote">Hummm, and what is that "undocumented EWRAM overclocking register is also unavailable"?
<br/>
Is EWRAM the RAM allocated/desallocated by new/delete functions?</td> </tr></table><span class="postbody">
<br/>
Yes. It's also the RAM where code gets put in DS mode and in GBA programs linked as "multiboot".
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If so, does that mean that this unavailable register affect EWRAM access speed? How much?</td> </tr></table><span class="postbody">
<br/>
It doesn't affect the EWRAM speed unless the program writes to it, and very few non-test programs do this.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119804 - Risine - Mon Feb 26, 2007 2:56 pm</h4>
    <div class="postbody"><span class="postbody">I don't understand, if EWRAM is the memory allocated with new/delete, then all the programs use it, don't they? All programs allocates memory to write and read ( bitmaps,data,sound,...)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119806 - tepples - Mon Feb 26, 2007 3:07 pm</h4>
    <div class="postbody"><span class="postbody">All DS programs, all "multiboot" GBA programs, and most "cart" GBA programs read and write EWRAM. But almost none of them read and write <span style="font-style: italic">the register used to overclock</span> EWRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119935 - Risine - Tue Feb 27, 2007 5:27 pm</h4>
    <div class="postbody"><span class="postbody">Do you have numbers ( cycles number ) regarding R/W in RAM in both modes?
<br/>
And is it possible to run at the "DS speed" changing this registry?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#119981 - HyperHacker - Wed Feb 28, 2007 1:23 am</h4>
    <div class="postbody"><span class="postbody">There's no known way to clock the CPU up to 33mhz in GBA mode; it's probably not possible except perhaps with some hardware mod (which you could do on a GBA anyway). AFAIK the RAM is the same speed. You can't change the RAM speed in GBA mode on a DS; this was never a documented feature, so Nintendo was not obliged to include it.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120014 - Ant6n - Wed Feb 28, 2007 9:41 am</h4>
    <div class="postbody"><span class="postbody">you saying its possible to overclock gba?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120087 - dantheman - Thu Mar 01, 2007 12:10 am</h4>
    <div class="postbody"><span class="postbody">It's possible, though the only real use would be for slow emulators like SNES Advance.  There was once a company that installed mods called GBAccelerators, where you pressed a certain button combination to overclock/underclock the GBA (max speed was about 1.8x if I'm not mistaken), but they apparently went MIA a while ago.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120123 - HyperHacker - Thu Mar 01, 2007 4:29 am</h4>
    <div class="postbody"><span class="postbody">I recall hearing some games would crash when that mod was used too. Anyway it should be possible to overclock pretty much anything, though maybe not safely.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120172 - Epicenter - Thu Mar 01, 2007 2:14 pm</h4>
    <div class="postbody"><span class="postbody">Last I checked the GBA's ARM7 ran at ~16 MHz, NOT 33. The NDS' is rated for 33 MHz but only runs at this speed in NDS mode; it might break compatibility with some GBA games that ran unthrottled based only on the CPU's maximum possible speed rather than timing themselves by regular system interrupts.
<br/>
<br/>
However overclocking the GBA and NDS isn't too ideal. Unlike overclocking, say, the Megadrive/Genesis, you're not raising the clockrate of just the ARM7 or ARM9 execution core; you're raising the master system clock and therefore speeding up everything, making games run faster than they're supposed to, and screwing up audio pitch. Indeed if I performed such a modification on the GBA I'd only use it in slow emulators that I could set to Frameskip 0 so they slow down instead of skipping frames, and rendering web pages in Opera.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120178 - Risine - Thu Mar 01, 2007 4:36 pm</h4>
    <div class="postbody"><span class="postbody">So, to resume all that thread, using GBA flash card makes the DS program run like on a GBA, at the GBA speed, not the DS speed, doesn't it?
<br/>
What's the "speed" difference between the GBA and DS speed? *2? (16 to 33 Mhz )?
<br/>
What are the consequences on 3D use?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120219 - HyperHacker - Thu Mar 01, 2007 9:57 pm</h4>
    <div class="postbody"><span class="postbody">Using a GBA flash cart will not affect the CPU speed. It might be <span style="font-style: italic">slightly</span> slower because accessing GBA ROM takes a tiny bit longer than accessing RAM, but you aren't likely to notice a difference for the most part. 3D works fine.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120230 - Dracker - Thu Mar 01, 2007 10:20 pm</h4>
    <div class="postbody"><span class="postbody">Completely different concept. When you use a GBA flashcart in a DS to run DS code, the ARM7 will run at the DS speed, 33 MHz.<br/>_________________<br/><span style="font-weight: bold">--Drack</span>
<br/>
Onyx DS Lite, M3 Perfect Lite, Flashme V7, Flashed using SocketMe
<br/>
Gamecube DOL-001 with Qoob Pro
<br/>
Wii, not modded.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120240 - Risine - Fri Mar 02, 2007 12:04 am</h4>
    <div class="postbody"><span class="postbody">I'm getting mad!!! :)
<br/>
So, a DS program launched from a GBA cart runs at the DS speed????
<br/>
So, I really don't understand the 48 cycles for 1 short writing in RAM!!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120245 - dantheman - Fri Mar 02, 2007 12:11 am</h4>
    <div class="postbody"><span class="postbody">It might be simpler to forego all mention of the "cart" used and put it this way:  in DS mode, the ARM7 runs at 33 MHz.  In GBA mode, the ARM7 runs at 16.78 MHz.  It doesn't matter which slot it's booted from <span style="font-style: italic">if it's in DS mode</span>. 
<br/>
<br/>
Launch a slot-2 Supercard in GBA mode and boot a GBA homebrew application, and it will run at the slower speed.  Launch the Supercard in DS mode and boot a DS homebrew application, and it will run at the faster speed.  Launch the Supercard in DS mode but select a GBA application, and the DS will switch to GBA mode and will use the slower speed.</span><span class="gensmall"><br/><br/>Last edited by dantheman on Fri Mar 02, 2007 5:22 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#120278 - OOPMan - Fri Mar 02, 2007 7:49 am</h4>
    <div class="postbody"><span class="postbody">Except you reversed the speeds :-)
<br/>
<br/>
It runs at 33mhz in DS mode and 16.78mhz in GBA mode :-)<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120311 - dantheman - Fri Mar 02, 2007 5:21 pm</h4>
    <div class="postbody"><span class="postbody">Erm, yeah, that's what I meant.  Curse my <a class="postlink" href="http://en.wikipedia.org/wiki/Dyslexia" target="_blank">Lysdexia</a>...
<br/>
<br/>
I'll edit the post to fix it.  Thanks for the correction.
<br/>
<br/>
On a side note, the wiki article for Lysdexia used to simply redirect to Dyslexia, and I found it hilarious.  It's a shame it doesn't do that anymore.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120326 - Risine - Fri Mar 02, 2007 10:00 pm</h4>
    <div class="postbody"><span class="postbody">Well, it seems I'm running at the good "NDS speed" then. :)
<br/>
Still have to understand those damn 48 cycles/write in RAM, can't believe it's so slow, I must have made a mistake somewhere for sure. :(</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
