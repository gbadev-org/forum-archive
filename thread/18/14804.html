<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Repeating Texture - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Repeating Texture</h2>
<div id="posts">
<div class="post">
    <h4>#148586 - iainprice - Mon Jan 07, 2008 6:44 pm</h4>
    <div class="postbody"><span class="postbody">If I have a square face, and a square texture, I know I can fit the texture to the face.....
<br/>
<br/>
Is there a way of repeating the texture? So that I have 4 or 16 copies of the texture on the face?
<br/>
<br/>
Cheers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148587 - Lick - Mon Jan 07, 2008 6:49 pm</h4>
    <div class="postbody"><span class="postbody">Set the U and V values higher than 1.0.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148591 - nipil - Mon Jan 07, 2008 7:31 pm</h4>
    <div class="postbody"><span class="postbody">Just to precise, UV greater (or lower) than one will put multiple (or partial )times the texture along the given axe.
<br/>
<br/>
Let's say your texture looks like this :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0,0     U    1,0
<br/>
 +------------+
<br/>
 |111111222222|
<br/>
 |111111222222|
<br/>
V|111111222222|
<br/>
 |333333444444|
<br/>
 |333333444444|
<br/>
 |333333444444|
<br/>
 +------------+
<br/>
0,1          1,1</td> </tr></table><span class="postbody">
<br/>
<br/>
Let's say you have a square quad with top left (u=v=0) bottom right (u=2.5, v = 5). The quad would look like this :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">0,0   U  2.5,0
<br/>
 +----------+
<br/>
 |1122112211|
<br/>
 |1122112211|
<br/>
V|1122112211|
<br/>
 |1122112211|
<br/>
 |1122112211|
<br/>
 |1122112211|
<br/>
 +----------+
<br/>
0,0.5    2.5,0.5</td> </tr></table><span class="postbody">So basically, you have 2+1/2 texture horizontally and 1/2 texture vertically :
<br/>
=&gt; UV &gt; 1 equals repeating
<br/>
=&gt; UV &lt; 1 equals partial texture.
<br/>
<br/>
This is very useful, for example on long polygons (walls anyone ?). For example if your wall is let's say 10 meters long and 2 m high, and you have a texture of a single brick of "size" 0.2m x 0.1m, you draw a single polygon :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   (0 , 0)                 U                    (0 , 10/0.2)
<br/>
        .                                     .
<br/>
          0,2              X             10,2
<br/>
           +-------------------------------+
<br/>
           |                               |
<br/>
           |                               |
<br/>
     V    Y|                               |
<br/>
           |                               |
<br/>
           |                               |
<br/>
           +-------------------------------+
<br/>
          0,0                            10,0
<br/>
        .                                     .
<br/>
   (0 , 2/0.1)                                  (2/0.1 , 10/0.2)</td> </tr></table><span class="postbody">
<br/>
<br/>
Which will, in only 1 instruction, draw the wall <span style="font-style: italic">and "fill" it with 50 bricks horizontally and 20 bricks vertically.</span>
<br/>
This is far better than drawing 50x20 quads and map the texture each time, for the same quality (or better) and <span style="font-style: italic">far less computing</span>.
<br/>
<br/>
Me think you can even have negative UV (on a PC at least) to "mirror/flip" the texture. It's been a while i haven't used OpenGL so i'm not all that sure about the negative UV. Just try ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148596 - simonjhall - Mon Jan 07, 2008 7:51 pm</h4>
    <div class="postbody"><span class="postbody">Don't forget to turn texture wrapping on though.
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#ds3dtextureattributes" target="_blank">http://nocash.emubase.de/gbatek.htm#ds3dtextureattributes</a>
<br/>
Teh bits 16 and 17, y'all. Or GL_TEXTURE_WRAP_S and GL_TEXTURE_WRAP_T for those who use libnds...<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148620 - iainprice - Mon Jan 07, 2008 11:17 pm</h4>
    <div class="postbody"><span class="postbody">I follow the idea but am having trouble in code:
<br/>
<br/>
GFX_TEX_COORD = TEXTURE_PACK(inttot16(32),inttot16(32));
<br/>
glVertex3v16(LEFTZ BOT, 0);
<br/>
GFX_TEX_COORD = TEXTURE_PACK(inttot16(32),inttot16(64));
<br/>
glVertex3v16(RIGHT, BOT, 0);
<br/>
GFX_TEX_COORD = TEXTURE_PACK(0,inttot16(64));
<br/>
glVertex3v16(RIGHT, TOP, 0);
<br/>
GFX_TEX_COORD = TEXTURE_PACK(0,inttot16(32));
<br/>
glVertex3v16(LEFT, TOP, 0);
<br/>
<br/>
This draws a quad. It uses:
<br/>
<br/>
0 0 0 0
<br/>
0 0 0 0
<br/>
1 1 0 0 
<br/>
1 1 0 0
<br/>
<br/>
part of a 64x64 texture... I want this texture 4 times on the quad.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148628 - M3d10n - Tue Jan 08, 2008 12:58 am</h4>
    <div class="postbody"><span class="postbody">Texture coordinates on the DS uses texels, not ratios. So, if you have a 64x64 texture and want to display it entirely (without repeating), use the following values (using inttot16):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">(0,0)---------(0,64)
<br/>
  |              |
<br/>
  |              |
<br/>
  |              |
<br/>
  |              |
<br/>
  |              |
<br/>
  |              |
<br/>
(0,64)--------(64,64)</td> </tr></table><span class="postbody">
<br/>
<br/>
If you want it to repeat 2x on each axis, just double the value. You can also use a texture matrix to scale your coordinates (actually, this allows you to get more tiles without overflowing the 16-bit texture coordinates):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glMatrixMode(GL_TEXTURE);
<br/>
glLoadIdentity();
<br/>
glScalef32(inttof32(2));
<br/>
//DRAW YOUR QUAD HERE!</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148671 - iainprice - Tue Jan 08, 2008 6:52 pm</h4>
    <div class="postbody"><span class="postbody">Hmmm nearly works.....
<br/>
<br/>
I have a 64x64 texture but only want to use a 32x32 bit of it..... if I use the following code:
<br/>
<br/>
[code]	
<br/>
glMatrixMode(GL_TEXTURE); 
<br/>
glLoadIdentity(); 
<br/>
glScalef32(inttof32(4)); 
<br/>
GFX_TEX_COORD = TEXTURE_PACK(inttot16(32),inttot16(32));
<br/>
glVertex3v16(LEFTZ, BOTX, 0);
<br/>
GFX_TEX_COORD = TEXTURE_PACK(inttot16(32),inttot16(64));
<br/>
glVertex3v16(RIGHTZ, BOTX, 0);
<br/>
GFX_TEX_COORD = TEXTURE_PACK(0,inttot16(64));
<br/>
glVertex3v16(RIGHTZ, TOPX, 0);
<br/>
GFX_TEX_COORD = TEXTURE_PACK(0,inttot16(32));
<br/>
glVertex3v16(LEFTZ, TOPX, 0);
<br/>
[/code]
<br/>
<br/>
it displays all 64x64....  :(
<br/>
<br/>
yes it does shrink and repeat the texture but all of it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148686 - M3d10n - Tue Jan 08, 2008 10:35 pm</h4>
    <div class="postbody"><span class="postbody">Ah, I understand now. What you want to do isn't supported by the hardware: you can't tile only part of a texture. You'll have to either cut your texture or use several quads for each tile.
<br/>
<br/>
Even on PC GPUs, you have to jump a few hoops to do this (using shaders).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148690 - iainprice - Tue Jan 08, 2008 11:06 pm</h4>
    <div class="postbody"><span class="postbody">poo
<br/>
<br/>
Thanks for the help......</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148708 - Rajveer - Wed Jan 09, 2008 3:43 am</h4>
    <div class="postbody"><span class="postbody">What I do is store textures I want to repeat separately, which is what you kinda have to do.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#148720 - melw - Wed Jan 09, 2008 10:17 am</h4>
    <div class="postbody"><span class="postbody">Just create a new 32x32 texture for tiling that one corner of a 64x64 texture. It's not like the DS doesn't have any VRAM at all. :) Other solution is to draw the amount of "tiles" you want in quads*quads and set texture coordinates accordingly for each quad. This might just make sense if you're out of texture memory but loose on the polygon budget...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
