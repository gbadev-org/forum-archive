<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>can run libfat game in emulator, but not on M3 Simply - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > can run libfat game in emulator, but not on M3 Simply</h2>
<div id="posts">
<div class="post">
    <h4>#129413 - snowsquirrel - Tue May 22, 2007 5:42 pm</h4>
    <div class="postbody"><span class="postbody">Ok, so I finally go an M3 simply. My first flash cart. I have been working on my ds homebrew title using an emulator so far.
<br/>
<br/>
My game uses libfat, to read a few files. No writing, or directory traversing.
<br/>
<br/>
I create a fat12 fs  as part of the rom with fcsrimage.
<br/>
<br/>
To run it in the emulator, I patch it using dlditool FlashCartSRam driver. 
<br/>
<br/>
I assumed, that to run it on the M3, I would have to patch the .nds with the r4 driver. But when I copy my .nds to the m3, and try to launch it, the DS just freezes, at the loading game screen.
<br/>
<br/>
What am I doing wrong here?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129414 - Diddl - Tue May 22, 2007 5:56 pm</h4>
    <div class="postbody"><span class="postbody">you should be able to run your fcsrimage directly on your M3 simply. but you also could copy your files directly to the TF card of your M3 and patch your NDS file with M3/R4 DLDI driver</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129415 - snowsquirrel - Tue May 22, 2007 6:01 pm</h4>
    <div class="postbody"><span class="postbody">oh, that is what I was doing wrong.  I will try the fcsr image tonight.
<br/>
<br/>
So the r4 driver is only if I want my files loose on cf card.
<br/>
<br/>
If I don't want my files loose, do I even need libfat?
<br/>
<br/>
Thanks.
<br/>
~S</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129421 - GPFerror - Tue May 22, 2007 7:07 pm</h4>
    <div class="postbody"><span class="postbody">i'm pretty sure appended fcsr images won't work on slot1 cards, but I haven't tested it. Since fcsr stands for FlashCart Sram.
<br/>
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129422 - Diddl - Tue May 22, 2007 7:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>snowsquirrel wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If I don't want my files loose, do I even need libfat?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
loose? need libfat?
<br/>
<br/>
with libfat you cann full access whole micro SD card on your M3. usually a game (like doom or quake) uses his own directory for it's data files.
<br/>
<br/>
libfat ist the easiest way to access data on a filesystem. if you don't want to use it, you also can use gba_nds_fat or you can use normal savegame memory area like any commercial rom does it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129425 - snowsquirrel - Tue May 22, 2007 7:25 pm</h4>
    <div class="postbody"><span class="postbody">I am just loading binary game data.  Not writing anything.  I don't need access to the whole micro SD card.
<br/>
<br/>
If fcsr won't work on a slot-1 cart, is libfat the only thing that will?
<br/>
<br/>
~S</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129436 - Tantrum - Tue May 22, 2007 9:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>snowsquirrel wrote:</b></span></td> </tr> <tr> <td class="quote">I am just loading binary game data.  Not writing anything.  I don't need access to the whole micro SD card.
<br/>
<br/>
If fcsr won't work on a slot-1 cart, is libfat the only thing that will?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
If all your data fits in to RAM then just compile it in, otherwise libfat is the only thing that will work for loading data on slot-1.  If you still want an appended filesystem then take a look at EFS lib,
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=13195" target="_blank">http://forum.gbadev.org/viewtopic.php?t=13195</a>
<br/>
<br/>
It requires libfat and DLDI patching, but at least your data is part of the nds file.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129439 - snowsquirrel - Tue May 22, 2007 9:28 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, that is what I wanted to know.
<br/>
~S</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129477 - Lino - Wed May 23, 2007 5:03 am</h4>
    <div class="postbody"><span class="postbody">The new version of iDeaS support DLDI for R4. I hope...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129492 - Diddl - Wed May 23, 2007 7:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lino wrote:</b></span></td> </tr> <tr> <td class="quote">The new version of iDeaS support DLDI for R4. I hope...</td> </tr></table><span class="postbody">
<br/>
<br/>
this would be cool!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129542 - GPFerror - Wed May 23, 2007 5:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lino wrote:</b></span></td> </tr> <tr> <td class="quote">The new version of iDeaS support DLDI for R4. I hope...</td> </tr></table><span class="postbody">
<br/>
<br/>
cool, in released version, or next version? 
<br/>
<br/>
I tried patching my homebrew stuff with the r4tf.dldi but still failed when trying to init libfat.
<br/>
<br/>
also any chance of getting dslinux working again in ideas, i miss being able to use it to code away from my ds :) 
<br/>
<br/>
desmume has limited support if you use an appended fcsr image to the converted nds-&gt;ds.gba and patch it with the fcsr.dldi driver but it is cool cause it emulates the 32mb that a slot2 card might have :)
<br/>
<br/>
Thanks,
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
