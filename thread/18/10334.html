<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Best resource for understanding video modes and memory? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Best resource for understanding video modes and memory?</h2>
<div id="posts">
<div class="post">
    <h4>#92194 - TheRain - Wed Jul 12, 2006 1:01 am</h4>
    <div class="postbody"><span class="postbody">So far, one of the biggest hurdles for learning DS programming with libds has been understanding video modes and how vram is mapped and such... are there any good resources for understanding this??</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92238 - kvance - Wed Jul 12, 2006 7:56 am</h4>
    <div class="postbody"><span class="postbody">I couldn't find one resource that had it all.  There are a lot of good graphics examples in the nds-examples package, which you can download separately from devkitPro.  As far as info, these pages were useful for me:
<br/>
<br/>
<a href="http://tobw.net/dswiki/index.php?title=Graphic_modes" target="_blank">http://tobw.net/dswiki/index.php?title=Graphic_modes</a>
<br/>
<a href="http://www.double.co.nz/nintendo_ds/nds_develop10.html" target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop10.html</a>
<br/>
<a href="http://www.dspassme.com/programmers_guide/tutorial/using_tiles.html" target="_blank">http://www.dspassme.com/programmers_guide/tutorial/using_tiles.html</a>
<br/>
<br/>
I summarized what I learned about using the hardware backgrounds <a class="postlink" href="http://kvance.livejournal.com/959912.html" target="_blank">here</a>, but it probably only scratches the surface.<br/>_________________<br/>Corner Office: <a class="postlink" href="http://lj.kvance.com/tag/corneroffice" target="_blank">dev LJ</a>
<br/>
<a class="postlink" href="http://kvance.com/project/HexxagonDS" target="_blank">HexxagonDS</a>, <a class="postlink" href="http://kvance.com/project/dsmzx/" target="_blank">dsmzx</a>, <a class="postlink" href="http://lj.kvance.com/tag/nintendo+ds" target="_blank">more...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92299 - TheRain - Wed Jul 12, 2006 5:58 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kvance wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<a href="http://tobw.net/dswiki/index.php?title=Graphic_modes" target="_blank">http://tobw.net/dswiki/index.php?title=Graphic_modes</a>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Actually, that is exactly what I was looking for!   That resource is so good... thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92348 - TheRain - Thu Jul 13, 2006 12:04 am</h4>
    <div class="postbody"><span class="postbody">Ok, so here's what I don't get....
<br/>
<br/>
Say I'm setting up my video mode like so:
<br/>
videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE | DISPLAY_BG2_ACTIVE);
<br/>
<br/>
What I'm TRYING to do is to have two backgrounds, completely different bitmaps loaded into them from two seperate bin's and have them both visible on the screen at once.    Then I'm going to set up alpha blending modes between them. 
<br/>
<br/>
What I don't understand is, how do I know what memory is mapped to BG3 or BG2?   If I'm setting up my VRAM with 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">vramSetMainBanks(VRAM_Ablah,VRAM_BBlah,VRAM_CBlah,VRAM_DBlah);</td> </tr></table><span class="postbody">
<br/>
what part of this commands which background is assigned what place in VRAM?  
<br/>
<br/>
Right now I have this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE | DISPLAY_BG2_ACTIVE);   
<br/>
vramSetMainBanks(   VRAM_A_MAIN_BG_0x6000000, VRAM_B_MAIN_BG_0x6020000,VRAM_C_MAIN_BG_0x6040000 , VRAM_D_LCD);
<br/>
<br/>
u16* background2 = (u16*)(0x06020000);
<br/>
<br/>
dmaCopy(back1_bin, BG_GFX, 256*192*2);
<br/>
dmaCopy(back2_bin, background2, 256*192*2);</td> </tr></table><span class="postbody">
<br/>
and when the program is run, both backgrounds have back1_bin displaying on them...     I've been trying to sort it out by changing these values around but I can't makes sense of it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92349 - kvance - Thu Jul 13, 2006 12:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheRain wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE | DISPLAY_BG2_ACTIVE);   
<br/>
vramSetMainBanks(   VRAM_A_MAIN_BG_0x6000000, VRAM_B_MAIN_BG_0x6020000,VRAM_C_MAIN_BG_0x6040000 , VRAM_D_LCD);
<br/>
<br/>
u16* background2 = (u16*)(0x06020000);
<br/>
<br/>
dmaCopy(back1_bin, BG_GFX, 256*192*2);
<br/>
dmaCopy(back2_bin, background2, 256*192*2);</td> </tr></table><span class="postbody">
<br/>
and when the program is run, both backgrounds have back1_bin displaying on them...     I've been trying to sort it out by changing these values around but I can't makes sense of it.</span></td> </tr></table><span class="postbody">
<br/>
You're right, nothing has mapped a background to a memory location yet.  All the backgrounds are probably defaulting to 16bpp bitmaps at 0x6000000, so they both look the same.  Try something like this to set the BG control registers:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">BG2_CR = BG_BMP16_256x256 | BG_BMP_BASE(0);
<br/>
BG3_CR = BG_BMP16_256x256 | BG_BMP_BASE(8); /* 0x20000 divided by 0x4000 */</td> </tr></table><span class="postbody"><br/>_________________<br/>Corner Office: <a class="postlink" href="http://lj.kvance.com/tag/corneroffice" target="_blank">dev LJ</a>
<br/>
<a class="postlink" href="http://kvance.com/project/HexxagonDS" target="_blank">HexxagonDS</a>, <a class="postlink" href="http://kvance.com/project/dsmzx/" target="_blank">dsmzx</a>, <a class="postlink" href="http://lj.kvance.com/tag/nintendo+ds" target="_blank">more...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92355 - TheRain - Thu Jul 13, 2006 2:32 am</h4>
    <div class="postbody"><span class="postbody">perfect!  that fixed it right up ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
