<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>help with makefile - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > help with makefile</h2>
<div id="posts">
<div class="post">
    <h4>#147859 - tornadokick - Sat Dec 29, 2007 9:25 am</h4>
    <div class="postbody"><span class="postbody">Hello all.  It's been too long for me to come back here.  I hope that I can concentrate more on this in the future, so I don't have to take such a hiatus again.  
<br/>
<br/>
I'm trying to get the program to work, but I'm having some difficulty.
<br/>
<br/>
I tried to reinstall the devkitPRO directory. I tried taking a sample program I had and rewrite the make file.  Running the makefile causes my program to come up with errors when trying to run.  
<br/>
<br/>
The biggest problem is that the compiler won't recognize the nds.h file that (should be/is) included in the beginning of the file
<br/>
<br/>
Running my make file gives the following output
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
C:\devkitPro\test&gt;cd \
<br/>
<br/>
C:\&gt;cd c:\devkitPro\libnds\include
<br/>
<br/>
C:\devkitPro\libnds\include&gt;path=C:\devkitadv\bin;C:\devkitPro\devkitARM\bin;C:\
<br/>
devkitPro\libnds\include;C:\devkitPro\test
<br/>
<br/>
C:\devkitPro\libnds\include&gt;arm-eabi-c++ arm7_main.cpp arm9_main.cpp -o test.elf
<br/>
 -lm
<br/>
In file included from arm7_main.cpp:6:
<br/>
nds.h:53:2: error: #error Either ARM7 or ARM9 must be defined
<br/>
arm7_main.cpp: In function 'void InterruptHandler()':
<br/>
arm7_main.cpp:26: error: 'volatile struct sTransferRegion' has no member named '
<br/>
curtime'
<br/>
arm7_main.cpp:33: error: 'REG_KEYXY' was not declared in this scope
<br/>
/*multiple error messages removed, all undeclared variables*/
<br/>
<br/>
// No clue about where objcopy is.  
<br/>
C:\devkitPro\libnds\include&gt;objcopy -O binary test.elf attempt.nds
<br/>
'objcopy' is not recognized as an internal or external command,
<br/>
operable program or batch file.
<br/>
<br/>
C:\devkitPro\libnds\include&gt;pause
<br/>
Press any key to continue . . .
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The arm7_main.cpp file has the following contents:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
// Demo1 ARM7 Code - Based on an example shipped with NDSLIB.
<br/>
// Chris Double (chris.double@double.co.nz)
<br/>
//////////////////////////////////////////////////////////////////////
<br/>
 
<br/>
#include "nds.h"
<br/>
<br/>
#define TOUCH_CAL_X1 (*(vs16*)0x027FFCD8)
<br/>
#define TOUCH_CAL_Y1 (*(vs16*)0x027FFCDA)
<br/>
<br/>
/*Code removed to conserve space*/ 
<br/>
<br/>
int main(int argc, char ** argv) {
<br/>
  // Reset the clock if needed
<br/>
  rtcReset();
<br/>
<br/>
  //enable sound
<br/>
  SOUND_CR = SCHANNEL_ENABLE | SOUND_VOL(0x7F);
<br/>
  IPC-&gt;soundData = 0;
<br/>
 
<br/>
  // Set up the interrupt handler
<br/>
  REG_IME = 0;
<br/>
  IRQ_HANDLER = &amp;InterruptHandler;
<br/>
  REG_IE = IRQ_VBLANK;
<br/>
  REG_IF = ~0;
<br/>
  DISP_SR = DISP_VBLANK_IRQ;
<br/>
  REG_IME = 1;
<br/>
<br/>
  // Keep the ARM7 out of main RAM
<br/>
  while (1) swiWaitForVBlank();
<br/>
  return 0;
<br/>
}
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
On my computer, there exists the following files:
<br/>
<br/>
C:\devkitPro\test\nds.h
<br/>
C:\devkitPro\test\arm7_main.cpp
<br/>
C:\devkitPro\test\arm9_main.cpp
<br/>
C:\devkitPro\devkitARM\bin\arm-eabi-c++.exe
<br/>
C:\devkitpro\libnds\include\nds.h
<br/>
<br/>
c:\devkitadv\bin doesn't exist.
<br/>
<br/>
I'm assuming that my biggest problem is that I don't know how to assign a value to PATH.  
<br/>
<br/>
To summarize, I have two things I need help finding out:
<br/>
1. How to get my code to compile the nds.h file.
<br/>
2. How to handle the lack of a objcopy.exe file, where to find a replacement, etc.
<br/>
<br/>
If you need any more information, I'll be happy to give more information if it'll help.  Also, if anyone knows an irc channel that I might be able to get some help, I'd greatly appreciate it.
<br/>
<br/>
(I'm sorry if this is a bit confusing, I'm a bit tired right now as it's after 3 am right now.  If you need any clarification, I'll be happy to answer!)
<br/>
<br/>
PLEASE HELP!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#147862 - theli - Sat Dec 29, 2007 9:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">#error Either ARM7 or ARM9</td> </tr></table><span class="postbody">
<br/>
that is - define ARM7 or ARM9 :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#147869 - wintermute - Sat Dec 29, 2007 1:42 pm</h4>
    <div class="postbody"><span class="postbody">Your best option is to use the devkitPro windows installer found at  <a href="http://www.devkitpro.org/downloads/devkitpro-windows-installer/" target="_blank">http://www.devkitpro.org/downloads/devkitpro-windows-installer/</a>
<br/>
<br/>
Unfortunately Chris hasn't updated his example code in a long time and even then his makefiles and build process were awful. The installer will download and install a set of examples which also include templates to get you started with your own projects.
<br/>
<br/>
The tutorials at <a href="http://dev-scene.com/NDS/Tutorials" target="_blank">http://dev-scene.com/NDS/Tutorials</a> will help a bit.
<br/>
<br/>
The main IRC channel is #dsdev on blitzed.org.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#147878 - tornadokick - Sat Dec 29, 2007 6:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">Your best option is to use the devkitPro windows installer found at  <a href="http://www.devkitpro.org/downloads/devkitpro-windows-installer/" target="_blank">http://www.devkitpro.org/downloads/devkitpro-windows-installer/</a>
<br/>
<br/>
Unfortunately Chris hasn't updated his example code in a long time and even then his makefiles and build process were awful. The installer will download and install a set of examples which also include templates to get you started with your own projects.
<br/>
<br/>
The tutorials at <a href="http://dev-scene.com/NDS/Tutorials" target="_blank">http://dev-scene.com/NDS/Tutorials</a> will help a bit.
<br/>
<br/>
The main IRC channel is #dsdev on blitzed.org.</td> </tr></table><span class="postbody">
<br/>
<br/>
Beautiful.
<br/>
<br/>
You don't know how much I appreciate this.
<br/>
<br/>
*starts reading*</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
