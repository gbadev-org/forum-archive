<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>viewing a text file? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > viewing a text file?</h2>
<div id="posts">
<div class="post">
    <h4>#105672 - spinal_cord - Tue Oct 10, 2006 8:58 pm</h4>
    <div class="postbody"><span class="postbody">For some reason the following code doesnt work on my gbamp, can someone take a look and tell me what im doing wrong.
<br/>
Its supposed to put the text from test.txt on the screen, but it doesn't.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// Includes
<br/>
#include &lt;PA9.h&gt;       // Include for PA_Lib
<br/>
<br/>
#define BUFFER_SIZE 32 
<br/>
<br/>
//void shutdown(void); 
<br/>
<br/>
// Function: main() 
<br/>
int main(int argc, char ** argv) 
<br/>
{ 
<br/>
   PA_Init();    // Initializes PA_Lib 
<br/>
   PA_InitVBL(); // Initializes a standard VBL 
<br/>
   PA_InitText(1,0); //init text bottom screen 
<br/>
<br/>
FAT_InitFiles();  // Init FAT driver
<br/>
 
<br/>
FAT_FILE* handle = FAT_fopen("test.txt", "r");  // Open test.txt for reading 
<br/>
<br/>
u32 size = 256;  // Read in 256 bytes at a time 
<br/>
<br/>
char* text = (char*) malloc (size+1);  // Allocate memory for string, including end of string character 
<br/>
<br/>
text[size] = '\0'; // Add string terminate character 
<br/>
<br/>
FAT_fseek(handle, 0, SEEK_SET);  // Go to begining of file 
<br/>
<br/>
int i=0;
<br/>
while (!FAT_feof(handle)) 
<br/>
{ 
<br/>
    FAT_fread((void*)text, size, 1, handle); // Read next bit of file into memory 
<br/>
//    consolePrintf(text);  // Print file to screen 
<br/>
PA_OutputSimpleText(1, 0, i++, text);  // this sinstead for palib
<br/>
} 
<br/>
<br/>
FAT_fclose(handle); // Close file 
<br/>
<br/>
    
<br/>
   return 0; 
<br/>
} // End of main() 
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
yes i know its palib but that shouldnt be a problem, the function is almost exactly the same (just comment the PA_OutputSimpleText and put back in the consolePrintf)
<br/>
<br/>
I would like to use custom levels for my game, but if I cant load from the CF, then thats a great big chunck of my game missing.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105675 - Lick - Tue Oct 10, 2006 9:27 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">FAT_InitFiles(); 
<br/>
FAT_FILE* handle = FAT_fopen("test.txt", "r"); 
<br/>
<br/>
u32 size = 256;
<br/>
char* text = (char*) malloc (size+1);
<br/>
text[size] = 0;
<br/>
FAT_fread((void*)text, size, 1, handle);
<br/>
<br/>
consolePrintf(text);
<br/>
PA_OutputSimpleText(1, 0, 0, text);
<br/>
<br/>
FAT_fclose(handle);
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105679 - spinal_cord - Tue Oct 10, 2006 9:46 pm</h4>
    <div class="postbody"><span class="postbody">hmm :? its the same, was that supposed to fix anything?<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
