<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>model position function? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > model position function?</h2>
<div id="posts">
<div class="post">
    <h4>#57157 - chrissieboy - Thu Oct 13, 2005 11:45 pm</h4>
    <div class="postbody"><span class="postbody">Im busy with making a chase cam, so i got a vehicle and the camera must chase the object. So the perspective is 3rd person.
<br/>
<br/>
But now i must know the x,y,z position of my vehicle, is there some function in ndslib or something? Wich knows the place of the mesh?
<br/>
<br/>
Because gltranslate places my mesh but don't knows the place after a few moves.
<br/>
<br/>
I saw some documentation about popmatrix and pushmatrix but i realy don't understand where this is usefull for??
<br/>
<br/>
I looked myself in opengl.c but can't find a function or something to read out object positions.
<br/>
<br/>
Thanx!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57362 - dXtr - Sat Oct 15, 2005 7:07 am</h4>
    <div class="postbody"><span class="postbody">first of all.. you really should read some linear algebra :)
<br/>
and second of all.. I'm not an OpenGL guy.. so this can be wrong
<br/>
<br/>
in a column based 4x4 matrix it looks like this:
<br/>
1, 0, 0, 0
<br/>
0, 1, 0, 0
<br/>
0, 0, 1, 0
<br/>
X, Y, Z, 1
<br/>
<br/>
and in a row based 4x4 matrix it looks like this:
<br/>
1, 0, 0, X,
<br/>
0, 1, 0, Y,
<br/>
0, 0, 1, Z,
<br/>
0, 0, 0, 1
<br/>
<br/>
to retrive the model-view matrix:
<br/>
float fModelView[16];
<br/>
glGetFloatv(GL_MODELVIEW_MATRIX, fModelView);
<br/>
<br/>
edit: changed some of my post.. b\c I'm kind of tired and not really sure what I'm writing ;D
<br/>
think it's time to get some sleep..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57407 - dovoto - Sat Oct 15, 2005 5:20 pm</h4>
    <div class="postbody"><span class="postbody">Sorry no glGetxxx functions implemented in libnds at the momen.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57472 - dXtr - Sun Oct 16, 2005 8:35 am</h4>
    <div class="postbody"><span class="postbody">now when I had some sleep..
<br/>
don't you save the position for the mesh somewhere? if not you really should.. this is something normal is all (or atleast most) to save position and rotation (saved as a matrix or using vectors).
<br/>
<br/>
so if you do have this saved you should just let the camera ask the object it is following, what the position of the object is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#57860 - discoloda - Tue Oct 18, 2005 10:33 pm</h4>
    <div class="postbody"><span class="postbody">vec3 origin; // viewer origin
<br/>
vec3 travel; // directional vector for the way the viewer is going
<br/>
<br/>
vec3 camera; // resulting camera position
<br/>
<br/>
camera = origin - (travel*cameradistance) + cameraoffset;
<br/>
<br/>
after that just do a glTranslatef(-camera[0], -camera[1], -camera[2]);</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
