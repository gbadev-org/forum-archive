<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>libnds, arm7 confusion - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > libnds, arm7 confusion</h2>
<div id="posts">
<div class="post">
    <h4>#103912 - john_ward - Mon Sep 25, 2006 11:01 am</h4>
    <div class="postbody"><span class="postbody">As far as I understand it, the ARM7 processor in the DS is the only one capable of reading the touch-screen.
<br/>
<br/>
I've been going through the devkitpro examples, and several of them accept touchscreen input (example: toon_shading) even though they don't have any obvious ARM7 references.
<br/>
<br/>
Is there something happening in the background which is setting up the ARM7 side for me, so I don't need to worry about this?
<br/>
<br/>
I quite like the 'generic' makefile used in the devkitpro examples and want to use them in my own developments - I'm just conscious of the fact that if I don't understand what's happening now then I'll be in trouble further down the road.
<br/>
<br/>
Apologies if this has been discussed before.<br/>_________________<br/>Michael, I've got the pistols</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103921 - Dark Knight ez - Mon Sep 25, 2006 1:03 pm</h4>
    <div class="postbody"><span class="postbody">There's an IPC struct placed in shared (by ARM9 and ARM7) memory.
<br/>
Amongst others, the touch positions are written in there by ARM7, and read out of there by ARM9.
<br/>
The default ARM7 stub (which is used if you have not created your own) does this writing to IPC by default. Reading the touch values and such out of the IPC struct by ARM9 is done by the function(-call) scanKeys.
<br/>
<br/>
So, basicly, unless you want to so nifty stuff on ARM7, you won't have to worry about how to get the latest information you actually require because that's already done for you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104104 - john_ward - Tue Sep 26, 2006 4:52 pm</h4>
    <div class="postbody"><span class="postbody">Is the default ARM7 stub you mention compiled and linked, or just linked, when you run make?
<br/>
<br/>
If it's not compiled (and just linked) then I'm guessing that using my own version would cause problems with the nice makefiles supplied in the devkitpro/libnds examples (in other words they'd need amending, and my makefile knowledge is awful).
<br/>
<br/>
If it is compiled before being linked in, then I should be able to just change the default source? (and if so, where does it live?)
<br/>
<br/>
Cheers.<br/>_________________<br/>Michael, I've got the pistols</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104111 - Sausage Boy - Tue Sep 26, 2006 5:14 pm</h4>
    <div class="postbody"><span class="postbody">It's compiled and included with ndstool. If you want to code something for the arm7, take a look at the combined template.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104146 - john_ward - Tue Sep 26, 2006 7:32 pm</h4>
    <div class="postbody"><span class="postbody">I've seen the combined template and it looks OK, but it doesn't seem to include the useful 'data' folder stuff that the standard examples use...(I could be wrong on this?)
<br/>
<br/>
It's frustrating as I'm a reasonably competent C programmer, but my lack of knowledge in the apparent black art of makefiles holds me back...
<br/>
<br/>
Thanks for the reply btw.<br/>_________________<br/>Michael, I've got the pistols</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104153 - Sausage Boy - Tue Sep 26, 2006 7:42 pm</h4>
    <div class="postbody"><span class="postbody">Just make a data folder in the arm9 directory (for data for the arm9, which is pretty much what you want to use). The makefile should already be looking for this. You can always look in the arm9 makefile, it has a couple of useful, easily understandable lines in the beginning.
<br/>
<br/>
Actually, you need to modify the makefile slightly.
<br/>
<br/>
Locate this line:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">DATA      :=</td> </tr></table><span class="postbody">
<br/>
<br/>
Change it to
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">DATA      := data</td> </tr></table><span class="postbody"><br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#104160 - john_ward - Tue Sep 26, 2006 8:43 pm</h4>
    <div class="postbody"><span class="postbody">Nice one - easier than I thought.
<br/>
<br/>
Again the help is much appreciated.
<br/>
<br/>
Now on to coding DOD:DS (!)<br/>_________________<br/>Michael, I've got the pistols</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
