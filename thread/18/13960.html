<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Bitmap Loader - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Bitmap Loader</h2>
<div id="posts">
<div class="post">
    <h4>#138071 - Robthar - Sun Aug 19, 2007 11:26 am</h4>
    <div class="postbody"><span class="postbody">Whats wrong about this Bitmap-loader?
<br/>
It does not show the right information!
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   namespace Memory {
<br/>
      uint8   GetUint8ExUint8(uint8* source,uint32 address){
<br/>
         return (uint8)(source[address]);
<br/>
      }
<br/>
      uint16   GetUint16ExUint8(uint8* source,uint32 address){
<br/>
         return (uint16)(((source[address+1]&lt;&lt;8) | (source[address])));
<br/>
      }
<br/>
      uint32   GetUint32ExUint8(uint8* source,uint32 address){
<br/>
         return (uint32)(((source[address+3]&lt;&lt;24) | (source[address+2]&lt;&lt;16) | (source[address+1]&lt;&lt;8) | (source[address])));
<br/>
      }
<br/>
      namespace Reversed {
<br/>
         uint8   GetUint8ExUint8(uint8* source,uint32 address){
<br/>
            return (uint8)(source[address]);
<br/>
         }
<br/>
         uint16   GetUint16ExUint8(uint8* source,uint32 address){
<br/>
            return (uint16)(((source[address]&lt;&lt;8) | (source[address+1])));
<br/>
         }
<br/>
         uint32   GetUint32ExUint8(uint8* source,uint32 address){
<br/>
            return (uint32)(((source[address]&lt;&lt;24) | (source[address+1]&lt;&lt;16) | (source[address+2]&lt;&lt;8) | (source[address+3])));
<br/>
         }
<br/>
      }
<br/>
   }
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
         Bitmap(const char* FileAddress){
<br/>
            uint8* filebuffer;
<br/>
            uint32 filelength;
<br/>
            uint32 filedata;
<br/>
            uint32 fileheadersize;
<br/>
<br/>
            FILE*   f   =   fopen(FileAddress,"rd");
<br/>
            if(!f){
<br/>
               iprintf("File %s not found",FileAddress);
<br/>
            }
<br/>
            else
<br/>
            {
<br/>
                        fseek(f,0,SEEK_END);
<br/>
            long   l   =   ftell(f);
<br/>
            filebuffer   =   new uint8[l];
<br/>
                        fread(filebuffer,1,l,f);
<br/>
                        fclose(f);
<br/>
<br/>
               filelength   =   Memory::GetUint32ExUint8(filebuffer,2);
<br/>
               filedata   =   Memory::GetUint32ExUint8(filebuffer,10);
<br/>
               fileheadersize=   Memory::GetUint32ExUint8(filebuffer,14);
<br/>
<br/>
               Width      =   Memory::GetUint32ExUint8(filebuffer,18);
<br/>
               Height      =   Memory::GetUint32ExUint8(filebuffer,22);
<br/>
               Layers      =   Memory::GetUint16ExUint8(filebuffer,26);
<br/>
               BitsPP      =   Memory::GetUint16ExUint8(filebuffer,28);
<br/>
            }
<br/>
         }
<br/>
</td> </tr></table><span class="postbody">
<br/>
In Main.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   Bitmap* b = new Bitmap("kuehlschrank/bmptest.bmp");
<br/>
   iprintf("Bitmap Height :%u\n",b-&gt;Height);
<br/>
   iprintf("Bitmap Width  :%u\n",b-&gt;Width);
<br/>
<br/>
   iprintf("Bitmap Layers :%u\n",b-&gt;Layers);
<br/>
   iprintf("Bitmap BitsPP :%u\n",b-&gt;BitsPP);
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#138086 - Lick - Sun Aug 19, 2007 5:36 pm</h4>
    <div class="postbody"><span class="postbody">fopen(FileAddress,"rd");
<br/>
<br/>
"rd" is not a valid switch. Try "r" or "rb".<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
