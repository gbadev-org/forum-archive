<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How to tell if a given DLDI driver is for a slot-2 card - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > How to tell if a given DLDI driver is for a slot-2 card</h2>
<div id="posts">
<div class="post">
    <h4>#141143 - simonjhall - Sat Sep 22, 2007 2:43 pm</h4>
    <div class="postbody"><span class="postbody">Is there any way to find out from a dldi driver which slot its card lives in?
<br/>
Can you get a string back from the driver which you can match against "Supercard", "M3" etc? Or is there some isSlotTwo() function?
<br/>
<br/>
EDIT: btw I mean doing this at run time, not before patching<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141154 - tepples - Sat Sep 22, 2007 6:35 pm</h4>
    <div class="postbody"><span class="postbody">Last time I asked Chishm about this, back in the pak-swapping topic that I made before I made RAC, he told me something like this: If diropen tells you that "fat1:/" is mounted, then a SLOT-1 card is present and mounted at "fat:/". Otherwise, "fat:/" is a SLOT-2 card if anything.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141197 - chishm - Sun Sep 23, 2007 3:44 am</h4>
    <div class="postbody"><span class="postbody">The dev_t field of the stat struct returned by fstat() and stat() will contain a 32 bit value that should be unique to each type of card, taken from the ioType field of the driver's header. This value can be cast to a char[4] and displayed as a simple identifier. For example, the GBAMP CF version 2 has the identifier MPCF, whereas the M3 SD has M3SD. This will also work for the built-in (i.e. not DLDI) drivers.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141228 - simonjhall - Sun Sep 23, 2007 10:03 am</h4>
    <div class="postbody"><span class="postbody">Ah cool. Wouldn't that then require me to match the string against a list of pre-known driver names, to figure out which ones are in the bottom slot?
<br/>
<br/>
In the end I wrote a dash of code to find the dldi section's magic number, move up 0x64 bytes then pick out the driver info (eg can read / write, slot no etc) but I'm wondering how compatible this will be if you ever change the header format...<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141345 - chishm - Mon Sep 24, 2007 9:24 am</h4>
    <div class="postbody"><span class="postbody">You can match the identifier of fat:/ to the one of fat2:/. If they match, then the card in SLOT-2 was set as the default. If it doesn't match, or if fat2:/ doesn't exist, then it wasn't set as default.
<br/>
<br/>
Basically, fat:/ is fat0:/ is the default, fat1:/ is always the card in SLOT-1 and fat2:/ is always the cart in SLOT-2.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141346 - simonjhall - Mon Sep 24, 2007 9:51 am</h4>
    <div class="postbody"><span class="postbody">Ah, that sounds easy - thanks very much!
<br/>
Btw what's with the deep message in the sig? ;-)<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#141347 - chishm - Mon Sep 24, 2007 10:38 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://worsethanfailure.com/Articles/No,_We_Need_a_Neural_Network.aspx" target="_blank">The poetic results of a neural network.</a><br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
