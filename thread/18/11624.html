<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Lack of VRAM? I need some advice - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Lack of VRAM? I need some advice</h2>
<div id="posts">
<div class="post">
    <h4>#108160 - Lupi - Mon Nov 06, 2006 1:07 am</h4>
    <div class="postbody"><span class="postbody">In my proyect, I'm loading into VRAM BANK E some sprites:
<br/>
-&gt; 30 32*32 sprites
<br/>
-&gt; 3 64*64 sprites
<br/>
<br/>
I have a few questions:
<br/>
1. Can I load all that in VRAM BANK E? Is there any space left if I load all that?
<br/>
2. What happens if I accidentally try to load beyond the limits of the VRAM BANK?
<br/>
3. I use git to covert backgrounds and sprites, is there any difference if I covert to u8, u16 or u32?
<br/>
4. I would be very grateful if someone could help me understanding how to load a sprite in a specific place of the VRAM
<br/>
<br/>
I'm asking this because I'm having so wierd problems with the sprites, and I think it may be the lack of space.
<br/>
<br/>
Thanks in advance =)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108173 - tepples - Mon Nov 06, 2006 4:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lupi wrote:</b></span></td> </tr> <tr> <td class="quote">In my proyect, I'm loading into VRAM BANK E some sprites:
<br/>
-&gt; 30 32*32 sprites
<br/>
-&gt; 3 64*64 sprites</td> </tr></table><span class="postbody">
<br/>
How many colors? 16 (4-bit), 256 (8-bit), or 32,768 (16-bit)?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">3. I use git to covert backgrounds and sprites, is there any difference if I covert to u8, u16 or u32?</td> </tr></table><span class="postbody">
<br/>
Converting to u32 will guarantee that the fastest copying methods remain available.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">4. I would be very grateful if someone could help me understanding how to load a sprite in a specific place of the VRAM</td> </tr></table><span class="postbody">
<br/>
Have you done this on the Game Boy Advance before?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108183 - Lupi - Mon Nov 06, 2006 8:52 am</h4>
    <div class="postbody"><span class="postbody">Sorry my fault.
<br/>
<br/>
Images are 256 colour (8 bit)
<br/>
<br/>
And the problem is that I've never coded in GBA, I  have tried figuring out how to load in a specific place in the VRAM, but sometimes I succeed, sometimes I fail :s</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108185 - Payk - Mon Nov 06, 2006 11:12 am</h4>
    <div class="postbody"><span class="postbody">I think 8bit sprites arent maped like a bitmap- They are tiled afaik (i dont use 2d much). With a converter its easy to get right datas loaded. But if you want to load it from a u8 buffer + pal ...you will need to tille that data...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108214 - Lupi - Mon Nov 06, 2006 7:43 pm</h4>
    <div class="postbody"><span class="postbody">When I convert with git, I set so it converts the image to tiles.
<br/>
<br/>
<span style="font-weight: bold">I'm loading the folowing sprites</span>
<br/>
Three sets of 10 32*32 sprites like this (different colours)
<br/>
<a href="http://img523.imageshack.us/img523/6361/basetoucherboy4.png">[Images not permitted - Click here to view it]</a>
<br/>
Three sprites like this (different colours)
<br/>
<a href="http://img523.imageshack.us/img523/1205/circletoucherbzw6.png">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
<br/>
<br/>
<span style="font-weight: bold">I load them in this order</span> (numbers are the 10 32*32 sprites and the circles are the 64*64)
<br/>
<br/>
Blue Numbers -&gt; Blue circle -&gt; Red numbers -&gt; Red circle -&gt; Green numbers -&gt; Green circle
<br/>
<br/>
<br/>
<span style="font-weight: bold">That would be a total of:</span>
<br/>
((32*32)*10)*3) + ((64*64)*3) bytes = 43008 bytes = 42 kbytes
<br/>
<br/>
right?
<br/>
<br/>
<br/>
<span style="font-weight: bold">Problem:</span>
<br/>
when I try to load the last sprites (the green ones), I get a sprite composed of tiles from the first sprites in memory (the blue ones)
<br/>
<br/>
What am I doing wrong? :S:S</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108236 - tepples - Mon Nov 06, 2006 10:47 pm</h4>
    <div class="postbody"><span class="postbody">If you want to use all the sprite cel VRAM, you need to set the 2D core's sprite engine to use a larger unit for sprite cel addressing. By default, each core uses 32-byte units like on the GBA and can address the first 32 KiB of a bank. But if you're using only 256-color sprite cels, or you're using only sprite cels larger than 8x8 pixels, then you can get away with using 64- or 128-byte units and address 64 or 128 KiB of a bank. You can change each core's sprite cel addressing unit through through <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsvideoobjs" target="_blank">bits 21-20 of the core's respective DISPCNT</a>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108329 - Lupi - Tue Nov 07, 2006 8:54 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the tips tepples. Now I really understand the 1D mapping. It's working.
<br/>
<br/>
Sorry for the noob question :P</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
