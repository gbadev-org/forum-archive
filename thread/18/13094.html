<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Modes of framebuffer - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Modes of framebuffer</h2>
<div id="posts">
<div class="post">
    <h4>#126971 - Phantaseur - Sat Apr 28, 2007 4:24 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://www.dev-scene.com/NDS/Tutorials_Day_3#Frame_buffer...finally" target="_blank">http://www.dev-scene.com/NDS/Tutorials_Day_3#Frame_buffer...finally</a>
<br/>
<a href="http://www.double.co.nz/nintendo_ds/nds_develop2.html" target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop2.html</a>
<br/>
In both of these tutorials videooutput through framebuffer is described, but there is examples only for one screen and I need get output to both screens.. For example VRAM_A for the first and VRAM_B for the second.
<br/>
How can I do this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126975 - dovoto - Sat Apr 28, 2007 5:53 pm</h4>
    <div class="postbody"><span class="postbody">Framebuffer mode only works for the main engine so only one screen.  To get framebuffer like access on both screens you need to use a bitmap background.  I know the dev scene tutorials go into this and likely the other does as well.
<br/>
<br/>
There are very few good reasons to use the frame buffer mode as using a bitmap background is much more flexible and only slightly more to set up.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127022 - Dark Knight ez - Sun Apr 29, 2007 9:36 am</h4>
    <div class="postbody"><span class="postbody">A bit later on he describes how to do it for the 2nd screen as well.
<br/>
<a href="http://www.double.co.nz/nintendo_ds/nds_develop10.html" target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop10.html</a><br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://amplituds.drunkencoders.com" target="_blank">AmplituDS website</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127034 - Phantaseur - Sun Apr 29, 2007 1:30 pm</h4>
    <div class="postbody"><span class="postbody">Oh... How I hate change code that works...
<br/>
<br/>
I just copied next from tutorial:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u16* video_buffer1;
<br/>
video_buffer1 = (u16*)BG_BMP_RAM(0);
<br/>
videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE);
<br/>
vramSetBankA(VRAM_A_MAIN_BG_0x6000000);
<br/>
BG3_CR = BG_BMP16_256x256 | BG_BMP_BASE(0);
<br/>
<br/>
BG3_XDX = 0;
<br/>
BG3_XDY = 1 &lt;&lt; 8;
<br/>
BG3_YDY = 0;
<br/>
BG3_YDX = 1 &lt;&lt; 8;</td> </tr></table><span class="postbody">And as I expected problem appeared at moment, I cannot compile it. It writes again:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">error: 'VRAM_A_MAIN_BG_0x6000000' was not declared in this scope</td> </tr></table><span class="postbody">So, what value has VRAM_A_MAIN_BG_0x6000000?
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">I tried search google but there was no definition....</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127035 - Lick - Sun Apr 29, 2007 1:34 pm</h4>
    <div class="postbody"><span class="postbody">Try digging in "video.h", the header file that holds most of the graphic definitions. Anyway, try VRAM_A_MAIN_BG_0x<span style="font-weight: bold">0</span>6000000.
<br/>
<br/>
Remember to set bit15 for each pixel, otherwise they will be transparent.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127038 - Phantaseur - Sun Apr 29, 2007 2:12 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, that zero helped, but now next problem: I don't know what values I have to set for BG3_XDX, BG3_YDX, BG3_XDY, BG3_YDY to get same effect as using framebuffer. Whith values which I wrote in my previous message (and which I took from tutorial) I have picture which is reflected relatively Y axis and rotated 90 degrees left.
<br/>
Effect is the same as X &amp; Y axises are swaped.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127040 - Lick - Sun Apr 29, 2007 2:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   BG3_XDX = 1 &lt;&lt; 8;
<br/>
    BG3_XDY = 0;
<br/>
    BG3_YDX = 0;
<br/>
    BG3_YDY = 1 &lt;&lt; 8;</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
