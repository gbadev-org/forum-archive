<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>The smallest .nds, ever - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > The smallest .nds, ever</h2>
<div id="posts">
<div class="post">
    <h4>#65640 - Two9A - Wed Jan 04, 2006 5:33 pm</h4>
    <div class="postbody"><span class="postbody">Myself and LiraNuna got a little bored today, so we decided to see how small you can make a .nds file and still have it functional.
<br/>
<br/>
<a class="postlink" href="http://dsemu.org/The_Smallest_NDS.html" target="_blank">Read the article</a>
<br/>
<br/>
It might need a little proofreading, and if anyone can think of a way to improve the end result, do let me know.
<br/>
<br/>
/edit
<br/>
Oh, and if you want to run the final result:
<br/>
<a class="postlink" href="http://ng.dsemu.org/TinyFB.nds" target="_blank">TinyFB.nds</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65641 - GPFerror - Wed Jan 04, 2006 5:55 pm</h4>
    <div class="postbody"><span class="postbody">awesome work guys, keep it up :)
<br/>
<br/>
Especially love the play by play commentary :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65663 - Sausage Boy - Wed Jan 04, 2006 9:52 pm</h4>
    <div class="postbody"><span class="postbody">Interesting read.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65665 - Durandle - Wed Jan 04, 2006 10:11 pm</h4>
    <div class="postbody"><span class="postbody">TinyFB just black-screens on me - using M3 CF.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65674 - Two9A - Wed Jan 04, 2006 10:58 pm</h4>
    <div class="postbody"><span class="postbody">Eh. All I know is, it works with gbamp, as that's how LiraNuna tested it. Anything else isn't guaranteed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65692 - JaJa - Thu Jan 05, 2006 12:26 am</h4>
    <div class="postbody"><span class="postbody">It's probably because you need that Poweron(Powerall); thing for M3.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65697 - 0xtob - Thu Jan 05, 2006 1:04 am</h4>
    <div class="postbody"><span class="postbody">You can even strip this to 172 bytes (saving another 180 bytes!) and it still works. Doing this removes checksums, the logo, the infinite loop and the PASS code from the binary, so after having tinted the screen red, the cpu just nops through the RAM.Tested with WMB for Linux and GBAMP.
<br/>
<br/>
If you are too lazy to use a hex editor, here's the file: <a class="postlink" href="http://TobW.net/ds/TinierFB.nds" target="_blank">TinierFB.nds</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65699 - Kujo - Thu Jan 05, 2006 1:27 am</h4>
    <div class="postbody"><span class="postbody">heheh that's insane guys...good read though :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65706 - TheChuckster - Thu Jan 05, 2006 2:41 am</h4>
    <div class="postbody"><span class="postbody">This reminds a lot of the Creating Really Teeny ELF Executables article at <a href="http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html" target="_blank">http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html</a>
<br/>
<br/>
0xtob: The CPU no ops through the RAM? Wouldn't that mean ANYthing could get executed because the RAM is full of bogus values?
<br/>
<br/>
X86 has a CPU halt instruction that stops execution. Does ARM have something similar?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65724 - tepples - Thu Jan 05, 2006 5:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheChuckster wrote:</b></span></td> </tr> <tr> <td class="quote">X86 has a CPU halt instruction that stops execution. Does ARM have something similar?</td> </tr></table><span class="postbody">
<br/>
There is the SWI to wait for interrupts, and if no interrupts are enabled...<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65739 - darkfader - Thu Jan 05, 2006 11:23 am</h4>
    <div class="postbody"><span class="postbody">OMG. that's still huge! it's pointless too.
<br/>
There's no real definition what a valid NDS file is, so you could also cut it down to 0xC4 bytes (*Me starts at 0xC0).
<br/>
A real valid NDS is probably 0x4800 bytes or bigger.
<br/>
I've done small loaders too, even using thumb to make it fit in the Nintendo logo area.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65740 - 0xtob - Thu Jan 05, 2006 11:28 am</h4>
    <div class="postbody"><span class="postbody">TheChuckster: Yes, but that depends on the initial state of the RAM. I think I read that Chishm's GBAMP firmware clears it to 0es. If you want to be save, keep the PASS and the 4 bytes after it that produce the endless loop.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65741 - Two9A - Thu Jan 05, 2006 11:38 am</h4>
    <div class="postbody"><span class="postbody">So, yeah. People have been saying this crashes on most all the emulators, and sure enough running it in DSemu-ng today causes it to crash too. A bit of debugging finds the problem; I'm writing too much data! (Twice as much as is needed in fact.) Trying to write to the next bank of VRAM, when it hasn't been mapped; not the best of ideas.
<br/>
<br/>
Anyhow, I've updated the article and the binary to reflect the foreshortening of the loop length.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#65856 - Two9A - Fri Jan 06, 2006 6:28 am</h4>
    <div class="postbody"><span class="postbody">Another bugfix. You'd never think something so small can have so many bugs, but there we go. The old adage is true; there's a bug every line in this thing.
<br/>
<br/>
The issue this time is with the ARM7 code. Yes, it's only one instruction, but it's the wrong instruction. Should be EAFFFFFE, it's actually FEFFFFEA. I typed it in wrong.
<br/>
<br/>
I've retroactively fixed the article and ROM. Can't think there's anything else left in the way of bugs in this thing. Surely.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
