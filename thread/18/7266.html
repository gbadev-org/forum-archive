<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>simple floating point - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > simple floating point</h2>
<div id="posts">
<div class="post">
    <h4>#58390 - funkaster - Sun Oct 23, 2005 3:05 am</h4>
    <div class="postbody"><span class="postbody">I need to perform a simple division (to measure a tangent), what types should I use?
<br/>
for instance, this is the C code:
<br/>
<br/>
float tg;
<br/>
tg = ((float)dx)/((float)dy);
<br/>
<br/>
I know the NDS doesn't have a FPU, but I read somewhere that it has some firmware division routines... How do I call them?
<br/>
thanks a lot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58594 - dovoto - Mon Oct 24, 2005 7:44 pm</h4>
    <div class="postbody"><span class="postbody">division operator is allready over-riden to use firmware divide.  This does not help much with floating point operations though as it is integer only.  DS also has a hardware integer division.  
<br/>
<br/>
int32 div32(int32 num, int32 den)
<br/>
<br/>
To use with libnds.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#58597 - SevenString - Mon Oct 24, 2005 7:58 pm</h4>
    <div class="postbody"><span class="postbody">one method is to used fixed point values and call the <span style="font-style: italic"><span style="font-weight: bold">divf32</span></span> inline function found in <span style="font-style: italic"><span style="font-weight: bold">libgba/include/arm9/math.h</span></span>
<br/>
<br/>
if you need both floating point input and output for the function, you could always do it like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// THESE TWO LINES FOUND IN videoGL.h, ARE SHOWN ONLY FOR CLARITY
<br/>
#define floatof32(n)         ((f32)((n) * (1 &lt;&lt; 12)))
<br/>
#define f32tofloat(n)        (((float)(n)) / (float)(1&lt;&lt;12))
<br/>
<br/>
float result = f32tofloat(divf32(floatof32(numerator), floatof32(denominator)));</td> </tr></table><span class="postbody"><br/>_________________<br/><span style="font-style: italic">"Artificial Intelligence is no match for natural stupidity."</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
