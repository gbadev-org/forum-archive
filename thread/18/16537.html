<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How is I bank used for Extended palette in latest libnds? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > How is I bank used for Extended palette in latest libnds?</h2>
<div id="posts">
<div class="post">
    <h4>#167505 - Emmanuel - Sun Mar 15, 2009 10:36 am</h4>
    <div class="postbody"><span class="postbody">Well, the VRAM I bank doesn't have a define for EXT_PALETTE and so, I wonder if it's different, included else where or what?
<br/>
<br/>
I guess the palette is stored contiguosly with no weird spaces or something... so for now I'll try a standard memcpy with the spaces for palettes calculated accordingly... 
<br/>
<br/>
I'll try memcpy to VRAM_I        ((u16*)0x68A0000) for now... but, is there a EXT_PALETTE for the VRAM_I ?
<br/>
<br/>
*note: I don't expect this to work... and even if it does, I'd prefer to use a EXT_PALETTE define instead....
<br/>
<br/>
Edit: well... DSemuMe shows me the palette loaded... even though the sprite still doesn't show up....
<br/>
<br/>
Why doesn't libnds have the EXT_PALETTE for the I bank? Does it work different somehow?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167506 - eKid - Sun Mar 15, 2009 12:17 pm</h4>
    <div class="postbody"><span class="postbody">The hardware doesn't allow VRAM I to be used for the main-screen's extended palettes. It can only be mapped to the sub-screen's OBJ extended palette (VRAM_I_SUB_SPRITE_EXT_PALETTE).
<br/>
<br/>
See <a href="http://nocash.emubase.de/gbatek.htm#dsmemorycontrolvram" target="_blank">http://nocash.emubase.de/gbatek.htm#dsmemorycontrolvram</a> to see which banks can be used. (E, F, G for main palettes)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167548 - Emmanuel - Wed Mar 18, 2009 2:52 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>eKid wrote:</b></span></td> </tr> <tr> <td class="quote">The hardware doesn't allow VRAM I to be used for the main-screen's extended palettes. It can only be mapped to the sub-screen's OBJ extended palette (VRAM_I_SUB_SPRITE_EXT_PALETTE).
<br/>
<br/>
See <a href="http://nocash.emubase.de/gbatek.htm#dsmemorycontrolvram" target="_blank">http://nocash.emubase.de/gbatek.htm#dsmemorycontrolvram</a> to see which banks can be used. (E, F, G for main palettes)</td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah I know... I need I for sub sprite... I already have my main ext palette up and running... and working... my I bank is shown in DSemuMe... but, doing nothing... plus, that the I bank doesn't have the good looking EXT_PALETTE...
<br/>
<br/>
I've gone through the code like 20 times.... both are the same, except for the switch it has in stuff like the memcpy, and the registers... which are the same except for _SUB and _I_</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#167573 - Tommmie - Wed Mar 18, 2009 7:38 pm</h4>
    <div class="postbody"><span class="postbody">did you tested it on no$gba or hardware, my code is just running fine, even with sub extended palettes</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
