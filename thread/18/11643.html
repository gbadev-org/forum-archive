<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Switching register bits - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Switching register bits</h2>
<div id="posts">
<div class="post">
    <h4>#108338 - Rajveer - Tue Nov 07, 2006 9:27 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys. I've been learning the "theory" behind switching/manipulating bits in bytes and registers. I'm trying to change bit 16 and bit 17 of the register GFX_TEX_FORMAT but I dont seem to be doing it correctly. This is what I'm trying:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u32 texFormat = GL_TEXTURE_WRAP_S | GL_TEXTURE_WRAP_T; 
<br/>
GFX_TEX_FORMAT = texFormat;</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm trying this before I use a glBindTexture command so that the texture I use after this command will repeat on the polygon. Can you show me what I'm doing wrong?
<br/>
<br/>
Cheers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108341 - thegamefreak0134 - Tue Nov 07, 2006 10:18 pm</h4>
    <div class="postbody"><span class="postbody">You\'re going to need to include the original register in there somewhere. You need to do something like:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">Â 
<br/>
GFX_TEX_FORMAT = (GFX_TEX_FORMAT | texFormat);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
If you just set the value, you set those two bits, but then zero out all the bits around them, which is never too good. Or (|) is your friend. If you notice, this is the same method used when setting up your video modes. You simply or the bits that need to be done, and the names are defines telling the compiler which bits those are.
<br/>
<br/>
-gamefreak<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108345 - Rajveer - Tue Nov 07, 2006 10:34 pm</h4>
    <div class="postbody"><span class="postbody">Cheers for the replying. This register in particular cannot be read, only written to, so I have to set everyting that I want to set in one go without calling it. Thing is, my method wont work, is it correct?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108346 - Sausage Boy - Tue Nov 07, 2006 10:43 pm</h4>
    <div class="postbody"><span class="postbody">What you want to do is add "| GL_TEXTURE_WRAP_S | GL_TEXTURE_WRAP_T " to the 7th argument of glTexImage2D (second last one).<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108347 - sajiimori - Tue Nov 07, 2006 11:06 pm</h4>
    <div class="postbody"><span class="postbody">I don't understand Sausage Boy's suggestion, but my suggestion is to arrange your code so you can write whole values to the register.  If nothing else, you could save the last value that was written in a separate variable for later use.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108397 - Sausage Boy - Wed Nov 08, 2006 2:22 pm</h4>
    <div class="postbody"><span class="postbody">glTexImage2D is a libnds function that stores a value to write to GFX_TEX_FORMAT.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108421 - thegamefreak0134 - Wed Nov 08, 2006 5:43 pm</h4>
    <div class="postbody"><span class="postbody">So either use that function, or keep a local copy of the register, twiddle your bits, and send it out.<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108425 - Sausage Boy - Wed Nov 08, 2006 6:23 pm</h4>
    <div class="postbody"><span class="postbody">You did realize that that is exactly what glTexImage2D does, right?<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
