<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Some problems with devkitARM R20 and new libnds - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Some problems with devkitARM R20 and new libnds</h2>
<div id="posts">
<div class="post">
    <h4>#116986 - kansado - Wed Jan 31, 2007 3:40 pm</h4>
    <div class="postbody"><span class="postbody">Altough there is another thread related to problems with these, I'm opening a new one as mine are not of the same nature.
<br/>
<br/>
- The newer libdswifi I'm able to link to (tested with libnds 20070127 and libnds 20060719) is 0.3b. With 0.3c or 0.3d I get an 'invalid reference to DC_FlushAll' linking error, despite to having a look into libnds9.a it seems that it's there.
<br/>
<br/>
- The stylus doesn't work anymore. I've tried to compile the input related examples and they don't work either. Maybe some things are to be changed in these examples.
<br/>
<br/>
Should I go back to dswifi 0.3b and the previous libnds (20060719) until these problems are solved? Or I'm doing something wrong?
<br/>
<br/>
By the way, are the examples for previous libdswifi versions valid for the newer? If not, where could I find them? I've searched a lot without any success.
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116989 - wintermute - Wed Jan 31, 2007 4:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>kansado wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
- The newer libdswifi I'm able to link to (tested with libnds 20070127 and libnds 20060719) is 0.3b. With 0.3c or 0.3d I get an 'invalid reference to DC_FlushAll' linking error, despite to having a look into libnds9.a it seems that it's there.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
The link order is wrong in the dswifi examples, in the arm9 makefile change
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
LIBS   := -lnds9 -ldswifi9
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
to
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
LIBS   := -ldswifi9 -lnds9 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
- The stylus doesn't work anymore. I've tried to compile the input related examples and they don't work either. Maybe some things are to be changed in these examples.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
What method are you using to run homebrew? The arm7 core now defaults to a different address which might cause the arm7 core to fail with some boot methods.
<br/>
<br/>
If you had previously built the examples with r19b cleaning and rebuilding might make them work again.
<br/>
<br/>
I've tested the new address with gbamp (latest chishm firmware v2.11 <a href="http://chishm.drunkencoders.com/NDSMP/index.html" target="_blank">http://chishm.drunkencoders.com/NDSMP/index.html</a> ), supercard miniSD, M3 standard SD and NinjaDS. These cards all work.
<br/>
<br/>
M3 Simply DS and R4 appear to have arm7 related issues but that appears to be a different problem since devkitARM r19b compiled applications don't work there either.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Should I go back to dswifi 0.3b and the previous libnds (20060719) until these problems are solved? Or I'm doing something wrong?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Hopefully we can resolve your problems fairly quickly, hold off on reverting for now.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
By the way, are the examples for previous libdswifi versions valid for the newer? If not, where could I find them? I've searched a lot without any success.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
The dswifi examples need some tweaking for later libnds versions. Currently I'm doing some tidying up and adding them to the devkitPro supplied examples.
<br/>
<br/>
I'm planning on adding dswifi functionality to the default arm7 core - this should help simplify wifi enabled projects.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117026 - kansado - Wed Jan 31, 2007 9:21 pm</h4>
    <div class="postbody"><span class="postbody">The change in library linking order did the trick.
<br/>
<br/>
My tests about stylus weren't as complete as they should be. Since stylus code failed in my own project, both in emulators and in hardware, after I saw examples failing on emulators I didn't try to run them on a real NDS (through SuperCard Lite -MicroSD-). They work perfect there, built with the last libnds and devKitPro. Sorry for making you losing your time.
<br/>
<br/>
Till now I was testing code (my own and libnds examples) on DualiS. It also worked on iDeaS and ensata. With the last libnds release, it doesn't work on these, but works perfectly on DeSmuME.
<br/>
<br/>
To sum up, my problems have been solved!
<br/>
<br/>
Thanks a lot for your great work on devKitPro!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
