<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>sprite limits - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > sprite limits</h2>
<div id="posts">
<div class="post">
    <h4>#46553 - rize - Mon Jun 27, 2005 8:51 am</h4>
    <div class="postbody"><span class="postbody">so oam has room for 128 entries per screen
<br/>
<br/>
does it matter how big the sprites are?
<br/>
<br/>
can the ds do 128 64x64 sprites at 60 fps?  somehow I doubt it.  So what's the limit?  Is it based on the total number of 8x8 "tiles" making up each sprite?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46559 - tepples - Mon Jun 27, 2005 12:58 pm</h4>
    <div class="postbody"><span class="postbody">OAM has room for 128 sprites per scene, no matter how large the sprites are. But if you rewrite some of OAM after each scanline, you can break this limit.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46593 - rize - Mon Jun 27, 2005 8:21 pm</h4>
    <div class="postbody"><span class="postbody">well that's interesting.  so does sprite size matter?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46595 - DekuTree64 - Mon Jun 27, 2005 9:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>rize wrote:</b></span></td> </tr> <tr> <td class="quote">well that's interesting.  so does sprite size matter?</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">no matter how large the sprites are.</td> </tr></table><span class="postbody">
<br/>
<br/>
...so no, that doesn't affect the 128 OAM limit.
<br/>
<br/>
There IS a limit to the number of sprite pixels drawn on each scanline though, which sort of limits the size. <a class="postlink" href="http://www.work.de/nocash/gbatek.htm#lcdobjoverview" target="_blank">GBATEK</a> has details, but basically you can draw 1210 normal sprite pixels per line, so almost 19 64x64 sprites all on the same horizontal line.
<br/>
Rot/scale takes more cycles per pixel, so less sprites on the same line with them, and double-size rot/scale is even more than that (plus having twice as many pixels to draw).<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46596 - tepples - Mon Jun 27, 2005 9:48 pm</h4>
    <div class="postbody"><span class="postbody">Everything DekuTree64 said was correct for the GBA. But I'll add that the limit of 1210 normal sprite pixels per line is reduced to 954 if you give the CPU access to OAM during hblank (such as if you're swapping OAM to break the 128-sprite barrier). Also, each rot/scale pixel counts as 3.25 non-rot/scale pixels.
<br/>
<br/>
I'd imagine that each of the Nintendo DS's 2D cores has similar constraints, but the exact numbers might be different in DS mode.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46620 - KoaM - Tue Jun 28, 2005 5:41 am</h4>
    <div class="postbody"><span class="postbody">Just wondering, is it possible to mix and match the OAMs from both screens. For example, let's say i want to use 228 sprites on the bottom screen and 28 for the top, is that possible?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46633 - tepples - Tue Jun 28, 2005 1:28 pm</h4>
    <div class="postbody"><span class="postbody">Each screen has its own bank of 128, so no. If you really want 200 little bullets in your 2D shooter or units in your RTS, then use an HDMA to OAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
