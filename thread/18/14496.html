<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>File printing for log - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > File printing for log</h2>
<div id="posts">
<div class="post">
    <h4>#145054 - Shay - Sun Nov 11, 2007 1:45 am</h4>
    <div class="postbody"><span class="postbody">Hi all
<br/>
<br/>
Would you know how to print in an external file for log ?
<br/>
fwrite does not seem to work...
<br/>
<br/>
Thank you</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145055 - Lick - Sun Nov 11, 2007 2:02 am</h4>
    <div class="postbody"><span class="postbody">Did you initialize libfat? Without libfat, standard file I/O functions will not work on the DS.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145056 - Shay - Sun Nov 11, 2007 2:08 am</h4>
    <div class="postbody"><span class="postbody">Yes I initialized libfat
<br/>
<br/>
Here is the code to print :
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
FILE *f = fopen(fileName_.c_str(), "wb");
<br/>
fwrite("&lt;?xml version=\"1.0\" encoding=\"utf-16\"?&gt;", sizeof(char) * 40, 1, f);
<br/>
fclose(f);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
But the file remains empty... :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145063 - Lick - Sun Nov 11, 2007 3:53 am</h4>
    <div class="postbody"><span class="postbody">You're testing on an emulator or actual hardware? AFAIK, none of the existing emulators have implemented *<span style="font-weight: bold">reliable</span>* file output. Try running on real hardware (don't forget to DLDI-patch your binaries!).<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145065 - Shay - Sun Nov 11, 2007 4:00 am</h4>
    <div class="postbody"><span class="postbody">I try on emulator for now.
<br/>
<br/>
Thank you</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145068 - dantheman - Sun Nov 11, 2007 4:11 am</h4>
    <div class="postbody"><span class="postbody">Which emulator are you using?  Some have support for DLDI or libfat while others don't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145098 - shash - Sun Nov 11, 2007 5:07 pm</h4>
    <div class="postbody"><span class="postbody">As of now, no emulator flushes the emulated FAT memory back to the host file-system, so writing to it won't have any effect.<br/>_________________<br/><a href="http://shashemudev.blogspot.com" target="_blank">http://shashemudev.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145100 - HyperHacker - Sun Nov 11, 2007 5:17 pm</h4>
    <div class="postbody"><span class="postbody">Does it persist across resets, though? You could write the file, then reset and use DSOrganize to read it.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145164 - shash - Mon Nov 12, 2007 2:04 am</h4>
    <div class="postbody"><span class="postbody">Afaik, all the emulators (desmume does it that way) seem to reset the FAT emulated buffer when loading a game/app from HD, as they create the emulated FAT system only from the source folder.<br/>_________________<br/><a href="http://shashemudev.blogspot.com" target="_blank">http://shashemudev.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145176 - HyperHacker - Mon Nov 12, 2007 4:58 am</h4>
    <div class="postbody"><span class="postbody">What if you just hit reset without loading another ROM? You could dump the file to the screen at startup.
<br/>
<br/>
Also, No$GBA supports debug logging.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#145190 - shash - Mon Nov 12, 2007 11:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">What if you just hit reset without loading another ROM? You could dump the file to the screen at startup.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, I guess that would be feasible, but probably too much of a hack :P
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">Also, No$GBA supports debug logging.</td> </tr></table><span class="postbody">
<br/>
<br/>
That's a way better solution, implementing some sort of log port seems better :)<br/>_________________<br/><a href="http://shashemudev.blogspot.com" target="_blank">http://shashemudev.blogspot.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
