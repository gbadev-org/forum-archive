<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>About the make command? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > About the make command?</h2>
<div id="posts">
<div class="post">
    <h4>#47367 - @11000RPM - Fri Jul 08, 2005 5:12 am</h4>
    <div class="postbody"><span class="postbody">Hi everyone, I am new, I have read Chris tutorial
<br/>
<br/>
<a class="postlink" href="http://www.double.co.nz/nintendo_ds/nds_develop1.html" target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop1.html</a> , it is great!
<br/>
<br/>
but I now stuck in part one. My problem is when I used the make command in the console, it outputs
<br/>
<br/>
"arm-elf-g++ -g -Wall -02 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I/c/devkitpro/libnds/include -DARM7 -c arm7_main.cpp -oarm7_main.o"
<br/>
<br/>
"arm7_main.cpp:6:17: nds.h: No such file or directory"
<br/>
<br/>
error ....
<br/>
...
<br/>
..
<br/>
<br/>
I already extracted the libnds and put it in  c:\devkitpro\libnds
<br/>
and i also set up the variable for DEVKITPRO=/c/devkitpro
<br/>
from the makefile
<br/>
NDSLIB_INCLUDE=$(DEVKITPRO)/libnds/include
<br/>
<br/>
and I can find the nds.h in the c:\devkitpro\libnds\include 
<br/>
<br/>
does anyone knows whats the problem with it, Thank you</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47368 - doublec - Fri Jul 08, 2005 5:19 am</h4>
    <div class="postbody"><span class="postbody">Are you running 'make' from a DOS Command window or from a bash shell? It should be a DOS command window. 
<br/>
<br/>
Also are you sure you are using 'libnds' and not 'ndslib'? Is there an 'nds.h' inside the include directory?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47369 - @11000RPM - Fri Jul 08, 2005 5:51 am</h4>
    <div class="postbody"><span class="postbody">Thanks for your reply 
<br/>
Yes I use the command make in DOS console window
<br/>
<br/>
and I am not quite sure the difference between 'libnds' and 'ndslib', but
<br/>
i have a dir c:\devkitpro\libnds, inside it i have dir include and lib and a file license.txt, inside dir include, i have dir nds and a header file nds.h,
<br/>
so my nds.h file is in c:\devkitpro\libnds\include
<br/>
<br/>
I already set up the variable for DEVKITPRO=/c/devkitpro
<br/>
<br/>
and i found that from the makefile, there is a line
<br/>
NDSLIB_INCLUDE=$(DEVKITPRO)/libnds/include
<br/>
<br/>
so everything is alright (I think), dont know why it cannot find the nds.h file
<br/>
[/img]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47390 - Spaceface - Fri Jul 08, 2005 2:46 pm</h4>
    <div class="postbody"><span class="postbody">I've had simialar problems when I set the vars DEVKITPRO etc while my cmd.exe window was open.. it only reads them when opened and stores 'em. Same goes for the tool total commander.. for some reason total commander reads the vars and when you open cmd.exe within total commander you're screwed too.. but you've probably tried all those things or rebooting.. but in case you didn't, do so :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47410 - @11000RPM - Fri Jul 08, 2005 5:07 pm</h4>
    <div class="postbody"><span class="postbody">Yeah i have tried that but still cannot make it work, thanks anyway, 
<br/>
i also tried different computers, and finally i can make it work under Linux environment, so strange. I have to use Linux now, but seems cannot use Wifime under Linux.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47412 - FourScience - Fri Jul 08, 2005 5:21 pm</h4>
    <div class="postbody"><span class="postbody">As Spaceface said, make sure you restart cmd.exe after you set the environment variables for them to take effect.
<br/>
<br/>
The only other thing that might be amiss is in the arm7_main.cpp file itself. Check the #include line, it should read:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
If that is set, then all the pieces of the puzzle should be in place. Judging from your error output, "arm7_main.cpp:<span style="font-weight: bold">6:17</span>: nds.h: No such file or directory", that looks like the correct amount of characters for that line.
<br/>
<br/>
The only other thing is maybe the paths are case sensitive. Is your devkitPRO install directory C:\devkitPRO or C:\devkitpro?<br/>_________________<br/>Work in progress: <a class="postlink" href="http://dual-soft.com" target="_blank">Dual-Soft.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47413 - FourScience - Fri Jul 08, 2005 5:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>@11000RPM wrote:</b></span></td> </tr> <tr> <td class="quote">Yeah i have tried that but still cannot make it work, thanks anyway, 
<br/>
i also tried different computers, and finally i can make it work under Linux environment, so strange. I have to use Linux now, but seems cannot use Wifime under Linux.</td> </tr></table><span class="postbody">
<br/>
<br/>
Also, did you install MinSys (msys), or cygwin? Your make command calls just fine but maybe it's not liking the /c/... style path definition.<br/>_________________<br/>Work in progress: <a class="postlink" href="http://dual-soft.com" target="_blank">Dual-Soft.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47416 - GPFerror - Fri Jul 08, 2005 5:39 pm</h4>
    <div class="postbody"><span class="postbody">Here is my Makefile thats based on Chris' tutorial example.
<br/>
<br/>
I am using mingw to run make, and its working for me.
<br/>
<br/>
Hopefully this helps.
<br/>
<br/>
Troy
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"># Makefile for YASFcave.nds
<br/>
# <a href="mailto:troy_ed@yahoo.com">troy_ed@yahoo.com</a>
<br/>
NDSLIB_INCLUDE=$(DEVKITPRO)/libnds/include
<br/>
NDSLIB_LIB=$(DEVKITPRO)/libnds/lib
<br/>
<br/>
all: YASFcave.nds.gba
<br/>
<br/>
arm7_main.o: arm7_main.cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM7 -c arm7_main.cpp -oarm7_main.o
<br/>
<br/>
arm7.elf: arm7_main.o
<br/>
   arm-elf-g++ -g -mthumb-interwork -mno-fpu -specs=ds_arm7.specs arm7_main.o -L$(NDSLIB_LIB) -lnds7 -oarm7.elf
<br/>
<br/>
arm7.bin: arm7.elf
<br/>
   arm-elf-objcopy -O binary arm7.elf arm7.bin
<br/>
<br/>
arm9_main.o: arm9_main.cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM9 -c arm9_main.cpp -oarm9_main.o
<br/>
<br/>
Game.o: Game.cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM9 -c Game.cpp -oGame.o
<br/>
<br/>
Map.o: Map.cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM9 -c Map.cpp -oMap.o
<br/>
<br/>
arm9.elf: arm9_main.o Game.o Map.o
<br/>
   arm-elf-g++ -g -mthumb-interwork -mno-fpu -specs=ds_arm9.specs arm9_main.o Game.o Map.o -L$(NDSLIB_LIB) -lnds9 -o arm9.elf
<br/>
<br/>
arm9.bin: arm9.elf
<br/>
   arm-elf-objcopy -O binary arm9.elf arm9.bin
<br/>
<br/>
YASFcave.nds: arm7.bin arm9.bin 
<br/>
   ndstool -c YASFcave.nds -9 arm9.bin -7 arm7.bin
<br/>
<br/>
YASFcave.nds.gba: YASFcave.nds
<br/>
   dsbuild YASFcave.nds -o YASFcave.nds.gba
<br/>
<br/>
clean:
<br/>
   rm -f *.bin
<br/>
   rm -f *.elf
<br/>
   rm -f *.o
<br/>
   rm -f *~</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47472 - @11000RPM - Sat Jul 09, 2005 9:00 am</h4>
    <div class="postbody"><span class="postbody">Thanks everyone, I have tried to reboot the machine or restart the cmd.exe,
<br/>
the #include&lt;nds.h&gt; line is also fine, I have checked the case of the dir name, I have installed msys, I suspect msys causes the problem, but as long as i can use Unix command in DOS, so seems it is not the problem, I have installed mingw but the result still the same.
<br/>
<br/>
 i will keep using Linux for this, thanks for everyone who given me suggestions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47513 - corsec - Sun Jul 10, 2005 3:18 am</h4>
    <div class="postbody"><span class="postbody">Here is a makefile that you should try:
<br/>
I changed Chris' Makefile so that all of the executable names are at the top, and easily changed. Also, I have an NDSLIBPATH instead of refering to the devkit directory.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code"># Makefile for demo1.nds
<br/>
# <a href="mailto:chris.double@double.co.nz">chris.double@double.co.nz</a>
<br/>
# modified by Anders Hustvedt
<br/>
NDSLIB_INCLUDE=$(NDSLIBPATH)/include
<br/>
NDSLIB_LIB=$(NDSLIBPATH)/lib
<br/>
<br/>
ARM7 = arm7_main
<br/>
ARM9 = arm9_main
<br/>
OUT =  demo1
<br/>
<br/>
all: $(OUT).nds.gba
<br/>
<br/>
$(ARM7).o: $(ARM7).cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM7 -c $^ -o$@
<br/>
<br/>
$(ARM7).elf: $(ARM7).o
<br/>
   arm-elf-g++ -g -mthumb-interwork -mno-fpu -specs=ds_arm7.specs $^ -L$(NDSLIB_LIB) -lnds7 -o$@
<br/>
<br/>
$(ARM7).bin: $(ARM7).elf
<br/>
   arm-elf-objcopy -O binary $^ $@
<br/>
<br/>
$(ARM9).o: $(ARM9).cpp
<br/>
   arm-elf-g++ -g -Wall -O2 -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I$(NDSLIB_INCLUDE) -DARM9 -c $^ -o$@
<br/>
<br/>
$(ARM9).elf: $(ARM9).o
<br/>
   arm-elf-g++ -g -mthumb-interwork -mno-fpu -specs=ds_arm9.specs $^ -L$(NDSLIB_LIB) -lnds9 -o $@
<br/>
<br/>
$(ARM9).bin: $(ARM9).elf
<br/>
   arm-elf-objcopy -O binary $^ $@
<br/>
<br/>
$(OUT).nds: $(ARM7).bin $(ARM9).bin 
<br/>
   ndstool -c $@ -9 $(ARM9).bin -7 $(ARM7).bin
<br/>
<br/>
$(OUT).nds.gba: $(OUT).nds
<br/>
   dsbuild $^ -o $@
<br/>
<br/>
clean:
<br/>
   rm -f *.bin
<br/>
   rm -f *.elf
<br/>
   rm -f *.o
<br/>
   rm -f *~
<br/>
   rm *.nds
<br/>
   rm *.gba</td> </tr></table><span class="postbody"><br/>_________________<br/>Currently working on a flight simulator set in 1916.
<br/>
<a href="http://ucsub.colorado.edu/~hustvedt/ds.html" target="_blank">http://ucsub.colorado.edu/~hustvedt/ds.html</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47596 - Volta - Mon Jul 11, 2005 5:28 am</h4>
    <div class="postbody"><span class="postbody">I'm a new comer to the ds scene too, coming from GBA.
<br/>
<br/>
The environment installation is waay to complex at this moment. I followed the manual install of devkitpro and aaronrogers and they are almost contradicting each other one some points regarding the path variables.
<br/>
<br/>
1- I'm on Windows XP.
<br/>
2- I want to program, not installing the nds env. for hours.
<br/>
3- I'm not an expert asm coder and playing with each bit of the registry is not my cup of tea.
<br/>
4- I want to program a game, not a technical demo featuring the 4th vram bank.
<br/>
<br/>
I can't wait for the 3rd version of the nds dev env of aaronrogers...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47634 - FourScience - Mon Jul 11, 2005 4:34 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Volta wrote:</b></span></td> </tr> <tr> <td class="quote">I'm a new comer to the ds scene too, coming from GBA.
<br/>
<br/>
The environment installation is waay to complex at this moment. I followed the manual install of devkitpro and aaronrogers and they are almost contradicting each other one some points regarding the path variables.
<br/>
<br/>
1- I'm on Windows XP.
<br/>
2- I want to program, not installing the nds env. for hours.
<br/>
3- I'm not an expert asm coder and playing with each bit of the registry is not my cup of tea.
<br/>
4- I want to program a game, not a technical demo featuring the 4th vram bank.
<br/>
<br/>
I can't wait for the 3rd version of the nds dev env of aaronrogers...</td> </tr></table><span class="postbody">
<br/>
<br/>
I wouldn't wait for arog to get the 3rd version out. I support his work but it's really not that hard to get the dev env setup manually.
<br/>
<br/>
I just tried a complete manual install of devkitARM r13, MSys, and libnds, and it took less than 30 minutes. I wasn't rushed about it and I even made a couple small mistakes. I went directly to devkit.tk and I was able to figure everything out from there, including how to get MSys despite the broken link (get it <a class="postlink" href="http://sourceforge.net/project/showfiles.php?group_id=2435&amp;package_id=82721&amp;release_id=158803" target="_blank">here</a>), and applying the base_rules and linkscripts bug fixes.
<br/>
<br/>
I didn't need to bother with CVS, though I could have and I know how to use it. I just needed to add two PATH variable values (msys/bin and devkitARM/bin), and variables for DEVKITPRO and DEVKITARM.
<br/>
<br/>
I have seen installs get borked before though and it isn't really easy to track down what's wrong. Still, it's not that hard to at least give it a shot, because typically it can be setup in well under an hour.<br/>_________________<br/>Work in progress: <a class="postlink" href="http://dual-soft.com" target="_blank">Dual-Soft.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
