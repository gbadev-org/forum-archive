<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>G6 and M3 SD Mini Fat Lib - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > G6 and M3 SD Mini Fat Lib</h2>
<div id="posts">
<div class="post">
    <h4>#98458 - leoedin - Tue Aug 15, 2006 11:47 am</h4>
    <div class="postbody"><span class="postbody">I really don't get why they send me this stuff - I'm not really a programmer.
<br/>
<br/>
anyway - I don't know if this stuff exists already
<br/>
<br/>
it seems theres a file with C++ and a file with asm for each language, but I know very little about programming (I can make a simple calculator in java, and thats about it :))
<br/>
<br/>
Anyway...Here it is - in lots of languages :)
<br/>
<br/>
Leo
<br/>
<br/>
<a href="http://gbatmw.net/dsfiles/G6M3fatlib.rar" target="_blank">http://gbatmw.net/dsfiles/G6M3fatlib.rar</a><br/>_________________<br/>Yours Truly
<br/>
<a class="postlink" href="http://rampen.ca/leo/" target="_blank">my website</a>
<br/>
<a class="postlink" href="http://rampen.ca/leo/blog" target="_blank">my blog</a>
<br/>
<a class="postlink" href="http://rampen.ca/leo/blog/?page_id=7" target="_blank">M3 Review</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98471 - chishm - Tue Aug 15, 2006 2:01 pm</h4>
    <div class="postbody"><span class="postbody">Hmm, they distributed it as a precompiled library, based on the old gba_nds_fat. That doesn't make it easy to correct bugs, nor to incorporate it into libfat. I could disassemble the functions from within the .a file, but I don't really see why I should have to. 
<br/>
<br/>
Distributing it in this form also means that another version of each app that uses gba_nds_fat needs to be compiled for G6/M3 support. Is there really so difficult to release the source, even if it is in asm? They are clearly visible inside the .a file anyway (eg G6_SelectSaver).
<br/>
<br/>
Maybe I should write some guidelines for writing drivers to be used within libfat.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98477 - Yamishi - Tue Aug 15, 2006 2:36 pm</h4>
    <div class="postbody"><span class="postbody">I hope this adds a lot of G6 support to programs I know and love... :/ (Moonshell and DSOrganize, specifically)
<br/>
<br/>
P.S. I got an e-mail with the lib too, and I wanted to be the one to make this topic :p
<br/>
<br/>
Edit: Grammar</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98513 - leoedin - Tue Aug 15, 2006 6:57 pm</h4>
    <div class="postbody"><span class="postbody">do they just email it to everyone in their address book? They sent me something for the M3 SD a few months ago as well - I think that was quite useless to these guys as well :o<br/>_________________<br/>Yours Truly
<br/>
<a class="postlink" href="http://rampen.ca/leo/" target="_blank">my website</a>
<br/>
<a class="postlink" href="http://rampen.ca/leo/blog" target="_blank">my blog</a>
<br/>
<a class="postlink" href="http://rampen.ca/leo/blog/?page_id=7" target="_blank">M3 Review</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98558 - Xtreme - Tue Aug 15, 2006 11:50 pm</h4>
    <div class="postbody"><span class="postbody">G6 / G6Lite / M3CF / M3SD Read/Write lib:
<br/>
<br/>
<span style="font-weight: bold">15-08-2006</span>
<br/>
Version 2 (FAT16 / FAT32)
<br/>
- G6 lite is supported
<br/>
- M3SDmini is supported  
<br/>
<a class="postlink" href="http://www.samipupu.com/upload/Guest/G6_M3_fat_lib_v2.7z" target="_blank">Download</a>
<br/>
<br/>
Seems that they gave the fat lib to other people too after I had mailed them several times bacause SD card write speed is too slow (Time required to write 512 bytes. SD:83ms CF:0.17ms, I hope it can be tweaked) and because there is a big need for homebrew. I see now that I was too slow as I don't read my mails so often.
<br/>
<br/>
I hope it can be used even as it's not the clean source code as chishm pointed.<br/>_________________<br/>My <a class="postlink" href="http://www.samipupu.com/upload/Guest/xtreme_theme.mp3" target="_blank">Theme</a><span style="font-size: 9px; line-height: normal">
<br/>
DS Lite (FM_V8a) ** R4 Revolution (2GB Transcend) ** SuperCard Lite (2x 2GB Transcend)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98583 - josath - Wed Aug 16, 2006 5:21 am</h4>
    <div class="postbody"><span class="postbody">I emailed them, pointing out that this is not very useful to developers, and that a source release would be much better. Perhaps other people should do the same, it might encourage them to release source. I mean, it can't hurt.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98603 - ne1 - Wed Aug 16, 2006 10:24 am</h4>
    <div class="postbody"><span class="postbody">I just got a quick quick reply from danny containing the source (I think)!
<br/>
<br/>
<a href="http://www.yousendit.com/transfer.php?action=download&amp;ufid=0FD7092E7194D31A" target="_blank">http://www.yousendit.com/transfer.php?action=download&amp;ufid=0FD7092E7194D31A</a>
<br/>
<br/>
<a href="http://www.megaupload.com/?d=KRJSCDW9" target="_blank">http://www.megaupload.com/?d=KRJSCDW9</a>
<br/>
<br/>
"The attachment is the new FatLib for the G6/M3 devices for developers to
<br/>
use.
<br/>
Please release it . Thanks!
<br/>
For all series of M3-SD included M3-SDmini, we recommend to make the
<br/>
following changes in the code of the "io_m3sd.c".
<br/>
#define CF_STS_INSERTED1  0x20
<br/>
#define CF_STS_INSERTED2  0x30
<br/>
#define CF_STS_INSERTED3  0x22
<br/>
#define CF_STS_INSERTED4  0x32
<br/>
#define isM3ins(sta) ((sta == CF_STS_INSERTED1)||(sta ==
<br/>
CF_STS_INSERTED2)||(sta == CF_STS_INSERTED3)||(sta == CF_STS_INSERTED4))
<br/>
* Thanks to the developer of RAIN, we referred to the code of RAIN r16
<br/>
io_m3sd.c and tested that it worked fine in all series of M3.
<br/>
Regards
<br/>
Danny"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98604 - pepsiman - Wed Aug 16, 2006 10:37 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ne1 wrote:</b></span></td> </tr> <tr> <td class="quote">I just got a quick quick reply from danny containing the source (I think)!</td> </tr></table><span class="postbody">
<br/>
Nope.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98607 - chishm - Wed Aug 16, 2006 11:36 am</h4>
    <div class="postbody"><span class="postbody">I wonder if those changes are all that's required to provide support for the mini M3SD. If so, then the driver in libfat should already be compatible, since it doesn't use that method of detection at all.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98609 - ne1 - Wed Aug 16, 2006 12:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>pepsiman wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ne1 wrote:</b></span></td> </tr> <tr> <td class="quote">I just got a quick quick reply from danny containing the source (I think)!</td> </tr></table><span class="postbody">
<br/>
Nope.</span></td> </tr></table><span class="postbody">
<br/>
doh</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98719 - emphyrian - Thu Aug 17, 2006 1:39 am</h4>
    <div class="postbody"><span class="postbody">This is good then, yes? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98849 - Xtreme - Fri Aug 18, 2006 12:28 am</h4>
    <div class="postbody"><span class="postbody">chishm, I hope you bring up something. 
<br/>
We all suspect if you talented enough to do it, if so, prove it.<span style="font-size: 9px; line-height: normal">*</span> ;-)
<br/>
<br/>
<span style="font-size: 9px; line-height: normal">* this should be sort of encouragement.. i hope it works..</span><br/>_________________<br/>My <a class="postlink" href="http://www.samipupu.com/upload/Guest/xtreme_theme.mp3" target="_blank">Theme</a><span style="font-size: 9px; line-height: normal">
<br/>
DS Lite (FM_V8a) ** R4 Revolution (2GB Transcend) ** SuperCard Lite (2x 2GB Transcend)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98924 - Xtreme - Fri Aug 18, 2006 3:21 pm</h4>
    <div class="postbody"><span class="postbody">I mailed them again asking the source code because they give me the precompile instead.
<br/>
They replied:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Sorry ,we have not the source code of G6 .
<br/>
We need to ask our enginee .</td> </tr></table><span class="postbody">
<br/>
<br/>
Maybe they really don't have it and there is only one guy (out house) who have coded it and have not given it to them?<br/>_________________<br/>My <a class="postlink" href="http://www.samipupu.com/upload/Guest/xtreme_theme.mp3" target="_blank">Theme</a><span style="font-size: 9px; line-height: normal">
<br/>
DS Lite (FM_V8a) ** R4 Revolution (2GB Transcend) ** SuperCard Lite (2x 2GB Transcend)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99108 - hawk - Sat Aug 19, 2006 4:05 pm</h4>
    <div class="postbody"><span class="postbody">Anyone who has actually managed to get this alternative version of the FAT library to work?
<br/>
<br/>
In particular, I can't even seem to get this to link, but that could be due to me using the "wrong" toolchain.
<br/>
<br/>
(I'm using current devkitpro tools, that is devkitarm 19b, etc...)
<br/>
<br/>
<br/>
First of all, it had the "wrong EABI version"... I resorted to using change-eabi (from the devkitpro site).
<br/>
<br/>
But after that I still get an error like this:
<br/>
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-eabi/4.1.1/../../../../arm-eabi/bin/ld.exe:
<br/>
error: no memory region specified for loadable section
<br/>
`i.disc_setGbaSlotInterface'
<br/>
collect2: ld returned 1 exit status
<br/>
<br/>
<br/>
Any ideas on how to get this library to work?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99127 - hawk - Sat Aug 19, 2006 5:30 pm</h4>
    <div class="postbody"><span class="postbody">Looking into the G6 object files it turns out that they were generated by ADS1.2, which is not too promising when it comes to getting them to work with anything else...
<br/>
<br/>
Let's hope that harassing them a little about releasing the source pays off.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99145 - Xtreme - Sat Aug 19, 2006 7:52 pm</h4>
    <div class="postbody"><span class="postbody">Moonlight told me that this fat lib is for <a class="postlink" href="http://www.arm.com/products/DevTools/ADS.html" target="_blank">official ARM compiler ADS</a> and cannot be used with DevKitARM. :(
<br/>
I'm waiting reply from the coder of the fat lib. I hope he gives the source. M3 team doesn't have sources.<br/>_________________<br/>My <a class="postlink" href="http://www.samipupu.com/upload/Guest/xtreme_theme.mp3" target="_blank">Theme</a><span style="font-size: 9px; line-height: normal">
<br/>
DS Lite (FM_V8a) ** R4 Revolution (2GB Transcend) ** SuperCard Lite (2x 2GB Transcend)</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99181 - hawk - Sat Aug 19, 2006 11:23 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Xtreme wrote:</b></span></td> </tr> <tr> <td class="quote">Moonlight told me that this fat lib is for <a class="postlink" href="http://www.arm.com/products/DevTools/ADS.html" target="_blank">official ARM compiler ADS</a> and cannot be used with DevKitARM. :(
<br/>
I'm waiting reply from the coder of the fat lib. I hope he gives the source. M3 team doesn't have sources.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, yes... It's obvious from looking at the strings in the object files that "ARM C Compiler, ADS1.2 [Build 805]" was used.
<br/>
<br/>
(And that the sources that we're after appear to be in D:\Coding\NDS\G6LoaderTest\arm9\SOURCE\FAT32\SOURCE\ on some machine out there :P )
<br/>
<br/>
I really really hope that whoever has the sources is willing to release them, it would make things so much easier.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100699 - hawk - Tue Aug 29, 2006 9:38 pm</h4>
    <div class="postbody"><span class="postbody">Any chance that anyone has any (positive or negative) updates on this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100852 - Yamishi - Thu Aug 31, 2006 4:02 am</h4>
    <div class="postbody"><span class="postbody">I hope something good can come out of this :( I got a G6 Lite, only to be completely disappointed (I really <span style="font-style: italic">did</span> get it just for homebrew - I only wanted it because it's flush with the DS Lite and doesn't need expensive memory cards).
<br/>
<br/>
On an unrelated topic, are there <span style="font-style: italic">any</span> devices that are compatible with DSOrganize, Moonshell and DS Doom that are flush with the DS Lite? ^_^;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100855 - tepples - Thu Aug 31, 2006 5:05 am</h4>
    <div class="postbody"><span class="postbody">Why do you need flush? Is it the pants pocket + jogging = card might fall out of DS issue? If so, you could get a microSD adapter for music and a CF adapter for everything else.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100857 - Bluemercury - Thu Aug 31, 2006 5:30 am</h4>
    <div class="postbody"><span class="postbody">Is it true that the fatlib for m3 minisd is out for developers?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100893 - Yamishi - Thu Aug 31, 2006 2:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Why do you need flush? Is it the pants pocket + jogging = card might fall out of DS issue? If so, you could get a microSD adapter for music and a CF adapter for everything else.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, while that is an issue, there are a couple others:
<br/>
a) My shirt pockets aren't wide enough to fit a DS Lite + GBAMP, and I don't like putting my Lite in my pants pockets, because I tend to bump into things a lot, and that might damage it.
<br/>
b) It looks better ;D (not a huge issue, but it certainly doesn't hurt)
<br/>
<br/>
Although I <span style="font-style: italic">had</span> a GBAMP, I got rid of it when it stopped working. The CF card was barely readable in ANY device, and the GBAMP sometimes messes up for no reason and just garbles whatever I try to do. 
<br/>
New GBAMP + CF card:
<br/>
a) Expensive
<br/>
b) Big
<br/>
<br/>
Although I do appreciate the input. I will start saving up for a GBAMP + CF card ;D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100898 - Sektor - Thu Aug 31, 2006 3:28 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Bluemercury wrote:</b></span></td> </tr> <tr> <td class="quote">Is it true that the fatlib for m3 minisd is out for developers?</td> </tr></table><span class="postbody">
<br/>
<br/>
Not a usable version.  They released something but it was useless.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100988 - chishm - Fri Sep 01, 2006 10:52 am</h4>
    <div class="postbody"><span class="postbody">libfat never had trouble with the M3SD mini because of the way it was coded. G6 has no support because GBalpha don't feel like releasing the source code to their drivers, and no one feels like disassembling the provided, compiled library.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101029 - Bluemercury - Fri Sep 01, 2006 8:31 pm</h4>
    <div class="postbody"><span class="postbody">By the way how's the m3 lite compatibility? should i change for another card?
<br/>
Or will M3 release the damn fatlibs? whats the best combo for Roms/Homebrew compatibility?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101031 - HyperHacker - Fri Sep 01, 2006 9:01 pm</h4>
    <div class="postbody"><span class="postbody">Official DS cards and a GBAMP.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101036 - Bluemercury - Fri Sep 01, 2006 9:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">Official DS cards and a GBAMP.</td> </tr></table><span class="postbody">
<br/>
<br/>
Official DS cards?
<br/>
Dont know the GBAMP though...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101053 - tepples - Fri Sep 01, 2006 10:45 pm</h4>
    <div class="postbody"><span class="postbody">"Official DS cards" means buy the games and play them unmodified.
<br/>
"GBAMP" means GBA Movie Player v2 CF.
<br/>
<br/>
But where should I discuss rom-hacking? A few people on tetrisconcept.com who own authentic <span style="font-style: italic">Tetris DS</span> Game Cards have expressed a wish for a hack that disables the music (but not the sound effects) in <span style="font-style: italic">Tetris DS</span>.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#101061 - Bluemercury - Fri Sep 01, 2006 11:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">"Official DS cards" means buy the games and play them unmodified.
<br/>
"GBAMP" means GBA Movie Player v2 CF.
<br/>
<br/>
But where should I discuss rom-hacking? A few people on tetrisconcept.com who own authentic <span style="font-style: italic">Tetris DS</span> Game Cards have expressed a wish for a hack that disables the music (but not the sound effects) in <span style="font-style: italic">Tetris DS</span>.</td> </tr></table><span class="postbody">
<br/>
<br/>
GBAMP is from m3 too right?Because my m3 minisd is also a gba movie player...am i correct?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
