<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>A firmware 'shell'? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > A firmware 'shell'?</h2>
<div id="posts">
<div class="post">
    <h4>#127644 - MaHe - Thu May 03, 2007 7:24 pm</h4>
    <div class="postbody"><span class="postbody">After inspecting the way the games are ran on DS (I'm an amateur, don't flame me for using such simple language :P ), I've figured it's possible to patch the binary in order to inject soft-reset, backlight changing, a cheat system and even a simple pause. However, the thing I want to ask is - how far can you go and not ruin the framerate? Do you think it's possible to implement a pause menu? Real-time save? A shell (like the one on PSP) even?
<br/>
<br/>
Thanks for answers!<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"><br/><br/>Last edited by MaHe on Fri May 04, 2007 5:58 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#127647 - Lick - Thu May 03, 2007 7:54 pm</h4>
    <div class="postbody"><span class="postbody">I don't really understand what you mean by "pause menu" and "real-time save", and I'm even more confused by "shell (PSP)". 
<br/>
<br/>
What would those features enable you to do?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127648 - Dan2552 - Thu May 03, 2007 8:01 pm</h4>
    <div class="postbody"><span class="postbody">what he means by shell is that the PSP can bring its main menu up on-top of the game so you can change the music you're playing etc
<br/>
<br/>
*note this is all guesswork, I don't have a PSP ;P
<br/>
<br/>
what he means by real-time save is save a snapshot of the current running game, and be able to load that snapshot again later. (much like emulator snapshots)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127653 - josath - Thu May 03, 2007 8:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dan2552 wrote:</b></span></td> </tr> <tr> <td class="quote">what he means by shell is that the PSP can bring its main menu up on-top of the game so you can change the music you're playing etc
<br/>
<br/>
*note this is all guesswork, I don't have a PSP ;P
<br/>
<br/>
what he means by real-time save is save a snapshot of the current running game, and be able to load that snapshot again later. (much like emulator snapshots)</td> </tr></table><span class="postbody">
<br/>
<br/>
a general-purpose snapshot tool is probably impossible, since a lot of the ds registers are write-only afaik.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127677 - Dood77 - Fri May 04, 2007 12:48 am</h4>
    <div class="postbody"><span class="postbody">To do a save state you need to have more memory/processing power than was originally needed to run the game.
<br/>
And backlight levels only work on DSLites or DS Phat original firmware &gt; 4, and a custom flashme version.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127694 - tepples - Fri May 04, 2007 2:34 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dood77 wrote:</b></span></td> </tr> <tr> <td class="quote">To do a save state you need to have more memory/processing power than was originally needed to run the game.</td> </tr></table><span class="postbody">
<br/>
"more memory" meaning 5 MB more memory right? Would a SuperCard, Expansion Pak, or Trainer Toolkit be able to do this? And aren't most of the write-only registers rewritten every frame anyway?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127700 - HyperHacker - Fri May 04, 2007 4:45 am</h4>
    <div class="postbody"><span class="postbody">I'm assuming the PSP "shell", which I've never used, is similar to the Xbox 360 dashboard in that you can open it during a game to change the music and so on. This generally requires the games to run in an operating system, which DS games don't. You could potentially disable the sound code entirely (losing SFX too, unless they're all on certain channels, then they could be saved) and hack in a simple WAV player or something, but I suspect the effort required wouldn't really be worth it.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127721 - simonjhall - Fri May 04, 2007 9:04 am</h4>
    <div class="postbody"><span class="postbody">One of my flash cards has a function where you can hold down a button combo and it saves the running state to disk - although I can't get it to do anything. So maybe I've got the wrong end of the stick :-)<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127731 - chishm - Fri May 04, 2007 10:37 am</h4>
    <div class="postbody"><span class="postbody">If you have external memory that the game wasn't originally designed to use, you can have a shell. The overheads during normal gameplay would be very low -- once per VBlank you'd do a simple check for a certain button combination being pressed. This would be less overhead than a cheat engine adds, which must process the cheat list every VBlank. 
<br/>
<br/>
Real-time save is practically impossible, as josath has said. You'd basically need to keep track of every register write and mirror that in a mirror state internal to the snapshot tool.<br/>_________________<br/><a class="postlink" href="http://chishm.drunkencoders.com" target="_blank">http://chishm.drunkencoders.com</a>
<br/>
<a class="postlink" href="http://dldi.drunkencoders.com" target="_blank">http://dldi.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127734 - chuckstudios - Fri May 04, 2007 10:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>simonjhall wrote:</b></span></td> </tr> <tr> <td class="quote">One of my flash cards has a function where you can hold down a button combo and it saves the running state to disk - although I can't get it to do anything. So maybe I've got the wrong end of the stick :-)</td> </tr></table><span class="postbody">
<br/>
<br/>
My EZFlash III also does this. It works, too :O</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127764 - MaHe - Fri May 04, 2007 6:00 pm</h4>
    <div class="postbody"><span class="postbody">Huh, thanks for explanation, chishm. And josath. And everyone else too. :)
<br/>
<br/>
P.S.: Sorry for my amateur vocabulary. And I don't know myself why I named the thread [discussion]. Oh well.<br/>_________________<br/><span style="font-size: 9px; line-height: normal">[ Crimson and Black Nintendo DS Lite | CycloDS Evolution | EZ-Flash 3-in-1 | 1 GB Transcend microSD ]</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127783 - HyperHacker - Sat May 05, 2007 12:00 am</h4>
    <div class="postbody"><span class="postbody">Yeah, you can hook into handlers to do these things, cheat devices did it on a number of systems. It's just not going to be easy, certainly not something the firmware alone could pull off (at least, not a hack of Nintendo's, maybe a custom one might have the space for it) and if you're expecting it to replace in-game music, you probably won't have much luck.
<br/>
<br/>
I wish Nintendo would implement this sort of thing though, because being able to replace the music (not to mention the other nice things X360's has) is awesome. They've already got it to an extent on Wii, with the Home button, but it does very little.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127794 - Dood77 - Sat May 05, 2007 1:46 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">They've already got it to an extent on Wii, with the Home button, but it does very little.</td> </tr></table><span class="postbody">
<br/>
Yeah, and you can't even use the home button in certain situations...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127812 - HyperHacker - Sat May 05, 2007 8:36 am</h4>
    <div class="postbody"><span class="postbody">I forgot to mention I suspect the menu may even be statically linked into the games. Being able to call it up at any time, even on the Wii Menu, suggests otherwise though. Where are these situations you speak of?
<br/>
<br/>
I know N64 and Gamecube games ran in a simple OS that was statically linked to the executable, so it wouldn't have been a huge jump from there to running in one that's part of the system. However with such a low-powered system competing against Xbox 360 and Playstation 3, I wouldn't be surprised if they went with static linking again, so that developers could squeeze extra performance out of the system by running bare-metal or customizing the OS if they really needed to.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128020 - Dood77 - Mon May 07, 2007 8:24 pm</h4>
    <div class="postbody"><span class="postbody">Uhh... Things off the top of my head, during the COD 3 cutscenes, during a firmware update (understandable) ... Can't remember other situations, but I know there's more.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128150 - HyperHacker - Wed May 09, 2007 12:48 am</h4>
    <div class="postbody"><span class="postbody">It's likely the games can disable it or have to manually check for the button and call the appropriate function to display the menu. Otherwise you'd have people pressing it while saving or dumb things like that. During cutscenes may be a glitch, or they just couldn't get it to work correctly for some reason (streaming video from the disc, doesn't like to be interrupted).<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#128158 - Dood77 - Wed May 09, 2007 2:40 am</h4>
    <div class="postbody"><span class="postbody">Yeah they all have the same result, a small flashing home icon with a red crossed circle around it.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
