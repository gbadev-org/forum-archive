<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NDSLIB Makefile Help - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > NDSLIB Makefile Help</h2>
<div id="posts">
<div class="post">
    <h4>#41466 - NoToDoHo - Thu Apr 28, 2005 8:30 pm</h4>
    <div class="postbody"><span class="postbody">I am trying to adapt my NDSLIB Makefiles to work under 4NT with my version of make.exe (same version I used for GBA dev).  I am trying to build the examples/arm9/2d/hello_world demo.  I've been able to build the libraries and the startup boot loader with minimal changes to the Makefiles.  With hello_world, I'm encountering two problems.  First, with the line:
<br/>
<br/>
CPPFILES := $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
<br/>
Make doesn't seem to find main.cpp (I do echo $(OFILES) within one of the steps and it gives me a blank).  When I copy main.cpp to the same directory as Makefile and change the above line to:
<br/>
<br/>
CPPFILES := main.cpp
<br/>
<br/>
it finds the file now ($(OFILES) now yields main.o) but it doesn't see the need to build it - the link fails because it doesn't build main.o.  I noticed the line:
<br/>
<br/>
%.elf:
<br/>
    &lt;link commands&gt;
<br/>
<br/>
and changed this to:
<br/>
<br/>
%.elf:  $(OFILES)
<br/>
    &lt;link commands&gt;
<br/>
<br/>
when I do this, I get the message:
<br/>
<br/>
make[1]: Circular main.elf &lt;- main.o dependency dropped.
<br/>
<br/>
So it still doesn't work.
<br/>
<br/>
Any insight you could offer would be greatly appreciated!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41471 - josath - Thu Apr 28, 2005 10:01 pm</h4>
    <div class="postbody"><span class="postbody">why do you want to use 4nt instead of free cmd.exe or free bash shell or similar, both of which are known to work?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41489 - wintermute - Fri Apr 29, 2005 1:56 am</h4>
    <div class="postbody"><span class="postbody">use msys, not random make variant xxx.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41510 - sasq - Fri Apr 29, 2005 10:05 am</h4>
    <div class="postbody"><span class="postbody">ndslib makefiles &amp; templates feels pretty over-engineered. Doesnt work with cygwin either.  Makefiles could be simplified a lot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41512 - wintermute - Fri Apr 29, 2005 10:24 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sasq wrote:</b></span></td> </tr> <tr> <td class="quote">ndslib makefiles &amp; templates feels pretty over-engineered. Doesnt work with cygwin either.  Makefiles could be simplified a lot.</td> </tr></table><span class="postbody">
<br/>
<br/>
devkitARM is not designed to work with cygwin, *deliberately*
<br/>
<br/>
using devkitARM with cygwin is *NOT* supported.
<br/>
<br/>
the current ndslib makefiles &amp; templates will be history soon.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41517 - sasq - Fri Apr 29, 2005 12:03 pm</h4>
    <div class="postbody"><span class="postbody">devkitarm works fine with cygwin - maybe not when run through bash, havent tried that - but using cygwin make works.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41520 - wintermute - Fri Apr 29, 2005 1:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sasq wrote:</b></span></td> </tr> <tr> <td class="quote">devkitarm works fine with cygwin - maybe not when run through bash, havent tried that - but using cygwin make works.</td> </tr></table><span class="postbody">
<br/>
<br/>
people keep reporting problems with /cygdrive/ nonsense &amp; demanding that I fix it :/ There are also occasional problems with cygwin tools causing devkitARM to crash (mostly 95/98/Me as I recall)
<br/>
<br/>
My general sentiment towards cygwin is, if it works for you great, if not don't moan at me.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
