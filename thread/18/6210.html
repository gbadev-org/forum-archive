<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>1.19.12 fixed point? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > 1.19.12 fixed point?</h2>
<div id="posts">
<div class="post">
    <h4>#47062 - LOst? - Mon Jul 04, 2005 6:36 pm</h4>
    <div class="postbody"><span class="postbody">What is 1.19.12 fixed point? I don't get it. I only know 16:16 and 8:8 fixed point. I have no idea how to create a 1.19.12 fixed point value or edit the decimal point value alone, or the integer value alone.
<br/>
<br/>
Another question: When rotating sprites, do you need to use a special amount of LUT Sine values? Some people use 360, but I want to use 256 or 512 because i can wrap it with AND. Can that be arranged?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47063 - tepples - Mon Jul 04, 2005 7:00 pm</h4>
    <div class="postbody"><span class="postbody">Is 1.19.12 the same as signed 20:12?
<br/>
<br/>
And when rotating things, you can arrange your trig tables however you want. Yes, a lot of people use a 256- or 512-entry trig table.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47085 - sajiimori - Mon Jul 04, 2005 11:34 pm</h4>
    <div class="postbody"><span class="postbody">Yeah, it's more like signed 20.12 than 1.19.12 because it's two's complement.  This is as opposed to standard floating point where you can negate a value just by flipping the sign bit.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
typedef s32 fx32;  // 20.12 fixed point
<br/>
<br/>
<br/>
fx32 iToFx32(s32 val)
<br/>
{
<br/>
  return val &lt;&lt; 12;
<br/>
}
<br/>
<br/>
<br/>
int fx32ToInt(fx32 val)
<br/>
{
<br/>
  return val &gt;&gt; 12;
<br/>
}
<br/>
<br/>
<br/>
fx32 fractionalPart(fx32 val)
<br/>
{
<br/>
  return val &amp; 0xFFF;
<br/>
}
<br/>
<br/>
<br/>
fx32 replaceIntegerPart(fx32 val, int newInt)
<br/>
{
<br/>
  return iToFx32(newInt) + fractionalPart(val);
<br/>
}
<br/>
<br/>
<br/>
fx32 replaceFractionalPart(fx32 val, fx32 newFract)
<br/>
{
<br/>
  return intToFx32(fx32ToInt(val)) + newFract;
<br/>
}
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by sajiimori on Mon Jul 04, 2005 11:42 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#47086 - duencil - Mon Jul 04, 2005 11:39 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Is 1.19.12 the same as signed 20:12?.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, its the same - the term 1.19.12 is misleading. The leftmost bit indicates the sign. If its a 1, the bits contain a negative number in two's complement form.
<br/>
<br/>
As for rotations, there are 512 entry lookup tables in ndslib for SIN and COS already.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47096 - rize - Tue Jul 05, 2005 4:00 am</h4>
    <div class="postbody"><span class="postbody">there are ndslib/libnds functions for converting various formats to f32 (floatof32 for example).
<br/>
<br/>
to convert an f32 to integer just shift right 12 (you throw away all the decimal precision of course)
<br/>
<br/>
and converting an int is the opposite (shift left 12).
<br/>
<br/>
basically, with this fixed point format, there are 12 bits for the decimal meaning that the fractional part can hold 4096 values.  These values are roughtly equivalent to 0/4096 .. 1/4096 .. 2/4096  ...  4095/4096 etc.
<br/>
<br/>
it's kind of like having 4 decimal places but having to count by 2.5 intead of 1:
<br/>
<br/>
ala
<br/>
<br/>
0.0002
<br/>
0.0004
<br/>
0.0007
<br/>
0.0009
<br/>
etc.
<br/>
<br/>
if you just do floatof32(0.000254) or something, it'll essentially round to the nearest f32 value.
<br/>
<br/>
Look at the f32 defines in the library and experiment to get a better idea of what's going on.
<br/>
<br/>
excuse the rambling nature of hte previous comments</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#47099 - LOst? - Tue Jul 05, 2005 4:59 am</h4>
    <div class="postbody"><span class="postbody">Thank you for your answers. This will help me to understand fixed point more!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
