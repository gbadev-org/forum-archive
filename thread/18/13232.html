<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>libfat + slot2 nightmare [solved - for now] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > libfat + slot2 nightmare [solved - for now]</h2>
<div id="posts">
<div class="post">
    <h4>#129081 - silent_code - Fri May 18, 2007 6:47 pm</h4>
    <div class="postbody"><span class="postbody">hi!
<br/>
does anyone happen to have such instructions? i tried it, but everytime i try to create a fat12 image to append it to the .nds, the tool says it can't find whatever file is the first and stops, producing an unusable 10bk image file.
<br/>
i'm totally lost! if i should ever make a slot1 compatible version of the shadow volume demo, i need to get past that first stage!
<br/>
any help is very much appreciated!
<br/>
thanks for reading and eventually helping me.
<br/>
<br/>
ps: i develop with noaflash kit with mk4 mini and win xp home sp2. i use that fat12 program called fcsr by GPFerror. i also followed his quick instructions over here: <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=114090&amp;highlight=fcsr+dldi#114090" target="_blank">http://forum.gbadev.org/viewtopic.php?p=114090&amp;highlight=fcsr+dldi#114090</a> but still had no luck.</span><span class="gensmall"><br/><br/>Last edited by silent_code on Thu May 24, 2007 5:37 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#129094 - dantheman - Fri May 18, 2007 8:05 pm</h4>
    <div class="postbody"><span class="postbody">So when you put your files in the "fcsr" folder and type "build.bat image.img fcsr" into the command line it does not produce a file?  I had this issue before once myelf, attempting to create a FAT12 image for DSLinux, but I never found a solution.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129098 - Noda - Fri May 18, 2007 9:20 pm</h4>
    <div class="postbody"><span class="postbody">silent_code: if you were using GBFS previously you can easily switch to my EFS system, it's working on slot 1&amp;2 ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129159 - silent_code - Sat May 19, 2007 10:23 pm</h4>
    <div class="postbody"><span class="postbody">@dantheman: as far as i can remember it's just like that. like i said before, i was following the instructions very closely and didn't succeed. thanks for the info.
<br/>
<br/>
@Noda: thank you! i'll have it tested as soon as i get a temporary dev environment up and running. i hope it'll work. :^) i'll look for it right away, although it would be cool, if you'd posted a link. ;^p
<br/>
<br/>
EDIT: found it ;^) "very nice, high five!"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129537 - silent_code - Wed May 23, 2007 4:31 pm</h4>
    <div class="postbody"><span class="postbody">actually, it looks like efs has not solved my problem, as i still need to make a fat12 image file and *that* is my problem, not libfat. it doesn't work!
<br/>
<br/>
damn.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129645 - silent_code - Thu May 24, 2007 5:15 pm</h4>
    <div class="postbody"><span class="postbody">ok, here we go.
<br/>
i have a directory called files, where everything i want to be included int the fat.img is located.
<br/>
then i type: build.bat fat.img files
<br/>
output:
<br/>
$&gt;...
<br/>
Builds a FAT disk image from a given directory.
<br/>
64
<br/>
Creating image
<br/>
creating FAT12 image size = 0.01 MB's
<br/>
<br/>
<br/>
Working[.]DoneInjectFile("files\foo.bar") failed
<br/>
Blessing image
<br/>
OK - start1:0 size1:0
<br/>
"FAT12 image built as fat.img from /files"
<br/>
$&gt;...
<br/>
<br/>
that's all, except for that it doesn't matter what file i try to include (that's why i wrote foo.bar in this post). what is wrong? i didn't modify the .bat or anything.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129646 - GPFerror - Thu May 24, 2007 5:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>silent_code wrote:</b></span></td> </tr> <tr> <td class="quote">ok, here we go.
<br/>
i have a directory called files, where everything i want to be included int the fat.img is located.
<br/>
then i type: build.bat fat.img files
<br/>
output:
<br/>
$&gt;...
<br/>
Builds a FAT disk image from a given directory.
<br/>
64
<br/>
Creating image
<br/>
creating FAT12 image size = 0.01 MB's
<br/>
<br/>
<br/>
Working[.]DoneInjectFile("files\foo.bar") failed
<br/>
Blessing image
<br/>
OK - start1:0 size1:0
<br/>
"FAT12 image built as fat.img from /files"
<br/>
$&gt;...
<br/>
<br/>
that's all, except for that it doesn't matter what file i try to include (that's why i wrote foo.bar in this post). what is wrong? i didn't modify the .bat or anything.</td> </tr></table><span class="postbody">
<br/>
<br/>
how large is foo.bar ?
<br/>
<br/>
and are you trying to make it so foo.bar is at / or at /files/foo.bar ?
<br/>
<br/>
in the build.bat try change this line to
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if /I %size% LSS 10000  (                      set /A size="10000" )</td> </tr></table><span class="postbody">
<br/>
to
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">if /I %size% LSS 300000  (                      set /A size="300000" )</td> </tr></table><span class="postbody">
<br/>
<br/>
See if that helps.
<br/>
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#129648 - silent_code - Thu May 24, 2007 5:34 pm</h4>
    <div class="postbody"><span class="postbody">OH, MAN!
<br/>
got it. why did noone tell me i had to set the size *BY HAND*?
<br/>
my files are 480kb in total, all in /files (not the root). setting size to 500kb solved the problem. at least i think it did. i thought the size setting was supposed to prevent the .img being too small if there were less than 10kb of files data. (?)
<br/>
<br/>
thanks to everyone who tried to help me with it! :^) big thanks to troy for your tools and the final post! :^D
<br/>
wow. i guess i'll now be able to make a universal (slot 1&amp;2) rom of my shadow volume demo. ;^D</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
