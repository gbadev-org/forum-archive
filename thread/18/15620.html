<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>[SOLVED] CALL glInit() *BEFORE* USING gl[whatever]() ! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > [SOLVED] CALL glInit() *BEFORE* USING gl[whatever]() !</h2>
<div id="posts">
<div class="post">
    <h4>#157898 - silent_code - Sun Jun 01, 2008 2:25 pm</h4>
    <div class="postbody"><span class="postbody">hi there!
<br/>
<br/>
first of all: i have searched the forum for this and coudln't find anything that helped me. that doesn't mean that it isn't out there, burried in some thread, though! so, if you have a link to a simmilar topic, please post it.
<br/>
<br/>
this has already cost me a day worth of coding and it's making me nuts!
<br/>
it's very important that i get this done very soon, so: *please*, help me.
<br/>
<br/>
i've been updating my volume shadow demo and my texture loading code, that worked with older libnds versions (i can't remember which one it was, as it's been a while and i've updated libnds a few times since), will hang the hw on the following lines (although the *free* version for no$gba 2.6 will not show any error, but won't display textures, just colored and lighted geometry):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   glGenTextures(1, &amp;dolltex); // will definitely hang the hw
<br/>
   glBindTexture(0, dolltex); // possibly, too, because of the first one
<br/>
   glTexImage2D(0, 0, GL_RGB, TEXTURE_SIZE_256 , TEXTURE_SIZE_256, 0, TEXGEN_TEXCOORD | GL_TEXTURE_WRAP_S | GL_TEXTURE_WRAP_T, (uint8 *)pTexData); // well, i really don't know, but chances are, that this screws up, too, due to the others not working
<br/>
</td> </tr></table><span class="postbody">
<br/>
dolltex is a global 'int' and pTexData is a local 'uint16' pointer (to 16bit texture data.)
<br/>
if i insert infinite loops ( while(true){} ) before each line, the first loop will be entered and the hw will not hang (i can tell that by printing something out to the screen.) as i remove the loop before the first line, the hw will hang.
<br/>
what is going on?
<br/>
how can this possibly be?
<br/>
has anyone else seen this behaviour?
<br/>
<br/>
any advise / hint / (constructive) criticism is appreciated. :^D
<br/>
<br/>
as the project is open source anyways, i can make the current sources availabe, if needed, but i don't think i am doing anything wrong! :^(
<br/>
<br/>
EIDT: i also have to note that i've been and still am loading textures in the main function (adding wait for vblank doesn't help here.)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"><br/><br/>Last edited by silent_code on Mon Jun 02, 2008 12:26 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#157919 - elhobbs - Sun Jun 01, 2008 11:21 pm</h4>
    <div class="postbody"><span class="postbody">make sure you have called glInit before you use any of the gl* functions. there is a global variable "glGlob" that gets initialized during this call and it is referenced by a lot of the gl functions. this is different behaviour then some of the older libnds versions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157923 - silent_code - Mon Jun 02, 2008 12:25 am</h4>
    <div class="postbody"><span class="postbody">and the Oscar goes toooo.... elhobbs!
<br/>
thank you man! i didn't even know of that function! thank you, thank you, thank you, thank *YOU*!
<br/>
<br/>
:^)
<br/>
<br/>
seriously, that's why i "LOVE" this community! there's always someone around when you're in trouble - collective knowledge rules! :^D
<br/>
<br/>
case closed. :^)
<br/>
(thank you!)<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#157939 - simonjhall - Mon Jun 02, 2008 7:44 am</h4>
    <div class="postbody"><span class="postbody">Yeah that one bit me in the arse months back. This is why we need asserts in libnds!<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
