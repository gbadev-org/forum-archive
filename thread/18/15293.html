<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Floating sqrt - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Floating sqrt</h2>
<div id="posts">
<div class="post">
    <h4>#153468 - Rajveer - Mon Mar 31, 2008 2:18 pm</h4>
    <div class="postbody"><span class="postbody">I can't seem to find a floating point sqrt function in Devkitarm. I need this during level load as I get inaccuracies with fixed-point in things like normal calculations with extreme polygons. ANSI C says it should have sqrt, and Newlib says it has a function sqrtf but it's not defined when I try to compile, any ideas?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153469 - M3d10n - Mon Mar 31, 2008 2:27 pm</h4>
    <div class="postbody"><span class="postbody">Did you try adding this to your code?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;math.h&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
I had to use atan2f() because I was too lazy to write a fixed-point version and that's all I hd to do to access the fp math functions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153470 - Rajveer - Mon Mar 31, 2008 2:33 pm</h4>
    <div class="postbody"><span class="postbody">Yup already including math.h. Just to make sure I tried atanf() which compiles, but sqrt or sqrtf don't.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153472 - M3d10n - Mon Mar 31, 2008 2:47 pm</h4>
    <div class="postbody"><span class="postbody">I did a text search on the include files. Both sqrt and sqrtf are in math.h, but they are under #ifndef _REENT_ONLY. I couldn't find it defined anywhere, but you could try looking at it.
<br/>
<br/>
You could also try including fastmath.h and using fast_sqrtf(). I can't check if that one will compile right now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153473 - Rajveer - Mon Mar 31, 2008 2:57 pm</h4>
    <div class="postbody"><span class="postbody">Fast_sqrtf is defined as
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define   sqrtf(x)   fast_sqrtf(x)</td> </tr></table><span class="postbody">
<br/>
<br/>
but I too can't find sqrtf defined anywhere. Including fastmath.h and trying to compile fast_sqrtf also gives an implicit declaration warning and an undefined reference error :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153477 - elhobbs - Mon Mar 31, 2008 4:16 pm</h4>
    <div class="postbody"><span class="postbody">are you linking against libm?
<br/>
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=15131" target="_blank">http://forum.gbadev.org/viewtopic.php?t=15131</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153478 - Rajveer - Mon Mar 31, 2008 4:52 pm</h4>
    <div class="postbody"><span class="postbody">My bad, I thought including math.h was all I had to do, didn't know it was part of a separate library. Cheers!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
