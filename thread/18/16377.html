<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>alpha opengl - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > alpha opengl</h2>
<div id="posts">
<div class="post">
    <h4>#166096 - hacker013 - Mon Jan 26, 2009 5:47 pm</h4>
    <div class="postbody"><span class="postbody">hey everybody,
<br/>
<br/>
has someone some code so i can set the alpha with opengl because functions like glColor4d are not yet included.
<br/>
<br/>
gr,
<br/>
<br/>
hacker013<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166097 - Izhido - Mon Jan 26, 2009 6:09 pm</h4>
    <div class="postbody"><span class="postbody">It's my sad duty to report that, unfortunately, it's highly unlikely that we'll see functions as glColor4d() ever on libnds.
<br/>
<br/>
You see, the DS hardware is not quite OpenGL compliant. There are some things missing (as well as some things you wouldn't even dream that could appear on OpenGL :D ).  In one of the missing things, you can specify alpha for a FULL quad / triangle, instead of per vertex. 
<br/>
<br/>
You can specify an alpha for the next polygons being drawn, by writing to bits 16-20 of GFX_POLY_FORMAT. Not sure if there's a glPolyFmt() option for that. 
<br/>
<br/>
Hope that helps.
<br/>
<br/>
- Izhido</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166098 - elhobbs - Mon Jan 26, 2009 6:28 pm</h4>
    <div class="postbody"><span class="postbody">alpha is per poly not per vertex
<br/>
<a class="postlink" href="http://nocash.emubase.de/gbatek.htm#ds3dtextureblending" target="_blank">http://nocash.emubase.de/gbatek.htm#ds3dtextureblending</a>
<br/>
it can be set using glPolyFmt and POLY_ALPHA. Here is some code that I use. It is used to render the dual scrolling sky layer in cquake.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
//set texture blending and draw lower layer
<br/>
glPolyFmt(POLY_ALPHA(31) | POLY_CULL_FRONT | POLY_ID(1)|1&lt;&lt;13));
<br/>
EmitSkyPolys (fa,pts);
<br/>
<br/>
//set to transparent and ztest equal for top layer
<br/>
//bit 14 set depth test equal
<br/>
//bit 11 enables depth writes for translucent polys
<br/>
glPolyFmt(POLY_ALPHA(16)|POLY_CULL_FRONT|POLY_ID(4)|(1&lt;&lt;14)|(0&lt;&lt;11) | POLY_MODULATION);
<br/>
EmitSkyPolys (fa,pts);
<br/>
<br/>
//set polyformat back to normal
<br/>
glPolyFmt(POLY_ALPHA(31) | POLY_CULL_FRONT | POLY_ID(1) | (1&lt;&lt;13));
<br/>
<br/>
<br/>
</td> </tr></table><span class="postbody"> you may or may not want the depth test equal for your alpha polys - just turn off bit 14. if you do want depth test equal it will ony work with glFlush(0) - glFlush(2) causes depth test equal to produce odd artifacts.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166099 - hacker013 - Mon Jan 26, 2009 7:16 pm</h4>
    <div class="postbody"><span class="postbody">thx, if fixed it.<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
