<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Generating .h image files? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Generating .h image files?</h2>
<div id="posts">
<div class="post">
    <h4>#142356 - JeffMan - Mon Oct 08, 2007 7:05 pm</h4>
    <div class="postbody"><span class="postbody">I'd like to actually try getting a project started, using the manual by Jaeden Amero in the sticky, and I'm at the standstill. It seems that every single tutorial, manual, and programming example I come across assumes that I have this magically generated header file that contains image data in a different format for use with dmaCopy. However, I have yet to actually find instructions on how to make these header files.
<br/>
<br/>
The manual I'm looking at says to use gfx2gba, and then to use hConvert on its output files. First of all, on the contrary to the manual's opinion, gfx2gba does not, in fact, generate any header files of any sort. It just gives me a .pal file and a .raw file. hConvert then fails, of course, since there's no header file to convert.
<br/>
<br/>
I did find something called wingrit, which DOES give me a wonderful header file. Unfortunately, dmaCopy takes a void* as the source data for some reason, and I can't pass the int array from the header file.
<br/>
<br/>
How do I do this simple task of taking an image and generating whatever header files are necessary for dmaCopy?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142357 - Ishi - Mon Oct 08, 2007 7:31 pm</h4>
    <div class="postbody"><span class="postbody">I haven't done anything on gba or used these converter programs, but I would've thought you could just cast the int* to a void* and pass that to dmaCopy.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int a[10];
<br/>
void* b = (void*)a;</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142358 - SaruCoder - Mon Oct 08, 2007 7:36 pm</h4>
    <div class="postbody"><span class="postbody">I use wingrit to process my image files into .h and .c files.  The palette and raster data are stored as unsigned shorts (16bit).  So in dmaCopy, you have to cast the pointers as unsigned short pointers (u16*).
<br/>
<br/>
Using embedded image files is ok for reasonably sized images.  But if they get too big or you use a lot of them, then I think most people would recommend the libfat approach.  Which someone will explain later because I haven't explored that avenue yet.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142360 - JeffMan - Mon Oct 08, 2007 7:45 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, but casting to either (void*) or (u16*) is a no-go. I probably should have been more specific and posted my code, so here it is:
<br/>
<br/>
splash.h
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#ifndef __SPLASH__
<br/>
#define __SPLASH__
<br/>
<br/>
#define splashBitmapLen 98304
<br/>
extern const unsigned int splashBitmap[24576];
<br/>
<br/>
#endif</td> </tr></table><span class="postbody">
<br/>
<br/>
main.cpp
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void displaySplash() {
<br/>
   dmaCopy(splashBitmap, BG_BMP_RAM_SUB(0), splashBitmapLen);
<br/>
}</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142361 - tepples - Mon Oct 08, 2007 7:45 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SaruCoder wrote:</b></span></td> </tr> <tr> <td class="quote">Using embedded image files is ok for reasonably sized images.  But if they get too big or you use a lot of them, then I think most people would recommend the libfat approach.</td> </tr></table><span class="postbody">
<br/>
Or if you are using image files based on Creative Commons licensed work, as you can't statically link Creative Commons licensed works into software unless the works are also made available under a license designed for software (such as a GNU license).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142370 - JeffMan - Mon Oct 08, 2007 8:04 pm</h4>
    <div class="postbody"><span class="postbody">Ah, heheh, just got it. It was actually the second argument screwing things up, so I casted that to a (void*) and it compiled. Thanks for the help.
<br/>
<br/>
Except I'm getting a black screen now when I run the program so I'll have to figure that out on my own.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142373 - Lazy1 - Mon Oct 08, 2007 8:08 pm</h4>
    <div class="postbody"><span class="postbody">These days it's better to load images from a filesystem rather than link them into the binary itself.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
