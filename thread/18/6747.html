<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>saving to gba slot... - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > saving to gba slot...</h2>
<div id="posts">
<div class="post">
    <h4>#52877 - Sephiroth87 - Sun Sep 04, 2005 11:42 am</h4>
    <div class="postbody"><span class="postbody">hi there...
<br/>
i need to add a save features ot my prog, and i wanted to know the address where to put save data...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52878 - chishm - Sun Sep 04, 2005 11:47 am</h4>
    <div class="postbody"><span class="postbody">The address is 0x0A000000 on the NDS. Make sure you check that there is a compatible cartridge in the slot by checking for a PASS maker name in the header. You may also need to set the cartridge access control register:
<br/>
For ARM7:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">WAIT_CR |= 0x8080</td> </tr></table><span class="postbody">
<br/>
For ARM9:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">WAIT_CR &amp;= ~0x8080</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52928 - Sephiroth87 - Sun Sep 04, 2005 7:22 pm</h4>
    <div class="postbody"><span class="postbody">mhm, that's a little different from gba thingy i was used to use xD
<br/>
<br/>
so, i've first to set up the 2 register, one in the arm7 main and the other in arm9 main...
<br/>
<br/>
then, how to control the pass maker?
<br/>
<br/>
and next, i'll write to 0x0A000000...
<br/>
<br/>
(oh, i meant, save to a gba flash card, is this right?)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52948 - chishm - Sun Sep 04, 2005 10:34 pm</h4>
    <div class="postbody"><span class="postbody">You only have to set up the register on the CPU that is going to access the GBA slot. If you want to use it on the ARM7, don't do anything. If you want to do it on the ARM9, use WAIT_CR &amp;= ~0x8080.
<br/>
<br/>
After that it is pretty much the same as the GBA, except using 0x0A000000 instead of 0x0E000000.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52953 - Sephiroth87 - Sun Sep 04, 2005 11:43 pm</h4>
    <div class="postbody"><span class="postbody">ok, perfect...
<br/>
thanks a lot ;)
<br/>
<br/>
ps: there's only the pass marker question, but it's not too important, however if smbdy can explain :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52958 - doublec - Mon Sep 05, 2005 1:01 am</h4>
    <div class="postbody"><span class="postbody">I have a tutorial on how to write Save data to the SRAM area if interested:
<br/>
<br/>
<a href="http://www.double.co.nz/nintendo_ds/nds_develop5.html" target="_blank">http://www.double.co.nz/nintendo_ds/nds_develop5.html</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#52987 - Sephiroth87 - Mon Sep 05, 2005 9:49 am</h4>
    <div class="postbody"><span class="postbody">tnx very much :)
<br/>
<br/>
edit: but, if the cart is not a flash one, but commercial, it's still possible to write to sram area?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53019 - tepples - Mon Sep 05, 2005 3:13 pm</h4>
    <div class="postbody"><span class="postbody">Commercial Nintendo DS games do not have SRAM.
<br/>
<br/>
If you are looking to use what the PocketNES developers call "SRAM Cannibalism" on a commercial GBA Game Pak, then the procedure is the same, except only 32 KB are available. A write to the second half of SRAM on a commercial cart will overwrite the first half.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53023 - Sephiroth87 - Mon Sep 05, 2005 3:43 pm</h4>
    <div class="postbody"><span class="postbody">yeah, i'm trying to write data to a commercial gba cartridge, but it doesn't seem to works...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53027 - tepples - Mon Sep 05, 2005 3:51 pm</h4>
    <div class="postbody"><span class="postbody">Not all commercial GBA Game Paks have SRAM. Some have EEPROM. Some have flash. Some have no save at all. Which Game Pak are you using?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53036 - Sephiroth87 - Mon Sep 05, 2005 6:28 pm</h4>
    <div class="postbody"><span class="postbody">the idea was to create an app that would write saves to an original gamecard... so, not always the same type of saver...
<br/>
<br/>
but maybye in the header there's some info on the type of saver...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53075 - tepples - Mon Sep 05, 2005 10:14 pm</h4>
    <div class="postbody"><span class="postbody">If you scan through ROM space and find one of the common save type ID strings, such as "SRAM_V112", you can assume that the inserted GBA Game Pak has that type of save hardware.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53077 - Sephiroth87 - Mon Sep 05, 2005 10:25 pm</h4>
    <div class="postbody"><span class="postbody">and how i'll to write in other case of save except from sram?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
