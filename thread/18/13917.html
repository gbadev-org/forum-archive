<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>IRQ Handlers inside a class - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > IRQ Handlers inside a class</h2>
<div id="posts">
<div class="post">
    <h4>#137552 - Robthar - Mon Aug 13, 2007 11:32 am</h4>
    <div class="postbody"><span class="postbody">When i try to set the irqHandlers inside a class i get this error
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
error: cannot convert 'void (Nds::ExtensibleDrawing::FormRoot::*)()' to 'void (*)()' for argument '2' to 'void irqSet(IRQ_MASK, void (*)())'
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
How can I fix this</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137554 - Lick - Mon Aug 13, 2007 11:57 am</h4>
    <div class="postbody"><span class="postbody">Make the function static. <a class="postlink" href="http://www.gamedev.net/community/forums/topic.asp?topic_id=387255" target="_blank">Explained</a>.
<br/>
<br/>
A simple workaround would be this:</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void SomeIRQHandler() {
<br/>
Â  myclass.Function();
<br/>
}</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"><br/><br/>Last edited by Lick on Mon Aug 13, 2007 12:02 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#137555 - Robthar - Mon Aug 13, 2007 12:01 pm</h4>
    <div class="postbody"><span class="postbody">Which funktion, The function I set the Irqs from or the function on which the irq handler will be set?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137556 - Lick - Mon Aug 13, 2007 12:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Robthar wrote:</b></span></td> </tr> <tr> <td class="quote">Which funktion, The function I set the Irqs from or the function on which the irq handler will be set?</td> </tr></table><span class="postbody">
<br/>
The function that will act as IRQ handler.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137557 - silent_code - Mon Aug 13, 2007 12:03 pm</h4>
    <div class="postbody"><span class="postbody">the handler... member functions allways get an "invisible" first parameter, which is the "this" pointer. making it static will get rid of it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137560 - Robthar - Mon Aug 13, 2007 12:16 pm</h4>
    <div class="postbody"><span class="postbody">Is there no way to use member functions as irq handlers?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137562 - silent_code - Mon Aug 13, 2007 12:46 pm</h4>
    <div class="postbody"><span class="postbody">read the posts, again. (hint: make the handler member function <span style="font-weight: bold">static</span>!)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137563 - Robthar - Mon Aug 13, 2007 12:57 pm</h4>
    <div class="postbody"><span class="postbody">?.?
<br/>
member functions that are non-static are impossible to use as handlers?? Thats what i meant</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137565 - silent_code - Mon Aug 13, 2007 1:18 pm</h4>
    <div class="postbody"><span class="postbody">well, they don't match the function type (return and parameter types [as well as number of parameters]), so i guess the answer is: NO.
<br/>
<br/>
do static functions work for you?
<br/>
<br/>
happy coding. :^)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137567 - kusma - Mon Aug 13, 2007 2:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Robthar wrote:</b></span></td> </tr> <tr> <td class="quote">?.?
<br/>
member functions that are non-static are impossible to use as handlers?? Thats what i meant</td> </tr></table><span class="postbody">
<br/>
No, because a non-static member function requires an invisible parameter; a pointer to the class-instance (the "this"-pointer). The standard IRQ-handler won't track the class instance for you, but you could make a wrapping function storing away the class instance as a global pointer yourself.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137645 - Robthar - Tue Aug 14, 2007 10:38 am</h4>
    <div class="postbody"><span class="postbody">Hah^^
<br/>
<br/>
I made a global pointer to the class i wish to have interrupt functions and another class with static functions that handle the interrupts and calls the functions. Seems to work, compiles fine</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
