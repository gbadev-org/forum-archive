<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Graphic overlay - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Graphic overlay</h2>
<div id="posts">
<div class="post">
    <h4>#165680 - iainprice - Sat Jan 03, 2009 2:37 pm</h4>
    <div class="postbody"><span class="postbody">I want a power bar to be drawn over a screen, but it is not a solid block of colour, any ideas of how to mask or draw only sections of a screen?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165681 - dovoto - Sat Jan 03, 2009 2:43 pm</h4>
    <div class="postbody"><span class="postbody">There are several options:
<br/>
<br/>
Any paletted graphic (background, sprite) will not render any pixels with a palette ID of 0.
<br/>
<br/>
16 bit bmp backgrounds and sprites have an alpha bit which can cause pixels not to be rendered.
<br/>
<br/>
Windows can be used to cause rectangular sections of the screen to be unaffected by certain operations (drawing of backgrounds and such).
<br/>
<br/>
The 3D engine has alpha blending so you could overlay a quad.
<br/>
<br/>
Any of these methods could be used for an overlay and probably a few more that havnt come to mind.
<br/>
<br/>
The most common is to either use a sprite or a background layer for your overlay graphic.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165683 - iainprice - Sat Jan 03, 2009 4:27 pm</h4>
    <div class="postbody"><span class="postbody">i want to be able to display it in little bits so only show a hundreth of a shaped block each time.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165684 - dovoto - Sat Jan 03, 2009 4:33 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>iainprice wrote:</b></span></td> </tr> <tr> <td class="quote">i want to be able to display it in little bits so only show a hundreth of a shaped block each time.....</td> </tr></table><span class="postbody">
<br/>
<br/>
Sorry, not sure what that means.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165687 - iainprice - Sat Jan 03, 2009 8:39 pm</h4>
    <div class="postbody"><span class="postbody">If I use
<br/>
<br/>
<a href="http://www.freewebs.com/ravenware/halods.JPG" target="_blank">http://www.freewebs.com/ravenware/halods.JPG</a>
<br/>
<br/>
then the power bar at the top is not a rectangle, it is shaped. I want to be able to fill 1% or 52% or 100% of the bar.
<br/>
<br/>
I could create another image of full power to put over the empty background but I am not sure how to copy a chunk of an image over the top....
<br/>
<br/>
dmaCopy(powerBitmap, BG_GFX, 256*?);
<br/>
<br/>
would copy ? far down a screen but I want to copy just a small chunk.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165767 - JonH - Tue Jan 06, 2009 11:35 am</h4>
    <div class="postbody"><span class="postbody">I was thinking about this situation the other day...
<br/>
<br/>
Maybe 1 solution could be to have your main graphics in a background layer (with an empty, transparent area for where the power bar should go). Then underneath that have either a bg or sprite layer that contains the graphics for the filled power bar. You'd then only be worrying about dealing with a rectangle then.
<br/>
<br/>
Must be loads of ways to achieve this effect on the DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165777 - DiscoStew - Tue Jan 06, 2009 5:18 pm</h4>
    <div class="postbody"><span class="postbody">These are two of my ideas using JonH's hole-in-the-BG idea.
<br/>
<br/>
Have a BG underneath that's constructed with 1-pixel vertical strips, and assign a 256 color palette to it, so each strip has one palette color (actually less that 256 colors with your screen design). Then just edit the palette depending on the health level from the end to the start of the palette entries.
<br/>
<br/>
Or, there is also just making a whole BG (or what parts are needed) a single color, and as an affine BG (not text because of wrap-around), just change it's horizontal positioning. Be sure that the back-plane color is set to the color you want.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165778 - JonH - Tue Jan 06, 2009 5:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DiscoStew wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Or, there is also just making a whole BG (or what parts are needed) a single color, and as an affine BG (not text because of wrap-around), just change it's horizontal positioning. Be sure that the back-plane color is set to the color you want.</td> </tr></table><span class="postbody">
<br/>
<br/>
Yeah, this is essentially what I was thinking of doing for a position slider bar on a media player type screen :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165862 - iainprice - Fri Jan 09, 2009 11:15 pm</h4>
    <div class="postbody"><span class="postbody">Like the idea but really having problems putting it into practice....
<br/>
<br/>
anyone got some time for some snippets?
<br/>
<br/>
I can make 2 BGs, one with palette 0 colour for the window, one a solid colour
<br/>
<br/>
I can display one but how do you write to another graphic layer with a lower priority so its behind?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165866 - DiscoStew - Sat Jan 10, 2009 3:52 am</h4>
    <div class="postbody"><span class="postbody">Check the 2D graphic example called "BackgroundAllInOne". It has a simple example of using multiple backgrounds with priorities under the "advanced.cpp" file.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165882 - iainprice - Sun Jan 11, 2009 11:00 am</h4>
    <div class="postbody"><span class="postbody">Oh poo. Needed to update to 1.4.9 from 7 to get new example etc.... lots of other things changed and caused lots of background, sin, cos problems...hmmmmmm</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165887 - ritz - Sun Jan 11, 2009 3:53 pm</h4>
    <div class="postbody"><span class="postbody">Looks like you did the upgrade to the new devkitARM release 24... which is good. You'll have to make just a few changes to your code to get back up to speed and, in my opinion, it is worth it. The libnds examples were upgraded to support the new release. Here's my post of the things I had to do to upgrade: <a href="http://forum.gbadev.org/viewtopic.php?p=165221#165221" target="_blank">http://forum.gbadev.org/viewtopic.php?p=165221#165221</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165892 - iainprice - Sun Jan 11, 2009 7:09 pm</h4>
    <div class="postbody"><span class="postbody">I'm still having problems with EFS...... :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165895 - ritz - Sun Jan 11, 2009 9:20 pm</h4>
    <div class="postbody"><span class="postbody">What are the problems you're having? I had <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=165695#165695" target="_blank">this issue</a> when I upgraded.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165904 - iainprice - Mon Jan 12, 2009 7:23 pm</h4>
    <div class="postbody"><span class="postbody">Having problems finding/opening the file.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165906 - Miked0801 - Mon Jan 12, 2009 7:41 pm</h4>
    <div class="postbody"><span class="postbody">I've usually done power bars as multi frame sprites.  Each frame as 1 more pixel filled/removed that the last from full to empty.  Then just due some div/mod ratio math to convert from your number system to the number of frames you have to work with.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165910 - ritz - Mon Jan 12, 2009 9:07 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>iainprice wrote:</b></span></td> </tr> <tr> <td class="quote">Having problems finding/opening the file.....</td> </tr></table><span class="postbody">
<br/>
If by "finding/opening the file" you mean the actual .nds file seems not to be found by EFS and not starting, then that's what happened to me (see my previous post). If you mean individual files within your .nds via EFS, then I don't think I can help :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#166035 - iainprice - Sat Jan 17, 2009 7:28 pm</h4>
    <div class="postbody"><span class="postbody">EFS sorted.... double layer graphics ok... power bar working now :) thanks.
<br/>
<br/>
My last problem is the new sound functions don't seem to let my tune get to the end before looping, it loops part way through......</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
