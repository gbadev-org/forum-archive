<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>consolePrintf ERROR - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > consolePrintf ERROR</h2>
<div id="posts">
<div class="post">
    <h4>#53213 - jandujar - Tue Sep 06, 2005 8:25 pm</h4>
    <div class="postbody"><span class="postbody">Hello,
<br/>
<br/>
I have a little problem. Here is my peace of code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16); 
<br/>
    
<br/>
int integer=9;
<br/>
consolePrintf("Integer %d\n",&amp;integer);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This make my game hangs.
<br/>
<br/>
This code hangs too:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
consolePrintf("Integer %d\n",integer);</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
But I can write characters or strings without any problem.
<br/>
<br/>
What i'm doing wrong?
<br/>
<br/>
Another question I have is to know which are the rang of values of the function:
<br/>
touchPosition tp; 
<br/>
tp=touchReadXY();
<br/>
tp.x between ......  min and max
<br/>
tp.y between .....   min and max
<br/>
tp.px  ""
<br/>
tp.py  ""<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53221 - falcon!!! - Tue Sep 06, 2005 9:05 pm</h4>
    <div class="postbody"><span class="postbody">it should be this
<br/>
<br/>
<br/>
consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
<br/>
int integer=9;
<br/>
<br/>
consolePrintf("Integer %d\n",&amp;integer);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53222 - jandujar - Tue Sep 06, 2005 9:29 pm</h4>
    <div class="postbody"><span class="postbody">??
<br/>
<br/>
This make mi game hangs.
<br/>
<br/>
Maybe a bug of ndslib?<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53223 - GPFerror - Tue Sep 06, 2005 9:35 pm</h4>
    <div class="postbody"><span class="postbody">try something like this, at least I had to do this to get it to work in a some of the DS emulators for numbers.
<br/>
<br/>
char temp[100];
<br/>
int integer=9; 
<br/>
sprintf(temp,"Integer %d",integer);
<br/>
<br/>
consolePrintf("%s\n",temp);</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53246 - cybereality - Wed Sep 07, 2005 12:22 am</h4>
    <div class="postbody"><span class="postbody">You must be careful not to attempt to print variables that are not defined, it will hang. Here is the console code I am using and it works fine:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int current_image = 0;
<br/>
const char* game_state = "title";
<br/>
<br/>
consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
<br/>
consoleClear();
<br/>
consolePrintf(" Frame: %d   \n", current_image);
<br/>
consolePrintf(" GameState: %s   \n", game_state);
<br/>
consolePrintf(" Touch x = %d      \n", IPC-&gt;touchXpx);
<br/>
consolePrintf(" Touch y = %d      \n", IPC-&gt;touchYpx);
<br/>
</td> </tr></table><span class="postbody">
<br/>
Also, I am calling the consolePrintf from the on_irq()  function, not the main loop (check chris doubles tutorials if you are not doing this). There is no reason that a string would work and an int wouldn't as far as I know. You may have to cast the variable as an int before hand if you are using pointers or something like that. If you are still having problems you may want to look elsewhere in the code. Hope that helps.
<br/>
<br/>
// cybereality</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53315 - Ethos - Wed Sep 07, 2005 1:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>falcon!!! wrote:</b></span></td> </tr> <tr> <td class="quote">it should be this
<br/>
consolePrintf("Integer %d\n",&amp;integer);</td> </tr></table><span class="postbody">
<br/>
<br/>
Why would you print the address of that variable?? ....Not likely
<br/>
<br/>
<br/>
<br/>
The only problem I have found is that you should put terminating characters '\0' at the end of the string if you repeatedly show different sized values....the only time I had other problems is on emulators....is this on hardware??<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53349 - jandujar - Wed Sep 07, 2005 7:44 pm</h4>
    <div class="postbody"><span class="postbody">This code works fine
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
char temp[100];
<br/>
int integer=9;
<br/>
sprintf(temp,"Integer %d",integer);
<br/>
<br/>
consolePrintf("%s\n",temp);</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank's<br/>_________________<br/><a class="postlink" href="http://jandujar.homelinux.com" target="_blank">http://jandujar.homelinux.com</a>
<br/>
<a class="postlink" href="http://www.dsrobot.com" target="_blank">http://www.dsrobot.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
