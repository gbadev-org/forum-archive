<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>touch screen calibration for those with passme/passthru - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > touch screen calibration for those with passme/passthru</h2>
<div id="posts">
<div class="post">
    <h4>#38477 - Darkain - Mon Mar 28, 2005 9:23 am</h4>
    <div class="postbody"><span class="postbody">I've been working on new touch-screen code.  I used the information that is mentioned <a class="postlink" href="http://www.bottledlight.com/ds/index.php/Main/Firmware" target="_blank">here</a> and <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=5260" target="_blank">here</a>.  I want to make sure that these calculations are correct on more DS units then I have available to me here (2).
<br/>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack/dsPaint.ds.gba" target="_blank">http://ds.darkain.com/hack/dsPaint.ds.gba</a>
<br/>
<br/>
This is a modified copy of daPaint.  Basically, just dump it on your flashcart, run it, and see how well painting works for you.  Do you feel that it is fairly accurate?  How well does it compare to PictoChat's accuracy?
<br/>
<br/>
If we get a common agreance that this is indeed a good algorithm, I would like to have these calculated values added to the IPC along-side the existing raw values for X/Y.<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38529 - josath - Mon Mar 28, 2005 10:58 pm</h4>
    <div class="postbody"><span class="postbody">someone (maybe me) should write a touch screen test, where you just draw to all sides of the touchscreen, and it prints out the minimum &amp; maximum x &amp; y values, then you can just use that to find the formula to convert the raw touch x &amp; y to actual screen x &amp; y positions.
<br/>
<br/>
also, would be nice to know, if the touchscreen actually gives you higher resolution information than 256x192, you might be able to use this to draw smoother/more accurate lines in dspaint.
<br/>
<br/>
---
<br/>
<br/>
here's a really nice drawing program for the Sharp Zaurus PDA (linux &amp; QT based pda w/ an ARM processor).
<br/>
<br/>
<a href="http://killefiz.de/zaurus/showdetail.php?app=174" target="_blank">http://killefiz.de/zaurus/showdetail.php?app=174</a>
<br/>
<br/>
It draws nice lines because internally the bitmap you draw on is double the resolution of the screen. The way the 'fill' mode works, instead of filling the selected area instantly, the color slowly spreads out from where you touch the screen, and stops when you let go, which lets you fill shapes that aren't completely closed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38545 - Darkain - Tue Mar 29, 2005 12:24 am</h4>
    <div class="postbody"><span class="postbody">just so you know, each touch screen is different.  that is the purpose of this current test.  im using the stored calibration data within the DS to calculate the X/Y coords.  we have already sat there and done the whole min/max thing, and it simply just doesnt work consistantly.  
<br/>
<br/>
this demo DOES print the x/y coords on the top screen (post calculation coords), as well as allow for drawing anywhere on the screen (yes, you can even draw over the colour tools)
<br/>
<br/>
yes, the touch screen gives us higher information, however, my paint app paints directly to a frame buffer and uses page flipping.  its optimized for local hardware, and dont want to have to deal w/ RAM buffers just yet (which will also require resizing code)
<br/>
<br/>
<br/>
like i just said tho, we have already ran the tests for coords n such, and i think ive perfected the calibration method over the current existing one.  i just wanna know if it works w/ everyone elses calibration settings.  so far, i have 3 yes and 0 no.<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38553 - Lynx - Tue Mar 29, 2005 1:56 am</h4>
    <div class="postbody"><span class="postbody">Looks perfect to me.. :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38575 - ecurtz - Tue Mar 29, 2005 6:02 am</h4>
    <div class="postbody"><span class="postbody">Works perfectly.
<br/>
<br/>
As does the PassMe I got from Lynx (although the connectors I soldered myself are a little bit flakey.)
<br/>
<br/>
Great work guys!
<br/>
<br/>
- eli</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38596 - darkfader - Tue Mar 29, 2005 1:44 pm</h4>
    <div class="postbody"><span class="postbody">Very close :)
<br/>
Vertically, it seems to result about 101% of touched position. Bit too low and high. Might be temperature related?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39165 - Kola - Tue Apr 05, 2005 2:15 pm</h4>
    <div class="postbody"><span class="postbody">Works perfect, the other version didn't quite go all the way to the right side of the screen, but this one is fine.<br/>_________________<br/><span style="font-weight: bold">k o l a</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39169 - Lynx - Tue Apr 05, 2005 2:49 pm</h4>
    <div class="postbody"><span class="postbody">Actually, as mentioned in another post...  If you tap the screen a few times, lines will shoot accross the screen, as if drawing from a random point to where you are tapping.
<br/>
<br/>
Any idea on what is causing this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39185 - josath - Tue Apr 05, 2005 7:29 pm</h4>
    <div class="postbody"><span class="postbody">maybe when the pen is just leaving or just touching the screen, it registers that there is a touch, but the touch is so light that the x,y is not accurate? perhaps we need to take into account the 'pressure', and if the pressure is very low, disregard the touch?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39192 - tepples - Tue Apr 05, 2005 8:48 pm</h4>
    <div class="postbody"><span class="postbody">Josath, you're on exactly the right track.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39194 - josath - Tue Apr 05, 2005 9:01 pm</h4>
    <div class="postbody"><span class="postbody">or maybe, if you tap it quickly, you see the tap, but by the time you read the x and y, the pen is no longer in contact, so you get 0,0? not sure exactly what the 'random lines' look like, are they always connected to 0,0?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39195 - The 9th Sage - Tue Apr 05, 2005 9:24 pm</h4>
    <div class="postbody"><span class="postbody">your code seems pretty accurate to me...it feels easier to write legibly than in Pictochat even.  The only problem is the strange random line thing, but it seems y'all already know about that.  Anyway, much better than before.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39228 - Lynx - Wed Apr 06, 2005 6:10 am</h4>
    <div class="postbody"><span class="postbody">Nope :( Not 0,0 all the time.. It's random, all over the screen.. But, appears to be toward the bottom of the screen if that helps..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39256 - Darkain - Wed Apr 06, 2005 4:40 pm</h4>
    <div class="postbody"><span class="postbody">ive actually known about this for  a while.  it IS an issue w/ accuracy.  try touching 2 locations at the same time, and see what happens.  ;)
<br/>
<br/>
i will be adding an accuracey threshold here in the near future.<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#39659 - thetictacaddict - Mon Apr 11, 2005 3:57 am</h4>
    <div class="postbody"><span class="postbody">The line is really close to the stylus, a pixel or two to the upper right.  I can draw all the way to the edges of the screen, and I like the fact that I can clear the drawing area.  I get the shooting lines too.
<br/>
<br/>
Touching the screen in two places is interesting... it's pretty much the same as in PictoChat.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
