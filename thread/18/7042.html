<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>palib sprite Palettes? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > palib sprite Palettes?</h2>
<div id="posts">
<div class="post">
    <h4>#55876 - chrissieboy - Mon Oct 03, 2005 5:53 pm</h4>
    <div class="postbody"><span class="postbody">i got a problem, when i load 3 sprites and 3 palettes they all use the last loaded palette?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
PA_LoadPal(PAL_SPRITE0, master_Palette);
<br/>
PA_CreateSprite(0, 0,(void*)spr_Bitmap, OBJ_SIZE_32X32,1, 0, 50, 50);
<br/>
PA_LoadPal(PAL_SPRITE0, master2_Palette);
<br/>
PA_CreateSprite(0, 1,(void*)spri_Bitmap, OBJ_SIZE_32X32,1, 1, 100, 50);
<br/>
PA_LoadPal(PAL_SPRITE0, master3_Palette);
<br/>
PA_CreateSprite(0, 2,(void*)sprit_Bitmap, OBJ_SIZE_32X32,1, 2, 100, 100);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
with the palette function i even can't assign a number or something to. It only has 2 variables.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">PA_LoadPal(PAL_SPRITE0, master_Palette);</td> </tr></table><span class="postbody">
<br/>
<br/>
and in the sprite function i can give the palette number but it doesn't matters, does anyone know a solution?
<br/>
<br/>
greets!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55892 - Cidrick - Mon Oct 03, 2005 9:25 pm</h4>
    <div class="postbody"><span class="postbody">When you convert all your sprites with gfx2gba, convert them all at once instead of seperately. This way, all the sprites you run through it will use one single palette instead of three different ones.
<br/>
<br/>
Say your sprites are all called sprite01.bmp and sprite02.bmp, etc. You would use:
<br/>
<br/>
gfx2gba -D -fsrc -pSprites.pal -t8 sprite*.bmp</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#56231 - Mollusk - Fri Oct 07, 2005 8:35 am</h4>
    <div class="postbody"><span class="postbody">Other solution : PAlib has a sprite extended palette system built in. 
<br/>
<br/>
I would recommend 
<br/>
1. Coming on <a class="postlink" href="http://mollusk.tk/" target="_blank">http://mollusk.tk/</a> (official PAlib forum) for help :p
<br/>
2. Either doing as Cidrick told you (only one palette), or using the extended palettes (16 possible palettes). There's an example for that in the latest versions of the lib...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
PA_InitSpriteExtPal();
<br/>
<br/>
// Load 8bit palettes
<br/>
PA_LoadSpriteExtPal(0,0,(void*)ds_Palette);
<br/>
PA_LoadSpriteExtPal(0,1,(void*)giz_Palette);
<br/>
PA_LoadSpriteExtPal(0,2,(void*)gp_Palette);
<br/>
PA_LoadSpriteExtPal(0,3,(void*)psp_Palette);
<br/>
   
<br/>
// Create sprites
<br/>
PA_CreateSprite(0,0,(void*)ds_Bitmap,OBJ_SIZE_64X64,1,0,x0,y0);
<br/>
PA_CreateSprite(0,1,(void*)giz_Bitmap,OBJ_SIZE_64X64,1,1,x1,y1);
<br/>
PA_CreateSprite(0,2,(void*)gp_Bitmap,OBJ_SIZE_64X64,1,2,x2,y2);
<br/>
PA_CreateSprite(0,3,(void*)psp_Bitmap,OBJ_SIZE_64X64,1,3,x3,y3);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
(this is part of the code from the example, shows how to load the extended palettes...)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
