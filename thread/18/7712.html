<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Powering on the screen again - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Powering on the screen again</h2>
<div id="posts">
<div class="post">
    <h4>#62917 - Dannon - Tue Dec 06, 2005 10:22 pm</h4>
    <div class="postbody"><span class="postbody">I have looked around for info on this and can't seem to find what I'm looking for.  When I close the hinge on my DS I want the screens to turn off, this works fine using:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
if ( hingeClosed )
<br/>
     powerOFF( POWER_ALL );
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm not too sure if this is the correct code for turning the screens off but it does work, does this just turn of the entire power to the system?. Anyhoo, I've tried using this function when the DS is closed:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void HingeClosed()
<br/>
{
<br/>
     if ( hingeClosed )
<br/>
          powerOFF( POWER_ALL );
<br/>
<br/>
     while ( 1 )
<br/>
          if ( !hingeClosed )
<br/>
          {
<br/>
               powerON( POWER_ALL );
<br/>
               return;
<br/>
          }
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
but the DS screens do not turn back on when the DS is opened up again, I'm sure I'm doing something wrong again. If this is infacting turning off all power to the DS when the DS is closed surely powerON() should at least turn all the power back on.
<br/>
<br/>
Anyway, the overall question that I ask is....How do I turn the screens back on?
<br/>
<br/>
--Dannon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63258 - dantheman - Sat Dec 10, 2005 7:26 pm</h4>
    <div class="postbody"><span class="postbody">I am by no means a coder of any sort, but this seems sort of silly:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">If this is infacting turning off all power to the DS when the DS is closed surely powerON() should at least turn all the power back on. </td> </tr></table><span class="postbody">
<br/>
<br/>
Wouldn't it be common sense that once you turn it off, you can't turn it back on unless you physically press the power button?  TVs will turn on when you press the Power button on a remote control because the TV is supplied with a small amount of power so it's never really truly off, unless of course you unplug it.  If you do the equivalent of "unplugging" the DS, then how is it going to know when to turn back on?  All your instructions would be lost when you turn off the power, right?
<br/>
<br/>
Like I said, I do not code.  At all.  Therefore, this is just a guess.  I'm most likely wrong.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63262 - MaHe - Sat Dec 10, 2005 9:21 pm</h4>
    <div class="postbody"><span class="postbody">He probably wants to turn the screens off. But he turned off the whole system.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63267 - FloFri - Sat Dec 10, 2005 10:26 pm</h4>
    <div class="postbody"><span class="postbody">normally powerOFF does not power off the system power, but all components of the system (screens, sound, etc.).
<br/>
Normally your code should work, but where do you get "hingeClosed" from? I could not find it in libnds. If it is your own function, maybe it returns always true, wher it returned true one time before.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63268 - Dannon - Sat Dec 10, 2005 11:08 pm</h4>
    <div class="postbody"><span class="postbody">hingeClosed is a bool in my input class, its in my button check update function the hinge check looks like this:
<br/>
<br/>
hingeClosed in my previous bit of code is actually pInput-&gt;m_bHinge, I just simplified it in the post.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//   If the hinge is open
<br/>
   if ( (specialKeysPressed &amp; (1 &lt;&lt; 7)) )
<br/>
      m_bHinge = true;
<br/>
   else
<br/>
      m_bHinge = false;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I know all the input works as I have just printed to the console when the DS is closed and open, it all works fine with all of the inputs on the DS.
<br/>
<br/>
When the DS uses the powerOFF() function the screens go off but the green LED light stays on, so I would imagine it can be powered on again with the right commands.  Can you turn off just the screens by passing any flags to powerOFF() or vice versa power on the screens like that.
<br/>
<br/>
--Dannon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63269 - Frz - Sat Dec 10, 2005 11:13 pm</h4>
    <div class="postbody"><span class="postbody">Just to further clarify
<br/>
You are actually updating the variable during that loop, correct?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63270 - Dannon - Sat Dec 10, 2005 11:28 pm</h4>
    <div class="postbody"><span class="postbody">No, no I'm not. 
<br/>
<br/>
As soon as I started reading that post I realised my rather large mistake. Thanks a lot, it all seems to be working ok I think, I haven't tested whether everything has been powered back on but the screens do come on again.  I did remember to re initialise the display though and everything seems cool.
<br/>
<br/>
Thanks again
<br/>
<br/>
--Dannon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#63276 - mymateo - Sun Dec 11, 2005 2:24 am</h4>
    <div class="postbody"><span class="postbody">Nevermind...
<br/>
<br/>
I had suggested something, but without looking closely, either at the code or the fact that by the time I looked the problem was solved a couple hours ago...
<br/>
<br/>
Let's chalk this one up to carelessness</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66039 - Didou - Sat Jan 07, 2006 8:04 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I tried </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">powerOFF</td> </tr></table><span class="postbody"> in <span style="font-style: italic">Fushido</span>.
<br/>
The results are rather unexpected:
<br/>
<br/>
<ul></ul></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">powerOFF (POWER_LCD)</td> </tr></table><span class="postbody"> shuts down the entire system (like button on/off).
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">powerOFF (POWER_ALL)</td> </tr></table><span class="postbody"> only shuts down the screens (at least that is visible) but does not shut down the whole DS.
<br/>
<br/>
Ideas ?
<br/>
<br/>
<br/>
  -- Didou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66051 - SeanMon - Sat Jan 07, 2006 10:48 pm</h4>
    <div class="postbody"><span class="postbody">Is there another swi function (like swiWaitForVblank) that could be used after the powerOFF call to wait for the hinge to open? Would it even do anything?
<br/>
<br/>
Some homebrew (nesDS I think) goes into sleep mode like commercial games do: the screens shutoff, the game state is frozen, and the power button blinks green when the hinge is closed.  From this topic, it seems that powerOFF doesn't put the DS into the sleep state.<br/>_________________<br/>null</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66098 - Dannon - Sun Jan 08, 2006 5:32 am</h4>
    <div class="postbody"><span class="postbody">PowerOff does not put the system into standby, I'm not entirely sure how to put it into standby, I just power off everything I don't need (for the moment just POWER_ALL as it is just a test), also I'm sure there is a way to make the green light blink but I don't know it
<br/>
<br/>
--Dannon</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66209 - olimar - Mon Jan 09, 2006 1:07 am</h4>
    <div class="postbody"><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
