<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprite memory - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Sprite memory</h2>
<div id="posts">
<div class="post">
    <h4>#107538 - ollhak - Mon Oct 30, 2006 5:49 pm</h4>
    <div class="postbody"><span class="postbody">First of all, greetings to all on this board! I'm new to the DS but I've done some GBA work in the past - and now I'm hoping for some help to clear up some details I haven't been able to grasp by myself. I basicly need as much sprite memory (VRAM - I guess I could do some swapping from the DS-card if that is fast enough, though) as possible - how would I have to set up the memory banks?
<br/>
<br/>
As far as I've understood, the maximum amount of sprite memory I can get is 256kb by using both bank A and B for it. Do anyone know of any tricks to increase this limit? About BG-memory, I don't think I'll need more than 128kb so one bank should be enough.
<br/>
<br/>
Thanks in advance for any help!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107584 - ProblemBaby - Tue Oct 31, 2006 3:53 am</h4>
    <div class="postbody"><span class="postbody">you can use 3d hardware.. 2048 sprites and up to 512kb of data</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107585 - tepples - Tue Oct 31, 2006 3:58 am</h4>
    <div class="postbody"><span class="postbody">You can load sprite cels into main RAM (the EWRAM is now sixteen times as big as it was on the GBA, although it contains the running code just as it did for GBA multiboot) and then swap those into VRAM.
<br/>
<br/>
What kind of game are you talking about, so that we can figure out how much sprite cel VRAM you'll really need? How many sprites do you expect to have on the screen at once, and how big?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107624 - ollhak - Tue Oct 31, 2006 5:47 pm</h4>
    <div class="postbody"><span class="postbody">I've heard about using the 3d hardware that way before, sounds like an interesting last resort if I can't get all the data to fit.
<br/>
<br/>
About the game, I can't go into any details but its a port of a previous project so I'm pretty sure about the limitations. The most VRAM-usage comes from animations and a wide variety of units that might be displayed at the same time - a pretty lousy situation while working with the GBA/DS-hardware because of the sprite system :/</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107629 - tepples - Tue Oct 31, 2006 6:20 pm</h4>
    <div class="postbody"><span class="postbody">Are the units about 16x16 pixels in size? If so, you can fit 16-color sprite cels for each of 128 on-screen units into 16 KB.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107660 - ollhak - Tue Oct 31, 2006 11:36 pm</h4>
    <div class="postbody"><span class="postbody">Well, they still need their animations - and the more space for animations, the easier the port will be (starting with about 5MB worth of objectgfx-data). Besides, I think I've figured out the limitations a bit better now - 256kb vram still only gives 1024 maximum sprite tiles (though in 16 bit color) right? If so, the 3d-hardware option seems even more interesting.. I can't think of any obvious disadvantages - except for slower drawing. I'll probably need around 600 textured quads or so for some scenes (200 for sprites, about 400 for drawing the background with 16x8-tiles) - anyone have even a vague idea on how much slower this will be to render than the 2d alternative?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107661 - Lick - Tue Oct 31, 2006 11:41 pm</h4>
    <div class="postbody"><span class="postbody">You can cleverly copy them from Main RAM to VRAM when you need them. I don't think it's necessary to have all the sprites in the VRAM at once, since the screen won't fit them all.
<br/>
This method requires some more code, though.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107677 - tepples - Wed Nov 01, 2006 3:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ollhak wrote:</b></span></td> </tr> <tr> <td class="quote">Well, they still need their animations</td> </tr></table><span class="postbody">
<br/>
Lick is right: these can live mostly in DS EWRAM. See <a class="postlink" href="http://www.pineight.com/gba/managing-sprite-vram.txt" target="_blank">my white paper about sprite cel swapping</a>, which was written about the GBA but applies equally well to the DS.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
