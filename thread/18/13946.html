<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>how to use LibFat ? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > how to use LibFat ?</h2>
<div id="posts">
<div class="post">
    <h4>#137906 - jonnyhilly - Fri Aug 17, 2007 9:03 am</h4>
    <div class="postbody"><span class="postbody">ok, so Ive been using gbfs, but by data is too big so I need to switch to LibFAT.
<br/>
Seemed easy enough at first...
<br/>
add the lib file to the makefile,  
<br/>
    LIBS	:= -lfat -lnds9
<br/>
include the .h file 
<br/>
     #include &lt;fat.h&gt;
<br/>
and call fatInitDefault()
<br/>
<br/>
except that fatInitDefault() always returns false.
<br/>
<br/>
I cant find any decent instructions on what might cause the error, or how to setup your files if you are using an emulator or ROM.
<br/>
<br/>
I still have some files pachaged with gbfs
<br/>
<br/>
I am currently running on no$ emulator.
<br/>
but also plan to put my code onto a rom.
<br/>
<br/>
1) so why does fatInitDefault fail ?
<br/>
<br/>
2) for emulator use... Do I just put my files into a folder on the PC which is a sub folder of where the .NDS file is ?
<br/>
<br/>
3) for using from a rom, do I have to batch the files together or something, or can I just duplicate the pc folder structure.
<br/>
<br/>
4) or is there a doc somewhere that describes all this and more ?
<br/>
<br/>
any help greatly appreciated, thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137908 - Diddl - Fri Aug 17, 2007 10:15 am</h4>
    <div class="postbody"><span class="postbody">libfat isn't made for use in an emulator. for such the emulator must offer an libfat interface accessable with a dldi or any similar way.
<br/>
<br/>
<br/>
libfat access mass storage of a flashcard. most slot 2 flashcards are supported. for slot 1 flashcards you need to patch the nds file fith an dldi for this card.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137910 - PypeBros - Fri Aug 17, 2007 10:36 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Diddl wrote:</b></span></td> </tr> <tr> <td class="quote">libfat isn't made for use in an emulator. for such the emulator must offer an libfat interface accessable with a dldi or any similar way.
<br/>
<br/>
<br/>
libfat access mass storage of a flashcard. most slot 2 flashcards are supported. for slot 1 flashcards you need to patch the nds file fith an dldi for this card.</td> </tr></table><span class="postbody">
<br/>
<br/>
Alternatively, i'd say an emulator that e.g. simulates the SuperCard or the GBAMP hardware will do the trick (maybe you'll have to dldi-patch the .nds file for that hardware first). Afaik, the latest builds of desmume for windows might have such flashcart device support, but since i'm a <a class="postlink" href="http://sourceforge.net/project/showfiles.php?group_id=186625" target="_blank">linux-guy</a>, i can't tell for sure.<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137924 - ThousandKnives - Fri Aug 17, 2007 4:01 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Diddl wrote:</b></span></td> </tr> <tr> <td class="quote">libfat access mass storage of a flashcard. most slot 2 flashcards are supported. for slot 1 flashcards you need to patch the nds file fith an dldi for this card.</td> </tr></table><span class="postbody">
<br/>
Dldi patching isn't necessarily required anymore.  I didn't have to do any when I started using libfat.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137933 - M3d10n - Fri Aug 17, 2007 6:00 pm</h4>
    <div class="postbody"><span class="postbody">Download dldirc and use it to patch your rom with the FCSR dldi driver. It'll build a new rom with an appended filesystem for you, which is compatible with No$GBA.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#137935 - Lino - Fri Aug 17, 2007 6:38 pm</h4>
    <div class="postbody"><span class="postbody">you can use iDeaS it has the support for the DLDI R4DS.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
