<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>A transparency question - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > A transparency question</h2>
<div id="posts">
<div class="post">
    <h4>#168250 - Lazy1 - Fri Apr 17, 2009 12:28 am</h4>
    <div class="postbody"><span class="postbody">I'm redoing my wolf3d port and I have run into a minor issue with the palette.
<br/>
The way it's setup now is this:
<br/>
<br/>
Mode 5:
<br/>
bg2 = 512x256 8bit: Used for menus and other things that were supposed to be drawn at 320x200
<br/>
bg3 = 256x256 8bit: The game is drawn here
<br/>
<br/>
This setup allows the game to be rendered at 256x192 without me having to modify every screen to fit, however the wolf3d palette has black in the first palette slot.
<br/>
<br/>
What would happen was the pause screen for example would be messed up because the black border would be transparent.
<br/>
My solution so far was to modify the drawing functions to choose the next darkest color instead which works fairly well but still seen as a dark blue.
<br/>
<br/>
It's just a minor issue but I wondered if there was another way to handle this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168251 - elhobbs - Fri Apr 17, 2009 1:29 am</h4>
    <div class="postbody"><span class="postbody">in cquake I switched index 0 and 255 (which quake uses to mark transparency) for all of the framebuffer drawing (the color at 0 needs to be moved to 255 in the palette too). I also did this for sprite and transparent textures with the 3d hardware. I only set the index 0 transparent bit on these textures. since the main world textures are all solid I did not have to translate. I loaded these textures without the 0 index transparent bit set.
<br/>
<br/>
if you are doing all of the rendering in software then you will need to translate everything.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168253 - Lazy1 - Fri Apr 17, 2009 1:52 am</h4>
    <div class="postbody"><span class="postbody">Aha!
<br/>
It works perfectly now :D thanks!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168259 - mortys - Fri Apr 17, 2009 1:00 pm</h4>
    <div class="postbody"><span class="postbody">@elhoobs
<br/>
I now that i'm of topic but I was wondering if you're still working on cquake or that the project is droped ? However, thanks for the cool releases.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168264 - elhobbs - Fri Apr 17, 2009 1:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mortys wrote:</b></span></td> </tr> <tr> <td class="quote">@elhoobs
<br/>
I now that i'm of topic but I was wondering if you're still working on cquake or that the project is droped ? However, thanks for the cool releases.</td> </tr></table><span class="postbody">I have been working on another project, so I have not worked on it for a while. I did update the source to the latest libnds release plus a few other fixes and improvements, but I have not released it as it became unstable. I suspect the culprit is the new libnds, but I have not been able to conclusively isolate the issue. I did recently pass one of my suspicions on to wintermute, but I am not that savy at system level code to know if I am way off base or not. but, I am experiencing the same issue on my new project that I was experiencing with cquake and it uses a separate code base. that does not prove much of anything, but it doesn't disprove it either.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168268 - mortys - Fri Apr 17, 2009 4:47 pm</h4>
    <div class="postbody"><span class="postbody">@elhoobs
<br/>
Great to hear even if this bug is a pity in the ass.
<br/>
I hope that you find the bug and  continue your new project and maybe CQuake. Waiting for your next works.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168270 - Lazy1 - Fri Apr 17, 2009 8:07 pm</h4>
    <div class="postbody"><span class="postbody">What issue?
<br/>
The only problem I've had so far is that no$gba needs the arm9/arm7 bioses or using the keyboard code will crash.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168272 - elhobbs - Fri Apr 17, 2009 9:19 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lazy1 wrote:</b></span></td> </tr> <tr> <td class="quote">What issue?
<br/>
The only problem I've had so far is that no$gba needs the arm9/arm7 bioses or using the keyboard code will crash.</td> </tr></table><span class="postbody">I sent you a pm</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
