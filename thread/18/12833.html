<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Updated to r20 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Updated to r20</h2>
<div id="posts">
<div class="post">
    <h4>#123251 - Rajveer - Mon Mar 26, 2007 4:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys. I was using the devkitARM release from last July with PALib from around the same time. I uninstalled both, upgraded to devkitARM r20 (and installed the latest PALib ontop of that) and now my code won't compile. I can't check what the error is as command prompt prints out so many errors (most of them being like struct &lt;anonymous&gt; has no member named blahblahblah, 'f32' undeclared, expected ; infront of blahblahblah which are infact all ok). Maybe the way to include libnds has changed or something? This is what I'm doing at the moment:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;
<br/>
#include &lt;PA9.h&gt;
<br/>
...
<br/>
#include "math.h"
<br/>
#include &lt;stdlib.h&gt;</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123252 - Lick - Mon Mar 26, 2007 4:45 pm</h4>
    <div class="postbody"><span class="postbody">You are more likely to get an answer at the <a class="postlink" href="http://palib.info/forum/modules/newbb/index.php" target="_blank">PAlib forum</a>.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123254 - Rajveer - Mon Mar 26, 2007 5:00 pm</h4>
    <div class="postbody"><span class="postbody">I would but the problem still exists when I don't include or use PALib (as I'm only using it for one thing), and therefore only use libnds.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123258 - josath - Mon Mar 26, 2007 5:16 pm</h4>
    <div class="postbody"><span class="postbody">Look at the first 2 or 3 errors. Those are usually the culprits, and then they cause a chain-reaction.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123260 - Rajveer - Mon Mar 26, 2007 5:27 pm</h4>
    <div class="postbody"><span class="postbody">I wish I could, but I get so many errors that command prompt won't let me scroll up to see the beginning ones! Anyway for me to do this?
<br/>
<br/>
EDIT: Ok running make in programmers notepad gives me the complete list of errors. The first few errors are:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
main.c
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:28: error: expected specifier-qualifier-list before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:41: error: expected specifier-qualifier-list before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:52: error: expected specifier-qualifier-list before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:74: error: expected specifier-qualifier-list before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:96: error: expected specifier-qualifier-list before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:106: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'camerapos'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:107: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'cameralook'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:108: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'cameraup'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:111: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'LevelScale'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:114: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'waypointBoundary'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:133: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:133: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:133: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:141: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:141: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:141: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:141: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:141: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:141: error: expected declaration specifiers or '...' before 'f32'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:142: error: expected ')' before '*' token
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:143: error: expected declaration specifiers or '...' before 'f32'
<br/>
In file included from c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/main.c:164:
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h: In function 'buildOctree':
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h:4: error: 'f32' undeclared (first use in this function)
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h:4: error: (Each undeclared identifier is reported only once
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h:4: error: for each function it appears in.)
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h:4: error: expected ';' before 'maxx'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h:8: error: 'struct &lt;anonymous&gt;' has no member named 'vertex0'
<br/>
c:/DSDevelopment/devkitPro/Raji/3Dtest/3dtest48/source/Functions/octreeFunctions.h:8: error: 'LevelScale' undeclared (first use in this function)</td> </tr></table><span class="postbody">
<br/>
<br/>
Then it just keeps going through the program saying this is undeclared, this struct has no member e.t.c.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123265 - HyperHacker - Mon Mar 26, 2007 8:46 pm</h4>
    <div class="postbody"><span class="postbody">FYI, g++ tends to have more intelligent error handling than gcc. It can be the difference between "expected ; after foo" and 200 pages of errors.
<br/>
<br/>
Anyway it sounds like f32 isn't defined, but without the code, I can't tell for sure what's wrong.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123267 - dannyboy - Mon Mar 26, 2007 8:58 pm</h4>
    <div class="postbody"><span class="postbody">The f32 type is no longer defined in libNDS, you have to define it yourself. It was defined in libnds\include\nds\jtypes.h so just put the following line in there(or somewhere else where things are globally defined):
<br/>
<br/>
typedef int f32;             // 1.19.12 fixed point for matricies</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123268 - Rajveer - Mon Mar 26, 2007 9:03 pm</h4>
    <div class="postbody"><span class="postbody">HyperHacker you're right, checking the code against the errors and I've realised that it's a problem with f32 type.
<br/>
<br/>
Dannyboy, thanks for the heads up. Compiling gives another warning now: "overflow in implicit constant coversion" when I'm using t16, has this been removed too??
<br/>
<br/>
P.S. Do you know why it was removed, when there's so many functions using the f32 type? (I know it doesn't matter since f32 is just a typedef for int anyways, but it helped to understand it I guess)
<br/>
<br/>
EDIT: that was my mistake, no problem with t16 sorry.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123309 - wintermute - Tue Mar 27, 2007 5:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dannyboy wrote:</b></span></td> </tr> <tr> <td class="quote">The f32 type is no longer defined in libNDS, you have to define it yourself. It was defined in libnds\include\nds\jtypes.h so just put the following line in there(or somewhere else where things are globally defined):
<br/>
<br/>
typedef int f32;             // 1.19.12 fixed point for matricies</td> </tr></table><span class="postbody">
<br/>
<br/>
If you're going to define it, do it in your own headers.
<br/>
<br/>
Do not edit libnds headers for your own nefarious purposes.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123310 - wintermute - Tue Mar 27, 2007 5:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Rajveer wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
P.S. Do you know why it was removed, when there's so many functions using the f32 type? (I know it doesn't matter since f32 is just a typedef for int anyways, but it helped to understand it I guess)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
f32 and most of the other fixed point "types" were removed because they should never have been defined in the first place.
<br/>
<br/>
fixed is used in STL and causes problems with some C++ applications
<br/>
<br/>
f32 means a 32bit floating point number in most other places I've seen it used.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#123314 - tepples - Tue Mar 27, 2007 6:10 am</h4>
    <div class="postbody"><span class="postbody">Anything wrong with "fix32"? I seem to remember the Allegro library's fixed-point package going through a mass renaming of e.g. fmul() to fixmul() around 4.0.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
