<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Libfat and DIR_ITER - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Libfat and DIR_ITER</h2>
<div id="posts">
<div class="post">
    <h4>#160233 - ferrand.d - Sat Jul 12, 2008 1:11 pm</h4>
    <div class="postbody"><span class="postbody">Hi everybody !
<br/>
I'm french so please excuse me for my bad english. I'm trying to compile a project which uses libfat, but this is a very old project, so I think many things have changed in two years.
<br/>
<br/>
The error I get is
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">error: 'DIR_ITER' undeclared (first use in this function)
<br/>
error: (Each undeclared identifier is reported only once
<br/>
error: for each function it appears in.)
<br/>
error: 'd' undeclared (first use in this function)</td> </tr></table><span class="postbody">
<br/>
<br/>
And my (simplified) source code is
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;
<br/>
<br/>
#include &lt;fat.h&gt;
<br/>
<br/>
#include &lt;stdio.h&gt;
<br/>
#include &lt;string.h&gt;
<br/>
#include &lt;stdlib.h&gt;
<br/>
<br/>
#include &lt;sys/types.h&gt;
<br/>
#include &lt;sys/stat.h&gt;
<br/>
#include &lt;sys/dir.h&gt;
<br/>
<br/>
// ...
<br/>
<br/>
DIR_ITER* d;</td> </tr></table><span class="postbody">
<br/>
<br/>
Actually, I don't know where does the DIR_ITER come from and even trying to compile the example code given by chishm on his website, I got that error !
<br/>
I think the error comes from the header sys/dir.h, but I didn't really understand the POSIX/non-POSIX point.
<br/>
<br/>
I'm totally lost so please help me !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160237 - Sektor - Sat Jul 12, 2008 4:21 pm</h4>
    <div class="postbody"><span class="postbody">The simplified code you pasted compiles fine here:
<br/>
<br/>
I'm using:
<br/>
<br/>
devkitARM_r23b
<br/>
libnds-20071023
<br/>
libfat-nds-20070127
<br/>
<br/>
I have C:\devkitPro\devkitARM\arm-eabi\include\sys\dir.h and it is required for DIR_ITER.
<br/>
<br/>
I suggest you reinstall the devkit or post a link to the project and I'll take a look.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://gtamp.com/DS" target="_blank">GTAMP.com/DS</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#160238 - ferrand.d - Sat Jul 12, 2008 5:05 pm</h4>
    <div class="postbody"><span class="postbody">Thanks to you, I've found the problem !
<br/>
Actually I'm under Linux and I have <span style="font-weight: bold">two</span> different versions of the header sys/dir.h : 
<br/>
- /usr/include/sys/dir.h
<br/>
- [my personal folder]/devkitpro/devkitARM/arm-eabi/include/sys/dir.h
<br/>
<br/>
I think the compiler includes only the version of the system, and that's why he doesn't recognizes DIR_ITER ! But now the question is : how to tell him to include the second version ?!
<br/>
<br/>
Thanks for everything ;)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
