<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>3D problem with wireframe - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > 3D problem with wireframe</h2>
<div id="posts">
<div class="post">
    <h4>#98925 - xexamedes - Fri Aug 18, 2006 3:39 pm</h4>
    <div class="postbody"><span class="postbody">Hi! I pretty new to DS development but have been coding C and java since the earily ninties.  
<br/>
<br/>
I am trying to port an existing 2d physics library (wiht opengl demos) to DS and so far things are going great. I've scaled things to avoid to be bitten by the 16x16x16 max monster, et.c.
<br/>
<br/>
My problem now is that I really need a wireframe look on mu stuff, but no matter which bits I set, I still get every quad filled in white.
<br/>
<br/>
N.B. that I don't have a real DS to develop for (yet), but run everything i the Ideas emulator.
<br/>
<br/>
My question is whether anyone know if there's a bug in this emu concerning filling, et.c. or if it is a known 'feature' of the DS?
<br/>
<br/>
I think I've seen someone post a picture of a wireframe cone somwhere, but I have no ide how it was done.
<br/>
<br/>
Thanks for any help,
<br/>
PS</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98935 - ecurtz - Fri Aug 18, 2006 4:35 pm</h4>
    <div class="postbody"><span class="postbody">You get wireframe by setting the opacity value of your polygons to 0.
<br/>
<br/>
No idea if it works in any emulators.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99022 - walaber - Sat Aug 19, 2006 2:43 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glPolyFmt( POLY_ALPHA(0) | POLY_CULL_NONE );</td> </tr></table><span class="postbody">
<br/>
<br/>
that should do it.
<br/>
<br/>
I'm working on some simple 2D physics on the DS as well... I look forward to seeing your work!<br/>_________________<br/>Go Go Gadget NDS!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99048 - xexamedes - Sat Aug 19, 2006 6:55 am</h4>
    <div class="postbody"><span class="postbody">Thanks! I tried it, and it didn't work :)  But I've been googling a bit for this also, and the zeroed alpha value pops up again and again, so I'm sure you're right.
<br/>
<br/>
Is there any other specific info on how to use this? Have you set something in the environment gl setup first? etc.
<br/>
<br/>
But I'm leaning towards that the ideas emulator has only implemented textured polys, and just fill non-textured as white. I'll have to wait for my DS to know for sure 
<br/>
<br/>
If I succeed (when! be positive! :) my intention is to make a PALib module out of the physics so that you can just drop stuff into a world and have then roll all over each other. We'll see.
<br/>
<br/>
Br,
<br/>
PS</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99053 - Mighty Max - Sat Aug 19, 2006 8:30 am</h4>
    <div class="postbody"><span class="postbody">Afaik Dualis doesnt do transperency correct on 3D
<br/>
<br/>
I.e. the ? signs in this:
<br/>
<a href="http://dualis.1emulation.com/screens/eurotunnel.png">[Images not permitted - Click here to view it]</a>
<br/>
are surrounded by transparence, not as dualis shows them white.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99056 - Normmatt - Sat Aug 19, 2006 9:40 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mighty Max wrote:</b></span></td> </tr> <tr> <td class="quote">Afaik Dualis doesnt do transperency correct on 3D
<br/>
<br/>
I.e. the ? signs in this:
<br/>
<a href="http://dualis.1emulation.com/screens/eurotunnel.png">[Images not permitted - Click here to view it]</a>
<br/>
are surrounded by transparence, not as dualis shows them white.</td> </tr></table><span class="postbody">
<br/>
<br/>
Actually they are supposed to have the white around them, as they do on hardware aswell</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99098 - walaber - Sat Aug 19, 2006 3:26 pm</h4>
    <div class="postbody"><span class="postbody">that code will definately work on the hardware... I don't think Dualis likes it though :)
<br/>
<br/>
not sure adout Ideas...<br/>_________________<br/>Go Go Gadget NDS!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99530 - xexamedes - Tue Aug 22, 2006 9:13 am</h4>
    <div class="postbody"><span class="postbody">I am using the ideas emulator (since it's the only one support 3d atm).
<br/>
<br/>
If I understand you correctly, you mean that even though ideas fills my quads, they will be "empty", i.e. wireframed on a real DS ?
<br/>
<br/>
My code goes something like this;
<br/>
<br/>
&lt;init&gt;
<br/>
PA_Init();
<br/>
	PA_InitVBL(); // Initializes a standard VBL
<br/>
	PA_Init3D();
<br/>
	PA_InitText(1,3);
<br/>
&lt;/init&gt;
<br/>
&lt;main loop&gt;
<br/>
    PA_Init3DDrawing(0.0,0.0,0.7,0.0,0.0,Z);		
<br/>
    glColor3f(1, 1, 1);	
<br/>
    glMatrixMode(GL_MODELVIEW);
<br/>
    glLight(0, RGB15(90, 30, 250), 2, 0, -2);
<br/>
    glPushMatrix();	
<br/>
    render();	
<br/>
    glPopMatrix(1);
<br/>
    glFlush();
<br/>
&lt;/main loop&gt;
<br/>
&lt;render&gt;
<br/>
    glEnable(GL_OUTLINE);
<br/>
	glBegin(GL_QUAD); 
<br/>
<br/>
glPolyFmt(POLY_ALPHA(31)|POLY_FORMAT_LIGHT0|POLY_CULL_NONE);
<br/>
<br/>
	PA_Vertex3D(v1.x,v1.y, Z);
<br/>
	PA_Vertex3D(v2.x,v2.y, Z);
<br/>
	PA_Vertex3D(v3.x,v3.y, Z);
<br/>
	PA_Vertex3D(v4.x,v4.y, Z);
<br/>
	glEnd(); 
<br/>
&lt;/render&gt;
<br/>
<br/>
And I know that it shouldn't use PA for serious gl work, but everything _else_ work great, and from time to time I've tried to copy stuff from some NeHe demo and end up the same way; Stuff move and fall about correctly, but filled instead of wireframe.
<br/>
<br/>
I've begun fiddling with lightning and outlines, but nothing really helps.
<br/>
Oh, outlines  makes it different; Then only collisions are drawn between objects but everything else is invisible :|
<br/>
<br/>
Does anyone spot some glaring mistake??
<br/>
<br/>
BR,
<br/>
PS</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99537 - Lick - Tue Aug 22, 2006 10:01 am</h4>
    <div class="postbody"><span class="postbody">You need <span style="font-weight: bold">normals</span> (per quad/per triangle/per vertex, I don't know). Normals point at a direction and allow the GL Lighting system to calculate the lit-color based on that direction. 
<br/>
You'll also need to give the polygons a <span style="font-weight: bold">material</span> to define the way it reflects light.
<br/>
<br/>
Those are the key elements to lighting your objects.
<br/>
<br/>
(Actually, I'm not really sure if DSGL works that way, but Direct3D does and OpenGL on PC also.)<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#99573 - ecurtz - Tue Aug 22, 2006 2:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// This does something else, not enable wireframe, and there may be issues with glEnable, so I'd drop it for now
<br/>
//glEnable(GL_OUTLINE); 
<br/>
<br/>
// move this before glBegin() and change alpha from 31 to 0 to get wireframe mode
<br/>
glPolyFmt(POLY_ALPHA(0)|POLY_FORMAT_LIGHT0|POLY_CULL_NONE);
<br/>
<br/>
glBegin(GL_QUAD);
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
You don't need to do normals if you don't care about the lighting.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
