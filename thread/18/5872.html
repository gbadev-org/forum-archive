<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Blank Screen Problems. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Blank Screen Problems.</h2>
<div id="posts">
<div class="post">
    <h4>#44124 - TheMikaus - Mon May 30, 2005 4:16 pm</h4>
    <div class="postbody"><span class="postbody">I know I saw this on the forum, but when I did a search for blank screen I couldn't find what I was looking for.  So I apologize ahead of time if this is already on here somewhere.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
powerON(POWER_ALL);
<br/>
<br/>
   videoSetMode(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
   videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
   
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG, VRAM_B_MAIN_SPRITE, VRAM_C_SUB_BG, VRAM_D_SUB_SPRITE);
<br/>
#ifndef EMULATOR   
<br/>
   lcdSwap();
<br/>
#endif
<br/>
<br/>
  irqInitHandler(irqDefaultHandler);
<br/>
  irqSet(IRQ_VBLANK, 0);
<br/>
  irqEnable(IRQ_VBLANK);
<br/>
  
<br/>
  //get the maps
<br/>
  uint16 * map0 = (uint16 *)SCREEN_BASE_BLOCK(0);
<br/>
  uint16 * map1 = (uint16 *)SCREEN_BASE_BLOCK_SUB(0);
<br/>
  
<br/>
 
<br/>
  //Make both the top and the bottom maps 256 color screens
<br/>
  BG0_CR = BG_COLOR_256 | BG_32x32 | (0 &lt;&lt; SCREEN_SHIFT) | (1 &lt;&lt; CHAR_SHIFT);
<br/>
  SUB_BG0_CR = BG_COLOR_256 | BG_32x32 | (0 &lt;&lt; SCREEN_SHIFT) | (1 &lt;&lt; CHAR_SHIFT);
<br/>
  
<br/>
  //Copy the needed palette info
<br/>
  COPY16((uint16*)splashPal, (uint16 *)BG_PALETTE, 256);
<br/>
  COPY16((uint16*)splashSubPal, (uint16 *)BG_PALETTE_SUB, 256);
<br/>
  
<br/>
  //Copy the needed tile info
<br/>
  COPY16((uint16*)splashTile,(uint16 *)CHAR_BASE_BLOCK(1), 26000);
<br/>
  COPY16((uint16*)touchTile,(uint16 *)CHAR_BASE_BLOCK_SUB(1), 26000);
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
From there I go on to load the map tiles and such.  It works fine on the emulator but when I run it on the DS I get to black screens.  Can someone tell me what it is that I'm forgetting to initialize properly?
<br/>
<br/>
-------------EDIT---------------
<br/>
I think it has to do with loading the tiles, but I'm not sure.  I used the birds project as a template of sorts for this.  So here's a download link.
<br/>
<a class="postlink" href="http://www.themikausprojects.com/ds-temp.zip" target="_blank">http://www.themikausprojects.com/ds-temp.zip</a>
<br/>
<br/>
Help!!!! Please.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44181 - TheMikaus - Mon May 30, 2005 10:42 pm</h4>
    <div class="postbody"><span class="postbody">I changed my COPY16 calls to dmaCopy and then I changed the screen base block to 31 (I could probably have used 29 as well) and it worked! yeah.
<br/>
<br/>
I was using 0 originally because that's what the demo I was looking at used.  So yeah.  Fun!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44336 - tepples - Tue May 31, 2005 9:39 pm</h4>
    <div class="postbody"><span class="postbody">Right. When you're starting out, use the higher numbered maps unless you have a good reason not to.
<br/>
<br/>
EDIT: Yet another lucky guess where a GBA answer works on DS!<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Wed Jun 01, 2005 1:01 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#44345 - TheMikaus - Tue May 31, 2005 10:14 pm</h4>
    <div class="postbody"><span class="postbody">Yeah.  Actually it's something I should have remembered from GBA stuff, but the example I saw used 0 so I used 0 and the emu seemed to work.  Now I use 31 and it works on hardware and crashes the emu. :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
