<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Text on bitmap background - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Text on bitmap background</h2>
<div id="posts">
<div class="post">
    <h4>#83284 - Zed0 - Mon May 15, 2006 12:30 am</h4>
    <div class="postbody"><span class="postbody">I'm trying to show a image on one background and then text on another background (same screen so it is on top of the image).  The text and background both display but for some reason when I do:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);</td> </tr></table><span class="postbody">
<br/>
A blue line comes up accross the screen (picture <a class="postlink" href="http://www.falconers.eclipse.co.uk/BottomScreen.jpg" target="_blank">here</a>).
<br/>
It doesn't do this when I don't display the other background and it still does it even if I don't print any text.
<br/>
Can anyone help with this?
<br/>
<br/>
Thanks
<br/>
Zed0
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   powerON(POWER_ALL);
<br/>
      
<br/>
   // Setup the top screen for 3D 
<br/>
   videoSetMode(MODE_3_3D | DISPLAY_BG3_ACTIVE);
<br/>
   // Setup bottom screen
<br/>
   videoSetModeSub(MODE_3_2D | DISPLAY_BG3_ACTIVE | DISPLAY_BG1_ACTIVE);
<br/>
<br/>
 
<br/>
   vramSetMainBanks(VRAM_A_MAIN_BG_0x6000000, VRAM_B_LCD, VRAM_C_SUB_BG , VRAM_D_LCD);
<br/>
<br/>
   BG3_CR = BG_BMP16_256x256;
<br/>
   SUB_BG3_CR = BG_BMP16_256x256;
<br/>
<br/>
        BG3_XDX = 1 &lt;&lt; 8;
<br/>
        BG3_XDY = 0;
<br/>
        BG3_YDX = 0;
<br/>
        BG3_YDY = 1 &lt;&lt; 8;
<br/>
        SUB_BG3_XDX = 1 &lt;&lt; 8;
<br/>
        SUB_BG3_XDY = 0;
<br/>
        SUB_BG3_YDX = 0;
<br/>
        SUB_BG3_YDY = 1 &lt;&lt; 8;
<br/>
 
<br/>
        BG3_CX = 0;
<br/>
        BG3_CY = 26 &lt;&lt; 8;
<br/>
        SUB_BG3_CX = 0;
<br/>
        SUB_BG3_CY = 32 &lt;&lt; 8;
<br/>
<br/>
   irqInit();
<br/>
   irqSet(IRQ_VBLANK, 0);
<br/>
<br/>
// End of startup stuff
<br/>
<br/>
   for(int i = 0; i &lt; 256*256; i++)
<br/>
   {
<br/>
      BG_GFX[i] = ((u16*)SaberTitle_img_bin)[i] | BIT(15);
<br/>
      BG_GFX_SUB[i] = ((u16*)MenuBack_img_bin)[i] | BIT(15);
<br/>
   }
<br/>
<br/>
<br/>
   consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
   SUB_BG1_CR = BG_MAP_BASE(31);
<br/>
   BG_PALETTE_SUB[255] = RGB15(31,31,31);
<br/>
   // Uncomment for debugging
<br/>
   iprintf("Hello World");</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83287 - knight0fdragon - Mon May 15, 2006 12:57 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I'm trying to show a image on one background and then text on another background </td> </tr></table><span class="postbody">
<br/>
<br/>
you are not doing that, right now you only have 1 background on (3)
<br/>
<br/>
<br/>
what you need to do is enable Background 0, and have the consoleInit write to background 0<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83311 - Zed0 - Mon May 15, 2006 8:12 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   videoSetModeSub(MODE_3_2D | DISPLAY_BG3_ACTIVE | DISPLAY_BG1_ACTIVE); </td> </tr></table><span class="postbody">
<br/>
Doesn't that enable background 3 and 1?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83321 - knight0fdragon - Mon May 15, 2006 2:58 pm</h4>
    <div class="postbody"><span class="postbody">i missed that part lol, just use 0 and use the examples to have  consoleInit
<br/>
print off it<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83381 - Zed0 - Tue May 16, 2006 1:12 am</h4>
    <div class="postbody"><span class="postbody">I am but so far I haven't found an example that prints the standard text on top of a background image.
<br/>
If anyone could point me in that direction it would be appreciated.
<br/>
<br/>
Next thing I'm going to try is using a custom font.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#83395 - knight0fdragon - Tue May 16, 2006 2:56 am</h4>
    <div class="postbody"><span class="postbody">make sure that your bmp is not overlapping where the text should be
<br/>
<br/>
ur screen fills up from 600000-602000
<br/>
<br/>
the text map lies at 600f800, that is why your getting lines im betting<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
