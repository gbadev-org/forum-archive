<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS MIDI Demo V.1 and Source - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DS MIDI Demo V.1 and Source</h2>
<div id="posts">
<div class="post">
    <h4>#93081 - TheRain - Sun Jul 16, 2006 9:58 pm</h4>
    <div class="postbody"><span class="postbody">Check my blog <a class="postlink" href="http://collinmeyermusic.com/dev/" target="_blank">http://collinmeyermusic.com/dev/</a>
<br/>
This is the DS MIDI project I've been working on.   There is a dsmidi.h file I created that makes sending MIDI out the DS Card Slot Pin 16 very easy.  A few defines are there as well to help in sending the proper messages.  
<br/>
<br/>
This should also be of help to anyone looking to control or send any kind of data electronically from the DS Card slot.    
<br/>
<br/>
More (enhenced) MIDI programs to come soon from me.   I need to learn to use sprites first though ;)[/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93088 - Sausage Boy - Sun Jul 16, 2006 10:22 pm</h4>
    <div class="postbody"><span class="postbody">When will you release midi cards? :P<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93098 - TheRain - Mon Jul 17, 2006 12:04 am</h4>
    <div class="postbody"><span class="postbody">Lol... for the price of $30 you too can have a MIDI port hacked onto the back of a passkey2 card ;P
<br/>
<br/>
But really, I would like to have a real PCB made up... probably more like a general protyping PCB for things besides MIDI too.   My main interest in doing this project was actually just to learn how to interface with the EEPROM serial line to do other projects... but someone here brought up MIDI and I have a great interest in that as well because I'm a musician.  
<br/>
<br/>
BTW... does anyone know of a good etched PCB supplier?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93253 - josath - Tue Jul 18, 2006 2:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheRain wrote:</b></span></td> </tr> <tr> <td class="quote">BTW... does anyone know of a good etched PCB supplier?</td> </tr></table><span class="postbody">
<br/>
<br/>
I hear the people who make passme's use these guys:
<br/>
<a href="http://www.goldphoenixpcb.biz/special_price.php" target="_blank">http://www.goldphoenixpcb.biz/special_price.php</a>
<br/>
<br/>
prices seem pretty good too. From the site, if your board is 10 square inches, you can get 15 of them made for $90 total (price includes shipping to north america)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98268 - 0xtob - Mon Aug 14, 2006 11:52 am</h4>
    <div class="postbody"><span class="postbody">Hey TheRain!
<br/>
<br/>
Great work on your MIDI hardware! This will draw the interest of a lot of musicians to the DS. As several people have begged for MIDI support in NitroTracker, I definitely want to play around with it. The problem is, I have no idea about MIDI. So, I have some questions:<ul><li>What exactly does the DSMIDI device connect to (on the non-DS side)?
<br/>
</li><li>Do you have plans on selling pre-made DSMIDIs?</li></ul>I have no experience in soldering and I heard of some people destroying their DSes with self-made interface hardware, so I would rather spend some money on a device made by an experienced person.
<br/>
<br/>
Keep going with DSMIDI / DStar!
<br/>
<br/>
Bye,
<br/>
Tob</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98297 - Sausage Boy - Mon Aug 14, 2006 3:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">What exactly does the DSMIDI device connect to (on the non-DS side)?</td> </tr></table><span class="postbody">
<br/>
<br/>
A port like this one, I'd assume.
<br/>
<a href="http://www.comtrade.fr/1024/presse/telechargements/terratec/images/MIDI-HUBBLE.jpg" target="_blank">http://www.comtrade.fr/1024/presse/telechargements/terratec/images/MIDI-HUBBLE.jpg</a>
<br/>
<br/>
At least that's what the ports on my synth looks like. Midi is very flexible, input and output doesn't differ much. My synth can either send keypresses to my computer or play midi composed on my computer, depending on if you wire it to the in or out port. For NitroTracker, the most obvious use would be to use a keyboard to play the notes, since most midi devices will not use the exact samples in the tracked song.
<br/>
<br/>
Midi keyboard data only contains when, how hard, which note (or pitch?) and which instrument (possible other effects as well), and which instrument number is which instrument is up to the implementer of the player. You can also send other cool stuff via midi (I think), like controlling volumes and stuff.<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98305 - 0xtob - Mon Aug 14, 2006 4:07 pm</h4>
    <div class="postbody"><span class="postbody">Thanks for the info, SausageBoy! I'm considering both directions actually: Using Midi keyboards to play samples / input notes into NitroTracker, and using NitroTracker as a seqencer to control other MIDI hardware.
<br/>
<br/>
As I don't have any synths or other MIDI devices, I'd have to test it using my PC. I guess I would then need such a MIDI hubble or similar device to connect the DS to my PC's USB port. Is that correct? There seem to be a number of MIDI to USB converters on the market, so I'll have to do some research.
<br/>
<br/>
Another, less costly, solution would be to send the MIDI signals to the PC via wifi, and have a PC server that sends the MIDI signals to music applications or to other MIDI hardware that is attaches via USB. This gives you more freedom, because the DS does not need any cables, but will have a larger delay, and it would require a PC.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98308 - josath - Mon Aug 14, 2006 4:17 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>0xtob wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
As I don't have any synths or other MIDI devices, I'd have to test it using my PC. I guess I would then need such a MIDI hubble or similar device to connect the DS to my PC's USB port. Is that correct? There seem to be a number of MIDI to USB converters on the market, so I'll have to do some research.</td> </tr></table><span class="postbody">
<br/>
<br/>
Check if your PC has a joystick port (or if you have any old soundcards with one) - almost always, the joystick port also functions as a MIDI in/output port, with a simple cable:
<br/>
<a href="http://www.etcetera.co.uk/products/images/HowToKBCABPC.jpg">[Images not permitted - Click here to view it]</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98311 - 0xtob - Mon Aug 14, 2006 4:30 pm</h4>
    <div class="postbody"><span class="postbody">Yes, I remember that the "gameport" was originally intended as a MIDI port, although it's actually only used for joysticks. But I would definitely need a USB adapter, as gamports are rather uncommon in notebooks :-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98321 - TheRain - Mon Aug 14, 2006 5:55 pm</h4>
    <div class="postbody"><span class="postbody">Hi!   I love Nitrotracker btw... I have been admiring the GUI programming you did for it.   
<br/>
<br/>
The bad news is, the DSMIDI I created only goes one way- out.   The reason for this is that there is only one serial line on the DS card slot... to add two way communication would require some kind of external electronic traffic control- like a Microcontroller or CPLD.
<br/>
<br/>
The other bad news is, I have no plans right now to have the design fabricated and sell...   Mainly because I've never done this before so the cost of doing so is probably not worth it as I would probably make mistakes on at least the first run.    If there was more demand for this card, I would do it.   
<br/>
<br/>
While it is easy to pop the fuse in the DS when messing with this stuff... this particular mod is a two wire deal... The main thing you want to watch out for if you try this is there are three ground pins on the DS card slot... just make sure they NEVER come into contact with any other electrical signal.  Otherwise you will pop the fuse.
<br/>
<br/>
Let me know if I can help you out in any way though.  The dsmidi.h file is pretty easy to use, it's just one function anyhow ;)  but if you need any help with how to set up and use MIDI, just let me know.<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98328 - masscat - Mon Aug 14, 2006 6:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheRain wrote:</b></span></td> </tr> <tr> <td class="quote">The bad news is, the DSMIDI I created only goes one way- out.   The reason for this is that there is only one serial line on the DS card slot... to add two way communication would require some kind of external electronic traffic control- like a Microcontroller or CPLD.</td> </tr></table><span class="postbody">
<br/>
If anybody wants to do two way comms you could adapt my <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=10754" target="_blank">SPI/UART bridge</a> by changing the line driver device to get MIDI signal levels (whatever levels these are).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#98333 - TheRain - Mon Aug 14, 2006 7:10 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>masscat wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>TheRain wrote:</b></span></td> </tr> <tr> <td class="quote">The bad news is, the DSMIDI I created only goes one way- out.   The reason for this is that there is only one serial line on the DS card slot... to add two way communication would require some kind of external electronic traffic control- like a Microcontroller or CPLD.</td> </tr></table><span class="postbody">
<br/>
If anybody wants to do two way comms you could adapt my <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=10754" target="_blank">SPI/UART bridge</a> by changing the line driver device to get MIDI signal levels (whatever levels these are).</span></td> </tr></table><span class="postbody">
<br/>
<br/>
If someone wants to do this... all that has to be done is to add a HEX inverter at the UART inputs and outputs and to set the baud rate to 32,125.  Oh, and also voltage divide the input because MIDI is 5 V.    MIDI messages are composed of 3 bytes, message type, data 1 and data 2.  Each byte is framed by one start and stop bit, so the total bits transmitted for one MIDI message is 30.
<br/>
<br/>
Nice work, BTW masscat..<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
