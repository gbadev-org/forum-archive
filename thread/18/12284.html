<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>patatersoft tutorial compilation problems - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > patatersoft tutorial compilation problems</h2>
<div id="posts">
<div class="post">
    <h4>#116732 - nolentabner - Sun Jan 28, 2007 11:35 pm</h4>
    <div class="postbody"><span class="postbody">I apologize for the "noob"ness of this post, but I'm still new to libnds and I can't figure out why this won't compile.
<br/>
<br/>
This is the very first part of the tutorial, after you add the starfield and splash images to the code.
<br/>
<br/>
Here is the error message:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
c:/devkitPro/mystuff/spaceShip/source/main.cpp: In function 'void displaySplash()':
<br/>
c:/devkitPro/mystuff/spaceShip/source/main.cpp:61: error: invalid conversion from 'int' to 'void*'
<br/>
c:/devkitPro/mystuff/spaceShip/source/main.cpp:61: error:   initializing argument 2 of 'void dmaCopy(const void*, void*, uint32)'
<br/>
c:/devkitPro/mystuff/spaceShip/source/main.cpp: In function 'void displayStarField()':
<br/>
c:/devkitPro/mystuff/spaceShip/source/main.cpp:67: error: invalid conversion from 'int' to 'void*'
<br/>
c:/devkitPro/mystuff/spaceShip/source/main.cpp:67: error:   initializing argument 2 of 'void dmaCopy(const void*, void*, uint32)'
<br/>
make[1]: *** [main.o] Error 1
<br/>
"make": *** [build] Error 2
<br/>
<br/>
&gt; Process Exit Code: 2
<br/>
&gt; Time Taken: 00:03
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
And here is my code for those two lines:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
<br/>
void displaySplash()
<br/>
{
<br/>
   dmaCopy(Splash_bin, BG_BMP_RAM_SUB(0), Splash_bin_size);
<br/>
      //sub bg is BG_BMP_RAM_SUB(0)
<br/>
}
<br/>
<br/>
void displayStarField()
<br/>
{
<br/>
   dmaCopy(StarField_bin, BG_BMP_RAM(0), StarField_bin_size);
<br/>
   // main bg is BG_BMP_RAM(0)
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
I've typed all this code out exactly as the tutorial shows, and I've even tried just copying the text directly into the editor. Why does it think that it's being converted from int to void? This is exactly what the tutorial shows for me to type in.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116734 - Mr Snowflake - Mon Jan 29, 2007 12:06 am</h4>
    <div class="postbody"><span class="postbody">I could be wrong, but I believe you should do:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
dmaCopy((void*)Splash_bin, BG_BMP_RAM_SUB(0), Splash_bin_size); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
For both of course.<br/>_________________<br/><a class="postlink" href="http://www.mrsnowflake.be" target="_blank">http://www.mrsnowflake.be</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116735 - nolen - Mon Jan 29, 2007 12:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Mr Snowflake wrote:</b></span></td> </tr> <tr> <td class="quote">I could be wrong, but I believe you should do:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
dmaCopy((void*)Splash_bin, BG_BMP_RAM_SUB(0), Splash_bin_size); 
<br/>
</td> </tr></table><span class="postbody">
<br/>
For both of course.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
I actually tried that but to no avail :(.
<br/>
<br/>
Thanks though :)
<br/>
<br/>
<br/>
edit: I just noticed I have two screen names on these forums. haha.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116737 - Dark Knight ez - Mon Jan 29, 2007 12:37 am</h4>
    <div class="postbody"><span class="postbody">Put a (void *) before the second argument. That's it.<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><a class="postlink" href="http://amplituds.drunkencoders.com" target="_blank">AmplituDS website</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116739 - nolen - Mon Jan 29, 2007 12:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dark Knight ez wrote:</b></span></td> </tr> <tr> <td class="quote">Put a (void *) before the second argument. That's it.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thank you sir.
<br/>
<br/>
Any reason why he hasn't updated his tutorial to correct this or why this is the first I've come across someone having this problem?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116779 - Mr Snowflake - Mon Jan 29, 2007 1:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dark Knight ez wrote:</b></span></td> </tr> <tr> <td class="quote">Put a (void *) before the second argument. That's it.</td> </tr></table><span class="postbody">Oh hehe, I tought I edited my post in that fashion... Though luck :).<br/>_________________<br/><a class="postlink" href="http://www.mrsnowflake.be" target="_blank">http://www.mrsnowflake.be</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116787 - Lick - Mon Jan 29, 2007 5:46 pm</h4>
    <div class="postbody"><span class="postbody">It's because BG_{BMP/MAP/TILE}_RAM{_SUB}() definitions don't return pointers, they return addresses.
<br/>
<br/>
Written all out, it's like this:
<br/>
<br/>
u32 address = 0x06000000;
<br/>
memcpy(address, data, size); // fail
<br/>
<br/>
void *ptr = (void *)address;
<br/>
memcpy(ptr, data, size); // success<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116795 - tepples - Mon Jan 29, 2007 8:15 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lick wrote:</b></span></td> </tr> <tr> <td class="quote">It's because BG_{BMP/MAP/TILE}_RAM{_SUB}() definitions don't return pointers, they return addresses.</td> </tr></table><span class="postbody">
<br/>
Then the header has a bug. Storing an address in an int is not portable, and it encourages pointer arithmetic bugs. For the sake of type safety, anything that normally returns an address should return it casted to a (void *), a (u32 *), or a (u16 *) as appropriate.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
