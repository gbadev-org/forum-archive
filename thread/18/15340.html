<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sound in homebrew DS software - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Sound in homebrew DS software</h2>
<div id="posts">
<div class="post">
    <h4>#153922 - johnnywashngo - Tue Apr 08, 2008 1:36 pm</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I am going through various tutorials to help me get to grips with DS coding. I am quite out of practice with my C from what I can tell and also am quite new to DS coding in general.
<br/>
<br/>
To date I am confident that I can get graphics on screen/s and get some input from the various control methods the DS provides. I have learned a lot of this from the manual here: <a href="http://patater.com/manual" target="_blank">http://patater.com/manual</a>
<br/>
<br/>
However, I am having a problem with the sound section of that manual, in particular getting the sound to play back at the correct sample rate. I have several audio files, each encoded at 22050 Khz and then converted to raw using the sox command from the manual: <a href="http://patater.com/files/projects/manual/manual.html#id2537335." target="_blank">http://patater.com/files/projects/manual/manual.html#id2537335.</a>
<br/>
<br/>
My problem is that when I instruct the DS to play any of the sounds they are played half speed. This can be remedied in code by increasing the sample rate from 22050 to 44100 but this seems very wrong and I am wondering what I am doing wrong?
<br/>
<br/>
Has anybody else come across this issue?
<br/>
<br/>
Is there a better sound tutorial out there?
<br/>
<br/>
Cheers.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153926 - eKid - Tue Apr 08, 2008 2:33 pm</h4>
    <div class="postbody"><span class="postbody">Does it sound <span style="font-style: italic">okay</span> at double frequency? Or does it sound a little.. messy? Maybe your samples are stereo and thus causing double the amount of data.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153932 - silent_code - Tue Apr 08, 2008 3:38 pm</h4>
    <div class="postbody"><span class="postbody">this is a very general hint, as i don't have much time right now:
<br/>
sound should be 32kHz (or anything you get by power of two integer dividing the sample rate - or shifting) <span style="font-weight: bold">8bit</span>. that should work out of the box.
<br/>
<br/>
happy coding!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153937 - johnnywashngo - Tue Apr 08, 2008 4:48 pm</h4>
    <div class="postbody"><span class="postbody">@eKid: Yes it did sound ok at double the sample rate, much better that at the actual sample rate.
<br/>
<br/>
@silent_code: Cheers for that, I will try to encode the audio at 2^15 later on and see if that yields better results for me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153940 - eKid - Tue Apr 08, 2008 5:01 pm</h4>
    <div class="postbody"><span class="postbody">Hmm, I'm looking at the SoX usage. I don't see a -b option (as used in Patater's tutorial to set 8-bit), I see a -1 option that sets sample size to 1 byte (8-bit). Try using options -1 (8-bit) -s (signed) and -c1 or -c 1 (mono).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#153963 - sumiguchi - Tue Apr 08, 2008 6:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Is there a better sound tutorial out there? </td> </tr></table><span class="postbody">
<br/>
I dunno but ASlib is very easy to use ^^ you may want to check it out and save yourself some trouble....<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=14617&amp;highlight=aslib" target="_blank">http://forum.gbadev.org/viewtopic.php?t=14617&amp;highlight=aslib</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
