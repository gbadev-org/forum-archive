<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>does extern void swiDelay(uint32 duration); work? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > does extern void swiDelay(uint32 duration); work?</h2>
<div id="posts">
<div class="post">
    <h4>#43781 - ErUs - Thu May 26, 2005 7:03 pm</h4>
    <div class="postbody"><span class="postbody">syntax:
<br/>
swiDelay( 500 ); // would pause for half a second?
<br/>
<br/>
is it not implemented yet?
<br/>
<br/>
ndslib btw</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43852 - ErUs - Fri May 27, 2005 9:30 am</h4>
    <div class="postbody"><span class="postbody">hehehe 63 views and no reply :o
<br/>
<br/>
nvr mind</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#43903 - crossraleigh - Fri May 27, 2005 8:43 pm</h4>
    <div class="postbody"><span class="postbody">It's just an SWI call, so there isn't really anything to implement. I don't know if <span style="font-style: italic">duration</span> is in milliseconds, but whatever the unit, the function should work.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44231 - Joat - Tue May 31, 2005 4:54 am</h4>
    <div class="postbody"><span class="postbody">It works fine, but units are in terms of iterations of a loop like so:
<br/>
<br/>
loop:
<br/>
sub counter, #1
<br/>
bne loop
<br/>
<br/>
in BIOS ROM.
<br/>
<br/>
No idea what the width / wait states are for the two bios ROMs are however.
<br/>
<br/>
500 iterations is not more than a few thousand cycles however, even on the really high side, let's say 10k cycles, on the ARM9, so you're talking 
<br/>
around 0.1 ms.  It's a relativey easy thing to test / calibrate tho (why I haven't done it yet, dunno...), just run a timer loop for 3 or 4 different delay counts, and repeat a number of times, with cache disabled.
<br/>
<br/>
If you want to delay for large times (say a frame or more), using swiDelay is *not* a good way.  The CPU is running at full tilt in a busy-wait.  It's really only good for short delays while keeping one of the two CPU's out of main RAM to prevent slowing down the other one.  Putting the CPU to sleep until the next v-blank is a much better way, and for e.g. half a second delay, do 30 frames that way.<br/>_________________<br/>Joat
<br/>
<a href="http://www.bottledlight.com" target="_blank">http://www.bottledlight.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#44331 - tepples - Tue May 31, 2005 9:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Joat wrote:</b></span></td> </tr> <tr> <td class="quote">If you want to delay for large times (say a frame or more), using swiDelay is *not* a good way.  The CPU is running at full tilt in a busy-wait.  It's really only good for short delays while keeping one of the two CPU's out of main RAM to prevent slowing down the other one.</td> </tr></table><span class="postbody">
<br/>
Wouldn't setting the vcount trigger a few scanlines down and then waiting for a vcount irq be an even better way?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
