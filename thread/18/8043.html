<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Paletted Textures - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Paletted Textures</h2>
<div id="posts">
<div class="post">
    <h4>#66109 - TomschikSimon - Sun Jan 08, 2006 9:12 am</h4>
    <div class="postbody"><span class="postbody">Is there a possibility to change the palette for textures. I've tried to set the palette before selecting the texture, but it seems, that only the first palette that I write is used. Is there a register to set the location from where the palette is read.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   
<br/>
vramSetBankE( VRAM_E_LCD ); 
<br/>
dmaCopy( pTexture-&gt;pPalette, VRAM_E, 256 * 2 );
<br/>
vramSetBankE( VRAM_E_TEX_PALETTE );
<br/>
<br/>
// Select the Texture
<br/>
glBindTexture( GL_TEXTURE_2D, pTexture-&gt;iTexID );
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66130 - TomschikSimon - Sun Jan 08, 2006 12:40 pm</h4>
    <div class="postbody"><span class="postbody">The problem is if you write for each texture a new palette only the last palette is used, because the palette is read with the glFlush()-command and not by the assignment of the texture.
<br/>
<br/>
My solution is now to write the palettes after each other with the glLoadPal()-function and writing the number of the palette to 0x040004AC.
<br/>
The number of the palett is blocked in 16-Byte steps, so 32 means 255 colours.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#define PALLETE   (*(vuint32*)0x040004AC)
<br/>
glTexLoadPal( pTexture-&gt;pPalette, 255, g_iPalette );
<br/>
<br/>
PALLETE = g_iPalette * 32;
<br/>
g_iPalette++;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#66132 - duencil - Sun Jan 08, 2006 1:05 pm</h4>
    <div class="postbody"><span class="postbody">I think there will be an example and some new functions added to libnds soon for dealing with paletted textures.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
