<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Music? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Music?</h2>
<div id="posts">
<div class="post">
    <h4>#122900 - FRuMMaGe - Fri Mar 23, 2007 11:45 am</h4>
    <div class="postbody"><span class="postbody">I have searched around and I can find lots of tutorials for playing sound, but none for playing music.  What code do I use to start/stop a music track?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122905 - OOPMan - Fri Mar 23, 2007 12:57 pm</h4>
    <div class="postbody"><span class="postbody">Sound and music are actually the same thing.
<br/>
<br/>
Music is just a long sequenc of sounds...
<br/>
<br/>
Hence, playing music involves playing sound...
<br/>
<br/>
Hence, you want to stream the music, piece by piece into a buffer and play the sound data stored in that buffer...<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122912 - FRuMMaGe - Fri Mar 23, 2007 1:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>OOPMan wrote:</b></span></td> </tr> <tr> <td class="quote">Sound and music are actually the same thing.
<br/>
<br/>
Music is just a long sequenc of sounds...
<br/>
<br/>
Hence, playing music involves playing sound...
<br/>
<br/>
Hence, you want to stream the music, piece by piece into a buffer and play the sound data stored in that buffer...</td> </tr></table><span class="postbody">
<br/>
<br/>
But any music track stored in raw format is enourmous.  There must be a way of playing in-game music without increasing the file size by 500%</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122913 - kusma - Fri Mar 23, 2007 1:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FRuMMaGe wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
But any music track stored in raw format is enourmous.  There must be a way of playing in-game music without increasing the file size by 500%</td> </tr></table><span class="postbody">
<br/>
<br/>
If size is a concern, then you might want to look into either some kind of compression (ogg, mp3, adpcm, gsm etc) or tracked music (mod, xm, it, s3m etc).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122914 - FRuMMaGe - Fri Mar 23, 2007 2:00 pm</h4>
    <div class="postbody"><span class="postbody">Does the DS read mp3 files natively?  If not, does it read any music files without the need for complicated code, such as midi.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122916 - kusma - Fri Mar 23, 2007 2:09 pm</h4>
    <div class="postbody"><span class="postbody">The only compressed audio format the DS can play natively is ADPCM. If I'm not mistaken, the ADPCM variant that the DS supports is the IMA-ADPCM variant  - the most common ADPCM codec out there (supported by sox among others). IMA-ADPCM is 4 bit per sample, so it gives a 4:1 compression rate compared to 16bit PCM data at the cost of some noise in silent parts of the soundtrack (this can be worked around by having a noisy soundtrack).
<br/>
<br/>
If you want something more than that, it's going to cost CPU-cycles, and you'll need a decoder. There are luckily already people who has gone through the process of writing decoders, and some of them are even fast enough to use.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122917 - FRuMMaGe - Fri Mar 23, 2007 2:16 pm</h4>
    <div class="postbody"><span class="postbody">So how do I play these files?  The same way I play raw?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122918 - kusma - Fri Mar 23, 2007 2:18 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>FRuMMaGe wrote:</b></span></td> </tr> <tr> <td class="quote">So how do I play these files?  The same way I play raw?</td> </tr></table><span class="postbody">
<br/>
<br/>
More or less, you just need to pick the ima-adpcm format instead of pcm8 or pcm16. Check out <a href="http://nocash.emubase.de/gbatek.htm#dssound" target="_blank">http://nocash.emubase.de/gbatek.htm#dssound</a> for more info.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122919 - tepples - Fri Mar 23, 2007 2:18 pm</h4>
    <div class="postbody"><span class="postbody">Do you know what a "ring buffer" is, and why you would use one for audio?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
