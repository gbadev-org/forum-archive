<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Move an object slowly - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Move an object slowly</h2>
<div id="posts">
<div class="post">
    <h4>#174789 - GeneralFOL - Tue Jul 20, 2010 12:35 am</h4>
    <div class="postbody"><span class="postbody">Hi all, well ive got it so that when you tap on the screen with the stylus, the player object moves to that location, however im having trouble getting the object to slowly move there, at the moment it just apears there.
<br/>
<br/>
Does anyone know how i can make an object slowly move to a specific location rather than just jumping there?
<br/>
<br/>
Thanks.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174791 - Azenris - Tue Jul 20, 2010 1:34 am</h4>
    <div class="postbody"><span class="postbody">Are you using fixed point positioning? It will allow you to move less than 1 pixel per update, and thus allowing you to slow things down.<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174792 - GeneralFOL - Tue Jul 20, 2010 1:44 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the reply, to be honest im new to c++ aswell as opengl, ive allways programmed in basic up untill recently when i began learning c++.
<br/>
<br/>
So im not sure if im using fixed point positioning or not, was hopeing that someone might give me some example code to learn from  maybe?.
<br/>
<br/>
Iain</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174793 - Azenris - Tue Jul 20, 2010 2:17 am</h4>
    <div class="postbody"><span class="postbody">Tonc is a good resource on fixed-point.
<br/>
<a href="http://www.coranac.com/tonc/text/fixed.htm" target="_blank">http://www.coranac.com/tonc/text/fixed.htm</a>
<br/>
<br/>
Basically if you wanted to move something on the x-axis 1/2 a pixel each update you could
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int x = 0 &lt;&lt; 8;
<br/>
int y = (SCREEN_HEIGHT / 2) &lt;&lt; 8;
<br/>
int speed = 128;
<br/>
<br/>
while(1)
<br/>
{
<br/>
    x += speed;
<br/>
<br/>
    Obj-&gt;SetPosition(x &gt;&gt; 8, y &gt;&gt; 8);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
1 is 256 because (1&lt;&lt;8) is 256.
<br/>
<br/>
I'm probably explaining it worse than you could read from tonc :p<br/>_________________<br/><a class="postlink" href="http://sacredpotion.blogspot.com/" target="_blank"><span style="color: red">My Homebrew Games</span></a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174794 - relminator - Tue Jul 20, 2010 4:16 am</h4>
    <div class="postbody"><span class="postbody">While adding and subtracting with fixed point is easy (as long as they have the same shift value), dividing and multiplying is a little tricky.
<br/>
<br/>
Multiplying and dividing tends to scale your shift values.
<br/>
<br/>
This may help you with some of the techniques since it's an all fixed point SAT (separating axis theorem) collision implementation.
<br/>
<br/>
<a href="http://rel.betterwebber.com/junk.php?id=109" target="_blank">http://rel.betterwebber.com/junk.php?id=109</a>
<br/>
<br/>
Note that I am using 1.19.12 fixed point which means 1 for the sign bit, 19 for the actual value and 12 for the fixed point.
<br/>
<br/>
Once you get the hang of it, it's not too hard and would be second nature to you in no time.
<br/>
<br/>
BTW, I also code in basic(Freebasic).  What basic are you using?
<br/>
<br/>
As for actually moving from one point to another, you can use 3 ways.
<br/>
<br/>
1. Use cearn's atan2() implementation and do a:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">s32 dx = cosLerp(angle);
<br/>
s32 dy = sinLerp(angle);</td> </tr></table><span class="postbody">
<br/>
<br/>
2. Use vector normalizing.
<br/>
<br/>
ie.
<br/>
<br/>
v = target - pos
<br/>
vectornormalize(v)
<br/>
<br/>
now adding v to pos every frame would move pos to target.
<br/>
<br/>
3. Use a spline.
<br/>
<br/>
For an example of #1 and #3, you can see the source for this:
<br/>
<br/>
<a href="http://rel.betterwebber.com/junk.php?id=101" target="_blank">http://rel.betterwebber.com/junk.php?id=101</a>
<br/>
<br/>
For #2, you can use the standard libnds functions for that. I also used those in my SAT demo.<br/>_________________<br/><a href="http://rel.betterwebber.com" target="_blank">http://rel.betterwebber.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174797 - wintermute - Tue Jul 20, 2010 10:07 am</h4>
    <div class="postbody"><span class="postbody">It's not 1.19.12 fixed point, it's 20.12 signed fixed point. Bit 31 is part of the number not simply a sign bit, unlike some DSPs where there *is* a sign bit ( not sure if they even still make those, been a long time since I've seen one)<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174798 - GeneralFOL - Tue Jul 20, 2010 11:42 am</h4>
    <div class="postbody"><span class="postbody">Thanks a lot guys for all the help and info, will check out thoselinks too.
<br/>
<br/>
Thanks again for taking the time to help, i will post back to let you know how i get on.
<br/>
<br/>
Iain</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174804 - Miked0801 - Tue Jul 20, 2010 6:11 pm</h4>
    <div class="postbody"><span class="postbody">Truthfully, you could probably do what you want without fixed point, though it would be a touch inaccurate (or slow if Floating point emulation).  What you need is an Ease function.  Google Ease for all sorts of goodness.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
