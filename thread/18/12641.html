<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Multiple Sprites - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Multiple Sprites</h2>
<div id="posts">
<div class="post">
    <h4>#120931 - peper - Wed Mar 07, 2007 11:15 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I'm having a small problem with my latest code and I really lack of knowledge here. The problem is quite simple:
<br/>
<br/>
Load two different *.pcx images and display them. Both images have a hight and width of 32px and share the same palette.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// load image a
<br/>
sImage img_a;
<br/>
loadPCX((u8*))a_pcx, &amp;img_a);
<br/>
<br/>
// tile image a
<br/>
imageTileData(&amp;img_a);
<br/>
<br/>
// initialize the palette
<br/>
for(int i = 0; i &lt; 256; i++) SPRITE_PALETTE[i] = img_a.palette[i];
<br/>
<br/>
// load the image data
<br/>
for(int i = 0; i &lt; 512; i++) SPRITE_GFX[i] = img_a.image.data16[i];
<br/>
<br/>
/*
<br/>
    up until this point everything is working fine
<br/>
*/
<br/>
<br/>
// load the second image
<br/>
sImage img_b;
<br/>
loadPCX((u8*))a_pcx, &amp;img_b);
<br/>
imageTileData(&amp;img_b);
<br/>
<br/>
/*
<br/>
    now where to store the data of the second image?
<br/>
*/
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Now
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(int i = 0; i &lt; 512; i++) SPRITE_GFX[i] = img_b.image.data16[i];
<br/>
</td> </tr></table><span class="postbody">
<br/>
will overwrite the data of the first image but
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(int i = 512; i &lt; 1024; i++) SPRITE_GFX[i] = img_b.image.data16[i];
<br/>
</td> </tr></table><span class="postbody">
<br/>
won't work either. With the second code the emulator shows that the data from 512 until 1024 in SPRITE_GFX is the same as from 0 to 512. I do not assume that everytime I need to draw a sprite that I need to copy the image data into the SPRITE_GFX first. So I think the overall question is: How do I map the sprite data to the SpriteEntry?
<br/>
<br/>
I would appreciate every idea.
<br/>
<br/>
Regards,</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120932 - thehive - Wed Mar 07, 2007 11:35 am</h4>
    <div class="postbody"><span class="postbody">Because you've just started i from 512, you've also offset where you're copying the data from.
<br/>
<br/>
I suppose you want something like this below;
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(int i = 0; i &lt; 512; i++) SPRITE_GFX[i+512] = img_b.image.data16[i]; 
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120933 - peper - Wed Mar 07, 2007 11:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>thehive wrote:</b></span></td> </tr> <tr> <td class="quote">Because you've just started i from 512, you've also offset where you're copying the data from.
<br/>
<br/>
I suppose you want something like this below;
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
for(int i = 0; i &lt; 512; i++) SPRITE_GFX[i+512] = img_b.image.data16[i]; 
<br/>
</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody">
<br/>
<br/>
D'oh! Thank you very much.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
