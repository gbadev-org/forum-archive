<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Determining where external files used by binaries go. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Determining where external files used by binaries go.</h2>
<div id="posts">
<div class="post">
    <h4>#134008 - Dood77 - Tue Jul 10, 2007 2:22 am</h4>
    <div class="postbody"><span class="postbody">I though up an idea that would let everyone define for themselves where external files used by homebrew apps/games are put.
<br/>
I posted in another thread but it was a little off-topic and I want more people to see it. Heres what I posted, copied and pasted from <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=12867&amp;start=64&amp;highlight=64" target="_blank">this</a> thread:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dood77 wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
What I kinda meant was that every program that wanted customizable directories could use the same file, called something like paths.cfg, and it would have its own syntax for paths, etc. Users could edit the .cfg themselves, or the programs could edit them when the user uses the settings menu in the program.
<br/>
Example:
<br/>
Code:
<br/>
<br/>
<br/>
Obviously proprietary paths for other programs could be things like locations for resources, etc.
<br/>
Now the problem is standardizing.
<br/>
</td> </tr></table><span class="postbody">EDIT: hmmm... my code tags got screwed up in the quote, lemme take them out:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">//File paths for nds binaries
<br/>
[dschannels.nds] //program
<br/>
_nds = "/programs/dschannels/dschannels.nds" //location of binary       /* examples of
<br/>
_cfg = "/programs/dschannels/dschannels.cfg" //location of config file  standard paths *\
<br/>
_media = "/programs/lmp-ng/lmp-ng102.nds"   /*examples of program
<br/>
_user1 = "/games/quake/quakeDS.nds"         proprietary paths *\</td> </tr></table><span class="postbody">
<br/>
Obviously for this to work, lots of major homebrew programs need to adopt this, and I know most of you who are doing major work have other things to spend time on. But I think its a good idea... thoughts?
<br/>
<br/>
Oh, and whats the syntax for putting a link to the quoted text in the quote tag for BBcode? e.g. it says 'in this post, &lt;blah&gt; wrote:' where the words ' this post' are a hyperlink to the original post.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"><br/><br/>Last edited by Dood77 on Tue Jul 10, 2007 11:36 pm; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#134012 - tepples - Tue Jul 10, 2007 3:17 am</h4>
    <div class="postbody"><span class="postbody">This looks like .ini format, and the standard is already to put hardcoded paths inside the /data folder, so why not call it /data/paths.ini ?
<br/>
<br/>
As for citation of quoted text, the syntax is as follows:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">[quote="In [url=http://www.example.com/]example[/url], Nemo"]I just had a nightmare that I was a fish![/quote]
<br/>
Go back to sleep, Nemo.
<br/>
</td> </tr></table><span class="postbody">
<br/>
This produces the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In <a class="postlink" href="http://www.example.com/" target="_blank">example</a>, Nemo wrote:</b></span></td> </tr> <tr> <td class="quote">I just had a nightmare that I was a fish!</td> </tr></table><span class="postbody">
<br/>
Go back to sleep, Nemo.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134046 - melw - Tue Jul 10, 2007 9:20 am</h4>
    <div class="postbody"><span class="postbody">No. Please, no.
<br/>
<br/>
What we really need is devkitARM R21 with argc/argv support and homebrew applications using their working directories instead of polluting the root directory of any given flash adapter. And judging by what Wintermute has said lately, the R21 release is just around the corner. Patience!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134073 - Noda - Tue Jul 10, 2007 1:06 pm</h4>
    <div class="postbody"><span class="postbody">Or don't bother using external data files and use an embedded FS like my EFS system ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134081 - Lick - Tue Jul 10, 2007 2:32 pm</h4>
    <div class="postbody"><span class="postbody">melw: it still requires a "standard" homebrew browser/launcher because the current launchers don't support the argc/argv yet.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134132 - JLsoft - Tue Jul 10, 2007 10:22 pm</h4>
    <div class="postbody"><span class="postbody">I like ComicBookDS' method of '<span style="font-style: italic">Just search every directory until the files needed are found</span>'
<br/>
<br/>
Lets you put anything anywhere, even the skin files :/  ...and it's not anywhere as slow as it sounds. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134144 - Dood77 - Tue Jul 10, 2007 11:30 pm</h4>
    <div class="postbody"><span class="postbody">EDIT: fixed up first my post a little.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">This looks like .ini format, and the standard is already to put hardcoded paths inside the /data folder, so why not call it /data/paths.ini ?</td> </tr></table><span class="postbody">
<br/>
Sure thing, I don't know much about formatting these kinds of markups, someone else can do that. Just the same basic idea. And where ever people think it should be put works alright, I really don't mind.
<br/>
---------------------------
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">As for citation of quoted text, the syntax is as follows:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">[quote="In [url=http://www.example.com/]example[/url], Nemo"]I just had a nightmare that I was a fish![/quote]
<br/>
Go back to sleep, Nemo.
<br/>
</td> </tr></table><span class="postbody">
<br/>
This produces the following:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In <a class="postlink" href="http://www.example.com/" target="_blank">example</a>, Nemo wrote:</b></span></td> </tr> <tr> <td class="quote">I just had a nightmare that I was a fish!</td> </tr></table><span class="postbody">
<br/>
Go back to sleep, Nemo.</span></td> </tr></table><span class="postbody">
<br/>
Ah, I get it now, thanks.
<br/>
---------------------------
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>melw wrote:</b></span></td> </tr> <tr> <td class="quote">No. Please, no.
<br/>
<br/>
What we really need is devkitARM R21 with argc/argv support and homebrew applications using their working directories instead of polluting the root directory of any given flash adapter. And judging by what Wintermute has said lately, the R21 release is just around the corner. Patience!</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lick wrote:</b></span></td> </tr> <tr> <td class="quote">it still requires a "standard" homebrew browser/launcher because the current launchers don't support the argc/argv yet.</td> </tr></table><span class="postbody">
<br/>
What he said!
<br/>
---------------------------
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Noda wrote:</b></span></td> </tr> <tr> <td class="quote">Or don't bother using external data files and use an embedded FS like my EFS system ;-)</td> </tr></table><span class="postbody">
<br/>
I'm gonna do another what he said: </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>melw wrote:</b></span></td> </tr> <tr> <td class="quote">No. Please, no.</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=11556&amp;start=759" target="_blank">this post</a> (modified a little), Dood77 wrote:</b></span></td> </tr> <tr> <td class="quote">No offense Noda, but ick... Requires too much work to modify files and everything. As it is, I can edit .cfg files, copy files, etc. with DSOrganize very easily.</td> </tr></table><span class="postbody">
<br/>
---------------------------
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>JLsoft wrote:</b></span></td> </tr> <tr> <td class="quote">I like ComicBookDS' method of 'Just search every directory until the files needed are found'
<br/>
<br/>
Lets you put anything anywhere, even the skin files :/ ...and it's not anywhere as slow as it sounds. :)</td> </tr></table><span class="postbody">
<br/>
I dunno how many folders you have, but I've got a lot. my 1GB card is almost full, and I can't really name one thing that takes up the majority of the space. I've used ComicBookDS, and I don't know how slow your description sounds to you, but when I was using it, it took a good 15-20 seconds to get able to select which .cbds file I wanted to browse. LMP-ng also does this, and takes around the same time. Sometimes I just want to get my music playing and start doing whatever I'm gonna do while I listen to music but I gotta sit there looking like a nerd (okay, maybe thats not too out of the ordinary) for a half a minute before I can close my DS and put it in my pocket.
<br/>
<br/>
Meh, this isn't just for me, I think it's the most efficient way to please all the users. I didn't think my chances of getting this actually implemented were that great, but the idea still stands for anyone who wants to use it, I guess it would still need to be documented though.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134160 - dantheman - Wed Jul 11, 2007 4:22 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dood77 wrote:</b></span></td> </tr> <tr> <td class="quote">I dunno how many folders you have, but I've got a lot. my 1GB card is almost full, and I can't really name one thing that takes up the majority of the space. I've used ComicBookDS, and I don't know how slow your description sounds to you, but when I was using it, it took a good 15-20 seconds to get able to select which .cbds file I wanted to browse. LMP-ng also does this, and takes around the same time. Sometimes I just want to get my music playing and start doing whatever I'm gonna do while I listen to music but I gotta sit there looking like a nerd (okay, maybe thats not too out of the ordinary) for a half a minute before I can close my DS and put it in my pocket.</td> </tr></table><span class="postbody">
<br/>
<br/>
For what it's worth, I have a 2 GB miniSD card that's nearly full and has about 100 folders total (14 on the root), and it only takes about 2 seconds max before LMP-ng is ready to use.  On another board, it was suggested that a reformat could speed up a slow access time, which appeared to work for some users.  It's worth a try.
<br/>
<br/>
That said though, this does sound like a good idea if people adopt the method.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134168 - melw - Wed Jul 11, 2007 8:08 am</h4>
    <div class="postbody"><span class="postbody">Dood77, there's nothing wrong with the idea itself, but it'd require 1) a lot of developers start using something like this, not to mention 2) for them to use it correctly. This doesn't change the fact that lot of problems with scattered files all around flash cards comes from developers not being able to tell what their working directory. Like Lick said, we still need a launcher for passing the arguments, but at least I'm placing my bets here.
<br/>
<br/>
Also Noda has a point - don't use external files unless you absolutely need to. And I'm not talking about DSOrganize, emulators or anything like that - most of the homebrew applications could be easily standalone .nds's with some extra thought put into it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134179 - Dood77 - Wed Jul 11, 2007 10:20 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>melw wrote:</b></span></td> </tr> <tr> <td class="quote">Like Lick said, we still need a launcher for passing the arguments, but at least I'm placing my bets here.</td> </tr></table><span class="postbody">
<br/>
So we all petition to get each and every one of our flashcart's firmwares updated to support new launch code? Or am I misunderstanding the term 'launcher'?
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>melw wrote:</b></span></td> </tr> <tr> <td class="quote">And I'm not talking about DSOrganize, emulators or anything like that - most of the homebrew applications could be easily standalone .nds's with some extra thought put into it.</td> </tr></table><span class="postbody">
<br/>
I wasn't referring to using an embedded filesystem with DSOrganize either, in the post I partially quoted, I was referring to QuakeDS, where I could edit and move the files with DSOrganize as I please, because they weren't embedded. Most of the homebrew I use anyway wouldn't work with an embedded filesystem, or at least it would make things more difficult. A few off the top of my head:
<br/>
LemmingsDS
<br/>
QuakeDS
<br/>
LMP-ng
<br/>
NesDS
<br/>
SnemulDS
<br/>
Beup
<br/>
DoomDS
<br/>
Nitrotracker
<br/>
Warcraft: Tower Defense
<br/>
<br/>
I'm sure theres more but I don't have my card at the moment. All of them have filesystems that I would like to be able to edit without unpacking an embedded filesystem, and some of them to be able to edit them on the DS itself. (okay beup is a little bit of a stretch, but I do want to add a new avatar occasionally.) The only time I really wouldn't mind an embedded filesystem is if it was an original homebrew where I wouldn't care about external resources that I downloaded with the app/game.
<br/>
<br/>
Heck, if one person used my idea and documented it, and one other followed suit I'd be happy.
<br/>
<br/>
Oh and dantheman, you're right I should try a defragment... plus I'm not exactly sure I'm using the most recent version.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134191 - Lick - Wed Jul 11, 2007 1:28 pm</h4>
    <div class="postbody"><span class="postbody">I would recommend scanning for the directory 3 levels deep. This gives room for &lt;root&gt;/data/Category/&lt;yourapp&gt; which is more than enough. To speed this up (as a user) you'd simply minimize the amount of directories in the root and in the second and third depthlevel directories. It should be fast enough like this.
<br/>
<br/>
Of course this is the case where argc/argv are invalid.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134267 - Dood77 - Thu Jul 12, 2007 4:03 am</h4>
    <div class="postbody"><span class="postbody">You mean scanning to find the file that stores the information for paths? Or scanning for the .nds? The user would have to keep the name constant, unless some kind of a hash was used. But then hashes would be different with different dldi patches, wouldn't it?
<br/>
<br/>
If you mean to scan for the path config file, I meant for all homebrew programs to use the same file. If the syntax was used like in my above posts, each program would just have to scan the file for its section, a programmer-defined name in square brackets. From there various programmer-defined variables could be user-defined. It kinda just dawned on me that you could store more than paths here, but I don't know if that would make the file too long or cluttered.
<br/>
<br/>
You mentioned, Lick, in your DSLiveWeather thread that you were programming a "directory locating procedure" for it. What did you mean by this?<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134290 - Mrshlee - Thu Jul 12, 2007 9:17 am</h4>
    <div class="postbody"><span class="postbody">Placing the *.NDS on the root of the card
<br/>
with /data/nameofsoftware for storing any additional files.
<br/>
<br/>
This would sure clear alot of stuff up - just make sure you give the option to set paths for important things.
<br/>
<br/>
EG: the 3 different megadrive emulators should be able to share the same roms.
<br/>
<br/>
<a href="root://roms/sega/megadrive/" target="_blank">root://roms/sega/megadrive/</a><br/>_________________<br/><a class="postlink" href="http://MrShlee.com/" target="_blank">MrShlee.com</a>
<br/>
Projects
<br/>
<a class="postlink" href="http://dev-scene.com/" target="_blank">Dev-Scene</a>
<br/>
<a class="postlink" href="http://MyTechpedia.com/" target="_blank">MyTechpedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134301 - Lick - Thu Jul 12, 2007 10:33 am</h4>
    <div class="postbody"><span class="postbody">I mean by "Directory Locating Procedure" a procedure that searches for a directory. ;)
<br/>
Like you tell it to find "Program Files" in "C:\" and it returns "C:\Program Files\". Or another example, you have a "/data/apps/DSLiveWeather" directory and you tell it to find "DSLiveWeather".
<br/>
<br/>
I wrote a draft last night and it seemed pretty quick to scan a lot of directories. About ~70 directories &lt;150 ms. It's still a bit buggy though.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134431 - Dood77 - Fri Jul 13, 2007 2:41 am</h4>
    <div class="postbody"><span class="postbody">So it searches for the directory every time it's used? Or if it stores the path, where does it store it?<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134443 - Lick - Fri Jul 13, 2007 5:09 am</h4>
    <div class="postbody"><span class="postbody">It doesn't store the path, but there's no need to since the path is found in &lt; 200ms. Faster most of the time.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
