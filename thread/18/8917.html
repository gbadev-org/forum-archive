<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>hardware doublebuffering for BG_BMP8_256X256 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > hardware doublebuffering for BG_BMP8_256X256</h2>
<div id="posts">
<div class="post">
    <h4>#75655 - GPFerror - Tue Mar 14, 2006 11:46 pm</h4>
    <div class="postbody"><span class="postbody">anyone know how?
<br/>
<br/>
I tried to use the libnds doublebuffering example but its for BG_BMP16_256X256 and not BG_BMP8_256X256. And since you can't do 8bit writes to vram is there a solution ?
<br/>
<br/>
I know i can rendered to a buffer in main ram and dma/mem copy it to my video buffer. Looking for hardware doublebuffering though, not software doublebuffering.
<br/>
<br/>
Thanks,
<br/>
Troy(GPF)
<br/>
<a href="http://gpf.dcemu.co.uk" target="_blank">http://gpf.dcemu.co.uk</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75660 - tepples - Wed Mar 15, 2006 12:29 am</h4>
    <div class="postbody"><span class="postbody">It depends on what you want your engine to do. If you have a need for constantly rewriting an 8-bit plane given the increased VRAM and hardware 3D capability of the Nintendo DS, we'll need to know what you want your engine to do so that we can help you design your engine so that it writes two pixels at a time.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75666 - DekuTree64 - Wed Mar 15, 2006 12:49 am</h4>
    <div class="postbody"><span class="postbody">For any game using software rendering, it would probably be best to turn on the cache/write buffer for your VRAM backbuffer. Faster, and lets you use 8-bit writes (since the CPU loads and stores full cache lines (32 bytes) at a time). Might be a nice feature for libnds to have a user-configurable protection region for such things.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75786 - GPFerror - Wed Mar 15, 2006 11:52 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">It depends on what you want your engine to do. If you have a need for constantly rewriting an 8-bit plane given the increased VRAM and hardware 3D capability of the Nintendo DS, we'll need to know what you want your engine to do so that we can help you design your engine so that it writes two pixels at a time.</td> </tr></table><span class="postbody">
<br/>
<br/>
just swapscreens as fast as possible, without the extra step of a copy.
<br/>
<br/>
in the libnds doublebuffering example.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">        //swap
<br/>
        u16* temp = frontBuffer;
<br/>
        frontBuffer = backBuffer;
<br/>
        backBuffer = temp;
<br/>
        
<br/>
        //flip 
<br/>
        //base is 16KB and screen size is 256x256x2 (128KB)
<br/>
        BG3_CR ^= BG_BMP_BASE( 128 / 16 ); </td> </tr></table><span class="postbody">
<br/>
<br/>
was curious if there was a way to do this in 8bit mode.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">For any game using software rendering, it would probably be best to turn on the cache/write buffer for your VRAM backbuffer. Faster, and lets you use 8-bit writes (since the CPU loads and stores full cache lines (32 bytes) at a time). Might be a nice feature for libnds to have a user-configurable protection region for such things.</td> </tr></table><span class="postbody">
<br/>
<br/>
got an example that I can use untill its added :)
<br/>
<br/>
thanks,
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#75809 - tepples - Thu Mar 16, 2006 4:26 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>GPFerror wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">It depends on what you want your engine to do. If you have a need for constantly rewriting an 8-bit plane given the increased VRAM and hardware 3D capability of the Nintendo DS, we'll need to know what you want your engine to do so that we can help you design your engine so that it writes two pixels at a time.</td> </tr></table><span class="postbody">
<br/>
just swapscreens as fast as possible, without the extra step of a copy.</span></td> </tr></table><span class="postbody">
<br/>
I meant: What are you drawing on the screens?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
