<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>A little big problem - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > A little big problem</h2>
<div id="posts">
<div class="post">
    <h4>#45885 - Lord_Rafa - Thu Jun 16, 2005 12:07 am</h4>
    <div class="postbody"><span class="postbody">Hi I make a galaxian game whit the PA lib but  I don know how put a background and sprites from bmp image this is my code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "PA.h"   
<br/>
<br/>
<br/>
#include "gfx/cruiser1.raw.c"  
<br/>
#include "gfx/ship7.c"
<br/>
#include "gfx/ship7.h"
<br/>
<br/>
<br/>
#include "gfx/sprite.pal.c"
<br/>
<br/>
<br/>
#include "gfx/fond.raw.c"  
<br/>
#include "gfx/fond.map.c"  
<br/>
#include "gfx/bg.pal.c"  
<br/>
<br/>
<br/>
void PA_test(const char *text);
<br/>
<br/>
s16 x = 0;
<br/>
s16 y = 0;
<br/>
<br/>
s16 A = 0;
<br/>
s16 D = 0;
<br/>
<br/>
s16 M = 0;
<br/>
s16 N = 0;
<br/>
<br/>
s16 S = 0;
<br/>
s16 B = 0;
<br/>
s16 fin = 0;
<br/>
<br/>
int main(int argc, char ** argv) {
<br/>
<br/>
<br/>
PA_Init(); 
<br/>
<br/>
PA_InitVBL(); 
<br/>
<br/>
PA_LoadPal(PAL_SPRITE0, sprite_Palette); 
<br/>
PA_LoadPal(PAL_SPRITE1, sprite_Palette);
<br/>
<br/>
PA_LoadPal(PAL_BG1, bg_Palette);
<br/>
<br/>
PA_LoadSpriteExtPal(1, 2, (void*)sprite_Palette);
<br/>
<br/>
<br/>
PA_CreateSprite(1, 0, (void*)cruiser1_Bitmap, OBJ_SIZE_32X32, 1, 0, 223, 160);
<br/>
PA_CreateSprite(1, 3, (void*)cruiser1_Bitmap, OBJ_SIZE_32X32, 1, 0, 112, 0);
<br/>
<br/>
x = 224;
<br/>
y = 160;
<br/>
A = -1;
<br/>
B = -1;
<br/>
M = 112;
<br/>
N = 1;
<br/>
<br/>
<br/>
PA_LoadSimpleBg(1, 3, fond_Tiles, fond_Map, BG_256X256, 1, 1);
<br/>
<br/>
PA_InitText(0, 0);
<br/>
PA_SetTextCol(0, 20, 20, 20);
<br/>
while (fin == 0) {
<br/>
<br/>
if ( (x&gt;=0) &amp;&amp; (x&lt;=224)) {
<br/>
   x += Pad.Held.Right - Pad.Held.Left; 
<br/>
<br/>
<br/>
}
<br/>
if (x&lt;0) {
<br/>
   x=0;
<br/>
}
<br/>
if (x&gt;224) 
<br/>
{
<br/>
   x=224;
<br/>
}
<br/>
<br/>
<br/>
<br/>
PA_SetSpriteXY(1,0,x,y);
<br/>
<br/>
if (M==224) {N=-1;}
<br/>
if (M==0) {N=1;}
<br/>
M=M+N;
<br/>
PA_SetSpriteX(1,3,M);
<br/>
<br/>
if ((Pad.Newpress.L)&amp;&amp;(A==-1)) {
<br/>
   A=160;
<br/>
   D=x;
<br/>
   PA_CreateSprite(1, 1, (void*)ship7Data, OBJ_SIZE_16X16, 0, 0, D, A);
<br/>
    }
<br/>
if (A&gt;-1) {A=A-1;}
<br/>
PA_SetSpriteY(1,1,A);
<br/>
<br/>
if (A==0) 
<br/>
{
<br/>
   PA_DeleteSprite(1,1);
<br/>
   if (D==M)
<br/>
   {
<br/>
          PA_DeleteSprite(1,0);
<br/>
            PA_DeleteSprite(1,1);
<br/>
          PA_DeleteSprite(1,3);
<br/>
         fin = 1;
<br/>
   }
<br/>
}
<br/>
<br/>
<br/>
if ((Pad.Newpress.R)&amp;&amp;(B==-1)) {
<br/>
   B=160;
<br/>
   S=x+16;
<br/>
   PA_CreateSprite(1, 2, (void*)ship7Data, OBJ_SIZE_16X16, 0, 0, S, B);
<br/>
    }
<br/>
if (B&gt;-1) {B=B-1;}
<br/>
PA_SetSpriteY(1,2,B);
<br/>
<br/>
if (B==0) 
<br/>
{
<br/>
   PA_DeleteSprite(1,2);
<br/>
   S=M;
<br/>
   if (S==M)
<br/>
   {
<br/>
          PA_DeleteSprite(1,0);
<br/>
            PA_DeleteSprite(1,1);
<br/>
         PA_DeleteSprite(1,3);
<br/>
         fin = 1;
<br/>
   }
<br/>
}
<br/>
   
<br/>
PA_WaitForVBL();
<br/>
<br/>
}
<br/>
<br/>
while (1)
<br/>
{
<br/>
PA_OutputSimpleText(0, 14, 8,"FIN"); 
<br/>
}
<br/>
  return 0;
<br/>
}
<br/>
<br/>
void PA_test(const char *text){};
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45909 - Mollusk - Thu Jun 16, 2005 1:48 pm</h4>
    <div class="postbody"><span class="postbody">Check out <a class="postlink" href="http://teamnnc.free.fr/html/modules.php?name=Forums&amp;file=viewtopic&amp;t=2&amp;sid=218ec982c5b551b732efc58e12455e1d" target="_blank">http://teamnnc.free.fr/html/modules.php?name=Forums&amp;file=viewtopic&amp;t=2&amp;sid=218ec982c5b551b732efc58e12455e1d</a>, there's a part on converting your graphics</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45955 - Lord_Rafa - Fri Jun 17, 2005 3:32 am</h4>
    <div class="postbody"><span class="postbody">thanks for your help</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
