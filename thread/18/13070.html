<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Is the PSG worth it? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Is the PSG worth it?</h2>
<div id="posts">
<div class="post">
    <h4>#126545 - 0xtob - Tue Apr 24, 2007 10:29 am</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
I have a suspicion: The PSG might be emulated in software on the DS. If so, there would be no advantage in using it, and you could just generate the samples in software, as documented in <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dssoundnotes" target="_blank">gbatek</a>.
<br/>
<br/>
To answer this question once and for all, I wrote a test program that plays back the same sound sequence one time using the PSG and one time using samples. And <span style="font-weight: bold">you</span> have to guess what is what.
<br/>
<br/>
The program is available here:
<br/>
<br/>
<a class="postlink" href="http://tobw.net/ds/psg_vs_dac/psg_vs_dac.zip" target="_blank">http://tobw.net/ds/psg_vs_dac/psg_vs_dac.zip</a>
<br/>
<br/>
Captured wav files and pictures of the waves are available on my blog:
<br/>
<br/>
<a class="postlink" href="http://blog.dev-scene.com/0xtob/2007/04/23/is-the-psg-worth-it/" target="_blank">http://blog.dev-scene.com/0xtob/2007/04/23/is-the-psg-worth-it/</a>
<br/>
<br/>
Can you tell a difference?
<br/>
<br/>
Please post your guesses.
<br/>
<br/>
Thanks!
<br/>
Tob<br/>_________________<br/><a class="postlink" href="http://blog.dev-scene.com/0xtob" target="_blank">http://blog.dev-scene.com/0xtob</a> | <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">http://nitrotracker.tobw.net</a> | <a class="postlink" href="http://dsmi.tobw.net" target="_blank">http://dsmi.tobw.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126548 - LiraNuna - Tue Apr 24, 2007 11:09 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">I have a suspicion: The PSG might be emulated in software on the DS. If so, there would be no advantage in using it, and you could just generate the samples in software, as documented in gbatek. </td> </tr></table><span class="postbody">
<br/>
<br/>
Ofcourse there's an advantage! Why emulate something that exists on the host machine? not to mention wasting resources to handle the emulation.<br/>_________________<br/>Private property.
<br/>
Violators will be shot, survivors will be shot again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126555 - 0xtob - Tue Apr 24, 2007 1:19 pm</h4>
    <div class="postbody"><span class="postbody">The PSG is limited to certain channels. There are six pulse channels and two noise channels only. The pulse tone is only 16 bytes, that are played in a loop, so it's not that much of a waste to emulate it in software. OK, for noise I need a longer sample in order to not make it sound periodic. But still, it would be some work to implement the PSG in NitroTracker, because I would have to limit the PSG instruments to certain channels (which might be confusing to the user) and treat them in a different way than PCM instruments. So, if there is no audible difference, I will go with the software solution.<br/>_________________<br/><a class="postlink" href="http://blog.dev-scene.com/0xtob" target="_blank">http://blog.dev-scene.com/0xtob</a> | <a class="postlink" href="http://nitrotracker.tobw.net" target="_blank">http://nitrotracker.tobw.net</a> | <a class="postlink" href="http://dsmi.tobw.net" target="_blank">http://dsmi.tobw.net</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126577 - tepples - Tue Apr 24, 2007 5:52 pm</h4>
    <div class="postbody"><span class="postbody">Advantage of psg: Multiple instruments can share the 8-byte sample, like .it instruments and unlike .xm instruments.
<br/>
<br/>
Advantage of psg: An instrument can use a phase envelope. I know a lot of instruments in Pro Wrestling, Punch-Out!!, and Super Mario Bros. 3 on NES used this.
<br/>
<br/>
A lot of existing custom music players use a degenerate envelope (like .s3m) for pcm instruments but an xm style envelope for psg instruments.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126808 - xrl - Thu Apr 26, 2007 11:38 pm</h4>
    <div class="postbody"><span class="postbody">B is the PSG. The sounds sound very distinct to me. Is the duty cycle the same?
<br/>
<br/>
Using the PSG is a lot better than using square samples (less code, different sound). In hardware doing a square wave is very simple so it probably is hardware generated, not a sample.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126829 - tepples - Fri Apr 27, 2007 3:51 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LiraNuna wrote:</b></span></td> </tr> <tr> <td class="quote">Ofcourse there's an advantage! Why emulate something that exists on the host machine?</td> </tr></table><span class="postbody">
<br/>
Because a single program might be designed to run on multiple host machines. Or because none of the existing .xm content at modarchive.com has PSG instruments. Or because you might run out of the six PSG tone channels and have to overflow into the first 8 channels, which are sample-only.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127028 - xrl - Sun Apr 29, 2007 11:31 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LiraNuna wrote:</b></span></td> </tr> <tr> <td class="quote">Ofcourse there's an advantage! Why emulate something that exists on the host machine?</td> </tr></table><span class="postbody">
<br/>
Because a single program might be designed to run on multiple host machines. Or because none of the existing .xm content at modarchive.com has PSG instruments. Or because you might run out of the six PSG tone channels and have to overflow into the first 8 channels, which are sample-only.</span></td> </tr></table><span class="postbody">
<br/>
You can't mix rocks with aeroplanes! XM is XM. It's not made for PSGs. But you probably can emulate YM/AY very easily.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127029 - kusma - Sun Apr 29, 2007 11:35 am</h4>
    <div class="postbody"><span class="postbody">can the PSG be used to emulate adlib-support for proper S3M module playback? Not that I've ever seen an S3M-file who uses the adlib-features :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127041 - tepples - Sun Apr 29, 2007 3:13 pm</h4>
    <div class="postbody"><span class="postbody">In theory, yes. But in practice, it's often hard to tell which of the four possible phases (12.5%, 25.0%, 37.5%, 50.0%) sounds like the current state of the FM synthesizer at any given time.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
