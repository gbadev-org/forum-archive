<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>textured quad example doesn't work - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > textured quad example doesn't work</h2>
<div id="posts">
<div class="post">
    <h4>#46249 - delfare - Wed Jun 22, 2005 8:05 am</h4>
    <div class="postbody"><span class="postbody">I wonder why the textured quad example doesn't work anymore when it's compiled with next ndslib. Can anyone tell me?<br/>_________________<br/>If I speak badly, it's because I speak french and I am 15
<br/>
<br/>
PA 3d tutorial : <a href="http://delfare.pizz.biz" target="_blank">http://delfare.pizz.biz</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46252 - Darkain - Wed Jun 22, 2005 9:39 am</h4>
    <div class="postbody"><span class="postbody">this demo is slightly broken.  ive mentioned it before, but not sure when someone with more 3d experience will get around to fixing it.
<br/>
<br/>
its a simple issue tho, something with the fact that they are relying on too many default values for lighting.  this can be seen w/ my multi-nds loader, by loading a demo, returning to menu, and entering this demo.  depending on the previous demos lighting, it will effect the lighting in this demo.<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46260 - Ethos - Wed Jun 22, 2005 1:12 pm</h4>
    <div class="postbody"><span class="postbody">Material...has defaults of 0's....here are some real defaults
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glMaterialf(GL_AMBIENT, BIT(15) | RGB15(19,19,19));
<br/>
glMaterialf(GL_DIFFUSE, BIT(15) | RGB15(28,28,28));
<br/>
glMaterialf(GL_SPECULAR, BIT(15) | RGB15(16,16,16));
<br/>
glMaterialf(GL_EMISSION, BIT(15) | RGB15(16,16,16));
<br/>
</td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46267 - dovoto - Wed Jun 22, 2005 4:29 pm</h4>
    <div class="postbody"><span class="postbody">Just checked out your site ethos...looks good.  I was thinking of doing nehe stuff also...glad someone actualy took it up.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46272 - Ethos - Wed Jun 22, 2005 5:44 pm</h4>
    <div class="postbody"><span class="postbody">lol, fix two things for me dovoto ;)
<br/>
<br/>
1) glBindTexture(0,0), should set GFX_TEX_FORMAT = 0, but right now it sets the texture to the first one loaded (textures[0]), easy fix would be to just start the texture loading at index 1 and a small if statement in the glBindTexture. 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int glGenTextures(int n, int *names)
<br/>
{
<br/>
   static int name = 1;
<br/>
...
<br/>
</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void glBindTexture(int target, int name)
<br/>
{
<br/>
   if (name = 0)
<br/>
      GFX_TEX_FORMAT = 0;
<br/>
   else
<br/>
      GFX_TEX_FORMAT = textures[name];
<br/>
   
<br/>
   activeTexture = name;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
2) </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define f32tot16(n)             ((t16)(n &gt;&gt; 8))
<br/>
void glTexCoord2f32(f32 u, f32 v) {
<br/>
   int x=0,y=0;
<br/>
   
<br/>
   x = ((0x00700000) &amp; textures[activeTexture]) &gt;&gt; 20;
<br/>
   y = ((0x03800000) &amp; textures[activeTexture]) &gt;&gt; 23;
<br/>
      
<br/>
   glTexCoord2t16(f32tot16 (mulf32(u,intof32(1&lt;&lt;(3+x)))), f32tot16 (mulf32(v,intof32(1&lt;&lt;(3+y)))));
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
Might be good to check if active texture is not 0 in functions :)<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#49167 - dovoto - Wed Jul 27, 2005 1:22 am</h4>
    <div class="postbody"><span class="postbody">Done and commited to the CVS...a bit late i know but i am pretty lazy when it comes right down to it :)<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
