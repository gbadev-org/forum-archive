<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>keysDownRepeat() not working correctly? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > keysDownRepeat() not working correctly?</h2>
<div id="posts">
<div class="post">
    <h4>#158621 - vuurrobin - Sun Jun 15, 2008 12:15 am</h4>
    <div class="postbody"><span class="postbody">hello everybody
<br/>
<br/>
I've just started programming for the NDS, and I'm still trying to figure different things out. one of those things is the different functions for key input. I've made an example program to test it out, but keysDownRepeat() seems to act differently than I expected. if you hold down the A key, it will show its message, but on the next itteration its message dissapears, and after a second or so the message appears and dissapears again.
<br/>
<br/>
is this the correct/expected output or is there something wrong with the code or compiler. (it can't be emulator since it acts the same on my NDS)
<br/>
<br/>
here is the code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;
<br/>
#include &lt;stdio.h&gt;
<br/>
   
<br/>
int main(void)
<br/>
{
<br/>
   consoleDemoInit(); 
<br/>
   irqInit();    
<br/>
   irqEnable(IRQ_VBLANK); 
<br/>
<br/>
   while (true)
<br/>
   {
<br/>
      scanKeys();
<br/>
      int held = keysHeld();
<br/>
      int down = keysDown();
<br/>
      int repeat = keysDownRepeat();
<br/>
      int up = keysUp();
<br/>
   
<br/>
      if (down &amp; KEY_A)
<br/>
         printf("Key A is pressed again\naaaaaaaaaaaaaaa\naaaaaaaaaaaaaaa\n");
<br/>
      else if (repeat &amp; KEY_A)
<br/>
         printf("Key A is repeatedly hold down\n");
<br/>
      else if (held &amp; KEY_A)
<br/>
         printf("Key A is pressed\n");
<br/>
      else if (up &amp; KEY_A)
<br/>
         printf("Key A is released\naaaaaaaaaa\n");
<br/>
      else
<br/>
         printf("Key A isn't pressed\n");
<br/>
<br/>
 
<br/>
      swiWaitForVBlank();
<br/>
      consoleClear();
<br/>
   }
<br/>
   
<br/>
   return 0;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
the many "aaaa" are just to make it a bit more clearer to see which message it is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158630 - M3d10n - Sun Jun 15, 2008 2:48 am</h4>
    <div class="postbody"><span class="postbody">Sound like it's working exactly like it should: the keys repeat fires at a set time interval (there's a function to change the repeat frequency, but it escapes me). If you want the message on every iteration, use keys held.
<br/>
<br/>
The repeat is useful if you want something to to happen every N milliseconds while a key is being held down (like scrolling a list using the D-pad).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158654 - vuurrobin - Sun Jun 15, 2008 9:56 pm</h4>
    <div class="postbody"><span class="postbody">so I just misunderstood what the function was for.
<br/>
<br/>
thanks :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
