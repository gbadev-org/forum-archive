<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Decrompress boot code in firmware - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Decrompress boot code in firmware</h2>
<div id="posts">
<div class="post">
    <h4>#106789 - Lick - Mon Oct 23, 2006 1:42 pm</h4>
    <div class="postbody"><span class="postbody">I want to execute the boot code inside the firmware, but first I need to decompress (LZSS) it. Has anyone done this before?
<br/>
<br/>
NDSTech: <a class="postlink" href="http://www.bottledlight.com/ds/index.php/Main/Firmware" target="_blank">document</a>
<br/>
GBATek: <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsfirmwareheader" target="_blank">document</a>
<br/>
<br/>
Thanks in advance,
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106832 - Lick - Mon Oct 23, 2006 9:16 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-size: 9px; line-height: normal">(<span style="font-style: italic">recycled the topic for a different use</span>)</span><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106927 - Lick - Tue Oct 24, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">Update: I can't believe I missed <a class="postlink" href="http://nocash.emubase.de/gbatek.htm#dsencryptionbygamecodeidcodekey1" target="_blank">this part of GBATek</a>. It contains correct (?) pseudo code to decrypt the firmware bootcode. Seems to be exactly what I was looking for.
<br/>
<br/>
I've started turning the pseudo code into C++ code: <a class="postlink" href="http://rafb.net/paste/results/phK5iA80.html" target="_blank">http://rafb.net/paste/results/phK5iA80.html</a>
<br/>
<br/>
Despite it not being finished, can someone check whether I have 'translated' correctly? 
<br/>
Also, is it okay to use (RAM) 0x02060000 as 'arm7 to arm9' buffer?
<br/>
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106991 - Lick - Wed Oct 25, 2006 3:27 pm</h4>
    <div class="postbody"><span class="postbody">Can't believe all the true heroes of DSdev have really left the scene. 
<br/>
<br/>
Anyone of them could have pointed me to this post by Loopy/olimar: <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?p=42334#42334" target="_blank">http://forum.gbadev.org/viewtopic.php?p=42334#42334</a><br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#106993 - Lick - Wed Oct 25, 2006 4:00 pm</h4>
    <div class="postbody"><span class="postbody">Maybe I should try booting PictoChat first.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107106 - Lick - Thu Oct 26, 2006 5:40 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">Update</span>
<br/>
Success! Thanks to Loopy, yes Loopy, I have now written a firmware + bootcode (both ARM9 and ARM7) dumper.
<br/>
I used libfatdragon_blue as fatlib. So some people won't be able to dump, but it's still interesting to see what happens.
<br/>
<br/>
<span style="font-weight: bold">Attachment</span>
<br/>
<a class="postlink" href="http://lick.huuf.net/supersmall.rar" target="_blank">http://lick.huuf.net/supersmall.rar</a>
<br/>
Source included, but it's messy.
<br/>
<br/>
<span style="font-weight: bold">What now</span>
<br/>
At my hardware, the backlight fades out and in (which is FlashMe's work). I will research a way to hopefully boot to Supercard. This might be the first step to a universal Return to Card method!
<br/>
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107192 - HyperHacker - Fri Oct 27, 2006 3:35 pm</h4>
    <div class="postbody"><span class="postbody">I'd really like to be able to add Boot Firmware, Boot Pictochat and Boot Download Play options to my boot menu app. Did you find anything that might help with that?<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107888 - Extreme Coder - Thu Nov 02, 2006 9:25 pm</h4>
    <div class="postbody"><span class="postbody">Let me guess: you're trying to add PictoChat and Download Play to LoveLite? :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#107891 - Lick - Thu Nov 02, 2006 9:59 pm</h4>
    <div class="postbody"><span class="postbody">I actually froze this research.. kinda.. The first reason for this research was to find out a method to reset to the Supercard menu, and as you all know and should know by now is that I already found the real working method. 
<br/>
<br/>
Probably will look into it in the future, but I also have a project to update (DSLiveWeather) and new projects planned (DSLiveHotspots, DSLiveMoney)..
<br/>
It's too much actually. Especially with real life coming in (school and work).
<br/>
UGhh.. X(~
<br/>
<br/>
- Lick<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
