<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Difference between "emulator" and "passme&quo - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Difference between "emulator" and "passme&quo</h2>
<div id="posts">
<div class="post">
    <h4>#37914 - dankydoo - Fri Mar 18, 2005 5:39 pm</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I was just wondering...what exactly is the difference between the "passme" binaries and the "emulator" binaries??  Are the loaded into a different memory location?  Is it because the passme is hijacking the arm9 so they are loaded into a different memory space?  Thanks for helping me with my curiosity...
<br/>
<br/>
dankydoo</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37919 - tepples - Fri Mar 18, 2005 6:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dankydoo wrote:</b></span></td> </tr> <tr> <td class="quote">what exactly is the difference between the "passme" binaries and the "emulator" binaries??  Are the loaded into a different memory location?</td> </tr></table><span class="postbody">
<br/>
Yes. Remember the "multiboot" vs. "ROM" binaries of the GBA. On the GBA, multiboot binaries are loaded into EWRAM to execute. Early GBA emulators could not emulate multiboot binaries, which is why most homebrew multiboot programs have a dual-mode startup code that copies the program into EWRAM if it's running from ROM. Likewise, "emulator" binaries load code and assets from a slow cart bus into EWRAM, while "PassMe" binaries typically run from ROM.
<br/>
<br/>
<span style="font-weight: bold">FEATURE REQUEST:</span> Once publicly available emulators can emulate a PassMe adapter, things will become more consistent in dsdev land.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37944 - Lynx - Sat Mar 19, 2005 12:10 am</h4>
    <div class="postbody"><span class="postbody">From my understanding, the real difference is the actual code.  A PassMe demo has ARM7 code, ARM9 code, and a bootloader.  Emulator binaries are just the ARM9 code.  I'm not sure about the others, but Dualis is just an ARM9 emulator.  (correct me if I'm wrong) It has the standard ARM7 code (which is required for Touchscreen, etc) built in.  PassMe demos are everything that is required to run on the DS.  I believe in the future, if DS flash carts were available, we'd only need to change the bootloader and the current PassMe Demos would work. (right?)
<br/>
<br/>
And PassMe demos don't run from ROM, they actually run from RAM.  They are loaded from the flash cart into RAM.  Once the code is loaded, you can remove the cart and the demo/game will continue to play.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37945 - dagamer34 - Sat Mar 19, 2005 1:01 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
And PassMe demos don't run from ROM, they actually run from RAM.  They are loaded from the flash cart into RAM.  Once the code is loaded, you can remove the cart and the demo/game will continue to play.</td> </tr></table><span class="postbody">
<br/>
<br/>
Does this mean that we are limited to 4MB in our demos?<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37947 - PhoenixSoft - Sat Mar 19, 2005 1:10 am</h4>
    <div class="postbody"><span class="postbody">Do you consider 4 MB to be too small?  I would think it would be plenty of space.  Atari 2600 developers had to fit games into 4 KB, so you can't complain about having 1024 times that space :P</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37950 - dagamer34 - Sat Mar 19, 2005 1:33 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>PhoenixSoft wrote:</b></span></td> </tr> <tr> <td class="quote">Do you consider 4 MB to be too small?  I would think it would be plenty of space.  Atari 2600 developers had to fit games into 4 KB, so you can't complain about having 1024 times that space :P</td> </tr></table><span class="postbody">
<br/>
<br/>
...<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37958 - tepples - Sat Mar 19, 2005 4:34 am</h4>
    <div class="postbody"><span class="postbody">Atari 2600 developers didn't have to worry about high-resolution textures, 3D models, or sampled sound.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37963 - PhoenixSoft - Sat Mar 19, 2005 5:06 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Atari 2600 developers didn't have to worry about high-resolution textures, 3D models, or sampled sound.</td> </tr></table><span class="postbody">
<br/>
<br/>
I know, I was just saying that 4 MB is a lot more space than some people seem to think.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37968 - ampz - Sat Mar 19, 2005 10:42 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
And PassMe demos don't run from ROM, they actually run from RAM.  They are loaded from the flash cart into RAM.  Once the code is loaded, you can remove the cart and the demo/game will continue to play.</td> </tr></table><span class="postbody">
<br/>
<br/>
Does this mean that we are limited to 4MB in our demos?</span></td> </tr></table><span class="postbody">
<br/>
No, why would you be limited to 4MB?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37976 - tepples - Sat Mar 19, 2005 3:50 pm</h4>
    <div class="postbody"><span class="postbody">Nintendo DS EWRAM is 4 MB.
<br/>
<br/>
Correct me if I'm wrong, but based on what I've read so far, I'm guessing that PassMe works like this: <ol type="1"><li>PassMe uses the DS cart as a crypto coprocessor. </li><li>PassMe modifies the header coming through the cart bus to tell the DS to load an initial program up to 4 MB in size from GBA ROM into EWRAM instead of from the DS cart into EWRAM. </li><li>The ARM9 and ARM7 processors begin to execute code from EWRAM, but at least the ARM7 can still read assets from GBA ROM. </li></ol><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37984 - dagamer34 - Sat Mar 19, 2005 6:31 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">Nintendo DS EWRAM is 4 MB.
<br/>
<br/>
Correct me if I'm wrong, but based on what I've read so far, I'm guessing that PassMe works like this: <ol type="1"><li>PassMe uses the DS cart as a crypto coprocessor. </li><li>PassMe modifies the header coming through the cart bus to tell the DS to load an initial program up to 4 MB in size from GBA ROM into EWRAM instead of from the DS cart into EWRAM. </li><li>The ARM9 and ARM7 processors begin to execute code from EWRAM, but at least the ARM7 can still read assets from GBA ROM. </li></ol></td> </tr></table><span class="postbody">
<br/>
<br/>
Well, if that last statement is true, then it's possible to load data into RAM using the ARM7 and only them be limited by the size of the cart (non bankswitched). I can live with 32MB. :)<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37987 - darkfader - Sat Mar 19, 2005 7:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">[*]PassMe modifies the header coming through the cart bus to tell the DS to load an initial program up to 4 MB in size from GBA ROM into EWRAM instead of from the DS cart into EWRAM. [*]The ARM9 and ARM7 processors begin to execute code from EWRAM, but at least the ARM7 can still read assets from GBA ROM. [/list]</td> </tr></table><span class="postbody">
<br/>
Actually, the original ARM7 code is still loaded. It patches the execution address to GBA ROM. The ARM9 is put into a waiting loop.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37991 - ampz - Sat Mar 19, 2005 8:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>darkfader wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">[*]PassMe modifies the header coming through the cart bus to tell the DS to load an initial program up to 4 MB in size from GBA ROM into EWRAM instead of from the DS cart into EWRAM. [*]The ARM9 and ARM7 processors begin to execute code from EWRAM, but at least the ARM7 can still read assets from GBA ROM. [/list]</td> </tr></table><span class="postbody">
<br/>
Actually, the original ARM7 code is still loaded. It patches the execution address to GBA ROM. The ARM9 is put into a waiting loop.</span></td> </tr></table><span class="postbody">
<br/>
There is a waiting loop in the DS card header nowdays?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#37996 - natrium42 - Sat Mar 19, 2005 9:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ampz wrote:</b></span></td> </tr> <tr> <td class="quote">There is a waiting loop in the DS card header nowdays?</td> </tr></table><span class="postbody">
<br/>
<br/>
Yes, the new takeover method vectors ARM9 into a one instuction loop in the header. This instuction jumps to the position specified by ARM9 vector. So to jump to your own code you modify the ARM9 vector to point to your own ARM9 entry point.<br/>_________________<br/><a class="postlink" href="http://www.natrium42.com" target="_blank">www.natrium42.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
