<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Wireless debugger v0.11 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Wireless debugger v0.11</h2>
<div id="posts">
<div class="post">
    <h4>#92157 - simonjhall - Tue Jul 11, 2006 9:54 pm</h4>
    <div class="postbody"><span class="postbody">It's that magical time of year again, folks. Yup, it's <b style="color:#FFA34F">Debugger</b> Day.
<br/>
Come get it whilst it's hot.
<br/>
<a class="postlink" href="http://myweb.tiscali.co.uk/simonhall/debugger_060711_2138.zip" target="_blank">http://myweb.tiscali.co.uk/simonhall/debugger_060711_2138.zip</a>
<br/>
<br/>
<span style="font-weight: bold">and make sure you read the readme, even though it's pretty long</span>
<br/>
<br/>
for the lazy, it's here too:
<br/>
<a class="postlink" href="http://myweb.tiscali.co.uk/simonhall/README.txt" target="_blank">http://myweb.tiscali.co.uk/simonhall/README.txt</a>
<br/>
<br/>
I know I'm asking for trouble by releasing just before going to bed, but hey - enjoy!
<br/>
<br/>
Oh and in the readme when I'm talking about the directory debugger_local, I mean binary/debugger_local.
<br/>
------
<br/>
Could we keep this thread for fixing problems with this release and the other thread for feature requests/technical chat please?
<br/>
EDIT: the walkthrough line which says to place a breakpoint on line 133 at glFlush should be line 132...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92212 - zazery - Wed Jul 12, 2006 2:44 am</h4>
    <div class="postbody"><span class="postbody">Wow this looks awesome, I'll have to try it when I get the chance. 
<br/>
<br/>
<span style="font-size: 7px; line-height: normal">Edit: Opps sorry about the post, didn't read that you wanted to leave it to tehnical discussion only. If a mod reads this, please delete this post, thanks.</span></span><span class="gensmall"><br/><br/>Last edited by zazery on Wed Jul 12, 2006 7:10 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#92230 - wintermute - Wed Jul 12, 2006 6:05 am</h4>
    <div class="postbody"><span class="postbody">It's the other thread that's for technical chat etc.
<br/>
<br/>
<br/>
All I have to say is Wow! Very well done that man, here's a nice pic
<br/>
<br/>
<a class="postlink" href="http://devkitpro.sourceforge.net/debugging.png" target="_blank">Debugging with Insight :D</a>
<br/>
<br/>
Couple of minor quibbles
<br/>
<br/>
<ul>
<br/>
<li> port numbers below 1024 are reserved, linux users will need to run the java code as root
<br/>
</li><li> absolute paths in makefiles are bad mkay :) I've WinterMuteified your source a bit - I'll mail you it later.
<br/>
</li></ul>
<br/>
<br/>
<br/>
and this is <span style="font-weight: bold">so</span> being assimilated into devkitPro.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92248 - simonjhall - Wed Jul 12, 2006 9:21 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">All I have to say is Wow! Very well done that man, here's a nice pic</td> </tr></table><span class="postbody">
<br/>
Thanks man :-) I'm glad the first comments aren't "why do I just get the message wireless init...."!
<br/>
And is that the version that I gave you at the weekend you're using there? Cos that one has a bug where I forget to restore the CPSR...
<br/>
<br/>
For those people who have a beef with the port numbers, I'll change them in the next release. Sorry, I didn't know you need root to open ports with low numbers.
<br/>
If you can't wait, the files you'll wanna adjust are <b style="color:#FFA34F">Debugger</b>.java (line 40 ish), gdb_opts, and debugger_connect_tcp() in network_trans.c. You'll have to rebuild the java though and libdsdebugger.a...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">and this is so being assimilated into devkitPro</td> </tr></table><span class="postbody">
<br/>
Score! I keep meaning to get back to you about that CVS access...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92252 - LiraNuna - Wed Jul 12, 2006 9:40 am</h4>
    <div class="postbody"><span class="postbody">Amazing work! Now i'm waiting for an emulator that will support it!
<br/>
(Emulators such as dualis can show VRAM, OAM and more which ease development process)
<br/>
<br/>
Yet again, AWESOME!<br/>_________________<br/>Private property.
<br/>
Violators will be shot, survivors will be shot again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92272 - simonjhall - Wed Jul 12, 2006 1:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LiraNuna wrote:</b></span></td> </tr> <tr> <td class="quote">Amazing work! Now i'm waiting for an emulator that will support it!
<br/>
(Emulators such as dualis can show VRAM, OAM and more which ease development process)
<br/>
<br/>
Yet again, AWESOME!</td> </tr></table><span class="postbody">
<br/>
Ta man :-)
<br/>
And don't the emulators already support debugging? If wouldn't be too hard for emulators to attach to GDB if they wanted - the protocol isn't too hard, it's just that loads of bits are undocumented!
<br/>
<br/>
And when I eventually get round to coding a GUI for the Java stub I was planning on having some DS-specific stuff to easily allow you to dump stuff lile video RAM. Assuming it's not too hard to read back the display that is...
<br/>
<br/>
In the next release I'm trying to decide between THUMB support or proper CTRL-C handling - the GUI's gonna hafta wait.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92296 - StoneCypher - Wed Jul 12, 2006 5:48 pm</h4>
    <div class="postbody"><span class="postbody">It's things like this that make me happy I ran the bounty.  Pity that the drama crowd is trying to drive me away and keep new stuff like this from happening, isn't it?
<br/>
<br/>
At least the bot they're running pretending to be me might be able to run a new one for you.
<br/>
<br/>
Mute: your screenshot is 404.<br/>_________________<br/>Quidquid Latine dictum sit, altum Sonatur
<br/>
<a href="http://feeds.feedburner.com/StoneHome.gif">[Images not permitted - Click here to view it]</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92376 - simonjhall - Thu Jul 13, 2006 7:40 am</h4>
    <div class="postbody"><span class="postbody">Yo, so has anyone actually had any real problems with this thing yet? Any problems with the docs? I can't believe I got it right first time :-)
<br/>
<br/>
A side note: agentq says he couldn't get Eclipse to work with it. Could anyone else? And if so, what did they have to do that was different from the instructions?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92531 - 0xtob - Thu Jul 13, 2006 8:10 pm</h4>
    <div class="postbody"><span class="postbody">Brilliant work! This will save many people a lot of time!
<br/>
<br/>
I had no greater problems setting it up. Just modified the paths in the Makefiles, recompiled the ds-stub, because I still have DKP r18 and I could happily test the demo. And it works with ddd too :-)
<br/>
<br/>
Keep it up!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92588 - DynamicStability - Fri Jul 14, 2006 12:34 am</h4>
    <div class="postbody"><span class="postbody">I didn't have much luck with it, I'll wait until its part of devkitpro.
<br/>
<br/>
Good job though!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92967 - Goosey - Sun Jul 16, 2006 2:52 am</h4>
    <div class="postbody"><span class="postbody">Has anyone been able to test this with WEP?
<br/>
<br/>
Can't wait to get a chance to try this out!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#92994 - simonjhall - Sun Jul 16, 2006 10:29 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Goosey wrote:</b></span></td> </tr> <tr> <td class="quote">Has anyone been able to test this with WEP?
<br/>
<br/>
Can't wait to get a chance to try this out!</td> </tr></table><span class="postbody">
<br/>
I've been told that it works just fine, though I haven't bothered to verify this myself. Have a go!
<br/>
<br/>
And DynamicStability - could you tell me (either here or in a PM or whatever) what didn't work for you, so I could improve it in another version?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93091 - DynamicStability - Sun Jul 16, 2006 11:05 pm</h4>
    <div class="postbody"><span class="postbody">It wasn't anything specifically wrong with your instructions.  Just a number of setbacks that made me quit for the time being.  Mainly, freshly compiled insight causes my X session to exit each time i click Preferences-&gt;Global, the fact that the linux code sourcery kit didn't include an insight binary for linux, then the fact that your make file needed full customizations for it to work for me....at least I think so.  The other toolkit couldn't find nds.h and stuff like that, then it said that my wifi libs were the wrong eabi...
<br/>
<br/>
So, i'd prefer if only devkitpro was needed, not a secondary toolkit...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93097 - masscat - Mon Jul 17, 2006 12:02 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DynamicStability wrote:</b></span></td> </tr> <tr> <td class="quote">then it said that my wifi libs were the wrong eabi...</td> </tr></table><span class="postbody">
<br/>
The binary wifi library was not made with the latest devkitarm release. All you have to do is get the wifilib source and type make and all should be good. You will need to do this for any project that you use the library for.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93154 - simonjhall - Mon Jul 17, 2006 7:40 am</h4>
    <div class="postbody"><span class="postbody">Right, cool - thanks for testing it too! Gotta sort out the makefile so people don't have to modify it themselves - wintermute, didn't you say you made a bunch of changes to it? I'll put whatever changes in the next ver.
<br/>
<br/>
And insight - yeah, it used to crash loads for me too. There's no insight in the codesourcery distro just a command line version of gdb, arm-none-abi-gdb. This is the gdb I use day to day to write this thing...
<br/>
<br/>
I was thinking of including source for the wifi lib in the next version so that it builds it when you build the <b style="color:#FFA34F">debugger</b> - does anyone think this'll be a good idea?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93543 - dovoto - Wed Jul 19, 2006 8:23 pm</h4>
    <div class="postbody"><span class="postbody">It just occured to me that I have an xport with a decent ds &lt;-&gt; pc connection...how difficult would it be to replace the wifi stub with one that communicates over this port?<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93549 - simonjhall - Wed Jul 19, 2006 9:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">It just occured to me that I have an xport with a decent ds &lt;-&gt; pc connection...how difficult would it be to replace the wifi stub with one that communicates over this port?</td> </tr></table><span class="postbody">
<br/>
I often speak without really thinking, but I'd say it'd probably be easy :-)
<br/>
You'd have to replace the bit of code which inits the wireless and the function which sends a data and the function which polls for a packet, ds-side. You'd then have to change the Java to get the two talking tog. But again, that's all you'd have to change. The rest would be the same.
<br/>
<br/>
Send me some hardware and I might do it for you! Dunno how to use a serial port (or whatever it uses) in Java though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93557 - dovoto - Wed Jul 19, 2006 9:53 pm</h4>
    <div class="postbody"><span class="postbody">java..hmm no idea how to talk to parallel port in java but probably a way.  I will check the charmedlabs site and see if they have done any work with it.  Thanks for your interest<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#93561 - masscat - Wed Jul 19, 2006 10:13 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">java..hmm no idea how to talk to parallel port in java but probably a way.  I will check the charmedlabs site and see if they have done any work with it.  Thanks for your interest</td> </tr></table><span class="postbody">
<br/>
There is a <a class="postlink" href="http://java.sun.com/products/javacomm/" target="_blank">Java extension</a> for using serial and parallel ports.
<br/>
I do not know what is like to use but it provides InputStream and OutputStream objects for talking across the ports so should be a simply job to replace the socket with a port in the debugger stub.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94063 - NEiM0D - Sat Jul 22, 2006 8:26 pm</h4>
    <div class="postbody"><span class="postbody">You would be easier off to modify xpcomm, to do what the java stub does.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#94976 - TheChuckster - Thu Jul 27, 2006 4:09 am</h4>
    <div class="postbody"><span class="postbody">I'm not having too much luck with the debugger. The continue command and CTRL+C work, but I can't set breakpoints, backtrace, or examine memory. When I do, the Java program outputs multiple:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">READ RETRY TIMER RETRYING READ from 0xXXXXXXXX, length 256
<br/>
READ RETRY TIMER memory read request from 0xXXXXXXXX</td> </tr></table><span class="postbody">
<br/>
<br/>
I have the user_debugger_update() function in an infinite loop where I want to be able to check things out. My program stops at a certain point, so before that is where I put the infinite loop. Having a single user_debugger_update() call in the main loop just isn't enough because the program iterates through the main loop only once before crashing.
<br/>
<br/>
When I start my program on my DS, I get the following messages:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">res 0
<br/>
message size 296 bytes
<br/>
breakpoint function at 0203a1b8
<br/>
0    0x200d783    0xb003ca0
<br/>
interrupt mask 00040040
<br/>
interrupt mask 00000040
<br/>
it's not valid
<br/>
bp at: 0x02039af4</td> </tr></table><span class="postbody">
<br/>
<br/>
I think it may have to do with the way I'm setting up my IRQs:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   irqInit();   // Enable our quintessential vblank interrupt
<br/>
   irqSet(IRQ_VBLANK, NULL);
<br/>
   irqEnable(IRQ_VBLANK);
<br/>
   
<br/>
   TIMER0_DATA=0;   // Set up the timer
<br/>
   TIMER1_DATA=0;
<br/>
   TIMER0_CR=TIMER_DIV_1024;
<br/>
   TIMER1_CR=TIMER_CASCADE;
<br/>
<br/>
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
<br/>
   
<br/>
   //start up the wireless, connect to the AP
<br/>
   set_verbosity(VERBOSE_INFO | VERBOSE_ERROR | VERBOSE_TRACE);
<br/>
   wireless_init(1);
<br/>
   wireless_connect();</td> </tr></table><span class="postbody">
<br/>
<br/>
I need both timers in order for my program to keep track of tick counts. Is there anything special I need to do because I am setting up my IRQs manually? I tried calling wireless_init(0), but the Java program crashed.
<br/>
<br/>
All in all, your debugger seems to be very useful, but I really would like to have the breakpoints, backtracing, and memory examination to work with my application.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95008 - simonjhall - Thu Jul 27, 2006 9:22 am</h4>
    <div class="postbody"><span class="postbody">Hmm, that's really weird.
<br/>
Ok, I'll try and address each thing in turn.
<br/>
<br/>
The first block where you've got the read retry timers going at it normally means that either a) the DS, Java and GDB have deadlocked somehow or b) that the DS has crashed as you've done something funny.
<br/>
As I've not been able to deadlock it for over a month, I reckon it's crashed!
<br/>
<br/>
The second block that you've got looks like what appears when you call user_debugger_update() for the very first time. If this appears *before* you call the function then something's definately broken! The "it's not valid" message just means that you've hit the fake breakpoint. This message will only appear on the very first call to that function - there's no message on subsequent calls (even if you stop).
<br/>
<br/>
The third block looks fine. Could I just confirm that you're *not* trying to stop it inside an interrupt handler? Cos the version y'all have doesn't support that! I've written support for it, but I want to release it all together with THUMB/ARM7/proper CTRL-C.
<br/>
<br/>
If you're not placing a breakpoint inside an interrupt handler then something's definately wrong. Could you sent me the massive log the Java app makes? And if your code is dead short, could you send me that too?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95053 - TheChuckster - Thu Jul 27, 2006 4:53 pm</h4>
    <div class="postbody"><span class="postbody">Where is the log file normally stored? The source is rather large because I'm trying to port Prboom to DS. If you want what I've done so far, email me at <a href="mailto:TheChuckster@gmail.com">TheChuckster@gmail.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95069 - simonjhall - Thu Jul 27, 2006 6:16 pm</h4>
    <div class="postbody"><span class="postbody">Ah if the source's big then not to worry. The debugger doesn't currently save the log anywhere, it just writes it straight to stdout. You can capture it however by calling java Debugger &gt; log.txt.
<br/>
<br/>
If I mail you could I get the ARM9 ELF and NDS off you?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95071 - DynamicStability - Thu Jul 27, 2006 6:30 pm</h4>
    <div class="postbody"><span class="postbody">The next version sounds like the sweet spot!  Any time frame?  Thanks.<br/>_________________<br/>Framebuffer is dead.
<br/>
DynaStab.DrunkenCoders.com</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95100 - simonjhall - Thu Jul 27, 2006 9:16 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DynamicStability wrote:</b></span></td> </tr> <tr> <td class="quote">The next version sounds like the sweet spot!  Any time frame?  Thanks.</td> </tr></table><span class="postbody">
<br/>
Ooh, dunno. The ability to debug interrupt handlers has been written, and I'm writing the THUMB stuff right now. Haven't decided how to properly handle the ctrl-c thing yet. And ARM7...hmm.
<br/>
<br/>
Give it a few months as I'll wanna test it all to death before releasing! I spent long enough testing it with one processor mode on one processor with one instruction set, so properly testing/fixing/etc for user/sys/irq modes on both processors, each with two instruction sets could take some time!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#95144 - DynamicStability - Fri Jul 28, 2006 12:51 am</h4>
    <div class="postbody"><span class="postbody">Oh, well I'd encourage interim releases then please.<br/>_________________<br/>Framebuffer is dead.
<br/>
DynaStab.DrunkenCoders.com</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151879 - PypeBros - Thu Mar 06, 2008 10:19 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>simonjhall wrote:</b></span></td> </tr> <tr> <td class="quote">It's that magical time of year again, folks. Yup, it's Debugger Day.
<br/>
Come get it whilst it's hot.
<br/>
<a class="postlink" href="http://myweb.tiscali.co.uk/simonhall/debugger_060711_2138.zip" target="_blank">http://myweb.tiscali.co.uk/simonhall/debugger_060711_2138.zip</a>
<br/>
<br/>
<span style="font-weight: bold">and make sure you read the readme, even though it's pretty long</span>
<br/>
<br/>
for the lazy, it's here too:
<br/>
<a class="postlink" href="http://myweb.tiscali.co.uk/simonhall/README.txt" target="_blank">http://myweb.tiscali.co.uk/simonhall/README.txt</a>
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I know it's one year old, but the download links seems broken to me ... any mirror ? has it been integrated in dkp r21 ?<br/>_________________<br/><a class="postlink" href="http://sylvainhb.blogspot.com/p/sprite-editor.html" target="_blank"> SEDS: Sprite Edition on DS</a> :: <a class="postlink" href="http://sylvainhb.blogspot.com/search/label/modplayer" target="_blank">modplayer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151880 - simonjhall - Thu Mar 06, 2008 10:44 am</h4>
    <div class="postbody"><span class="postbody">Me and wintermute have discussed integrating it a few times. It's definately on my to-do list to fix the bugs that were in the last version and add in ARM7 debugging.
<br/>
I've got the basics of ARM7 working, and the PC-side of things should automatically handle a second processor - I've just got to write the communications between the two CPUs. Oh and add in thumb support for the '7...<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
