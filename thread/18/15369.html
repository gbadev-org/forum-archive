<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>FCSR builder (from DLDIrc v0.92) is broken - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > FCSR builder (from DLDIrc v0.92) is broken</h2>
<div id="posts">
<div class="post">
    <h4>#154288 - Dwedit - Mon Apr 14, 2008 3:00 am</h4>
    <div class="postbody"><span class="postbody">The FCSR builder which comes with DLDIrc v0.92 is broken.  Files are corrupt and have missing data, or chunks from other files.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#154497 - dantheman - Thu Apr 17, 2008 12:22 am</h4>
    <div class="postbody"><span class="postbody">It may not be <span style="font-style: italic">entirely</span> broken.  I used it with your preview releases and it worked out just fine from my POV, though it does seem to have a much higher chance of having errors after the "blessing image" stage than manually building it from the command-line.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155182 - Dwedit - Sat Apr 26, 2008 2:59 am</h4>
    <div class="postbody"><span class="postbody">BFI, the tool which injects files into the disk image, is broken.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155190 - Dwedit - Sat Apr 26, 2008 5:19 am</h4>
    <div class="postbody"><span class="postbody">I wrote a simple tool similar to what BFI was supposed to do, based on GBA_NDS_FAT.  Now it builds disk images correctly.
<br/>
warning: not heavily tested, may possibly be buggy.  But for me, it worked where BFI didn't.
<br/>
<br/>
<a href="http://www.dwedit.org/dwedit_board/viewtopic.php?pid=2289#p2289" target="_blank">http://www.dwedit.org/dwedit_board/viewtopic.php?pid=2289#p2289</a>
<br/>
<br/>
To use with the FCSR builder:
<br/>
Go to C:\Program Files\DLDIrc\fcsrimage
<br/>
extract add_to_disk_image.exe here
<br/>
edit build.bat
<br/>
replace BFI with add_to_disk_image<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155192 - psychowood - Sat Apr 26, 2008 8:14 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the input Dwedit, I'll update DLDIrc ASAP.<br/>_________________<br/><a class="postlink" href="http://dldi.drunkencoders.com/index.php?title=DLDI_Right_Click" target="_blank">DLDIrc Developer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155222 - Dwedit - Sat Apr 26, 2008 8:12 pm</h4>
    <div class="postbody"><span class="postbody">I think BFI had a 2.88MB size limit, since it was intended for floppies and not arbitrary FAT file systems.
<br/>
<br/>
Yeah, while you're updating DLDIRC, you might want to look at the FCSR build batch file.  It's copying files inside C:\program files\, and generating temporary files there.  Writing to program files is a big no-no in Vista.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155226 - psychowood - Sat Apr 26, 2008 9:02 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Yeah, while you're updating DLDIRC, you might want to look at the FCSR build batch file.  It's copying files inside C:\program files\, and generating temporary files there.  Writing to program files is a big no-no in Vista.</td> </tr></table><span class="postbody">
<br/>
<br/>
Vista is a big no-no in me ;)
<br/>
Seriously, I can't test it on Vista, it would be a bit hard to make it compatible... what about installing DLDIrc outside Program Files ?<br/>_________________<br/><a class="postlink" href="http://dldi.drunkencoders.com/index.php?title=DLDI_Right_Click" target="_blank">DLDIrc Developer</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155258 - tepples - Sun Apr 27, 2008 3:09 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>psychowood wrote:</b></span></td> </tr> <tr> <td class="quote">Seriously, I can't test it on Vista, it would be a bit hard to make it compatible</td> </tr></table><span class="postbody">
<br/>
Neither can I, but I do have access to the public parts of MSDN. The recommended way to find a temporary folder name is <a class="postlink" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/shellcc/platform/shell/reference/functions/shgetfolderpath.asp" target="_blank">SHGetFolderPath()</a>. Use that to find the Temp folder, and your program will work in Vista. In the source code for <a class="postlink" href="http://www.pineight.com/lj/" target="_blank">Lockjaw Tetromino Game</a>, src/ljpath.c has an example of using this function to find Application Data; finding Temp wouldn't be much different.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#155397 - dantheman - Tue Apr 29, 2008 3:25 am</h4>
    <div class="postbody"><span class="postbody">Excellent job Dwedit.  This should make FCSR image creation much more stable and usable.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
