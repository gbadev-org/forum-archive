<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>opengl 512X512 texture - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > opengl 512X512 texture</h2>
<div id="posts">
<div class="post">
    <h4>#54592 - GPFerror - Tue Sep 20, 2005 6:28 pm</h4>
    <div class="postbody"><span class="postbody">could someone post an example of displaying a 512X512 texture. I cant figure out what im doing wrong trying to update the examples from using an 128X128 texture.
<br/>
<br/>
thanks,
<br/>
Troy(GPF)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55217 - Ethos - Mon Sep 26, 2005 2:17 pm</h4>
    <div class="postbody"><span class="postbody">Make sure you set banks A-D for textures for 512x512 (useless size imho)<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55266 - dovoto - Tue Sep 27, 2005 6:14 am</h4>
    <div class="postbody"><span class="postbody">My code may still have issues spanning the banks (although i seem to remember fixing it).  Try manualy loading the texture into vram by setting the desired banks to VRAM_LCD, loading the graphics, then setting them back to texture.  If that works then it likely is my texture code that is jacked up.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55323 - GPFerror - Tue Sep 27, 2005 7:15 pm</h4>
    <div class="postbody"><span class="postbody">well here my code you can see I dont know much about 3d :( 
<br/>
I'v since address what I was attempting to do with the rotational background but for the help of others maybe someone can fix this code so it works :)
<br/>
<br/>
I just made a new pcx file of the included 128X128 and stretched it to 512X512 and renamed to drunkenlogo3.pcx
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds.h&gt;
<br/>
#include &lt;stdlib.h&gt;
<br/>
#include &lt;malloc.h&gt;
<br/>
//needed to load pcx files
<br/>
#include &lt;nds/arm9/image.h&gt; 
<br/>
<br/>
#include "drunkenlogo3_pcx.h" 
<br/>
<br/>
int main() {   
<br/>
   
<br/>
   int textureID;
<br/>
<br/>
   powerON(POWER_ALL);
<br/>
<br/>
   //set mode 0, enable BG0 and set it to 3D
<br/>
   videoSetMode(MODE_0_3D);
<br/>
<br/>
   //irqs are nice
<br/>
   irqInit();
<br/>
   irqEnable(IRQ_VBLANK);
<br/>
<br/>
   //this should work the same as the normal gl call
<br/>
   glViewPort(0,0,255,191);
<br/>
   
<br/>
   glClearColor(0,0,0);
<br/>
   glClearDepth(0x7FFF);
<br/>
   
<br/>
   //vramSetBankA(VRAM_A_LCD); vramSetBankB(VRAM_B_LCD); vramSetBankC(VRAM_C_LCD); vramSetBankD(VRAM_D_LCD); 
<br/>
   vramSetBankA(VRAM_A_TEXTURE_SLOT0); vramSetBankB(VRAM_B_TEXTURE_SLOT1); vramSetBankC(VRAM_C_TEXTURE_SLOT2); vramSetBankD(VRAM_D_TEXTURE_SLOT3);
<br/>
   sImage pcx;                //////////////(NEW) and different from nehe.
<br/>
<br/>
   //load our texture
<br/>
   loadPCX((u8*)drunkenlogo3_pcx, &amp;pcx);
<br/>
   
<br/>
   image8to16(&amp;pcx); 
<br/>
<br/>
   glGenTextures(1, &amp;textureID);
<br/>
   glBindTexture(0, textureID);
<br/>
   glTexImage2D(0, 0, GL_RGB, TEXTURE_SIZE_512, TEXTURE_SIZE_512, 0, TEXGEN_TEXCOORD, (u8*)pcx.data8);
<br/>
   imageDestroy(&amp;pcx);
<br/>
     
<br/>
   while(1) {
<br/>
      glReset();
<br/>
   
<br/>
glMatrixMode (GL_MODELVIEW);
<br/>
<br/>
glPushMatrix ();
<br/>
<br/>
glLoadIdentity ();
<br/>
<br/>
glMatrixMode (GL_PROJECTION);
<br/>
<br/>
glPushMatrix ();
<br/>
<br/>
glLoadIdentity ();
<br/>
<br/>
      //not a real gl function and will likely change
<br/>
      glPolyFmt(POLY_ALPHA(31) | POLY_CULL_BACK);
<br/>
<br/>
      
<br/>
      glBindTexture(0, textureID);
<br/>
<br/>
    
<br/>
    //glBindTexture (GL_TEXTURE_2D, 13); /* bind to our texture, has id of 13 */
<br/>
<br/>
    glBegin (GL_QUADS);
<br/>
    glEnable (GL_TEXTURE_2D); /* enable texture mapping */
<br/>
glBegin (GL_QUADS);
<br/>
glTexCoord2f (0.0, 0.0);
<br/>
glVertex3f (0.0, 0.0, 0.0);
<br/>
glTexCoord2f (1.0, 0.0);
<br/>
glVertex3f (10.0, 0.0, 0.0);
<br/>
glTexCoord2f (1.0, 1.0);
<br/>
glVertex3f (10.0, 10.0, 0.0);
<br/>
glTexCoord2f (0.0, 1.0);
<br/>
glVertex3f (0.0, 10.0, 0.0);
<br/>
glEnd ();
<br/>
    glEnd ();
<br/>
<br/>
   
<br/>
glPopMatrix (0);
<br/>
<br/>
glMatrixMode (GL_MODELVIEW);
<br/>
<br/>
glPopMatrix (1);
<br/>
         
<br/>
      glFlush();
<br/>
<br/>
<br/>
      swiWaitForVBlank();
<br/>
   }
<br/>
<br/>
   return 0;
<br/>
}//end main </td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55324 - dovoto - Tue Sep 27, 2005 7:18 pm</h4>
    <div class="postbody"><span class="postbody">oh..sorry, the float versions of glTexxxx are hardcoded to 128x128.  Forgot about that.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55496 - GPFerror - Wed Sep 28, 2005 9:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">oh..sorry, the float versions of glTexxxx are hardcoded to 128x128.  Forgot about that.</td> </tr></table><span class="postbody">
<br/>
<br/>
So does that mean I should use a differrent function or is a fix required in libnds?
<br/>
<br/>
thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55504 - Ethos - Wed Sep 28, 2005 10:18 pm</h4>
    <div class="postbody"><span class="postbody">The function i submitted glTexCoord2f32 should do the trick...only its a fixed point function....so just convert first<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#55649 - dovoto - Fri Sep 30, 2005 6:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>GPFerror wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dovoto wrote:</b></span></td> </tr> <tr> <td class="quote">oh..sorry, the float versions of glTexxxx are hardcoded to 128x128.  Forgot about that.</td> </tr></table><span class="postbody">
<br/>
<br/>
So does that mean I should use a differrent function or is a fix required in libnds?
<br/>
<br/>
thanks</span></td> </tr></table><span class="postbody">
<br/>
Use the fixed point version, but yes the float version will need to be fixed (which will make it even slower;)<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
