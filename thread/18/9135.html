<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Data Compression on Nintendo DS - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Data Compression on Nintendo DS</h2>
<div id="posts">
<div class="post">
    <h4>#78168 - zzo38computer - Wed Apr 05, 2006 7:06 pm</h4>
    <div class="postbody"><span class="postbody">I know there are function such as "swiDecompressLZSSVram" and other stuff, but how exactly do the functions work (and how are they used), and what is the best kinds of compression? I want to make compressed data on computer and transfer to Nintendo DS so the software will fit<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78172 - Mighty Max - Wed Apr 05, 2006 7:39 pm</h4>
    <div class="postbody"><span class="postbody">I recomment to start at the Huffman method.
<br/>
<br/>
<a href="http://en.wikipedia.org/wiki/Huffman_coding" target="_blank">http://en.wikipedia.org/wiki/Huffman_coding</a><br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78264 - knight0fdragon - Thu Apr 06, 2006 7:12 am</h4>
    <div class="postbody"><span class="postbody">Huffman is mostly good for text though, but its a good start<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78295 - zzo38computer - Thu Apr 06, 2006 4:15 pm</h4>
    <div class="postbody"><span class="postbody">I want to compress maps though, not text<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78307 - Mighty Max - Thu Apr 06, 2006 5:16 pm</h4>
    <div class="postbody"><span class="postbody">Huffman is the base of every compression algorithm i know.
<br/>
<br/>
There are some additions, like wordtables, for repeated patterns for lossless compression or discrete fourier transformations &amp; data dropping for loosing compressions (like JPEG)
<br/>
<br/>
I don't know why knight thinks its mostrly for text. It's correct that it works best on text or genrerally better the lesser the amount of symbols are.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78314 - omaremad - Thu Apr 06, 2006 6:14 pm</h4>
    <div class="postbody"><span class="postbody">i think he is asking about hardware techniques of decompression</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78325 - knight0fdragon - Thu Apr 06, 2006 9:28 pm</h4>
    <div class="postbody"><span class="postbody">well theres RLE for things with repeated data,  i wonder if the LZS is hardware decompressed because of the networking, but i was researching that a couple of weeks ago, forgot the sites it was on<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78339 - thundrestrike - Thu Apr 06, 2006 11:40 pm</h4>
    <div class="postbody"><span class="postbody">are you putting graphics in the fwnitro? :D<br/>_________________<br/>popcorn</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78342 - swimgod - Thu Apr 06, 2006 11:58 pm</h4>
    <div class="postbody"><span class="postbody">i think he said a while back,
<br/>
(or someone said...)
<br/>
Graphics are not needed for FW-Nitro,
<br/>
they are just a waste of space...<br/>_________________<br/><span style="font-size: 9px; line-height: normal">
<br/>
1x <span style="font-weight: bold">WII</span> 2x remotes
<br/>
2x NDS/L(FMv7-ORG:v4,FMv7-org:DSL)
<br/>
1x GBAMP
<br/>
2x 1gb (MicroDrive{typeII}&amp;SanDisk{typeI})
<br/>
1x SuperPass2
<br/>
1x Supercard-CF</span>
<br/>
<a class="postlink" href="http://swimgod.com/ms_skins" target="_blank">MoonShell skins</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78345 - knight0fdragon - Fri Apr 07, 2006 12:12 am</h4>
    <div class="postbody"><span class="postbody">hey if u can get good graphics under 1K i say go with it, its only 1/256th of ur space<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78349 - tepples - Fri Apr 07, 2006 12:21 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>swimgod wrote:</b></span></td> </tr> <tr> <td class="quote">Graphics are not needed for FW-Nitro,
<br/>
they are just a waste of space...</td> </tr></table><span class="postbody">
<br/>
All the graphics of the game <span style="font-style: italic">Super Mario Bros.</span> (1985) fit into 8 KB.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78354 - dualscreenman - Fri Apr 07, 2006 12:28 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>swimgod wrote:</b></span></td> </tr> <tr> <td class="quote">i think he said a while back,
<br/>
(or someone said...)
<br/>
Graphics are not needed for FW-Nitro,
<br/>
they are just a waste of space...</td> </tr></table><span class="postbody">
<br/>
He laso said that graphics could come after all the features were working/bugless. Y'know. Later on sort thing.<br/>_________________<br/></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dualscreenman wrote:</b></span></td> </tr> <tr> <td class="quote">What about Gaim DS? Gaim pretty much has support for all IM programs.</td> </tr></table><span class="postbody"> </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote">"Goshdammit, the DS is not a Gaim-boy! It's a third pillar!"</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#78486 - zzo38computer - Fri Apr 07, 2006 5:30 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>thundrestrike wrote:</b></span></td> </tr> <tr> <td class="quote">are you putting graphics in the fwnitro? :D</td> </tr></table><span class="postbody">
<br/>
<br/>
No, this is a different project called NitroZeux (like ZZT and MZX maybe... I want to make a program on computer in Visual Basic which will draw map and compress them, then they will be decompressed by a software on the Nintendo DS)<br/>_________________<br/><span style="font-weight: bold">Important:</span> Please send messages about FWNITRO to the public forum, not privately to me.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79392 - LiraNuna - Thu Apr 13, 2006 11:48 am</h4>
    <div class="postbody"><span class="postbody">You can also use LZ77 compression done by HW.
<br/>
<br/>
If you want to extract to VRAM, it will take some damn tricking...
<br/>
Code : 
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int getSize(uint8 * source, uint16 * dest, uint32 r2) 
<br/>
{
<br/>
   u32 size = *((u32*)source) &gt;&gt; 8;
<br/>
   return (size&lt;&lt;8) | 0x10;
<br/>
}
<br/>
<br/>
uint8 readByte(uint8 * source) 
<br/>
{
<br/>
   return *source++; 
<br/>
}
<br/>
<br/>
void decompressToVRAM(const void* source, void* dest)
<br/>
{
<br/>
   TDecompressionStream decStream;
<br/>
   decStream.getSize = getSize;
<br/>
   decStream.getResult = NULL;
<br/>
   decStream.readByte = readByte;
<br/>
   swiDecompressLZSSVram((void*)source, dest, 0, &amp;decStream);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
All you call s decompressToVRAM, the others are "Helper functions" needed by the decompression stream.
<br/>
<br/>
Be sure to compress with <a class="postlink" href="http://members.cox.net/jsensebe/gba/GBACrusher.zip" target="_blank">GBACrusher</a> with the option LZ77 (VRAM safe)</span><span class="gensmall"><br/><br/>Last edited by LiraNuna on Fri Apr 14, 2006 11:08 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#79477 - omaremad - Thu Apr 13, 2006 10:52 pm</h4>
    <div class="postbody"><span class="postbody">so is dest is just any rambank?
<br/>
<br/>
thanks for the code im might use this for my bgs</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79479 - omaremad - Thu Apr 13, 2006 11:21 pm</h4>
    <div class="postbody"><span class="postbody">sorry for being a noob but if i copy my tiles to the vram how do i allocate that to the bg layer i want?
<br/>
<br/>
would i have to use a rambank for each layer?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79569 - LiraNuna - Fri Apr 14, 2006 11:10 am</h4>
    <div class="postbody"><span class="postbody">The destinations is an address in the VRAM, doesn't have to be a RAM bank/
<br/>
<br/>
For example, you can extract to BG_GFX (0x6000000) or BG_PALETTE(0x5000000) or even to the main RAM (not tested). 
<br/>
<br/>
The main difference is, That the function extracts 16bits at a time, and is more customizable.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
