<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>understanding glLight with glRotate *FIXED* (kind of) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > understanding glLight with glRotate *FIXED* (kind of)</h2>
<div id="posts">
<div class="post">
    <h4>#103057 - Rajveer - Mon Sep 18, 2006 11:27 pm</h4>
    <div class="postbody"><span class="postbody">hi guys. im applying a light onto a 3d object from a certain direction. now when i use glRotate to rotate my object, the lighting on the 3d object behaves as it should and shines in the right direction. however when i create my own matrix for rotations and push this into the objectview stack, lighting doesnt change. is this because i have to apply some changes to the texturestack matrix?</span><span class="gensmall"><br/><br/>Last edited by Rajveer on Tue Sep 19, 2006 2:10 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#103079 - Rajveer - Tue Sep 19, 2006 1:46 am</h4>
    <div class="postbody"><span class="postbody">to simplify, i should give an example:
<br/>
<br/>
say i have an object and light is shining on its right side. now with glRotate, if i rotate it 180 degrees in the y-axis then the left side faces the direction of the light and it shines properly. however if i do said rotation with my own rotation matrix, then it appears as if the light moves with the objects local space and gets moved with it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103080 - tepples - Tue Sep 19, 2006 1:50 am</h4>
    <div class="postbody"><span class="postbody">Do you need a separate matrix to rotate the vertex normals? Can you look up glRotate() in the libnds source code to see how it works?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#103081 - Rajveer - Tue Sep 19, 2006 2:04 am</h4>
    <div class="postbody"><span class="postbody">figured it out (kind of):
<br/>
<br/>
originally i was applying light to all objects near the beginning of the main loop (and before calling glMatrixMode(Texture...)).  then during creating my scene i pushed the identity matrix into the modelview stack, multiplied this by my own matrix and then drew my object.
<br/>
<br/>
now i moved the glLight line in between pushing the identity into modelview and multiplying it by my own matrix: i think glLight gets multiplied by the modelview? not really sure, it works now, but id like to know why :-D
<br/>
<br/>
EDIT: it needs to be applied after a glLookAt call (makes sense now!) i was applying it one line before multiplying the identity by my own matrix, and one line after calling glLookAt (and 2 lines before pushing the identity into modelview...sorry if im confusing, its 2am here and i have the flu :S)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
