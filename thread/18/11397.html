<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compiling C++ - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Compiling C++</h2>
<div id="posts">
<div class="post">
    <h4>#105624 - MattC - Tue Oct 10, 2006 8:12 am</h4>
    <div class="postbody"><span class="postbody">Hi everyone,
<br/>
<br/>
I'm just getting into DS Dev. I started a little deving on the PSP, but decided that the game I've always wanted to create would really be much more appropriate on the DS than any other platform. However, it I don't want to get into a procedural nightmare (especially since I don't know the first thing about structured programming on a large scale), so I would like to create the project with an obeject oriented langauge. Having said that, I know a ton about Java (thats where my professional career has lead me so far), but I'm not so talented with C++.
<br/>
<br/>
I'm simply trying to make a class, but I'm having problems compiling it. It gets stuck on the "class" token, with this error: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
In file included from c:/devkitPro/projects/carmod/source/main.c:11:
<br/>
c:/devkitPro/projects/carmod/source/Sprite.h:6: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Sprite'
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I don't see how my .h file is syntactically wrong, so I'm assuming it has to do with my makefile or something. I tried to parse through the makefile, but I'm pretty lost. It looks like its compiling with g++, but I'm not really sure.
<br/>
<br/>
I'm using Eclipse, but that shouldn't make any difference since its just calling "make"
<br/>
<br/>
Thanks,
<br/>
-Matt</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105627 - felix123 - Tue Oct 10, 2006 9:52 am</h4>
    <div class="postbody"><span class="postbody">Sorry if I am wrong, but are you trying to put C++ code in a .c file?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105628 - Dark Knight ez - Tue Oct 10, 2006 10:00 am</h4>
    <div class="postbody"><span class="postbody">Rename the .c files to .cpp, which are C++ files.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105641 - tepples - Tue Oct 10, 2006 2:14 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MattC wrote:</b></span></td> </tr> <tr> <td class="quote">However, it I don't want to get into a procedural nightmare (especially since I don't know the first thing about structured programming on a large scale), so I would like to create the project with an obeject oriented langauge.</td> </tr></table><span class="postbody">
<br/>
It's possible to do object-oriented programming in a structured programming language. C++ classes are just C structs with automatic method name mangling and automatic jump table construction.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105659 - OOPMan - Tue Oct 10, 2006 5:33 pm</h4>
    <div class="postbody"><span class="postbody">Yeahm C++ is not a "pure" OO language, which is one of its strengths and also one of its weaknesses :-)<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105664 - sajiimori - Tue Oct 10, 2006 6:29 pm</h4>
    <div class="postbody"><span class="postbody">I'd say strength but not weakness.  :)
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">C++ classes are just C structs with automatic method name mangling and automatic jump table construction.</td> </tr></table><span class="postbody">And constructors and destructors and copy constructors and operator overloading and automatic conversions and template methods and access control and...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105671 - MattC - Tue Oct 10, 2006 8:41 pm</h4>
    <div class="postbody"><span class="postbody">Wow, yeah, that was dumb. I knew it would come down to something dumb. I was using a template that assumed I would be using C, but I was trying to expand it with C++ classes. I guess it was a little late last night. It compiles now, thanks.
<br/>
<br/>
-Matt</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105691 - MattC - Wed Oct 11, 2006 2:27 am</h4>
    <div class="postbody"><span class="postbody">Now I'm having problems with a static member variable. I'm trying to create a Singleton class to manage sprites, but the compiler refuses to acknowledge the existance of static variables. Every time I try to access them within the class, I get an error similar to:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">error: 'i' is not a member of 'SpriteNumberManager'</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm not incredibly great with C++ syntax, but I've looked up the examples of the singleton pattern on other websites (http://www.inquiry.com/techtips/cpp_pro/10min/10min0200.asp), and I'm implementing it in exactly the same way, but I get errors.
<br/>
<br/>
I'm also getting this error when trying to use NULL in my code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">error: 'NULL' was not declared in this scope</td> </tr></table><span class="postbody">
<br/>
<br/>
Which makes me think theres something wrong with my makefile. My structure where this class lies is:
<br/>
<br/>
source\
<br/>
 -------main.cpp
<br/>
 -------lib\
<br/>
 -----------gfx\
<br/>
 ---------------(lib source files)
<br/>
<br/>
Where the lib source files are the files giving me problems. The only thing I've added to the makefile is by "SOURCES :=" I added source/lib/gfx
<br/>
<br/>
-Matt</span><span class="gensmall"><br/><br/>Last edited by MattC on Wed Oct 11, 2006 2:43 am; edited 3 times in total</span></div>    
</div>
<div class="post">
    <h4>#105692 - sajiimori - Wed Oct 11, 2006 2:33 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
struct S
<br/>
{
<br/>
  static int i;
<br/>
  int test() { return i; }
<br/>
};
<br/>
<br/>
int S::i;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105767 - Izhido - Wed Oct 11, 2006 8:03 pm</h4>
    <div class="postbody"><span class="postbody">In C++, NULL is a constant defined as exactly 0 (zero). It is not part of the language per se; NULL is defined on &lt;stdlib.h&gt; (or, if you prefer, &lt;cstdlib&gt; ). If you want, you can use 0 instead of NULL. It's just a matter of preferences. Mine's using 0. :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105919 - MattC - Fri Oct 13, 2006 3:47 am</h4>
    <div class="postbody"><span class="postbody">Thanks Izhido, I never knew that, I always thought it was part of the syntax.
<br/>
<br/>
sajiimori - are you saying I have to redefine the variable as a global variable (is that the correct scope?) as in your example to reference the static variable? Why is that...if it isn't too much explanation?
<br/>
<br/>
Thanks for being patient with me, this is one of the reasons I wanted to write a game for a console, since I would be forced to use C/C++. I really want to know more about the language since I haven't used it that much.
<br/>
<br/>
-Matt</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#105970 - sajiimori - Fri Oct 13, 2006 6:53 pm</h4>
    <div class="postbody"><span class="postbody">When you want to create a class-static variable, you declare it in the class body, then define it once somewhere in a .cpp file.  It's just like how you create global variables (with cross-module access) by declaring them 'extern' in a header and defining them once in a .c or .cpp file (which is something that's good to learn before using class-static variables).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
