<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>installing PAlib - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > installing PAlib</h2>
<div id="posts">
<div class="post">
    <h4>#53783 - Sephiroth87 - Sun Sep 11, 2005 10:10 pm</h4>
    <div class="postbody"><span class="postbody">i've tried to install these libs, to see how they works, and if it's simplier to code...
<br/>
<br/>
howewer, when running install.bat, i get tons of error, like parse error before variable definitions...
<br/>
<br/>
i'm using the latest verion (0.5c maybye...)
<br/>
<br/>
any suggestion?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53822 - Mollusk - Mon Sep 12, 2005 7:06 am</h4>
    <div class="postbody"><span class="postbody">Now that's weird...
<br/>
<br/>
Think you could copy/paste part of the error here ?
<br/>
<br/>
<br/>
You could also check out on <a class="postlink" href="http://teamnnc.free.fr/phpBB2/portal.php" target="_blank">http://teamnnc.free.fr/phpBB2/portal.php</a> if there's something. (Arog's tutorials might help)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53833 - Sephiroth87 - Mon Sep 12, 2005 12:49 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
In file included from c:/ndsdev/PAlib/lib/arm7/../../include/NDS/PA7.h:13,
<br/>
 from c:/ndsdev/PAlib/lib/arm7/PA.c:1:
<br/>
c:/ndsdev/PAlib/lib/arm7/../../include/NDS/arm7/PA_Sound.h:27: error: parse error before "PA_SoundOk"
<br/>
c:/ndsdev/PAlib/lib/arm7/../../include/NDS/arm7/PA_Sound.h:27: warning: type defaults to 'int' in declaration of 'PA_SoundOk'
<br/>
c:/ndsdev/PAlib/lib/arm7/../../include/NDS/arm7/PA_Sound.h:27: warning: data definition has no type or storage class
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
other error are similar to this, and after a few of them, the installation exit...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53835 - Mollusk - Mon Sep 12, 2005 1:48 pm</h4>
    <div class="postbody"><span class="postbody">The latest versions (from .42 and up) are made to work with devkitpro, and devkitpro only. (not ndsdev)
<br/>
<br/>
I would recommend Aaron Rogers' tutorials.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53854 - Sephiroth87 - Mon Sep 12, 2005 7:39 pm</h4>
    <div class="postbody"><span class="postbody">ok, i'll try that...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53877 - Sephiroth87 - Mon Sep 12, 2005 10:39 pm</h4>
    <div class="postbody"><span class="postbody">whoa, that works :P
<br/>
<br/>
now, i need to modify my makefile to include palib .h, cause how it is now it doesn't work...
<br/>
here's my current makefile...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output, if this ends with _mb generates a multiboot image
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# INCLUDES is a list of directories containing extra header files
<br/>
#---------------------------------------------------------------------------------
<br/>
TOOLDIR := $(NDSLIBPATH)/examples/tools
<br/>
TARGET   :=   template
<br/>
BUILD      :=   build
<br/>
SOURCES   :=   gfx source data  
<br/>
INCLUDES   :=   include build
<br/>
ICON      :=    sephiroth.bin
<br/>
ARM7BIN   :=    ../../arm7/arm7.bin
<br/>
#---------------------------------------------------------------------------------
<br/>
# options for code generation
<br/>
#---------------------------------------------------------------------------------
<br/>
ARCH   :=   -mthumb-interwork
<br/>
<br/>
# note: arm9tdmi isn't the correct CPU arch, but anything newer and LD
<br/>
# *insists* it has a FPU or VFP, and it won't take no for an answer!
<br/>
CFLAGS   :=   -g -Wall -O2\
<br/>
       -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer\
<br/>
      -ffast-math \
<br/>
      $(ARCH)
<br/>
<br/>
CFLAGS   +=   $(INCLUDE) -DARM9
<br/>
<br/>
ASFLAGS   :=   -g $(ARCH)
<br/>
LDFLAGS   :=   -g $(ARCH) -mno-fpu
<br/>
<br/>
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# path to tools - this can be deleted if you set the path in windows
<br/>
#---------------------------------------------------------------------------------
<br/>
# export PATH      :=   /d/dev/ds/devkitARM_r11/bin:/bin
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# PATH to ndslib - just make a system variable called NDSLIBPATH and be done with it
<br/>
#---------------------------------------------------------------------------------
<br/>
# NDSLIBPATH   :=   /d/dev/ds/ndslib/
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# the prefix on the compiler executables
<br/>
#---------------------------------------------------------------------------------
<br/>
PREFIX         :=   arm-elf-
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBS   := -lnds9
<br/>
 
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(NDSLIBPATH)
<br/>
 
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# no real need to edit anything past this point unless you need to add additional
<br/>
# rules for different file extensions
<br/>
#---------------------------------------------------------------------------------
<br/>
ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
#---------------------------------------------------------------------------------
<br/>
 
<br/>
export OUTPUT   :=   $(CURDIR)/$(TARGET)
<br/>
 
<br/>
export VPATH   :=   $(foreach dir,$(SOURCES),$(CURDIR)/$(dir))
<br/>
 
<br/>
export CC      :=   $(PREFIX)gcc
<br/>
export CXX      :=   $(PREFIX)g++
<br/>
export AR      :=   $(PREFIX)ar
<br/>
export OBJCOPY   :=   $(PREFIX)objcopy
<br/>
#---------------------------------------------------------------------------------
<br/>
# use CXX for linking C++ projects, CC for standard C
<br/>
#---------------------------------------------------------------------------------
<br/>
export LD      :=   $(CXX)
<br/>
#export LD      :=   $(CC)
<br/>
 
<br/>
CFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.c)))
<br/>
CPPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
SFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.s)))
<br/>
PCXFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.pcx)))
<br/>
BINFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.bin)))
<br/>
PALFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.pal)))
<br/>
RAWFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.raw)))
<br/>
MAPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.map)))
<br/>
 
<br/>
export OFILES   :=   $(MAPFILES:.map=.o) $(RAWFILES:.raw=.o) $(PALFILES:.pal=.o) $(BINFILES:.bin=.o) $(PCXFILES:.pcx=.o)\
<br/>
               $(CPPFILES:.cpp=.o) $(CFILES:.c=.o) $(SFILES:.s=.o)
<br/>
 
<br/>
export INCLUDE   :=   $(foreach dir,$(INCLUDES),-I$(CURDIR)/$(dir)) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include/NDS) \
<br/>
               -I$(CURDIR)/$(BUILD)
<br/>
 
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
 
<br/>
.PHONY: $(BUILD) clean
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
   @[ -d $@ ] || mkdir -p $@
<br/>
   @make --no-print-directory -C $(BUILD) -f $(CURDIR)/Makefile
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...$(TARGET)
<br/>
   @rm -fr $(BUILD) *.elf *.nds*
<br/>
 
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
 
<br/>
DEPENDS   :=   $(OFILES:.o=.d)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# main targets
<br/>
#---------------------------------------------------------------------------------
<br/>
$(OUTPUT).nds.gba   :    $(OUTPUT).nds
<br/>
<br/>
$(OUTPUT).nds   :    $(OUTPUT).bin
<br/>
<br/>
$(OUTPUT).bin   :   $(OUTPUT).elf
<br/>
 
<br/>
$(OUTPUT).elf   :   $(OFILES)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.nds.gba: %.nds
<br/>
   @echo built ... $(notdir $@)
<br/>
   @$(TOOLDIR)/dsbuild $(OUTPUT).nds  $@ $(TOOLDIR)/loader.bin
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
%.nds: %.bin
<br/>
   
<br/>
   @$(TOOLDIR)/ndstool -c $@ -9 $(TARGET).bin -7 $(ARM7BIN) -b $(TOOLDIR)/sephiroth.bmp "$(TARGET);?2005;by Sephiroth87" -o $(TOOLDIR)/logo.bmp
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
%.bin: %.elf
<br/>
   
<br/>
   @$(OBJCOPY) -O binary $(TARGET).elf $(TARGET).bin
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.elf:
<br/>
   
<br/>
   @$(LD)  $(LDFLAGS) -specs=ds_arm9.specs $(OFILES) $(LIBPATHS) $(LIBS) -o $(TARGET).elf
<br/>
 
<br/>
 
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# Compile Targets for C/C++
<br/>
#---------------------------------------------------------------------------------
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o : %.cpp
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(CXX) -MM $(CFLAGS) -o $*.d $&lt;
<br/>
   @$(CXX) $(CFLAGS) -c $&lt; -o$@
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o : %.c
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(CC) -MM $(CFLAGS) -o $*.d $&lt;
<br/>
   @$(CC)  $(CFLAGS) -c $&lt; -o$@
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o : %.s
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(CC) -MM $(CFLAGS) -o $*.d $&lt;
<br/>
   @$(CC)  $(ASFLAGS) -c $&lt; -o$@
<br/>
 
<br/>
define bin2o
<br/>
   cp $(&lt;) $(*).tmp
<br/>
   $(OBJCOPY) -I binary -O elf32-littlearm -B arm \
<br/>
   --rename-section .data=.rodata \
<br/>
   --redefine-sym _binary_$*_tmp_start=$*\
<br/>
   --redefine-sym _binary_$*_tmp_end=$*_end\
<br/>
   --redefine-sym _binary_$*_tmp_size=$*_size\
<br/>
   $(*).tmp $(@)
<br/>
   echo "extern const u8" $(*)"[];" &gt; $(*).h
<br/>
   echo "extern const u32" $(*)_size[]";" &gt;&gt; $(*).h
<br/>
   rm $(*).tmp
<br/>
endef
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o   :   %.pcx
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o   :   %.bin
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o   :   %.raw
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o   :   %.pal
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o   :   %.map
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
%.o   :   %.mdl
<br/>
#---------------------------------------------------------------------------------
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
 
<br/>
-include $(DEPENDS)
<br/>
 
<br/>
#---------------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------------</td> </tr></table><span class="postbody">
<br/>
<br/>
what lines do i have to add?[/code]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53879 - Mollusk - Mon Sep 12, 2005 10:45 pm</h4>
    <div class="postbody"><span class="postbody">with arog and kleevah, we updated the template in the PAlib.zip... You could just take out the makefiles from there (3 makefiles, one in the base folder, one in arm9, one in arm7...)
<br/>
<br/>
So check out version 0.52a :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53881 - Sephiroth87 - Mon Sep 12, 2005 11:00 pm</h4>
    <div class="postbody"><span class="postbody">yahoo!!!
<br/>
finally PAlibs are installed xD
<br/>
<br/>
thank'you very much for the support ;)
<br/>
keep on the great work!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
