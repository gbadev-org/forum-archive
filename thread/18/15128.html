<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Hardware matrix multiplications - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Hardware matrix multiplications</h2>
<div id="posts">
<div class="post">
    <h4>#151899 - Rajveer - Thu Mar 06, 2008 2:14 pm</h4>
    <div class="postbody"><span class="postbody">How do I multiply matrices using the hardware? glLoadMatrix loads a matrix onto the current OpenGL stack right? So if I wanted to concatenate rotations using hardware during collisions and before rendering, how would I do this without messing with the OpenGL stacks?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151900 - a128 - Thu Mar 06, 2008 2:30 pm</h4>
    <div class="postbody"><span class="postbody">Matrix mtx= matrix1*matrix2 using the NDS hardware
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int32 matrix1[4*4];
<br/>
int32 matrix2[4*4];
<br/>
int32 mtx[4*4];
<br/>
<br/>
//matrix mult test
<br/>
<br/>
glMatrixMode(GL_MODELVIEW);
<br/>
<br/>
//matrix1
<br/>
//Spalte 1
<br/>
matrix1[0]=inttof32(1);
<br/>
matrix1[4]=0;
<br/>
matrix1[8]=0;
<br/>
matrix1[12]=0;
<br/>
<br/>
matrix1[1]=0;
<br/>
matrix1[5]=inttof32(1);
<br/>
matrix1[9]=0;
<br/>
matrix1[13]=0;
<br/>
<br/>
matrix1[2]=0;
<br/>
matrix1[6]=0;
<br/>
matrix1[10]=inttof32(1);
<br/>
matrix1[14]=0;
<br/>
<br/>
matrix1[3]=0;
<br/>
matrix1[7]=0;
<br/>
matrix1[11]=0;
<br/>
matrix1[15]=inttof32(1);
<br/>
<br/>
//matrix2
<br/>
matrix2[0]=inttof32(7);
<br/>
matrix2[4]=0;
<br/>
matrix2[8]=0;
<br/>
matrix2[12]=0;
<br/>
<br/>
matrix2[1]=0;
<br/>
matrix2[5]=inttof32(10);
<br/>
matrix2[9]=0;
<br/>
matrix2[13]=0;
<br/>
<br/>
matrix2[2]=inttof32(23);
<br/>
matrix2[6]=0;
<br/>
matrix2[10]=inttof32(1111);
<br/>
matrix2[14]=0;
<br/>
<br/>
matrix2[3]=0;
<br/>
matrix2[7]=0;
<br/>
matrix2[11]=0;
<br/>
matrix2[15]=inttof32(-9);
<br/>
<br/>
glLoadMatrix4x4((m4x4*)&amp;matrix1);
<br/>
glMultMatrix4x4((m4x4*)&amp;matrix2);
<br/>
<br/>
//mtx=matrix1*matrix2
<br/>
glGetFixed(GL_GET_MATRIX_POSITION,(int32*)&amp;mtx);
<br/>
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151902 - Rajveer - Thu Mar 06, 2008 3:02 pm</h4>
    <div class="postbody"><span class="postbody">Cool cheers for that, just wanted to make sure that people use the gl stacks too or if I should be doing it another way.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151913 - Rajveer - Thu Mar 06, 2008 4:09 pm</h4>
    <div class="postbody"><span class="postbody">Does the hardware matrix multiply perform normalisation and orthogonalization too? I've been rotating in all axes for a while but the model doesn't seem to skew/stretch or anything.
<br/>
<br/>
EDIT: Scratch that, didn't do it for long enough. Since, sqrtf32 uses hardware square root, is it pretty quick to perform?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
