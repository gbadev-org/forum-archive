<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Help with collisions - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Help with collisions</h2>
<div id="posts">
<div class="post">
    <h4>#79124 - blahh - Tue Apr 11, 2006 7:51 pm</h4>
    <div class="postbody"><span class="postbody">Can someone please help me with my collisions, i'm totally lost on how to do them, or even how they work...yes i've read the tutorials....
<br/>
<br/>
I'm making a game, and for testing's sake i put yellow blocks on the map and I want to know when the helicopter hits them.
<br/>
<br/>
<br/>
The helicopter moves up and down, and the map moves left (looks like copter is moving right, but always stays in same x coordinate..)
<br/>
The collisions can occur on the front, top, and bottom of the helicopter.
<br/>
<br/>
I know you have to get the tile to see if its transparent, but I dont know how to do this.
<br/>
<br/>
Please take a look at my source and help me write collision detection:
<br/>
<a class="postlink" href="http://www.savefile.com/files2.php?fid=5459605" target="_blank">http://www.savefile.com/files2.php?fid=5459605</a>
<br/>
<br/>
open "project.vhw" for source, and run "build.bat" for easiest compile
<br/>
<br/>
-thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79147 - Fenderocker - Tue Apr 11, 2006 9:45 pm</h4>
    <div class="postbody"><span class="postbody">you basicly ckeck to see if the x cordinate is the same or less than any given block and then if yess check to see if any part of the heli is inside the block.
<br/>
<br/>
Hope that helped</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79150 - blahh - Tue Apr 11, 2006 9:55 pm</h4>
    <div class="postbody"><span class="postbody">Okay. But how would i find out the coordinates of the blocks/not transparent areas?
<br/>
<br/>
without using the map's scrollx variable that scrolls the background though....
<br/>
so basically, I want to use the map.c as used in the platform game demo to check if the tile in front/top/bottom of the heli is transparent or not...
<br/>
<br/>
Thats what I dont know how to do :/
<br/>
<br/>
Thanks :]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79156 - tepples - Tue Apr 11, 2006 10:24 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>blahh wrote:</b></span></td> </tr> <tr> <td class="quote">Okay. But how would i find out the coordinates of the blocks/not transparent areas?</td> </tr></table><span class="postbody">
<br/>
For one thing, many scrolling games seem to approximate the boundaries of a sprite with a rectangle or circle, which can be more easily tested against the background.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">without using the map's scrollx variable that scrolls the background though....</td> </tr></table><span class="postbody">
<br/>
You will probably need to keep your sprite's position in "world space" and then transform it to "camera space" after each frame.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79159 - blahh - Tue Apr 11, 2006 10:33 pm</h4>
    <div class="postbody"><span class="postbody">The palib platform game demo used this method to return the value of the tile mario is at
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">u8 GetTile(s16 x, s16 y){
<br/>
   if (x &lt; 0) return 1; // Say it was a collision...
<br/>
   return mario_world_Map[((y&gt;&gt;3)*128) + (x&gt;&gt;3)];
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
i have no idea how to change this for the helicopter (other than mario_world_Map to map_Map).
<br/>
<br/>
The x value is always at 50, and y value, ranges from 0 to (191-32)
<br/>
<br/>
uhh so annoying..</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79391 - LiraNuna - Thu Apr 13, 2006 11:34 am</h4>
    <div class="postbody"><span class="postbody">Instead of wrestling with PAlib, Start to use real libraries.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79421 - omaremad - Thu Apr 13, 2006 4:49 pm</h4>
    <div class="postbody"><span class="postbody">whats wrong with you people and palib
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
u8 GetTile(s16 x, s16 y){ 
<br/>
   if (x &lt; 0) return 1; // Say it was a collision... 
<br/>
   return mario_world_Map[((y&gt;&gt;3)*128) + (x&gt;&gt;3)]; 
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
the marioworld map is the tileset for the bg
<br/>
<br/>
collision is done by ignoring magenta tiles which are exported as nulls by PAGFX
<br/>
<br/>
each 8 pixels are grouped to a tile and the collision is based on a bounding box style on these tiles
<br/>
<br/>
for the helicopter you just you the same function.....
<br/>
<br/>
it is explained very clearly in the palib wiki
<br/>
<br/>
seriously lirluna if people want palib let them be its speeds up a lot of stuff
<br/>
if you want to do some advanced stuff like vram manage ment then you can still do that and use palib.....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79851 - keldon - Sun Apr 16, 2006 1:23 pm</h4>
    <div class="postbody"><span class="postbody">why the 8 bit and 16 bit variables?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
