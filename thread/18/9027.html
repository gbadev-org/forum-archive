<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>help with programming, im new to c++ and ndslib - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > help with programming, im new to c++ and ndslib</h2>
<div id="posts">
<div class="post">
    <h4>#76931 - GizmoTheGreen - Sun Mar 26, 2006 12:41 pm</h4>
    <div class="postbody"><span class="postbody">hello, i am 15 years old, and new to DS programming, i know a little of visual basic and ruby.
<br/>
<br/>
i made a basic app called DSLasergun
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include "nds.h"
<br/>
#include &lt;nds/bios.h&gt;
<br/>
#include &lt;nds/system.h&gt;
<br/>
#include &lt;nds/arm9/console.h&gt;   
<br/>
#include &lt;nds/arm9/sound.h&gt;      
<br/>
#include &lt;stdio.h&gt;
<br/>
<br/>
#include "blaster_raw.h"
<br/>
#include "saberoff_raw.h"
<br/>
<br/>
int main(void) {
<br/>
<br/>
   powerON( POWER_LCD | POWER_2D_B );
<br/>
<br/>
   irqInit();
<br/>
   irqSet(IRQ_VBLANK, NULL);
<br/>
   irqEnable(IRQ_VBLANK);
<br/>
<br/>
   videoSetMode(0);   
<br/>
   videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);   
<br/>
   vramSetBankC(VRAM_C_SUB_BG); 
<br/>
<br/>
   SUB_BG0_CR = BG_MAP_BASE(31);
<br/>
   
<br/>
   BG_PALETTE_SUB[255] = RGB15(0,25,0);
<br/>
   
<br/>
   consoleInitDefault((u16*)SCREEN_BASE_BLOCK_SUB(31), (u16*)CHAR_BASE_BLOCK_SUB(0), 16);
<br/>
   iprintf("\n DS Lasergun \n\n Use L &amp; R to shoot\n depending on preference...\n\n Press Select  to swap screens\n\n\n\n Coded by GizmoTheGreen\n  ");
<br/>
<br/>
   setGenericSound(   11025,   
<br/>
                  127,   
<br/>
                  64,      
<br/>
                  1 );   
<br/>
<br/>
   TransferSoundData blaster = {
<br/>
      blaster_raw,      
<br/>
      blaster_raw_size,   
<br/>
      11025,            
<br/>
      127,            
<br/>
      64,               
<br/>
      1                
<br/>
   };
<br/>
<br/>
   while(1) {
<br/>
<br/>
      swiWaitForVBlank();
<br/>
      scanKeys();
<br/>
<br/>
      //s16 userName = PersonalData[name0, name1, name2,name3,name4,name5,name6,name7,name8,name9]
<br/>
      u16 keys = keysDown();
<br/>
      u16 up = keysUp();
<br/>
<br/>
      if ( keys &amp; KEY_R) playSound(&amp;blaster), iprintf("\n Right handed?"); 
<br/>
   
<br/>
      if ( keys &amp; KEY_L) playSound(&amp;blaster), iprintf("\n Left  handed?");
<br/>
<br/>
      if ( keys &amp; KEY_LID) playGenericSound(saberoff_raw, saberoff_raw_size), iprintf("\n Closed");
<br/>
   
<br/>
      if ( up &amp; KEY_LID) playGenericSound(saberoff_raw, saberoff_raw_size), iprintf("\n Opened");
<br/>
<br/>
      if ( keys &amp; KEY_A) iprintf("\n What? This button\n does nothin'... yet...");
<br/>
   
<br/>
        if ( keys &amp; KEY_START) iprintf("\n Restarting..."); 
<br/>
<br/>
      if ( up &amp; KEY_START) swiSoftReset();
<br/>
<br/>
      if ( keys &amp; KEY_SELECT) lcdSwap();
<br/>
   }
<br/>
   return 0;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
EDIT: it works in dualis and on hardware, though im borrowing friends m3, as i dont have my own, and the purpose of this app, is to pretend your DS i a gun, we love to use it on the breaks in school :)
<br/>
<br/>
now, can anyone help me shut of backlight while folded?
<br/>
also go back to M3 menu by pressing start?
<br/>
<br/>
thanks in advance<br/>_________________<br/>Starter of the project TrueLoveDS :D
<br/>
Will you find True Love?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#76999 - melw - Mon Mar 27, 2006 9:10 am</h4>
    <div class="postbody"><span class="postbody">For turning off the backlight you can check for example Moonshell sources (<a class="postlink" href="http://mdxonline.dyndns.org/archives/nds/" target="_blank">http://mdxonline.dyndns.org/archives/nds/</a>), seems like he has done even the DS Lite brightness settings recently. It's on the ARM7 side, using his modified IPC implementation.
<br/>
<br/>
What comes to going back to M3 menu, no idea if it can be done. The best solution I've succeeded doing is shutting down the program shut downs the DS...
<br/>
<br/>
PS. Be sure not to shoot the teacher if you want to keep your NDS intact :).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#77013 - GizmoTheGreen - Mon Mar 27, 2006 2:03 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">PS. Be sure not to shoot the teacher if you want to keep your NDS intact :).</td> </tr></table><span class="postbody">
<br/>
<br/>
:P, sure, i wont.
<br/>
<br/>
EDIT: when i try to compile it gives me these errors...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:/devkitPro/examples/nds/sound/DSLasergun/source/a7sleep.cpp: In function 'u8 PM_GetRegister(int)':
<br/>
c:/devkitPro/examples/nds/sound/DSLasergun/source/a7sleep.cpp:34: error: 'SerialWaitBusy' was not declared in this scope
<br/>
c:/devkitPro/examples/nds/sound/DSLasergun/source/a7sleep.cpp:36: error: 'REG_SPICNT' was not declared in this scope
<br/>
c:/devkitPro/examples/nds/sound/DSLasergun/source/a7sleep.cpp:36: error: 'SPI_ENABLE' was not declared in this scope
<br/>
c:/devkitPro/examples/nds/sound/DSLasergun/source/a7sleep.cpp:36: error: 'SPI_DEVICE_POWER' was not declared in this scope
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
moved the code to new bios file(made copy of old one)
<br/>
this kina fixed it except </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">c:/devkitPro/examples/nds/sound/DSLasergun/source/DSLasergun.c:58: undefined reference to `a7sleep'
<br/>
c:/devkitPro/examples/nds/sound/DSLasergun/source/DSLasergun.c:66: undefined reference to `a7poff'</td> </tr></table><span class="postbody">
<br/>
<br/>
what to do?
<br/>
<br/>
thanks for the help, i really appreciate it, i dont have much time to study c++ as i have important school now, still i want to keep the DS programming as a hobby, so ill just continue posting here for help :)
<br/>
<br/>
thanks, also thanks in advance for future help<br/>_________________<br/>Starter of the project TrueLoveDS :D
<br/>
Will you find True Love?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
