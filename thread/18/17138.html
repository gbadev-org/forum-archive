<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>argv at 0x2FFFE70? or at 0x27FFF70? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > argv at 0x2FFFE70? or at 0x27FFF70?</h2>
<div id="posts">
<div class="post">
    <h4>#172822 - the kid in the clock - Fri Mar 05, 2010 8:17 pm</h4>
    <div class="postbody"><span class="postbody">devkitpro has argv at 0x2FFFE70.
<br/>
<a href="http://devkitpro.svn.sourceforge.net/viewvc/devkitpro/trunk/libnds/include/nds/system.h?revision=3910&amp;view=markup#l_308" target="_blank">http://devkitpro.svn.sourceforge.net/viewvc/devkitpro/trunk/libnds/include/nds/system.h?revision=3910&amp;view=markup#l_308</a>
<br/>
<br/>
desmume - and my cyclods - seem to have it at 0x27FFF70.
<br/>
<a href="http://desmume.svn.sourceforge.net/viewvc/desmume/trunk/desmume/src/NDSSystem.cpp?view=markup#l_2204" target="_blank">http://desmume.svn.sourceforge.net/viewvc/desmume/trunk/desmume/src/NDSSystem.cpp?view=markup#l_2204</a>
<br/>
<br/>
anyone know who is right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172824 - wintermute - Fri Mar 05, 2010 9:31 pm</h4>
    <div class="postbody"><span class="postbody">devkitPro ...
<br/>
<br/>
we had to move things around for DSi support.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172826 - the kid in the clock - Fri Mar 05, 2010 10:57 pm</h4>
    <div class="postbody"><span class="postbody">so it sounds like there's a newer and an older argv style. do any cards support the newer style?
<br/>
<br/>
i appreciate your answers. you probably feel like this stuff is written a thousand times everywhere - somehow i can't seem to find anything current.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172827 - wintermute - Fri Mar 05, 2010 11:06 pm</h4>
    <div class="postbody"><span class="postbody">It's not a newer &amp; older style it's an "oops I messed that up" and a "there I fixed it now" style. devkitARM r26 has the broken implementation, r27+ has the corrected version, this won't change again.
<br/>
<br/>
I think the latest akaio provides the correct implementation, not sure offhand.
<br/>
<br/>
As I've said elsewhere, given sufficient pressure and information, all card manufacturers who actually support homebrew *will* use the correct implementation provided that homebrew devs stop trying to be all things to all people and attempting to make things work on all cards.
<br/>
<br/>
argv and exit to menu functionality are relatively recent additions to devkitARM/libnds so you probably won't find much by searching. It's been on the TODO list for a while but I only recently had reason to make it work and sufficient time to actually do it.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172828 - coreyh2 - Fri Mar 05, 2010 11:13 pm</h4>
    <div class="postbody"><span class="postbody">I was curious about this too when the nitrodir example failed even though the cycloDS firmware had argv support talked about in the feature list. Is argv documented somewhere thats easy for card makers to find? Was this change reported somewhere they would see?
<br/>
<br/>
Its hard for me to even try to use nitrofs if it doesn't even run on my card.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172830 - the kid in the clock - Fri Mar 05, 2010 11:49 pm</h4>
    <div class="postbody"><span class="postbody">wintermute - good ok i see - it was a mistake. part of the problem is that some cards use that old/wrong/whatever memory address. cyclods lists this support for 'argv' loading - and it uses that address. i posted a bug report on their forum - but its hard to tell them what to support unless it's clear. i'm not trying to create work for you - i'm just checking this stuff so i can tell them what's right.
<br/>
<br/>
coreyh2 - here's a sample you can try to see if your cyclods has any 'argv' support. if you have a newer firmware, you should see a message about finding 'desmume' style argv.
<br/>
<a href="http://dl.thekidintheclock.com/u/5148711/nds/efs-test_mar2010.nds" target="_blank">http://dl.thekidintheclock.com/u/5148711/nds/efs-test_mar2010.nds</a>
<br/>
<br/>
and here's the source for it.
<br/>
<a href="http://dl.thekidintheclock.com/u/5148711/nds/efs-nice_mar2010.zip" target="_blank">http://dl.thekidintheclock.com/u/5148711/nds/efs-nice_mar2010.zip</a></span><span class="gensmall"><br/><br/>Last edited by the kid in the clock on Sat Mar 06, 2010 12:03 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#172831 - wintermute - Fri Mar 05, 2010 11:53 pm</h4>
    <div class="postbody"><span class="postbody">hbmenu has existed in the devkitPro SVN repository as a launcher reference design for over a year now. Various card manufacturers were pointed to that but obviously we can't spare the time to find contact details for what now seems like close to a hundred varieties of DS flashcard.
<br/>
<br/>
If argv &amp; libfilesystem doesn't work on your card report it as an issue and request that they look at how hbmenu works. Currently the file browser is fairly basic but it can be replaced, really all they have to do is add their own UI and use the launcher code.
<br/>
<br/>
It's starting to get to the point where I really think the effort of building a DS SD adapter specifically for homebrew might be warranted. The main issue with that is Nintendo's current aggression towards "game copying" devices - several people in the UK have received custodial sentences for selling DS flashcards in recent months. If we do create a homebrew card it's going to have to not run "backups" out of the box.
<br/>
<br/>
edit: holy crap the cycloDS is expensive<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172833 - elwing - Sat Mar 06, 2010 10:04 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote">edit: holy crap the cycloDS is expensive</td> </tr></table><span class="postbody">
<br/>
<br/>
pretty expensive, but pretty good also... that said, it was good when you only had some random R4 or DSTT card, with acekard + akaio I don't see the point in cycloDS when it's over 4time the price and offer almost nil over...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172847 - wintermute - Mon Mar 08, 2010 1:26 pm</h4>
    <div class="postbody"><span class="postbody">Some info on hbmenu &amp; how the argv and reset code work
<br/>
<br/>
<a href="http://wiki.devkitpro.org/index.php/Homebrew_Menu" target="_blank">http://wiki.devkitpro.org/index.php/Homebrew_Menu</a><br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172858 - the kid in the clock - Mon Mar 08, 2010 5:41 pm</h4>
    <div class="postbody"><span class="postbody">this looks brilliant - it's written very clearly. can't thank you enough. going to relay this on to the cyclods guys and refer to this in my game's instructions.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172861 - the kid in the clock - Mon Mar 08, 2010 6:04 pm</h4>
    <div class="postbody"><span class="postbody">also, looks like desmume has updated their code! on friday.
<br/>
<a href="http://desmume.svn.sourceforge.net/viewvc/desmume?view=rev&amp;revision=3394" target="_blank">http://desmume.svn.sourceforge.net/viewvc/desmume?view=rev&amp;revision=3394</a>
<br/>
<br/>
people appear to be... cooperating?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#172875 - vuurrobin - Tue Mar 09, 2010 9:21 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>the kid in the clock wrote:</b></span></td> </tr> <tr> <td class="quote">also, looks like desmume has updated their code! on friday.
<br/>
<a href="http://desmume.svn.sourceforge.net/viewvc/desmume?view=rev&amp;revision=3394" target="_blank">http://desmume.svn.sourceforge.net/viewvc/desmume?view=rev&amp;revision=3394</a>
<br/>
<br/>
people appear to be... cooperating?</td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Author:	wntrmute
<br/>
Date:	Fri Mar 5 20:42:35 2010 UTC (3 days, 11 hours ago)
<br/>
Log Message:	
<br/>
use correct address for argv</td> </tr></table><span class="postbody">
<br/>
<br/>
only if wintermute is cooperating with himself :P
<br/>
<br/>
still, nice to see desmume use the correct adress.<br/>_________________<br/>my blog:
<br/>
<a href="http://vuurrobin.100webcustomers.com/" target="_blank">http://vuurrobin.100webcustomers.com/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
