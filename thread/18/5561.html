<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Setting DS screen into 64x32 tiles? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Setting DS screen into 64x32 tiles?</h2>
<div id="posts">
<div class="post">
    <h4>#41431 - JL - Thu Apr 28, 2005 10:29 am</h4>
    <div class="postbody"><span class="postbody">Hi guys,
<br/>
<br/>
I'm trying to get my code to set the sub screen into 512x256 size (or 64x32 tiles, if you will). I'm using mode 0 and I've been trying several settings for SUB_BG0_CR, but it looks as if it always goes to 32x32 tiles each time.
<br/>
<br/>
This is my code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
videoSetMode(0); //not using the main screen
<br/>
videoSetModeSub(MODE_0_2D | DISPLAY_BG0_ACTIVE);
<br/>
vramSetBankC(VRAM_C_SUB_BG); 
<br/>
            
<br/>
SUB_BG0_CR = BG_MAP_BASE(29) | WRAPAROUND | BG_RS_64x32 | BG_256_COLOR; 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I've tested it on dualis, not on a real NDS yet - maybe that's just it?
<br/>
<br/>
JL</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41433 - D^A^V - Thu Apr 28, 2005 11:38 am</h4>
    <div class="postbody"><span class="postbody">got the same probleme.
<br/>
always 32*32 tiles....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41454 - josath - Thu Apr 28, 2005 6:18 pm</h4>
    <div class="postbody"><span class="postbody">It works for me. You realize that it's split into two chunks in memory, right?
<br/>
<br/>
for example:
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
#define MEMORY_OFFSET (1024+32)
<br/>
void setTile(int x, int y, uint16 *map, uint16 tile)
<br/>
{
<br/>
     int realx = x;
<br/>
     uint16 *realmap = map;
<br/>
     if(realx &gt; 32)
<br/>
     {
<br/>
          realx -= 32;
<br/>
          realmap += MEMORY_OFFSET;
<br/>
      }
<br/>
      map[y*32 + realx] = tile;
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
One thing you need to check, I may have MEMORY_OFFSET defined incorrectly. You should look up what it is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41461 - JL - Thu Apr 28, 2005 7:30 pm</h4>
    <div class="postbody"><span class="postbody">Hi Josath,
<br/>
<br/>
*ouch*....yes, now that you mentioned it I vaguely remembered something about 2 chunks of memory which I happily ignored in my GBA code because I could get away with 256x256 screens.
<br/>
<br/>
Thank you, it's working now! I just assumed that the 512x256 screensize would be flat out....next time I'll read the GBA docs as well if I come across something like this! 
<br/>
<br/>
Cheers!
<br/>
JL</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41476 - tepples - Thu Apr 28, 2005 10:50 pm</h4>
    <div class="postbody"><span class="postbody">Correct. 512-pixel-wide maps were split on both the NES and the Super NES.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
