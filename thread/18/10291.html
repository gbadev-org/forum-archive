<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Tiled background is corrupting itself!!! :(( - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Tiled background is corrupting itself!!! :((</h2>
<div id="posts">
<div class="post">
    <h4>#91788 - spinal_cord - Sun Jul 09, 2006 4:43 pm</h4>
    <div class="postbody"><span class="postbody">Can someone explain why my background keeps corrupting itself (random tiles are being changed). I'm sure i'm not doing something stupid, but can someone have alook and tell me whats going on?
<br/>
I'm using PaLib, I hope that isn't a proble in itself.
<br/>
<br/>
<a class="postlink" href="http://www.freewebs.com/spinal_cord/download.html?source.zip" target="_blank">source.zip</a>
<br/>
<br/>
This is realy bugging me, it worked fine yesturday and I dont know aht i've done to it. :(<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91797 - silent_code - Sun Jul 09, 2006 7:14 pm</h4>
    <div class="postbody"><span class="postbody">did you try a fully clean build? rebuild the whole thing and check if the problem is solved. there's a small chance it will.
<br/>
<br/>
good luck</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91798 - wintermute - Sun Jul 09, 2006 7:57 pm</h4>
    <div class="postbody"><span class="postbody">Hint 1:
<br/>
<br/>
Do not #include .c files
<br/>
<br/>
Hint 2:
<br/>
<br/>
make sure your arrays are aligned properly<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91807 - mastertop101 - Sun Jul 09, 2006 8:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Hint 1:
<br/>
<br/>
Do not #include .c files </td> </tr></table><span class="postbody">
<br/>
huh..  first, that's not the problem, and  you must load a .c file to load tiled bg (with palib) 
<br/>
<br/>
And make sure your program isn't trying to load your background many times in a row (in a sort of infinite loop..)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91808 - spinal_cord - Sun Jul 09, 2006 8:55 pm</h4>
    <div class="postbody"><span class="postbody">make sure my what are what? what does aligning arrays do? I never needed to do that with gba (not that I did much at all).
<br/>
<br/>
I'm fairly sure im only loading the background only once.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91812 - tepples - Sun Jul 09, 2006 9:51 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mastertop101 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Do not #include .c files </td> </tr></table><span class="postbody">
<br/>
huh..  first, that's not the problem, and  you must load a .c file to load tiled bg (with palib) </span></td> </tr></table><span class="postbody">
<br/>
Then compile the .c file separately, and bring it in at link time.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91814 - chatterbug89 - Sun Jul 09, 2006 10:06 pm</h4>
    <div class="postbody"><span class="postbody">I seriously think what the above people are talking about isn't related to your problem.
<br/>
<br/>
Anyways, I had a similar problem....I don't know if this is a bug in PALib or ...just how it works...but, it seems that in some case, loading a background once a previouse background was loaded on the same screen and priority causes weird tile problems...reloading the tiles right after loading another background by using something like PA_LoadBgTiles(1, 2, bla_Tiles); (look in the docs to see the excact function you need..not sure off hand and am too lazy to look) seems to prevent the problem.  So, if you just reload the tiles after loading a new background, that should do the trick.
<br/>
<br/>
EDIT: By the way, you'd probaly have better luck with getting answeres about palib on their own forums.  There doesn't seem to be many people using PAlib here...also....i'm starting to dislike PAlib after using it and it doesn't realy go torwards my programing goals beign so high level either.  It's good for simple projects I guess..but, it's anoyign not knowing excactly what's going on sometimes...it's sometimes more trouble than it's worth to make it do what you want.  My current project may be my only PAlib project that i do.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91822 - spinal_cord - Sun Jul 09, 2006 11:26 pm</h4>
    <div class="postbody"><span class="postbody">Palib forum isnt usually very helpful for anything. but I wiull give your suggestion a shot tomorrow. thankyou for the potentially useful advice.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91830 - mastertop101 - Mon Jul 10, 2006 1:58 am</h4>
    <div class="postbody"><span class="postbody">Oh.. nice splash screen ;) and well, im not even sure what background problem you're talking about.. the little squares that you can pass through maybe ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91841 - chatterbug89 - Mon Jul 10, 2006 3:12 am</h4>
    <div class="postbody"><span class="postbody">When he said nice splash i was curiouse and looked at the code again to see if you did anything special..guess you diden't, but ..just thought i'd say...instead of this...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
int st=0;
<br/>
while(st==0)
<br/>
{
<br/>
   PA_WaitForVBL();
<br/>
   if(Pad.Newpress.Start){st=1;}
<br/>
}  
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Try this.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
while(!Pad.Newpress.Start)
<br/>
   PA_WaitForVBL();
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#91872 - spinal_cord - Mon Jul 10, 2006 9:33 am</h4>
    <div class="postbody"><span class="postbody">mastertop101 - yes, the littls squares that you can pass through, they arn't actually on the map data.
<br/>
<br/>
I have fixed the problem, it seemed that assigning a value to enemy_grid[] was causing the random screen junk, I changed it slightly and now everything works again.
<br/>
<br/>
chatterbug89 - thanks for the tip.<br/>_________________<br/>I'm not a boring person, it's just that boring things keep happening to me.
<br/>
<a class="postlink" href="http://spinal.dizidesigns.co.uk/" target="_blank">Homepage</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
