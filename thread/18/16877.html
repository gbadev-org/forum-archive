<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>vram bank help - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > vram bank help</h2>
<div id="posts">
<div class="post">
    <h4>#170393 - tine622 - Mon Sep 21, 2009 6:31 am</h4>
    <div class="postbody"><span class="postbody">Hello, I have a piece of code that allocates vram bank B and sets up a screen for the main window. Can anyone help me to convert this code to set up the screen for the sub screen on vram bank C?
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">  
<br/>
videoSetMode(MODE_5_2D | DISPLAY_BG3_ACTIVE);  
<br/>
vramSetBankB(VRAM_B_MAIN_BG_0x06020000);
<br/>
<br/>
BACKGROUND.control[3] = BG_BMP16_256x256 | BG_BMP_BASE(8) | BG_PRIORITY(3); 
<br/>
BACKGROUND.bg3_rotation.xdx = 1 &lt;&lt; 8; 
<br/>
BACKGROUND.bg3_rotation.xdy = 0; 
<br/>
BACKGROUND.bg3_rotation.ydx = 0; 
<br/>
BACKGROUND.bg3_rotation.ydy = 1 &lt;&lt; 8; 
<br/>
<br/>
*screen = new BScreen((uint16*)BG_BMP_RAM(8), BSize(256,192)); // BG3 on main</td> </tr></table><span class="postbody">
<br/>
<br/>
I know it is something simple but I am having a horrible time trying to wrap my mind around the vram bank allocation. Thanks for your help =)
<br/>
<br/>
Mark Carpenter</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170394 - DiscoStew - Mon Sep 21, 2009 7:03 am</h4>
    <div class="postbody"><span class="postbody">I think this might be the way, according to your original setup. Tell us if it works. :)
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">videoSetModeSub( MODE_5_2D | DISPLAY_BG3_ACTIVE );
<br/>
vramSetBankC( VRAM_C_SUB_BG );
<br/>
<br/>
BACKGROUND_SUB.control[ 3 ] = BG_BMP16_256x256 | BG_BMP_BASE( 0 ) | BG_PRIORITY( 3 );
<br/>
BACKGROUND_SUB.bg3_rotation.xdx = 1 &lt;&lt; 8;
<br/>
BACKGROUND_SUB.bg3_rotation.xdy = 0;
<br/>
BACKGROUND_SUB.bg3_rotation.ydx = 0;
<br/>
BACKGROUND_SUB.bg3_rotation.ydy = 1 &lt;&lt; 8;
<br/>
<br/>
*screen = new BScreen((uint16*)BG_BMP_RAM_SUB( 0 ), BSize( 256, 192 ));</td> </tr></table><span class="postbody"><br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#170414 - tine622 - Tue Sep 22, 2009 3:47 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the response! That worked perfectly.
<br/>
<br/>
<br/>
Mark Carpenter</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
