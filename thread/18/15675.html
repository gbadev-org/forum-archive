<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Texture in memory - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Texture in memory</h2>
<div id="posts">
<div class="post">
    <h4>#158584 - sUPREz - Sat Jun 14, 2008 12:00 am</h4>
    <div class="postbody"><span class="postbody">Hi guys. I have a problem. I'm using glTexImage2D to put my texture into the NDS memory. I made a very little function that puts some pcx texture in memory with the 3 following lines :
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">glGenTextures(1, &amp;texture[i]);
<br/>
glBindTexture(0, texture[i]);
<br/>
glTexImage2D(0, 0, GL_RGB, TEXTURE_SIZE_128 , TEXTURE_SIZE_128, 0, TEXGEN_TEXCOORD, pcx.image.data8);</td> </tr></table><span class="postbody">
<br/>
<br/>
(this is the basic code from every devkitpro examples) 
<br/>
<br/>
The problem is that if I first readd a texture with the same ID, it doesn't erase the previous texture, it only add the new one after all the loaded textures. So my program quickly runs out of memory. I think I just change the pointer to my texture in my int array. 
<br/>
<br/>
Some websites talks about the glDeleteTextures function but it's only with the full OGL engine, not with the NDS GL engine.
<br/>
<br/>
I also found the glResetTextures function but this one clear the entire memory ! 
<br/>
<br/>
How can I erase a specific texture in memory ? I have the pointer to the texture, and I want to destroy it. Please help ! :) Thanks a lot !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158588 - silent_code - Sat Jun 14, 2008 12:12 am</h4>
    <div class="postbody"><span class="postbody">There are some implementations available in the forum, you only have to search for them. But, yes, you are right, the texture handling in libnds' videoGL is very basic. You will have to implement anything more involved by yourself. Good luck.
<br/>
<br/>
Happy coding!<br/>_________________<br/><span style="font-size: 9px; line-height: normal"><span style="text-decoration: underline"><span style="font-weight: bold"></span></span> July 5th 08: "<span style="font-weight: bold">Volumetric Shadow Demo</span>" 1.6.0 (final) source released
<br/>
June 5th 08: "<span style="font-weight: bold">Zombie NDS</span>" WIP released!
<br/>
It's all on my page, just click <span style="font-weight: bold">WWW</span> below.</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#158592 - M3d10n - Sat Jun 14, 2008 2:03 am</h4>
    <div class="postbody"><span class="postbody">Search the forums, I remember someone posting code to reload a texture in an existing address, but it has to be the same size.
<br/>
<br/>
If you want to be able to delete individual textures and whatnot, you'll have to come up with your own management. Download the libnds source and look at how it manages textures so you can have a good starting point.
<br/>
<br/>
At the most basic, you copy texture and palette data to VRAM slots and tell the DS it's offset address, it's dimensions, format and texgen flags before rendering. So you need a way to store all those flags (dimensions, format, etc) and the texture pixel and palette data location in VRAM, and a way to manage data in the VRAM (allocate/deallocate it).</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
