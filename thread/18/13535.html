<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Is live DLDI patching on the DS feasible? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Is live DLDI patching on the DS feasible?</h2>
<div id="posts">
<div class="post">
    <h4>#132698 - TheMikaus - Thu Jun 28, 2007 7:54 pm</h4>
    <div class="postbody"><span class="postbody">I know there are devices that prepatch the roms before they run them.  I was wondering if it would be feasible to sort of store multiple dldi drivers in your program and when it first boots up have the user select which one to use and have it patch itself in memory to use the device.
<br/>
<br/>
Example idea.  Is having a custom firmware on the DS that stores maybe three different DLDIs (that way if a person has multiple cards they don't have to reflash to use it) and when the DS boots up it lets the user select which one to use so that it can browse the card.
<br/>
<br/>
I would think it's feasible.  I'm just wondering if every one else thinks so.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132702 - Rajveer - Thu Jun 28, 2007 9:18 pm</h4>
    <div class="postbody"><span class="postbody">If you flash the application with one DLDI driver, would it work with another cart if you reflashed it with the second carts DLDI driver?
<br/>
<br/>
Also, in your example, why would you not just store a copy of the application on each cart?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132712 - TheMikaus - Thu Jun 28, 2007 9:44 pm</h4>
    <div class="postbody"><span class="postbody">My example is more for firmware.  So the firmware would boot and say the person owned a GBAMP, and an R4.  So the firmware could contain the DLDI for both the GBAMP and R4 and the user could basically hotswap the DLDI depending on if they wanted to browse the GBAMP or the R4 also this could allow the firmware to autopatch the nds files before loading (one less step for the end user).
<br/>
<br/>
But in general you are correct you could just have everything prepatched for your one card.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132723 - Lynx - Thu Jun 28, 2007 10:38 pm</h4>
    <div class="postbody"><span class="postbody">I think a good question would be.. Is there room for DLDI drivers in the firmware at all?<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132737 - tepples - Fri Jun 29, 2007 12:53 am</h4>
    <div class="postbody"><span class="postbody">If you don't care about PictoChat and DS Download Play client, you can make a full custom firmware such as FWNITRO.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132741 - HyperHacker - Fri Jun 29, 2007 1:38 am</h4>
    <div class="postbody"><span class="postbody">Yes, but you only have 256K, and the patches can be up to 32K. I do like the idea, though, since it'd allow you to use Rebootlib to load a .nds file from the card without having to go through its menus and splash screens. (_BOOT_MP.NDS on any card.)<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132743 - tepples - Fri Jun 29, 2007 2:06 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">Yes, but you only have 256K, and the patches can be up to 32K.</td> </tr></table><span class="postbody">
<br/>
The DLDI patches are up to 32 KiB because the SmartMedia driver used by G6 Flash needs a 16 KiB lookup table. Most drivers aren't nearly that big, and RLE compression can take care of that.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132760 - Ant6n - Fri Jun 29, 2007 5:05 am</h4>
    <div class="postbody"><span class="postbody">so theoretically its possible to "patch" a firmware that then patches every .nds as needed; as oppossed to having to patch every .nds oneself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132776 - JLsoft - Fri Jun 29, 2007 7:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Rajveer wrote:</b></span></td> </tr> <tr> <td class="quote">If you flash the application with one DLDI driver, would it work with another cart if you reflashed it with the second carts DLDI driver?</td> </tr></table><span class="postbody">
<br/>
<br/>
Late reply, but yeah, you can re-DLDI-patch stuff that's been patched for something else no problem.  It didn't used to work, but that was because of an old old version of dlditool...works fine now.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132952 - Dood77 - Mon Jul 02, 2007 12:35 am</h4>
    <div class="postbody"><span class="postbody">Without going for the whole custom firmware thing... why not have your preferred driver in a certain place on your card, and make a code library that accesses this driver and patches itself?<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132955 - DragonMinded - Mon Jul 02, 2007 2:08 am</h4>
    <div class="postbody"><span class="postbody">Because you would need the preferred driver to access the card...<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132959 - Ant6n - Mon Jul 02, 2007 3:25 am</h4>
    <div class="postbody"><span class="postbody">except if that life updater is dldi patched</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#132995 - wintermute - Mon Jul 02, 2007 2:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ant6n wrote:</b></span></td> </tr> <tr> <td class="quote">except if that life updater is dldi patched</td> </tr></table><span class="postbody">
<br/>
<br/>
Then what's the point of storing the dldi on the card?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133016 - Ant6n - Mon Jul 02, 2007 6:12 pm</h4>
    <div class="postbody"><span class="postbody">well, if there is one program, like an nds loader that is dldi patched, which has the the ability to patch other .nds files, than that would that ... emm, i mean, that would be cool.. just dreamin' here</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133022 - DragonMinded - Mon Jul 02, 2007 7:39 pm</h4>
    <div class="postbody"><span class="postbody">Kinda like how dso already does?<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133034 - TheMikaus - Mon Jul 02, 2007 9:15 pm</h4>
    <div class="postbody"><span class="postbody">Well.  My original intention was for a firmware replacement that would be able to browse multiple types of homebrew devices.  So if you had a different device than your friend you could just have the firmware store the drivers for both and when it loads, you select the one you want to use (maybe even have automatic detection) and then it would patch itself in memory to use the correct DLDI.  Patching the rom before loading would be optional and maybe unnecessary, but I think it would be useful.
<br/>
<br/>
Not that I'm going to work on it anytime soon, I was just curious.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133047 - Dood77 - Mon Jul 02, 2007 10:19 pm</h4>
    <div class="postbody"><span class="postbody">Wow, you guys are right. What a paradox :P
<br/>
So I like the original idea of having all the patches in the .nds and being able to select which patch you want, granted it doesn't bloat the program too much.
<br/>
<br/>
DM, do you mean for the homebrew database? Or is there some other way to patch binaries that I'm just missing? It would be nice to DLDI patch within the file browser, is it possible to access whatever functions you use for this from the plug-in architecture?<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133057 - HyperHacker - Mon Jul 02, 2007 11:18 pm</h4>
    <div class="postbody"><span class="postbody">I think it auto-patches in memory as it's loading a program.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133151 - tepples - Tue Jul 03, 2007 8:44 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>wintermute wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Ant6n wrote:</b></span></td> </tr> <tr> <td class="quote">except if that life updater is dldi patched</td> </tr></table><span class="postbody">
<br/>
Then what's the point of storing the dldi on the card?</span></td> </tr></table><span class="postbody">
<br/>
To patch .nds files for <span style="font-style: italic">other</span> card models. For instance, a family might own a SuperCard SD, an R4, and a Games 'n' Music. (My family does.) All three can use microSD cards (the first through the SD adapter bundled with most microSD cards). The first two currently have DLDI drivers, and the last may have one by the end of the month.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133154 - TheMikaus - Tue Jul 03, 2007 9:17 pm</h4>
    <div class="postbody"><span class="postbody">Is there a way to tell what's plugged into the slots?  Like which device the user has plugged in?
<br/>
<br/>
(posted here since this sort of goes along the same idea I was talking about earlier)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133176 - ghOst - Tue Jul 03, 2007 10:47 pm</h4>
    <div class="postbody"><span class="postbody">You can detect the name of the cardridge <a href="http://www.bottledlight.com/ds/index.php/Main/FileFormats" target="_blank">http://www.bottledlight.com/ds/index.php/Main/FileFormats</a>
<br/>
<br/>
CycloDS evolution ( Slot-1 Card ) use dldi autopatching</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133178 - Dood77 - Tue Jul 03, 2007 11:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">I think it auto-patches in memory as it's loading a program.</td> </tr></table><span class="postbody">
<br/>
Which boot methods do this? And which dldi does it use for my Supercard miniSD, the normal one, or the alternate moonshell code? One of my SD cards only works with scsd_moon.dldi.<br/>_________________<br/>If I use a term wrong or something then feel free to correct, I?m not much of a programmer.
<br/>
<span style="font-size: 9px; line-height: normal">
<br/>
Original DS Phat obtained on day of release + flashme v7
<br/>
Supercard: miniSD, Kingston 1GB, Kingston 2GB
<br/>
Ralink chipset PCI NIC
<br/>
</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133188 - Lick - Tue Jul 03, 2007 11:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dood77 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">I think it auto-patches in memory as it's loading a program.</td> </tr></table><span class="postbody">
<br/>
Which boot methods do this? And which dldi does it use for my Supercard miniSD, the normal one, or the alternate moonshell code? One of my SD cards only works with scsd_moon.dldi.</span></td> </tr></table><span class="postbody">
<br/>
I believe it takes the DLDI patch from DSO and applies it on the booted program. Chishm's bootstub does this, although I'm not sure if DSO uses the same one!<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
