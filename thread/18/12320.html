<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>libfat help - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > libfat help</h2>
<div id="posts">
<div class="post">
    <h4>#117065 - Balkman - Thu Feb 01, 2007 12:52 am</h4>
    <div class="postbody"><span class="postbody">I need the ability to store game assets that arn't compiled into the ARM binarys to save memory. Libfat is the answer to this aparently, but I am having a pretty difficult time finding any tutorials/documentation on how to use the library.
<br/>
<br/>
First off, I have no clue what a DLDI is, so I have downloaded the source for the corresponding card I own (in my case it's the R4).
<br/>
<br/>
There isn't many functions within the source making not overwhelming at least, but I have some questions on what exactly I should be putting into the parameters of these methods.
<br/>
<br/>
My other question is how/where do I store these external resources such as graphics and sounds. Placing them in the "data" folder located in the project directory will result in them being compiled into header files (which I want to avoid) due to wintermute's makefile. I just need to know how to get them onto the R4 along with my executable.
<br/>
<br/>
(P.S. I haven't actually recieved my R4 card yet in the mail)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117067 - tepples - Thu Feb 01, 2007 12:58 am</h4>
    <div class="postbody"><span class="postbody">You place the asset files in a folder on your microSD card, and then you give the pathnames to fopen().<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117105 - GrizzlyAdams - Thu Feb 01, 2007 10:35 am</h4>
    <div class="postbody"><span class="postbody">You don't need to touch the DLDI source unless you are writing a new driver.
<br/>
<br/>
Add libfat to your arm9 LIBS= line in your makefile (before -lnds9)
<br/>
<br/>
In the file with your main() add this line to the includes:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;fat.h&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
In your main() where you do all your initialization, add this:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">fatInitDefault();</td> </tr></table><span class="postbody">
<br/>
<br/>
now you can use both stdio (fopen, fread, etc...) and fileio (open, read, lseek, etc...) like you would on any other platform.
<br/>
<br/>
Grab the .DLDI for your card, and patch your .nds with dlditool.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117115 - Diddl - Thu Feb 01, 2007 11:44 am</h4>
    <div class="postbody"><span class="postbody">if you dont want to do it with DLDI, I have a io-driver for actual fatlib. it works fine in DSdoom on R4 and M3simply.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
