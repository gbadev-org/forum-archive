<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Writing an n64 emulator - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Writing an n64 emulator</h2>
<div id="posts">
<div class="post">
    <h4>#109760 - shadowghost21 - Tue Nov 21, 2006 12:54 am</h4>
    <div class="postbody"><span class="postbody">Is it possible to write a program that will take the code from a n64 game and turn it into a ds game. Like doing all the interpreting on the PC then moving that stuff to the DS?? 
<br/>
<br/>
-shadow</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109762 - dantheman - Tue Nov 21, 2006 1:13 am</h4>
    <div class="postbody"><span class="postbody">The search function is very helpful in times like these.
<br/>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=10951&amp;highlight=n64" target="_blank">http://forum.gbadev.org/viewtopic.php?t=10951&amp;highlight=n64</a>
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=8340&amp;highlight=n64" target="_blank">http://forum.gbadev.org/viewtopic.php?t=8340&amp;highlight=n64</a> - this one especially
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=5538&amp;postdays=0&amp;postorder=asc&amp;highlight=n64&amp;start=30" target="_blank">http://forum.gbadev.org/viewtopic.php?t=5538&amp;postdays=0&amp;postorder=asc&amp;highlight=n64&amp;start=30</a>
<br/>
<br/>
Short answer:  no, it isn't possible.  You can't just "convert" between the two formats.  It doesn't work that way.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109781 - tepples - Tue Nov 21, 2006 5:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shadowghost21 wrote:</b></span></td> </tr> <tr> <td class="quote">Is it possible to write a program that will take the code from a n64 game and turn it into a ds game. Like doing all the interpreting on the PC then moving that stuff to the DS?? </td> </tr></table><span class="postbody">
<br/>
Only if you work for the game's developers. You'd need the source code, not the rom, and only the game's developers have the source code. What is your company called?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109788 - HyperHacker - Tue Nov 21, 2006 7:20 am</h4>
    <div class="postbody"><span class="postbody">I do see what he's getting at... if emulators dynamically recompile code into native routines, it seems they should be able to recompile the entire ROM. The biggest problem with this idea is the newly-generated code is unsuitable for this purpose, since it's generated based on the existing hardware and memory state (it'd be like trying to play a game by loading just a save state, with no ROM, into an emulator). Also you'd need to activate every routine in the game, which means doing everything in the game.
<br/>
<br/>
Instead, I suggest you learn ROM hacking, figure out how your favourite game stores all its resources, then write a clone of its engine for the DS that's compatible with those resources or includes a program to port them to its own format. Then not only can users extract the resources from their own dump of the ROM and use it in your engine, but they could make new games from it too.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109845 - shadowghost21 - Tue Nov 21, 2006 6:22 pm</h4>
    <div class="postbody"><span class="postbody">I am not part of a company. I am a Sophmore student at Colorado State, I wanted to get into game programming when I get outa college, I emailed rareware, in hope I could find some one to talk to, as writing a new engine from scratch(which is what I am currently doing) is a pain in the ass. It is going to be hard to nail all the things that made the game perfect dark with out the source, The graphics are no problem as I can get those from a video plugin for n64 emulator, but I still have to convert them, and all that jazz. I am really hoping to hear back from rareware, to see if I can buy part of the source at the very least, or even the goldeneye engine!
<br/>
<br/>
-shadow</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109862 - M3d10n - Tue Nov 21, 2006 9:42 pm</h4>
    <div class="postbody"><span class="postbody">I ensure you: making a engine from scratch is propaly 100 times less time consuming than <span style="font-weight: bold">trying</span> to dissassemble and recompile a N64 game into a DS game without source.
<br/>
<br/>
The GPUs of each system alone are so wildly different that whatever N64 engine you get ahould of would need to be completly re-written for the DS.
<br/>
<br/>
...I'll remain silent on the Goldeneye bit, though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109868 - Lynx - Wed Nov 22, 2006 12:26 am</h4>
    <div class="postbody"><span class="postbody">Heh.. not to mention, using stipped graphics would be illegal.  Your engine would have to accept their formats...  I'm sure they will sell you the source, I just don't think you have enough money to buy it.<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109875 - shadowghost21 - Wed Nov 22, 2006 4:28 am</h4>
    <div class="postbody"><span class="postbody">Thats really to bad, But I am going to make a 'port' anyway, or atleast try. I basicly have to redo all the graphics anyway, from the format I recive them in. I wonder if the school could buy the code from rareware, or I could get a grant to buy it from them? They have not repiled to my email yet.
<br/>
<br/>
-shadow</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109876 - HyperHacker - Wed Nov 22, 2006 5:30 am</h4>
    <div class="postbody"><span class="postbody">I'd love to see how you'd convince your school that that expense is necessary so that you can try to port a game unofficially to a handheld.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109890 - silent_code - Wed Nov 22, 2006 10:23 am</h4>
    <div class="postbody"><span class="postbody">this is really... special. i can tell you that you'll have to pay some thousands of $, even for that dated engine. the only hope you may have is that they release it under GPL (or whatever) and only force you to release your sources, too. but i don't think that will happen.
<br/>
<br/>
btw: porting an existing engine from one system to another rarely needs a complete rewrite. all you have to do is to modify and/or rewrite parts of the backend and the greatest impact would be having to strip out floating point math (i'm talking "generally" here) and adjusting audio visual renderer. but most parts would stay nearly untouched.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109909 - shadowghost21 - Wed Nov 22, 2006 6:22 pm</h4>
    <div class="postbody"><span class="postbody">How bout' this argument... If you give me the source code to develop a port of perfect dark to the nintendo ds, When I am finished you can retain all the source my ported copy, (minus the one I would like to keep) and you can sell it for what ever and pay me no royalties. All I ask in return is a few copys of the game, and my name in the credits!
<br/>
<br/>
Think that might persuade a money hungry company, they dont need to hand out royalties,and all they gota do *if* they produce the game is give me a few copys and put my in the credits. Seems fair. But in the mean time I am trying tomake a new engine, it is going to take a while, as I know nothing of AI, or collisions, but I am adapting NDSws tool set to me needs! Other than that you guys think that when the quake 2 engine is finally ported I could use that? Its a start.
<br/>
<br/>
-shadow</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109911 - OOPMan - Wed Nov 22, 2006 7:10 pm</h4>
    <div class="postbody"><span class="postbody">Erm, I doubt it...
<br/>
<br/>
Money hungry companies just don't care about small quibble. Their time is worth more than yours :-)
<br/>
<br/>
Silent_code: The re-write does depend on some more factors. For example, the problem I had with the Ur-Quan Masters port was that the engine had already been ported twice, first from PC to 3D0, then back to PC, but using SDL. The result was a rather obtuse pile of source code. Still, I guess not all ports are like that. And I'm not exactly a shit-hot coder, so some of it was me :-)
<br/>
<br/>
I dunno, I just get bored of seeing this N64 port posts popping up every now and then. I really wish people would use the search function more often :-)<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#109975 - M3d10n - Thu Nov 23, 2006 9:10 pm</h4>
    <div class="postbody"><span class="postbody">Trust me, Rare will likely never reply your e-mail. The most you've done was give whoever reads the e-mails a good laugh. No offense but that what'd happen if we got such e-mail here at work, it's just too naive for one to not chuckle at it.
<br/>
<br/>
Some facts:
<br/>
<br/>
- Console games rarely ever use "engines" (in the mod-able sense of the word), moreso in older platforms. The code was often tailored for each specific game, the tools were usually very unfriendly, undocumented and alien to anyone not directly involved with the development and there were lots and lots of hacks and level specific hacks. Data formats were also very tied to the platform.
<br/>
<br/>
- As sad as it may sound, the big boys don't go around throwing source code around that easily. It's a serious business, and it requires serious pratices, and information preservation is one of them.
<br/>
The original N64 game was developed using Nintendo's SDK and dev libraries, which are considered confidential information. They can't just show it to anyone without going through lots of paperwork and lawyer talk due to NDAs. That's why you don't see source code for ancient commercial console games floating around the net.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110009 - HyperHacker - Fri Nov 24, 2006 6:41 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>shadowghost21 wrote:</b></span></td> </tr> <tr> <td class="quote">How bout' this argument... If you give me the source code to develop a port of perfect dark to the nintendo ds, When I am finished you can retain all the source my ported copy, (minus the one I would like to keep) and you can sell it for what ever and pay me no royalties. All I ask in return is a few copys of the game, and my name in the credits!
<br/>
<br/>
Think that might persuade a money hungry company, they dont need to hand out royalties,and all they gota do *if* they produce the game is give me a few copys and put my in the credits. Seems fair. But in the mean time I am trying tomake a new engine, it is going to take a while, as I know nothing of AI, or collisions, but I am adapting NDSws tool set to me needs! Other than that you guys think that when the quake 2 engine is finally ported I could use that? Its a start.
<br/>
<br/>
-shadow</td> </tr></table><span class="postbody">
<br/>
I could see this working if not for a few factors...
<br/>
-How do they know you won't just post the code online, or store it in a poorly-secured system where some hacker will find it?
<br/>
-Can you afford the official DS devkit? AFAIK, no game not made with the official devkit can be officially published.
<br/>
-What about the official N64 devkit? Since that's what they would have used, you'll probably need it to understand what the heck is going on.
<br/>
<br/>
If you were an established game developer who's published a few games, then I could see them at least forwarding your email to the higher-ups instead of just deleting it. But no serious game company is ever going to just email a random person their source code and say "k, send it back when you're done and we'll start making carts", unless perhaps they were about to go bankrupt anyway.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110020 - silent_code - Fri Nov 24, 2006 9:24 am</h4>
    <div class="postbody"><span class="postbody">let's get things straight: even mario on the nes had an engine... engines have nothing to do with mods in the first place. it's just a term to descripe a set of code that manages data, input and output (mostly there are several sub engines like the said plus ai, physics etc.). sometimes it's also refered to as a game's framework, but that term is too general as you can treat e.g. sdl as a framework, but that wouldn't be a *game* engine.
<br/>
the game using a specific engine may be just a side scroller that needs continous background tile loading or it could be a fully blown rts with hundrets of units on screen... every game needs some managing and basic functionality. it really doesn't matter if the engine is reusable, portable or just a pile of crap tied to one title on one platform.
<br/>
there are also people who call direct x an engine... i would disagree with that.
<br/>
<br/>
my 5 ct.
<br/>
<br/>
ps: this topic is pointless, really. simply forget about it and go for something more likely to succeed.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110120 - HyperHacker - Sat Nov 25, 2006 7:38 pm</h4>
    <div class="postbody"><span class="postbody">There's a few meanings for the term "engine" in computing. Most commonly it's the base game without any actual resources (graphics, levels, or sounds). For example if you hack Super Mario World to replace all the Mario graphics with something you made up, and have new levels and sounds, then you're basically making a new game from the SMW engine. Some people also use the term to (incorrectly IMO) refer to genre, IE platforming or racing. That's just game engines though. DirectX and OpenGL are examples of 3D engines; a 3D rendering system (and maybe some general-purpose things like hit detection) with no resources or code telling it what to render. Same idea, different purpose.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110278 - silent_code - Mon Nov 27, 2006 1:57 pm</h4>
    <div class="postbody"><span class="postbody">EDIT:
<br/>
<br/>
i know i'm being an a$$hole here. oh, i'm soooo sorry, HH. you're too much of a software engineer, than i can take! i'm sorry to insult your superior knowledge with my noobdom.
<br/>
<br/>
...
<br/>
<br/>
oh, yes, i'm a total a$$hole with the new black list word "game engine". well, i'll simply continue studying my computer shit and reading books until i know enough to be allowed to use that word again. (i'll ask you then!)
<br/>
<br/>
btw: i don't feel that i have to prove anything to you, but e.g. i've won the "Hasso-Plattner-Institute software technology price" and other prices at the age of 20 (i'd have to look it up, because i don't talk about it very often, you know... and  it's been a while since then) for writing an easy to use 3d web technology... just to name one. (of not many, but at least some).
<br/>
<br/>
man, i hate it when someone's arguing like "MY definition of *whatever* is ..." when there is a clear definition of a term. ?*#$ &amp;%*!</span><span class="gensmall"><br/><br/>Last edited by silent_code on Tue Nov 28, 2006 2:12 pm; edited 5 times in total</span></div>    
</div>
<div class="post">
    <h4>#110356 - HyperHacker - Tue Nov 28, 2006 1:28 am</h4>
    <div class="postbody"><span class="postbody">On points one and two there, it sounds like Wikipedia agrees with me. If you consider game-specific code a resource, then you're left with just the code that you would use to make any game in that genre. Suppose you took all the resources and game-specific code out of an RPG, then you'd be left with routines that do hit detection, load and render a map, calculate stats and damage, etc; things that would be used for any RPG. This sounds quite a bit like what the article describes; the core software of a game.
<br/>
<br/>
This point of view then pretty much wrecks point #3. If you strip down to just the engine then you've removed all the game-specific code.
<br/>
<br/>
#4 and #5 kind of go together. Look up Super Mario World hacks on Google. There's plenty that make very few if any changes to the code, only to the resources (levels, graphics, and sometimes music). They control like SMW, and have the same technical restrictions, but they have quite a different feel to them. It really comes down to how you define a game. I'd say if you take one game and completely change the levels and storyline it becomes another game entirely. Maybe it still looks, sounds and handles like SMW; maybe it's still very similar to SMW, but it's not SMW. That's a bit like saying if the 2007 model of a car is similar to the 2006 model, then they're both the same car.
<br/>
<br/>
In #6 what I mean is people say "engine" where they should be saying "genre". IE people might say Diddy Kong Racing uses the same engine as Mario Kart 64, because they're both racing games, when in reality they share no code aside from the generic N64 libraries used in every N64 game. This seems to be a fairly common mistake.
<br/>
Nobody said a game engine couldn't be genre-specific, only that engine and genre are two different things that people often confuse.
<br/>
<br/>
As far as whether DX/OGL can be considered 3D engines (#7), well, this again depends on point #1 - what exactly is an engine? In my view and (as I mentioned) by the sound of the article you quoted, a game engine is the basic code you use to make a game, without any game-specific code or resources. By that logic a 3D engine is the basic code used to make a 3D application, without any application-specfific code or resources. This just happens to be what DX and OGL are - code/libraries used to make a 3D application.
<br/>
The API knows nothing of <span style="font-style: italic">my</span> data structures, no. It doesn't need to. But it does have its own, usually only accessible through functions like glColor() and glVertex().
<br/>
The canvas and brush analogy is somewhat correct when it comes to OpenGL. OGL provides the tools necessary to draw in 3D and it's up to you to tell it what to draw. How is this different from the idea that a game engine provides the tools necessary to make a game and it's up to you to tell it what will be in the game, how it will play, etc? When it comes to DirectX this argument is completely wrong as DX has a lot more advanced utilities for hit detection, physics, and other things that extend far beyond a simple brush and canvas.
<br/>
You seem convinced that these are only APIs to control the 3D hardware. That may be true in OGL's case but certainly not DX's.
<br/>
<br/>
When we get to point #8 I see you've forgotten the whole "I don't intend to start flaming" idea. I don't see why you find this idea so funny. I pointed out in #7 why 3D engines and game engines are "the same idea with a different purpose", hence why they're both called engines. They're both the code required to perform a general task that various applications might need to do (drawing in 3D or the multiple tasks every game does such as loading levels, hit detection, and handling input), without any of the code or resources specific to one application. Experience? I'm writing a Mario Kart 64 level editor using OpenGL, wrote a generic 2D space shooter game (which I should probably release), and extensively modified Super Mario World and Pok?mon Silver to (guess what) make new games based on their engines. You claim to have won awards for your "3D technology", but fail to provide a link or even spell your gloating correctly; this brings into question just how accurate your statements are.
<br/>
<br/>
There's not much to learn inside the box. You need to think outside it.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110397 - OOPMan - Tue Nov 28, 2006 8:20 am</h4>
    <div class="postbody"><span class="postbody">Incoming thread split detected...<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#110420 - silent_code - Tue Nov 28, 2006 2:10 pm</h4>
    <div class="postbody"><span class="postbody">you (mods) don't need to spit that ****, you're free to erase my posts anyway as i don't have the time for such stupid conversations in the first place. man, i'm dumb trying to help and clarify. i could aswell just pee my pants.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
