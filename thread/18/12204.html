<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>dumpSRAM - possible solution to SC 1.7 QPC brokenness - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > dumpSRAM - possible solution to SC 1.7 QPC brokenness</h2>
<div id="posts">
<div class="post">
    <h4>#115845 - sinclair44 - Fri Jan 19, 2007 3:43 pm</h4>
    <div class="postbody"><span class="postbody">This is my first homebrew program, dumpSRAM. It just writes the contents of the SRAM onto your libfat-supported device. Hopefully, this will help to replace the currently-broken QPC saving method on the firmware 1.7 SuperCards.
<br/>
<br/>
I've only tested this on my SCSD with firmware 1.63; I'll upgrade it to 1.7 later and try that too. Any card supported by libfat dated Dec. 25, 2006 should work; this may even be DLDI compatible, I'm not sure. Use at your own risk.
<br/>
<br/>
The method works similarly to the old QPC method. Put a blank 64k .sav file with the same name as the homebrew program. ALSO create a file dumpSRAM.ini in the root directory of your card with the path to each .sav file you want to use dumpSRAM with, e.g.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">/fungame.sav
<br/>
/snes/snesEmulator.sav</td> </tr></table><span class="postbody">
<br/>
<br/>
Run the game, save to SRAM, whatever as usual. Then, to save to the card, QPC, but instead of going to the saver menu, run dumpSRAM instead. Use L and R to select the proper .sav file from the list in dumpSRAM.ini and then press START to dump it to the card. When it says "Done!" the save is complete.
<br/>
<br/>
-- Link to version 1.0 removed, see below for link to current version --
<br/>
<br/>
The file is in .tar.bz2 format, which is standard for Mac and UNIX. I'm on a Mac; not sure what will work on that for Windows. Sorry. Also, I deleted all the Windows-specific project files in the source code, since I cannot use them. Just run "make".
<br/>
<br/>
Feel free to post with any questions/comments. I'm interested to know if this helps anyone! (Feature requests are welcome too, but I probably won't do anything too difficult.)
<br/>
<br/>
<span style="font-weight: bold">Edit: Current version: <a class="postlink" href="http://www.watzmanassociates.com/josh/programming/downloads/dumpSRAM-1.2.tar.bz2" target="_blank">1.2</a></span><br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"><br/><br/>Last edited by sinclair44 on Sun Feb 11, 2007 2:36 am; edited 3 times in total</span></div>    
</div>
<div class="post">
    <h4>#115854 - josath - Fri Jan 19, 2007 6:32 pm</h4>
    <div class="postbody"><span class="postbody">If you add a pause between reading SRAM and writing to cart, users of any libfat-supported device could use it for example to dump the SRAM from a commercial GBA game, via cart-swapping.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115859 - sinclair44 - Fri Jan 19, 2007 8:24 pm</h4>
    <div class="postbody"><span class="postbody">I'll look into that when I get home tonight, won't be too hard.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115886 - dantheman - Fri Jan 19, 2007 11:16 pm</h4>
    <div class="postbody"><span class="postbody">This is great news, as I too had to downgrade back to 1.63b in order to use QPC saving.  I'm looking forward to using it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115888 - josath - Fri Jan 19, 2007 11:24 pm</h4>
    <div class="postbody"><span class="postbody">does firmware 1.7 do anything useful the previous version doesn't?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115894 - dantheman - Sat Jan 20, 2007 12:10 am</h4>
    <div class="postbody"><span class="postbody">Actually, now that I think about it, not really.  I think it offers greater compatibility for <span style="font-style: italic">Yarrish</span> activities, but aside from that, nothing that would interest us.  However, many new users will upgrade as soon as they get their Supercards (like they are advised to do by many people) and will find that QPC saving doesn't work.  It happened to me, which is why I had to downgrade again.
<br/>
<br/>
Oh, and then there's the fact that users of the Supercard Lite cannot downgrade to 1.63, so if QPC saving is broken for them, they're screwed.  There are even new versions of the Supercard Lite that don't work with most homebrew using libFAT, so I don't even know if dumpSRAM will work for them.  Perhaps if it was modified to use DLDI it would work better, since a new SC Lite DLDI driver was released from Moonlight that reportedly allows for full read/write access on the new devices.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115906 - HyperHacker - Sat Jan 20, 2007 2:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sinclair44 wrote:</b></span></td> </tr> <tr> <td class="quote">The file is in .tar.bz2 format, which is standard for Mac and UNIX. I'm on a Mac; not sure what will work on that for Windows.</td> </tr></table><span class="postbody">
<br/>
7Zip does that nicely.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#115935 - sinclair44 - Sat Jan 20, 2007 1:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sinclair44 wrote:</b></span></td> </tr> <tr> <td class="quote">I'll look into that when I get home tonight, won't be too hard.</td> </tr></table><span class="postbody">
<br/>
<br/>
Bah, was having problems logging in, etc... I'll get to it tonight, I promise. If you want to modify it yourself, just add a while loop waiting on the keypress like the one waiting for START to be pressed, calling PA's vblank inside.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dantheman wrote:</b></span></td> </tr> <tr> <td class="quote">Perhaps if it was modified to use DLDI it would work better, since a new SC Lite DLDI driver was released from Moonlight that reportedly allows for full read/write access on the new devices.</td> </tr></table><span class="postbody">
<br/>
<br/>
As I'm using a recent libfat, I think it automagically supports DLDI; the 1.21 patcher seemed to work properly on the .nds version (didn't like the .sc.nds version):
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote"><span style="font-weight: bold">./dlditool scsd.dldi dumpSRAM.nds</span>
<br/>
Dynamically Linked Disk Interface patch tool v1.21 by Michael Chisholm (Chishm)
<br/>
<br/>
Old driver:          #
<br/>
New driver:          SuperCard (SD Card)
<br/>
<br/>
Position in file:    0xFFFFFFFF
<br/>
Position in memory:  0x01CC0000
<br/>
Patch base address:  0xBF800000
<br/>
Relocation offset:   0x424C0000
<br/>
<br/>
Patched successfully</td> </tr></table><span class="postbody">
<br/>
<br/>
Does that mean I support DLDI... could someone with a broken device test please?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">7Zip does that nicely.</td> </tr></table><span class="postbody">
<br/>
<br/>
Good to know, thanks!<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116014 - sinclair44 - Sun Jan 21, 2007 3:50 am</h4>
    <div class="postbody"><span class="postbody"><span style="font-weight: bold">Edit: link to version 1.1 removed; see first post for current version</span>
<br/>
<br/>
Hold SELECT before you press START and it will pause each step of the way. This might be useful, as josath suggested, for dumping the SRAM of an official GBA cart by swapping it in and out with your flashcart/SuperCard. I've not tried that, it could seriously hurt stuff, I don't even know how libfat will handle having its filesystem pulled out from under it and then put back. Good luck, try at your own risk. :)
<br/>
<br/>
No other major changes in this release.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"><br/><br/>Last edited by sinclair44 on Sun Feb 11, 2007 2:37 am; edited 2 times in total</span></div>    
</div>
<div class="post">
    <h4>#116031 - dantheman - Sun Jan 21, 2007 6:17 am</h4>
    <div class="postbody"><span class="postbody">Just for kicks, I tried it on Metroid Fusion.  It's a game that uses SRAM, and I've already got the save file backed up to my PC via FlashManager, so I thought that if it didn't work I could always replace the savefile.
<br/>
<br/>
I created an asdf.sav file on the root of my card and edited the .ini file accordingly before starting dumpSRAM.  I pressed R to get to asdf.sav, then held Select before pressing Start.  I ejected the Supercard, popped in Metroid Fusion, pressed Start again so it read the SRAM, ejected Metroid Fusion, put in the Supercard, and... the DS rebooted due to FlashMe.  =/
<br/>
<br/>
I don't know if all cards do this, but for right now using a slot-2 Supercard on a flashed DS will not let you backup GBA saves from official carts.  
<br/>
<br/>
Hopefully an unflashed DS will not have this issue.  On a positive note, the program works fine for me when testing with SnezziDS.
<br/>
<br/>
EDIT:  forgot to mention that the Metroid Fusion save is fine.  Nothing happened to it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116053 - sinclair44 - Sun Jan 21, 2007 1:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dantheman wrote:</b></span></td> </tr> <tr> <td class="quote">put in the Supercard, and... the DS rebooted due to FlashMe.  =/
<br/>
<br/>
I don't know if all cards do this, but for right now using a slot-2 Supercard on a flashed DS will not let you backup GBA saves from official carts.  
<br/>
<br/>
Hopefully an unflashed DS will not have this issue.  On a positive note, the program works fine for me when testing with SnezziDS.
<br/>
<br/>
EDIT:  forgot to mention that the Metroid Fusion save is fine.  Nothing happened to it.</td> </tr></table><span class="postbody">
<br/>
<br/>
Interesting. Did it reboot the second you put the new card in, or after you pressed START to continue? I wasn't aware of FlashMe or SuperCards having such a functionality, and there certainly isn't anything to do that in dumpSRAM (well, at least not intentionally).
<br/>
<br/>
I'm glad though that it's working for you for snezziDS. That being broken for firmware 1.7 is actually what gave me the initial incentive to write this.
<br/>
<br/>
Thanks for being a guinea pig :)<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116075 - dantheman - Sun Jan 21, 2007 6:58 pm</h4>
    <div class="postbody"><span class="postbody">No, it's FlashMe itself, not your program.  Whenever I take out my Supercard and re-insert it, the DS reboots immediately.  I first discovered this when using HyperHacker's program, the one that adds a border around the screen before starting GBA mode.  Since it apparently wouldn't boot the Supercard in GBA mode, I thought it might work if I ejected and re-inserted it, which caused it to reboot.
<br/>
<br/>
I completely forgot about it until I was in the middle of testing dumpSRAM, by which point I decided to try it anyway just in case.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116098 - HyperHacker - Sun Jan 21, 2007 11:15 pm</h4>
    <div class="postbody"><span class="postbody">Hm, this doesn't happen with my GBAMP. With my program did you select Unmount Memory Card first? Or does it even worth with Supercard? I know it's pretty old and could stand to be updated, but silly me didn't think to keep the original source around before adding a bunch of things to it that aren't yet finished, so it will take some time.
<br/>
<br/>
[edit] Kind of a waste of post 1337 :(<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116101 - Firon - Sun Jan 21, 2007 11:27 pm</h4>
    <div class="postbody"><span class="postbody">I've never had that happen with my M3. I've accidentally removed and re-inserted the cart several times while using Moonshell and it's never rebooted (in fact, Moonshell doesn't even hang until you try to open a file or change folders). My Lite is FlashMe'd.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116103 - tepples - Sun Jan 21, 2007 11:56 pm</h4>
    <div class="postbody"><span class="postbody">The difference might have something to do with how the DS firmware, the SuperCard menu, and the program itself set up the Game Pak IRQ.<br/>_________________<br/>Driven from Tilwick by ice storms, couldn't fit in in Flower Bud...
<br/>
<br/>
Nintendo DS: With two ARMs, who needs legs?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116109 - dantheman - Mon Jan 22, 2007 12:43 am</h4>
    <div class="postbody"><span class="postbody">HyperHacker, I don't even see an "Unmount Memory Card" option at all.  There's only start game, re-read cartridge, border, swap screens, backlight, sound amp, return to menu, and shut down. 
<br/>
<br/>
I don't think it has to do with the pack being unmounted though.  I pulled the Supercard out when the DS was off, started the Opera browser, and pushed the SC back in, prompting the reboot again.  Same thing happens in any of the DS's built-in functions like Pictochat.
<br/>
<br/>
I think it's like Tepples said, a combination of several things interacting in certain ways.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116119 - HyperHacker - Mon Jan 22, 2007 2:27 am</h4>
    <div class="postbody"><span class="postbody">Ah yes, IIRC that option disappears when the card isn't mounted. That's certainly interesting though.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116149 - SukkoPera - Mon Jan 22, 2007 4:28 pm</h4>
    <div class="postbody"><span class="postbody">I've tested the eject/reinsert thing while running dumpSRAM, Moonshell, ReinMoon and my own MCTool, and the result was always the same: DS resetting when my SCL is pushed back in.
<br/>
<br/>
Actually, the same things even happens at the SC menu...
<br/>
<br/>
I've also tried bypassing FlashMe's autoboot SC feature holding select while powering up the DS: no change.
<br/>
<br/>
What about the opposite function: writing a file back to the cart's SRAM? That won't require the reinsertion of the SC, so it should work, if it's feasible.
<br/>
<br/>
Oh, and one more silly idea: what about copying the slot-2 SRAM to the slot-1 SRAM, using Rein's sources? Then, after rebooting we could use Rein to dump the slot-1 SRAM to file. Of course that would corrupt previous data in the slot-1 SRAM, but it can be easily backed up with Rein, too.
<br/>
<br/>
And what about launching dumpSRAM from a slot-1 flashcart?<br/>_________________<br/>Nintendo DS Lite (White) + Supercard Lite + R4 + Sandisk 1 GB MicroSD
<br/>
Sony PSP + Firmware 3.03 OE-A2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116172 - sinclair44 - Mon Jan 22, 2007 10:08 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>SukkoPera wrote:</b></span></td> </tr> <tr> <td class="quote">What about the opposite function: writing a file back to the cart's SRAM? That won't require the reinsertion of the SC, so it should work, if it's feasible.
<br/>
<br/>
Oh, and one more silly idea: what about copying the slot-2 SRAM to the slot-1 SRAM, using Rein's sources? Then, after rebooting we could use Rein to dump the slot-1 SRAM to file. Of course that would corrupt previous data in the slot-1 SRAM, but it can be easily backed up with Rein, too.
<br/>
<br/>
And what about launching dumpSRAM from a slot-1 flashcart?</td> </tr></table><span class="postbody">
<br/>
<br/>
Anything extra to do with Slot-1 is out of the question. I think libfat already supports it, so it will probably already read the SRAM out of Slot-2 and write it to a Slot-1 card, but anything other than that is way out of my area of expertise right now.
<br/>
<br/>
As for writing back to SRAM: that isn't hard, just a matter of changing around a handful of stuff. I think, at least - never actually tried. I may give it a look when I get some free time, but that could be a while. You're welcome to make the changes yourself (or make a start on them) and PM them to me; the source is included in the download.
<br/>
<br/>
That goes for any change - feel free to make it yourself. I'd appreciate it if you wouldn't start releasing your own versions though, to reduce users' confusion; please PM the changes to me or post the source in this thread.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116208 - HyperHacker - Tue Jan 23, 2007 4:44 am</h4>
    <div class="postbody"><span class="postbody">If you have a GBA Gameshark, you might try plugging your SC into that (with the code switch off so it doesn't break anything) and see if it reboots when removing it from the GS.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#116740 - sinclair44 - Mon Jan 29, 2007 1:09 am</h4>
    <div class="postbody"><span class="postbody">I've refactored the code a lot (i.e. split stuff into functions with arguments, return values, and local variables instead of one monolithic main() and global variables). This will make it much easier to implement a load function as well as the current save function.
<br/>
<br/>
This still may take some time (very much dependent on my schoolwork and mood), but keep your eyes open.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117168 - mr_jrt - Fri Feb 02, 2007 1:18 am</h4>
    <div class="postbody"><span class="postbody">I just tried your utility with my v1 DS with the latest flashme, a SCSD, and KuruKuru Kururin (save data I'm not fussed to lose :P), and Metroid Fusion ( so I can see if its different between carts)
<br/>
<br/>
Removing the packs was no problem at all - I've never has a single reboot due to cart removal, maybe I'm just lucky I guess. Anyway, I'm not getting valid data back. I get the same data each time (both both games), suggesting that it is writing ok (the files were zeroed out beforehand), but probably just random data. I can supply the .sav if it'd help.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118020 - Tomy Sakazaki - Fri Feb 09, 2007 3:43 am</h4>
    <div class="postbody"><span class="postbody">I tried the utility, only the dumpsram.sc.nds was patcheable by DLDI patcher for SuperCard Lite, but before the patching, it doesn't recognize any compatible signature on it. But this one freezes on my DS.
<br/>
But the only version that runs on my DS + SC Lite is the dumpsram.nds, and it seems that the dumpsram was unable to read my dumpsram.ini
<br/>
Also I couldn't find the patching options in supercard patcher to enable the save in SRAM for Final Fantasy VI without marking it to restart and it is the point that makes all the slowdowns.
<br/>
What are the correct options into supercard patcher2.58?
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
/gba/ffvi.sav
<br/>
/gba/sbattle.sav
<br/>
/gba/rtengoku.sav
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118030 - Doom5 - Fri Feb 09, 2007 5:36 am</h4>
    <div class="postbody"><span class="postbody">Dumpsram is not DLDI compatible unless you recompile it with a newer version of devkitARM.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118101 - Tomy Sakazaki - Sat Feb 10, 2007 4:44 am</h4>
    <div class="postbody"><span class="postbody">Well, waiting for a version compatible with supercard lite.
<br/>
The idea is great! Hope that it will get updated soon.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118102 - sinclair44 - Sat Feb 10, 2007 5:08 am</h4>
    <div class="postbody"><span class="postbody">Writing back to SRAM is still not complete (have been busy with other stuff... haven't even started on it). I'll try and get devkitARM r20 up tomorrow and recompile a new version; hopefully that will enable DLDI properly.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118106 - dantheman - Sat Feb 10, 2007 5:46 am</h4>
    <div class="postbody"><span class="postbody">Just a quick update:  I managed to reinsert the Supercard without rebooting by pressing the right side in first (probably not good for the contacts) and going really slowly.  It wrote the save file and all, but like mr_jrt I found that the output file is not valid.  Ah well, it was worth a shot.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118218 - sinclair44 - Sun Feb 11, 2007 2:40 am</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://www.watzmanassociates.com/josh/programming/downloads/dumpSRAM-1.2.tar.bz2" target="_blank">Version 1.2 is available</a>
<br/>
<br/>
No major changes since last version. The source has been greatly cleaned up, but that has nothing to do with the actual functionality. It was recompiled with the new PAlib and devkitARM r20, so hopefully it will be DLDI compatible now.
<br/>
<br/>
This version has not received extensive testing. (Not that any of them have, but all I did for 1.2 testing was: I recompiled, did a dump, and checked the md5 against the known-good dump.)
<br/>
<br/>
Enjoy.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118243 - Doom5 - Sun Feb 11, 2007 2:06 pm</h4>
    <div class="postbody"><span class="postbody">Keep up the good work! :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118248 - Tomy Sakazaki - Sun Feb 11, 2007 3:00 pm</h4>
    <div class="postbody"><span class="postbody">Tried with 1.2 onto a SuperCard Lite.
<br/>
This time it shows the ini perfectly.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">/gs2.sav</td> </tr></table><span class="postbody">
<br/>
<br/>
But anyway, I couldn't use QPC, since apparently there's no way to save something to SC Lite SRAM without activating the "enable restart" in the patcher, and it's the source of slowdowns with gba games in supercards.
<br/>
:(
<br/>
Tried with Enable Save and Enable Saver Patch, but no success to send the save to SRAM of supercard lite.
<br/>
EDIT: Tricked by not seeing something like GYAK2 (in card)! It seems to work! I'll try with Final Fantasy VI and report later.
<br/>
EDIT2: Tested with FF VI too, it works, however the game seems to be a bit slower on SuperCard, the intro has a little desync.
<br/>
<br/>
In order to use I've patched dumpSRAM.sc.nds with the DLDI patcher for SuperCard Lite.
<br/>
<br/>
Thanks sinclair44, it is a great application :D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118254 - Doom5 - Sun Feb 11, 2007 4:32 pm</h4>
    <div class="postbody"><span class="postbody">Tomy: So is it possible to do QPC without the "Enable Restart" patch?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118259 - sinclair44 - Sun Feb 11, 2007 5:40 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Doom5 wrote:</b></span></td> </tr> <tr> <td class="quote">Tomy: So is it possible to do QPC without the "Enable Restart" patch?</td> </tr></table><span class="postbody">
<br/>
<br/>
It should be. Just don't patch at all and it will save to SRAM by default. QPC and use dumpSRAM to write that to the card. I've not tried this though, I've only tried with NDS games.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118269 - MasterMan - Sun Feb 11, 2007 7:32 pm</h4>
    <div class="postbody"><span class="postbody">Flashed DS phat, SCCF 1.7 FW, 1GB Sandisk CF.
<br/>
Patched <span style="font-weight: bold">2689 - Final Fantasy Advance VI (US).gba</span> with "Enable saver patch" only and moved it in CF's root. Alongside the <span style="font-weight: bold">2689 - Final Fantasy Advance VI (US).sav</span> i have using in Visualboy Advance (saved in South Figaro).
<br/>
Copyed %ProgramFiles%\SC\save.sav to \dumpSRAM.sav. Wrote \dumpSRAM.ini with <span style="font-weight: bold">/2689 - Final Fantasy Advance VI (US).sav</span> and put \dumpSRAM.sc.nds in card, everything on the root.
<br/>
<br/>
In game, i go to a save point and save the game normaly. Then i turn the DS off and on realy fast. Boot dumpSRAM.sc.nds, the lower screen shows "/2689 - Final Fantasy Advance VI (US).sav", i press START, it says done.
<br/>
<br/>
When i try to resume playing, my save is lost, there's only "new game" option.
<br/>
DumpSRAM corrupts my save :(
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">&gt;fc /b J:\2689 - Final Fantasy VI Advance (US).sav e E:\EMULADORES\GBA\SAV\2689 - FINAL FANTASY VI ADVANCE (US).SAV
<br/>
00000002: AA 33
<br/>
00000003: 55 3E
<br/>
00000004: 00 4B
<br/>
00000005: 00 4B
<br/>
00000006: 00 3A
<br/>
...
<br/>
all the way down
<br/>
...
<br/>
00002FFE: 00 6C
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118275 - tepples - Sun Feb 11, 2007 8:05 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MasterMan wrote:</b></span></td> </tr> <tr> <td class="quote">Flashed DS phat, SCCF 1.7 FW, 1GB Sandisk CF.
<br/>
Patched <span style="font-weight: bold">2689 - Final Fantasy Advance VI (US).gba</span> with "Enable saver patch" only and moved it in CF's root.</td> </tr></table><span class="postbody">
<br/>
Why would you put a commercial .gba program on a SuperCard?
<br/>
<br/>
<span style="font-size: 4px; line-height: normal">pie rut?</span><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118281 - sinclair44 - Sun Feb 11, 2007 8:37 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MasterMan wrote:</b></span></td> </tr> <tr> <td class="quote">...with "Enable saver patch" only...</td> </tr></table><span class="postbody">
<br/>
<br/>
Try it without the saver patch. dumpSRAM basically replaces that functionality anyways. I'm not sure how it works; if the SC firmware holds the SRAM in memory before writing it to the card, then dumpSRAM will read the SRAM (which would be junk) and write that.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118288 - MasterMan - Sun Feb 11, 2007 10:11 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>sinclair44 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MasterMan wrote:</b></span></td> </tr> <tr> <td class="quote">...with "Enable saver patch" only...</td> </tr></table><span class="postbody">
<br/>
<br/>
Try it without the saver patch. dumpSRAM basically replaces that functionality anyways. I'm not sure how it works; if the SC firmware holds the SRAM in memory before writing it to the card, then dumpSRAM will read the SRAM (which would be junk) and write that.</span></td> </tr></table><span class="postbody">
<br/>
Tried again with no options checked in patcher, still no luck.
<br/>
<br/>
Thanks for your effort anyways.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118323 - Tomy Sakazaki - Mon Feb 12, 2007 3:50 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Doom5 wrote:</b></span></td> </tr> <tr> <td class="quote">Tomy: So is it possible to do QPC without the "Enable Restart" patch?</td> </tr></table><span class="postbody">
<br/>
The idea in doing QPC is to avoid the "Enable Restart" patch. But lazy guys that run games without slowdowns with that option turned on use the"enable restart" to make fakes QPCs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118508 - MasterMan - Wed Feb 14, 2007 12:36 am</h4>
    <div class="postbody"><span class="postbody">Any news?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118510 - sinclair44 - Wed Feb 14, 2007 12:47 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>MasterMan wrote:</b></span></td> </tr> <tr> <td class="quote">Any news?</td> </tr></table><span class="postbody">
<br/>
<br/>
I've got no clue why it isn't working; it should. But dumpSRAM was built for an intended for usage for NDS games that save to the SRAM, not GBA games. It seems to work for that purpose, and since you can use the SuperCard patcher anyways, I'm not too worried about it.
<br/>
<br/>
Feel free to investigate yourself (or anyone, feel free) and send me info that I can work from, or ever better, a patch.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118523 - Tomy Sakazaki - Wed Feb 14, 2007 2:05 am</h4>
    <div class="postbody"><span class="postbody">What NDS games or homebrews needs a QPC to save the content of SRAM?
<br/>
I thought that dumpSRAM was created to use with GBA games. And try to run Final Fantasy VI or V with the patching needed to save them using L+R+A+Select in firmware 1.7 on (enable restart, enable save, enable saver patch) and without (possible with dumpSRAM), you will see that dumpSRAM will be most used to GBA games.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118526 - Doom5 - Wed Feb 14, 2007 2:30 am</h4>
    <div class="postbody"><span class="postbody">Tepples doesn't like any posts that discuss... you know...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118534 - dantheman - Wed Feb 14, 2007 2:57 am</h4>
    <div class="postbody"><span class="postbody">SnezziDS saves to SRAM, so QPC saving is necessary.  I've seen several people attest that DumpSRAM works on GBA stuff too, so I'm not sure what the issue is.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118542 - tepples - Wed Feb 14, 2007 4:42 am</h4>
    <div class="postbody"><span class="postbody">But is there any Super NES homebrew that needs to save?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118548 - dantheman - Wed Feb 14, 2007 5:09 am</h4>
    <div class="postbody"><span class="postbody">Probably not.  Even still, the utility can still be used for non-yarrish activities, since it theoretically should work with GBA saves as well.  GBA homebrew uses the SRAM extensively, right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118594 - sinclair44 - Wed Feb 14, 2007 2:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dantheman wrote:</b></span></td> </tr> <tr> <td class="quote">Probably not. Even still, the utility can still be used for non-yarrish activities, since it theoretically should work with GBA saves as well. GBA homebrew uses the SRAM extensively, right?</td> </tr></table><span class="postbody">
<br/>
<br/>
Actually, the catylist for me to write dumpSRAM was <a class="postlink" href="http://sivullinen.fi/nds/projects.php" target="_blank">Whee DS</a>, which can only save to SRAM.
<br/>
<br/>
But yes, GBA homebrew uses SRAM as its only method of saving. I've not tried it, but there's no reason it shouldn't work.<br/>_________________<br/>Inter arma enim silent leges</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118633 - dantheman - Thu Feb 15, 2007 12:49 am</h4>
    <div class="postbody"><span class="postbody">I've heard from one user on SCdev that QPC saving actually works on affected Supercards with 1.7 when rebooting into GBA mode to use the Saver tab, not DS mode.  Obviously, this wouldn't help the Rumble series, but it's an interesting idea nonetheless.  Anyone care to test it and see if this is accurate?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118693 - MasterMan - Thu Feb 15, 2007 4:41 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dantheman wrote:</b></span></td> </tr> <tr> <td class="quote">I've heard from one user on SCdev that QPC saving actually works on affected Supercards with 1.7 when rebooting into GBA mode to use the Saver tab, not DS mode.  Obviously, this wouldn't help the Rumble series, but it's an interesting idea nonetheless.  Anyone care to test it and see if this is accurate?</td> </tr></table><span class="postbody">
<br/>
Hell yeah, it works.
<br/>
Note anything shows "in cart", but go to saver tab and save it anyways. Only when booting in GBA mode.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118718 - Tomy Sakazaki - Fri Feb 16, 2007 2:12 am</h4>
    <div class="postbody"><span class="postbody">Nobody tried using the gba mode to save the SRAM contents or who tried it before doesn't spread the word?
<br/>
Will it work with Whee DS and other DS homebrews that use SRAM?
<br/>
To GBA programs, not only yarrish activities, it works flawless.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118833 - dantheman - Sat Feb 17, 2007 6:06 am</h4>
    <div class="postbody"><span class="postbody">This is rather off-topic, but I found out something interesting.  Back on the front page, I mentioned that I first discovered the whole "Supercard resets DS upon reinsertion" thing when testing Hyperhacker's program to launch the GBA cartridge with a border.  I stated that since when launching the Supercard itself from his program, the Nintendo logo was corrupted, I thought that ejecting and re-inserting the Supercard might make it work.  
<br/>
<br/>
Like I stated before, it's possible to re-insert the Supercard if you push the right side in first and go slowly.  I just now tested this method with his program and found to my amazement that I was right.  Nothing I do after first launching his program will work, but after I eject and re-insert the Supercard, it launches fine.  How interesting.  
<br/>
<br/>
But back on-topic, it's good to hear that QPC saving does actually work in 1.7 through GBA mode.  Granted, SC Rumble users are still out of luck, but it's at least a step in the right direction.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118834 - tepples - Sat Feb 17, 2007 6:12 am</h4>
    <div class="postbody"><span class="postbody">Does the reset upon insertion still happen if you disable the Game Pak IRQ?<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#118910 - HyperHacker - Sun Feb 18, 2007 5:22 am</h4>
    <div class="postbody"><span class="postbody">Gameshark Advance has a similar problem, which was actually the inspiration to make that program. It seems the DS firmware does some dummy reads from the GBA slot, which triggers the GSA to switch from pass-through mode (in which cartridge ROM is readable) to normal mode (in which GSA ROM is readable), and since the GSA ROM has no logo, it won't launch. I figured I'd write a program specifically to launch the GSA by switching it back into pass-through mode, but I later realized you could simply pull it out and back in. The firmware will freeze when you do this (remove or insert anything in either slot), but homebrew doesn't seem to; I suspect they implemented this on purpose.
<br/>
<br/>
I'd guess the Supercard does something similar when launching an NDS app, so trying to boot it in GBA mode from there does no good. Reinserting it resets the card. My program doesn't use the Game Pak IRQ, so tepples may be on to something there.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
