<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Background Mode 0 2D - Alpha Blending Tiles - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Background Mode 0 2D - Alpha Blending Tiles</h2>
<div id="posts">
<div class="post">
    <h4>#168476 - renatobs - Thu Apr 30, 2009 2:49 am</h4>
    <div class="postbody"><span class="postbody">Hi! I?d like to know if have some way to do fade and alpha blending for each tile in background mode 5 ?? I?d like to change the brightness of some tiles, but I don?t know how... I need to do a effect on the background similar the used in the game "shining force" ( sega genesis ) that limite the zone you can move with a character. I already did it, but with another background, using a tile of 1 color and change the blend of the background. But in the future I?ll need of this background tha now I?m using to do only "zone blending".</span><span class="gensmall"><br/><br/>Last edited by renatobs on Fri May 01, 2009 1:52 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#168479 - DiscoStew - Thu Apr 30, 2009 4:13 am</h4>
    <div class="postbody"><span class="postbody">How about having alternate "dimmed" palette entries? I'm pretty sure that's how Shining Force did the effect.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168493 - renatobs - Fri May 01, 2009 1:39 am</h4>
    <div class="postbody"><span class="postbody">I?m not sure about it !
<br/>
I guess that it?s something totaly diferent. How is possible change the color "only" of some tiles in the background ? There?s no special tile attribute to do this ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168494 - DiscoStew - Fri May 01, 2009 2:15 am</h4>
    <div class="postbody"><span class="postbody">I haven't touched anything involving the DS's ability to deal with backgrounds, but I'm pretty sure that with the exclusion of extended backgrounds, the format is pretty much the same as with the GBA.
<br/>
<br/>
A Text background under the 4-bit color palette mode is capable of producing this effect, because each tile has a 4-bit entry in it that decides what palette out of 16 possible palettes it can use. With that, you can alter that attribute to use a palette that is designed to be a "dimmed" version of the regular palette that the tile had used. Say if your background uses 8 4-bit (16 color) palettes, you can duplicate those 8 to fill in the other half of the possibly usable palettes, but dim the colors for each. Then, when you can determine if a tile is to have this particular effect, you just change the palette index to the correct one.
<br/>
<br/>
If you are not using the 4-bit color mode, or using an affine background, you won't be able to do this. Having a Text BG under 256-colors does not use the palette attribute, and the Affine BGs are 8-bit entries for just tiles alone with no flip/mirror and palette attributes. I'm not sure what the extended BGs are capable of, so someone else can give information pertaining to them.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168496 - headspin - Fri May 01, 2009 6:12 am</h4>
    <div class="postbody"><span class="postbody">Liran's tute on extended palettes
<br/>
<br/>
<a href="http://www.liranuna.com/nds-2d-tuts/lesson-5/" target="_blank">http://www.liranuna.com/nds-2d-tuts/lesson-5/</a><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168506 - renatobs - Sat May 02, 2009 12:19 am</h4>
    <div class="postbody"><span class="postbody">OK. I thanks the answers, but what I want to do is control each severally tile !!! I didn?t understand if I can do it with "extended palette '... how could I change the palette for one tile only ? Maybe if someone here could see a video ( youtube ) of battle in Shining Force, will understand.  The effect is similar a "fade in/out", from white to black and vice-versa, but only about some tiles to determinated the area you can walk. I already did it, but using one background, with many tiles, 4 x 4 tiles ( 32 x 32 pixels ), side by side, and doing blending in this background. The problem is that I?m spending one backgroung to do this. Probably,  I?ll need this background in the future. In the remake "Shining Force" to GBA, THQ did the same I?m doing now, they used a background, but I need change this.
<br/>
Thanks.
<br/>
<br/>
PS.: sorry for my english and sorry again if you?re telling me how to do what I need but maybe I?m not understanding...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168509 - TwentySeven - Sat May 02, 2009 1:12 am</h4>
    <div class="postbody"><span class="postbody">Read this:
<br/>
<br/>
<a href="http://dev-scene.com/NDS/Tutorials_Day_4" target="_blank">http://dev-scene.com/NDS/Tutorials_Day_4</a>
<br/>
<br/>
Especially take note of the part titled "Map Entries"
<br/>
<br/>
When you use a extended BG, you use 16 bits to define each map entry.
<br/>
<br/>
The uppper X bits are used to define which palette you use - those palettes need to be set up and assigned a BG though.  Search for using extended palettes.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168510 - headspin - Sat May 02, 2009 1:14 am</h4>
    <div class="postbody"><span class="postbody">You set the palette number in the map data (bits 12-15)
<br/>
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#lcdvrambgscreendataformatbgmap" target="_blank">http://nocash.emubase.de/gbatek.htm#lcdvrambgscreendataformatbgmap</a><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168515 - DiscoStew - Sat May 02, 2009 4:27 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>renatobs wrote:</b></span></td> </tr> <tr> <td class="quote">OK. I thanks the answers, but what I want to do is control each severally tile !!! I didn?t understand if I can do it with "extended palette '... how could I change the palette for one tile only ? Maybe if someone here could see a video ( youtube ) of battle in Shining Force, will understand.  The effect is similar a "fade in/out", from white to black and vice-versa, but only about some tiles to determinated the area you can walk. I already did it, but using one background, with many tiles, 4 x 4 tiles ( 32 x 32 pixels ), side by side, and doing blending in this background. The problem is that I?m spending one backgroung to do this. Probably,  I?ll need this background in the future. In the remake "Shining Force" to GBA, THQ did the same I?m doing now, they used a background, but I need change this.
<br/>
Thanks.
<br/>
<br/>
PS.: sorry for my english and sorry again if you?re telling me how to do what I need but maybe I?m not understanding...</td> </tr></table><span class="postbody">
<br/>
<br/>
Kind of like a "glowing" effect? It's simple once you've got the background set up to work with entries per tile so you can assign a palette to each tile. Once you get that working, you can then alter the palette itself to whatever effect you want, "glowing" included.<br/>_________________<br/><span style="font-weight: bold">DS</span> - It's all about <span style="font-weight: bold">D</span>isco<span style="font-weight: bold">S</span>tew</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168532 - renatobs - Sat May 02, 2009 11:42 pm</h4>
    <div class="postbody"><span class="postbody">Ooohhh... now I?m getting the ideia... I didn?t know about this... thanks... I?ll study about this and see what I can to do...
<br/>
But, if  it doesn?t disturb, could some one here give a code example ? My current background and sub_backgroun are in MODE_0_2D, each with 4 BG?s, 256 colors. I used pcx2gba to make a C arrays ( palette and data, 16bit ) of the tiles and I?m using TILE STUDIO to do the maps. This give me a 16bit map array. For now it?s everything ok. How can I enable extended paletes and control this in the tiles ? Could both of screens ( main and sub ) use the extended palette ? 
<br/>
As more ideias you can put here, more soon I?ll understand and continue working hard with the game !!!
<br/>
<br/>
Thanks so much for while !!!!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168533 - headspin - Sun May 03, 2009 5:11 am</h4>
    <div class="postbody"><span class="postbody">I already gave you links that explain how to use extended palettes and the bits to set in a map entry for palette number.
<br/>
<br/>
<a href="http://www.liranuna.com/nds-2d-tuts/lesson-5/" target="_blank">http://www.liranuna.com/nds-2d-tuts/lesson-5/</a>
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#lcdvrambgscreendataformatbgmap" target="_blank">http://nocash.emubase.de/gbatek.htm#lcdvrambgscreendataformatbgmap</a>
<br/>
<br/>
For converting graphics why are you using pcx2gba and not <a class="postlink" href="http://www.coranac.com/category/proj/grit/" target="_blank">grit</a>? Have you looked at the examples included with <a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro</a>?<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#168537 - sverx - Mon May 04, 2009 11:59 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>renatobs wrote:</b></span></td> </tr> <tr> <td class="quote">How can I enable extended paletes and control this in the tiles ? Could both of screens ( main and sub ) use the extended palette ? </td> </tr></table><span class="postbody">
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">videoSetMode (MODE_0_2D | DISPLAY_BG0_ACTIVE | DISPLAY_BG1_ACTIVE | DISPLAY_BG2_ACTIVE | DISPLAY_BG3_ACTIVE | DISPLAY_BG_EXT_PALETTE );</td> </tr></table><span class="postbody">
<br/>
<br/>
... or videoSetModeSub() for subengine.
<br/>
<br/>
Then when assigning a tile in the map just remember to specify a palette, like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">final_tile = (tile &amp; 0x3FF) | (palette &lt;&lt; 12);</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
<br/>
?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
