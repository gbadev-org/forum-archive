<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Multiplayer? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Multiplayer?</h2>
<div id="posts">
<div class="post">
    <h4>#165655 - afireohno - Fri Jan 02, 2009 3:56 am</h4>
    <div class="postbody"><span class="postbody">Is it possible to make a multiplayer homebrew game for the ds? 
<br/>
From what I've read WMB won't work. Is this correct? If so, is there other ways to implement multiplayer? If anyone could point me in the right direction I would appreciate it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165657 - nanou - Fri Jan 02, 2009 4:51 am</h4>
    <div class="postbody"><span class="postbody">There's liblobby and dswifi.<br/>_________________<br/>- nanou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165659 - Lynx - Fri Jan 02, 2009 5:05 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">From what I've read WMB won't work.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, the receiving DS would need to have FlashMe installed to bypass the RSA checks of the downloaded game/app.<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165661 - chatterbug89 - Fri Jan 02, 2009 7:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">From what I've read WMB won't work.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, the receiving DS would need to have FlashMe installed to bypass the RSA checks of the downloaded game/app.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Well, if you had the game completely loaded into RAM, couldn't they load it on their DS, remove the cartridge, then load on the other person's DS?  Guess it's not the most elegant "solution" though....</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165665 - afireohno - Fri Jan 02, 2009 11:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>chatterbug89 wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Lynx wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">From what I've read WMB won't work.</td> </tr></table><span class="postbody">
<br/>
<br/>
Well, the receiving DS would need to have FlashMe installed to bypass the RSA checks of the downloaded game/app.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Well, if you had the game completely loaded into RAM, couldn't they load it on their DS, remove the cartridge, then load on the other person's DS?  Guess it's not the most elegant "solution" though....</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I have access to multiple ds's with slot 1's, so transferring the actual executable isn't necessary.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165671 - afireohno - Fri Jan 02, 2009 5:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nanou wrote:</b></span></td> </tr> <tr> <td class="quote">There's liblobby and dswifi.</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm having trouble finding information any info on either of these (particularly liblobby). Could someone link me in the right direction.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165672 - nanou - Fri Jan 02, 2009 7:44 pm</h4>
    <div class="postbody"><span class="postbody">IIRC liblobby is supposedly buggy. I don't really have any good info on it, maybe someone else can help you there.
<br/>
<br/>
I haven't really used either of them TBH, but dswifi is available at <a class="postlink" href="http://www.devkitpro.org/devkitarm/dswifi-036/" target="_blank">http://www.devkitpro.org/devkitarm/dswifi-036/</a>. I believe it's documented doxygen style but I can't remember the last time I looked at it. There's also plenty of threads here that explain its use.<br/>_________________<br/>- nanou</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165673 - afireohno - Fri Jan 02, 2009 9:38 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>nanou wrote:</b></span></td> </tr> <tr> <td class="quote">IIRC liblobby is supposedly buggy. I don't really have any good info on it, maybe someone else can help you there.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for the help. I was actually able to find some info on liblobby.
<br/>
<a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=14198" target="_blank">http://forum.gbadev.org/viewtopic.php?t=14198</a>
<br/>
There was just a lot of info to sift through. I'm still pretty confused on how to get it working so if anyone has any other advice I would appreciate it.
<br/>
Thanks again
<br/>
<br/>
EDIT: So I've made some progress, but I'm getting some errors with the examples. I suspect that this is due to them being created prior to the recent libnds release, although if someone could confirm this I would be grateful. 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">"make" -C arm7
<br/>
make[1]: Entering directory `/c/devkitPro/liblobby/roomExampleCopy/arm7'
<br/>
template.c
<br/>
arm-eabi-gcc -MMD -MP -MF /c/devkitPro/liblobby/roomExampleCopy/arm7/build/template.d -g -Wall -O2 -mcpu=arm7tdmi -mtune=arm7tdmi -fomit-frame-pointer -ffast-math -mthumb-interwork -I/c/devkitPro/liblobby/roomExampleCopy/arm7/include -I/c/devkitPro/liblobby/roomExampleCopy/arm7/build -I/c/devkitPro/libnds/include -I/c/devkitPro/liblobby/roomExampleCopy/arm7/build -DARM7 -c /c/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c -o template.o
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c: In function 'startSound':
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:13: error: 'SOUND_8BIT' undeclared (first use in this function)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:13: error: (Each undeclared identifier is reported only once
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:13: error: for each function it appears in.)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:13: error: 'SOUND_16BIT' undeclared (first use in this function)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c: In function 'VcountHandler':
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:41: error: too few arguments to function 'touchReadXY'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:43: error: 'touchPosition' has no member named 'x'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:43: error: 'touchPosition' has no member named 'y'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:47: error: 'touchPosition' has no member named 'x'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:48: error: 'touchPosition' has no member named 'y'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:70: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:70: error: 'TransferRegion' has no member named 'mailBusy'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:71: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:72: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:73: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:74: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:75: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:76: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:77: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:77: error: 'TransferRegion' has no member named 'mailBusy'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:80: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c: In function 'VblankHandler':
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:94: error: 'TransferSound' undeclared (first use in this function)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:94: error: 'snd' undeclared (first use in this function)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:94: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:94: error: 'TransferRegion' has no member named 'soundData'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:95: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:95: error: 'TransferRegion' has no member named 'soundData'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c: In function 'main':
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:118: warning: implicit declaration of function 'powerON'
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:120: warning: 'getIPC' is deprecated (declared at c:/devkitPro/libnds/include/nds/ipc.h:64)
<br/>
c:/devkitPro/liblobby/roomExampleCopy/arm7/source/template.c:120: error: 'TransferRegion' has no member named 'soundData'
<br/>
make[2]: *** [template.o] Error 1
<br/>
make[1]: *** [build] Error 2
<br/>
make[1]: Leaving directory `/c/devkitPro/liblobby/roomExampleCopy/arm7'
<br/>
"make": *** [arm7/roomExampleCopy.elf] Error 2</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165676 - wintermute - Sat Jan 03, 2009 12:56 am</h4>
    <div class="postbody"><span class="postbody">liblobby will no longer compile with the latest toolchain &amp; libs. It didn't work particularly well even when it did compile either.
<br/>
<br/>
Currently the best way to implement multiplayer is with a server/client model via an access point. This may change when Sgstair sorts out the new dswifi lib.
<br/>
<br/>
dswifi is mostly fairly standard Berkeley sockets with the exception of initialisation. Have a look at some of the supplied dswifi examples distributed with the nds example set.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165916 - TwentySeven - Tue Jan 13, 2009 12:14 am</h4>
    <div class="postbody"><span class="postbody">The dswifi's tcp socket implementation isn't very good.
<br/>
<br/>
The udp works fine, however.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165922 - wintermute - Tue Jan 13, 2009 2:32 am</h4>
    <div class="postbody"><span class="postbody">Care to elaborate?
<br/>
<br/>
It's kind of difficult to improve with feedback like "not very good" :p<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165925 - TwentySeven - Tue Jan 13, 2009 3:09 am</h4>
    <div class="postbody"><span class="postbody">I figure its a moot point because theres a new version in (extended) development. =D *poke poke*
<br/>
<br/>
You can't use the TCP sockets as is for reliable streaming.  Blob transfer yes, streaming no.
<br/>
<br/>
If you were building a realtime game network protocol, like say an RTS, you'd need the streaming.
<br/>
<br/>
As for the actual issue:
<br/>
<br/>
The streaming is frequently interrupted by long pauses even for low bandwidth transmissions.  This is apparently related to the multiple ACK spam thats been reported on these forums a few times now (along with the reply of "Wait for the rewrite!").
<br/>
<br/>
Some routers handle it fine, but some, like those crappy nintendo wifi-router-on-a-stick, tend to curl up and die from it.
<br/>
<br/>
Does that cover it?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165927 - sgstair - Tue Jan 13, 2009 8:42 am</h4>
    <div class="postbody"><span class="postbody">Yes, preparations for getting the next wifilib written are already in progress :)
<br/>
<br/>
to clarify: streaming is great with low-ping servers. The problem arises from the low TCP window size, which I'm not really keen on increasing without support for packet reordering - the lib is based on a few bad assumptions ;)
<br/>
About the ACK retransmission thing, a lot of the time, the ACK isn't ack'd by the wireless router, and so the DS retransmits... I haven't worked out this problem yet, but I don't think it's actually the TCP stack's fault. And yes, it should go away in the rewrite, as so many other things will :P<br/>_________________<br/><a class="postlink" href="http://blog.akkit.org/" target="_blank">http://blog.akkit.org/</a> - <a class="postlink" href="http://www.akkit.org/dswifi/" target="_blank">http://www.akkit.org/dswifi/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165929 - TwentySeven - Tue Jan 13, 2009 11:29 am</h4>
    <div class="postbody"><span class="postbody">Glad to hear its well under way.
<br/>
<br/>
Can I rub your feet or something to make it happen faster? ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#165931 - sgstair - Tue Jan 13, 2009 5:13 pm</h4>
    <div class="postbody"><span class="postbody">If only it were that easy ;)
<br/>
<br/>
I'll probably find a good way to demonstrate progress, but not quite sure how yet. Basicly I'm re-reverse-engineering the hardware, I want to get a much better understanding of it.
<br/>
It'll take a while, but not as long as it did initially.<br/>_________________<br/><a class="postlink" href="http://blog.akkit.org/" target="_blank">http://blog.akkit.org/</a> - <a class="postlink" href="http://www.akkit.org/dswifi/" target="_blank">http://www.akkit.org/dswifi/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
