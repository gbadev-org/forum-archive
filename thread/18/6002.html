<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>UV arrays - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > UV arrays</h2>
<div id="posts">
<div class="post">
    <h4>#45400 - iainprice - Fri Jun 10, 2005 8:48 am</h4>
    <div class="postbody"><span class="postbody">Can someone explain UV arrays to me...
<br/>
<br/>
I have got a complex shape made of many triangles and wish to apply a single texture to the whole mesh. I have an array of x,y,z for all the triangles, a normals pack, textures pack but it is just the textures pack lifted from the cube demo, so each triagnle uses the complete texture so therefore it is repeated.
<br/>
<br/>
I am using lightwave, then converting to rwx and converting to a manual data format. I just don't understand how the 0,0,128 refers to the triangle...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45432 - dovoto - Fri Jun 10, 2005 5:41 pm</h4>
    <div class="postbody"><span class="postbody"><a class="postlink" href="http://biorust.com/index.php?page=tutorial_detail&amp;tutid=85" target="_blank">http://biorust.com/index.php?page=tutorial_detail&amp;tutid=85</a>
<br/>
<br/>
Here is a simple introduction to UV mapping in a modeler...it uses blender but should still apply.  Keep in mind that most 3D model formats are going to give you UVs ranging from 0 to 1 with numbers greater than one meaning the texture should repeate.  To convert these UVs to the DS format simply multiply U by the width and V by the height of your texture (in proper fixed point number format of course).
<br/>
<br/>
For a brief and crapy description of mapping a texture to a triange:
<br/>
1) 256x256 texture
<br/>
2) A triangle with verticies (x1,y1,0) (x2,y2,0) (x3,y3,0):
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//Triangle
<br/>
       (x1,y1)----------- (x2,y2)
<br/>
             |          /
<br/>
             |        /
<br/>
             |      /
<br/>
             |    /
<br/>
             |  /
<br/>
             |/ 
<br/>
        (x3,y3)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
You will have 3 corresponding sets of texture coordinates that go along with these verticies.  These "UV" coordinates represent a triangle mapped out inside your texture.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
//texture
<br/>
    (0,256)--------------------------------------------------(256,256)
<br/>
           |        (u1,v1)----------- (u2,v2)               |
<br/>
           |             |          /                        |
<br/>
           |             |        /                          |
<br/>
           |             |      /                            |
<br/>
           |             |    /                              | 
<br/>
           |             |  /                                |
<br/>
           |             |/                                  |
<br/>
           |        (u3, v3)                                 |
<br/>
           |                                                 |
<br/>
           |                                                 |
<br/>
           |                                                 |
<br/>
      (0,0)---------------------------------------------------(256,0)
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
These coordinates do not have to coorispond in anyway to the shape of the triangle you are trying to texture as long as there is one texture coordinate for each vertex.  The UV triangle will be cut out of your texture and rotated and stretched to fit your triangle.  
<br/>
<br/>
In this case the data would be sent to the 3D engine as follows:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
glVertex(x1,y1)
<br/>
glTextureCoord(u1,v1)
<br/>
<br/>
glVertex(x2,y2)
<br/>
glTextureCoord(u2,v2)
<br/>
<br/>
glVertex(x3,y3)
<br/>
glTextureCoord(u3,v3)
<br/>
</td> </tr></table><span class="postbody">
<br/>
You can change the order of the UVs and it will cause your texture to be rotated and mapped accordingly (which means if you convert all your data and it still is all messed up try messing with vertex and UV order)
<br/>
<br/>
As you can see trying to generate these UV coordinates to cover even a simple model by hand would be very much a pain in the ass.  Most (if not all) 3D models provide tools to do this for you but have a rather annoying learning curve.  
<br/>
<br/>
Extracting this data out of the 3D format is hopefully strait-forward as long as you keep in mind that UVs are normaly normalized to 1 (instead of the 0 to 256 the DS would need, it would be 0 to 1 in floating point format).[/code]<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
