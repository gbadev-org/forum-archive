<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compilation problem in Linux - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Compilation problem in Linux</h2>
<div id="posts">
<div class="post">
    <h4>#142754 - Phantaseur - Fri Oct 12, 2007 6:38 pm</h4>
    <div class="postbody"><span class="postbody">I changed my OS to linux and now trying recompile all of my projects. But there is problem at final stage, every time ndstool returns error</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">/usr/home/ndscoder/nds/devkitpro/devkitARM/bin/ndstool -c project.nds -9 project9.bin -7 project7.bin
<br/>
*** Error code 127
<br/>
<br/>
Stop in /usr/home/ndscoder/nds/ndsdev/projects/proj1.</td> </tr></table><span class="postbody">There is no explanation what is error 127 and how can I solve it. In windows all works normall.
<br/>
I hope anybody will help me, I don't want return to old OS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#142851 - tondopie - Sun Oct 14, 2007 4:53 pm</h4>
    <div class="postbody"><span class="postbody">did you set up devkitpro for your environment? Did you add the devkitpro and devkitARM paths to your .bashrc?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143045 - Phantaseur - Tue Oct 16, 2007 10:31 am</h4>
    <div class="postbody"><span class="postbody">No, I just wrote full paths in makefile...
<br/>
Which global vars need I set up?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143101 - tondopie - Tue Oct 16, 2007 9:54 pm</h4>
    <div class="postbody"><span class="postbody">open your .bashrc file and add this to the end:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">export DEVKITPRO=/home/max/devkitpro
<br/>
export DEVKITARM=$DEVKITPRO/devkitARM
<br/>
export PATH=$DEVKITARM/bin:$PATH
<br/>
export PAPATH=DEVKITPRO/PAlib
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
obviously replace "max" with what ever your username is. Also you don't need the last line if you are not using PAlib. 
<br/>
<br/>
<br/>
EDIT: Also set the DEVKITPRO varable to a different directory if its not in your HOME folder
<br/>
<br/>
make sure you have the cases right, too!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143128 - tepples - Wed Oct 17, 2007 5:03 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tondopie wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">export PATH=$DEVKITARM/bin:$PATH
<br/>
export PAPATH=DEVKITPRO/PAlib</td> </tr></table><span class="postbody">
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
The first two lines (setting DEVKITPRO and DEVKITARM variables) are fine, but ideally, the makefile should set PATH and PAPATH, not .bashrc.  Relevant lines from $DEVKITPRO/examples/gba/template/Makefile are as follows:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM)
<br/>
endif
<br/>
<br/>
# ...
<br/>
<br/>
export PATH   :=   $(DEVKITARM)/bin:$(PATH)</td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143444 - Hyouko - Sun Oct 21, 2007 7:11 pm</h4>
    <div class="postbody"><span class="postbody">I'm running into a similar problem after updating to Ubuntu 7.10 today; I was running Feisty previously, and didn't have any trouble compiling.  I've got the appropriate environment variables set (I was taught to set them under /etc/environment, seems to work); the code compiles successfully and creates .elf/.arm9 files, but make barfs inexplicably right after that, like so:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
linking Dove.elf
<br/>
built ... Dove.arm9
<br/>
make[1]: *** [/home/XXXXXX/NDS/Dove/Dove.nds] Error 127
<br/>
make: *** [build] Error 2
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Any idea what's up?
<br/>
<br/>
edit: Googling tells me that make error 127 occurs when make can't find a tool needed to execute a command.  Hrm.  In my last (very messy) install of devkitARM, I installed r20 straight over r19; any chance that there's some files left out of r20 that were supplied by the r19 install?
<br/>
<br/>
edit the second: no dice.  this'd be easier if I could get it to tell me which tool it's not finding!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143448 - tepples - Sun Oct 21, 2007 9:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hyouko wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
linking Dove.elf
<br/>
built ... Dove.arm9
<br/>
make[1]: *** [/home/XXXXXX/NDS/Dove/Dove.nds] Error 127
<br/>
make: *** [build] Error 2
<br/>
</td> </tr></table><span class="postbody">
<br/>
[...]
<br/>
<br/>
this'd be easier if I could get it to tell me which tool it's not finding!</span></td> </tr></table><span class="postbody">
<br/>
When the commands in rules used by the template makefile have an @ sign in front of them, GNU Make will not echo the command. Try doing this: <ol type="1"><li>Copy the file ds_rules from .../devkitPro/devkitARM/ to the folder containing your project's makefile. </li><li>In your project's makefile, change
<br/>
include $(DEVKITARM)/ds_rules
<br/>
to
<br/>
include ./ds_rules </li><li>In the copy of ds_rules in your project's folder, remove the @ signs before command names such as dsbuild and ndstool. </li></ol><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143458 - Hyouko - Sun Oct 21, 2007 10:48 pm</h4>
    <div class="postbody"><span class="postbody">...Guess that wasn't as helpful as I'd hoped:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
built ... Dove.arm9
<br/>
ndstool -c /home/XXXXX/NDS/Dove/Dove.nds -9 /home/XXXXXX/NDS/Dove/Dove.arm9
<br/>
make[1]: *** [/home/XXXXXXX/NDS/Dove/Dove.nds] Error 127
<br/>
make: *** [build] Error 2
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
ndstool is definitely there.  It's complaining, best as I can tell, that the .nds file isn't there, which is true - ndstool hasn't made it yet.  Could the makefile be trying to build stuff out of order for some reason?
<br/>
<br/>
Upon trying to compile the textured cube example, I got this error:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
make[1]: *** No rule to make target `texture.o', needed by `/home/XXXXXXX/NDS/Examples/Graphics/3D/Misc/Textured_Cube/Textured_Cube.elf'.  Stop.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
which is strange, because I based the code for my own project off of this to begin with, and it doesn't seem to stumble over the textures for that...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143523 - djupdal - Tue Oct 23, 2007 8:44 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hyouko wrote:</b></span></td> </tr> <tr> <td class="quote">ndstool is definitely there.  It's complaining, best as I can tell, that the .nds file isn't there, which is true - ndstool hasn't made it yet.  Could the makefile be trying to build stuff out of order for some reason?</td> </tr></table><span class="postbody">
<br/>
I got similar problems when I upgraded to Gutsy.  My solution was to recompile ndstool (found sources on sourceforge).  Now it works correctly again.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143537 - teh_programerer - Tue Oct 23, 2007 3:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>djupdal wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hyouko wrote:</b></span></td> </tr> <tr> <td class="quote">ndstool is definitely there.  It's complaining, best as I can tell, that the .nds file isn't there, which is true - ndstool hasn't made it yet.  Could the makefile be trying to build stuff out of order for some reason?</td> </tr></table><span class="postbody">
<br/>
I got similar problems when I upgraded to Gutsy.  My solution was to recompile ndstool (found sources on sourceforge).  Now it works correctly again.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I did just that (after upgrading from Feisty to Gutsy) and nothing happened, well, it didn't work.  I then compiled the dsbuild binary as well, that did the trick.<br/>_________________<br/>C allows you to shoot yourself in the foot rather easily.  C++ allows you to re-use the bullet!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143544 - Hyouko - Tue Oct 23, 2007 5:36 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>teh_programerer wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>djupdal wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hyouko wrote:</b></span></td> </tr> <tr> <td class="quote">ndstool is definitely there.  It's complaining, best as I can tell, that the .nds file isn't there, which is true - ndstool hasn't made it yet.  Could the makefile be trying to build stuff out of order for some reason?</td> </tr></table><span class="postbody">
<br/>
I got similar problems when I upgraded to Gutsy.  My solution was to recompile ndstool (found sources on sourceforge).  Now it works correctly again.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
I did just that (after upgrading from Feisty to Gutsy) and nothing happened, well, it didn't work.  I then compiled the dsbuild binary as well, that did the trick.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Any chance you folks could share those binaries?  I'm having a hell of a time getting any of the DevKitPro stuff from SourceForge to build - the latest build script seems to be looking to download several source packages that don't actually exist yet.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143547 - teh_programerer - Tue Oct 23, 2007 6:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hyouko wrote:</b></span></td> </tr> <tr> <td class="quote">Any chance you folks could share those binaries?  I'm having a hell of a time getting any of the DevKitPro stuff from SourceForge to build - the latest build script seems to be looking to download several source packages that don't actually exist yet.</td> </tr></table><span class="postbody">
<br/>
<br/>
<a class="postlink" href="http://www.interactivelaboratories.com/nds/tools.tar.gz" target="_blank">Here</a> you go.  The source is included, too, just in case it may work.<br/>_________________<br/>C allows you to shoot yourself in the foot rather easily.  C++ allows you to re-use the bullet!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143551 - Hyouko - Tue Oct 23, 2007 7:47 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>teh_programerer wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Hyouko wrote:</b></span></td> </tr> <tr> <td class="quote">Any chance you folks could share those binaries?  I'm having a hell of a time getting any of the DevKitPro stuff from SourceForge to build - the latest build script seems to be looking to download several source packages that don't actually exist yet.</td> </tr></table><span class="postbody">
<br/>
<br/>
<a class="postlink" href="http://www.interactivelaboratories.com/nds/tools.tar.gz" target="_blank">Here</a> you go.  The source is included, too, just in case it may work.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Worked wonderfully - thanks!  And it looks like I was trying to build a lot more than I needed to (devkitARM from scratch, rather than just ndstool and dsbuild).  Since devkitARM r21 is going out, I guess I shouldn't be surprised that lots of things are moving around and/or potentially not working at the moment.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
