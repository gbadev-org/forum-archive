<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Trouble With PAlib in Visual C++ 2008 - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Trouble With PAlib in Visual C++ 2008</h2>
<div id="posts">
<div class="post">
    <h4>#151960 - NAveryW - Fri Mar 07, 2008 1:41 am</h4>
    <div class="postbody"><span class="postbody">-I've followed absolutely all of the instructions on <a href="http://www.palib.info/wiki/doku.php?id=day1" target="_blank">http://www.palib.info/wiki/doku.php?id=day1</a> exactly. 
<br/>
<br/>
-When I run the build.bat file in the HelloWorld example folder, it compiles perfectly.
<br/>
<br/>
-I'm using Windows Vista and Visual C++ 2008 and have done all the necessary modifications mentioned on that wiki page, such as adding the new line of code in the "Build Command Line" section.
<br/>
<br/>
However, when I try to build the default Hello World solution (I named the project "Blargh"), I get the following output:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">1&gt;------ Build started: Project: Blargh, Configuration: Release Win32 ------
<br/>
1&gt;Performing Makefile project actions
<br/>
1&gt;main.cpp
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h: In function 'u16 PA_GetBmpWidth(void*)':
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h(689): error: pointer of type 'void *' used in arithmetic
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h: In function 'u16 PA_GetBmpHeight(void*)':
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h(704): error: pointer of type 'void *' used in arithmetic
<br/>
1&gt;make[1]: *** [main.o] Error 1
<br/>
1&gt;make: *** [build] Error 2
<br/>
1&gt;Build log was saved at "file://c:\Projetos\VisualCPP\Blargh\Blargh\Release\BuildLog.htm"
<br/>
1&gt;Blargh - 2 error(s), 0 warning(s)
<br/>
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Can anyone help me fix this or point me to another compiler that will work with PAlib without too much setup?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151961 - nczempin - Fri Mar 07, 2008 2:00 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NAveryW wrote:</b></span></td> </tr> <tr> <td class="quote">-I've followed absolutely all of the instructions on <a href="http://www.palib.info/wiki/doku.php?id=day1" target="_blank">http://www.palib.info/wiki/doku.php?id=day1</a> exactly. 
<br/>
<br/>
-When I run the build.bat file in the HelloWorld example folder, it compiles perfectly.
<br/>
<br/>
-I'm using Windows Vista and Visual C++ 2008 and have done all the necessary modifications mentioned on that wiki page, such as adding the new line of code in the "Build Command Line" section.
<br/>
<br/>
However, when I try to build the default Hello World solution (I named the project "Blargh"), I get the following output:
<br/>
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">1&gt;------ Build started: Project: Blargh, Configuration: Release Win32 ------
<br/>
1&gt;Performing Makefile project actions
<br/>
1&gt;main.cpp
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h: In function 'u16 PA_GetBmpWidth(void*)':
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h(689): error: pointer of type 'void *' used in arithmetic
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h: In function 'u16 PA_GetBmpHeight(void*)':
<br/>
1&gt;c:/devkitPro/PAlib//include/nds/arm9/PA_Draw.h(704): error: pointer of type 'void *' used in arithmetic
<br/>
1&gt;make[1]: *** [main.o] Error 1
<br/>
1&gt;make: *** [build] Error 2
<br/>
1&gt;Build log was saved at "file://c:\Projetos\VisualCPP\Blargh\Blargh\Release\BuildLog.htm"
<br/>
1&gt;Blargh - 2 error(s), 0 warning(s)
<br/>
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Can anyone help me fix this or point me to another compiler that will work with PAlib without too much setup?</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Try starting off with Programmer's notepad that comes with devkitPro.
<br/>
<br/>
You're not meant to use the Visual Studio compiler; I doubt it cross-compiles to ARM, and your project configuration "Release Win32" doesn't sound promising for DS building.
<br/>
<br/>
Actually, go even one step further back, and just run Mingw, change to your project directory and type "make".
<br/>
<br/>
Once you can get it building from the mingw shell, you can try getting it to run under the VS IDE. You'll mainly use the nice IDE features, not the Windows compiler(s).
<br/>
<br/>
Anyone with more experience on the DS and perhaps even in combination with VS, correct me if I'm wrong ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151962 - NAveryW - Fri Mar 07, 2008 2:25 am</h4>
    <div class="postbody"><span class="postbody">I'd prefer to not have to compile using a command line application if possible. &gt;_&gt;;
<br/>
<br/>
I was never able to figure out how to compile using Programmer's Notepad. It seems like it would be incredibly simple, but it didn't pop out at me, and I can't find it in the documentation. Would you be able to help me there?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151970 - nczempin - Fri Mar 07, 2008 11:35 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>NAveryW wrote:</b></span></td> </tr> <tr> <td class="quote">I'd prefer to not have to compile using a command line application if possible. &gt;_&gt;;</td> </tr></table><span class="postbody">
<br/>
<br/>
So you'd prefer not to be able to compile at all??
<br/>
<br/>
I didn't say you'd have to stick with that method, but it is an important sanity check. Because if it doesn't compile on the command line, it won't compile anywhere.
<br/>
<br/>
And any kind of other compiling in the DS homebrew context is just command-line calls hidden behind GUIs. Visual Studio won't give you a different compiler, just a different editor.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
<br/>
I was never able to figure out how to compile using Programmer's Notepad. It seems like it would be incredibly simple, but it didn't pop out at me, and I can't find it in the documentation. Would you be able to help me there?</td> </tr></table><span class="postbody">
<br/>
<br/>
well, collect the info you need to be able to run the "make" command from MinGW, then the next step would be to call the make command from your IDE; with PN being a little bit simpler to set up than VS.
<br/>
<br/>
I'm afraid you're going to have to bite the bullet, we are talking about embedded development here, you should be glad that you even have a compiler! ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151972 - ThomasS - Fri Mar 07, 2008 1:10 pm</h4>
    <div class="postbody"><span class="postbody">The error you're getting is due to a bug which unfortunately happens with the latest PAlib version when using C++ in your project. Do a search in the PAlib forums, the solution has been posted multiple times.
<br/>
It' works well to use Visual Studio as IDE, I also do it. Your configurations seems ok.
<br/>
We didn't release a new, "stable" PAlib version yet because the mp3 problems on the G6 (and only on the G6!!!) are still there.<br/>_________________<br/>&lt;<a class="postlink" href="http://palib.info/forum/modules/newbb/viewtopic.php?viewmode=flat&amp;type=&amp;topic_id=3108&amp;forum=10" target="_blank">dsFont</a>&gt; &lt;<a class="postlink" href="http://palib.info/forum/modules/newbb/viewtopic.php?topic_id=2451&amp;forum=9" target="_blank">Game Collection</a>&gt;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151975 - nczempin - Fri Mar 07, 2008 2:04 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ThomasS wrote:</b></span></td> </tr> <tr> <td class="quote">The error you're getting is due to a bug which unfortunately happens with the latest PAlib version when using C++ in your project. Do a search in the PAlib forums, the solution has been posted multiple times.
<br/>
It' works well to use Visual Studio as IDE, I also do it. Your configurations seems ok.
<br/>
We didn't release a new, "stable" PAlib version yet because the mp3 problems on the G6 (and only on the G6!!!) are still there.</td> </tr></table><span class="postbody">
<br/>
<br/>
That makes it easier, of course ;-)
<br/>
<br/>
I still stand by my view that one should at least know how the command-line stuff works before trying to hide it all behind an IDE.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152016 - Corsix - Sat Mar 08, 2008 11:42 am</h4>
    <div class="postbody"><span class="postbody">All the IDE does in this case is execute "make" in the project folder when you press the build button, displaying the output in the build window.
<br/>
The command line isn't very different; you open a command prompt in the project folder, type "make" and see the output.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152027 - wintermute - Sat Mar 08, 2008 3:26 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>ThomasS wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
We didn't release a new, "stable" PAlib version yet because the mp3 problems on the G6 (and only on the G6!!!) are still there.</td> </tr></table><span class="postbody">
<br/>
<br/>
Are you a PAlib maintainer?
<br/>
<br/>
Perhaps you might consider not breaking devkitARM in your installer. Currently I'm very tempted to have the devkitPro updater detect PAlib and report it's trojan behaviour to the user, recommending that it be removed from the system.
<br/>
<br/>
PAlib should <span style="font-weight: bold">not</span> under <span style="font-weight: bold">any</span> circumstances be modifying the official library distributions provided by devkitPro.<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152033 - ThomasS - Sat Mar 08, 2008 6:37 pm</h4>
    <div class="postbody"><span class="postbody">Yes, I'm one of those who extended the latest "official" version. Our new beta wasn't released with an installer yet (only in archive form), so the version you're referring to is the old version which was still solely developed by Mollusk. When we release a new installer, we certainly won't include any DevkitARM files anymore.<br/>_________________<br/>&lt;<a class="postlink" href="http://palib.info/forum/modules/newbb/viewtopic.php?viewmode=flat&amp;type=&amp;topic_id=3108&amp;forum=10" target="_blank">dsFont</a>&gt; &lt;<a class="postlink" href="http://palib.info/forum/modules/newbb/viewtopic.php?topic_id=2451&amp;forum=9" target="_blank">Game Collection</a>&gt;</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#152050 - NAveryW - Sun Mar 09, 2008 12:19 am</h4>
    <div class="postbody"><span class="postbody">Never mind; I was able to get it to compile using the build.bat thing that is included with all of the examples.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
