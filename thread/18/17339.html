<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Confused - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Confused</h2>
<div id="posts">
<div class="post">
    <h4>#174851 - GeneralFOL - Mon Jul 26, 2010 1:49 am</h4>
    <div class="postbody"><span class="postbody">Hi all, im trying very hard to learn DS codeing in C++, i dont seem to be able to get the result im looking for, bascially i want the small cube to move to a position clicked on the screen, but nothing happens, can anyone tell me where im going wrong?.
<br/>
<br/>
Sorry for all the miver guys, im a noob lol.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int main(void) {
<br/>
//---------------------------------------------------------------------------------
<br/>
   
<br/>
   lcdMainOnBottom();
<br/>
   
<br/>
   touchPosition touchXY;
<br/>
   
<br/>
   glInit();
<br/>
   
<br/>
   videoSetMode(MODE_0_3D);
<br/>
   
<br/>
   glViewport(0,0,255,191);
<br/>
   
<br/>
   glPolyFmt(POLY_ALPHA(31) | POLY_CULL_NONE );
<br/>
   
<br/>
   float translate = - 2;
<br/>
   
<br/>
   float playerx = 0;
<br/>
   float playerz = 0;
<br/>
   
<br/>
   float newplayerx = 0;
<br/>
   float newplayerz = 0;
<br/>
   
<br/>
   irqSet(IRQ_VBLANK, Vblank);
<br/>
<br/>
   consoleDemoInit();
<br/>
<br/>
   iprintf("Nintendo DS Test Engine\n");
<br/>
   iprintf("By Iain McCluskey\n");
<br/>
   
<br/>
 
<br/>
   while(1) {
<br/>
   
<br/>
       glMatrixMode(GL_PROJECTION);
<br/>
      glLoadIdentity();
<br/>
       gluPerspective(70, 256.0 / 192.0, 0.1, 10);
<br/>
      
<br/>
      glViewport(0,0,255,191);
<br/>
      
<br/>
      glMatrixMode(GL_MODELVIEW);
<br/>
      glLoadIdentity();
<br/>
      
<br/>
      glTranslatef(0,0,translate);
<br/>
         
<br/>
       DrawBox(-2,-1,-1,4,2,4);
<br/>
      
<br/>
      DrawBox(newplayerx,-1,newplayerz,0.4,0.4,0.4);
<br/>
   
<br/>
      swiWaitForVBlank();
<br/>
      touchRead(&amp;touchXY);
<br/>
      
<br/>
      int held = keysHeld();
<br/>
      
<br/>
      if(held &amp; KEY_TOUCH)
<br/>
      {
<br/>
        playerx = touchXY.px;
<br/>
        playerz = touchXY.py;
<br/>
        newplayerx = playerx;
<br/>
        newplayerz = playerz;
<br/>
      }
<br/>
<br/>
      iprintf("Frame = %4u",frame);
<br/>
      iprintf("\x1b[16;0HTouch x = %04u, %04u\n", touchXY.rawx, touchXY.px);
<br/>
      iprintf("Touch y = %04u, %04u\n", touchXY.rawy, touchXY.py);
<br/>
      
<br/>
      iprintf("Player X = %04u\n",playerx);
<br/>
      iprintf("Player Y = %04u\n",playerz);
<br/>
      
<br/>
      glFlush(0);      
<br/>
   
<br/>
   }</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
