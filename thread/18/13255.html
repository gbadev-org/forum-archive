<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>help with DISPLAY_LIST and GL_QUAD - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > help with DISPLAY_LIST and GL_QUAD</h2>
<div id="posts">
<div class="post">
    <h4>#129278 - Chikungun - Mon May 21, 2007 12:58 pm</h4>
    <div class="postbody"><span class="postbody">Hi everyone,
<br/>
<br/>
Can someone help me with a problem I have with my display list please?
<br/>
I'm drawing a cube perfectly using GL_TRIANGLE
<br/>
But when I move to GL_QUAD, it doesn't draw what I want.
<br/>
the fact is I tried to juggle with GL_NOP but still it doesn't work.
<br/>
Actually what I'll need is an example of a displaylist using something else than GL_TRIANGLE. If you browse the examples included in devkitpro there is nothing, and if you google FIFO_COMMAND_PACK and GL_QUAD there are 0 answers.
<br/>
Anyone have a valid example please?
<br/>
Thanks in advance</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131114 - Jhiant - Mon Jun 11, 2007 9:09 am</h4>
    <div class="postbody"><span class="postbody">Quad order can sometimes be a little tricky. Look at the DirectX documentation for the peculiarities of Quad Lists in DirectX and try converting that. Most likely what you've got going on is backward facing or degenerate quads that are rendering, but just not showing up.<br/>_________________<br/>Occam's Razor: All things being equal, the simplest solution tends to be the best one.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#131116 - Chikungun - Mon Jun 11, 2007 9:36 am</h4>
    <div class="postbody"><span class="postbody">Hi Jhiant, thanks for your reply, actually I did manage to do it but was too busy to post, now is the time to do so. Here is the display list for a cube using quads and it works (I had trouble with counting the offset, and with FIFO_NOP s) Actually beware of the positions of the vertices because I do update them in my game-loop so it may not be the right initialization (too lazy to bother as I update it before the first frame, sorry) but the important is the displaylist in itself, so I'll post it anyway:
<br/>
<br/>
u32 cubebase[] = 
<br/>
{
<br/>
/*0*/	108,
<br/>
	// face 1/6
<br/>
	// ... quad
<br/>
/* 1*/	FIFO_COMMAND_PACK(FIFO_BEGIN, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/* 2*/	GL_QUAD,
<br/>
/* 3*/	NORMAL_PACK( 0, 0, floattov10(-1.0)),
<br/>
/* 4*/	VERTEX_PACK(inttov16(-1),inttov16(-1)),
<br/>
/* 5*/	VERTEX_PACK(0,0),
<br/>
/* 6*/	NORMAL_PACK( 0, 0, floattov10(-1.0)),
<br/>
/* 7*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/* 8*/	VERTEX_PACK(inttov16(1),inttov16(-1)),
<br/>
/* 9*/	VERTEX_PACK(0,0),
<br/>
/*10*/	NORMAL_PACK( 0, 0, floattov10(-1.0)),
<br/>
/*11*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*12*/	VERTEX_PACK(0,0),
<br/>
/*13*/	NORMAL_PACK( 0, 0, floattov10(-1.0)),
<br/>
/*14*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NOP, FIFO_NOP, FIFO_END),
<br/>
/*15*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*16*/	VERTEX_PACK(0,0),
<br/>
/*17*/	0,
<br/>
/*18*/	0,
<br/>
<br/>
	// face 2/6
<br/>
	// ... quad
<br/>
/*19*/	FIFO_COMMAND_PACK(FIFO_BEGIN, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*20*/	GL_QUAD,
<br/>
/*21*/	NORMAL_PACK( 0, 0, floattov10(1.0) -1),
<br/>
/*22*/	VERTEX_PACK(inttov16(-1),inttov16(-1)),
<br/>
/*23*/	VERTEX_PACK(0,0),
<br/>
/*24*/	NORMAL_PACK( 0, 0, floattov10(1.0) -1),
<br/>
<br/>
/*25*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*26*/	VERTEX_PACK(inttov16(1),inttov16(-1)),
<br/>
/*27*/	VERTEX_PACK(0,0),
<br/>
/*28*/	NORMAL_PACK( 0, 0, floattov10(1.0) -1),
<br/>
/*29*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*30*/	VERTEX_PACK(0,0),
<br/>
/*31*/	NORMAL_PACK( 0, 0, floattov10(1.0) -1),
<br/>
<br/>
/*32*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NOP, FIFO_NOP, FIFO_END),
<br/>
/*33*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*34*/	VERTEX_PACK(0,0),
<br/>
/*35*/	0,
<br/>
/*36*/	0,
<br/>
<br/>
	// face 3/6
<br/>
	// ... quad
<br/>
/*37*/	FIFO_COMMAND_PACK(FIFO_BEGIN, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*38*/	GL_QUAD,
<br/>
/*39*/	NORMAL_PACK( 0, floattov10(1.0) -1, 0),
<br/>
/*40*/	VERTEX_PACK(inttov16(-1),inttov16(-1)),
<br/>
/*41*/	VERTEX_PACK(0,0),
<br/>
/*42*/	NORMAL_PACK( 0, floattov10(1.0) -1, 0),
<br/>
<br/>
/*43*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*44*/	VERTEX_PACK(inttov16(1),inttov16(-1)),
<br/>
/*45*/	VERTEX_PACK(0,0),
<br/>
/*46*/	NORMAL_PACK( 0, floattov10(1.0) -1, 0),
<br/>
/*47*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*48*/	VERTEX_PACK(0,0),
<br/>
/*49*/	NORMAL_PACK( 0, floattov10(1.0) -1, 0),
<br/>
<br/>
/*50*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NOP, FIFO_NOP, FIFO_END),
<br/>
/*51*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*52*/	VERTEX_PACK(0,0),
<br/>
/*53*/	0,
<br/>
/*54*/	0,
<br/>
<br/>
	// face 4/6
<br/>
	// ... quad
<br/>
/*55*/	FIFO_COMMAND_PACK(FIFO_BEGIN, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*56*/	GL_QUAD,
<br/>
/*57*/	NORMAL_PACK( 0, floattov10(-1.0), 0),
<br/>
/*58*/	VERTEX_PACK(inttov16(-1),inttov16(-1)),
<br/>
/*59*/	VERTEX_PACK(0,0),
<br/>
/*60*/	NORMAL_PACK( 0, floattov10(-1.0), 0),
<br/>
<br/>
/*61*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*62*/	VERTEX_PACK(inttov16(1),inttov16(-1)),
<br/>
/*63*/	VERTEX_PACK(0,0),
<br/>
/*64*/	NORMAL_PACK( 0, floattov10(-1.0), 0),
<br/>
/*65*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*66*/	VERTEX_PACK(0,0),
<br/>
/*67*/	NORMAL_PACK( 0, floattov10(-1.0), 0),
<br/>
<br/>
/*68*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NOP, FIFO_NOP, FIFO_END),
<br/>
/*69*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*70*/	VERTEX_PACK(0,0),
<br/>
/*71*/	0,
<br/>
/*72*/	0,
<br/>
<br/>
	// face 5/6
<br/>
	// ... quad
<br/>
/*73*/	FIFO_COMMAND_PACK(FIFO_BEGIN, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*74*/	GL_QUAD,
<br/>
/*75*/	NORMAL_PACK(floattov10(1.0) -1, 0, 0),
<br/>
/*76*/	VERTEX_PACK(inttov16(-1),inttov16(-1)),
<br/>
/*77*/	VERTEX_PACK(0,0),
<br/>
/*78*/	NORMAL_PACK(floattov10(1.0) -1, 0, 0),
<br/>
<br/>
/*79*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*80*/	VERTEX_PACK(inttov16(1),inttov16(-1)),
<br/>
/*81*/	VERTEX_PACK(0,0),
<br/>
/*82*/	NORMAL_PACK(floattov10(1.0) -1, 0, 0),
<br/>
/*83*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*84*/	VERTEX_PACK(0,0),
<br/>
/*85*/	NORMAL_PACK(floattov10(1.0) -1, 0, 0),
<br/>
<br/>
/*86*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NOP, FIFO_NOP, FIFO_END),
<br/>
/*87*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*88*/	VERTEX_PACK(0,0),
<br/>
/*89*/	0,
<br/>
/*90*/	0,
<br/>
<br/>
	// face 6/6
<br/>
	// ... quad
<br/>
/*91*/	FIFO_COMMAND_PACK(FIFO_BEGIN, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*92*/	GL_QUAD,
<br/>
/*93*/	NORMAL_PACK(floattov10(-1.0), 0, 0),
<br/>
/*94*/	VERTEX_PACK(inttov16(-1),inttov16(-1)),
<br/>
/*95*/	VERTEX_PACK(0,0),
<br/>
/*96*/	NORMAL_PACK(floattov10(-1.0), 0, 0),
<br/>
<br/>
/*97*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NORMAL, FIFO_VERTEX16, FIFO_NORMAL),
<br/>
/*98*/	VERTEX_PACK(inttov16(1),inttov16(-1)),
<br/>
/*99*/	VERTEX_PACK(0,0),
<br/>
/*100*/	NORMAL_PACK(floattov10(-1.0), 0, 0),
<br/>
/*101*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*102*/	VERTEX_PACK(0,0),
<br/>
/*103*/	NORMAL_PACK(floattov10(-1.0), 0, 0),
<br/>
<br/>
/*104*/	FIFO_COMMAND_PACK(FIFO_VERTEX16, FIFO_NOP, FIFO_NOP, FIFO_END),
<br/>
/*105*/	VERTEX_PACK(inttov16(-1),inttov16(1)),
<br/>
/*106*/	VERTEX_PACK(0,0),
<br/>
/*107*/	0,
<br/>
/*108*/	0,
<br/>
<br/>
};</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
