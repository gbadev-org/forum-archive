<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Question concerning transparency. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Question concerning transparency.</h2>
<div id="posts">
<div class="post">
    <h4>#79951 - Dark Knight ez - Mon Apr 17, 2006 4:27 pm</h4>
    <div class="postbody"><span class="postbody">Hey all.
<br/>
<br/>
Now that I've got sprites displaying, I want to add transparency to some parts of them. Reading through tutorials it is said that the first palette entry specifies the transparent parts of the sprites which uses said palette.
<br/>
<br/>
As first palette entry I have chosen pure red (#FF0000). This colour is used as background in the sprites using the palette. When displaying the sprites, however, their red background colour is also displayed and not transparent.
<br/>
<br/>
Are their (extra) options which need to be set in order to let sprites use the first palette entry as transparency colour? I couldn't find anything regarding this in the tutorials.
<br/>
<br/>
Thanks in advance.
<br/>
Dark Knight ez</span><span class="gensmall"><br/><br/>Last edited by Dark Knight ez on Tue Apr 18, 2006 10:28 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#79953 - pas - Mon Apr 17, 2006 5:01 pm</h4>
    <div class="postbody"><span class="postbody">The only think I think you need to do to add transperency to a sprite or a backround is to make the thing you need transperent in the said purpelred.
<br/>
<br/>
Greets:
<br/>
<br/>
Pas.
<br/>
<br/>
Ps: With Purplered you mean that:<a href="http://www.picfury.com/r/Logo-92-th.jpg">[Images not permitted - Click here to view it]</a>
<br/>
<br/>
Because that is the color used by DS Programmer to get a file transparent in the DS. If you don't belive me make a .nds file and use a picture and this as transperency in the logo. Then open it in the NDSheader tool and look if it is transparent. And this transperency is for logos and for pictures and sprites in the game.</span><span class="gensmall"><br/><br/>Last edited by pas on Mon Apr 17, 2006 8:04 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#79959 - Dark Knight ez - Mon Apr 17, 2006 6:00 pm</h4>
    <div class="postbody"><span class="postbody">The colour should not make any difference. "Purplered" as you call it, is often used as transparency colour because it is a colour which is not commonly used in sprites.
<br/>
Some tutorials use black as transparency colour instead, and I've decided to use red.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79962 - DekuTree64 - Mon Apr 17, 2006 6:12 pm</h4>
    <div class="postbody"><span class="postbody">I use a slightly purple tinted light gray, because I like my eyes to still function after drawing :)<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79965 - Dark Knight ez - Mon Apr 17, 2006 6:30 pm</h4>
    <div class="postbody"><span class="postbody">Meaning you probably got it to work.
<br/>
Was some specific action needed to enable transparency, or is it present by default?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#79998 - HyperHacker - Tue Apr 18, 2006 12:54 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Dark Knight ez wrote:</b></span></td> </tr> <tr> <td class="quote">The colour should not make any difference. "Purplered" as you call it, is often used as transparency colour because it is a colour which is not commonly used in sprites.</td> </tr></table><span class="postbody">
<br/>
Also because it's RGB 255, 0, 255.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80244 - Dark Knight ez - Thu Apr 20, 2006 3:33 pm</h4>
    <div class="postbody"><span class="postbody">Apparently I made a mistake with converting my sprite graphics.
<br/>
I've used the balpalette.bin and balgraphics.bin from the libnds sprite tutorial, and they show up transparent using my display code.
<br/>
<br/>
So... if anyone could give a good description on how to create sprite graphics and conver them properly to .bin format, I would be most grateful.
<br/>
<br/>
Currently I'm doing the following:
<br/>
- create a sprite-picture in Adobe PhotoShop with 8bits/channel set.
<br/>
- convert that picture to "Indexed Color"
<br/>
.... when doing that I choose for converting with a custom palette, and make sure that the first palette entry is the colour I chose for transparency in the sprite
<br/>
- saving the sprite-picture as .pcx file
<br/>
- convert the .pcx file with gfx2gba (version 103)
<br/>
.... when doing that, I'm using the following command line
<br/>
.... "gfx2gba.exe in.pcx out.bin -8 -z 256 -b -p out_pal.bin"
<br/>
<br/>
Which one of these steps is wrong? Should I not use pcx file? Should I use different gfx2gba options?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#80369 - Dark Knight ez - Fri Apr 21, 2006 7:25 pm</h4>
    <div class="postbody"><span class="postbody">I tried out dovoto's pcx2sprite to no avail. (Same results; no transparency.)
<br/>
The palette constant which pcx2sprite creates:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">const u16 font_32x32_digitsPalette[] = {
<br/>
                    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
<br/>
                    ....... (same as line above repeated a couple of times)
<br/>
                    0x0000, 0x0000, 0x7D33, 0x0000, 0x7FFF, 0x7C1F,};</td> </tr></table><span class="postbody">
<br/>
I indeed used four colours, so that's correct I guess. However, when copying this in SPRITE_GFX_SUB with a for-loop, all the colours are at the end of SPRITE_GFX_SUB (index 252 to 255). Shouldn't the transparency colour be at index 0 instead of index 255? Maybe that explains my situation? Any ideas on what I'm doing wrong in that case with creating a pcx file?
<br/>
<br/>
<br/>
<br/>
If nobody can answer the above questions, but have got sprites working properly, I'd like to ask if you could provide a sample pcx file, with either properly converted .bin-files (graphics + palette) or a properly converted .h-file. This so I can test if it's definitely not something wrong in my code, but with sprite graphics creating and/or converting.
<br/>
Also, what programs do you use to convert the pcx file to a sprite? And what settings did you use to save the picture as a pcx file?
<br/>
<br/>
Thanks in advance.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82450 - Dark Knight ez - Sat May 06, 2006 2:49 pm</h4>
    <div class="postbody"><span class="postbody">Looking through topics in the Graphics forum, I came across a reply which helped me out. Photoshop inverts the palette (as I noticed using pcx2sprite), so that makes the last palette entry the transparency entry.
<br/>
This fixed my problem. :)
<br/>
Posted the "solution" in this old topic, just in case it might be of some help to someone in the future.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
