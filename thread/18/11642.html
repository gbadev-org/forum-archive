<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>How do you set the memory used for a background? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > How do you set the memory used for a background?</h2>
<div id="posts">
<div class="post">
    <h4>#108332 - thegamefreak0134 - Tue Nov 07, 2006 9:19 pm</h4>
    <div class="postbody"><span class="postbody">Having found no way to use sprites from the VRAM_B only, I need to cause my extended rotration background to show up on the mainscreen from bank A.
<br/>
<br/>
The code I have to do this is found here:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
videoSetMode(MODE_5_2D | DISPLAY_SPR_ACTIVE | DISPLAY_SPR_1D | DISPLAY_BG3_ACTIVE);
<br/>
vramSetBankA(VRAM_A_MAIN_SPRITE);
<br/>
   
<br/>
   
<br/>
videoSetModeSub(MODE_5_2D | DISPLAY_BG2_ACTIVE);
<br/>
   
<br/>
vramSetBankB(VRAM_B_MAIN_BG_0x6000000);
<br/>
vramSetBankC(VRAM_C_SUB_BG_0x6200000);
<br/>
BG3_CR = BG_BMP16_256x256;
<br/>
   
<br/>
BG3_XDX = (1&lt;&lt;8);
<br/>
BG3_XDY = 0;
<br/>
BG3_YDX = 0;
<br/>
BG3_YDY = (1&lt;&lt;8);
<br/>
BG3_CY = 0;
<br/>
BG3_CX = 0;
<br/>
... more stuff for setting up the subscreen.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Now, the subscreen stuff works fine. My problem is that writing to memory addrerss 0x6000000 displays nothing on the screen, whereas writing to memory address 0x6200000 displays stuff on the subscreen like I expected it to.
<br/>
<br/>
Am I just totally missing some initialization here? Bank C appears to be working, bank A appears to be working, bank B does nothing. (ie, I can draw an the bottom screen and my sprites show up on the top screen, but the background on the top screen, which is drawn to later in the code, has no effect.)
<br/>
<br/>
This really causes grief on my part in many respects. Any help at all (a reply at all would work) would make me excessively happy.
<br/>
<br/>
-thegamefreak<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108336 - Lick - Tue Nov 07, 2006 9:23 pm</h4>
    <div class="postbody"><span class="postbody"><span style="font-style: italic">"Now, the subscreen stuff works fine. My problem is that writing to memory addrerss 0x6000000 displays nothing on the screen, .."</span>
<br/>
<br/>
Show us this piece of code. I suspect that you aren't setting BIT(15) which is the Alpha bit.<br/>_________________<br/><a class="postlink" href="http://licklick.wordpress.com" target="_blank">http://licklick.wordpress.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#108337 - thegamefreak0134 - Tue Nov 07, 2006 9:24 pm</h4>
    <div class="postbody"><span class="postbody">... I feel... Really stupid... When I was converting from framebuffer mode to extended rotational background mode, I forgot to set bit 15. Everything was working fine, and drawing a transparent background that I could not see. Gee dont I feel stupid for panicking over the course of two class periods.
<br/>
<br/>
I appologize for posting this, its no longer relavent (although I still need help on the whole sprites thing) so could a mod please remove? Thanks...
<br/>
<br/>
-gamefreak - no longer freaking out
<br/>
<br/>
EDIT: Darn you and your ninja skills. I figured the problem out right after I posted, but thanks. You nailed it.<br/>_________________<br/>What if the hokey-pokey really is what it's all about?
<br/>
<br/>
[url=http:/www.darknovagames.com/index.php?action=recruit&amp;clanid=1]Support Zeta on DarkNova![/url]</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
