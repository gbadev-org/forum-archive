<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprite memory issue? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Sprite memory issue?</h2>
<div id="posts">
<div class="post">
    <h4>#68517 - knight0fdragon - Wed Jan 25, 2006 8:28 am</h4>
    <div class="postbody"><span class="postbody">OK now reading some of the examples I come across this in an example
<br/>
<br/>
<span style="color: blue">vramSetMainBanks(   VRAM_A_MAIN_SPRITE,        //A and B maped consecutivly as sprite memory
<br/>
                        VRAM_B_MAIN_SPRITE,        //this gives us 256KB which is the max
<br/>
                        VRAM_C_MAIN_BG_0x6000000,  //map C to background memory
<br/>
                        VRAM_D_LCD                 //not using D
<br/>
                        ); </span>
<br/>
<br/>
now from what I am understanding, this is 256KBytes of RAM.
<br/>
<br/>
but if I were to use the SPRITE+GFX,  i cannot go past 32k with the OAM.
<br/>
<br/>
<br/>
<br/>
<br/>
I would still like a way to use some more memory, this way i can make my card game
<br/>
<br/>
How were i go do this.  because I need 212992 bytes for sprite memory
<br/>
<br/>
my formula (W33 * H49) * Spr52 .. (becomes (W64 * H64) * Spr52<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68546 - nmain - Wed Jan 25, 2006 4:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>knight0fdragon wrote:</b></span></td> </tr> <tr> <td class="quote">OK now reading some of the examples I come across this in an example
<br/>
<br/>
<span style="color: blue">vramSetMainBanks(   VRAM_A_MAIN_SPRITE,        //A and B maped consecutivly as sprite memory
<br/>
                        VRAM_B_MAIN_SPRITE,        //this gives us 256KB which is the max
<br/>
                        VRAM_C_MAIN_BG_0x6000000,  //map C to background memory
<br/>
                        VRAM_D_LCD                 //not using D
<br/>
                        ); </span>
<br/>
<br/>
now from what I am understanding, this is 256KBytes of RAM.
<br/>
<br/>
but if I were to use the SPRITE+GFX,  i cannot go past 32k with the OAM.
<br/>
<br/>
<br/>
<br/>
<br/>
I would still like a way to use some more memory, this way i can make my card game
<br/>
<br/>
How were i go do this.  because I need 212992 bytes for sprite memory
<br/>
<br/>
my formula (W33 * H49) * Spr52 .. (becomes (W64 * H64) * Spr52</td> </tr></table><span class="postbody">
<br/>
<br/>
Make each card 32 x 48 and use two OAM entries to draw it; one 32x32 and one 32x16.  total vram needed for sprite tiles becomes 78K at 8bpp or 39K at 4bpp.  If you need to get it down more you probably can; put on the thinking cap ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68552 - knight0fdragon - Wed Jan 25, 2006 5:39 pm</h4>
    <div class="postbody"><span class="postbody">yea, i have been thinkin about doing stuff like that,  I was just hoping that i was able to have more then the 32K that the OAM has to offer, like perhaps theres another OAM or something that points to a different set of memory( and i do not mean the Sub one).  Oh well though back to the drawing board.  I will have to pull some fancy manuvering to reduce it to 32K,  like drawing only half the diamonds and what not<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68558 - nmain - Wed Jan 25, 2006 6:20 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>knight0fdragon wrote:</b></span></td> </tr> <tr> <td class="quote">yea, i have been thinkin about doing stuff like that,  I was just hoping that i was able to have more then the 32K that the OAM has to offer, like perhaps theres another OAM or something that points to a different set of memory( and i do not mean the Sub one).  Oh well though back to the drawing board.  I will have to pull some fancy manuvering to reduce it to 32K,  like drawing only half the diamonds and what not</td> </tr></table><span class="postbody">
<br/>
<br/>
Well my point was expanding to 64x64 is extremely excessive, with less than half of the used vram actually displaying anything.  The dispcnt register lets you select larger amounts of vram than 32K for sprite tiles:
<br/>
<br/>
<a href="http://nocash.emubase.de/gbatek.htm#dsvideo" target="_blank">http://nocash.emubase.de/gbatek.htm#dsvideo</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#68562 - knight0fdragon - Wed Jan 25, 2006 6:38 pm</h4>
    <div class="postbody"><span class="postbody">ok i got it to do some more cards now using DISPLAY_SPR_1D_SIZE_256
<br/>
<br/>
all i got to do now is prob trim the cards to 31x47 (32x48) and ill have all the cards showing,  im just worried about having 104 sprites used of the 128, but thats ok I will make it work if neccessary<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
