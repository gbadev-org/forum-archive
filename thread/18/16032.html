<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>libhax (to many bugs) - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > libhax (to many bugs)</h2>
<div id="posts">
<div class="post">
    <h4>#162702 - hacker013 - Tue Sep 09, 2008 8:20 pm</h4>
    <div class="postbody"><span class="postbody">Hey everybody,
<br/>
<br/>
I'm busy with a new program but i've written a basic library for it so i could use that in other programs but that library has so many bugs that it won't compile.
<br/>
<br/>
bugs:
<br/>
multiple defination.
<br/>
not yet working fifo (can't test it because library won't compile)
<br/>
memory bugs (pointers and stuff)
<br/>
<br/>
Can anybody help me to fix it. You get credit for it, and i release the library as libhax (version 0.3). I haven't released 0.2 also because it had to many bugs, please can anybody help me with this??
<br/>
<br/>
<a class="postlink" href="http://host-a.net/hacker013/xsystem.zip" target="_blank">Download xsystem.zip</a>
<br/>
<br/>
ltr,
<br/>
<br/>
Hacker013<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162703 - gauauu - Tue Sep 09, 2008 8:39 pm</h4>
    <div class="postbody"><span class="postbody">This is your libhax that we're talking about, right, which won't compile?
<br/>
<br/>
You've been working on it for awhile...have you been compiling or testing as you go to make sure that blocks of code work (or at least compile)?   Maybe I'm misunderstanding your post, but it sounds as if you typed it all, then at the end hit compile, and it's not compiling.  While one of us could go through and try to fix your bugs (I don't have time to do that, but maybe someone else does), you could learn more from the process of finding and fixing them yourself.
<br/>
<br/>
First:  Make your cycle of  writing code/compiling/testing smaller, so that instead of having a zillion bugs to fix, you only have a few.  When they are fixed, add new code.  It's MUCH more manageable that way.  
<br/>
<br/>
Second:  Your multiple definition issue is occurring because you have  definitions in your header files.  For example, in hax_font.h:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
char *fontline[4] = {    "abcdefghijklmnopqrstuvwxyz",
<br/>
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
<br/>
                  "0123456789=!\"?$%&amp;/()&lt;&gt;,.-+",
<br/>
                  "*~#;:_|@??\{[]}??| " } ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Whenever you try to include this, is tries to redefine it.  Instead, put the declaration in your header, and move the definition to hax_font.c.
<br/>
<br/>
hax_font.h:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
char * fontline[]; // or extern char * fontline[];
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
hax_font.c:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
char *fontline[4] = {    "abcdefghijklmnopqrstuvwxyz",
<br/>
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
<br/>
                  "0123456789=!\"?$%&amp;/()&lt;&gt;,.-+",
<br/>
                  "*~#;:_|@??\{[]}??| " } ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Third:  About the memory bugs and fifo....get your code compiling, and mostly working first.  Then feel free to come back with specific questions to help solve those problems  ;-)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162714 - hacker013 - Wed Sep 10, 2008 3:31 pm</h4>
    <div class="postbody"><span class="postbody">Thank you for the tips, i try it again:D
<br/>
<br/>
Edit can anyone look at the screen and font code because it is al scruded up.<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162816 - hacker013 - Sat Sep 13, 2008 2:33 pm</h4>
    <div class="postbody"><span class="postbody">anybody??<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162818 - Maxxie - Sat Sep 13, 2008 3:52 pm</h4>
    <div class="postbody"><span class="postbody">MightyMax's:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
char *fontline[4] = {    "abcdefghijklmnopqrstuvwxyz",
<br/>
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
<br/>
                  "0123456789=!\"?$%&amp;/()&lt;&gt;,.-+",
<br/>
                  "*~#;:_|@??\{[]}??| " } ;
<br/>
<br/>
void intern_GFX_printCharCol(int x, int y,char ch,unsigned short col,unsigned short bg) {
<br/>
   /* copy 8x13 pixels from char location */
<br/>
   /* search location of char */
<br/>
   int i,q ;
<br/>
   char *loc_ch ;
<br/>
   int px = -1,py = -1 ;
<br/>
   for (i=0;i&lt;4;i++) {
<br/>
      loc_ch = fontline[i] ;
<br/>
      q = 0 ;
<br/>
      while (*loc_ch) {
<br/>
         if (*loc_ch == ch) {
<br/>
            px = q*8 ;
<br/>
            py = i*13 ;
<br/>
         } ;
<br/>
         loc_ch++ ;
<br/>
         q++ ;
<br/>
      } ;
<br/>
   } ;
<br/>
   unsigned short *font = (unsigned short *)0x06020000 ;
<br/>
   unsigned short *screen = (unsigned short *)0x06000000 ;
<br/>
   if ((px&lt;0) || (py &lt; 0)) {
<br/>
      return ;
<br/>
   } ;
<br/>
   if (bg &amp; 0x8000) {
<br/>
      for (i=0;i&lt;13;i++) {
<br/>
         for (q=0;q&lt;8;q++) {
<br/>
            if (font[q+px + (i+py)*256] &amp; ~0x8000) {
<br/>
               screen[q+x + (i+y)*256] = col ;
<br/>
            } else {
<br/>
               screen[q+x + (i+y)*256] = bg ;
<br/>
            } ;
<br/>
         } ;
<br/>
      } ;
<br/>
   } else {
<br/>
      for (i=0;i&lt;13;i++) {
<br/>
         for (q=0;q&lt;8;q++) {
<br/>
            if (font[q+px + (i+py)*256] &amp; ~0x8000) {
<br/>
               screen[q+x + (i+y)*256] = col ;
<br/>
            } else {
<br/>
               // only set background if color was charcolor
<br/>
               if (screen[q+x + (i+y)*256] == col) screen[q+x + (i+y)*256] = bg | 0x8000;
<br/>
            } ;
<br/>
         } ;
<br/>
      } ;
<br/>
   }
<br/>
} ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Your's
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
char *fontline[4] = {    "abcdefghijklmnopqrstuvwxyz",
<br/>
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
<br/>
                  "0123456789=!\"?$%&amp;/()&lt;&gt;,.-+",
<br/>
                  "*~#;:_|@??\{[]}??| " } ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void hax_draw_charcol(bool scr, int x, int y,char ch,unsigned short col,unsigned short bg) {
<br/>
   /* copy 8x13 pixels from char location */
<br/>
   /* search location of char */
<br/>
   int i,q ;
<br/>
   char *loc_ch ;
<br/>
   int px = -1,py = -1 ;
<br/>
   for (i=0;i&lt;4;i++) {
<br/>
      loc_ch = fontline[i] ;
<br/>
      q = 0 ;
<br/>
      while (*loc_ch) {
<br/>
         if (*loc_ch == ch) {
<br/>
            px = q*8 ;
<br/>
            py = i*13 ;
<br/>
         } ;
<br/>
         loc_ch++ ;
<br/>
         q++ ;
<br/>
      } ;
<br/>
   } ;
<br/>
   unsigned short *font = (unsigned short *)0x06028000 ;
<br/>
   unsigned short *screen;
<br/>
   if (scr==0) {
<br/>
      screen = (unsigned short *)0x06008000 ;
<br/>
   } else {
<br/>
      screen = (unsigned short *)0x06208000 ;
<br/>
   }
<br/>
   if ((px&lt;0) || (py &lt; 0)) {
<br/>
      return ;
<br/>
   } ;
<br/>
   if (bg &amp; 0x8000) {
<br/>
      for (i=0;i&lt;13;i++) {
<br/>
         for (q=0;q&lt;8;q++) {
<br/>
            if (font[q+px + (i+py)*256] &amp; ~0x8000) {
<br/>
               screen[q+x + (i+y)*256] = col ;
<br/>
            } else {
<br/>
               screen[q+x + (i+y)*256] = bg ;
<br/>
            } ;
<br/>
         } ;
<br/>
      } ;
<br/>
   } else {
<br/>
      for (i=0;i&lt;13;i++) {
<br/>
         for (q=0;q&lt;8;q++) {
<br/>
            if (font[q+px + (i+py)*256] &amp; ~0x8000) {
<br/>
               screen[q+x + (i+y)*256] = col ;
<br/>
            } else {
<br/>
               // only set background if color was charcolor
<br/>
               if (screen[q+x + (i+y)*256] == col) screen[q+x + (i+y)*256] = bg | 0x8000;
<br/>
            } ;
<br/>
         } ;
<br/>
      } ;
<br/>
   }
<br/>
} ;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
At least add a line which credits the original author if you take it.<br/>_________________<br/><a class="postlink" href="http://nintendods.desperate-programmers.com/doku.php?id=wireless_io_map" target="_blank">Trying  to bring more detail into understanding the wireless hardware</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162821 - Kyoufu Kawa - Sat Sep 13, 2008 4:56 pm</h4>
    <div class="postbody"><span class="postbody">Right down to unnecessary semicolons... ouch.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162825 - hacker013 - Sat Sep 13, 2008 6:41 pm</h4>
    <div class="postbody"><span class="postbody">@Maxxie
<br/>
<br/>
Ok, if added the credits for MightyMax, are you now happy?<br/>_________________<br/><a class="postlink" href="http://imetal.nl/" target="_blank">Website / Blog</a>
<br/>
<br/>
Let the nds be with you.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
