<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>broken zlib - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > broken zlib</h2>
<div id="posts">
<div class="post">
    <h4>#82798 - hiddenface - Wed May 10, 2006 3:24 am</h4>
    <div class="postbody"><span class="postbody">Hi,
<br/>
<br/>
I recently wanted to load sprites from png files and thus grabbed davr's packaged libpng_ds.zip and compiled it with devkitARM r18.
<br/>
Everything seemed fine and loading small images is no problem.
<br/>
But: If i try to load slightly larger pngs (e.g. 96x96) my program fails with an "invalid window size" error.
<br/>
This message originates in zlib and I have no idea what to do about it.
<br/>
Strange thing: when I use the precompiled libz.a from thoduv everything works as expected.
<br/>
I tried several devkitARM revisions back and that didn't change anything.
<br/>
I'm kinda clueless.
<br/>
Any ideas?
<br/>
<br/>
Thanks
<br/>
Hiddenface</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82820 - duencil - Wed May 10, 2006 2:14 pm</h4>
    <div class="postbody"><span class="postbody">You could try setting  -DMAX_WBITS=15 in the makefile. Your memory requirements for decompression will increase to 32K though, and for compression to 256K.
<br/>
<br/>
Not sure why the precompiled lib would work though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82848 - josath - Wed May 10, 2006 7:37 pm</h4>
    <div class="postbody"><span class="postbody">yeah, i may have set the window bits lower when i was trying to get it to work. just increase it in the makefile and that should fix it.
<br/>
<br/>
the reasone the precompiled one works, is because it was precompiled by someone else.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#82934 - hiddenface - Thu May 11, 2006 7:25 am</h4>
    <div class="postbody"><span class="postbody">Thank you very much, off course that was it, though I could have sworn I tried to tweak every parameter in the Makefile at one point... well back to work :)</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
