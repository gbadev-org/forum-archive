<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Compression on DS - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Compression on DS</h2>
<div id="posts">
<div class="post">
    <h4>#45960 - headspin - Fri Jun 17, 2005 7:03 am</h4>
    <div class="postbody"><span class="postbody">Just have a few questions about using compression on DS..
<br/>
<br/>
1. DS has built in ADPCM playback, right? So how can one do this.
<br/>
<br/>
2. Is DS ADPCM format generic, eg. same as Tepples 8ad (www.pineight.com/gba/) or sox (sox.sourceforge.net) ADPCM output? In other words can I use these conversion programs to create compatible ADPCM format audio for DS or does someone have to build specific convertor for DS.
<br/>
<br/>
3. How about GSM playback? Has anyone got Tepples code working for DS yet?
<br/>
<br/>
4. Anyone have a JPEG decompressor jpg -&gt;VRAM (BGR15) available?
<br/>
<br/>
5. What other image decompression routines BIOS or otherwise are there (same as GBA? Diff/Huff/RL/lz77).
<br/>
<br/>
Is it as easy as GBA BIOS unpack routines? Can ARM9 use them? Can I use GBACrusher to compress? Anyone have some examples I can borrow, or know a demo with source that uses compression for gfx/audio?
<br/>
<br/>
Thanks for any help on this.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45963 - newbiecoders - Fri Jun 17, 2005 9:10 am</h4>
    <div class="postbody"><span class="postbody">I second that question. With the 4meg EWRAM limit this is exactly what I need to keep the catridge size down. I look forward to your replies!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45967 - Mollusk - Fri Jun 17, 2005 10:49 am</h4>
    <div class="postbody"><span class="postbody">Check out this link <a class="postlink" href="http://members.iinet.net.au/~freeaxs/gbacomp/" target="_blank">http://members.iinet.net.au/~freeaxs/gbacomp/</a> for image compression... it's for gba, but should work on DS I guess.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45969 - headspin - Fri Jun 17, 2005 11:21 am</h4>
    <div class="postbody"><span class="postbody">Yeah thanks, I wrote that ;) I just want to see if anyone is already using compression with DS that can give some advice before I go ahead with my own research. It would be nice to hear what <span style="font-style: italic">experience</span> coders have with using it on the DS.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45974 - headspin - Fri Jun 17, 2005 1:02 pm</h4>
    <div class="postbody"><span class="postbody">Ok, just got JPEG decompressor from my GBA compression site to work on DS with a few slight modifications.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45975 - Mollusk - Fri Jun 17, 2005 1:04 pm</h4>
    <div class="postbody"><span class="postbody">Oh, very interesting ! What modifications ?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45977 - headspin - Fri Jun 17, 2005 1:31 pm</h4>
    <div class="postbody"><span class="postbody">Download the modified library from <a href="http://headkaze.webpal.info/" target="_blank">http://headkaze.webpal.info/</a> . The readme.txt explains the modifications.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45979 - Mollusk - Fri Jun 17, 2005 1:34 pm</h4>
    <div class="postbody"><span class="postbody">Thanks, I'll try that out now :p</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45982 - headspin - Fri Jun 17, 2005 2:13 pm</h4>
    <div class="postbody"><span class="postbody">I've added an NDSLib JPEG example based on Dovoto's code.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45986 - Mollusk - Fri Jun 17, 2005 3:50 pm</h4>
    <div class="postbody"><span class="postbody">Headspin, stupid me ! I just saw YOU had posted this topic... Next time I'll check out who asks before giving links :p</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#45987 - tepples - Fri Jun 17, 2005 3:52 pm</h4>
    <div class="postbody"><span class="postbody">There's IMA ADPCM, there's 8ad, and then there's Nintendo's proprietary format. IMA ADPCM is the standard format. 8ad is a minor variation on IMA ADPCM with a different quantization table and different step-size-change tables, both modified to help alleviate the slope overload problem that I found when testing IMA ADPCM with music. They're not bitstream compatible, but the 8ad decoder can be recompiled to decode IMA ADPCM.
<br/>
<br/>
The big differences between basic ADPCM (IMA, 8ad, etc) and LPC (GSM Full Rate, Speex, etc) are as follows: <ul><li>ADPCM uses a static predictor, pred[n] = output[n + 1]. LPC uses a more accurate short-term predictor of the next sample based on a weighted sum of the previous 8-16 samples; most implementations also use "long term prediction" that adds an additional term several dozen samples backward, useful for speech or for consonant harmony. </li><li>ADPCM most often uses a simple uniform or Lloyd-Max quantization of the samples. The better predictor allows LPC to use "trickier" methods; for example, GSM Full Rate stores only every third sample ("regular pulse excitation"), and Speex keeps a "code book" of various patterns, each several samples in length. </li></ul>
<br/>
With the extra CPU power of the Nintendo DS, you could probably run <span style="font-style: italic">two</span> GSM Full Rate decoders at 32 kHz each, for nearly CD quality stereo, but that won't be very useful until the GBA Movie Player (or some other storage medium larger than 32 MB) is fully cracked.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46050 - dovoto - Sat Jun 18, 2005 10:42 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">There's IMA ADPCM, there's 8ad, and then there's Nintendo's proprietary format. </td> </tr></table><span class="postbody">
<br/>
<br/>
Have the ADPCM capabilities on DS been verified to be proprietary?  This is the first I have heard of it but have not looked too deep.
<br/>
<br/>
<br/>
As to compression I believe the bios (arm9 and arm7) still supports the GBA compression rutiens.  THere is also a built in texture compression type for which i have some display code (but no compression code).<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46265 - LunarCrisis - Wed Jun 22, 2005 4:06 pm</h4>
    <div class="postbody"><span class="postbody">Is there info on the compressed texture format so that others could write compression code, or does that still have to be reverse-engineered?<br/>_________________<br/>If a tree falls in the forest and no one is there to hear it, why the heck do you care?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46266 - dovoto - Wed Jun 22, 2005 4:27 pm</h4>
    <div class="postbody"><span class="postbody">Someone allready did some work on the format using the metroid demo...they were able to decompress the textures but compression is a bit harder.  I will find out if he minds me sharing his code (I assume he will not) then I will post it.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
