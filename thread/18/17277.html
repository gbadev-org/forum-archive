<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Libnds World Coords. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Libnds World Coords.</h2>
<div id="posts">
<div class="post">
    <h4>#174282 - Jinroh - Wed May 26, 2010 7:25 pm</h4>
    <div class="postbody"><span class="postbody">Hey all,
<br/>
<br/>
I have a quick question. Since libnds is setup like OpenGL, you don't have easy access to World Coordinates for things like collision and whatever.
<br/>
<br/>
Currently I create my own world matrix and transform my vertices for things like collision myself, anybody do something similar or different?
<br/>
<br/>
Just curious,
<br/>
Jinroh.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174293 - relminator - Thu May 27, 2010 12:44 am</h4>
    <div class="postbody"><span class="postbody">Not sure what you mean here but you always have access to your world coords.  It's the screenspace coords that you don't have access to. 
<br/>
<br/>
Collisions on world space could be done via simple spheres or AABB's.
<br/>
<br/>
DS 3d engine works like this:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">1. Pass your worldspace vertices/normals/textures to the DS 3d registers (GFX_VERTEX16, etc) 
<br/>
2. Modelview matrix transforms your vertices and normals by multiplying your vertices vectors with it. ie: newvector = mat * origvector.
<br/>
3. textures are transformed with the texture matrix. Same as #2
<br/>
4. All transformed coords are projected on screen via the projection matrix.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It's the basic algorithm of doing 3d in both software and hardware.
<br/>
<br/>
If you want to get the screenspace coords, you need to "unproject" your vertices.<br/>_________________<br/><a href="http://rel.betterwebber.com" target="_blank">http://rel.betterwebber.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174296 - Jinroh - Thu May 27, 2010 5:27 am</h4>
    <div class="postbody"><span class="postbody">Thanks for the reply relminator.
<br/>
<br/>
I already coded up my collision system before but was under the impression since the libds is so much like OpenGL that my world coordinates were being hidden from me like OGL.
<br/>
<br/>
I appreciate the info, that makes things less redundant. ^_^<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174299 - kusma - Thu May 27, 2010 10:55 am</h4>
    <div class="postbody"><span class="postbody">A world-space definition doesn't even exist in the eyes of OpenGL. Everything OpenGL sees is the model-space coordinates and the model-&gt;view transformation (i.e the modelview matrix). The same thing goes for nitroGL.
<br/>
<br/>
I'd say that a sane engine would calculate model-&gt;world and world-&gt;view on the CPU, and use OpenGL to multiply these together. Then you'd have access to everything you need for collisions etc.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#174310 - Jinroh - Fri May 28, 2010 5:40 pm</h4>
    <div class="postbody"><span class="postbody">Working on a solution in OpenGL PC. I'll keep you posted.
<br/>
<br/>
EDIT: Solved, the collision detection solution I came up with is quite nice and fast, I'll show off the DS version once I port it over.<br/>_________________<br/><span style="font-style: italic"><span style="font-weight: bold"><span style="color: gray">The lone Wolf howls, driven by pride he presses on. Knowing not where he goes, but only where he wants to be.
<br/>
~Me~</span></span></span></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
