<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Touchscreen Pressure - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Touchscreen Pressure</h2>
<div id="posts">
<div class="post">
    <h4>#46605 - headspin - Tue Jun 28, 2005 12:12 am</h4>
    <div class="postbody"><span class="postbody">Hi, I am a little confused by the setup in NDSLib regarding the pressure of the pen.
<br/>
<br/>
How can I get a percentage of pen pressure from 0-100%?<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46623 - Mollusk - Tue Jun 28, 2005 8:24 am</h4>
    <div class="postbody"><span class="postbody">From what I tested, the pressure isn't really pressure, but rather the size of the touching zone... So the pressure doesn't realy change if you press harder/softer, but changes a lot if you use finger/stylus/anything else...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46625 - josath - Tue Jun 28, 2005 9:07 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>headspin wrote:</b></span></td> </tr> <tr> <td class="quote">Hi, I am a little confused by the setup in NDSLib regarding the pressure of the pen.
<br/>
<br/>
How can I get a percentage of pen pressure from 0-100%?</td> </tr></table><span class="postbody">
<br/>
<br/>
no one has found a formula that works reliably on all DS's.
<br/>
<br/>
and its not like pressure on a wacom tablet where its very smooth, it's much courser. like all you can really tell is hard vs soft, or finger vs stylus.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46680 - headspin - Wed Jun 29, 2005 1:25 am</h4>
    <div class="postbody"><span class="postbody">Has there been any progress in Natrium's code for calculating a pen down event to avoid the random jumps?
<br/>
<br/>
Darkain mentioned in this <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=5649" target="_blank">thread</a> that it's unreliable because of the variations of pressure readings between touchpads.
<br/>
<br/>
What's the best code we have at the moment to prevent these jumps, still Natrium's code...?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">int TouchPad::touchPressed() 
<br/>
{ 
<br/>
   uint16 touchZ1 = IPC-&gt;touchZ1; 
<br/>
   uint16 touchZ2 = IPC-&gt;touchZ2; 
<br/>
   uint16 touchX = IPC-&gt;touchX; 
<br/>
<br/>
   uint16 pressure = (touchX * touchZ2) / (64 * touchZ1) - touchX / 64; 
<br/>
<br/>
   if( pressure &gt; 0 &amp;&amp; pressure &lt; MAX_PRESSURE ) 
<br/>
      return 1; 
<br/>
   else 
<br/>
      return 0; 
<br/>
} </td> </tr></table><span class="postbody"><br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#46682 - josath - Wed Jun 29, 2005 1:40 am</h4>
    <div class="postbody"><span class="postbody">I think you can eliminate the 'jumping pen' effect without even using pressure. There are various calculations that can be done.
<br/>
<br/>
one example:
<br/>
For each X,Y you read from the touchpad, check if it is more than N pixels away from the previous reading, then don't use that value.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
