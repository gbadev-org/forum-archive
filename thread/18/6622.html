<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Custom scripting language for DS game engine - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Custom scripting language for DS game engine</h2>
<div id="posts">
<div class="post">
    <h4>#51426 - cybereality - Fri Aug 19, 2005 2:20 pm</h4>
    <div class="postbody"><span class="postbody">I am concidering writing a custom scripting language for the DS to ease development of games. I am mainly a Flash programmer (though I am familiar with many languages including java and C++). I would hate to have to write gameplay code using C++ and I think a scripting language would save a lot of time in the long run. I imagine the language being similar to Blitz3D if any of you have used that. Basically the language would cover up all the complex wiring of the engine and allow you to just focus on gameplay. For example, the following psuedo-code would load a level, load a character and accept controls:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// initialize scene
<br/>
initialize3dScene();
<br/>
<br/>
// load assets
<br/>
castle = load3dModel(castle.x);
<br/>
castleTexure = loadTexture(castle.pcx);
<br/>
textureModel(castle, castleTexture);
<br/>
mario = load3dModel(mario.x);
<br/>
marioTexture = loadTexture(mario.pcx);
<br/>
textureModel(mario, marioTexture);
<br/>
<br/>
// setup scene
<br/>
move3dObject(mario, 150, 0, 50);
<br/>
<br/>
// main loop
<br/>
while(1){
<br/>
     // player controls
<br/>
    if(Button.UP){
<br/>
         adjust3dObject(mario, 0, 0, 5);
<br/>
    } else if(Button.DOWN){
<br/>
         adjust3dObject(mario, 0, 0, -5);
<br/>
    } else if(Button.LEFT){
<br/>
         adjust3dObject(mario, 5, 0, 0);
<br/>
    } else if(Button.RIGHT){
<br/>
         adjust3dObject(mario, -5, 0, 0);
<br/>
    }
<br/>
    // update screen buffer
<br/>
    update3dScene();
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
I think this could be very helpful for creating modular code and facilitate rapid-prototyping of games. If this idea proves successful I will release the language along with a dev environment that will support it. Is this something of interest to the homebrew community? If anyone else has some experience with DS development (my NeoFlash should be coming soon), please point me in the right direction. Thanks
<br/>
<br/>
// cybereality</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51435 - mike260 - Fri Aug 19, 2005 3:42 pm</h4>
    <div class="postbody"><span class="postbody">Designing and implementing a whole new language might be overkill; does Lua not suit your needs?
<br/>
<br/>
On the other hand, writing a high-level 3D library to expose through a scripting-language is a great idea.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51437 - Phan - Fri Aug 19, 2005 4:11 pm</h4>
    <div class="postbody"><span class="postbody">Sounds pretty good. It would be simpler than what we have now, thats for sure.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51452 - sajiimori - Fri Aug 19, 2005 7:38 pm</h4>
    <div class="postbody"><span class="postbody">The pseudocode you posted looks so similar to C that I wonder why you wouldn't just use C.  Lua offers things that C++ does not, including garbage collection, closures, and coroutines.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51464 - Volta - Sat Aug 20, 2005 12:06 am</h4>
    <div class="postbody"><span class="postbody">In fact, he's actually proposing a kind of HAM DS...
<br/>
<br/>
It's currently really difficult to program something "useful" (a real game, I mean) on the DS because there is no such templates or structure built. LIBNDS is a really good start but for some features (micro, sound, tiles compared to the gba) it is still difficult for a DS newbie programmer to code something nice on a short period of time (which is essential if we want a strong community).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51486 - cybereality - Sat Aug 20, 2005 8:53 am</h4>
    <div class="postbody"><span class="postbody">Volta, I think you got my idea exactly. The point would be that the engine would be open to the community so we all wouldn't be re-writing the same code and wasting time. I know you could set something up similar in C using functions, but this would handle all the backend stuff automatically. Once it worked it could just be imported as a library and reuseable. Again, I am just getting into the DSdev scene and I have not used all the tools available. What I have seen looks like it may get complex with a more full featured game, so I was looking for a simple solution. There could be default templates for lets say a menu screen or a 3d scene, collision, etc. I also wanted create something that would allow beginner programmers or flash programmers to get started creating games quickly. Once I get deeper into DS development, I'll know better if this is even going to be necessary. I am not familiar with HAM, whats that (google didn't turn up anything useful)? Thanks.
<br/>
<br/>
// cybereality</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51489 - Shoxz - Sat Aug 20, 2005 10:13 am</h4>
    <div class="postbody"><span class="postbody">make the script like VB and ill love you :P<br/>_________________<br/><span style="font-weight: bold">-Shoxz, </span>
<br/>
Webdesigner
<br/>
PHP, HTML, and VB programmer
<br/>
<br/>
Also known as Unreal, and Kez.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51499 - sajiimori - Sat Aug 20, 2005 7:06 pm</h4>
    <div class="postbody"><span class="postbody">Okay, so you want a library, not a new language.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51503 - Volta - Sat Aug 20, 2005 7:54 pm</h4>
    <div class="postbody"><span class="postbody">I think that a new language would be a waste of time - as you say, we only need "shortcuts" to achieve specific tasks. Of course, it's not about creating something for newbies only, but for example, if it's possible to access each button via a defined variable which a name that make sence (instead of having to check a bit in a registry), it would be nice.
<br/>
<br/>
HAM GBA was the perfect example. Using it, I created a small technical demo  of a tile based system with a collision map and depth of field. It was only what I needed to get a job in a videogame company (of course, I had other studies, but that's another story). What I mean is that I was able to create something impressive that was not resource consuming. 
<br/>
<br/>
LIBNDS is a good example but it's not complete. Guys are working hard to improve it but it seems that for some coders, if something is easy to do (using a variable "BTNY_PRESSED" instead of a registry bit to check), it has no merit. I say False: easier programmation will only help us to make more complex (read: complete) projects.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51505 - mike260 - Sat Aug 20, 2005 8:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Volta wrote:</b></span></td> </tr> <tr> <td class="quote">LIBNDS is a good example but it's not complete. Guys are working hard to improve it but it seems that for some coders, if something is easy to do (using a variable "BTNY_PRESSED" instead of a registry bit to check), it has no merit. I say False: easier programmation will only help us to make more complex (read: complete) projects.</td> </tr></table><span class="postbody">
<br/>
<br/>
Why don't you contribute this code yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51512 - sajiimori - Sat Aug 20, 2005 9:36 pm</h4>
    <div class="postbody"><span class="postbody">Volta, bitfield checks aren't just harder than having separate defines for checking every key.  Try writing the anyKeyPressed() function using each method.  Also try writing bothPressed(key, key).</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51514 - Sausage Boy - Sat Aug 20, 2005 10:03 pm</h4>
    <div class="postbody"><span class="postbody">libnds isn't supposed to be like ham, it's merely a set of defines and macro's to give meaningful names to the registers. It's not supposed to be like ham. But, you can easily write your own lib, there is PA_lib for those who can't handle the raw power...<br/>_________________<br/>"no offense, but this is the gayest game ever"</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51515 - Volta - Sat Aug 20, 2005 11:25 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>mike260 wrote:</b></span></td> </tr> <tr> <td class="quote">Why don't you contribute this code yourself?</td> </tr></table><span class="postbody">
<br/>
<br/>
It was not a critic and I don't say that libnds is a bad thing; as Sausage Boy said, libnds is just not like ham.
<br/>
<br/>
It's not about "raw power" it's about good, simplified and clean code.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#51518 - cybereality - Sun Aug 21, 2005 12:23 am</h4>
    <div class="postbody"><span class="postbody">Yeah, right on. Creating a good game should be about good concepts and solid gameplay programming, not just low-level coding. Looking back, I think this would basically just be a library. At first I imagined it as a stand-alone front end to the many DSdev tools already available. So you could code the game in the simplified language, run test builts that would display in the 3d preview window and export an NDS file directly from the program. Think of it as a DS Development Studio type of program. This may be not worth the effort to put together, but if it worked well it would save us all a lot of time. I just got my NeoFlash this morning and I tested out a few of the demos available online. Good stuff. I am totally stoked on writing some of my own demos this weekend. Then at least I can get a feel for the current development environment. 
<br/>
<br/>
// cybereality</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53503 - Darkain - Thu Sep 08, 2005 8:51 pm</h4>
    <div class="postbody"><span class="postbody">i see quite a few people mention Lua, which i used to use myself as well.  earlier this year, i switched all of my Lua projects over to LuaPlus, which is geared more specifically to integrate into C++, while retaining all of the features that Lua had.  i think LuaPlus is a little trickier to setup for the first time, but when you get the hang of it, it does offer some NICE added functionality that i always wished that Lua had in it.<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53528 - Mollusk - Fri Sep 09, 2005 12:10 am</h4>
    <div class="postbody"><span class="postbody">If the problem is just libnds being to 'low-level', then PAlib should be just what you are looking for...
<br/>
<br/>
Libnds was never meant to make DS developpement extremely easy to newbies, but just turn the incomprehensible DS registers into comprehensible stuff... That's why nobody can code without it !</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53529 - sajiimori - Fri Sep 09, 2005 12:23 am</h4>
    <div class="postbody"><span class="postbody">Have you seen luabind?  It's pure magic...
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
class Thing
<br/>
{
<br/>
public:
<br/>
  static void staticMethod();
<br/>
  void instanceMethod();
<br/>
};
<br/>
<br/>
void separateFunction(Thing*);
<br/>
<br/>
lua_State* state;
<br/>
<br/>
void exportEverythingToLua()
<br/>
{
<br/>
  module(state)
<br/>
  [
<br/>
    namespace_("Thing")
<br/>
    [
<br/>
      def("staticMethod", &amp;Thing::staticMethod)
<br/>
    ],
<br/>
<br/>
    class_&lt;Thing&gt;("Thing")
<br/>
      .def("instanceMethod", &amp;Thing::instanceMethod)
<br/>
      .def("separateFunction", &amp;separateFunction)
<br/>
  ];
<br/>
}
<br/>
<br/>
// In Lua file...
<br/>
<br/>
Thing.staticMethod()
<br/>
t = Thing()
<br/>
t:instanceMethod()
<br/>
t:separateFunction()
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#53530 - mike260 - Fri Sep 09, 2005 12:37 am</h4>
    <div class="postbody"><span class="postbody">Does LuaPlus let you use a class for lua_Number? I'd like lua to use my fixedpoint class, but lua_Number is used in unions which is a no-no for classes with user-defined constructors.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
