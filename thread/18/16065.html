<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Find the example to use SFX in mikmod - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Find the example to use SFX in mikmod</h2>
<div id="posts">
<div class="post">
    <h4>#163063 - wink99_th - Sun Sep 21, 2008 3:31 am</h4>
    <div class="postbody"><span class="postbody">now I can play music by using mikmod lib. but i would like to play sound effect (wave file). I use libnds play SFX like this
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
void SFX_click()
<br/>
{
<br/>
     TransferSoundData click = {
<br/>
      click_raw,      /* Sample address */
<br/>
      click_raw_size,   /* Sample length */
<br/>
      11025,            /* Sample rate */
<br/>
      127,            /* Volume */
<br/>
      64,               /* panning */
<br/>
      1                /* format */
<br/>
   };
<br/>
   playSound(&amp;click);
<br/>
}
<br/>
</td> </tr></table><span class="postbody">
<br/>
I play SFX alone. It's work. But when I mix between music and SFX, the SFX is weird sound. So i want to change to use mikmod SFX ( play SAMPLE). In mikmod doucument,I think it show how to use  function in PC not in NDS. for example
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    /* load samples */
<br/>
    sfx1 = Sample_Load("first.wav");
<br/>
 </td> </tr></table><span class="postbody">
<br/>
Could someone show me the example code to play SFX by mikmod?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163088 - a128 - Mon Sep 22, 2008 8:00 am</h4>
    <div class="postbody"><span class="postbody">check tetattDS  they do it 
<br/>
<br/>
<a class="postlink" href="http://tetattds.googlecode.com/files/tetattds-2.0-src.zip" target="_blank">http://tetattds.googlecode.com/files/tetattds-2.0-src.zip</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163097 - gauauu - Mon Sep 22, 2008 2:58 pm</h4>
    <div class="postbody"><span class="postbody">Do they?  When I looked at the source recently, they were using libnds's playSound().  
<br/>
<br/>
Of course, they might have also been using mikmod for SFX as well, but if so, I didn't see that code during my cursory viewing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163120 - gauauu - Tue Sep 23, 2008 4:29 am</h4>
    <div class="postbody"><span class="postbody">By the way, I can play my SFX using playSound while mikmod is playing a mod file, and there's no issue...so maybe something else is the problem?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163129 - wink99_th - Tue Sep 23, 2008 1:53 pm</h4>
    <div class="postbody"><span class="postbody">In my opinion, maybe my code take much cpu time? Or  Sound data is not correct. I use audacity to convert a wave sound.
<br/>
this is my code and execute file . Using "B" button to toggle (on-off) music.
<br/>
<a class="postlink" href="http://www.thaigcc.com/nds/Prj-03.7z" target="_blank">http://www.thaigcc.com/nds/Prj-03.7z</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163132 - gauauu - Tue Sep 23, 2008 3:33 pm</h4>
    <div class="postbody"><span class="postbody">What format are your sound files in?  I've tried opening them in audacity, and can't get them to play anything that sounds remotely "normal" to the ear.  
<br/>
<br/>
Try saving them as mono, 8-bit signed pcms, and see if it works.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163134 - wink99_th - Tue Sep 23, 2008 5:07 pm</h4>
    <div class="postbody"><span class="postbody">Thank you gauauu.
<br/>
sound file is wav format. And I covert to .raw file(header less, 8 signed PCM) by audacity. You can play the raw by using menu : Project-&gt; import raw data. The audacity can guess the format sound. I don't know when I stop music , the sfx sound is ok?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#163135 - gauauu - Tue Sep 23, 2008 7:10 pm</h4>
    <div class="postbody"><span class="postbody">In that case, I have no idea.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
