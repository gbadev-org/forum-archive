<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Progress on WiFI functions/registers? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Progress on WiFI functions/registers?</h2>
<div id="posts">
<div class="post">
    <h4>#41378 - Izhido - Wed Apr 27, 2005 11:29 pm</h4>
    <div class="postbody"><span class="postbody">Hi!
<br/>
<br/>
Just wanted to know if there has been any progress on determining the I/O regs / interrupts / whatever required to use WiFi on our homebrew applications.
<br/>
<br/>
I'm currently working on a small "web browser" for the DS, and knowing how to access WiFi on it would help a little :) .
<br/>
<br/>
And, before you say it, yes, I fully understand I *must* implement a TCP/IP stack in my app in order to use the WiFi infrastructure.
<br/>
<br/>
- Izhido</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41395 - olimar - Thu Apr 28, 2005 1:56 am</h4>
    <div class="postbody"><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by olimar on Wed Aug 20, 2008 9:33 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#41397 - dagamer34 - Thu Apr 28, 2005 2:23 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>olimar wrote:</b></span></td> </tr> <tr> <td class="quote">WiFi is still uncharted territory.  After a very quick glance, here's what I managed to dig up for myself (this is all from ARM7):
<br/>
<br/>
4000304 bit 1: enable WiFi
<br/>
Power management bit 4:  turns on WiFi blinkenlights (see <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=5291" target="_blank">this thread</a>)
<br/>
<br/>
4800000 - 48002FF: wifi registers
<br/>
4804000 - 4805FFF: looks like RAM?
<br/>
<br/>
Also take a look at <a class="postlink" href="http://www.bottledlight.com/ds/index.php/Hardware/UnknownRegisters" target="_blank">http://www.bottledlight.com/ds/index.php/Hardware/UnknownRegisters</a>
<br/>
<br/>
Happy Hacking :)</td> </tr></table><span class="postbody">
<br/>
<br/>
....
<br/>
<br/>
The website you gave him probably isn't the best thing in the world. Especially since I doubt he's like a computer and will instantly figure out what that mess is.<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41399 - josath - Thu Apr 28, 2005 2:30 am</h4>
    <div class="postbody"><span class="postbody">haha, some line breaks would be nice, here it is reformatted:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
Possibly wireless (metroid ARM7):
<br/>
<br/>
0x04808044:16, read twice, 8 bits each
<br/>
<br/>
0x04808032:16 = 0x8000
<br/>
0x04808134:16 = 0xFFFF
<br/>
<br/>
0x0480802A:16 = 0
<br/>
0x04808028:16 = 0
<br/>
<br/>
0x048080E8:16 = 1
<br/>
0x04808038:16 = 0xF
<br/>
0x04808030:16 = 0x8000
<br/>
<br/>
<br/>
0x04808010:16 = 0xFFFF
<br/>
0x04808012:16 = 0x3F
<br/>
0x048081AE:16 = 0x1FFF
<br/>
0x048080D0:16 = 0xFFFF
<br/>
0x048080E0:16 = 8
<br/>
0x04808008:16 = 0
<br/>
0x0480800A:16 = 0
<br/>
0x048080E8:16 = 0
<br/>
<br/>
<br/>
<br/>
08001110        mov     r1, #0x1
<br/>
08001114        ldr     r0, =0x04808004
<br/>
08001118        strh    r1, [r0, #0x0]
<br/>
0800111C        mov     r0, #0x40
<br/>
08001120        bl      #0x080016A8
<br/>
08001124        b       #0x080014A4
<br/>
08001128        ldr     r2, =0x00000FFF
<br/>
0800112C        ldr     r1, =0x04808010
<br/>
08001130        strh    r2, [r1, #0x0]
<br/>
08001134        ldr     r2, =0x0000703F
<br/>
08001138        ldr     r1, =0x04808012
<br/>
0800113C        strh    r2, [r1, #0x0]
<br/>
08001140        ldr     r2, =0x00001FFF
<br/>
08001144        ldr     r1, =0x048081AE
<br/>
08001148        strh    r2, [r1, #0x0]
<br/>
0800114C        mov     r2, #0x0
<br/>
08001150        ldr     r1, =0x048081AA
<br/>
08001154        strh    r2, [r1, #0x0]
<br/>
08001158        ldr     r0, [r0]
<br/>
0800115C        add     r0, r0, #0x600
<br/>
08001160        ldrh    r0, [r0, #0x1C]
<br/>
08001164        ands    r0, r0, #0x8
<br/>
08001168        ldrneh  r0, [r1, #0x0]
<br/>
0800116C        orrne   r0, r0, #0x400
<br/>
08001170        strneh  r0, [r1, #0x0]
<br/>
08001174        ldr     r1, =0x00000301
<br/>
08001178        ldr     r0, =0x048080D0
<br/>
0800117C        strh    r1, [r0, #0x0]
<br/>
08001180        mov     r1, #0xD
<br/>
08001184        ldr     r0, =0x048080E0
<br/>
08001188        strh    r1, [r0, #0x0]
<br/>
0800118C        mov     r1, #0xE000
<br/>
08001190        ldr     r0, =0x04808008
<br/>
08001194        strh    r1, [r0, #0x0]
<br/>
08001198        mov     r5, #0x0
<br/>
0800119C        ldr     r0, =0x0480800A
<br/>
080011A0        strh    r5, [r0, #0x0]
<br/>
080011A4        mov     r1, #0x1
<br/>
080011A8        ldr     r0, =0x04808004
<br/>
080011AC        strh    r1, [r0, #0x0]
<br/>
080011B0        add     r6, sp, #0x0
<br/>
080011B4        ldr     r0, =0x048080F8
<br/>
080011B8        ldrh    r0, [r0, #0x0]
<br/>
080011BC        strh    r0, [r6, #0x0]
<br/>
080011C0        ldr     r0, =0x048080FA
<br/>
080011C4        ldrh    r0, [r0, #0x0]
<br/>
080011C8        strh    r0, [r6, #0x2]
<br/>
080011CC        ldr     r0, =0x048080FC
<br/>
080011D0        ldrh    r0, [r0, #0x0]
<br/>
080011D4        strh    r0, [r6, #0x4]
<br/>
080011D8        ldr     r0, =0x048080FE
<br/>
080011DC        ldrh    r0, [r0, #0x0]
<br/>
080011E0        strh    r0, [r6, #0x6]
<br/>
080011E4        ldr     r0, =0x0380FFF4
<br/>
080011E8        ldr     r0, [r0]
<br/>
080011EC        add     r0, r0, #0x300
<br/>
080011F0        ldrh    r0, [r0, #0x6A]
<br/>
080011F4        mov     r4, r0, lsl #10
<br/>
080011F8        ldr     r0, [sp]
<br/>
080011FC        ldr     r1, [sp, #0x4]
<br/>
08001200        mov     r2, r4
<br/>
08001204        mov     r3, r5
<br/>
08001208        bl      #0x08010E70
<br/>
0800120C        str     r0, [sp]
<br/>
08001210        str     r1, [sp, #0x4]
<br/>
08001214        mov     r2, #0x1
<br/>
08001218        adds    r12, r0, r2
<br/>
0800121C        adc     r3, r1, #0x0
<br/>
08001220        str     r12, [sp]
<br/>
08001224        str     r3, [sp, #0x4]
<br/>
08001228        umull   r1,r0,r4,r12
<br/>
0800122C        mla     r0, r12, r5, r0
<br/>
08001230        mla     r0, r3, r4, r0
<br/>
08001234        str     r1, [sp]
<br/>
08001238        str     r0, [sp, #0x4]
<br/>
0800123C        ldrh    r1, [r6, #0x6]
<br/>
08001240        ldr     r0, =0x048080F6
<br/>
08001244        strh    r1, [r0, #0x0]
<br/>
08001248        ldrh    r1, [r6, #0x4]
<br/>
0800124C        ldr     r0, =0x048080F4
<br/>
08001250        strh    r1, [r0, #0x0]
<br/>
08001254        ldrh    r1, [r6, #0x2]
<br/>
08001258        ldr     r0, =0x048080F2
<br/>
0800125C        strh    r1, [r0, #0x0]
<br/>
08001260        ldrh    r0, [r6, #0x0]
<br/>
08001264        orr     r1, r0, #0x1
<br/>
08001268        ldr     r0, =0x048080F0
<br/>
0800126C        strh    r1, [r0, #0x0]
<br/>
08001270        ldr     r0, =0x048080EA
<br/>
08001274        strh    r2, [r0, #0x0]
<br/>
08001278        mov     r0, #0x40
<br/>
0800127C        bl      #0x080016A8
<br/>
08001280        bl      #0x06FD7850
<br/>
08001284        mov     r1, #0x2
<br/>
08001288        ldr     r0, =0x048080AE
<br/>
0800128C        strh    r1, [r0, #0x0]
<br/>
08001290        b       #0x080014A4
<br/>
08001294        ldr     r2, =0x0000FFFF
<br/>
08001298        ldr     r1, =0x04808010
<br/>
0800129C        strh    r2, [r1, #0x0]
<br/>
080012A0        ldr     r2, =0x0000E03F
<br/>
080012A4        ldr     r1, =0x04808012
<br/>
080012A8        strh    r2, [r1, #0x0]
<br/>
080012AC        ldr     r0, [r0]
<br/>
080012B0        add     r0, r0, #0x600
<br/>
080012B4        ldrh    r0, [r0, #0x1C]
<br/>
080012B8        ands    r0, r0, #0x20
<br/>
080012BC        ldrneh  r0, [r1, #0x0]
<br/>
080012C0        orrne   r0, r0, #0xC0
<br/>
080012C4        strneh  r0, [r1, #0x0]
<br/>
080012C8        ldr     r1, =0x00001FFF
<br/>
080012CC        ldr     r0, =0x048081AE
<br/>
080012D0        strh    r1, [r0, #0x0]
<br/>
080012D4        mov     r0, #0x0
<br/>
080012D8        ldr     r1, =0x048081AA:16 = 0
<br/>
080012DC        strh    r0, [r1, #0x0]
<br/>
<br/>
08001350        mov     r1, #0xB
<br/>
08001354        ldr     r0, =0x048080E0
<br/>
08001358        strh    r1, [r0, #0x0]
<br/>
0800135C        mov     r1, #0x0
<br/>
08001360        ldr     r0, =0x04808008
<br/>
08001364        strh    r1, [r0, #0x0]
<br/>
08001368        ldr     r0, =0x0480800A
<br/>
0800136C        strh    r1, [r0, #0x0]
<br/>
08001370        mov     r1, #0x1
<br/>
08001374        ldr     r0, =0x04808004
<br/>
08001378        strh    r1, [r0, #0x0]
<br/>
0800137C        ldr     r0, =0x048080E8
<br/>
08001380        strh    r1, [r0, #0x0]
<br/>
08001384        ldr     r0, =0x048080EA
<br/>
08001388        strh    r1, [r0, #0x0]
<br/>
0800138C        mov     r0, #0x20
<br/>
08001390        bl      #0x080016A8
<br/>
08001394        b       #0x080014A4
<br/>
08001398        ldr     r2, =0x0000FFFF
<br/>
0800139C        ldr     r1, =0x04808010
<br/>
080013A0        strh    r2, [r1, #0x0]
<br/>
080013A4        ldr     r2, =0x0000C03F
<br/>
080013A8        ldr     r1, =0x04808012
<br/>
080013AC        strh    r2, [r1, #0x0]
<br/>
080013B0        ldr     r2, =0x00001FFF
<br/>
080013B4        ldr     r1, =0x048081AE
<br/>
080013B8        strh    r2, [r1, #0x0]
<br/>
080013BC        mov     r2, #0x0
<br/>
080013C0        ldr     r1, =0x048081AA
<br/>
080013C4        strh    r2, [r1, #0x0]
<br/>
080013C8        ldr     r0, [r0]
<br/>
080013CC        add     r0, r0, #0x600
<br/>
080013D0        ldrh    r0, [r0, #0x1C]
<br/>
080013D4        ands    r0, r0, #0x8
<br/>
080013D8        ldrneh  r0, [r1, #0x0]
<br/>
080013DC        orrne   r0, r0, #0x400
<br/>
080013E0        strneh  r0, [r1, #0x0]
<br/>
080013E4        ldr     r0, =0x0380FFF4
<br/>
080013E8        ldr     r0, [r0]
<br/>
080013EC        add     r0, r0, #0x300
<br/>
080013F0        ldrh    r0, [r0, #0x60]
<br/>
080013F4        ands    r0, r0, #0x1
<br/>
080013F8        ldrne   r1, [pc, #0x1AC]
<br/>
080013FC        ldrne   r0, [pc, #0x150]
<br/>
08001400        strneh  r1, [r0, #0x0]
<br/>
08001404        moveq   r1, #0x1
<br/>
08001408        ldreq   r0, [pc, #0x144]
<br/>
0800140C        streqh  r1, [r0, #0x0]
<br/>
08001410        mov     r1, #0xB
<br/>
08001414        ldr     r0, =0x048080E0
<br/>
08001418        strh    r1, [r0, #0x0]
<br/>
0800141C        mov     r2, #0x0
<br/>
<br/>
0x04808008:16 = 0
<br/>
0x0480800A:16 = 0
<br/>
0x04808004:16 = 1
<br/>
0x048080E8:16 = 1
<br/>
0x048080EA:16 = 1
<br/>
0x04808048:16 = 0
<br/>
<br/>
0x04808010:16 = 0xFFFF
<br/>
0x04808012:16 = 0
<br/>
0x048081AE:16 = 0
<br/>
0x04808008:16 = 0
<br/>
0x0480800A:16 = 0
<br/>
0x04808004:16 = 1
<br/>
0x04808048:16 = 0
<br/>
0x048080AE:16 = 2
<br/>
<br/>
0x0480819C:16, tested against 0x80
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41400 - olimar - Thu Apr 28, 2005 2:31 am</h4>
    <div class="postbody"><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by olimar on Wed Aug 20, 2008 9:33 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#41401 - dagamer34 - Thu Apr 28, 2005 2:48 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>olimar wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>dagamer34 wrote:</b></span></td> </tr> <tr> <td class="quote">The website you gave him probably isn't the best thing in the world. Especially since I doubt he's like a computer and will instantly figure out what that mess is.</td> </tr></table><span class="postbody">
<br/>
<br/>
Ah, I see.
<br/>
Sorry I wasted everyone's time.  Next time I'll know better.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
That's not what i meant...
<br/>
<br/>
... never mind
<br/>
<br/>
:/<br/>_________________<br/>Little kids and Playstation 2's don't mix. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41414 - ecurtz - Thu Apr 28, 2005 4:28 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>olimar wrote:</b></span></td> </tr> <tr> <td class="quote">Ah, I see.
<br/>
Sorry I wasted everyone's time.  Next time I'll know better.</td> </tr></table><span class="postbody">
<br/>
<br/>
Looks useful to me. I'll put my nearly nonexistent ARM assembly skills and my reference manual to work converting it to C and seeing if it makes any sense.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41505 - ecurtz - Fri Apr 29, 2005 6:58 am</h4>
    <div class="postbody"><span class="postbody">That wasn't very enlightening, but I did it, so here's the results. It might be a little clearer where things are going out and coming in, and which are flags, or it may not. This is only the middle bit, as the code seems to repeat (at least that's what the edits being where they were implied to me.) I'm sure there are things I messed up, this isn't my forte.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
08001128? ? ? ? ldr? ? ?r2, =0x00000FFF 
<br/>
0800112C? ? ? ? ldr? ? ?r1, =0x04808010 
<br/>
08001130? ? ? ? strh? ? r2, [r1, #0x0]
<br/>
*((short*) REG_UNK_010) = 0x0FFF; 
<br/>
08001134? ? ? ? ldr? ? ?r2, =0x0000703F 
<br/>
08001138? ? ? ? ldr? ? ?r1, =0x04808012 
<br/>
0800113C? ? ? ? strh? ? r2, [r1, #0x0]
<br/>
*((short*) REG_UNK_012) = 0x703F; 
<br/>
08001140? ? ? ? ldr? ? ?r2, =0x00001FFF 
<br/>
08001144? ? ? ? ldr? ? ?r1, =0x048081AE 
<br/>
08001148? ? ? ? strh? ? r2, [r1, #0x0]
<br/>
*((short*) REG_UNK_1AE) = 0x1FFF; 
<br/>
0800114C? ? ? ? mov? ? ?r2, #0x0 
<br/>
08001150? ? ? ? ldr? ? ?r1, =0x048081AA 
<br/>
08001154? ? ? ? strh? ? r2, [r1, #0x0]
<br/>
*((short*) REG_UNK_1AA) = 0x0000;  
<br/>
08001158? ? ? ? ldr? ? ?r0, [r0] 
<br/>
0800115C? ? ? ? add? ? ?r0, r0, #0x600 
<br/>
08001160? ? ? ? ldrh? ? r0, [r0, #0x1C]
<br/>
r0 = (short)((*r0)[0x061C]); // r0 initialized somewhere else
<br/>
08001164? ? ? ? ands? ? r0, r0, #0x8
<br/>
08001168? ? ? ? ldrneh? r0, [r1, #0x0] 
<br/>
0800116C? ? ? ? orrne? ?r0, r0, #0x400 
<br/>
08001170? ? ? ? strneh? r0, [r1, #0x0]
<br/>
if (r0 &amp; 0x0008) { *((short*) REG_UNK_1AA) |= 0x0400;} 
<br/>
08001174? ? ? ? ldr? ? ?r1, =0x00000301 
<br/>
08001178? ? ? ? ldr? ? ?r0, =0x048080D0 
<br/>
0800117C? ? ? ? strh? ? r1, [r0, #0x0]
<br/>
*((short*) REG_UNK_0D0) = 0x0301;   
<br/>
08001180? ? ? ? mov? ? ?r1, #0xD 
<br/>
08001184? ? ? ? ldr? ? ?r0, =0x048080E0 
<br/>
08001188? ? ? ? strh? ? r1, [r0, #0x0]
<br/>
*((short*) REG_UNK_0E0) = 0x000D;    
<br/>
0800118C? ? ? ? mov? ? ?r1, #0xE000 
<br/>
08001190? ? ? ? ldr? ? ?r0, =0x04808008 
<br/>
08001194? ? ? ? strh? ? r1, [r0, #0x0]
<br/>
*((short*) REG_UNK_008) = 0xE000;     
<br/>
08001198? ? ? ? mov? ? ?r5, #0x0 
<br/>
0800119C? ? ? ? ldr? ? ?r0, =0x0480800A 
<br/>
080011A0? ? ? ? strh? ? r5, [r0, #0x0] 
<br/>
*((short*) REG_UNK_00A) = 0x0000;     
<br/>
080011A4? ? ? ? mov? ? ?r1, #0x1 
<br/>
080011A8? ? ? ? ldr? ? ?r0, =0x04808004
<br/>
080011AC? ? ? ? strh? ? r1, [r0, #0x0]
<br/>
*((short*) REG_UNK_004) = 0x0001;      
<br/>
080011B0? ? ? ? add? ? ?r6, sp, #0x0
<br/>
r6 = sp; 
<br/>
080011B4? ? ? ? ldr? ? ?r0, =0x048080F8 
<br/>
080011B8? ? ? ? ldrh? ? r0, [r0, #0x0]
<br/>
080011BC? ? ? ? strh? ? r0, [r6, #0x0]
<br/>
*((short*) r6) = *((short*) REG_UNK_0F8); 
<br/>
080011C0? ? ? ? ldr? ? ?r0, =0x048080FA 
<br/>
080011C4? ? ? ? ldrh? ? r0, [r0, #0x0] 
<br/>
080011C8? ? ? ? strh? ? r0, [r6, #0x2]
<br/>
*((short*) r6 + 2) = *((short*) REG_UNK_0FA); 
<br/>
080011CC? ? ? ? ldr? ? ?r0, =0x048080FC 
<br/>
080011D0? ? ? ? ldrh? ? r0, [r0, #0x0] 
<br/>
080011D4? ? ? ? strh? ? r0, [r6, #0x4] 
<br/>
*((short*) r6 + 4) = *((short*) REG_UNK_0FC); 
<br/>
080011D8? ? ? ? ldr? ? ?r0, =0x048080FE 
<br/>
080011DC? ? ? ? ldrh? ? r0, [r0, #0x0] 
<br/>
080011E0? ? ? ? strh? ? r0, [r6, #0x6] 
<br/>
*((short*) r6 + 6) = *((short*) REG_UNK_0FE); 
<br/>
080011E4? ? ? ? ldr? ? ?r0, =0x0380FFF4 
<br/>
080011E8? ? ? ? ldr? ? ?r0, [r0]
<br/>
r0 = *0x0380FFF4; // global ptrs?, right at the end of RAM 
<br/>
080011EC? ? ? ? add? ? ?r0, r0, #0x300 
<br/>
080011F0? ? ? ? ldrh? ? r0, [r0, #0x6A]
<br/>
r0 = (short)(r0[0x036A]); 
<br/>
080011F4? ? ? ? mov? ? ?r4, r0, lsl #10
<br/>
r4 = r0 &lt;&lt; 10;
<br/>
080011F8? ? ? ? ldr? ? ?r0, [sp]
<br/>
r0 = *sp; // r0 = *REG_UNK_0FA &lt;&lt; 16 | *REG_UNK_0F8
<br/>
080011FC? ? ? ? ldr? ? ?r1, [sp, #0x4] 
<br/>
r1 = *(sp+4); // r1 = *REG_UNK_0FE &lt;&lt; 16 | *REG_UNK_0FC
<br/>
08001200? ? ? ? mov? ? ?r2, r4
<br/>
r2 = r4; // =  r0 &lt;&lt; 10
<br/>
08001204? ? ? ? mov? ? ?r3, r5
<br/>
r3 = r5;
<br/>
08001208? ? ? ? bl? ? ? #0x08010E70
<br/>
function2();
<br/>
0800120C? ? ? ? str? ? ?r0, [sp]
<br/>
*sp = r0;
<br/>
08001210? ? ? ? str? ? ?r1, [sp, #0x4]
<br/>
*(sp+4) = r1;
<br/>
08001214? ? ? ? mov? ? ?r2, #0x1 
<br/>
08001218? ? ? ? adds? ? r12, r0, r2
<br/>
0800121C? ? ? ? adc? ? ?r3, r1, #0x0
<br/>
08001220? ? ? ? str? ? ?r12, [sp] 
<br/>
08001224? ? ? ? str? ? ?r3, [sp, #0x4]
<br/>
*((uint64*) sp) += 1; 
<br/>
08001228? ? ? ? umull? ?r1,r0,r4,r12
<br/>
r1 = ((r4*r12) &amp; 0xFFFFFFFF); r0 = ((r4 * r12) &gt;&gt; 32);
<br/>
0800122C? ? ? ? mla? ? ?r0, r12, r5, r0
<br/>
r0 += r5*r12;
<br/>
08001230? ? ? ? mla? ? ?r0, r3, r4, r0 
<br/>
r0 += r3*r4;
<br/>
08001234? ? ? ? str? ? ?r1, [sp] 
<br/>
*sp = r1;
<br/>
08001238? ? ? ? str? ? ?r0, [sp, #0x4]
<br/>
*(sp+4) = r0;
<br/>
0800123C? ? ? ? ldrh? ? r1, [r6, #0x6]
<br/>
08001240? ? ? ? ldr? ? ?r0, =0x048080F6 
<br/>
08001244? ? ? ? strh? ? r1, [r0, #0x0]
<br/>
*((short*) REG_UNK_0F6) = *((short*) r6 + 6); 
<br/>
08001248? ? ? ? ldrh? ? r1, [r6, #0x4] 
<br/>
0800124C? ? ? ? ldr? ? ?r0, =0x048080F4 
<br/>
08001250? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_0F4) = *((short*) r6 + 4); 
<br/>
08001254? ? ? ? ldrh? ? r1, [r6, #0x2] 
<br/>
08001258? ? ? ? ldr? ? ?r0, =0x048080F2 
<br/>
0800125C? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_0F2) = *((short*) r6 + 2); 
<br/>
08001260? ? ? ? ldrh? ? r0, [r6, #0x0] 
<br/>
08001264? ? ? ? orr? ? ?r1, r0, #0x1 
<br/>
08001268? ? ? ? ldr? ? ?r0, =0x048080F0 
<br/>
0800126C? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_0F0) = *((short*) r6) | 0x0001; 
<br/>
08001270? ? ? ? ldr? ? ?r0, =0x048080EA 
<br/>
08001274? ? ? ? strh? ? r2, [r0, #0x0]
<br/>
*((short*) REG_UNK_0EA) = *r2; 
<br/>
08001278? ? ? ? mov? ? ?r0, #0x40 
<br/>
r0 = 0x0040;
<br/>
0800127C? ? ? ? bl? ? ? #0x080016A8
<br/>
function1(); // second call
<br/>
08001280? ? ? ? bl? ? ? #0x06FD7850 
<br/>
function3();
<br/>
08001284? ? ? ? mov? ? ?r1, #0x2 
<br/>
08001288? ? ? ? ldr? ? ?r0, =0x048080AE 
<br/>
0800128C? ? ? ? strh? ? r1, [r0, #0x0]
<br/>
*((short*) REG_UNK_0AE) = 0x0002; 
<br/>
08001290? ? ? ? b? ? ? ?#0x080014A4
<br/>
goto label1;
<br/>
08001294? ? ? ? ldr? ? ?r2, =0x0000FFFF 
<br/>
08001298? ? ? ? ldr? ? ?r1, =0x04808010 
<br/>
0800129C? ? ? ? strh? ? r2, [r1, #0x0]
<br/>
*((short*) REG_UNK_010) = 0xFFFF;  
<br/>
080012A0? ? ? ? ldr? ? ?r2, =0x0000E03F 
<br/>
080012A4? ? ? ? ldr? ? ?r1, =0x04808012 
<br/>
080012A8? ? ? ? strh? ? r2, [r1, #0x0] 
<br/>
*((short*) REG_UNK_012) = 0xE03F;  
<br/>
080012AC? ? ? ? ldr? ? ?r0, [r0] 
<br/>
080012B0? ? ? ? add? ? ?r0, r0, #0x600 
<br/>
080012B4? ? ? ? ldrh? ? r0, [r0, #0x1C]
<br/>
r0 = (short)((*r0)[0x061C]); // r0 initialized somewhere else, second time 
<br/>
080012B8? ? ? ? ands? ? r0, r0, #0x20 
<br/>
080012BC? ? ? ? ldrneh? r0, [r1, #0x0] 
<br/>
080012C0? ? ? ? orrne? ?r0, r0, #0xC0 
<br/>
080012C4? ? ? ? strneh? r0, [r1, #0x0]
<br/>
if (*r0 &amp; 0x0020) {*((short*) REG_UNK_012) |= 0x00C0}; 
<br/>
080012C8? ? ? ? ldr? ? ?r1, =0x00001FFF 
<br/>
080012CC? ? ? ? ldr? ? ?r0, =0x048081AE 
<br/>
080012D0? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_1AE) = 0x1FFF;  
<br/>
080012D4? ? ? ? mov? ? ?r0, #0x0 
<br/>
080012D8? ? ? ? ldr? ? ?r1, =0x048081AA:16 = 0 // ? this isn't necessarily true?
<br/>
080012DC? ? ? ? strh? ? r0, [r1, #0x0] 
<br/>
*((short*) REG_UNK_1AA) = 0x0000;
<br/>
08001350? ? ? ? mov? ? ?r1, #0xB 
<br/>
08001354? ? ? ? ldr? ? ?r0, =0x048080E0 
<br/>
08001358? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_0E0) = 0x000B;
<br/>
0800135C? ? ? ? mov? ? ?r1, #0x0 
<br/>
08001360? ? ? ? ldr? ? ?r0, =0x04808008 
<br/>
08001364? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_008) = 0x0000;
<br/>
08001368? ? ? ? ldr? ? ?r0, =0x0480800A 
<br/>
0800136C? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_00A) = 0x0000;
<br/>
08001370? ? ? ? mov? ? ?r1, #0x1 
<br/>
08001374? ? ? ? ldr? ? ?r0, =0x04808004
<br/>
08001378? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_004) = 0x0001;
<br/>
0800137C? ? ? ? ldr? ? ?r0, =0x048080E8 
<br/>
08001380? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_0E8) = 0x0001;
<br/>
08001384? ? ? ? ldr? ? ?r0, =0x048080EA 
<br/>
08001388? ? ? ? strh? ? r1, [r0, #0x0] 
<br/>
*((short*) REG_UNK_0EA) = 0x0001;
<br/>
0800138C? ? ? ? mov? ? ?r0, #0x20
<br/>
r0 = 0x00000020; 
<br/>
08001390? ? ? ? bl? ? ? #0x080016A8
<br/>
function1(); 
<br/>
08001394? ? ? ? b? ? ? ?#0x080014A4
<br/>
goto label1;
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41537 - sandymac - Fri Apr 29, 2005 3:11 pm</h4>
    <div class="postbody"><span class="postbody">What tools will disassemble a DS rom?<br/>_________________<br/>"He who dares not offend cannot be honest." -- Thomas Paine</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41572 - josath - Fri Apr 29, 2005 7:52 pm</h4>
    <div class="postbody"><span class="postbody"><a href="http://deadcoderssociety.org/www/dev/nds/news.html" target="_blank">http://deadcoderssociety.org/www/dev/nds/news.html</a>
<br/>
<br/>
This guy seems to have a tool, 'dsd' that disassembles a nds rom. runs in the console, portable to all platforms it looks like</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41592 - Series-8 - Sat Apr 30, 2005 12:41 am</h4>
    <div class="postbody"><span class="postbody">Isn't the DS wireless baised on a known chip?
<br/>
<br/>
(the MAC would tell which manufacurer it was at least)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41597 - sandymac - Sat Apr 30, 2005 3:02 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Series-8 wrote:</b></span></td> </tr> <tr> <td class="quote">Isn't the DS wireless baised on a known chip?
<br/>
<br/>
(the MAC would tell which manufacurer it was at least)</td> </tr></table><span class="postbody">
<br/>
<br/>
<a href="http://standards.ieee.org/cgi-bin/ouisearch?0009bf" target="_blank">http://standards.ieee.org/cgi-bin/ouisearch?0009bf</a> </span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Nintendo Co.,Ltd.</td> </tr></table><span class="postbody"><br/>_________________<br/>"He who dares not offend cannot be honest." -- Thomas Paine</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41600 - TJ - Sat Apr 30, 2005 4:37 am</h4>
    <div class="postbody"><span class="postbody">The WLAN chip is built by RF Micro Devices:
<br/>
<br/>
<a class="postlink" href="http://www.ferrago.com/portal/cluster/44293" target="_blank">http://www.ferrago.com/portal/cluster/44293</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41653 - Abcd1234 - Sat Apr 30, 2005 9:26 pm</h4>
    <div class="postbody"><span class="postbody">Well, based on that, it's probably RFMD's RF2958 chipset (it's the only integrated 802.11b package they have... the other one is just a low-level tranceiver for use in other chipsets).  The spec for the chip can be found <a class="postlink" href="http://www.rfmd.com/DataBooks/db97/2958.pdf" target="_blank">here</a>.  And, assuming that Metroid ROM dump is correct, the register set *probably* maps into the 0x04800000 memory range.[/url]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41654 - Abcd1234 - Sat Apr 30, 2005 9:27 pm</h4>
    <div class="postbody"><span class="postbody">Err, or perhaps 0x04808000.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41655 - olimar - Sat Apr 30, 2005 9:29 pm</h4>
    <div class="postbody"><span class="postbody"></span><span class="gensmall"><br/><br/>Last edited by olimar on Wed Aug 20, 2008 9:37 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#41656 - Abcd1234 - Sat Apr 30, 2005 9:31 pm</h4>
    <div class="postbody"><span class="postbody">Or perhaps not at all... there doesn't seem to be much correspondance between that code and the register set listed in the spec.  So, either it's the wrong spec, the wrong code, or Nintendo is exposing a different controller interface...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41657 - Abcd1234 - Sat Apr 30, 2005 9:33 pm</h4>
    <div class="postbody"><span class="postbody">Oh, and of course the fourth option:  I haven't a clue what I'm talking about. ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#41658 - Abcd1234 - Sat Apr 30, 2005 9:40 pm</h4>
    <div class="postbody"><span class="postbody">Doh, I see, I am a tool (who is apparently too rushed to read).  Those registers described in the document are internal registers programmed via a serial data interface (not unlike the VDP on the Sega Master System).  So, the question is, what does the programmers interface look like...</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
