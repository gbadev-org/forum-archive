<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>devkitARM r20 WSOD - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > devkitARM r20 WSOD</h2>
<div id="posts">
<div class="post">
    <h4>#116889 - Goosey - Tue Jan 30, 2007 6:53 pm</h4>
    <div class="postbody"><span class="postbody">Experiencing 'compile and go' WSOD on load with the new devkitARM r20 and associated libs (newest libnds/libfat).
<br/>
<br/>
Have made sure I am patching with the proper dldi so, so I don't think this is the issue.
<br/>
<br/>
I am using herme's excellent esound library: ( <a href="http://forum.gbadev.org/viewtopic.php?t=11310&amp;highlight=esound" target="_blank">http://forum.gbadev.org/viewtopic.php?t=11310&amp;highlight=esound</a> ) and suspect this might be a cause. Reason I think this is that it uses the pre-compiled arm7.bin and I did notice that the IPC and perhaps other arm7-relevant things had an interface change. 
<br/>
<br/>
Is there anyone using esound that has been able to upgrade to r20?
<br/>
<br/>
EDIT: After building the 'aste_gems' demo that comes as an example in esound I found it 'Black Screens of Death' on me. So likely the precompiled arm7.bin is part of the issue. 
<br/>
<br/>
Other then that I do use the 3D code and I noticed there were somewhat substantial changes going on there, so I will have to look at that as well I suppose..
<br/>
<br/>
To anyone who helps Thanks! :D</span><span class="gensmall"><br/><br/>Last edited by Goosey on Tue Jan 30, 2007 7:29 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#116891 - melw - Tue Jan 30, 2007 6:58 pm</h4>
    <div class="postbody"><span class="postbody">As stated <a class="postlink" href="http://forum.gbadev.org/viewtopic.php?t=12301" target="_blank">here</a>, I get also a blank screen whenever trying to use 3d. The 2d graphics modes work just as before, but MODE_0_3D gives nothing. This also with (albeit not recently updated) NeHe examples. Trying to look bit further right now what might be the source of the problem...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#117416 - Goosey - Sun Feb 04, 2007 8:00 pm</h4>
    <div class="postbody"><span class="postbody">After tiddling around a bit I have found that it seems to be issue with esound.
<br/>
<br/>
Removing esound from my game allows it to compile and work properly (as far as I can see). 
<br/>
<br/>
I have set to try rebuilding esound for the devkitARM r20, but not having any luck. I am able to rebuild the library and it's arm7.bin from the source, however the example game will still freeze immediately.
<br/>
<br/>
Any suggestions are appreciated. Hermes (the author of the library) seems to be unreachable currently.
<br/>
<br/>
EDIT: Ok, might have narrowed down the problem. To implement the multithreading side of esound Hermes had made extensive additions to the interruptDispatcher.s assembly source. Since there are changes to the interruptDispatcher.s from devkitARM r19b to devkitARM r20 this seems like a source of incompatibility..
<br/>
<br/>
Unfortunately I am none to skilled at ARM assembler so I am not sure if I am going to be able to 'merge the changes' myself. Anyone out there who might help tackle this and make esound usable again in the new devkitARM r20?
<br/>
<br/>
Links since the files are too long for sane inlining..
<br/>
<a class="postlink" href="http://www.goosey.info/temp/esound_interruptDispatcher.s" target="_blank">http://www.goosey.info/temp/esound_interruptDispatcher.s</a>
<br/>
<a class="postlink" href="http://www.goosey.info/temp/dkpr19b_interruptDispatcher.s" target="_blank">http://www.goosey.info/temp/dkpr19b_interruptDispatcher.s</a>
<br/>
<a class="postlink" href="http://www.goosey.info/temp/dkpr20_interruptDispatcher.s" target="_blank">http://www.goosey.info/temp/dkpr20_interruptDispatcher.s</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
