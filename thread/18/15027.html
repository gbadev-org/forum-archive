<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>double buffer for 3d with capture [solved] - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > double buffer for 3d with capture [solved]</h2>
<div id="posts">
<div class="post">
    <h4>#150967 - nce - Sat Feb 16, 2008 3:32 am</h4>
    <div class="postbody"><span class="postbody">Hi all,
<br/>
<br/>
I was thinking about the technic using the capture to double the limit of polygon you can render.
<br/>
<br/>
From all example I read and all discution here, everybody is using 2 banks to do it like this :
<br/>
<br/>
-render A,  show A on top of last captured B
<br/>
-render B,  show B under last captured A
<br/>
<br/>
My concern with this methode is mainly all the motions.
<br/>
Your 2 buffer are update separatly.  It means that if things are moving, you'll probably noticed that they move at separate time.
<br/>
<br/>
It's even worse when you think about camera motion, You'll always have a part of your scene shown with the old camera and one part with the new.
<br/>
<br/>
So to make this technic working you don't need a double buffer but a tripple.
<br/>
<br/>
-animate, camera
<br/>
-render A1, show A2 on top of B
<br/>
-render B, show B under A1
<br/>
-swap A1 and A2
<br/>
<br/>
well now loosing 3banks looks a quite expensive and I'm not sure that any commercial game are ready to loose so many memory.
<br/>
<br/>
If you think about the memory your bank is 256*256 but you need only 256*192 for your buffer.
<br/>
<br/>
Is there any solution to goup those 3 buffers?
<br/>
like telling that you bufferA1 is at BankA, bufferA2 at BankA+96k, bufferB at BankB+64k and your texture starts at BankC+32k ?
<br/>
<br/>
Unfortunetly it means that some bank will be used to display and capture at the same time, or like bankC that will be used to capture/display and texture source.... I'm not sure at all that you can ask for that.
<br/>
<br/>
Can anybody confirm this ?
<br/>
Is it possible? or am I completly wrong at the begining ?
<br/>
<br/>
Cheers,<br/>_________________<br/>-jerome-</span><span class="gensmall"><br/><br/>Last edited by nce on Sat Feb 16, 2008 10:11 am; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#150976 - Cydrak - Sat Feb 16, 2008 8:46 am</h4>
    <div class="postbody"><span class="postbody">When I did this I only show a new image every full pass. So there's never any desync. The key is the display source. If you set it to a framebuffer, you can grab some offscreen renders, at the price of framerate.
<br/>
<br/>
- do scene updates
<br/>
- display normal / submit B / render+capture A atop B
<br/>
- display A atop B / submit A atop B / render+capture B
<br/>
- rinse, repeat
<br/>
(I've split submission and rendering; the latter starts the frame after glFlush, so that's when you have to capture... and when that scene's textures are needed.)
<br/>
<br/>
You can set _framebuffer_ display and capture on the same bank (not sure which happens first). They both use LCD. Unfortunately, you have to choose LCD or TEXTURE target for the frame. Maddening, I know. :(</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#150980 - nce - Sat Feb 16, 2008 10:10 am</h4>
    <div class="postbody"><span class="postbody">Thanks,
<br/>
<br/>
I was completly wrong ;)
<br/>
<br/>
Your answer, force me to reread the capture tech :)  I a just realize that you can capture both 3d layer and bg at the same time...
<br/>
I was thinking that you can capture only the 3d layer ...
<br/>
<br/>
Thanks,<br/>_________________<br/>-jerome-</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
