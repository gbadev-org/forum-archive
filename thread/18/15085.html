<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Windowing Woes - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Windowing Woes</h2>
<div id="posts">
<div class="post">
    <h4>#151536 - krozen - Thu Feb 28, 2008 6:10 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys,
<br/>
I'm having some issues with getting windowing working on the DS. I've tried it out on hardware and emulator with no avail.
<br/>
<br/>
So, I've set up window 0 to display a background, and have set the extents using the following code:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
WIN0_X0 = 0;
<br/>
WIN0_Y0 = 0;
<br/>
WIN0_X1 = 100;
<br/>
WIN0_Y1 = 130;
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
This works fine. However, if I enable window 1 (alone) with the very same extents as follows: 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
WIN1_X0 =0;
<br/>
WIN1_Y0 =0;
<br/>
WIN1_X1 =100;         
<br/>
WIN1_Y1 =130;</td> </tr></table><span class="postbody">
<br/>
<br/>
The background will be displayed about 100 pixels to the right of where it should be. Any suggestions would be great!
<br/>
Cheers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151538 - Cearn - Thu Feb 28, 2008 6:27 pm</h4>
    <div class="postbody"><span class="postbody">From video.h:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
// Window 0
<br/>
#define WIN0_X0        (*(vuint8*)0x04000041)
<br/>
#define WIN0_X1        (*(vuint8*)0x04000040)
<br/>
#define WIN0_Y0        (*(vuint8*)0x04000045)
<br/>
#define WIN0_Y1        (*(vuint8*)0x04000044)
<br/>
<br/>
// Window 1
<br/>
#define WIN1_X0        (*(vuint8*)0x04000042)
<br/>
#define WIN1_X1        (*(vuint8*)0x04000043)
<br/>
#define WIN1_Y0        (*(vuint8*)0x04000047)
<br/>
#define WIN1_Y1        (*(vuint8*)0x04000046)
<br/>
</td> </tr></table><span class="postbody">
<br/>
Notice the difference in the order of the addresses. The WIN0 registers are correct, but WIN1_X0 and WIN1_X1 have had their addresses swapped, as have SUB_WIN1_X0 and SUB_WIN1_X1.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151539 - krozen - Thu Feb 28, 2008 6:44 pm</h4>
    <div class="postbody"><span class="postbody">Thanks a million, Cearn. I had noticed an issue with the addresses alright, but had swapped both the X values and the Y values.
<br/>
<br/>
Is there any logical or technical reason for the swapping of the values. It seems very counter intuitive.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#151540 - eKid - Thu Feb 28, 2008 7:01 pm</h4>
    <div class="postbody"><span class="postbody">The registers are also called WINxH, WINxV, where the low 8 bits are the right/bottom coordiate, and the higher 8 bits are the left/top coordinate (16-bit registers). It seems a bit like big endian, where the first value is in the higher part.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#162317 - a128 - Sun Aug 31, 2008 9:26 am</h4>
    <div class="postbody"><span class="postbody">Anyone got this working?
<br/>
<br/>
I tried it but with no effect on hardware/emu I setup  
<br/>
window0....used 3d as bg0</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
