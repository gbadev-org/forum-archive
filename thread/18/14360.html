<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>compiler flags -march, -mtune, -mcpu - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > compiler flags -march, -mtune, -mcpu</h2>
<div id="posts">
<div class="post">
    <h4>#143314 - a128 - Fri Oct 19, 2007 1:51 pm</h4>
    <div class="postbody"><span class="postbody">Some use
<br/>
-march=armv5te -mtune=arm946e-s
<br/>
others use
<br/>
-mcpu=arm9tdmi -mtune=arm9tdmi 
<br/>
<br/>
which is correct?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143320 - Vich - Fri Oct 19, 2007 3:34 pm</h4>
    <div class="postbody"><span class="postbody">I'm not sure but:
<br/>
<a href="http://en.wikipedia.org/wiki/Nintendo_DS" target="_blank">http://en.wikipedia.org/wiki/Nintendo_DS</a>
<br/>
-&gt; "ARM946E-S main CPU and ARM7TDMI co-processor"
<br/>
<br/>
And then:
<br/>
<a href="http://en.wikipedia.org/wiki/ARM_architecture" target="_blank">http://en.wikipedia.org/wiki/ARM_architecture</a>
<br/>
-&gt; "ARM9E 	ARMv5TE 	ARM946E-S"
<br/>
<br/>
So I'd say that the first line appears technically correct... but I have to say that I'm using the second one and it seems to work fine too.<br/>_________________<br/>[<a class="postlink" href="http://www.lifeisdigital.net" target="_blank">project website</a>] [<a class="postlink" href="http://www.kenvanhoeylandt.net" target="_blank">personal website</a>]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143330 - freemaan - Fri Oct 19, 2007 5:44 pm</h4>
    <div class="postbody"><span class="postbody">"-march=armv5te -mtune=arm946e-s" is the correct one.<br/>_________________<br/>My other nickname: davido2</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143344 - tepples - Fri Oct 19, 2007 10:43 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>a128 wrote:</b></span></td> </tr> <tr> <td class="quote">others use
<br/>
-mcpu=arm9tdmi -mtune=arm9tdmi</td> </tr></table><span class="postbody">
<br/>
This was from the arm-elf- days before Binutils was properly modified to distinguish between ARM9 configurations with an FPU and ARM9 configurations without an FPU. The arm-eabi- versions of devkitARM have fixed this, and freemaan is right.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143352 - Undefined Error - Sat Oct 20, 2007 2:05 am</h4>
    <div class="postbody"><span class="postbody">Not that I'm arguing, but for curiosity's sake - What's the benefit of having the right architecture if the other one worked?  Or to put it another way, what extra features that the old setup didn't support but the DS CPU <span style="font-style: italic">does</span> support were we missing before?<br/>_________________<br/>This post was spawned from an Undefined Error.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143354 - Dwedit - Sat Oct 20, 2007 3:26 am</h4>
    <div class="postbody"><span class="postbody">I've seen zero difference between using this switch and not using the switch.  For comparison, use the -S option to generate ASM code and see how it differs.<br/>_________________<br/>"We are merely sprites that dance at the beck and call of our button pressing overlord."</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143400 - M3d10n - Sat Oct 20, 2007 7:38 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Undefined Error wrote:</b></span></td> </tr> <tr> <td class="quote">Not that I'm arguing, but for curiosity's sake - What's the benefit of having the right architecture if the other one worked?  Or to put it another way, what extra features that the old setup didn't support but the DS CPU <span style="font-style: italic">does</span> support were we missing before?</td> </tr></table><span class="postbody">
<br/>
<br/>
There are no extra features, but it doesn't really hurt, does it?
<br/>
<br/>
The question can go the other way: why use the wrong architecture when the correct one is available at no cost other than changing a line in the makefile? If anything, projects compiled with the correct architecture could become slightly more compatible with emulators.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143406 - DekuTree64 - Sat Oct 20, 2007 9:52 pm</h4>
    <div class="postbody"><span class="postbody">The only difference I've noticed is that having it set to arm9tdmi won't let you use the DSP instructions (smulxy, qadd, etc) in assembly code.<br/>_________________<br/>___________
<br/>
The best optimization is to do nothing at all.
<br/>
Therefore a fully optimized program doesn't exist.
<br/>
-Deku</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#143438 - a128 - Sun Oct 21, 2007 3:53 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>DekuTree64 wrote:</b></span></td> </tr> <tr> <td class="quote">The only difference I've noticed is that having it set to arm9tdmi won't let you use the DSP instructions (smulxy, qadd, etc) in assembly code.</td> </tr></table><span class="postbody">
<br/>
<br/>
Thanks for all the awnsers.....no i know whats going on with those flags</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
