<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Wireless Protocol - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Wireless Protocol</h2>
<div id="posts">
<div class="post">
    <h4>#133231 - basalamah - Wed Jul 04, 2007 10:55 am</h4>
    <div class="postbody"><span class="postbody">hi everyone,
<br/>
<br/>
I am new to the Nintendo world, i just had some questions i need to understand, which are concerned with multilayer games.
<br/>
<br/>
- when more than 2 devices and playing, what wireless protocol does the nindtendo DS use? does it use the so called WMB Protocol? is so, how is it different from DS Download Play (WMB Protocol)?
<br/>
<br/>
- how does this protocol defer from IEEE802.11?
<br/>
<br/>
- is the transmission between devices, Unicast or (Broadcast/Mutlicast)?
<br/>
<br/>
<br/>
I am sorry if these questions are lame but i don't know where to start.
<br/>
<br/>
<br/>
Thanks</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133232 - felix123 - Wed Jul 04, 2007 12:52 pm</h4>
    <div class="postbody"><span class="postbody">DS Download Play is used for downloading programs to the DS. Multiplayer in official games is performed using NiFi. We still can't do homebrew multiplayer gaming without an access point.<br/>_________________<br/><a class="postlink" href="http://en.wikipedia.org/wiki/NDSh" target="_blank">Nintendo DS homebrew on Wikipedia</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133245 - masscat - Wed Jul 04, 2007 4:23 pm</h4>
    <div class="postbody"><span class="postbody">IEEE802.11 has many parts covering many things. For example it defines how a frame is encoded at the physical layer and it defines the sequence of frames that are required for stations (PCs etc) to communicate. 
<br/>
<br/>
All NDS wireless frames conform to 802.11 with respect to how they are put out over the air. If you have a wireless card for your PC that is capable of capturing all wireless frames on a channel it will happily capture the NDS frames.
<br/>
<br/>
From the NDS hardware point of view there is no protocol as it is up to the game/application to build and transmit frames and to decode received frames. So there may not be a common protocol used by games, although I would have thought that the official development system (I have never seen it) would provide libraries for doing wireless multi-player.
<br/>
The hardware can filter the received frames based upon the addresses within the frame and the frame type, although, I believe, how this is configured is not fully understood yet.
<br/>
<br/>
During DS Download Play, Pictochat and Mario Kart VS play the host DS acts similarly to an Access Point and coordinates the transfer of data between DSs. You can see some info about the DS Download Play frame formats and sequence <a class="postlink" href="http://masscat.afraid.org/ninds/proto_info.php" target="_blank">on my website</a>.
<br/>
I have not investigated multi-player games much.
<br/>
<br/>
By its nature transmitted frames are broadcast. The addresses within the frames can be unicast, broadcast or multicast.
<br/>
<br/>
If you want to have a play get a capture capable wireless card and <a class="postlink" href="http://www.wireshark.org/" target="_blank">Wireshark</a> and start looking at the frames being passed between DSs.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133248 - basalamah - Wed Jul 04, 2007 5:02 pm</h4>
    <div class="postbody"><span class="postbody">Thank you guys for the good responses,
<br/>
<br/>
masscat, let me conclude what i understood from your reply:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">- when more than 2 devices are playing, what wireless protocol does the nindtendo DS use? 
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
It uses a normal 802.11 protocol.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
does it use the so called WMB Protocol? if so, how is it different from DS Download Play (WMB Protocol)? </td> </tr></table><span class="postbody">
<br/>
No. WMB is only used for DS Download Play.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">how does this protocol defer from IEEE802.11? </td> </tr></table><span class="postbody">
<br/>
There is no difference in the PHY and MAC protocols but some difference in the upper layers?
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
is the transmission between devices, Unicast or (Broadcast/Mutlicast)? 
<br/>
<br/>
</td> </tr></table><span class="postbody">
<br/>
it depends on the game.
<br/>
<br/>
Thanks for the advice on Wireshark and packet sniffing.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#133543 - masscat - Sat Jul 07, 2007 12:20 am</h4>
    <div class="postbody"><span class="postbody">Your conclusions are correct.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>basalamah wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">how does this protocol defer from IEEE802.11? </td> </tr></table><span class="postbody">
<br/>
There is no difference in the PHY and MAC protocols but some difference in the upper layers?
<br/>
</span></td> </tr></table><span class="postbody">
<br/>
For the upper layers:
<br/>
The association process (station with access point) uses the same sequences of frames as defined by 802.11 but the contents of the frames is not standard. The transfer of data frames between station and AP is, I believe, standard (802.11 does not define the payload content of data frames just their structure and how and when to send them).
<br/>
<br/>
One thing I found when trying to develop a WMB client for Linux was that there are timing requirements for transmitting data frames (the frame must be transmitted within a window defined by the AP) which I could not meet using a USB wireless stick. This behaviour is, I believe, correct with regard the 802.11 standard.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
