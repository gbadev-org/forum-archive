<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Sprites on both screens - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. </i><br />

        <h2>DS development > Sprites on both screens</h2>
<div id="posts">
<div class="post">
    <h4>#100273 - TheRain - Sun Aug 27, 2006 4:17 am</h4>
    <div class="postbody"><span class="postbody">One of my DS apps now needs to have some sprites on the sub screen in addition to the sprites already on the main screen...   I was trying to set up VRAM bank I to serve this purpose, but I'm not sure where in VRAM my sprites will end up and also I'm not sure how to reference this sub screen sprite location in sprite OAM... here's my VRAM and mode set up 
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
    vramSetMainBanks(   VRAM_A_MAIN_SPRITE,        //A and B maped consecutivly as sprite memory
<br/>
                       VRAM_B_MAIN_BG_0x6000000,        //map as main BG
<br/>
                       VRAM_C_SUB_BG_0x6200000 ,  //map C sub BG
<br/>
                        VRAM_D_MAIN_BG_0x6020000   //using D as BG2
<br/>
                        ); 
<br/>
   
<br/>
   vramSetBankI(VRAM_I_SUB_SPRITE);
<br/>
   //set the video mode
<br/>
    videoSetMode(  MODE_5_2D | 
<br/>
                   DISPLAY_SPR_ACTIVE |    //turn on sprites
<br/>
               DISPLAY_BG2_ACTIVE |    //This background will be used for pixel draw overlay
<br/>
                   DISPLAY_BG3_ACTIVE |    //turn on background 3
<br/>
                   DISPLAY_SPR_2D_BMP_256     //and this in bitmap mode
<br/>
                    );
<br/>
       videoSetModeSub(  MODE_5_2D |
<br/>
               DISPLAY_BG2_ACTIVE|
<br/>
               DISPLAY_SPR_1D 
<br/>
                    );
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
And here is part of my sprite setup code for sprite attributes
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">
<br/>
   sprites[spritesInitialized].attribute[0] = ATTR0_BMP |  (newbutton.y); //bitmap mode sprite at y=10
<br/>
   sprites[spritesInitialized].attribute[1] = ATTR1_SIZE_16 | (newbutton.x);   //16x16 sprite placed at x=20
<br/>
   sprites[spritesInitialized].attribute[2] = ATTR2_ALPHA(1)| ((normalx*2)+(normaly*64));
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
So what I'm wondering is, how can I make a sprite entry point to a sprite in SUB sprite VRAM space?<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100276 - tepples - Sun Aug 27, 2006 4:27 am</h4>
    <div class="postbody"><span class="postbody">If you want to use the same sprite cel on both screens, you need to copy it into both sprite cel VRAM banks.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100277 - TheRain - Sun Aug 27, 2006 4:44 am</h4>
    <div class="postbody"><span class="postbody">no, i'm just not sure how to make OAM reference a tile in sub VRAM..  i understand how to put sprite data into VRAM that's designated for sub sprites... but I find no OAM setting for telling OAM that a sprite is referencing sub sprite VRAM as opposed to main sprite VRAM.
<br/>
<br/>
....
<br/>
....
<br/>
<br/>
&lt;edit&gt;
<br/>
<br/>
wait... does attribute[2] actually reference directly a VRAM location?<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100285 - knight0fdragon - Sun Aug 27, 2006 6:11 am</h4>
    <div class="postbody"><span class="postbody">to load a sprite into main OAM you use just OAM
<br/>
to load it into sub you have to load it into OAM_SUB
<br/>
<br/>
the low 10 bits of attribute 2 are used to decide which tile is being used for the sprite, max being 1024 of course<br/>_________________<br/><a href="http://www.myspace.com/knight0fdragonds" target="_blank">http://www.myspace.com/knight0fdragonds</a>
<br/>
<br/>
MK DS FC: Dragon 330772 075464 
<br/>
AC WW FC: Anthony SamsClub 1933-3433-9458 
<br/>
MPFH: Dragon 0215 4231 1206</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#100319 - TheRain - Sun Aug 27, 2006 10:21 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>knight0fdragon wrote:</b></span></td> </tr> <tr> <td class="quote">to load a sprite into main OAM you use just OAM
<br/>
to load it into sub you have to load it into OAM_SUB
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
right on... thanks man.<br/>_________________<br/>DSMIDI and dSTAR sequencer brought to you by TheRain
<br/>
<a href="http://www.collinmeyermusic.com/dev/" target="_blank">http://www.collinmeyermusic.com/dev/</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
