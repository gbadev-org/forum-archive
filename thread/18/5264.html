<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS Display Modes - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DS Display Modes</h2>
<div id="posts">
<div class="post">
    <h4>#38229 - Darkain - Thu Mar 24, 2005 11:06 am</h4>
    <div class="postbody"><span class="postbody">So, who has messed around with the display modes on the DS?  So far, I have found out which modes have what for tiled backgrounds..
<br/>
<br/>
mode 0:  bg0 bg1 bg2 bg3
<br/>
mode 1:  bg0 bg1 bg2
<br/>
mode 2:  bg0 bg1
<br/>
mode 3:  bg0 bg1 bg2
<br/>
mode 4:  bg0 bg1
<br/>
mode 5:  bg0 bg1
<br/>
<br/>
<br/>
i have still only gotten bitmaps working in framebuffer mode.  :(
<br/>
<br/>
does anyone have any idea as to why there is now 6 tiled background modes as apposed to 3 on the GBA?<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38244 - darkfader - Thu Mar 24, 2005 3:07 pm</h4>
    <div class="postbody"><span class="postbody">Different configs for selecting text/affine/affine extended...
<br/>
I have no clue what an affine extended BG does though :)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38248 - tepples - Thu Mar 24, 2005 5:05 pm</h4>
    <div class="postbody"><span class="postbody">Possibilities: Affine extended backgrounds may use 16-bit map entries, may use more than 256 different tiles, may use flipping, may use 4-bit tiles, etc.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38250 - dovoto - Thu Mar 24, 2005 5:48 pm</h4>
    <div class="postbody"><span class="postbody">Using my viewer tool this is what i get
<br/>
<br/>
mode 0: bg0-t bg1-t bg2-t bg3-t
<br/>
mode 1: bg0-t bg1-t bg2-t bg3-r 
<br/>
mode 2: bg0-t bg1-t bg2-r bg3-r 
<br/>
mode 3: bg0-t bg1-t bg2-t bg3-e 
<br/>
mode 4: bg0-t bg1-t bg2-r bg3-e 
<br/>
mode 5: bg0-t bg1-t bg2-e bg3-e 
<br/>
<br/>
were -t are normal text backgrounds, -r are normal rotation backgrounds and -e are extended rotation backgrounds.
<br/>
<br/>
Extended rotation backgrounds use 16 bit tile indexes and can use an extended palette (16 256 color palettes) mapped into vram e, f or g.  If the 256 color bit is set in the control register they operate as a 256 color bitmap of 512x256 or 256x512 (depending on the size bits).  THere is also a way to make them a direct color bitmap according to firefly but I have not been able to achive this.
<br/>
<br/>
I have not investigated normal rotation backgrounds so am not sure if they are 16 bit or still 8 bit tile indixes
<br/>
<br/>
mode 6: bg2--8 bit bitmap  (not sure about size but think it is BIG)
<br/>
<br/>
in all modes (except framebuffer mode) bg0 can be used as a 3D layer.
<br/>
<br/>
there are a lot of details to work out but i will do up a bit of a tutor with examples once i get it ironed out.
<br/>
<br/>
All of this comes from poking and filling memory with patterns and may not be correct.  We will know better once people start attempting demos in each of the modes.  Hopefully passmes start making it out soon ;)<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38742 - Darkain - Thu Mar 31, 2005 6:04 am</h4>
    <div class="postbody"><span class="postbody">been playing around w/ mode5 today.
<br/>
<br/>
<span style="font-weight: bold">BG3_CR</span>
<br/>
set <span style="font-weight: bold">BG_COLOR_256</span> for bitmap mode (unset for tile mode)
<br/>
set <span style="font-weight: bold">BG_RS_32x32 </span>for 256x256 bitmap (unset is 128x128)
<br/>
set <span style="font-weight: bold">(1 &lt;&lt; 2) </span>for 16-bit bitmap (unset for 256 colour)
<br/>
set <span style="font-weight: bold">BG_MAP_BASE(x) </span>for bitmap byte offset in VRAM (where offset = x * 16kb)
<br/>
<br/>
<br/>
16-bit is <span style="font-weight: bold">16-BIT!!!!</span>  NOT 15-bit.  it still uses 555 colour mode... plus 1 bit alpha.  since it is now a background layer, gotta have SOME way to see thru it.  ;)
<br/>
<br/>
example:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">  u16 *DarkSrc = (u16*)DarkStar_raw;
<br/>
  for (int i=0; i&lt;45056; i++) {
<br/>
    BG_GFX[i] = DarkSrc[i] | 0x8000;
<br/>
  }</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
oh my gawd tho... ive been using a 256 palettized BMP image as a background all day on the DS... i gotta admit, i love being in 16-bit colour now.  :)
<br/>
<br/>
im going to keep playing, and post more stuffs as i find it.  (the next dsPaint is gonna KICK ASS)
<br/>
<br/>
<br/>
[EDIT]
<br/>
I would also like to note, the most common reason why your extended BG may not be showing up is because you may have forgotten to set something.</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">   BG3_XDX = 0x100;
<br/>
   BG3_YDY = 0x100;</td> </tr></table><span class="postbody">[/EDIT]<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38745 - Darkain - Thu Mar 31, 2005 7:07 am</h4>
    <div class="postbody"><span class="postbody">i would just like ot add that priorities work normally with these extended backgrounds just as you would expect them to.  i now have tiles showing up underneath my bitmap image, and i have sprites on top of both.<br/>_________________<br/>-=- Darkain Dragoon -=-
<br/>
<a class="postlink" href="http://www.darkain.com" target="_blank">http://www.darkain.com</a>
<br/>
<a class="postlink" href="http://ds.darkain.com/hack" target="_blank">DarkStar</a> for <a class="postlink" href="http://ds.darkain.com" target="_blank">Nintendo DS</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38790 - dovoto - Thu Mar 31, 2005 8:57 pm</h4>
    <div class="postbody"><span class="postbody">Fucking alpha bit!
<br/>
Thanks darkain.<br/>_________________<br/><a href="http://www.drunkencoders.com" target="_blank">www.drunkencoders.com</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38797 - ector - Thu Mar 31, 2005 9:54 pm</h4>
    <div class="postbody"><span class="postbody">Dovoto, alpha bits seem to hate you :)
<br/>
<br/>
*remembers your texture debacle* ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#38815 - tepples - Fri Apr 01, 2005 1:23 am</h4>
    <div class="postbody"><span class="postbody">Depends on whether or not you <a class="postlink" href="http://www.kraftfoods.com/postcereals/cereal_alphabits.html" target="_blank"><span style="font-style: italic">post</span> alpha bits</a> ;)<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
