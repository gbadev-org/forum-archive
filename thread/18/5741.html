<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>NDSLIB - Fixed Point Weirdness - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > NDSLIB - Fixed Point Weirdness</h2>
<div id="posts">
<div class="post">
    <h4>#42887 - blaisef01 - Mon May 16, 2005 4:15 am</h4>
    <div class="postbody"><span class="postbody">I keep on getting wrong answers with sqrtf32 in the NDSLib
<br/>
eg: sqrtf32(16384) = 5792  (sqrt(2) &lt;&lt; 12)
<br/>
when it should be 8192 (sqrt(4) &lt;&lt; 12)
<br/>
<br/>
I tried replacing the function with this:
<br/>
<br/>
static inline f32 sqrtf32(f32 a)
<br/>
{
<br/>
	SQRT_CR = SQRT_64;
<br/>
<br/>
	while(SQRT_CR &amp; SQRT_BUSY);
<br/>
	SQRT_PARAM64 = ((int64)a) &lt;&lt; 13; // i changed this from 12
<br/>
	while(SQRT_CR &amp; SQRT_BUSY);
<br/>
	return SQRT_RESULT32;
<br/>
}
<br/>
<br/>
And everything seems to be okay. I don't quite understand why. If someone wants to explain it would be handy. 
<br/>
<br/>
Cheers</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#42899 - Ethos - Mon May 16, 2005 1:24 pm</h4>
    <div class="postbody"><span class="postbody">Were you trying to run it on ideas?
<br/>
<br/>
Because it is not working there.<br/>_________________<br/><a class="postlink" href="http://ethos.oddigytitanium.com" target="_blank">Ethos' Homepage (Demos/NDS 3D Tutorial)</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
