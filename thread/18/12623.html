<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Libnds weird error. - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Libnds weird error.</h2>
<div id="posts">
<div class="post">
    <h4>#120610 - bugmenot! - Mon Mar 05, 2007 12:20 am</h4>
    <div class="postbody"><span class="postbody">I am trying to compile my nds code and I get this error. I have no clue what it means. Can anyone tell me whats wrong?
<br/>
[img]http://farm1.static.flickr.com/164/410571397_34292d457e.jpg?v=0[/img]</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120621 - simonjhall - Mon Mar 05, 2007 1:14 am</h4>
    <div class="postbody"><span class="postbody">We'd need to see the makefile in order to fix this. However, if you have no rules defined telling make how to build that file or files with that extension then you'll get the error you see there.<br/>_________________<br/><span style="font-weight: bold"><a class="postlink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=simonjhall%40gmail%2ecom&amp;no_shipping=2&amp;no_note=1&amp;tax=0&amp;currency_code=GBP&amp;lc=GB&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8" target="_blank">Big thanks to everyone who donated for Quake2</a></span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120677 - bugmenot! - Mon Mar 05, 2007 1:36 pm</h4>
    <div class="postbody"><span class="postbody">Here is the make file. Its from the Patersoft tutorial.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#---------------------------------------------------------------------------------
<br/>
.SUFFIXES:
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
ifeq ($(strip $(DEVKITARM)),)
<br/>
$(error "Please set DEVKITARM in your environment. export DEVKITARM=&lt;path to&gt;devkitARM")
<br/>
endif
<br/>
<br/>
include $(DEVKITARM)/ds_rules
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# TARGET is the name of the output
<br/>
# BUILD is the directory where object files &amp; intermediate files will be placed
<br/>
# SOURCES is a list of directories containing source code
<br/>
# INCLUDES is a list of directories containing extra header files
<br/>
#---------------------------------------------------------------------------------
<br/>
TARGET      :=   $(shell basename $(CURDIR))
<br/>
BUILD      :=   build
<br/>
SOURCES      :=   source
<br/>
DATA      :=   data  
<br/>
INCLUDES   :=   include
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# options for code generation
<br/>
#---------------------------------------------------------------------------------
<br/>
ARCH   :=   -mthumb -mthumb-interwork
<br/>
<br/>
# note: arm9tdmi isn't the correct CPU arch, but anything newer and LD
<br/>
# *insists* it has a FPU or VFP, and it won't take no for an answer!
<br/>
CFLAGS   :=   -g -Wall -O2\
<br/>
          -mcpu=arm9tdmi -mtune=arm9tdmi -fomit-frame-pointer\
<br/>
         -ffast-math \
<br/>
         $(ARCH)
<br/>
<br/>
CFLAGS   +=   $(INCLUDE) -DARM9
<br/>
CXXFLAGS   := $(CFLAGS)
<br/>
<br/>
ASFLAGS   :=   -g $(ARCH)
<br/>
LDFLAGS   =   -specs=ds_arm9.specs -g $(ARCH) -mno-fpu -Wl,-Map,$(notdir $*.map)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# any extra libraries we wish to link with the project
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBS   := -lnds9
<br/>
 
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# list of directories containing libraries, this must be the top level containing
<br/>
# include and lib
<br/>
#---------------------------------------------------------------------------------
<br/>
LIBDIRS   :=   $(LIBNDS) $(GBA_NDS_FAT_LIB)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# no real need to edit anything past this point unless you need to add additional
<br/>
# rules for different file extensions
<br/>
#---------------------------------------------------------------------------------
<br/>
ifneq ($(BUILD),$(notdir $(CURDIR)))
<br/>
#---------------------------------------------------------------------------------
<br/>
 
<br/>
export OUTPUT   :=   $(CURDIR)/$(TARGET)
<br/>
 
<br/>
export VPATH   :=   $(foreach dir,$(SOURCES),$(CURDIR)/$(dir)) \
<br/>
               $(foreach dir,$(DATA),$(CURDIR)/$(dir))
<br/>
<br/>
export DEPSDIR   :=   $(CURDIR)/$(BUILD)
<br/>
<br/>
CFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.c)))
<br/>
CPPFILES   :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.cpp)))
<br/>
SFILES      :=   $(foreach dir,$(SOURCES),$(notdir $(wildcard $(dir)/*.s)))
<br/>
BINFILES   :=   $(foreach dir,$(DATA),$(notdir $(wildcard $(dir)/*.*)))
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# use CXX for linking C++ projects, CC for standard C
<br/>
#---------------------------------------------------------------------------------
<br/>
ifeq ($(strip $(CPPFILES)),)
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CC)
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
#---------------------------------------------------------------------------------
<br/>
   export LD   :=   $(CXX)
<br/>
#---------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
export OFILES   :=   $(addsuffix .o,$(BINFILES)) \
<br/>
               $(CPPFILES:.cpp=.o) $(CFILES:.c=.o) $(SFILES:.s=.o)
<br/>
 
<br/>
export INCLUDE   :=   $(foreach dir,$(INCLUDES),-I$(CURDIR)/$(dir)) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
               $(foreach dir,$(LIBDIRS),-I$(dir)/include) \
<br/>
               -I$(CURDIR)/$(BUILD)
<br/>
 
<br/>
export LIBPATHS   :=   $(foreach dir,$(LIBDIRS),-L$(dir)/lib)
<br/>
 
<br/>
.PHONY: $(BUILD) clean
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
$(BUILD):
<br/>
   @[ -d $@ ] || mkdir -p $@
<br/>
   @make --no-print-directory -C $(BUILD) -f $(CURDIR)/Makefile
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
clean:
<br/>
   @echo clean ...
<br/>
   @rm -fr $(BUILD) $(TARGET).elf $(TARGET).nds $(TARGET).arm9 $(TARGET).ds.gba 
<br/>
 
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
else
<br/>
 
<br/>
DEPENDS   :=   $(OFILES:.o=.d)
<br/>
 
<br/>
#---------------------------------------------------------------------------------
<br/>
# main targets
<br/>
#---------------------------------------------------------------------------------
<br/>
$(OUTPUT).ds.gba   :    $(OUTPUT).nds
<br/>
$(OUTPUT).nds   :    $(OUTPUT).arm9
<br/>
$(OUTPUT).arm9   :   $(OUTPUT).elf
<br/>
$(OUTPUT).elf   :   $(OFILES)
<br/>
<br/>
#---------------------------------------------------------------------------------
<br/>
# bin2o rules
<br/>
#---------------------------------------------------------------------------------
<br/>
<br/>
%.bin.o   :   %.bin
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
%.raw.o   :   %.raw
<br/>
   @echo $(notdir $&lt;)
<br/>
   @$(bin2o)
<br/>
<br/>
 
<br/>
-include $(DEPENDS)
<br/>
 
<br/>
#---------------------------------------------------------------------------------------
<br/>
endif
<br/>
#---------------------------------------------------------------------------------------
<br/>
</td> </tr></table><span class="postbody"></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120683 - tepples - Mon Mar 05, 2007 2:59 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bugmenot! wrote:</b></span></td> </tr> <tr> <td class="quote">I am trying to compile my nds code and I get this error. I have no clue what it means. Can anyone tell me whats wrong?
<br/>
[img]http://farm1.static.flickr.com/164/410571397_34292d457e.jpg?v=0[/img]</td> </tr></table><span class="postbody">
<br/>
<span style="font-weight: bold">Tip:</span> You can copy text from the Command Prompt and paste it into a forum post. I just added instructions to "The basics" in the FAQ in the Beginners forum.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120801 - wintermute - Tue Mar 06, 2007 4:49 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bugmenot! wrote:</b></span></td> </tr> <tr> <td class="quote">I am trying to compile my nds code and I get this error. I have no clue what it means. Can anyone tell me whats wrong?
<br/>
[img]http://farm1.static.flickr.com/164/410571397_34292d457e.jpg?v=0[/img]</td> </tr></table><span class="postbody">
<br/>
<br/>
<br/>
You have a file in the data directory called graph_bin.h
<br/>
<br/>
Perhaps this file came from using one of the idiotic .bin to .h converters on a file called graph.bin, also in the data directory?<br/>_________________<br/><a class="postlink" href="http://www.devkitpro.org/" target="_blank">devkitPro - professional toolchains at amateur prices</a>
<br/>
<a class="postlink" href="http://wiki.devkitpro.org/index.php/IRC" target="_blank">devkitPro IRC support</a>
<br/>
<a class="postlink" href="http://davejmurphy.com/" target="_blank">Personal Blog</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120807 - tepples - Tue Mar 06, 2007 5:40 am</h4>
    <div class="postbody"><span class="postbody">That is, unless it's from a less-idiotic converter that spits out .c and a proper .h, or .s and a proper .h (like my bin2s that was included into devkitARM), or .o and a proper .h (like the bin2o script included with the GBA and DS makefile rules).<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120841 - bugmenot! - Tue Mar 06, 2007 1:38 pm</h4>
    <div class="postbody"><span class="postbody">I think that is the problem. I will try and test it out tonight. By the way, why is  the .bin format better then just using header files?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#120843 - tepples - Tue Mar 06, 2007 1:46 pm</h4>
    <div class="postbody"><span class="postbody">A header file is supposed to specify the names of structs, external variables, and external functions, and that's it. The actual content of the data should be in a .c or .s file.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121000 - bugmenot! - Thu Mar 08, 2007 12:58 am</h4>
    <div class="postbody"><span class="postbody">Ok, I removed the header file from the data directory and now I get another error.
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\dsink&gt;make
<br/>
linking dsink.elf
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-eabi/4.1.1/../../../../arm-eabi/lib/th
<br/>
umb/ds_arm9_crt0.o: In function `CIDLoop':
<br/>
ds_arm9_crt0.s:(.init+0x218): undefined reference to `main'
<br/>
collect2: ld returned 1 exit status
<br/>
make[1]: *** [/c/dsink/dsink.elf] Error 1
<br/>
make: *** [build] Error 2</td> </tr></table><span class="postbody">
<br/>
This is driving me crazy, does anyone know what I am supposed to do? I have never heard of the function "CIDLoop".</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121040 - OOPMan - Thu Mar 08, 2007 11:24 am</h4>
    <div class="postbody"><span class="postbody">Try rebuilding your project from scratch...
<br/>
<br/>
By this I mean you should make a copy of one of the template project directories included with DKP and then move your source files and data files into it very carefully. Don't copy any object files or any other files produced during compilation...
<br/>
<br/>
If you're not using any data files, this means you'll be copying only .H and .C or .CPP files.<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#121105 - josath - Thu Mar 08, 2007 11:50 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>bugmenot! wrote:</b></span></td> </tr> <tr> <td class="quote">Ok, I removed the header file from the data directory and now I get another error.
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\dsink&gt;make
<br/>
linking dsink.elf
<br/>
c:/devkitpro/devkitarm/bin/../lib/gcc/arm-eabi/4.1.1/../../../../arm-eabi/lib/th
<br/>
umb/ds_arm9_crt0.o: In function `CIDLoop':
<br/>
ds_arm9_crt0.s:(.init+0x218): undefined reference to `main'
<br/>
collect2: ld returned 1 exit status
<br/>
make[1]: *** [/c/dsink/dsink.elf] Error 1
<br/>
make: *** [build] Error 2</td> </tr></table><span class="postbody">
<br/>
This is driving me crazy, does anyone know what I am supposed to do? I have never heard of the function "CIDLoop".</span></td> </tr></table><span class="postbody">
<br/>
<br/>
That error says you have no main() function in any of your .c or .cpp files. (That's what it means by "undefined reference to main").</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
