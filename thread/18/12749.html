<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Trouble with interrupts - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > Trouble with interrupts</h2>
<div id="posts">
<div class="post">
    <h4>#122224 - link12827 - Sat Mar 17, 2007 11:15 pm</h4>
    <div class="postbody"><span class="postbody">I'm relatively new to developing ds homebrew, and I've been following various tutorials.  But, I get an error message when using interrupts, saying DISP_SR undeclared
<br/>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">C:\Homebrew\Practice&gt;make
<br/>
main.c
<br/>
arm-eabi-gcc -MMD -MP -MF /c/Homebrew/Practice/build/main.d -g -Wall -O2 -march=
<br/>
armv5te -mtune=arm946e-s -fomit-frame-pointer -ffast-math -mthumb -mthumb-interw
<br/>
ork -I/c/Homebrew/Practice/include -I/c/devkitPro/libnds/include -I/c/Homebrew/P
<br/>
ractice/build -DARM9 -c /c/Homebrew/Practice/source/main.c -o main.o
<br/>
c:/Homebrew/Practice/source/main.c: In function 'InitInterruptHandler':
<br/>
c:/Homebrew/Practice/source/main.c:51: error: 'DISP_SR' undeclared (first use in
<br/>
 this function)
<br/>
c:/Homebrew/Practice/source/main.c:51: error: (Each undeclared identifier is rep
<br/>
orted only once
<br/>
c:/Homebrew/Practice/source/main.c:51: error: for each function it appears in.)
<br/>
make[1]: *** [main.o] Error 1
<br/>
make: *** [build] Error 2</td> </tr></table><span class="postbody">
<br/>
<br/>
and the actual method:
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">void InitInterruptHandler()
<br/>
{
<br/>
   REG_IME = 0;
<br/>
   IRQ_HANDLER = on_irq;
<br/>
   REG_IE = IRQ_VBLANK;
<br/>
   REG_IF = ~0;
<br/>
   DISP_SR = DISP_VBLANK_IRQ;
<br/>
   REG_IME = 1;
<br/>
}</td> </tr></table><span class="postbody">
<br/>
<br/>
I'm probably just completely missing something, or doing it wrong, but can anyone help me?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122237 - tepples - Sun Mar 18, 2007 12:42 am</h4>
    <div class="postbody"><span class="postbody">DISP_SR has become REG_DISP[somethingorother], as wintermute is using GBATEK as a de facto standard for register naming. Try reading .../libnds/include/nds/arm9/video.h to see what the newest values are, or use the compatibility header:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">#include &lt;nds/registers_alt.h&gt;</td> </tr></table><span class="postbody">
<br/>
<br/>
EDIT: deconfuse<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"><br/><br/>Last edited by tepples on Sun Mar 18, 2007 7:17 pm; edited 1 time in total</span></div>    
</div>
<div class="post">
    <h4>#122240 - link12827 - Sun Mar 18, 2007 1:07 am</h4>
    <div class="postbody"><span class="postbody">Thanks, it worked</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#122318 - FRuMMaGe - Sun Mar 18, 2007 6:16 pm</h4>
    <div class="postbody"><span class="postbody">The actual equivalent to DISP_SR is REG_DISPSTAT</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
