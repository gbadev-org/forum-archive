<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>No more wireless debugger - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > No more wireless debugger</h2>
<div id="posts">
<div class="post">
    <h4>#96383 - simonjhall - Thu Aug 03, 2006 12:36 am</h4>
    <div class="postbody"><span class="postbody">Sorry guys, but there won't be another version of the wireless debugger (even though I've got one here!). I've also had to stop hosting it. Basically, even though it's something I've made in my free time it's apparently "games related" and my employer technically owns the software. And they tell me that I'm not allowed to release it, so I've had to pull it.
<br/>
<br/>
I kinda thought this might happen when I originally released it, but with all the suggestions of adding it to the toolchain I thought I'd better check with the legal people here first. I didn't wanna pollute some open-source project with code owned (or in this case, pwned) by some big ol' corporation :-) And no, I don't think they're being arsey - it is written in my contract! (is debugging a game though? hmm...)
<br/>
<br/>
So for you professional programmers out there - make sure you check your contract before releasing software!
<br/>
<br/>
And people who wanted a debugger - sorry, but you're gonna have to (get someone (else) to) write one! And no, you're NOT allowed to use/modify my one.
<br/>
<br/>
For those people who do already have a copy, please don't distribute it.
<br/>
<br/>
Sorry again guys :-(
<br/>
<br/>
Mods: could you please lock the other two debugger threads?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96388 - thehive - Thu Aug 03, 2006 12:56 am</h4>
    <div class="postbody"><span class="postbody">That is a great shame.
<br/>
Many thanks for you hard work though.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96397 - HyperHacker - Thu Aug 03, 2006 2:09 am</h4>
    <div class="postbody"><span class="postbody">How can they own something you made for yourself in your spare time?<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96398 - tepples - Thu Aug 03, 2006 2:16 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">How can they own something you made for yourself in your spare time?</td> </tr></table><span class="postbody">
<br/>
Non-compete agreement.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96422 - Lynx - Thu Aug 03, 2006 7:09 am</h4>
    <div class="postbody"><span class="postbody">Yeah.. it's pretty messed up.. but it could have been worse.  They could have fired him and hunted down the people that have a copy and asked for liscense fees or threatened to sue.<br/>_________________<br/><a class="postlink" href="http://www.ndshb.com" target="_blank">NDS Homebrew Roms &amp; Reviews</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96440 - masscat - Thu Aug 03, 2006 12:55 pm</h4>
    <div class="postbody"><span class="postbody">It is a great shame.
<br/>
I had done a port of the Java stub to use the serial port and was working of the DS side.
<br/>
<br/>
Simon, I suppose it leaves you a bit buggered for doing any DS homebrew stuff for public release. Very sad.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96499 - simonjhall - Thu Aug 03, 2006 4:35 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>masscat wrote:</b></span></td> </tr> <tr> <td class="quote">It is a great shame.
<br/>
I had done a port of the Java stub to use the serial port and was working of the DS side.
<br/>
<br/>
Simon, I suppose it leaves you a bit buggered for doing any DS homebrew stuff for public release. Very sad.</td> </tr></table><span class="postbody">
<br/>
So I suppose that means you got to see the awful java I wrote then eh? :-) Anyone wanna buy my DS or gbamp?!
<br/>
<br/>
I don't think they liked the fact that it was on a DS, and that's why they called it game-related. I guess you could say that I really shouldn't have asked, but I felt a bit guilty adding my code to the toolchain knowing that I probably shouldn't do!
<br/>
<br/>
And yeah, it's definately better than me getting a message over the tannoy telling me to go collect my P45 :-) But seriously, I'm sure they wouldn't like it if people still do use and modify my code. If anyone did want any help writing their own then I could still give help (ie explaining the nasty bits of the GDB protocol) - I just can't write any code.
<br/>
<br/>
One final thing I could see coming was people trying to port it to other platforms. Yeah, it'd be cool to see it working other kit - but if it went onto a platform for which I have all the insider info then I'd definately be in the sh*t. Even if I didn't write the port!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96516 - Abcd1234 - Thu Aug 03, 2006 5:54 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>tepples wrote:</b></span></td> </tr> <tr> <td class="quote"><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>HyperHacker wrote:</b></span></td> </tr> <tr> <td class="quote">How can they own something you made for yourself in your spare time?</td> </tr></table><span class="postbody">
<br/>
Non-compete agreement.</span></td> </tr></table><span class="postbody">
<br/>
<br/>
Probably not.  I suspect his employment contract simply states that anything he creates that's related to the company business is owned by the company.  Most places have these (frankly ridiculous) clauses in their contracts (it's basically boilerplate).  In essence, by accepting employment, the contract states that any of your creative output can technically be claimed by them (my own employment contract has a clause like this, but the company brass has stated they won't enforce it).
<br/>
<br/>
TBH, if I was Mr. Hall, I'd quit.  Now.  Clearly the company doesn't give a damn about it's employees.  But, that's just MHO. ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96518 - tepples - Thu Aug 03, 2006 6:00 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Abcd1234 wrote:</b></span></td> </tr> <tr> <td class="quote">(my own employment contract has a clause like this, but the company brass has stated they won't enforce it).</td> </tr></table><span class="postbody">
<br/>
Can you get statement that in writing? If so, it would be more enforceable.
<br/>
<br/>
In fact, Richard Stallman anticipated this situation:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>In the GPL, RMS and Eben Moglen wrote:</b></span></td> </tr> <tr> <td class="quote">You should also get your employer (if you work as a programmer) or your school, if any, to sign a "copyright disclaimer" for the program, if necessary. Here is a sample; alter the names:
<br/>
<table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">Yoyodyne, Inc., hereby disclaims all copyright
<br/>
interest in the program `Gnomovision'
<br/>
(which makes passes at compilers) written 
<br/>
by James Hacker.
<br/>
<br/>
signature of Ty Coon, 1 April 1989
<br/>
Ty Coon, President of Vice</td> </tr></table><span class="postbody"></span></td> </tr></table><span class="postbody"><br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96536 - simonjhall - Thu Aug 03, 2006 6:37 pm</h4>
    <div class="postbody"><span class="postbody">I had a separate booklet's-worth of contract which detailed exactly who owned what, but it was so contractictory that basically I think everything I make is owned by them! Let's say I make a sandwich (whilst at work) - they probably have the right to steal it right out of my mouth! I doubt they really would kick up a fuss about this project though as they have nothing to gain by firing me and hiring a new programmer.
<br/>
<br/>
It is nice going to work however and having real tools and real documentation. Although reverse-engineering stuff is a laugh :-) I don't ever get the chance to write assembly <span style="font-style: italic">because I have to</span> though, as when I do it's normally to get the frame rate up, which gets a bit dull. I certainly don't get to write code which rewrites other code!
<br/>
<br/>
Again, it's my own fault so I don't have any bad feelings towards the company. Does mean that I don't have to bother fix the THUMB support :-D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96639 - masscat - Fri Aug 04, 2006 11:14 am</h4>
    <div class="postbody"><span class="postbody">Is there a way of telling if the abort expection happened because of a data or prefetch abort?
<br/>
They both end up in the Abort processor mode and the only way I can see of determining the difference is from which exception vector was taken. But the exception vectors jump to Nintendo code so this info is lost or does the nin code save it somewhere?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96641 - Mighty Max - Fri Aug 04, 2006 11:26 am</h4>
    <div class="postbody"><span class="postbody">They just jump to the same vector, there is no difference you can check.
<br/>
<br/>
But you should be able to tell if it is a prefetch abort by checking the abt's return address against memory regions code-protection.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96643 - masscat - Fri Aug 04, 2006 11:56 am</h4>
    <div class="postbody"><span class="postbody">A couple of things about the exception handler in libnds:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">// grab stored r12 and SPSR from bios exception stack
<br/>
ldr    r0, =0x027FFD90
<br/>
ldmia   r0,{r2,r12}
<br/>
<br/>
// grab banked registers from correct processor mode
<br/>
mrs   r3,cpsr
<br/>
bic   r4,r3,#0x1F
<br/>
and   r2,r2,#0x1F
<br/>
orr   r4,r4,r2
<br/>
msr   cpsr,r4
<br/>
ldr   r0,=reg12
<br/>
stmia   r0,{r12-r14}
<br/>
msr   cpsr,r3</td> </tr></table><span class="postbody">
<br/>
If the ARM was running in User mode before the exception then will the code above not return it to User mode and therefore not allow it to get back to the previous exception mode?
<br/>
Why is r12 being copied out - this is not a banked register.
<br/>
What is the BIOS code for the abort vectors point to?
<br/>
<br/>
Is there a similar way to get the exceptions on the ARM7?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#96646 - Mighty Max - Fri Aug 04, 2006 12:12 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>masscat wrote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
If the ARM was running in User mode before the exception then will the code above not return it to User mode and therefore not allow it to get back to the previous exception mode?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Correct, but the arm7 shouldn't be in user mode, using libnds/devkitarm. crt0 sets the default mode = 0x1F (system). For additional user mode support, you can just read the banked rN_usr
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Why is r12 being copied out - this is not a banked register.
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
r12 was used (and changed) by the bios handler, thus the saved version should be used
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
What is the BIOS code for the abort vectors point to?
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Sec, ill need a bit to search. :edit: <a href="http://forum.gbadev.org/viewtopic.php?t=9657&amp;postdays=0&amp;postorder=asc&amp;highlight=exception+bios&amp;start=19" target="_blank">http://forum.gbadev.org/viewtopic.php?t=9657&amp;postdays=0&amp;postorder=asc&amp;highlight=exception+bios&amp;start=19</a>
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">
<br/>
Is there a similar way to get the exceptions on the ARM7?</td> </tr></table><span class="postbody">
<br/>
<br/>
The arm7 has no mpu, i haven't looked if it handles the vectors that can still occure.
<br/>
<br/>
:update:
<br/>
arm7 exceptions:
<br/>
 - set IRQ, FIQ bits in cpsr (thus disabling them)
<br/>
 - sets stack to 0x0380FFDC
<br/>
 - pushes {r12,r14} to stack (via STMDB)
<br/>
 - pushes spsr to stack
<br/>
 - loads r12 with the user exception vector at stack + 0xC
<br/>
 - BL r12
<br/>
 - restores the saved values
<br/>
 - jumps back
<br/>
<br/>
So you can just set 0x0380FFDC to your own handler, that can return. Breakpointing via undefined instructions should be no problem on arm7 too.<br/>_________________<br/><a class="postlink" href="http://mightymax.org/gbamp_multiboot.html" target="_blank">GBAMP Multiboot</a></span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
