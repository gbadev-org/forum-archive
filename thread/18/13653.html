<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>implementing dynamic code loading - any ideas/hints? - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/forum-archive/static/pure-min.css" />
        <link rel="stylesheet" href="/forum-archive/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        <i>This is a read-only mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. A new forum can be found <a href="https://forum.gbadev.net/" target="_blank">here</a>.</i><br />

        <h2>DS development > implementing dynamic code loading - any ideas/hints?</h2>
<div id="posts">
<div class="post">
    <h4>#134309 - silent_code - Thu Jul 12, 2007 12:49 pm</h4>
    <div class="postbody"><span class="postbody">hi there!
<br/>
<br/>
i was wondering what i need to implement dynamic code loading. what i mean by dcl is e.g. ai routines, that don't have to be in memory all the time when the corresponding agents aren't in use and won't be for a long time (like when they aren't in a certain level).
<br/>
<br/>
i guess i have to use some relocation code (does the nds have a mmu? i remember the gba had one, but i'm not sure and too short on inet time for checking) etc.
<br/>
<br/>
but my biggest problem is: how can i generate a file that will contain executable code to be loaded on runtime? are these .elf or .o files? i really have next to no idea about compilers. i understand them and languages in general and how to use them in a way to get my stuff done, but that's it - i have no special knowledge about e.g. gcc.
<br/>
furthermore, how can i access and alter (relocate) symbols?
<br/>
<br/>
you're welcome to give me tips and hints, it doesn't matter if it applies to c or c++ (just make a note to *what* i applies). alternatively you could also post a link to a tutorial or some online book or (legal) ebook (no money for real books atm) to read up on the topic.
<br/>
<br/>
otherwise i had to implement an interpreter, but i'd rather chose the way of native code.
<br/>
<br/>
thank you very much!
<br/>
<br/>
<br/>
and remember, only a respectful post is a very good post, that can help a lot! ;^D</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134313 - OOPMan - Thu Jul 12, 2007 1:11 pm</h4>
    <div class="postbody"><span class="postbody">There has been a fair bit of discussion on this before...
<br/>
<br/>
The DS has an MPU, not an MMU, which makes things more difficult, but not totally impossible :-)
<br/>
<br/>
Try searching for the Topic called "Building an OS" which I started. The initial topic was dynamic code loading, but it quickly turned into an OS thread...<br/>_________________<br/>"My boot, your face..." - Attributed to OOPMan, Emperor of Eroticon VI
<br/>
<br/>
You can find my NDS homebrew projects <a class="postlink" href="http://blog.dev-scene.com/oopman/" target="_blank">here...</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134357 - DragonMinded - Thu Jul 12, 2007 5:50 pm</h4>
    <div class="postbody"><span class="postbody">Alternatively, you can check out the source to my DSOrganize or moonshell as both have a plugin/exe structure and code relocation.  The method is kind-of ghetto (ie doesn't load full elf files and relocate all symbols) but it is plenty fine if you want a standard ai plugin type that can be loaded easily.<br/>_________________<br/>Enter the mind of the dragon.
<br/>
<br/>
<a href="http://dragonminded.blogspot.com" target="_blank">http://dragonminded.blogspot.com</a>
<br/>
<br/>
Seriously guys, how hard is it to simply TRY something yourself?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#134480 - silent_code - Fri Jul 13, 2007 11:07 am</h4>
    <div class="postbody"><span class="postbody">thanks for the responses!
<br/>
i'll take a look at the stuff.
<br/>
<br/>
so, it's possible to compile like any ordinary program and load the stuff needed for execution - with any compiler tricks involved, right? just load the .elf do the (partial) relocation, look for main() and execute it... sounds like a bit of work, but nothing impossible. hope i'll manage to get it working. :^)
<br/>
<br/>
OOPMan, did it work or did you stick with lua?</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
