<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Storing level data - gbadev.org forum archive</title>
        <link rel="stylesheet" href="static/pure-min.css" />
        <link rel="stylesheet" href="static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > Storing level data</h2>
<div id="posts">
<div class="post">
    <h4>#126809 - Rajveer - Thu Apr 26, 2007 11:44 pm</h4>
    <div class="postbody"><span class="postbody">Hi guys. At the moment I'm storing 3D level data using a data structure in a C file with information such as polygons, normals, texture coordinates. I'm still having the compilation time problems I was having before except that information is stored in a C file now <a href="http://forum.gbadev.org/viewtopic.php?t=12480&amp;highlight=compiling+array" target="_blank">http://forum.gbadev.org/viewtopic.php?t=12480&amp;highlight=compiling+array</a>
<br/>
<br/>
The main problem now however is that when storing around 150 polygons, the game freezes at the beginning and doesn't load. I'm not sure if I'm using memory properly and I think I'm overloading whichever section of memory I'm using, so what would you guys suggest? Which area of memory should I store the array, considering that some of the data needs to change on the fly?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126818 - sajiimori - Fri Apr 27, 2007 1:20 am</h4>
    <div class="postbody"><span class="postbody">I don't know what the typical homebrew setup does, but check your linkscript to make sure data is going in main RAM by default, and not DTCM.
<br/>
<br/>
In the long run, you'll want to store that data in a filesystem of some sort.  Otherwise you'd have to carry all your levels in RAM all the time.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126822 - Rajveer - Fri Apr 27, 2007 2:18 am</h4>
    <div class="postbody"><span class="postbody">Cheers for the reply. At the moment I'm using the PALib standard makefile, so are you suggesting that I start making my own and sort out memory locations during linkage on my own? Aren't memory location setup in the actual programming or am I wrong?
<br/>
<br/>
Also, later I will plan on storing data in a filesystem, but the selected level data will still be loaded into RAM with arrays and structs right?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126832 - tepples - Fri Apr 27, 2007 4:04 am</h4>
    <div class="postbody"><span class="postbody">First try making the geometry structs <span style="font-weight: bold">const</span>. That should force them into EWRAM (4 MB) instead of DTCM (much smaller), even on makefiles created several devkitARM revisions ago before the standard link script put .data into EWRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126894 - Rajveer - Fri Apr 27, 2007 10:49 pm</h4>
    <div class="postbody"><span class="postbody">One problem with declaring the geometry structs as const will be that I won't be able to modify some data. Each polygon has an associated "timestamp" variable which is set if the polygon has already been tested in a certain frame, to avoid unnecessary processing. Any ways of getting around this?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126906 - HyperHacker - Sat Apr 28, 2007 12:19 am</h4>
    <div class="postbody"><span class="postbody">So right now your level data is an array defined in a source file? If it's local and not static, you're almost certainly going to blow the stack with that much information. Otherwise, I'd check if any code that runs before referencing the array. (Try putting something that will produce some manner of output as the first instruction of main() on each CPU - draw a pixel on ARM9, blink the power LED on ARM7 is a good bet, since they're fairly simple.) If it doesn't, then you know the array itself is the problem.
<br/>
<br/>
Also I hope your level data isn't just one big mesh? The logic will be a lot easier and faster if you divide things into objects, each of which point to an array of polygons. The objects have their world coordinates, speed, size etc and the polygons have coordinates where 0,0,0 = center of the object. This way, for example, moving a character or scaling things up and down becomes a simple matter of changing SomeObject.Position or SomeObject.Size, and if you have two of the same character, they can share polygon data instead of duplicating it. I realize this is probably blatantly obvious, but your comment about per-polygon timestamps made it sound like you weren't using this method.<br/>_________________<br/>I'm a PSP hacker now, but I still &lt;3 DS.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126921 - sajiimori - Sat Apr 28, 2007 1:27 am</h4>
    <div class="postbody"><span class="postbody">Store the timestamps in a separate array.  Your polys should all have some numeric ID, usually just their index in the array of all polys.  The timestamp array would use the same indices.
<br/>
<br/>
Still, if non-const data is going in DTCM by default, then your linkscript is weird and it should be modified.  It's true that the memory layout is determined programmatically, but crt0.s handles all that -- it follows the instructions left by the linkscript.
<br/>
<br/>
You normally don't modify crt0.s to change memory layout; you change the linkscript.
<br/>
<br/>
And again, using a filesystem is highly preferable to statically linking all of it.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126932 - Rajveer - Sat Apr 28, 2007 3:12 am</h4>
    <div class="postbody"><span class="postbody">@HyperHacker: Good idea. I recompiled with smaller and larger arrays and it's definately causing the problem and must be blowing the DTCM. At the moment the level data is one big mesh, but that's because that's the way it works best for my game, level data is just a track with a few polygons here and there for buildings and such.
<br/>
<br/>
@sajiimori: Ah that makes sense, creating a timestamp array at loading time. I'm using the PALib makefile and whatever link script that works, I've never created my own but I guess it's time for me to look into it.
<br/>
<br/>
1) So should I look into how to use libfat and store all my level data on the card?
<br/>
2) When loading data, would I stream the data stored in a level file into the data structure I'm using? I've never done anything like streaming data from a file.
<br/>
3) And how would I ensure that the streamed data would go into main memory and not DTCM, I'm assuming it's not done through the linker as the linker just has rules for data already initialised whereas I'd be reading in data at run-time?
<br/>
4) One last question, is there a method to read compressed files if I were to store all my level data in a zipped file or something?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126933 - tepples - Sat Apr 28, 2007 3:39 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Rajveer wrote:</b></span></td> </tr> <tr> <td class="quote">1) So should I look into how to use libfat and store all my level data on the card?</td> </tr></table><span class="postbody">
<br/>
Yes.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">2) When loading data, would I stream the data stored in a level file into the data structure I'm using? I've never done anything like streaming data from a file.</td> </tr></table><span class="postbody">
<br/>
malloc() always allocates from main memory.
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Quote:</b></span></td> </tr> <tr> <td class="quote">4) One last question, is there a method to read compressed files if I were to store all my level data in a zipped file or something?</td> </tr></table><span class="postbody">
<br/>
If you include a zip library, then yes, you can read zip files using libfat.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#126934 - Rajveer - Sat Apr 28, 2007 3:41 am</h4>
    <div class="postbody"><span class="postbody">Aha! Great, thanks for answering my questions tepples!</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127117 - Rajveer - Mon Apr 30, 2007 3:44 am</h4>
    <div class="postbody"><span class="postbody">Ok so just for testing purposes and so I can continue my project without libfat (until I get everything sorted which I need complete) I decided to scrap using the PALib makefile and am using the standard one with libnds. The same problem occurs without declaring the array as a const, except that the program runs before the level is loaded and freezes upon array initialisation. Just wondering, the link script is setup within the makefile right, so why does the link script still not put the data into EWRAM?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127121 - tepples - Mon Apr 30, 2007 4:03 am</h4>
    <div class="postbody"><span class="postbody">Do this at a command prompt:
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">set PATH=C:\devkitPro\devkitARM\bin;%PATH%
<br/>
arm-eabi-nm -n arm9.elf &gt; map.txt</td> </tr></table><span class="postbody">
<br/>
and paste the contents of map.txt here.
<br/>
<br/>
Normally, addresses from 0x02000000 to 0x023FFFFF represent EWRAM (main memory). Addresses outside this range are smaller chunks such as DTCM or shared IWRAM.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127152 - Rajveer - Mon Apr 30, 2007 1:03 pm</h4>
    <div class="postbody"><span class="postbody">Ahh great, thanks tepples I never knew you could do that! I've checked and it says that EWRAM starts at 0x02068720 and the array which I want (Level1Poly) is within the range with the correct size allocated for it's size. Must be another problem now...also it still works on iDeas but not on hardware...
<br/>
<br/>
</span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>Code:</b></span></td> </tr> <tr> <td class="code">         w __deregister_frame_info
<br/>
         w __register_frame_info
<br/>
         w _Jv_RegisterClasses
<br/>
00080000 A _stack
<br/>
01000000 A __itcm_start
<br/>
01000000 T irqTable
<br/>
010000c8 T IntrMain
<br/>
010000fc t findIRQ
<br/>
01000118 t no_handler
<br/>
01000128 t jump_intr
<br/>
0100013c t got_handler
<br/>
0100015c t IntrRet
<br/>
01000190 A __itcm_end
<br/>
02000000 T __text_start
<br/>
02000000 T _start
<br/>
02000158 t ILoop
<br/>
0200015c t ClearMem
<br/>
02000170 t ClrLoop
<br/>
02000180 t CopyMemCheck
<br/>
02000184 t CopyMem
<br/>
02000194 t CIDLoop
<br/>
02000220 T _init
<br/>
02000230 t __do_global_dtors_aux
<br/>
0200025c t frame_dummy
<br/>
020002a0 T Draw3DS
<br/>
02004e20 T traverseOctree
<br/>
02004f58 T triAABBTest
<br/>
0200507c T findEmptyLinkedListNode
<br/>
020050a4 T rayPolyTest
<br/>
020055a4 T testAABB_Octree
<br/>
020057a0 T applyGrav
<br/>
02005990 T addThrustVectorToFinalVector
<br/>
02005bb4 T applyFrictionToFinalVector
<br/>
02005c40 T applyGroundReactionVector
<br/>
02005f6c T checkCollision
<br/>
0200619c T applyStrafeForce
<br/>
020063f0 T applySideThrustForce
<br/>
020066bc T vBlank
<br/>
020066f4 T arccomp
<br/>
02006724 T lapManager
<br/>
020067ac T arccos
<br/>
020067e0 T DrawSkybox
<br/>
02006b68 T DrawLevel1
<br/>
02006cf0 T DrawGLScene
<br/>
02007364 T LoadGLTextures
<br/>
020075fc T menuShipSelect
<br/>
02007c64 T clearPolyList
<br/>
02007c94 T addLinkedListNode
<br/>
02007ccc T addNode
<br/>
0200808c T buildOctree
<br/>
02008260 T rotateYAxis
<br/>
020088e8 T moveComp
<br/>
02008d94 T getRotationAxis
<br/>
020098e0 T rotateToWaypoint
<br/>
0200a4e0 T playerManager
<br/>
0200a698 T rotateXAxis
<br/>
0200ad1c T checkShipGroundCollision
<br/>
0200b454 T checkPlayers
<br/>
0200b650 T main
<br/>
02014d48 T keysHeld
<br/>
02014d54 T keysDown
<br/>
02014d68 T scanKeys
<br/>
02014dfc T keysDownRepeat
<br/>
02014e0c T keysSetRepeat
<br/>
02014e30 T keysUp
<br/>
02014e48 T vramSetMainBanks
<br/>
02014e8c T vramRestorMainBanks
<br/>
02014e98 T vramRestoreMainBanks
<br/>
02014ea4 T vramSetBankA
<br/>
02014eb8 T vramSetBankB
<br/>
02014ecc T vramSetBankC
<br/>
02014ee0 T vramSetBankD
<br/>
02014ef4 T vramSetBankE
<br/>
02014f08 T vramSetBankF
<br/>
02014f1c T vramSetBankG
<br/>
02014f30 T vramSetBankH
<br/>
02014f44 T vramSetBankI
<br/>
02014f58 T glEnable
<br/>
02014f78 T glDisable
<br/>
02014f94 T glLoadMatrix4x4
<br/>
02014fdc T glLoadMatrix4x3
<br/>
02015014 T glMultMatrix4x4
<br/>
0201505c T glMultMatrix4x3
<br/>
02015094 T glMultMatrix3x3
<br/>
020150c0 T glRotateZi
<br/>
020150fc T glRotateYi
<br/>
0201513c T glRotateXi
<br/>
02015178 T glRotateX
<br/>
020151ac T glRotateY
<br/>
020151dc T glRotateZ
<br/>
0201520c T glVertex3f
<br/>
02015260 T glColor3f
<br/>
020152b8 T glScalef
<br/>
02015300 T glTranslatef
<br/>
02015348 T glNormal3f
<br/>
0201544c T glOrthof32
<br/>
02015600 T glOrtho
<br/>
02015684 T glFrustumf32
<br/>
02015848 T glFrustum
<br/>
020158cc T gluPerspectivef32
<br/>
02015958 T gluPerspective
<br/>
020159d8 T gluPickMatrix
<br/>
02015a6c T glMaterialf
<br/>
02015aec T glResetMatrixStack
<br/>
02015b24 T glSetOutlineColor
<br/>
02015b34 T glSetToonTable
<br/>
02015b4c T glSetToonTableRange
<br/>
02015b68 T glResetTextures
<br/>
02015b94 T glGenTextures
<br/>
02015bd0 T glBindTexture
<br/>
02015bf8 T glColorTable
<br/>
02015c10 T glTexParameter
<br/>
02015c3c T glGetTexturePointer
<br/>
02015c4c T glGetTexParameter
<br/>
02015c60 T alignVal
<br/>
02015c70 T getNextPaletteSlot
<br/>
02015cb8 T vramGetBank
<br/>
02015d70 T vramIsTextureBank
<br/>
02015dd4 T getNextTextureSlot
<br/>
02015e28 T glGetInt
<br/>
02015e88 T intof32
<br/>
02015e8c T floatof32
<br/>
02015ea4 T intot16
<br/>
02015eac T floatot16
<br/>
02015ec8 T intov16
<br/>
02015ed0 T floatov16
<br/>
02015eec T intov10
<br/>
02015ef4 T floatov10
<br/>
02015f10 T glSetAlpha
<br/>
02015f20 T glAlphaFunc
<br/>
02015f30 T glCutoffDepth
<br/>
02015f3c T glTexLoadPal
<br/>
02015f70 T gluTexLoadPal
<br/>
02015f94 T glTexImage2D
<br/>
02016064 T glTexCoord2f32
<br/>
020160e0 T glTexCoord2f
<br/>
02016178 T glReset
<br/>
020161d4 T glGetFixed
<br/>
0201629c T gluLookAtf32
<br/>
02016754 T gluLookAt
<br/>
02016800 T glRotatef32i
<br/>
02016aec T glRotatef32
<br/>
02016b24 T glRotatef
<br/>
02016b78 T irqDummy
<br/>
02016b7c T irqSet
<br/>
02016be4 T irqInit
<br/>
02016c30 T irqClear
<br/>
02016cb0 T irqInitHandler
<br/>
02016ce0 T irqEnable
<br/>
02016d30 T irqDisable
<br/>
02016d80 T swiSoftReset
<br/>
02016d84 T swiDelay
<br/>
02016d88 T swiIntrWait
<br/>
02016d8c T swiWaitForVBlank
<br/>
02016d90 T swiSleep
<br/>
02016d94 T swiChangeSoundBias
<br/>
02016d98 T swiDivide
<br/>
02016d9c T swiRemainder
<br/>
02016da2 T swiDivMod
<br/>
02016dae T swiCopy
<br/>
02016db2 T swiFastCopy
<br/>
02016db6 T swiSqrt
<br/>
02016dba T swiCRC16
<br/>
02016dbe T swiIsDebugger
<br/>
02016dc2 T swiUnpackBits
<br/>
02016dc6 T swiDecompressLZSSWram
<br/>
02016dca T swiDecompressLZSSVram
<br/>
02016dce T swiDecompressHuffman
<br/>
02016dd2 T swiDecompressRLEWram
<br/>
02016dd6 T swiDecompressRLEVram
<br/>
02016dda T swiWaitForIRQ
<br/>
02016dde T swiDecodeDelta8
<br/>
02016de2 T swiDecodeDelta16
<br/>
02016de6 T swiSetHaltCR
<br/>
02016df0 T __aeabi_idiv
<br/>
02016df0 T __divsi3
<br/>
02016e84 T __aeabi_idivmod
<br/>
02016e94 T __aeabi_idiv0
<br/>
02016e94 T __aeabi_ldiv0
<br/>
02016e94 T __div0
<br/>
02016e98 T _call_via_r0
<br/>
02016e9c T _call_via_r1
<br/>
02016ea0 T _call_via_r2
<br/>
02016ea4 T _call_via_r3
<br/>
02016ea8 T _call_via_r4
<br/>
02016eac T _call_via_r5
<br/>
02016eb0 T _call_via_r6
<br/>
02016eb4 T _call_via_r7
<br/>
02016eb8 T _call_via_r8
<br/>
02016ebc T _call_via_r9
<br/>
02016ec0 T _call_via_sl
<br/>
02016ec4 T _call_via_fp
<br/>
02016ec8 T _call_via_ip
<br/>
02016ecc T _call_via_sp
<br/>
02016ed0 T _call_via_lr
<br/>
02016ed4 T __aeabi_drsub
<br/>
02016edc T __aeabi_dsub
<br/>
02016edc T __subdf3
<br/>
02016ee0 T __adddf3
<br/>
02016ee0 T __aeabi_dadd
<br/>
020171f0 T __aeabi_ui2d
<br/>
020171f0 T __floatunsidf
<br/>
02017214 T __aeabi_i2d
<br/>
02017214 T __floatsidf
<br/>
0201723c T __aeabi_f2d
<br/>
0201723c T __extendsfdf2
<br/>
0201727c T __aeabi_ul2d
<br/>
0201727c T __floatundidf
<br/>
02017290 T __aeabi_l2d
<br/>
02017290 T __floatdidf
<br/>
020172f0 T __aeabi_dmul
<br/>
020172f0 T __muldf3
<br/>
02017580 T __aeabi_ddiv
<br/>
02017580 T __divdf3
<br/>
0201778c T __aeabi_d2iz
<br/>
0201778c T __fixdfsi
<br/>
020177e8 T __aeabi_d2f
<br/>
020177e8 T __truncdfsf2
<br/>
02017888 T __aeabi_frsub
<br/>
02017890 T __aeabi_fsub
<br/>
02017890 T __subsf3
<br/>
02017894 T __addsf3
<br/>
02017894 T __aeabi_fadd
<br/>
02017a50 T __aeabi_ui2f
<br/>
02017a50 T __floatunsisf
<br/>
02017a58 T __aeabi_i2f
<br/>
02017a58 T __floatsisf
<br/>
02017a78 T __aeabi_ul2f
<br/>
02017a78 T __floatundisf
<br/>
02017a88 T __aeabi_l2f
<br/>
02017a88 T __floatdisf
<br/>
02017b34 T __aeabi_fmul
<br/>
02017b34 T __mulsf3
<br/>
02017ccc T __aeabi_fdiv
<br/>
02017ccc T __divsf3
<br/>
02017e2c T __gesf2
<br/>
02017e2c T __gtsf2
<br/>
02017e34 T __lesf2
<br/>
02017e34 T __ltsf2
<br/>
02017e3c T __cmpsf2
<br/>
02017e3c T __eqsf2
<br/>
02017e3c T __nesf2
<br/>
02017e9c T __aeabi_cfrcmple
<br/>
02017eac T __aeabi_cfcmpeq
<br/>
02017eac T __aeabi_cfcmple
<br/>
02017ec4 T __aeabi_fcmpeq
<br/>
02017edc T __aeabi_fcmplt
<br/>
02017ef4 T __aeabi_fcmple
<br/>
02017f0c T __aeabi_fcmpge
<br/>
02017f24 T __aeabi_fcmpgt
<br/>
02017f3c T __aeabi_f2iz
<br/>
02017f3c T __fixsfsi
<br/>
02017f98 T __aeabi_f2uiz
<br/>
02017f98 T __fixunssfsi
<br/>
02017fec T __aeabi_lmul
<br/>
02017fec T __muldi3
<br/>
02018070 T bsearch
<br/>
020180d0 T __libc_fini_array
<br/>
02018100 T __libc_init_array
<br/>
02018158 T _iprintf_r
<br/>
02018174 T iprintf
<br/>
02018198 T free
<br/>
020181b0 T malloc
<br/>
020181c8 T _malloc_r
<br/>
02018714 T __malloc_lock
<br/>
02018718 T __malloc_unlock
<br/>
0201871c T _sbrk_r
<br/>
02018748 t __sprint_r
<br/>
02018768 T _vfiprintf_r
<br/>
02019400 T vfiprintf
<br/>
02019424 T _wcrtomb_r
<br/>
02019458 T wcrtomb
<br/>
0201947c T _wcsrtombs_r
<br/>
02019558 T wcsrtombs
<br/>
02019580 T _wctomb_r
<br/>
02019848 T __swsetup
<br/>
020198f8 T fflush
<br/>
02019a04 t std
<br/>
02019a3c T __sfp_lock_acquire
<br/>
02019a40 T __sfp_lock_release
<br/>
02019a44 T __sinit_lock_acquire
<br/>
02019a48 T __sinit_lock_release
<br/>
02019a4c T __sinit
<br/>
02019aa8 t __fp_lock
<br/>
02019aac t __fp_unlock
<br/>
02019ab0 T __fp_unlock_all
<br/>
02019acc T __fp_lock_all
<br/>
02019ae8 T _cleanup_r
<br/>
02019afc T _cleanup
<br/>
02019b14 T __sfmoreglue
<br/>
02019b4c T __sfp
<br/>
02019bd0 T _malloc_trim_r
<br/>
02019c74 T _free_r
<br/>
02019e40 T __sfvwrite_r
<br/>
0201a0fc T _fwalk_reent
<br/>
0201a168 T _fwalk
<br/>
0201a1d0 T __locale_charset
<br/>
0201a1dc T _localeconv_r
<br/>
0201a1e4 T localeconv
<br/>
0201a1fc T _setlocale_r
<br/>
0201a244 T setlocale
<br/>
0201a260 T __smakebuf
<br/>
0201a344 T memchr
<br/>
0201a3f8 T memmove
<br/>
0201a47c T memset
<br/>
0201a4dc T _realloc_r
<br/>
0201a8b0 T _wrapup_reent
<br/>
0201a900 T cleanup_glue
<br/>
0201a924 T _reclaim_reent
<br/>
0201a9c8 T __sclose
<br/>
0201a9e4 T __sseek
<br/>
0201aa24 T __swrite
<br/>
0201aa6c T __sread
<br/>
0201aaa8 T strcmp
<br/>
0201ab10 T strlen
<br/>
0201ab60 T _write_r
<br/>
0201ab90 T _close_r
<br/>
0201abbc T _fclose_r
<br/>
0201ac64 T fclose
<br/>
0201ac80 T _fstat_r
<br/>
0201acb0 T _lseek_r
<br/>
0201ace0 T _read_r
<br/>
0201ad10 T __aeabi_uidiv
<br/>
0201ad10 T __udivsi3
<br/>
0201ad8c T __aeabi_uidivmod
<br/>
0201ad9c T _close
<br/>
0201ade8 T _fstat
<br/>
0201ae38 T isatty
<br/>
0201ae3c T _lseek
<br/>
0201ae74 T _read
<br/>
0201aec8 T _sbrk
<br/>
0201af2c T _write
<br/>
0201af80 T setDefaultDevice
<br/>
0201af94 T AddDevice
<br/>
0201b00c T FindDevice
<br/>
0201b074 T RemoveDevice
<br/>
0201b0a0 T strncmp
<br/>
0201b134 t ___call_via_r3_from_arm
<br/>
0201b140 t ____aeabi_i2f_from_thumb
<br/>
0201b144 T ____aeabi_i2f_change_to_arm
<br/>
0201b148 t ____aeabi_fmul_from_thumb
<br/>
0201b14c T ____aeabi_fmul_change_to_arm
<br/>
0201b150 t ____aeabi_f2d_from_thumb
<br/>
0201b154 T ____aeabi_f2d_change_to_arm
<br/>
0201b158 t ____aeabi_dmul_from_thumb
<br/>
0201b15c T ____aeabi_dmul_change_to_arm
<br/>
0201b160 t ____aeabi_d2iz_from_thumb
<br/>
0201b164 T ____aeabi_d2iz_change_to_arm
<br/>
0201b168 t ____aeabi_f2iz_from_thumb
<br/>
0201b16c T ____aeabi_f2iz_change_to_arm
<br/>
0201b170 t ____aeabi_f2uiz_from_thumb
<br/>
0201b174 T ____aeabi_f2uiz_change_to_arm
<br/>
0201b178 t ____aeabi_fcmpge_from_thumb
<br/>
0201b17c T ____aeabi_fcmpge_change_to_arm
<br/>
0201b180 t ____aeabi_d2f_from_thumb
<br/>
0201b184 T ____aeabi_d2f_change_to_arm
<br/>
0201b188 t ____aeabi_fcmple_from_thumb
<br/>
0201b18c T ____aeabi_fcmple_change_to_arm
<br/>
0201b190 T _fini
<br/>
0201b19c A __text_end
<br/>
0201b19c R back_bin_size
<br/>
0201b1a0 R back_bin
<br/>
020231a0 R back_bin_end
<br/>
020231a0 R bottom_bin_size
<br/>
020231a4 R bottom_bin
<br/>
0202b1a4 R bottom_bin_end
<br/>
0202b1a4 R front_bin_size
<br/>
0202b1a8 R front_bin
<br/>
020331a8 R front_bin_end
<br/>
020331a8 R left_bin_size
<br/>
020331ac R left_bin
<br/>
0203b1ac R left_bin_end
<br/>
0203b1ac R right_bin_size
<br/>
0203b1b0 R right_bin
<br/>
020431b0 R right_bin_end
<br/>
020431b0 R road2_bin_size
<br/>
020431b4 R road2_bin
<br/>
020433b4 R road2_bin_end
<br/>
020433b4 R road3_bin_size
<br/>
020433b8 R road3_bin
<br/>
020473b8 R road3_bin_end
<br/>
020473b8 R road3_pal_bin_size
<br/>
020473bc R road3_pal_bin
<br/>
020473fc R road3_pal_bin_end
<br/>
020473fc R ship1texture_bin_size
<br/>
02047400 R ship1texture_bin
<br/>
0204b400 R ship1texture_bin_end
<br/>
0204b400 R ship1texture_pal_bin_size
<br/>
0204b404 R ship1texture_pal_bin
<br/>
0204b604 R ship1texture_pal_bin_end
<br/>
0204b604 R ship2texture_bin_size
<br/>
0204b608 R ship2texture_bin
<br/>
0204f608 R ship2texture_bin_end
<br/>
0204f608 R ship2texture_pal_bin_size
<br/>
0204f60c R ship2texture_pal_bin
<br/>
0204f80c R ship2texture_pal_bin_end
<br/>
0204f80c R shipselectmenu_bin_size
<br/>
0204f810 R shipselectmenu_bin
<br/>
0205f810 R shipselectmenu_bin_end
<br/>
0205f810 R top_bin_size
<br/>
0205f814 R top_bin
<br/>
02067814 R COS_bin_size
<br/>
02067814 R top_bin_end
<br/>
02067818 R COS_bin
<br/>
02067c18 R COS_bin_end
<br/>
02067c5c R SIN_bin_size
<br/>
02067c60 R SIN_bin
<br/>
02068060 R SIN_bin_end
<br/>
02068060 R TAN_bin_size
<br/>
02068064 R TAN_bin
<br/>
02068464 R TAN_bin_end
<br/>
020685d0 r zeroes.3146
<br/>
020685e0 r blanks.3145
<br/>
020685f0 R _global_impure_ptr
<br/>
020685f4 r lconv
<br/>
02068624 r charset
<br/>
02068628 R dotab_stdnull
<br/>
02068710 A __exidx_end
<br/>
02068710 A __exidx_start
<br/>
02068710 t __frame_dummy_init_array_entry
<br/>
02068710 A __init_array_start
<br/>
02068710 A __preinit_array_end
<br/>
02068710 A __preinit_array_start
<br/>
02068714 t __do_global_dtors_aux_fini_array_entry
<br/>
02068714 A __fini_array_start
<br/>
02068714 A __init_array_end
<br/>
02068718 r __EH_FRAME_BEGIN__
<br/>
02068718 A __fini_array_end
<br/>
02068718 r __FRAME_END__
<br/>
0206871c d __JCR_END__
<br/>
0206871c d __JCR_LIST__
<br/>
02068720 A __data_start
<br/>
02068720 D __dso_handle
<br/>
02068720 A __ewram_start
<br/>
02068724 D currentCamera
<br/>
02068725 D drawSkyBoxSwitch
<br/>
02068726 d delay
<br/>
02068727 d repeat
<br/>
02068728 d count
<br/>
0206872c D nextBlock
<br/>
02068730 D nameCount
<br/>
02068734 d enable_bits
<br/>
02068738 D __malloc_av_
<br/>
02068b40 D __malloc_trim_threshold
<br/>
02068b44 D __malloc_sbrk_base
<br/>
02068b48 D _impure_ptr
<br/>
02068b50 d impure_data
<br/>
02068f60 D __mb_cur_max
<br/>
02068f64 D __lc_ctype
<br/>
02068f70 D devoptab_list
<br/>
02068fb0 d defaultDevice
<br/>
02068fb4 A __data_end
<br/>
02068fb4 A __dtcm_lma
<br/>
02068fb4 A __itcm_lma
<br/>
02069144 A __appended_data
<br/>
02069144 A __bss_lma
<br/>
02069144 A __bss_start
<br/>
02069144 A __bss_start__
<br/>
02069144 b completed.2604
<br/>
02069148 b object.2646
<br/>
02069160 B ship_3ds
<br/>
02069164 B numberOfCollisionTests
<br/>
02069168 B maxNumberOfCollisionTests
<br/>
0206916c B frameCounter
<br/>
02069170 B loopCounter
<br/>
02069174 B elapsedFrames
<br/>
02069178 B frameold
<br/>
0206917c b keys
<br/>
0206917e b keysold
<br/>
02069180 b keysrepeat
<br/>
02069184 B activeTexture
<br/>
02069188 B nextPBlock
<br/>
0206918c b specular_emission.3038
<br/>
02069190 b diffuse_ambient.3037
<br/>
02069194 B __malloc_top_pad
<br/>
02069198 B __malloc_max_sbrked_mem
<br/>
0206919c B __malloc_max_total_mem
<br/>
020691a0 B __malloc_current_mallinfo
<br/>
020691c8 B __nlocale_changed
<br/>
020691cc B __mlocale_changed
<br/>
020691d0 B _PathLocale
<br/>
020691d4 b heap_start.2452
<br/>
020691d8 B fake_heap_end
<br/>
020691dc B fake_heap_start
<br/>
020691e0 B Level1Waypoint
<br/>
02069690 B cameraup
<br/>
0206969c B road3Palette
<br/>
020696a0 B waypointLimit
<br/>
020696a4 B polylimit
<br/>
020696a8 B ship
<br/>
020696b8 B timestamp
<br/>
020696bc B player
<br/>
02069a64 B levelLowLimit
<br/>
02069a68 B collisionListHead
<br/>
02069a6c B Level1Poly
<br/>
0206d75c B texture
<br/>
0206d774 B roadtextures
<br/>
0206d77c B shipPalette
<br/>
0206d784 B shiptextures
<br/>
0206d78c B head
<br/>
0206d790 B correctNode
<br/>
0206d794 B LevelScale
<br/>
0206d798 B camerapos
<br/>
0206d7a4 B futureNode
<br/>
0206d7a8 B shipselecttextures
<br/>
0206d7b0 B waypointBoundary
<br/>
0206d7b4 B cameralook
<br/>
0206d7c0 B currentPolyListNode
<br/>
0206d7c4 B textures
<br/>
0206f7c4 B errno
<br/>
0206f7c8 A __bss_end
<br/>
0206f7c8 A __bss_end__
<br/>
0206f7c8 A __end__
<br/>
0206f7c8 A _end
<br/>
023ff000 A __eheap_end
<br/>
023ff000 A __ewram_end
<br/>
0b000000 A __dtcm_end
<br/>
0b000000 A __dtcm_start
<br/>
0b000000 A __sbss_end
<br/>
0b000000 A __sbss_start
<br/>
0b000000 A __sbss_start__
<br/>
0b003d00 A __sp_usr
<br/>
0b003e00 A __sp_irq
<br/>
0b003f00 A __sp_svc
<br/>
0b003ff8 A __irq_flags
<br/>
0b003ffc A __irq_vector
<br/>
0b004000 A __dtcm_top
<br/>
</td> </tr></table><span class="postbody">
<br/>
<br/>
Thinking about it, the process for building the octree is a recursive one so could the memory which stores the current state of the program be overloaded? I doubt it but I have no idea...</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127187 - tepples - Mon Apr 30, 2007 7:13 pm</h4>
    <div class="postbody"><span class="postbody">The ARM9 stack doesn't go in main memory; it goes in a smaller, faster memory. If you convert your octree code to use iteration and explicit stack management instead of recursion, you can put the stack into main memory.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127231 - Rajveer - Tue May 01, 2007 1:13 am</h4>
    <div class="postbody"><span class="postbody">Cool, I have deduced that it is definately the octree, I'll have to look into how to convert recursive functions into iterative ones, thanks for the advice. I'm not too sure what you mean by explicit state management, could you enlighten me?</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127244 - tepples - Tue May 01, 2007 4:27 am</h4>
    <div class="postbody"><span class="postbody">When converting a non-tail-recursive function to iteration, sometimes you need to save data for future iterations, where the function would normally call itself. This means you need to push and pop things on a stack emulated in software. There are several ways to make a stack in main memory, such as an array list or a linked list.<br/>_________________<br/>-- Where is he?
<br/>
-- Who?
<br/>
-- You know, the human.
<br/>
-- I think he moved to Tilwick.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#127451 - Rajveer - Wed May 02, 2007 4:41 pm</h4>
    <div class="postbody"><span class="postbody">Aha. I've got the idea, I'll look into it after my exams. Thanks tepples!</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
