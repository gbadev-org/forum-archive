<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>DS color depth.   16bit or 18bit?!?! - gbadev.org forum archive</title>
        <link rel="stylesheet" href="/static/pure-min.css" />
        <link rel="stylesheet" href="/static/main.css" />
    </head>
    <body>
        <h1>gbadev.org forum archive</h1>

        This is a mirror of the content originally found on forum.gbadev.org
        (now offline), salvaged from Wayback machine copies. <br />

        <h2>DS development > DS color depth.   16bit or 18bit?!?!</h2>
<div id="posts">
<div class="post">
    <h4>#176749 - narre - Tue Oct 04, 2011 12:04 am</h4>
    <div class="postbody"><span class="postbody">Wiki says that both ds lcds are capable of 18bit color depth(262,144 colors). But from what i've seen and read from the source code headers is that you can only have 16bit color depth at max.
<br/>
<br/>
I don't get this! Is there something i'm missing? How do you do the 18bit color depth programming on the ds?
<br/>
<br/>
Fyi, I'm trying to create a color palette color for my paint program and i need all the colors i can get. And I never had any experiences with color programming but I'm willing to learn. 
<br/>
<br/>
Thankxx in advance. ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176750 - elhobbs - Tue Oct 04, 2011 1:42 am</h4>
    <div class="postbody"><span class="postbody">you can only directly use 15 bit color. internally colors calculations are 18 bit. there is a thread on this already with a sample that shows the effect of blending 2 layers to get 18 bit color.
<br/>
<a href="http://forum.gbadev.org/viewtopic.php?t=15748&amp;highlight=18bit" target="_blank">http://forum.gbadev.org/viewtopic.php?t=15748&amp;highlight=18bit</a>
<br/>
<br/>
I used search to find this, crazy right? ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176751 - narre - Tue Oct 04, 2011 2:11 am</h4>
    <div class="postbody"><span class="postbody">LOL!! Thanks for the help. I did search with 18bit color keyword but the result was too much, around 12 pages. I read most of tutorials out there and i didn't find a clue how to do the 18bit color depth programming. N the main reason i posted here was because I don't have any experience with color.
<br/>
<br/>
Thanks a lot!!?# ;)</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176754 - sverx - Tue Oct 04, 2011 3:56 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>narre wrote:</b></span></td> </tr> <tr> <td class="quote">But from what i've seen and read from the source code headers is that you can only have 16bit color depth at max.</td> </tr></table><span class="postbody">
<br/>
<br/>
Actually the color is 15bpp, 5 bits for each component color. The high bit is used for alpha (mask) in some cases, for instance with bitmap BGs.
<br/>
<br/>
Mixing (alpha blending) two BGs you can obtain a REAL 6 bits for each component color, which gives in fact 18bpp images.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176769 - LOst? - Sat Oct 08, 2011 12:49 pm</h4>
    <div class="postbody"><span class="postbody">Sorry, this might be the stupidest question yet, but:
<br/>
<br/>
So it won't be possible to emulate a DS screen with just 16 bpp colors as some blending modes will not work?
<br/>
<br/>
18 bpp means that an emulator that emulates the DS screens must use at least 24 bpp or 32 bpp to emulate all colors correctly? Does this apply to GBA too?<br/>_________________<br/><span style="font-style: italic">Exceptions are fun</span></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176770 - headspin - Sat Oct 08, 2011 1:37 pm</h4>
    <div class="postbody"><span class="postbody">PC's these days have 32-bit colour as their default display mode so it doesn't really mean much.<br/>_________________<br/><a class="postlink" href="http://headsoft.com.au/index.php?category=warhawk" target="_blank">Warhawk DS</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=mmll" target="_blank">Manic Miner: The Lost Levels</a> | <a class="postlink" href="http://headsoft.com.au/index.php?category=tdg" target="_blank">The Detective Game</a></span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176776 - sverx - Mon Oct 10, 2011 10:45 am</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">So it won't be possible to emulate a DS screen with just 16 bpp colors as some blending modes will not work?</td> </tr></table><span class="postbody">
<br/>
<br/>
no$gba doesn't emulate that 18bpp mode, for instance. But it isn't so much important. Hardware does it, anyway.</span><span class="gensmall"></span></div>    
</div>
<div class="post">
    <h4>#176958 - Exophase - Mon Nov 07, 2011 9:32 pm</h4>
    <div class="postbody"><span class="postbody"></span><table align="center" border="0" cellpadding="3" cellspacing="1" width="90%"><tr> <td><span class="genmed"><b>LOst? wrote:</b></span></td> </tr> <tr> <td class="quote">Sorry, this might be the stupidest question yet, but:
<br/>
<br/>
So it won't be possible to emulate a DS screen with just 16 bpp colors as some blending modes will not work?
<br/>
<br/>
18 bpp means that an emulator that emulates the DS screens must use at least 24 bpp or 32 bpp to emulate all colors correctly? Does this apply to GBA too?</td> </tr></table><span class="postbody">
<br/>
<br/>
Doesn't apply to GBA.
<br/>
<br/>
Last I checked all the emulators out did everything in 16-bit, at least for the software renderers. The banding vs a real DS can be pretty noticeable, since there isn't any dithering. But it doesn't outright break things, per se.
<br/>
<br/>
I've always been under the impression that on DS the 2D layer mixing was done in 15-bit like on GBA. But we know that the 3D layer is 18-bit, and that's a possible source for the 3D compositor, so it stands to reason that it'd have to mix in 18-bit, even though there are still only 4 bits for the blend coefficients. Same is probably true for master brighten/darken modes.
<br/>
<br/>
Textures are 15-bit like mentioned.. also, per-vertex color information generated by the geometry engine is only 15-bit too, even though they could have made it higher. Gouraud shading is done in 18-bit, and I would expect texture combining and alpha blending to be too.
<br/>
<br/>
Note that while the 3D engine outputs 18-bit (plus 5 bits of alpha) the game can only capture 15-bit. So even if an emulator is wrong the game wouldn't necessarily be able to tell, depending on what's being done internally. Not that any DS emulators are that accurate otherwise.</span><span class="gensmall"></span></div>    
</div>
</div>

    </body>
</html>
